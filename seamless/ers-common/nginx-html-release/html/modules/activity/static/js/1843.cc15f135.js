(self.webpackChunk_unified_activity=self.webpackChunk_unified_activity||[]).push([[1843],{89111:(e,t,n)=>{"use strict";n.d(t,{ec:()=>He,bV:()=>H,OJ:()=>ne,U6:()=>j,X:()=>U,o2:()=>Le});var r=n(7560),a=n(55238),i=n(2411),o=n.n(i),l=n(74315),c=n(19721),s=n(29609);const u=function(){var e=(0,c.useSnackbar)().enqueueSnackbar,t=(0,s.useTranslation)().t;function n(e){var n=t("anErrorOccurred");return["resultMessage","message","resultDescription"].forEach((function(t){e.hasOwnProperty(t)&&(n=e[t])})),n}return{showSuccessMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"success"})},showErrorMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"error"})},showInfoMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"info"})},showWarningMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"warning"})}}};var d=n(61416);const m=n.n(d)();var p="/smas/v1";function f(e,t){return t?m(p+e,t):m(p+e)}function v(e,t){return m(p+e,{method:"PUT",body:t})}var g=n(34126),y="/activity",h=function(e){return f(y+"/".concat(e))},E=function(e){return f(y+"/product-variant/".concat(e))};const Z=function(e){var t=e.children,n=e.refresh,r=(0,s.useTranslation)().t,a=i.useState([]),o=(0,l.Z)(a,2),c=o[0],d=o[1],m=i.useState(!1),p=(0,l.Z)(m,2),v=p[0],h=p[1],E=u().showErrorMessage,Z=i.useState(0),T=(0,l.Z)(Z,2),w=T[0],C=T[1],b=function(e){var t=i.useState(e.page),n=(0,l.Z)(t,2),r=n[0],a=n[1],o=i.useState(e.perPage),c=(0,l.Z)(o,2),s=c[0],u=c[1],d=i.useState(e.order),m=(0,l.Z)(d,2),p=m[0],f=m[1],v=i.useState(e.orderBy),g=(0,l.Z)(v,2),y=g[0],h=g[1],E=i.useState(e.filter),Z=(0,l.Z)(E,2),T=Z[0],w=Z[1];return{page:r,perPage:s,order:p,orderBy:y,filter:T,onPageSizeChange:function(e){u(e)},onPageChange:function(e){a(e)},onOrderByChange:function(e){h(e)},onOrderChange:function(e){f(e)},onFilterChange:function(e,t,n){w({key:e,operator:t,value:n})},onReset:function(){a(e.page),u(e.perPage),h(e.orderBy),f(e.order),w(e.filter||{})}}}({page:0,perPage:20,order:"desc",orderBy:"activityId",filter:{key:"",operator:"",value:""}}),S=b.page,x=b.perPage,D=b.order,I=b.orderBy,P=b.filter,R=b.onPageSizeChange,A=b.onPageChange,M=b.onOrderByChange,k=b.onOrderChange,O=b.onReset,B=b.onFilterChange,z=function(e){return e&&(e=e.slice(0,19).replace("T"," ")),e},V=i.useCallback((function(){var e;h(!0),(e={sort:"".concat(I,"_").concat(null==D?void 0:D.toLowerCase()),page:S,perPage:x,filter:JSON.stringify([{key:P.key,operator:P.operator,value:P.value}])},f(y+"?".concat(g.stringify(e)))).then((function(e){if(0===e.resultCode){var t=e.activityDTOS.map((function(e){return{activityId:e.activityId,startTimestamp:z(e.startTimestamp),endTimestamp:z(e.endTimestamp),status:e.status,actionType:e.actionType,concept:e.concept,createdBy:e.createdBy,region:e.region,zipLoc:e.zip+" - "+e.location,childrenResellers:e.childrenResellers,productSalesGoals:e.productSalesGoals,createdTimestamp:z(e.createdTimestamp),approvedBy:e.approvedBy,approvalTimestamp:z(e.approvalTimestamp),requestorPosId:e.requestorPosId,parentDealerId:e.parentDealerId}}));d(t),C(e.totalRowCount)}else E(e)})).catch((function(e){return E(e.resultMessage||e.message||r("allActivityError"))})).finally((function(){return h(!1)}))}),[S,D,I,x,P,n]);return i.useEffect(V,[V]),i.createElement(i.Fragment,null,t({activities:c,loading:v,page:S,order:D,orderBy:I,perPage:x,filter:P,onPageSizeChange:R,onPageChange:A,onOrderByChange:M,onOrderChange:k,onFilterChange:B,onReset:O,totalRowCount:w}))};var T=n(44104),w=n.n(T),C=n(41744),b=n.n(C),S=n(77277),x=n(38592),D=n(24276),I=n(80030),P=n(90436),R=n(48049),A=n(21602),M=n(11746),k=n(37603);const O=function(e){var t=e.name,n=e.value,r=e.handleChange,a=e.disabled,o=void 0!==a&&a,c=e.required,d=void 0!==c&&c,m=i.useState([]),p=(0,l.Z)(m,2),v=p[0],g=p[1],y=i.useState(!1),h=(0,l.Z)(y,2),E=h[0],Z=h[1],T=u().showErrorMessage,w=i.useState(""),C=(0,l.Z)(w,2),b=C[0],S=C[1],x=(0,s.useTranslation)().t;return i.useEffect((function(){Z(!0),f("/activity/reason").then((function(e){return g(e.data)})).catch((function(e){return T(e)})).finally((function(){return Z(!1)}))}),[]),i.createElement(i.Fragment,null,i.createElement(k.SeamlessDropDown,{id:"reason-drop-down",fullWidth:!0,"aria-multiselectable":!0,disabled:o||E,required:d,label:x("reason"),helperText:b,options:[{id:"Choose",name:"Choose"}].concat((0,M.Z)(v)).map((function(e){return{value:e.name,key:e.name}})),name:t,value:n,onChange:function(e){return function(e){if(""===e||"Choose"===e)S(x("selectReason")),r("");else{var t,n=null===(t=v.find((function(t){return t.name===e})))||void 0===t?void 0:t.description;S(x("reasonDescription")+n)}"Choose"!=e&&r(e)}(e.target.value)}}))};var B=n(78384),z=n(67801);const V=function(e){var t,n=e.activities,r=e.loading,o=e.totalRowCount,c=e.handleApprove,u=e.handleCancel,d=e.page,m=e.order,p=(e.perPage,e.orderBy),f=(e.filter,e.onPageChange),v=e.onPageSizeChange,g=e.onFilterChange,y=e.onOrderByChange,h=e.onOrderChange,E=((0,a.Z)(e,["activities","loading","totalRowCount","handleApprove","handleCancel","page","order","perPage","orderBy","filter","onPageChange","onPageSizeChange","onFilterChange","onOrderByChange","onOrderChange"]),(0,s.useTranslation)().t),Z=null===(t=(0,A.Z)())||void 0===t?void 0:t.resellerType,T=window.config.activity.adminType,C=function(){return(0,B.k)(T,Z)},M=w()().checkPermission,k=i.useState(!1),V=(0,l.Z)(k,2),N=V[0],H=V[1],q=i.useState(!1),F=(0,l.Z)(q,2),L=F[0],_=F[1],W=i.useState(0),G=(0,l.Z)(W,2),U=G[0],K=G[1],Q=i.useState(""),Y=(0,l.Z)(Q,2),J=Y[0],X=Y[1],$=function(e){return e&&e.length>20&&(e=e.slice(0,20)+" ..."),e},ee=i.useCallback((function(e){e.filterModel.items[0].columnField&&e.filterModel.items[0].value&&e.filterModel.items[0].operatorValue?g(e.filterModel.items[0].columnField,e.filterModel.items[0].operatorValue,e.filterModel.items[0].value):g("","","")}),[]),te=[{field:"requestorPosId",headerName:E("requestorPosId"),sortable:!0,width:200,filterable:!0,renderCell:function(e){return i.createElement(I.ZP,{title:e.row.requestorPosId},i.createElement(P.Z,{variant:"caption"},$(e.row.requestorPosId)))}},{field:"parentDealerId",headerName:E("parentDealerId"),sortable:!0,width:200,filterable:!0,renderCell:function(e){return i.createElement(I.ZP,{title:e.row.parentDealerId},i.createElement(P.Z,{variant:"caption"},$(e.row.parentDealerId)))}},{field:"region",headerName:E("region"),sortable:!0,width:200,filterable:!0,renderCell:function(e){return i.createElement(I.ZP,{title:e.row.region},i.createElement(P.Z,{variant:"caption"},$(e.row.region)))}},{field:"createdTimestamp",headerName:E("createdTimestamp"),sortable:!0,width:200,filterable:!0,renderCell:function(e){return i.createElement(I.ZP,{title:e.row.createdTimestamp},i.createElement(P.Z,{variant:"caption"},$(e.row.createdTimestamp)))}},{field:"actionType",headerName:E("actionType"),sortable:!0,width:200,filterable:!0,renderCell:function(e){return i.createElement(I.ZP,{title:e.row.actionType},i.createElement(P.Z,{variant:"caption"},$(e.row.actionType)))}},{field:"status",headerName:E("status"),sortable:!0,width:200,filterable:!0,renderCell:function(e){return i.createElement(I.ZP,{title:e.row.status},i.createElement(P.Z,{variant:"caption"},$(e.row.status)))}},{field:"startTimestamp",headerName:E("startTimestamp"),sortable:!0,width:200,filterable:!0,renderCell:function(e){return i.createElement(I.ZP,{title:e.row.startTimestamp},i.createElement(P.Z,{variant:"caption"},$(e.row.startTimestamp)))}},{field:"endTimestamp",headerName:E("endTimestamp"),sortable:!0,width:200,filterable:!0,renderCell:function(e){return i.createElement(I.ZP,{title:e.row.endTimestamp},i.createElement(P.Z,{variant:"caption"},$(e.row.endTimestamp)))}},{field:"approvedBy",headerName:E("approvedBy"),sortable:!0,width:200,filterable:!0,renderCell:function(e){return i.createElement(I.ZP,{title:e.row.approvedBy},i.createElement(P.Z,{variant:"caption"},$(e.row.approvedBy)))}},{field:"approvalTimestamp",headerName:E("approvalTimestamp"),sortable:!0,width:200,filterable:!0,renderCell:function(e){return i.createElement(I.ZP,{title:e.row.approvalTimestamp},i.createElement(P.Z,{variant:"caption"},$(e.row.approvalTimestamp)))}},{field:"actions",headerName:E("actions","Actions"),filterable:!1,sortable:!1,renderCell:function(e){return i.createElement(x.Z,{size:"small",color:"primary",variant:"text","aria-label":"activity action buttons"},M(z.Z.viewActivityRecord)&&i.createElement(S.Z,{color:"primary",component:R.Link,to:"/home/activity/viewActivity/view/"+e.row.activityId},i.createElement(D.Z,{fontSize:"small"},"visibility")),M(z.Z.viewActivityRecord)&&C()&&"Pending Approval"==e.row.status&&i.createElement(S.Z,{color:"primary",component:R.Link,to:"/home/activity/viewActivity/edit/"+e.row.activityId},i.createElement(D.Z,{fontSize:"small"},"edit")),M(z.Z.rejectActivityRecord)&&(C()&&"Pending Approval"==e.row.status||!C()&&"Cancelled"!=e.row.status&&"Closed"!=e.row.status)&&i.createElement(S.Z,{onClick:function(){H(!0),K(e.row.activityId)}},i.createElement(D.Z,{fontSize:"small"},"cancel")),M(z.Z.approveActivityRecord)&&"Pending Approval"==e.row.status&&C()&&i.createElement(S.Z,{color:"primary",onClick:function(){_(!0),K(e.row.activityId)}},i.createElement(D.Z,{fontSize:"small"},"checkCircleOutline")))},width:190}];return i.createElement(i.Fragment,null,i.createElement(b(),{loading:r,onPageSizeChange:function(e){v(e.pageSize)},onPageChange:function(e){f(e.page)},columnBuffer:0,pagination:!0,paginationMode:"server",filterMode:"server",sortingMode:"server",page:d,rows:n,getRowId:function(e){return e.activityId},columns:te,onSortModelChange:function(e){e.sortModel[0]&&e.sortModel[0].sort?(y(e.sortModel[0].field),h(e.sortModel[0].sort)):(y(""),h("asc"))},sortModel:[{field:p,sort:m}],onFilterModelChange:ee,sortingOrder:["asc","desc"],rowCount:o}),i.createElement(j,{open:N,onClose:function(){return H(!1)},onOk:function(){u(U,J),H(!1),X("")},dialogTitle:E("cancelActivityConfirmationTitle"),dialogDescription:E("cancelActivityConfirmationDescription"),view:""!=J},i.createElement(O,{name:E("reason"),value:J,handleChange:function(e){X(e)}})),i.createElement(j,{open:L,onClose:function(){return _(!1)},onOk:function(){c(U),_(!1)},dialogTitle:E("approveActivityConfirmationTitle"),dialogDescription:"".concat(E("approveActivityConfirmationDescription")),view:!0}))},N=function(e){var t=e.children,n=u(),r=n.showErrorMessage,a=n.showSuccessMessage,o=(0,s.useTranslation)().t,c=i.useState(!1),d=(0,l.Z)(c,2),m=d[0],p=d[1];return i.createElement(i.Fragment,null,t({handleApprove:function(e){p(!0),function(e){return v(y+"/".concat(e,"/approve"))}(e).then((function(e){0===e.resultCode?a(o("activityApprovalSuccess")):r(e.resultDescription||o("cannotPerformApproval"))})).catch((function(e){return r(e.resultMessage||e.message||o("cannotPerformApproval"))})).finally((function(){return p(!1)}))},handleCancel:function(e,t){p(!0),function(e,t){return v(y+"/".concat(e,"/cancel/").concat(t))}(e,t).then((function(e){0===e.resultCode?a(o("activityCancellationSuccess")):r(e.resultDescription||o("cannotPerformCancellation"))})).catch((function(e){return r(e.resultMessage||e.message||o("cannotPerformCancellation"))})).finally((function(){return p(!1)}))},loading:m}))},H=function(e){return i.createElement(N,null,(function(e){var t=e.handleApprove,n=e.handleCancel,o=e.loading;return i.createElement(Z,{refresh:o},(function(e){var o=e.activities,l=e.loading,c=(0,a.Z)(e,["activities","loading"]);return i.createElement(V,(0,r.Z)({handleApprove:t,handleCancel:n,activities:o,loading:l},c))}))}))};var q=n(79692),F=n(12420),L=n(38724),_=n(6277),W=(0,q.Z)((function(e){return(0,F.Z)({root:{marginTop:e.spacing(5),width:"100%",padding:e.spacing(2)},dialogWrapper:{textAlign:"center","& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginTop:e.spacing(3),marginBottom:e.spacing(3)},btnSpace:{marginRight:e.spacing(2)},content:{textAlign:"left",maxHeight:400,minWidth:550,overflowY:"scroll"}})}));const j=function(e){var t=e.open,n=e.onClose,r=e.onOk,a=e.dialogTitle,o=e.dialogDescription,l=e.children,c=e.maxWidth,u=void 0===c?"md":c,d=e.contentStyle,m=void 0===d?"":d,p=e.disableBackdropClick,f=void 0!==p&&p,v=e.closeButtonText,g=void 0===v?null:v,y=e.okButtonText,h=void 0===y?null:y,E=e.view,Z=W(),T=(0,s.useTranslation)().t;return i.createElement(k.SeamlessDialog,{open:t,onClose:n,className:Z.dialogWrapper,maxWidth:u,fullWidth:!0,disableBackdropClick:f},i.createElement(k.SeamlessContainer,{title:a,description:o},i.createElement(i.Fragment,null,i.createElement(L.Z,{className:(0,_.default)(Z.content,m)},l),i.createElement(k.SeamlessButton,{type:"button",variant:"outlined",color:"primary",className:Z.btnSpace,onClick:n},g||T("activityDialogCloseButton")),r&&i.createElement(k.SeamlessButton,{type:"button",variant:"contained",color:"primary",onClick:r,disabled:!E},h||T("activityDialogConfirmationButton")))))};var G=n(18896);const U=function(e){var t=e.disable,n=void 0!==t&&t;return i.createElement(k.SeamlessButton,{component:R.Link,to:"/home/activity/create",variant:"contained",color:"primary",disabled:n,endIcon:i.createElement(G.Z,null)},"Create Activity")};var K=n(33553),Q=n(94339),Y=n(24579),J=n(85256),X=n(64874),$=(0,q.Z)((function(e){return(0,F.Z)({btnSpacing:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},spacingTop:{marginTop:e.spacing(3)},spacingBottom:{marginBottom:e.spacing(3)},colHead:{textTransform:"capitalize",fontWeight:"bold"},rowSpacing:{marginBottom:e.spacing(2)},fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{textTransform:"capitalize",fontSize:14}})}));const ee=function(e){var t,n=e.activityData,r=e.loading,a=e.handleApprove,i=e.handleCancel,c=null===(t=(0,A.Z)())||void 0===t?void 0:t.resellerType,u=window.config.activity.adminType,d=function(){return(0,B.k)(u,c)},m=w()().checkPermission,p=(0,s.useTranslation)().t,f=$(),v=o().useState(!1),g=(0,l.Z)(v,2),y=g[0],h=g[1],E=o().useState(!1),Z=(0,l.Z)(E,2),T=Z[0],C=Z[1],b=o().useState(""),S=(0,l.Z)(b,2),x=S[0],D=S[1],I=o().useState(!1),M=(0,l.Z)(I,2),V=M[0],N=(M[1],o().useState(!1)),H=(0,l.Z)(N,2),q=H[0],F=(H[1],function(e){return e&&(e=e.slice(0,19).replace("T"," ")),e});return o().createElement(K.Z,{display:"flex",flexDirection:"column"},m(z.Z.approveActivityRecord)||m(z.Z.rejectActivityRecord)||m(z.Z.editActivityRecord)||o().createElement(o().Fragment,null,o().createElement(K.Z,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},o().createElement("div",null,m(z.Z.approveActivityRecord)&&o().createElement(k.SeamlessButton,{onClick:function(){C(!0)},color:"primary",disabled:r||!d()||"Pending Approval"!=n.status||V,variant:"contained",className:f.btnSpacing},p("approve")),m(z.Z.rejectActivityRecord)&&o().createElement(k.SeamlessButton,{onClick:function(){h(!0)},color:"primary",disabled:r||"Pending Approval"!=n.status&&d()||q||"Cancelled"===n.status||"Closed"===n.status,variant:"contained",className:f.btnSpacing},p("cancel"))),o().createElement("div",null,m(z.Z.editActivityRecord)&&o().createElement(o().Fragment,null,d()&&"Pending Approval"===n.status&&o().createElement(R.Link,{to:"/home/activity/viewActivity/edit/".concat(null==n?void 0:n.activityId),style:{textAlign:"right"}},o().createElement(X.Z,{fontSize:"small"}))))),o().createElement(J.Z,{className:(0,_.default)(f.spacingTop,f.spacingBottom)})),o().createElement(P.Z,{variant:"subtitle1",color:"primary"},p("activityInformation","Activity Information")),o().createElement(K.Z,{p:2,borderRadius:6,display:"flex",flexDirection:"row"},o().createElement(K.Z,{display:"flex",flexDirection:"column",width:"50%"},o().createElement(K.Z,{display:"flex",flexDirection:"row"},o().createElement(Q.Z,{elevation:0},o().createElement(Y.Z,null,o().createElement(P.Z,{variant:"body1"},p("activityId")),o().createElement(P.Z,{variant:"caption"},null==n?void 0:n.activityId)))),o().createElement(K.Z,{display:"flex",flexDirection:"row"},o().createElement(Q.Z,{elevation:0},o().createElement(Y.Z,null,o().createElement(P.Z,{variant:"body1"},p("activityConcept")),o().createElement(P.Z,{variant:"caption"},null==n?void 0:n.concept)))),o().createElement(K.Z,{display:"flex",flexDirection:"column",width:"50%"},o().createElement(K.Z,{display:"flex",flexDirection:"row"},o().createElement(Q.Z,{elevation:0},o().createElement(Y.Z,null,o().createElement(P.Z,{variant:"body1"},p("createdTimestamp")),o().createElement(P.Z,{variant:"caption"},F(null==n?void 0:n.createdTimestamp))))))),o().createElement(K.Z,{display:"flex",flexDirection:"column",width:"50%"},o().createElement(K.Z,{display:"flex",flexDirection:"row"},o().createElement(Q.Z,{elevation:0},o().createElement(Y.Z,null,o().createElement(P.Z,{variant:"body1"},p("createdBy")),o().createElement(P.Z,{variant:"caption"},null==n?void 0:n.createdBy)))),o().createElement(K.Z,{display:"flex",flexDirection:"row"},o().createElement(Q.Z,{elevation:0},o().createElement(Y.Z,null,o().createElement(P.Z,{variant:"body1"},p("actionType")),o().createElement(P.Z,{variant:"caption"},null==n?void 0:n.actionType))))),o().createElement(K.Z,{display:"flex",flexDirection:"column",width:"50%"},o().createElement(K.Z,{display:"flex",flexDirection:"row"},o().createElement(Q.Z,{elevation:0},o().createElement(Y.Z,null,o().createElement(P.Z,{variant:"body1"},p("statusValue")),o().createElement(P.Z,{variant:"caption"},null==n?void 0:n.status)))),(null==n?void 0:n.reason)&&o().createElement(K.Z,{display:"flex",flexDirection:"row"},o().createElement(Q.Z,{elevation:0},o().createElement(Y.Z,null,o().createElement(P.Z,{variant:"body1"},p("reason")),o().createElement(P.Z,{variant:"caption"},null==n?void 0:n.reason)))))),o().createElement(P.Z,{variant:"subtitle1",color:"primary"},o().createElement(J.Z,{className:(0,_.default)(f.spacingTop,f.spacingBottom)}),p("activityAddressInformation","Address")),o().createElement(K.Z,{p:2,borderRadius:6,display:"flex",flexDirection:"row"},o().createElement(K.Z,{display:"flex",flexDirection:"column",width:"50%"},o().createElement(K.Z,{display:"flex",flexDirection:"row"},o().createElement(Q.Z,{elevation:0},o().createElement(Y.Z,null,o().createElement(P.Z,{variant:"body1"},p("region")),o().createElement(P.Z,{variant:"caption"},null==n?void 0:n.region))))),o().createElement(K.Z,{display:"flex",flexDirection:"column",width:"50%"},o().createElement(K.Z,{display:"flex",flexDirection:"row"},o().createElement(Q.Z,{elevation:0},o().createElement(Y.Z,null,o().createElement(P.Z,{variant:"body1"},p("zip")),o().createElement(P.Z,{variant:"caption"},null==n?void 0:n.zip))))),o().createElement(K.Z,{display:"flex",flexDirection:"column",width:"50%"},o().createElement(K.Z,{display:"flex",flexDirection:"row"},o().createElement(Q.Z,{elevation:0},o().createElement(Y.Z,null,o().createElement(P.Z,{variant:"body1"},p("location")),o().createElement(P.Z,{variant:"caption"},null==n?void 0:n.location)))))),o().createElement(P.Z,{variant:"subtitle1",color:"primary"},o().createElement(J.Z,{className:(0,_.default)(f.spacingTop,f.spacingBottom)}),p("activityTimeInformation","Duration")),o().createElement(K.Z,{p:2,borderRadius:6,display:"flex",flexDirection:"row"},o().createElement(K.Z,{display:"flex",flexDirection:"column",width:"50%"},o().createElement(K.Z,{display:"flex",flexDirection:"row"},o().createElement(Q.Z,{elevation:0},o().createElement(Y.Z,null,o().createElement(P.Z,{variant:"body1"},p("startTimestamp")),o().createElement(P.Z,{variant:"caption"},F(null==n?void 0:n.startTimestamp)))))),o().createElement(K.Z,{display:"flex",flexDirection:"column",width:"50%"},o().createElement(K.Z,{display:"flex",flexDirection:"row"},o().createElement(Q.Z,{elevation:0},o().createElement(Y.Z,null,o().createElement(P.Z,{variant:"body1"},p("endTimestamp")),o().createElement(P.Z,{variant:"caption"},F(null==n?void 0:n.endTimestamp))))))),o().createElement(P.Z,{variant:"subtitle1",color:"primary"},o().createElement(J.Z,{className:(0,_.default)(f.spacingTop,f.spacingBottom)}),p("activityResellerInformation","Resellers")),o().createElement(K.Z,{p:2,borderRadius:6,display:"flex",flexDirection:"row"},o().createElement(K.Z,{display:"flex",flexDirection:"column",width:"50%"},o().createElement(K.Z,{display:"flex",flexDirection:"row"},o().createElement(Q.Z,{elevation:0},o().createElement(Y.Z,null,o().createElement(P.Z,{variant:"body1"},p("childrenResellers")),o().createElement(P.Z,{variant:"caption"},null==n?void 0:n.childrenResellers)))))),o().createElement(P.Z,{variant:"subtitle1",color:"primary"},o().createElement(J.Z,{className:(0,_.default)(f.spacingTop,f.spacingBottom)}),p("activityProductInformation","Product Sales Goals")),o().createElement(K.Z,{p:2,borderRadius:6,display:"flex",flexDirection:"row"},o().createElement(K.Z,{display:"flex",flexDirection:"column",width:"50%"},o().createElement(K.Z,{display:"flex",flexDirection:"row"},o().createElement(Q.Z,{elevation:0},o().createElement(Y.Z,null,o().createElement(P.Z,{variant:"body1"},p("productSalesGoals")),o().createElement(P.Z,{variant:"caption"},null==n?void 0:n.productSalesGoals)))))),o().createElement(P.Z,{variant:"subtitle1",color:"primary"},o().createElement(J.Z,{className:(0,_.default)(f.spacingTop,f.spacingBottom)}),p("activityApprovalInformation","Approval Information")),n&&n.approvedBy?o().createElement(K.Z,{p:2,borderRadius:6,display:"flex",flexDirection:"row"},o().createElement(K.Z,{display:"flex",flexDirection:"column",width:"50%"},o().createElement(K.Z,{display:"flex",flexDirection:"row"},o().createElement(Q.Z,{elevation:0},o().createElement(Y.Z,null,o().createElement(P.Z,{variant:"body1"},p("approvedBy")),o().createElement(P.Z,{variant:"caption"},null==n?void 0:n.approvedBy))))),o().createElement(K.Z,{display:"flex",flexDirection:"column",width:"50%"},o().createElement(K.Z,{display:"flex",flexDirection:"row"},o().createElement(Q.Z,{elevation:0},o().createElement(Y.Z,null,o().createElement(P.Z,{variant:"body1"},p("approvalTimestamp")),o().createElement(P.Z,{variant:"caption"},F(null==n?void 0:n.approvalTimestamp))))))):o().createElement(P.Z,{variant:"caption"},"This Activity has not been approved"),o().createElement(j,{open:y,onClose:function(){return h(!1)},onOk:function(){i(n.activityId,x),h(!1),D("")},dialogTitle:p("cancelActivityConfirmationTitle"),dialogDescription:p("cancelActivityConfirmationDescription"),view:""!=x},o().createElement(O,{name:p("reason"),value:x,handleChange:function(e){D(e)}})),o().createElement(j,{open:T,onClose:function(){return C(!1)},onOk:function(){a(n.activityId),C(!1)},dialogTitle:p("approveActivityConfirmationTitle"),dialogDescription:"".concat(p("approveActivityConfirmationDescription")),view:!0}))},te=function(e){var t=e.children,n=e.id,r=e.refresh,a=u().showErrorMessage,o=i.useState(!1),c=(0,l.Z)(o,2),s=c[0],d=c[1],m=i.useState(),p=(0,l.Z)(m,2),f=p[0],v=p[1];return i.useEffect((function(){d(!0),h(n).then((function(e){if(d(!1),e.activityDTO){var t=e.activityDTO;t&&v(t)}})).catch((function(e){return a(e)})).finally((function(){return d(!1)}))}),[r]),f?i.createElement(i.Fragment,null,t({activityData:f,loading:s})):i.createElement("div",null)},ne=function(e){var t=e.id;return i.createElement(N,null,(function(e){var n=e.handleApprove,o=e.handleCancel,l=e.loading;return i.createElement(te,{refresh:l,id:t},(function(e){var t=e.activityData,l=e.loading,c=(0,a.Z)(e,["activityData","loading"]);return i.createElement(ee,(0,r.Z)({handleApprove:n,handleCancel:o,activityData:t,loading:l},c))}))}))};var re=n(19258),ae=n(8526);n(77114);var ie=n(38670);const oe=function(e){var t=e.children,n=e.refresh,r=(e.resellerId,(0,s.useTranslation)().t),a=i.useState(!1),o=(0,l.Z)(a,2),c=o[0],d=o[1],m=i.useState([]),p=(0,l.Z)(m,2),f=p[0],v=p[1],g=u().showErrorMessage,y=window.config.activity.createActivityRTP,h=i.useCallback((function(){d(!0),E(y).then((function(e){null!=e.productVariants?v(e.productVariants):g(e)})).catch((function(e){return g(e.resultMessage||e.message||r("productError"))})).finally((function(){return d(!1)}))}),[]);return i.useEffect(h,[n,h]),i.createElement(i.Fragment,null,t({products:f,loading:c}))};var le=n(63525);const ce=function(e){var t=e.loading,n=e.products,r=e.handleEditCellChangeCommitted,a=e.onSelectionModelChange,o=e.selectionModel,l=(0,s.useTranslation)().t,c=[{field:"sku",headerName:l("sku"),sortable:!0,flex:1},{field:"code",headerName:l("code"),sortable:!0,flex:1},{field:"name",headerName:l("name"),sortable:!0,flex:1},{field:"category",headerName:l("category"),sortable:!0,flex:1},{field:"goals",headerName:l("goals"),sortable:!1,flex:1,editable:!0}],u={Toolbar:function(){return i.createElement(le.DSK,null)}};return i.createElement(le._$r,{loading:t,columnBuffer:2,components:u,rows:n,getRowId:function(e){return e.sku},columns:c,checkboxSelection:!0,disableSelectionOnClick:!0,onEditCellChangeCommitted:r,onSelectionModelChange:a,selectionModel:o})};(0,q.Z)((function(e){return(0,F.Z)({button:{},element:{margin:e.spacing(1)}})}));const se=function(e){var t=e.children,n=e.activityId,r=e.refresh,a=e.resellerId,o=(0,s.useTranslation)().t,c=u().showErrorMessage,d=i.useState(!1),m=(0,l.Z)(d,2),p=m[0],f=m[1],v=i.useState(),g=(0,l.Z)(v,2),y=g[0],Z=g[1],T=i.useState([]),w=(0,l.Z)(T,2),C=w[0],b=w[1],S=window.config.activity.adminType,x=i.useCallback((function(){f(!0),h(n).then((function(e){if(e.activityDTO){var t=e.activityDTO;t&&Z(t)}})).catch((function(e){return c(e.message||e.resultDescription||o("getActivityError"))})),E(S.includes(a)?"OPR-".concat(n):"DLR-".concat(n)).then((function(e){b(e.productVariants)})).catch((function(e){return c(e.message||e.resultDescription||o("getProductError"))})).finally((function(){return f(!1)}))}),[]);return i.useEffect((function(){x()}),[r,x]),y?(y.zip="".concat(null==y?void 0:y.zip,"-").concat(null==y?void 0:y.location),i.createElement(i.Fragment,null,t({activityData:y,loading:p,products:C}))):i.createElement("div",null)};var ue=n(51119),de=n(86619),me=n(98069),pe=n(22759),fe=n(7089),ve=n(21324),ge=n(71658);const ye=function(e){var t=e.children,n=e.id,r=(0,s.useTranslation)().t,a=i.useState([]),o=(0,l.Z)(a,2),c=o[0],d=o[1],m=i.useState(!1),p=(0,l.Z)(m,2),v=p[0],g=p[1],h=u().showErrorMessage;return i.useEffect((function(){var e;g(!0),(e=n,f(y+"/child-reseller/".concat(e))).then((function(e){0===e.resultCode?d(e.data):h(e.resultDescription||r("resellerError"))})).catch((function(e){return h(r("resellerError"))})).finally((function(){return g(!1)}))}),[n]),i.createElement(i.Fragment,null,t({resellersData:c,loading:v}))},he=function(e){var t=e.currentReseller,n=(e.resellers,e.selectReseller),a=e.value,o=e.error,l=e.helperText,c=(0,s.useTranslation)().t,u=function(e,t,r,a){n(t)},d=function(e){return e.filter((function(e){return a.includes(e.resellerId)}))};return i.createElement(ye,{id:t},(function(e){var t=e.resellersData;return e.loading?i.createElement(P.Z,{component:"div",variant:"h3"},i.createElement(me.Z,null),i.createElement(me.Z,{height:60})):i.createElement(pe.ZP,{multiple:!0,style:{width:800},limitTags:4,PopperComponent:Ee,id:"activity-resellers-autocomplete",options:t.map((function(e){return e})),getOptionLabel:function(e){return e.resellerId},onChange:u,defaultValue:d(t),renderTags:function(e,t){return e.map((function(e,n){return i.createElement(fe.Z,(0,r.Z)({label:e.resellerId,color:"primary"},t({index:n})))}))},renderOption:function(e,n){return n.selected,i.createElement(i.Fragment,null,i.createElement(ve.Z,{icon:i.createElement(D.Z,{color:"primary"},"check_box_outline_blank"),checkedIcon:i.createElement(D.Z,{color:"secondary"},"check_box"),style:{marginRight:8},checked:d(t).some((function(t){return t.resellerId===e.resellerId}))}),e.resellerId)},disableCloseOnSelect:!0,renderInput:function(e){return i.createElement(de.Z,(0,r.Z)({},e,{variant:"outlined",label:c("resellerList"),placeholder:c("resellers"),name:"reseller-children-list",id:"reseller-children-list",error:o,helperText:l}))}})}))};var Ee=function(e){return i.createElement(ge.Z,(0,r.Z)({},e,{style:{width:800,zIndex:1600},placement:"bottom-start",disablePortal:!0,modifiers:{offset:{enabled:!0,offset:"0, 0"}}}))};const Ze=function(e){var t=e.children,n=i.useState([]),r=(0,l.Z)(n,2),a=r[0],o=r[1],c=i.useState(!1),s=(0,l.Z)(c,2),d=s[0],m=s[1],p=u().showErrorMessage;return i.useEffect((function(){m(!0),f("/activity/region").then((function(e){0===e.resultCode?o(e.data):p(e)})).catch((function(e){return p("[Region] Unexpected Error")})).finally((function(){return m(!1)}))}),[]),i.createElement(i.Fragment,null,t({regions:a,loading:d}))},Te=function(e){var t=e.children,n=i.useState([]),r=(0,l.Z)(n,2),a=r[0],o=r[1],c=i.useState(!1),s=(0,l.Z)(c,2),d=s[0],m=s[1],p=u().showErrorMessage;return i.useEffect((function(){m(!0),f("/activity/concept").then((function(e){0===e.resultCode?o(e.data):p(e.resultDescription)})).catch((function(e){return p("[Concept] Unexpected Error")})).finally((function(){return m(!1)}))}),[]),i.createElement(i.Fragment,null,t({concepts:a,loading:d}))},we=function(e){var t=e.children,n=e.region,r=i.useState(!1),a=(0,l.Z)(r,2),o=a[0],c=a[1],s=i.useState([]),d=(0,l.Z)(s,2),m=d[0],p=d[1],v=u().showErrorMessage;return i.useEffect((function(){""!==n&&function(e){return f(y+"/zip-location/".concat(e))}(n).then((function(e){0===e.resultCode?p(e.data):v(e)})).catch((function(e){return v("[Zip-Location] Unexpected Error")})).finally((function(){return c(!1)}))}),[n]),i.createElement(i.Fragment,null,t({zips:m,loading:o}))},Ce=function(e){var t=e.children,n=i.useState([]),r=(0,l.Z)(n,2),a=r[0],o=r[1],c=i.useState(!1),s=(0,l.Z)(c,2),d=s[0],m=s[1],p=u().showErrorMessage;return i.useEffect((function(){m(!0),f("/activity/action").then((function(e){0===e.resultCode?o(e.data):p(e)})).catch((function(e){return p("[Action] Unexpected Error")})).finally((function(){return m(!1)}))}),[]),i.createElement(i.Fragment,null,t({actions:a,loading:d}))};var be=n(61564),Se=n(86324),xe=n(95549),De=n(94106),Ie=n(46491),Pe=n(27068);function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){(0,ue.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Me=(0,xe.D)(),ke=ae.Ry().shape({startTimestamp:ae.Z_().required(),endTimestamp:ae.Z_().required(),actionType:ae.Z_().required(),region:ae.Z_().required(),concept:ae.Z_().required(),zip:ae.Z_().required(),childrenResellers:ae.Z_().required(),productSalesGoals:ae.Z_().required()}),Oe=(0,q.Z)((function(e){return(0,F.Z)({label:{color:e.palette.text.secondary,fontSize:e.typography.body2.fontSize,marginBottom:6,textTransform:"capitalize"},root:{"& .MuiInput-underline:before":{width:"95%",margin:"0 auto",borderWidth:2},"& .MuiInput-underline:after":{width:2,margin:"0 auto"},"& .MuiInputAdornment-root":{color:e.palette.grey[800]}},input:{borderRadius:6,padding:10,backgroundColor:e.palette.grey[200]},keyboardpicker:{width:"100%"},elements:{marginRight:e.spacing(2)}})}));const Be=function(e){var t=e.data,n=e.onFormSubmit,o=e.resellerId,c=e.products,d=e.loading,m=e.selectedSKU,p=e.createMode,f=e.id,v=(0,s.useTranslation)().t,g=u(),y=(g.showErrorMessage,g.showSuccessMessage,g.showInfoMessage,g.showWarningMessage,i.useState(c)),h=(0,l.Z)(y,2),E=h[0],Z=h[1],T=i.useState([]),w=(0,l.Z)(T,2),C=w[0],b=w[1],S=i.useState([]),x=(0,l.Z)(S,2),D=x[0],I=x[1],P=i.useState(""),R=(0,l.Z)(P,2),A=R[0],O=R[1],B=i.useState(t.zip),z=(0,l.Z)(B,2),V=z[0],N=z[1],H=i.useState(t.actionType),q=(0,l.Z)(H,2),F=q[0],L=q[1],W=i.useState(t.concept),j=(0,l.Z)(W,2),G=j[0],U=j[1],Q=i.useState(t.region),Y=(0,l.Z)(Q,2),J=Y[0],X=Y[1],$=window.config.activity.adminType,ee=Oe(),te=(0,ie.useSelector)((function(e){return e.auth})).user;i.useEffect((function(){Z(c),m&&b(m)}),[c,m]);var ne=function(e){return"Invalid Date"===e},ae=(0,De.cI)({mode:"onSubmit",defaultValues:t,resolver:(0,Ie.X)(ke),reValidateMode:"onChange"}),oe=(ae.register,ae.getValues),le=ae.errors,se=ae.control,ue=ae.handleSubmit,me=ae.setValue,fe=(ae.reset,ae.setError),ve=ae.clearErrors,ge=(0,De.Dq)({name:"data",control:se}),ye=(ge.fields,ge.append,ge.remove,oe()),Ee=(new Date).getTime(),xe=i.useCallback((function(e){var t=e.id,n=e.field,r=e.props;if("goals"===n){var a=r,i=E.map((function(e){return e.sku===t?Ae(Ae({},e),{},{goals:a.value.toString()}):e}));Z(i)}}),[E]);i.useEffect((function(){var e=E.filter((function(e){return C.includes(e.sku)})).map((function(e){return{sku:e.sku,goals:e.goals}})).reduce((function(e,t){return"".concat(e)+", "+"".concat(t.goals," ").concat(t.sku)}),"");me("productSalesGoals",e)}),[C,E,ye]);var Re=function(e){b(e.selectionModel)},Be=function(e){I(e);var t=e.reduce((function(e,t){return"".concat(e).concat(t.resellerId,", ")}),"");me("childrenResellers",t)};return i.createElement(K.Z,{display:"flex",flexDirection:"column"},i.createElement(K.Z,{display:"flex",flexDirection:"row",mt:2},i.createElement(De.Qr,{control:se,name:"childrenResellers",rules:{required:!0},render:function(e){return(0,r.Z)({},e),i.createElement(he,{currentReseller:$.includes(o)?t.createdBy:te.requestedPrincipalId,resellers:D,selectReseller:Be,value:ye.childrenResellers,error:!(null==le||!le.childrenResellers),helperText:null!=le&&le.childrenResellers?v("childrenResellersError"):v("childrenResellersHelperText")})}})),i.createElement(K.Z,{display:"flex",flexDirection:"row",mt:2},i.createElement(K.Z,{mr:1,width:"25%"},i.createElement(be.M,{utils:re.Z},i.createElement(De.Qr,{control:se,name:"startTimestamp",rules:{required:!0},defaultValue:ye.startTimestamp,render:function(e){var t=e.onChange,n=e.ref,o=(0,a.Z)(e,["onChange","ref"]);return i.createElement(Se.B,(0,r.Z)({required:!0,fullWidth:!0,error:Boolean(le.startTimestamp||ne(ye.startTimestamp)),helperText:le.startTimestamp||ne(ye.startTimestamp)?v("dateError"):v("startTimeHelperText"),autoOk:!0,className:(0,_.default)(ee.keyboardpicker,ee.elements),ampm:!1,defaultValue:ye.startTimestamp,disableToolbar:!0,variant:"inline",format:"yyyy-MM-dd HH:mm:ss",margin:"normal",id:"startTimestamp",placeholder:v("startTimestamp"),disablePast:!0,onChange:function(e){null!=e&&e.getDate()?((null==le?void 0:le.startTimestamp)&&ve("startTimestamp"),t((0,Pe.Z)(e,"yyyy-MM-dd HH:mm:ss"))):(fe("startTimestamp",{type:"manual",message:null==e?void 0:e.toString()}),t(e))},KeyboardButtonProps:{"aria-label":"change date"},dateRangeIcon:{color:"secondary"},inputRef:n},o,{minDate:Ee}))}}))),i.createElement(K.Z,{mr:1,width:"25%"},i.createElement(be.M,{utils:re.Z},i.createElement(De.Qr,{control:se,name:"endTimestamp",rules:{required:!0},render:function(e){var n=e.onChange,o=e.ref,l=(0,a.Z)(e,["onChange","ref"]);return i.createElement(Se.B,(0,r.Z)({required:!0,fullWidth:!0,autoOk:!0,ampm:!1,defaultValue:ye.endTimestamp,error:Boolean(le.endTimestamp||ne(ye.endTimestamp)),helperText:le.endTimestamp||ne(ye.endTimestamp)?v("dateError"):v("endTimeHelperText"),className:(0,_.default)(ee.keyboardpicker,ee.elements),disableToolbar:!0,variant:"inline",format:"yyyy-MM-dd HH:mm:ss",margin:"normal",id:"endTimestamp",placeholder:v("endTimestamp"),disablePast:!0,onChange:function(e){null!=e&&e.getDate()?((null==le?void 0:le.endTimestamp)&&ve("endTimestamp"),n((0,Pe.Z)(e,"yyyy-MM-dd HH:mm:ss"))):(fe("endTimestamp",{type:"manual",message:null==e?void 0:e.toString()}),n(e))},KeyboardButtonProps:{"aria-label":"change date"},dateRangeIcon:{color:"secondary"},inputRef:o},l,{minDate:new Date(new Date(t.startTimestamp).getTime()+864e5)}))}})))),i.createElement(K.Z,{display:"flex",flexDirection:"row",mt:2},i.createElement(K.Z,{mr:1,width:"25%"},p?i.createElement(Ze,null,(function(e){var t=e.regions;return e.loading,i.createElement(De.Qr,{control:se,name:"region",defaultValue:ye.region,render:function(e){var n=e.onChange;return e.ref,(0,a.Z)(e,["onChange","ref"]),i.createElement(pe.ZP,{onChange:function(e,t){"string"==typeof t?(n(t),O(t)):t&&t.name?(n(t.name),O(t.name)):(n(null==t?void 0:t.name),O((null==t?void 0:t.name)||""))},filterOptions:function(e,t){var n=Me(e,t);return""!==t.inputValue&&n.push({name:t.inputValue,description:'Add "'.concat(t.inputValue,'"')}),n},selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,id:"region",options:t,value:null!=ye.region?ye.region:"",getOptionLabel:function(e){return"string"==typeof e?e:(e.name,e.name)},renderOption:function(e){return e.name},style:{width:250},freeSolo:!0,renderInput:function(e){return i.createElement(de.Z,(0,r.Z)({},e,{size:"small",label:v("region"),variant:"filled",margin:"dense",error:!(null==le||!le.region),helperText:null!=le&&le.region?v("regionError"):v("regionHelperText"),InputLabelProps:{className:(0,_.default)(ee.label)}}))}})}})})):i.createElement(Ze,null,(function(e){var t=e.regions;return e.loading,i.createElement(De.Qr,{control:se,name:"region",defaultValue:ye.region,render:function(e){var n=e.onChange;return e.ref,(0,a.Z)(e,["onChange","ref"]),i.createElement(pe.ZP,{onChange:function(e,t){"string"==typeof t?(n(t),X(t)):t&&t.name?(n(t.name),X(t.name)):(n(null==t?void 0:t.name),X((null==t?void 0:t.name)||""))},filterOptions:function(e,t){var n=Me(e,t);return""!==t.inputValue&&n.push({name:t.inputValue,description:'Add "'.concat(t.inputValue,'"')}),n},selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,id:"region",options:t,value:null!=ye.region?ye.region:"",getOptionLabel:function(e){return"string"==typeof e?e:(e.name,e.name)},renderOption:function(e){return e.name},style:{width:250},freeSolo:!0,renderInput:function(e){return i.createElement(de.Z,(0,r.Z)({},e,{size:"small",label:v("region"),variant:"filled",margin:"dense",error:!(null==le||!le.region),helperText:null!=le&&le.region?v("regionError"):v("regionHelperText"),InputLabelProps:{className:(0,_.default)(ee.label)}}))}})}})}))),i.createElement(K.Z,{mr:1,width:"25%"},p?i.createElement(we,{region:A},(function(e){var t=e.zips;return e.loading,i.createElement(De.Qr,{control:se,name:"zip",defaultValue:ye.zip,render:function(e){var n=e.onChange;return e.ref,(0,a.Z)(e,["onChange","ref"]),i.createElement(pe.ZP,{onChange:function(e,t){"string"==typeof t?n(t):t&&t.name&&n(t.name)},filterOptions:function(e,t){var n=Me(e,t);return""!==t.inputValue&&n.push({name:t.inputValue,description:'Add "'.concat(t.inputValue,'"')}),n},selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,id:"free-solo-with-text-demo",options:t,getOptionLabel:function(e){return"string"==typeof e?e:(e.name,e.name)},renderOption:function(e){return e.name},style:{width:250},freeSolo:!0,renderInput:function(e){return i.createElement(de.Z,(0,r.Z)({},e,{size:"small",label:v("zipLoc"),variant:"filled",margin:"dense",error:!(null==le||!le.zip),helperText:null!=le&&le.zip?v("zipError"):v("zipHelperText"),InputLabelProps:{className:(0,_.default)(ee.label)}}))}})}})})):i.createElement(we,{region:J},(function(e){var t=e.zips;return e.loading,i.createElement(De.Qr,{control:se,name:"zip",defaultValue:ye.zip,render:function(e){var n=e.onChange;return e.ref,(0,a.Z)(e,["onChange","ref"]),i.createElement(pe.ZP,{onChange:function(e,t){"string"==typeof t?(n(t),N(t)):t&&t.name&&(n(t.name),N(t.name))},filterOptions:function(e,t){var n=Me(e,t);return""!==t.inputValue&&n.push({name:t.inputValue,description:'Add "'.concat(t.inputValue,'"')}),n},selectOnFocus:!0,clearOnBlur:!0,value:V,handleHomeEndKeys:!0,id:"free-solo-with-text-demo",options:t,getOptionLabel:function(e){return"string"==typeof e?e:(e.name,e.name)},renderOption:function(e){return e.name},style:{width:250},freeSolo:!0,renderInput:function(e){return i.createElement(de.Z,(0,r.Z)({},e,{size:"small",label:v("zipLoc"),variant:"filled",margin:"dense",error:!(null==le||!le.zip),helperText:null!=le&&le.zip?v("zipError"):v("zipHelperText"),InputLabelProps:{className:(0,_.default)(ee.label)}}))}})}})})))),i.createElement(K.Z,{display:"flex",flexDirection:"row",mt:2},i.createElement(K.Z,{mr:1,width:"25%"},p?i.createElement(Ce,null,(function(e){var t=e.actions,n=e.loading;return i.createElement(De.Qr,{control:se,name:"actionType",render:function(e){var r=e.onChange;return e.ref,(0,a.Z)(e,["onChange","ref"]),i.createElement(de.Z,{className:ee.root,id:"actionType-drop-down",fullWidth:!0,"aria-multiselectable":!0,disabled:n,required:!0,error:!(null==le||!le.actionType),helperText:null!=le&&le.actionType?v("actionError"):v("actionHelperText"),label:v("action"),select:!0,SelectProps:{native:!0},inputProps:{className:ee.input},name:"actionType",onChange:function(e){return r(e)},onInputCapture:function(){return ye.actionType}},[{name:"Choose",description:"Description"}].concat((0,M.Z)(t)).map((function(e){return i.createElement("option",{key:e.name,value:"Choose"!=e.name?e.name:""},"Choose"!=e.name?e.name.concat(" - ".concat(e.description)):e.name)})))}})})):i.createElement(Ce,null,(function(e){var t=e.actions,n=e.loading;return i.createElement(De.Qr,{control:se,name:"actionType",render:function(e){var r=e.onChange;return e.ref,(0,a.Z)(e,["onChange","ref"]),i.createElement(de.Z,{className:ee.root,id:"actionType-drop-down",fullWidth:!0,"aria-multiselectable":!0,disabled:n,required:!0,error:!(null==le||!le.actionType),helperText:null!=le&&le.actionType?v("actionError"):v("actionHelperText"),label:v("action"),select:!0,SelectProps:{native:!0},inputProps:{className:ee.input},name:"actionType",value:F,onChange:function(e){r(e),L(e.target.value)},onInputCapture:function(){return ye.actionType}},[{name:"Choose",description:"Description"}].concat((0,M.Z)(t)).map((function(e){return i.createElement("option",{key:e.name,value:"Choose"!=e.name?e.name:""},"Choose"!=e.name?e.name.concat(" - ".concat(e.description)):e.name)})))}})}))),i.createElement(K.Z,{mr:1,width:"25%"},p?i.createElement(Te,null,(function(e){var t=e.concepts,n=e.loading;return i.createElement(De.Qr,{control:se,name:"concept",render:function(e){var r=e.onChange;return e.ref,(0,a.Z)(e,["onChange","ref"]),i.createElement(de.Z,{className:ee.root,id:"concept-drop-down",fullWidth:!0,"aria-multiselectable":!0,disabled:n,required:!0,error:!(null==le||!le.concept),helperText:null!=le&&le.concept?v("conceptError"):v("conceptHelperText"),label:v("concept"),select:!0,SelectProps:{native:!0},inputProps:{className:ee.input},name:"concept",onChange:function(e){return r(e)}},[{name:"Choose",description:"Description"}].concat((0,M.Z)(t)).map((function(e){return i.createElement("option",{key:e.name,value:"Choose"!=e.name?e.name:""},"Choose"!=e.name?e.name.concat(" - ".concat(e.description)):e.name)})))}})})):i.createElement(Te,null,(function(e){var t=e.concepts,n=e.loading;return i.createElement(De.Qr,{control:se,name:"concept",render:function(e){var r=e.onChange;return e.ref,(0,a.Z)(e,["onChange","ref"]),i.createElement(de.Z,{className:ee.root,id:"concept-drop-down",value:G,fullWidth:!0,"aria-multiselectable":!0,disabled:n,required:!0,error:!(null==le||!le.concept),helperText:null!=le&&le.concept?v("conceptError"):v("conceptHelperText"),label:v("concept"),select:!0,SelectProps:{native:!0},inputProps:{className:ee.input},name:"concept",onChange:function(e){r(e),U(e.target.value)}},[{name:"Choose",description:"Description"}].concat((0,M.Z)(t)).map((function(e){return i.createElement("option",{key:e.name,value:"Choose"!=e.name?e.name:""},"Choose"!=e.name?e.name.concat(" - ".concat(e.description)):e.name)})))}})})))),i.createElement(K.Z,{display:"flex",flexDirection:"row",mt:2,height:300},i.createElement(De.Qr,{control:se,name:"productSalesGoals",rules:{required:!0},render:function(e){return(0,r.Z)({},e),i.createElement(ce,{products:E,loading:d,handleEditCellChangeCommitted:xe,onSelectionModelChange:Re,selectionModel:C})}})),i.createElement(K.Z,{mt:2,width:"25%"},i.createElement(k.SeamlessButton,{onClick:ue((function(e){p||(e.activityId=Number(f)),n(e)})),onSubmit:function(e){return e.preventDefault()},type:"submit",color:"primary",variant:"contained"},v("saveButton"))))};var ze=n(94291);const Ve=function(e){var t=e.activityData,n=e.loading,r=e.handleUpdate,a=e.resellerListId,i=e.products,l=e.id,c=function(e){return(0,ze.functor)(t.productSalesGoals).map((function(e){return e.includes(",")?e.split(","):["".concat(e)]})).map((function(t){return t.filter((function(e){return""!=e})).map((function(t){return t.includes(e)?t.trim().split(" ")[0]:""}))})).fold((function(e){return e})).filter((function(e){return""!=e}))[0]};return o().createElement(Be,{resellerId:a,products:i.map((function(e){return{code:e.productVariant.product.code,sku:e.productVariant.variant.productSKU,name:e.productVariant.product.name,category:e.productVariant.product.categoryPath,goals:c(e.productVariant.variant.productSKU)}})),loading:n,data:t,onFormSubmit:function(e){return r(e)},selectedSKU:(0,ze.functor)(t.productSalesGoals).map((function(e){return e.includes(",")?e.split(","):["".concat(e)]})).map((function(e){return e.map((function(e){return e.trim().includes(" ")?e.trim().split(" ")[1].trim():""}))})).fold((function(e){return e.filter((function(e){return""!=e}))})),createMode:!1,id:"".concat(l)})},Ne=function(e){var t=e.children,n=u().showErrorMessage,r=i.useState(!1),a=(0,l.Z)(r,2),o=a[0],c=a[1],d=((0,s.useTranslation)().t,(0,R.useHistory)());return i.createElement(i.Fragment,null,t({handleUpdate:function(e){var t,r,a={},i=null===(t=e.zip)||void 0===t?void 0:t.split("-");a.zip=i[0],a.location=i[1],a.region=e.region,a.activityId=e.activityId,a.actionType=e.actionType,a.concept=e.concept,a.productSalesGoals=null===(r=e.productSalesGoals)||void 0===r?void 0:r.substring(1),a.childrenResellers=e.childrenResellers;var o=new Date(e.startTimestamp);a.startTimestamp=(0,Pe.Z)(o,"yyyy-MM-dd'T'HH:mm:ss");var l,s=new Date(e.endTimestamp);a.endTimestamp=(0,Pe.Z)(s,"yyyy-MM-dd'T'HH:mm:ss"),c(!0),(l=a,v(y,l)).then((function(e){0===e.resultCode?d.goBack():n(e)})).catch((function(e){return n(e.message||e.resultDescription)})).finally((function(){return c(!1)}))},loading:o}))},He=function(e){var t=e.id,n=e.resellerId,r=e.resellerListId;return i.createElement(Ne,null,(function(e){var a=e.handleUpdate,o=e.loading;return i.createElement(se,{refresh:o,activityId:t,resellerId:n},(function(e){var n=e.activityData,o=e.loading,l=e.products;return i.createElement(Ve,{handleUpdate:a,activityData:n,loading:o,products:l,resellerListId:r,id:t})}))}))},qe=function(e){var t=e.children,n=i.useState(!1),r=(0,l.Z)(n,2),a=r[0],o=r[1],c=u().showErrorMessage,d=((0,s.useTranslation)().t,(0,R.useHistory)());return i.createElement(i.Fragment,null,t({handleActivityCreation:function(e){var t,n,r;e.childrenResellers=null===(t=e.childrenResellers)||void 0===t?void 0:t.slice(0,null===(n=e.childrenResellers)||void 0===n?void 0:n.lastIndexOf(",")),e.productSalesGoals=null===(r=e.productSalesGoals)||void 0===r?void 0:r.substring(1);var a=e.zip?e.zip.split("-"):"";e.zip=a[0],e.location=a[1];var i=new Date(e.startTimestamp);e.startTimestamp=(0,Pe.Z)(i,"yyyy-MM-dd'T'HH:mm:ss");var l,s=new Date(e.endTimestamp);e.endTimestamp=(0,Pe.Z)(s,"yyyy-MM-dd'T'HH:mm:ss"),o(!0),(l=e,function(e,t){return m("/smas/v1/activity",{method:"POST",body:t})}(0,l)).then((function(e){0===e.resultCode?d.goBack():c(e)})).catch((function(e){return c(e.message||e.resultDescription)})).finally((function(){return o(!1)})),e.zip="".concat(e.zip,"-").concat(e.location)},loading:a}))};var Fe={startTimestamp:(0,Pe.Z)(new Date,"yyyy-MM-dd HH:mm:ss"),endTimestamp:(0,Pe.Z)(new Date,"yyyy-MM-dd HH:mm:ss"),region:"",zip:"",location:"",childrenResellers:"",actionType:"",concept:"",productSalesGoals:""};const Le=function(e){var t=e.resellerId,n=e.resellerListId;return i.createElement(qe,null,(function(e){var r=e.handleActivityCreation;return e.loading,i.createElement(oe,{refresh:!1,resellerId:t},(function(e){var t=e.products,a=e.loading;return i.createElement(Be,{resellerId:n,products:t.map((function(e){return{code:e.productVariant.product.code,sku:e.productVariant.variant.productSKU,name:e.productVariant.product.name,category:e.productVariant.product.categoryPath,goals:""}})),loading:a,data:Fe,onFormSubmit:function(e){return r(e)},createMode:!0,id:"0"})}))}))}},21602:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(38670);const a=function(){return(0,r.useSelector)((function(e){return e.auth.user}),r.shallowEqual)}},34579:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(74315),a=n(2411),i=n.n(a),o=n(38670);const l=function(e){var t=i().useState(null),n=(0,r.Z)(t,2),a=n[0],l=n[1],c=(0,o.useSelector)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.rbac}),o.shallowEqual);return i().useEffect((function(){var t,n=(null===(t=c.features.find((function(t){return t.module===e})))||void 0===t?void 0:t.features)||[];l(n)}),[c]),a}},19102:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(2411),a=n(48049),i=n(37603),o=n(29609),l=n(89111),c=n(38670);const s=function(){var e=(0,o.useTranslation)().t,t=(0,c.useSelector)((function(e){return e.auth})).user;return r.createElement(i.SeamlessContainer,{title:e("newActivityPageTitle"),description:e("newActivityPageDescription")},r.createElement(l.o2,{resellerId:t.requestedPrincipalId,resellerListId:t.requestedPrincipalId}))},u=function(){return(0,a.useRouteMatch)().path,r.createElement(a.Switch,null,r.createElement(a.Route,null,r.createElement(s,null)))}},9174:(e,t,n)=>{"use strict";n.d(t,{J:()=>T});var r=n(2411),a=n(48049),i=n(3962),o=n(44104),l=n.n(o),c=n(37603),s=n(29609),u=n(79692),d=n(12420),m=n(33553),p=n(89111),f=n(67801),v=n(21602),g=n(78384),y=(0,u.Z)((function(e){return(0,d.Z)({elements:{width:"100%",height:600}})}));const h=function(){var e,t=(0,s.useTranslation)().t,n=y(),a=l()().checkPermission,i=null===(e=(0,v.Z)())||void 0===e?void 0:e.resellerType,o=window.config.activity.adminType;return r.createElement(c.SeamlessContainer,{title:t("viewAllActivitiesPageTitle"),description:t("viewAllActivitiesPageDescription")},r.createElement(m.Z,null,r.createElement(m.Z,{display:"flex",flexDirection:"row",justifyContent:"flex-end"},a(f.Z.createActivity)&&r.createElement(p.X,{disable:(0,g.k)(o,i)})),r.createElement("div",{className:n.elements},r.createElement(p.bV,null))))};var E=(0,u.Z)((function(e){return(0,d.Z)({elements:{width:"100%",height:600}})}));const Z=function(){var e=(0,a.useParams)().id,t=(0,s.useTranslation)().t;return E(),r.createElement(c.SeamlessContainer,{title:t("viewActivityByIdPageTitle"),description:t("viewActivityByIdPageDescription")},r.createElement(p.OJ,{id:e}))},T=function(){var e=(0,a.useRouteMatch)().path;return r.createElement(a.Switch,null,r.createElement(a.Route,{path:e+"/view/:id"},r.createElement(Z,null)),r.createElement(a.Route,{path:e+"/edit/:id"},r.createElement(i.Z,null)),r.createElement(a.Route,null,r.createElement(h,null)))}},3962:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n(2411),a=n(37603),i=n(29609),o=n(79692),l=n(12420),c=n(48049),s=n(89111),u=n(38670),d=(0,o.Z)((function(e){return(0,l.Z)({elements:{width:"100%",height:600}})}));const m=function(){var e=(0,c.useParams)().id,t=(0,i.useTranslation)().t,n=(d(),(0,u.useSelector)((function(e){return e.auth})).user);return r.createElement(a.SeamlessContainer,{title:t("editActivityByIdPageTitle"),description:t("editActivityByIdPageDescription")},r.createElement(s.ec,{id:e,resellerId:n.resellerType,resellerListId:n.resellerType}))}},78384:(e,t,n)=>{"use strict";n.d(t,{k:()=>r});var r=function(e,t){return e.includes(t)}},67801:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={createActivity:"CREATE_ACTIVITY",viewActivityRecord:"VIEW_ACTIVITY_RECORD",editActivityRecord:"EDIT_ACTIVITY_RECORD",approveActivityRecord:"APPROVE_ACTIVITY_RECORD",rejectActivityRecord:"REJECT_ACTIVITY_RECORD"}}}]);