(self.webpackChunk_unified_campaign=self.webpackChunk_unified_campaign||[]).push([[8055],{84496:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var a=n(61416);const i=n.n(a)()},57023:(e,t,n)=>{"use strict";n.d(t,{U_:()=>y,s0:()=>E,Pg:()=>m,PS:()=>r,Fq:()=>f,NA:()=>p,V0:()=>u,IS:()=>d,_z:()=>s,px:()=>h,Tm:()=>v,O7:()=>g,BA:()=>S,bl:()=>Z,tP:()=>c,Qr:()=>C});var a=n(84496),i=n(34126),l="/scc/v1",o="/scc-payout-engine/v1",r=function(e){return(0,a.Z)("".concat(l,"/change-campaign-state"),{method:"PUT",body:e})},s=function(e){return(0,a.Z)("".concat(l,"/campaigns?").concat(i.stringify(e)))},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/campaign";return(0,a.Z)("/scc/v1".concat(t),{method:"PUT",body:e})},c=function(e){return(0,a.Z)("".concat(l,"/campaign/").concat(e))},u=function(e){return(0,a.Z)("/scc-commission-engine/getCampaignTransactions?".concat(i.stringify(e)))},d=function(){return(0,a.Z)("/scc/v1/campaign-types")},p=function(e,t){return(0,a.Z)("".concat(l,"/pending-approvals?").concat(i.stringify(e),"&workFlowStatus=").concat(t))},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pending,rejected";return(0,a.Z)("".concat(o,"/pending-approvals?").concat(i.stringify(e),"&workFlowStatus=").concat(t))},f=function(e){return(0,a.Z)("".concat(l,"/campaign/pending-approval-data/").concat(e))},v=function(e,t,n){return(0,a.Z)("".concat(o,"/pending-approval/").concat(e,"?pageNumber=").concat(t,"&pageSize=").concat(n))},E=function(e,t,n){return(0,a.Z)("".concat("/groupmanagementsystem/v1/workflow","/").concat(e,"/").concat(t),{method:"PUT",body:n})},y=function(e,t,n){return(0,a.Z)("".concat("/scc-payout-engine/v1/batch","/").concat(e,"/").concat(t),{method:"PUT",body:n})},Z=function(e,t){return(0,a.Z)("".concat(o,"/commission-adjust/").concat(e),{method:"PUT",body:t})},C=function(e,t){return(0,a.Z)("".concat(o,"/pending-approval/").concat(e,"?").concat(i.stringify(t)))},h=function(){return(0,a.Z)("/scc/v1/gl-codes")},S=function(e){return(0,a.Z)("/groupmanagementsystem/v1/workflow/reference-id/".concat(e))}},13542:(e,t,n)=>{"use strict";n.d(t,{ZA:()=>Ge,LK:()=>it,C_:()=>Ue,Ir:()=>se,HN:()=>ut,I$:()=>Te,DT:()=>dt,jX:()=>vt,vu:()=>ue,SV:()=>Ae});var a=n(7560),i=n(55238),l=n(5858),o=n(2411),r=n(29609),s=n(23664),m=n(79692),c=n(12420),u=n(74315),d=n(57023),p=n(91955),g="";const f=function(e){var t,n=e.children,a=null===(t=window)||void 0===t?void 0:t.config,i=(null==a||a.defaultPerPageItems,o.useState([])),l=(0,u.Z)(i,2),r=l[0],m=l[1],c=o.useState(!1),f=(0,u.Z)(c,2),v=f[0],E=f[1],y=o.useState(0),Z=(0,u.Z)(y,2),C=Z[0],h=Z[1],S=o.useState(""),b=(0,u.Z)(S,2),N=b[0],w=b[1],x=o.useState(20),I=(0,u.Z)(x,2),T=I[0],k=I[1],P=o.useState(0),M=(0,u.Z)(P,2),A=M[0],D=M[1],O=o.useState([]),F=(0,u.Z)(O,2),V=F[0],R=F[1],B=o.useState(""),W=(0,u.Z)(B,2),j=W[0],_=W[1],H=(0,s.Z)(),L=H.showErrorMessage,z=H.showSuccessMessage,q=o.useState("desc"),U=(0,u.Z)(q,2),G=U[0],J=U[1],Y=o.useState("name"),K=(0,u.Z)(Y,2),$=K[0],Q=K[1],X=o.useCallback((function(e){var t,n,a=(null===(t=e.sortModel[0])||void 0===t?void 0:t.field)||"",i=(null===(n=e.sortModel[0])||void 0===n?void 0:n.sort)||"";Q(a),J(i)}),[]),ee=o.useCallback((function(e){var t=e.filterModel.items[0].value?e.filterModel.items[0].value:"",n=(e.filterModel.items[0].columnField,e.filterModel.items[0].columnField),a=e.filterModel.items[0].operatorValue,i=[];i.push({key:n,operator:a,value:t}),R(i),D(0)}),[]),te=o.useCallback((function(e){D(e)}),[]),ne=o.useCallback((function(e){k(e)}),[]),ae=(o.useCallback((function(e){_(e)}),[]),(0,p.IG)(V)),ie={sort:$?"".concat($,"_").concat(null==G?void 0:G.toLowerCase()):"",pageNumber:ae===g?A:0,pageSize:T,filter:JSON.stringify(V)},le=function(){E(!0),(0,d._z)(ie).then((function(e){if(0===e.resultCode){var t,n=[];e.campaigns.forEach((function(e,t){e.id=t,n.push(e)})),m(n),h(null==e||null===(t=e.metadata)||void 0===t?void 0:t.totalCount),g=ae}else L(e.resultMessage)})).catch((function(e){L(e)})).finally((function(){return E(!1)}))};return o.useEffect((function(){le()}),[N,$,G,A,T,V,j]),o.createElement(o.Fragment,null,n({campaigns:r,loading:v,totalCount:C,onChangeCampaignStatus:function(e,t){E(!0);var n={campaignUid:e,toState:t};(0,d.PS)(n).then((function(e){0===e.resultCode?(z(e.resultMessage),le()):L(e.resultMessage)})).finally((function(){return E(!1)})).catch((function(e){return L(e)}))},onChangeGroupByStatus:function(e){w(e);var t=[];e&&t.push({key:"status",operator:"groupBy",value:e}),R(t)},onFilterChange:ee,onSort:X,setParentPage:te,setParentPerPage:ne}))};var v,E,y,Z=n(51119),C=n(11746),h=n(77277),S=n(61837),b=n(38592),N=n(90436),w=n(80030),x=n(60905),I=n(33553),T=n(31625),k=n(31377),P=n(34546),M=n(67358),A=n(48049),D=n(64874),O=n(60552),F=n(7051),V=n(73051),R=n(14255),B=n(41547),W=n(65550),j=n(41744),_=n.n(j),H=n(37603),L=n(6277),z=n(44104),q=n.n(z),U=n(27490),G=n(19952),J=n.n(G),Y=n(99688);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){(0,Z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q=(0,m.Z)((function(e){return(0,c.Z)({elements:{marginRight:e.spacing(1),width:"22%"},dialogWrapper:{textAlign:"center","& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginBottom:e.spacing(3)},btnSpace:{marginRight:e.spacing(2)},searchContainer:{display:"flex",flexDirection:"row",marginTop:e.spacing(1)},serchLable:{padding:e.spacing(1,1,1,2.5),display:"inline-block",width:"100px"},searchContainerRight:{display:"flex",flexDirection:"row",justifyContent:"flex-end"},labelRight:{textAlign:"right"},campaignStatus:{fontSize:"15px"},active:{color:"#145d30"},hold:{color:"#aeb41e"},approved:{color:"#69e80d"},disapproved:{color:"#e82e0c"},paid:{color:"#e59601"},unpaid:{color:"#956b0d"},approval_pending:{color:"#956b0d"},partially_paid:{color:"#df7861"},drafted:{color:"#5a8f7b"},closed:{color:"#ff0000"},created:{color:"#1ea853"},iconStatus:{position:"relative",margin:e.spacing(1.9,.5,.5,0),verticalAlign:"middle"},description:{padding:e.spacing(.9),width:"230px",height:"45px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"inline-block"},nameText:{width:"110px"},statusTxt:{padding:e.spacing(.9),paddingLeft:0,marginTop:4,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"inline-block"},status:{paddingTop:e.spacing(0),display:"flex",alignItems:"center",paddingRight:0},approvalBtn:{padding:0,paddingTop:4,color:e.palette.primary.main},approvalBox:{".MuiButton-root":{width:35},".MuiButton-root:hover":{width:35}}})})),X=(null===(v=window)||void 0===v?void 0:v.config)||{},ee=(null===(E=X.campaign)||void 0===E?void 0:E.status)||[],te=(null===(y=X.campaign)||void 0===y?void 0:y.statusValue)||[],ne={},ae=[],ie="",le="";const oe=function(e){var t,n=e.campaigns,a=e.loading,l=e.totalCount,m=(e.actionButtons,e.onChangeCampaignStatus),c=e.onChangeGroupByStatus,p=e.onFilterChange,g=e.onSort,f=e.setParentPage,v=e.setParentPerPage,E=((0,i.Z)(e,["campaigns","loading","totalCount","actionButtons","onChangeCampaignStatus","onChangeGroupByStatus","onFilterChange","onSort","setParentPage","setParentPerPage"]),(0,r.useTranslation)().t),y=Q(),Z=(0,s.Z)(),j=Z.showErrorMessage,z=(Z.showSuccessMessage,o.useState("")),G=(0,u.Z)(z,2),K=G[0],X=G[1],oe=o.useState(ee),re=(0,u.Z)(oe,2),se=re[0],me=(re[1],[1,2,4,5,6,7,8,9,10,11,12,13,14,15,16,17]),ce=q()().checkPermission,ue=o.useState({isLoading:!1,data:{},isOpen:!1}),de=(0,u.Z)(ue,2),pe=de[0],ge=de[1];o.useEffect((function(){ne={},ae=[],ie="",le=""}),[]);var fe=function(e){j(e),ie=(null==e?void 0:e.resultMessage)||E("anErrorOccurred"),ge({isOpen:!0,isLoading:!1,data:{}})},ve=[{field:"name",headerName:E("name"),sortable:!0,flex:1,renderCell:function(e){return o.createElement("div",null,o.createElement("span",{className:(0,L.default)(y.description,y.nameText),title:e.getValue("name")},e.getValue("name")))}},{field:"uid",headerName:E("id"),sortable:!0,flex:1.5,renderCell:function(e){return o.createElement("div",null,o.createElement("span",{className:(0,L.default)(y.description),title:e.getValue("uid")},e.getValue("uid")))}},{field:"description",headerName:E("description"),sortable:!0,flex:1.5,renderCell:function(e){return o.createElement("div",null,o.createElement("span",{className:(0,L.default)(y.description),title:e.getValue("description")},e.getValue("description")))}},{field:"status",headerName:E("status"),sortable:!0,width:200,renderCell:function(e){var t=e.getValue("state"),n=null==t?void 0:t.status.toLowerCase(),a=e.getValue("trackerUid"),i=E((null==t?void 0:t.status).toLocaleLowerCase()),l=e.getValue("name");return o.createElement("div",{className:(0,L.default)(y.description,y.status)},o.createElement("span",{className:(0,L.default)(y.iconStatus)},o.createElement(w.ZP,{title:i},o.createElement(B.Z,{className:(0,L.default)(y.campaignStatus,y[n])}))),o.createElement("span",{className:y.statusTxt},o.createElement(w.ZP,{title:i},o.createElement("span",null,i))),[9,11].includes(t.id)&&o.createElement(w.ZP,{title:E("showApprovalStatusDetail")},o.createElement(S.Z,{className:y.approvalBtn,onClick:function(){return function(e,t){ne={},ae=[],le=t,ge({isLoading:!0,data:{},isOpen:!0}),(0,d.BA)(e).then((function(e){if(0===e.resultCode){var t,n=e.workFlowApprovalGroupDetails;ne={index:null===(t=n.previousGroups)||void 0===t?void 0:t.length,val:n.currentGroup},ae=[].concat((0,C.Z)(n.previousGroups),[n.currentGroup],(0,C.Z)(n.nextGroups)),ge({data:n,isOpen:!0,isLoading:!1})}else fe(e)})).catch((function(e){return fe(e)}))}(a,l)}},o.createElement(F.Z,{fontSize:"small"}))))}},{field:"actions",headerName:E("actions"),sortable:!1,filterable:!1,renderCell:function(e){var t=e.getValue("state"),n=e.getValue("uid"),a=e.getValue("campaignType");return o.createElement("div",null,o.createElement(b.Z,{size:"small",color:"primary","aria-label":"group action buttons"},o.createElement(w.ZP,{title:E("view")},o.createElement(h.Z,{component:A.Link,to:"/home/campaign/view/"+n},o.createElement(O.Z,{fontSize:"small"}))),ce(U.Z.editCampaign)&&o.createElement(w.ZP,{title:E("edit")},o.createElement(h.Z,{component:A.Link,to:"/home/campaign/edit/".concat(n,"?resellerId=campaign"),disabled:!te.includes(t.status)},o.createElement(D.Z,{fontSize:"small"}))),me.includes(t.id)&&ce(U.Z.updateCampaignStatus)?o.createElement(w.ZP,{title:E("hold")},o.createElement(h.Z,{onClick:function(){m(n,3)},disabled:2!==t.id},o.createElement(V.Z,{fontSize:"small"}))):ce(U.Z.updateCampaignStatus)&&o.createElement(w.ZP,{title:E("resume")},o.createElement(h.Z,{onClick:function(){m(n,2)},disabled:3!==t.id},o.createElement(W.Z,{fontSize:"small"}))),o.createElement(w.ZP,{title:E("clone")},o.createElement(h.Z,{component:A.Link,to:"/home/campaign/create?resellerId=campaign&campId=".concat(a.typeId,"&cloneId=").concat(n)},o.createElement(R.Z,{fontSize:"small"})))))},flex:1.5}];return o.createElement(o.Fragment,null,o.createElement(J(),{open:pe.isOpen,onClose:function(){return ge($($({},pe),{},{isOpen:!1}))},dialogDescription:"",dialogTitle:'"'.concat(le,'" ').concat(E("workflowApprovalGroupStatus")),closeButtonText:E("close")},(null===(t=ae)||void 0===t?void 0:t.length)>0?o.createElement(T.Z,{activeStep:ne.index,alternativeLabel:!0},ae.map((function(e,t){return o.createElement(k.Z,{key:e},o.createElement(P.Z,null,e," ",o.createElement("br",null),o.createElement("strong",null,t<ne.index?" ".concat(E("approved")):" ".concat(E("pending")))))}))):pe.isLoading?o.createElement(M.Z,null):o.createElement(Y.Z,{severity:"error"},ie),o.createElement("br",null)),o.createElement(x.Z,{container:!0,className:y.searchContainer},o.createElement(x.Z,{item:!0,xs:6},o.createElement(I.Z,null,o.createElement(Te,null))),o.createElement(x.Z,{item:!0,xs:6,className:y.searchContainerRight},o.createElement(x.Z,{item:!0,xs:6,className:y.labelRight},o.createElement(N.Z,{align:"right",className:y.serchLable},E("groupBy"))),o.createElement(x.Z,{item:!0,xs:6},o.createElement(H.SeamlessDropDown,{fullWidth:!0,required:!0,options:[{value:"",key:E("status")}].concat((0,C.Z)(se.map((function(e){return{value:e.value,key:e.key}})))),name:"status",value:K,onChange:function(e){X(e.target.value),c(e.target.value),console.log("event.target.value:",e.target.value)}})))),o.createElement(_(),{pagination:!0,paginationMode:"server",filterMode:"server",sortingMode:"server",rows:n,loading:a,columns:ve,getRowId:function(e){return e.id},columnBuffer:3,rowCount:l,onSortModelChange:g,onFilterModelChange:p,onPageChange:function(e){f(e.page)},onPageSizeChange:function(e){f(0),v(e.pageSize)}}))};var re=(0,m.Z)((function(e){return(0,c.Z)({button:{margin:e.spacing(1)},element:{margin:e.spacing(1)},spacingBottom:{marginBottom:e.spacing(2)},btnSpace:{marginRight:e.spacing(2)},disabled:{opacity:.5},appBar:{position:"relative"},title:{flex:1},dialogContent:{marginTop:e.spacing(2),marginBottom:e.spacing(7)},fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{textTransform:"capitalize",fontSize:14,wordBreak:"break-all"},rowSpacing:{marginBottom:e.spacing(.5)},dividerSpacing:{marginBottom:e.spacing(3)},btnSpacing:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}})}));const se=function(e){return(0,l.Z)(e),re(),(0,r.useTranslation)().t,(0,s.Z)().showErrorMessage,o.createElement(f,null,(function(e){var t=e.campaigns,n=e.loading,l=e.totalCount,r=e.onChangeCampaignStatus,s=e.onChangeGroupByStatus,m=(0,i.Z)(e,["campaigns","loading","totalCount","onChangeCampaignStatus","onChangeGroupByStatus"]);return o.createElement("div",{style:{height:600,width:"100%"}},o.createElement(oe,(0,a.Z)({campaigns:t,loading:n,totalCount:l,onChangeCampaignStatus:r,onChangeGroupByStatus:s},m)))}))};var me=(0,m.Z)((function(e){return(0,c.Z)({spacingBottom:{marginBottom:e.spacing(.5)},skeleton:{height:20},fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{textTransform:"capitalize",fontSize:14,wordBreak:"break-all","& .import-file-name":{textTransform:"none !important"},borderBottom:"1px solid #000000"},rowSpacing:{marginBottom:e.spacing(.5)},alignEnd:{textAlign:"end"},flexBox:{display:"flex",alignItems:"center"},notificationEvent:{marginBottom:e.spacing(1)},gridValue:{paddingLeft:e.spacing(5),paddingBottom:e.spacing(5),paddingRight:e.spacing(5)},scroll:{whiteSpace:"nowrap"},campaignLable:{fontSize:"14px",textTransform:"lowercase"},spacingTop:{paddingTop:"40px"},textHeight:{height:"18px"}})})),ce=[{name:"Sales Tax",value:"gstRate"},{name:"Income Tax",value:"rateWht"},{name:"GST WTH",value:"gstRateWht"}];const ue=function(e){var t,n,a,i,l,s,m,c,p,g,f,v,E,y,Z,h,S,b,w,I,T,k,P,M,A,D,O,F,V,R,B,W,j,H,z,q,U,G,J,Y,K,$,Q,X,ee,te,ne,ae,ie,le,oe,re,se,ue,de,pe,ge,fe,ve,Ee,ye,Ze,Ce,he,Se,be,Ne,we,xe,Ie,Te,ke,Pe,Me,Ae,De,Oe,Fe,Ve,Re,Be,We,je,_e,He,Le,ze,qe,Ue,Ge,Je,Ye,Ke,$e,Qe,Xe,et,tt,nt,at,it,lt,ot,rt,st,mt,ct,ut,dt,pt,gt,ft,vt,Et,yt,Zt,Ct,ht,St,bt,Nt,wt=e.data,xt=e.campaignTransaction,It=e.loading,Tt=e.onFilterChange,kt=e.onSort,Pt=e.totalCount,Mt=e.setParentPage,At=e.setParentPerPage,Dt=null===(t=window)||void 0===t?void 0:t.config,Ot=(null==Dt||null===(n=Dt.campaign)||void 0===n?void 0:n.additionalRetailer)||"",Ft=o.useState([]),Vt=(0,u.Z)(Ft,2),Rt=Vt[0],Bt=Vt[1],Wt=me(),jt=(0,r.useTranslation)().t,_t=(null==wt||null===(a=wt.targetAudience)||void 0===a?void 0:a.retailerInclusions.map((function(e){return e.retailerMsisdn})))||[],Ht=(null==wt||null===(i=wt.targetAudience)||void 0===i?void 0:i.regions.map((function(e){return e.regionName})))||[],Lt=(null==wt||null===(l=wt.paymentInformation)||void 0===l?void 0:l.includedCostCenters.map((function(e){var t;return null===(t=e.costCenter)||void 0===t?void 0:t.costCenter})))||[],zt=function(e){return{height:""===e?"18px":"auto"}};o.useEffect((function(){(0,d.px)().then((function(e){0===(null==e?void 0:e.resultCode)&&Bt(null==e?void 0:e.glcodes)}))}),[]);var qt,Ut,Gt,Jt=[{field:"userId",headerName:jt("retailerId"),sortable:!0,flex:1,renderCell:function(e){var t=e.getValue("userId");return o.createElement("div",null,o.createElement("span",{title:t},t))}},{field:"userName",headerName:jt("retailerName"),sortable:!0,flex:1,renderCell:function(e){var t=e.getValue("userName");return o.createElement("div",null,o.createElement("span",{title:t},t))}},{field:"eligibleComm.",headerName:jt("eligibleForComm"),sortable:!0,flex:1,renderCell:function(e){return o.createElement("div",null,o.createElement("span",null,e.getValue("commissionEligibilityStatus")))}},{field:"commissionStatus",headerName:jt("commissionCal"),sortable:!0,flex:1},{field:"commissionInvoiceAmount",headerName:jt("commissionAmount"),sortable:!0,flex:1},{field:"gstAmount",headerName:jt("gstAmount"),sortable:!0,flex:1,renderCell:function(e){var t=e.getValue("extraFields");return o.createElement("div",null,o.createElement("span",null,null==t?void 0:t.gstAmount))}},{field:"gstWHAmount",headerName:jt("gst_Wh_amount"),sortable:!0,flex:1,renderCell:function(e){var t=e.getValue("extraFields");return o.createElement("div",null,o.createElement("span",null,null==t?void 0:t.gstWhtRateAmount))}},{field:"rateWht",headerName:jt("incometaxTaxWH"),sortable:!0,flex:1,renderCell:function(e){var t=e.getValue("extraFields");return o.createElement("div",null,o.createElement("span",null,null==t?void 0:t.rateWhtAmount))}},{field:"netPayoutAmount",headerName:jt("grossCom"),sortable:!0,flex:1}],Yt={},Kt={},$t={};return null==wt||null===(s=wt.commissionFormula)||void 0===s||null===(m=s.campaignCommissionFormula)||void 0===m||m.commissionFormulaDetails.forEach((function(e){var t;Yt[null==e?void 0:e.retailerTypeId]=null==e?void 0:e.commissionValue,Kt[null==e||null===(t=e.kpi)||void 0===t?void 0:t.name]=null==e?void 0:e.weightage})),null==wt||null===(c=wt.commissionFormula)||void 0===c||null===(p=c.campaignCommissionFormula)||void 0===p||p.commissionFormulaDetails.forEach((function(e){var t,n,a,i;$t[null==e||null===(t=e.kpi)||void 0===t?void 0:t.name]||($t[null==e||null===(i=e.kpi)||void 0===i?void 0:i.name]=[]),$t[null==e||null===(n=e.kpi)||void 0===n?void 0:n.name]=[].concat((0,C.Z)($t[null==e||null===(a=e.kpi)||void 0===a?void 0:a.name]),[e])})),o.createElement(x.Z,{container:!0,spacing:3,className:Wt.spacingBottom},o.createElement(x.Z,{item:!0,xs:12},o.createElement(x.Z,{container:!0,spacing:3,className:Wt.spacingBottom},o.createElement(x.Z,{item:!0,xs:12,sm:6},o.createElement(N.Z,{variant:"subtitle1",color:"primary"},jt("profileInformation"))),o.createElement(x.Z,{item:!0,xs:12,sm:6,className:Wt.alignEnd})),o.createElement(x.Z,{container:!0,spacing:10},o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("campaignName")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(null==wt||null===(g=wt.profileInformation)||void 0===g?void 0:g.name)},null==wt||null===(f=wt.profileInformation)||void 0===f?void 0:f.name))),o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("campaignID")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(Wt.fieldValue)},o.createElement("span",{className:(0,L.default)(Wt.campaignLable)},null==wt||null===(v=wt.profileInformation)||void 0===v?void 0:v.uid)))),o.createElement(x.Z,{container:!0,spacing:10},o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("description")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(null==wt||null===(E=wt.profileInformation)||void 0===E?void 0:E.description)},null==wt||null===(y=wt.profileInformation)||void 0===y?void 0:y.description))),o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("campaignType")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,null,null!=wt&&null!==(Z=wt.profileInformation)&&void 0!==Z&&Z.campaignType.typeName?null==wt||null===(h=wt.profileInformation)||void 0===h?void 0:h.campaignType.typeName:jt("emptyValueMark"))))),3===(null==wt||null===(S=wt.profileInformation)||void 0===S?void 0:S.campaignType.typeId)&&o.createElement(x.Z,{container:!0,spacing:10},o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("slabRangeType")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(null==wt||null===(b=wt.profileInformation)||void 0===b?void 0:b.description)},null==wt||null===(w=wt.profileInformation)||void 0===w?void 0:w.slabRangeType))),o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("slabCommissionType")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,null,null==wt||null===(I=wt.profileInformation)||void 0===I?void 0:I.slabCommissionType))),"PER_ACHIEVEMENT"===(null==wt||null===(T=wt.profileInformation)||void 0===T?void 0:T.slabCommissionType)&&o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("slabCommissionRule")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,null,null!=wt&&null!==(k=wt.profileInformation)&&void 0!==k&&k.isSequential?"Sequential":"Non Sequential")))),o.createElement(x.Z,{container:!0,spacing:10},o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("startDate")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(null==wt||null===(P=wt.profileInformation)||void 0===P?void 0:P.startDate)},null==wt||null===(M=wt.profileInformation)||void 0===M?void 0:M.startDate))),o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("endDate")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(null==wt||null===(A=wt.profileInformation)||void 0===A?void 0:A.endDate)},null==wt||null===(D=wt.profileInformation)||void 0===D?void 0:D.endDate)))),o.createElement(x.Z,{container:!0,spacing:10},o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("campaigndesignapprovalworkflow")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(null==wt||null===(O=wt.profileInformation)||void 0===O?void 0:O.designWorkflowName)},null==wt||null===(F=wt.profileInformation)||void 0===F?void 0:F.designWorkflowName))),o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("eventschannel")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(null==wt||null===(V=wt.profileInformation)||void 0===V?void 0:V.eventChannels)},null==wt||null===(R=wt.profileInformation)||void 0===R?void 0:R.eventChannels))),o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("commissionType")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(null==wt||null===(B=wt.profileInformation)||void 0===B?void 0:B.eventChannels)},null==wt||null===(W=wt.profileInformation)||void 0===W?void 0:W.commissionType))),o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("createdBy")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(null==wt||null===(j=wt.profileInformation)||void 0===j?void 0:j.creator)},null==wt||null===(H=wt.profileInformation)||void 0===H?void 0:H.creator)))),o.createElement(x.Z,{container:!0,spacing:3,className:Wt.spacingBottom},o.createElement(x.Z,{item:!0,xs:12,sm:6},o.createElement(N.Z,{variant:"subtitle1",color:"primary"},jt("targetaudience")))),o.createElement(x.Z,{container:!0,spacing:10},o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("typeoftargetaudience")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(null==wt||null===(z=wt.targetAudience)||void 0===z||null===(q=z.campaignExtraParam)||void 0===q?void 0:q.audienceType)},null==wt||null===(U=wt.targetAudience)||void 0===U||null===(G=U.campaignExtraParam)||void 0===G?void 0:G.audienceType)))),o.createElement(x.Z,{container:!0,spacing:10},"MANUAL"===(null==wt||null===(J=wt.targetAudience)||void 0===J||null===(Y=J.campaignExtraParam)||void 0===Y?void 0:Y.targetAudienceDataSource)&&o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("comments")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(null==wt||null===(K=wt.targetAudience)||void 0===K||null===($=K.campaignExtraParam)||void 0===$?void 0:$.targetAudienceComment)},null==wt||null===(Q=wt.targetAudience)||void 0===Q||null===(X=Q.campaignExtraParam)||void 0===X?void 0:X.targetAudienceComment))),o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("targetSelectionMode")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(null==wt||null===(ee=wt.targetAudience)||void 0===ee||null===(te=ee.campaignExtraParam)||void 0===te?void 0:te.targetAudienceDataSource)},null==wt||null===(ne=wt.targetAudience)||void 0===ne||null===(ae=ne.campaignExtraParam)||void 0===ae?void 0:ae.targetAudienceDataSource)))),"MANUAL"===(null==wt||null===(ie=wt.targetAudience)||void 0===ie||null===(le=ie.campaignExtraParam)||void 0===le?void 0:le.targetAudienceDataSource)&&o.createElement(x.Z,{container:!0,spacing:10},o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("region")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(null==Ht?void 0:Ht.toString())},null==Ht?void 0:Ht.toString()))),o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("retailerTypes")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,null,(null==wt||null===(oe=wt.targetAudience)||void 0===oe?void 0:oe.retailerTypes.length)>0?null==wt||null===(re=wt.targetAudience)||void 0===re||null===(se=re.retailerTypes)||void 0===se?void 0:se.toString():"")))),o.createElement(x.Z,{container:!0,spacing:10},o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("retailertypesbymsisdn")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(_t.toString())},_t.toString()))),"MANUAL"===(null==wt||null===(ue=wt.targetAudience)||void 0===ue||null===(de=ue.campaignExtraParam)||void 0===de?void 0:de.targetAudienceDataSource)&&o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("excludedRetailers")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(null==wt||null===(pe=wt.targetAudience)||void 0===pe||null===(ge=pe.excludedRetailers)||void 0===ge?void 0:ge.toString())},null==wt||null===(fe=wt.targetAudience)||void 0===fe||null===(ve=fe.excludedRetailers)||void 0===ve?void 0:ve.toString())))),o.createElement(x.Z,{container:!0,spacing:4,className:Wt.spacingBottom},o.createElement(x.Z,{item:!0,xs:12,sm:6},o.createElement(N.Z,{variant:"subtitle1",color:"primary"},jt("paymentmode"))),o.createElement(x.Z,{item:!0,xs:12,sm:6,className:Wt.alignEnd})),o.createElement(x.Z,{container:!0,spacing:10},o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("commissionType")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(null==wt||null===(Ee=wt.paymentInformation)||void 0===Ee||null===(ye=Ee.campaignPaymentInformation)||void 0===ye||null===(Ze=ye.commissionType)||void 0===Ze?void 0:Ze.commissionType)},null==wt||null===(Ce=wt.paymentInformation)||void 0===Ce||null===(he=Ce.campaignPaymentInformation)||void 0===he||null===(Se=he.commissionType)||void 0===Se?void 0:Se.commissionType))),(null==wt||null===(be=wt.paymentInformation)||void 0===be||null===(Ne=be.campaignPaymentInformation)||void 0===Ne?void 0:Ne.paymentFrequency)&&o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("paymentFrequency")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,null,null==wt||null===(we=wt.paymentInformation)||void 0===we||null===(xe=we.campaignPaymentInformation)||void 0===xe?void 0:xe.paymentFrequency)))),o.createElement(x.Z,{container:!0,spacing:10},o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading)},jt("commissionhead")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(null==wt||null===(Ie=wt.paymentInformation)||void 0===Ie?void 0:Ie.glCode)},(qt=null==wt||null===(Te=wt.paymentInformation)||void 0===Te?void 0:Te.glCode,(Gt=Rt.filter((function(e){return e.glCode===qt}))||[]).length>0?null===(Ut=Gt[0])||void 0===Ut?void 0:Ut.displayValue:"")))),o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading)},jt("paymentChannel")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(null==wt||null===(ke=wt.paymentInformation)||void 0===ke||null===(Pe=ke.campaignPaymentInformation)||void 0===Pe||null===(Me=Pe.paymentChannelType)||void 0===Me?void 0:Me.paymentChannelName)},null==wt||null===(Ae=wt.paymentInformation)||void 0===Ae||null===(De=Ae.campaignPaymentInformation)||void 0===De||null===(Oe=De.paymentChannelType)||void 0===Oe?void 0:Oe.paymentChannelName)))),o.createElement(x.Z,{container:!0,spacing:10},o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading)},jt("payoutApproval")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,null,null!=wt&&null!==(Fe=wt.paymentInformation)&&void 0!==Fe&&null!==(Ve=Fe.campaignPaymentInformation)&&void 0!==Ve&&Ve.payoutWorkflowName?jt("yes"):jt("no")))),(null==wt||null===(Re=wt.paymentInformation)||void 0===Re||null===(Be=Re.campaignPaymentInformation)||void 0===Be?void 0:Be.payoutWorkflowName)&&o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading)},jt("payoutWorkflow")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,null,null==wt||null===(We=wt.paymentInformation)||void 0===We||null===(je=We.campaignPaymentInformation)||void 0===je?void 0:je.payoutWorkflowName))),o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading)},jt("costCenter")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(Lt.toString())},Lt.toString())))),o.createElement(x.Z,{container:!0,spacing:4,className:Wt.spacingBottom},o.createElement(x.Z,{item:!0,xs:12,sm:6},o.createElement(N.Z,{variant:"subtitle1",color:"primary"},jt("businessRules"))),o.createElement(x.Z,{item:!0,xs:12,sm:6,className:Wt.alignEnd})),null==wt||null===(_e=wt.businessRule)||void 0===_e?void 0:_e.kpis.map((function(e,t){return o.createElement(o.Fragment,null,o.createElement(x.Z,{container:!0,spacing:10},o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("targetSelectionMode")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,null,"Manual")))),o.createElement(x.Z,{container:!0,spacing:10},o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("kpiName")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(null==e?void 0:e.name)},null==e?void 0:e.name))),o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("kpiTargetCount")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(null==e?void 0:e.targetInCount)},e.targetInCount)))),null==e?void 0:e.kpiEvents.map((function(t,n){var a,i,l,r,s,m,c,u,d;return o.createElement(x.Z,{container:!0,spacing:10,key:n},o.createElement(x.Z,{item:!0,xs:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("event")),o.createElement(x.Z,{item:!0,xs:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(null==t||null===(a=t.transactionEvent)||void 0===a?void 0:a.name)},"0.00"===(null==t||null===(i=t.transactionEvent)||void 0===i?void 0:i.denomination)?null==t||null===(l=t.transactionEvent)||void 0===l?void 0:l.name:"".concat(null==t||null===(r=t.transactionEvent)||void 0===r?void 0:r.name,"- ").concat(null==t||null===(s=t.transactionEvent)||void 0===s?void 0:s.denomination)))),o.createElement(x.Z,{item:!0,xs:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("targetCriteria")),o.createElement(x.Z,{item:!0,xs:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(null==t?void 0:t.criteria)},null==t?void 0:t.criteria))),o.createElement(x.Z,{item:!0,xs:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("eventTarget")),o.createElement(x.Z,{item:!0,xs:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(null==t?void 0:t.criteriaValue)},t.criteriaValue))),"COUNT"===t.criteria&&o.createElement(x.Z,{xs:4,className:(0,L.default)(Wt.gridValue)},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("minimumValue")),o.createElement(x.Z,{item:!0,xs:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(null==t?void 0:t.minimumValue)},t.minimumValue))),o.createElement(x.Z,{xs:4,className:(0,L.default)(Wt.gridValue)},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("taxExempted")),o.createElement(x.Z,{item:!0,xs:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,null,e.exemptedTax?jt("yes"):jt("no")))),(null==e?void 0:e.exemptedTax)&&o.createElement(x.Z,{xs:4,className:(0,L.default)(Wt.gridValue)},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("taxType")),o.createElement(x.Z,{item:!0,xs:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,null,(c=e.exemptedTax,u=c.split(","),d=[],ce.forEach((function(e,t){u.forEach((function(t){e.value===t&&d.push(null==e?void 0:e.name)}))})),d.toString())))),(null==t?void 0:t.previousEventRelation)&&o.createElement(x.Z,{xs:4,className:(0,L.default)(Wt.gridValue)},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("relationWithPreviousEvent")),o.createElement(x.Z,{item:!0,xs:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(null==t?void 0:t.previousEventRelation)},t.previousEventRelation))),"INSTANT CAMPAIGN"!==(null==wt||null===(m=wt.profileInformation)||void 0===m?void 0:m.campaignType.typeName)&&o.createElement(x.Z,{xs:4,className:(0,L.default)(Wt.gridValue)},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("noOfDays")),o.createElement(x.Z,{item:!0,xs:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(null==t?void 0:t.deadlineDays)},t.deadlineDays))))})))})),o.createElement(x.Z,{container:!0,spacing:4,className:Wt.spacingBottom},o.createElement(x.Z,{item:!0,xs:12,sm:6},o.createElement(N.Z,{variant:"subtitle1",color:"primary"},jt("commissionformula"))),o.createElement(x.Z,{item:!0,xs:12,sm:6,className:Wt.alignEnd})),o.createElement(x.Z,{container:!0,spacing:10},o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("commissioncriteria")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(null==wt||null===(He=wt.commissionFormula)||void 0===He||null===(Le=He.campaignCommissionFormula)||void 0===Le||null===(ze=Le.commissionCriteria)||void 0===ze?void 0:ze.criteriaName)},null==wt||null===(qe=wt.commissionFormula)||void 0===qe||null===(Ue=qe.campaignCommissionFormula)||void 0===Ue||null===(Ge=Ue.commissionCriteria)||void 0===Ge?void 0:Ge.criteriaName)))),o.createElement(x.Z,{container:!0,spacing:10},o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("commissionDefinitionCriteria")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(null==wt||null===(Je=wt.commissionFormula)||void 0===Je||null===(Ye=Je.campaignCommissionFormula)||void 0===Ye||null===(Ke=Ye.commissionDefinitionCriteria)||void 0===Ke?void 0:Ke.definitionCriteriaName)},null==wt||null===($e=wt.commissionFormula)||void 0===$e||null===(Qe=$e.campaignCommissionFormula)||void 0===Qe||null===(Xe=Qe.commissionDefinitionCriteria)||void 0===Xe?void 0:Xe.definitionCriteriaName)))),4===(null==wt||null===(et=wt.profileInformation)||void 0===et||null===(tt=et.campaignType)||void 0===tt?void 0:tt.typeId)&&2===(null==wt||null===(nt=wt.commissionFormula)||void 0===nt||null===(at=nt.campaignCommissionFormula)||void 0===at||null===(it=at.commissionCriteria)||void 0===it?void 0:it.commissionCriteriaId)&&o.createElement(x.Z,{container:!0,spacing:10},o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("commissionAmount")),o.createElement(x.Z,{item:!0,xs:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,null,(null==wt||null===(lt=wt.commissionFormula)||void 0===lt||null===(ot=lt.campaignCommissionFormula)||void 0===ot?void 0:ot.commissionFormulaDetails.length)>0?null==wt||null===(rt=wt.commissionFormula)||void 0===rt||null===(st=rt.campaignCommissionFormula)||void 0===st||null===(mt=st.commissionFormulaDetails[0])||void 0===mt?void 0:mt.commissionValue:"")))),4===(null==wt||null===(ct=wt.profileInformation)||void 0===ct||null===(ut=ct.campaignType)||void 0===ut?void 0:ut.typeId)&&1===(null==wt||null===(dt=wt.commissionFormula)||void 0===dt||null===(pt=dt.campaignCommissionFormula)||void 0===pt||null===(gt=pt.commissionCriteria)||void 0===gt?void 0:gt.commissionCriteriaId)&&Object.keys(Kt).map((function(e){return o.createElement(x.Z,{container:!0,spacing:10},o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("kpiName")),o.createElement(x.Z,{item:!0,xs:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,null,e))),o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("weightage")),o.createElement(x.Z,{item:!0,xs:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,null,Kt[e]))))})),4===(null==wt||null===(ft=wt.profileInformation)||void 0===ft||null===(vt=ft.campaignType)||void 0===vt?void 0:vt.typeId)&&1===(null==wt||null===(Et=wt.commissionFormula)||void 0===Et||null===(yt=Et.campaignCommissionFormula)||void 0===yt||null===(Zt=yt.commissionCriteria)||void 0===Zt?void 0:Zt.commissionCriteriaId)&&Object.keys(Yt).map((function(e){return o.createElement(x.Z,{container:!0,spacing:10},o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("retailerType")),o.createElement(x.Z,{item:!0,xs:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,null,e))),o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("commissionAmount")),o.createElement(x.Z,{item:!0,xs:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,null,Yt[e]))))})),3===(null==wt||null===(Ct=wt.profileInformation)||void 0===Ct||null===(ht=Ct.campaignType)||void 0===ht?void 0:ht.typeId)&&Object.keys($t).map((function(e){return o.createElement(x.Z,{container:!0,spacing:5,key:e},o.createElement(x.Z,{item:!0,xs:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("kpiName")),o.createElement(x.Z,{item:!0,xs:11,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,null,e))),$t[e].map((function(e,t){return o.createElement(o.Fragment,null,o.createElement(x.Z,{item:!0,xs:9},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},"Slab ".concat(t+1))),o.createElement(x.Z,{item:!0,xs:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},"PERCENTAGE"===wt.profileInformation.slabRangeType?jt("lowerPercentage"):jt("lowerCount")),o.createElement(x.Z,{item:!0,xs:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,null,e.rangeFrom))),o.createElement(x.Z,{item:!0,xs:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},"PERCENTAGE"===wt.profileInformation.slabRangeType?jt("upperPercentage"):jt("upperCount")),o.createElement(x.Z,{item:!0,xs:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,null,e.rangeTo))),o.createElement(x.Z,{item:!0,xs:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("commissionAmount")),o.createElement(x.Z,{item:!0,xs:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,null,e.commissionValue))))})))})),null==wt||null===(St=wt.commissionFormula)||void 0===St||null===(bt=St.campaignCommissionFormula)||void 0===bt?void 0:bt.commissionFormulaDetails.map((function(e,t){var n,a,i,l,r,s,m,c,u,d,p,g,f,v,E,y,Z,C,h,S,b,w,I,T,k,P,M,A,D,O,F,V,R,B,W,j,_,H,z,q;return 1===(null==wt||null===(n=wt.commissionFormula)||void 0===n||null===(a=n.campaignCommissionFormula)||void 0===a||null===(i=a.commissionCriteria)||void 0===i?void 0:i.commissionCriteriaId)&&1===(null==wt||null===(l=wt.commissionFormula)||void 0===l||null===(r=l.campaignCommissionFormula)||void 0===r||null===(s=r.commissionDefinitionCriteria)||void 0===s?void 0:s.commissionDefinitionCriteriaId)?o.createElement(x.Z,{container:!0,spacing:10,key:t},o.createElement(x.Z,{item:!0,xs:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("retailerType")),o.createElement(x.Z,{item:!0,xs:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,null,(null==e?void 0:e.retailerTypeId)||Ot))),o.createElement(x.Z,{item:!0,xs:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},"NORMAL"===(null==wt||null===(D=wt.profileInformation)||void 0===D?void 0:D.commissionType)?jt("commissionAmount"):jt("commissionPercentageView")),o.createElement(x.Z,{item:!0,xs:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(e.amount)},null==e?void 0:e.commissionValue)))):1===(null==wt||null===(m=wt.commissionFormula)||void 0===m||null===(c=m.campaignCommissionFormula)||void 0===c||null===(u=c.commissionCriteria)||void 0===u?void 0:u.commissionCriteriaId)&&2===(null==wt||null===(d=wt.commissionFormula)||void 0===d||null===(p=d.campaignCommissionFormula)||void 0===p||null===(g=p.commissionDefinitionCriteria)||void 0===g?void 0:g.commissionDefinitionCriteriaId)&&4!==(null==wt||null===(f=wt.profileInformation)||void 0===f||null===(v=f.campaignType)||void 0===v?void 0:v.typeId)?o.createElement(x.Z,{container:!0,spacing:10,key:t},o.createElement(x.Z,{item:!0,xs:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("retailerType")),o.createElement(x.Z,{item:!0,xs:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,null,(null==e?void 0:e.retailerTypeId)||Ot))),o.createElement(x.Z,{item:!0,xs:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("kpiName")),o.createElement(x.Z,{item:!0,xs:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(null==e||null===(O=e.kpi)||void 0===O?void 0:O.name)},null==e||null===(F=e.kpi)||void 0===F?void 0:F.name))),o.createElement(x.Z,{item:!0,xs:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},"NORMAL"===(null==wt||null===(V=wt.profileInformation)||void 0===V?void 0:V.commissionType)?jt("commissionAmount"):jt("commissionPercentageView")),o.createElement(x.Z,{item:!0,xs:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(e.amount)},null==e?void 0:e.commissionValue)))):2===(null==wt||null===(E=wt.commissionFormula)||void 0===E||null===(y=E.campaignCommissionFormula)||void 0===y||null===(Z=y.commissionCriteria)||void 0===Z?void 0:Z.commissionCriteriaId)&&1===(null==wt||null===(C=wt.commissionFormula)||void 0===C||null===(h=C.campaignCommissionFormula)||void 0===h||null===(S=h.commissionDefinitionCriteria)||void 0===S?void 0:S.commissionDefinitionCriteriaId)?o.createElement(x.Z,{container:!0,spacing:10,key:t},o.createElement(x.Z,{item:!0,xs:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},"NORMAL"===(null==wt||null===(R=wt.profileInformation)||void 0===R?void 0:R.commissionType)?jt("commissionAmount"):jt("commissionPercentageView")),o.createElement(x.Z,{item:!0,xs:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(e.amount)},e.commissionValue)))):2===(null==wt||null===(b=wt.commissionFormula)||void 0===b||null===(w=b.campaignCommissionFormula)||void 0===w||null===(I=w.commissionCriteria)||void 0===I?void 0:I.commissionCriteriaId)&&2===(null==wt||null===(T=wt.commissionFormula)||void 0===T||null===(k=T.campaignCommissionFormula)||void 0===k||null===(P=k.commissionDefinitionCriteria)||void 0===P?void 0:P.commissionDefinitionCriteriaId)&&3!==(null==wt||null===(M=wt.profileInformation)||void 0===M||null===(A=M.campaignType)||void 0===A?void 0:A.typeId)?4===(null==wt||null===(B=wt.profileInformation)||void 0===B||null===(W=B.campaignType)||void 0===W?void 0:W.typeId)?o.createElement(x.Z,{container:!0,spacing:10,key:t},o.createElement(x.Z,{item:!0,xs:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("kpiName")),o.createElement(x.Z,{item:!0,xs:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(null==e||null===(j=e.kpi)||void 0===j?void 0:j.name)},null==e||null===(_=e.kpi)||void 0===_?void 0:_.name))),o.createElement(x.Z,{item:!0,xs:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("weightage")),o.createElement(x.Z,{item:!0,xs:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(e.amount)},null==e?void 0:e.weightage)))):o.createElement(x.Z,{container:!0,spacing:10,key:t},o.createElement(x.Z,{item:!0,xs:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("kpiName")),o.createElement(x.Z,{item:!0,xs:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(null==e||null===(H=e.kpi)||void 0===H?void 0:H.name)},null==e||null===(z=e.kpi)||void 0===z?void 0:z.name))),o.createElement(x.Z,{item:!0,xs:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},"NORMAL"===(null==wt||null===(q=wt.profileInformation)||void 0===q?void 0:q.commissionType)?jt("commissionAmount"):jt("commissionPercentageView")),o.createElement(x.Z,{item:!0,xs:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(e.amount)},e.commissionValue)))):void 0})),o.createElement(x.Z,{container:!0,spacing:4,className:Wt.spacingBottom},o.createElement(x.Z,{item:!0,xs:12,sm:6},o.createElement(N.Z,{variant:"subtitle1",color:"primary"},jt("notificationManagement"))),o.createElement(x.Z,{item:!0,xs:12,sm:6,className:Wt.alignEnd})),null==wt||null===(Nt=wt.notificationManagement)||void 0===Nt?void 0:Nt.campaignNotificationManagement.map((function(e,t){var n,a,i,l,r;return o.createElement(o.Fragment,null,o.createElement(x.Z,{container:!0,spacing:10,key:t},o.createElement(x.Z,{item:!0,xs:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom,Wt.notificationEvent)},null==e?void 0:e.notificationEvent),o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("smsTemplate")),o.createElement(x.Z,{item:!0,xs:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(null==e?void 0:e.smsTemplate)},e.smsTemplate))),o.createElement(x.Z,{item:!0,xs:4},o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom,Wt.notificationEvent)},null==e?void 0:e.notificationEvent),o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom)},jt("emailTemplate")),o.createElement(x.Z,{item:!0,xs:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(null==e?void 0:e.emailTemplate)},e.emailTemplate)),(null===(n=e.smsTemplateFrequency)||void 0===n?void 0:n.frequencyName)&&o.createElement(o.Fragment,null,o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom,Wt.spacingTop)},jt("smsFrequency")),o.createElement(x.Z,{item:!0,xs:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(null==e?void 0:e.frequencyName)}," ",null===(a=e.smsTemplateFrequency)||void 0===a?void 0:a.frequencyName))),(null===(i=e.emailTemplateFrequency)||void 0===i?void 0:i.frequencyName)&&o.createElement(o.Fragment,null,o.createElement(N.Z,{className:(0,L.default)(Wt.fieldHeading,Wt.spacingBottom,Wt.spacingTop)},jt("emailFrequency")),o.createElement(x.Z,{item:!0,xs:12,className:(0,L.default)(Wt.fieldValue)},o.createElement(N.Z,{style:zt(null===(l=e.emailTemplateFrequency)||void 0===l?void 0:l.frequencyName)},null===(r=e.emailTemplateFrequency)||void 0===r?void 0:r.frequencyName))))))})),o.createElement(x.Z,{container:!0,spacing:4,className:Wt.spacingBottom},o.createElement(x.Z,{item:!0,xs:12,sm:6},o.createElement(N.Z,{variant:"subtitle1",color:"primary"},jt("CommissionCalculation"))),o.createElement(x.Z,{item:!0,xs:12,sm:6,className:Wt.alignEnd})),o.createElement(x.Z,{container:!0,className:(0,L.default)(Wt.rowSpacing,Wt.spacingBottom),spacing:3},o.createElement("div",{style:{height:600,width:"100%"}},o.createElement(_(),{pagination:!0,paginationMode:"server",filterMode:"server",sortingMode:"server",rows:xt,loading:It,columns:Jt,columnBuffer:3,getRowId:function(e){return e.id},onFilterModelChange:Tt,onSortModelChange:kt,rowCount:Pt,onPageChange:function(e){Mt(e.page)},onPageSizeChange:function(e){Mt(0),At(e.pageSize)}})))))};(0,m.Z)((function(e){return(0,c.Z)({button:{margin:e.spacing(1)},element:{margin:e.spacing(1)},spacingBottom:{marginBottom:e.spacing(2)},btnSpace:{marginRight:e.spacing(2)},disabled:{opacity:.5},appBar:{position:"relative"},title:{flex:1},dialogContent:{marginTop:e.spacing(2),marginBottom:e.spacing(7)},fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{textTransform:"capitalize",fontSize:14,wordBreak:"break-all"},rowSpacing:{marginBottom:e.spacing(.5)},dividerSpacing:{marginBottom:e.spacing(3)},btnSpacing:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}})}));var de=n(77712),pe=n(57473),ge=n(69319),fe=n(80985),ve=n(23759),Ee=n(48348),ye=n(15459),Ze=n(86136),Ce=n(49378),he=n(12231),Se=n(29089);function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){(0,Z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var we=(0,ye.Z)({paper:{border:"1px solid #d3d4d5"}})((function(e){return o.createElement(Ee.Z,(0,a.Z)({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},e))})),xe=(0,ye.Z)((function(e){return{root:{"&:focus":{backgroundColor:e.palette.primary.main,"& .MuiListItemIcon-root, & .MuiListItemText-primary":{color:e.palette.common.white}}}}}))(he.Z),Ie=[{id:1,icon:o.createElement(ge.Z,{fontSize:"small"})},{id:2,icon:o.createElement(de.Z,{fontSize:"small"})},{id:3,icon:o.createElement(fe.Z,{fontSize:"small"})},{id:4,icon:o.createElement(ve.Z,{fontSize:"small"})}];const Te=function(e){var t=e.disable,n=void 0!==t&&t,a=o.useState(null),i=(0,u.Z)(a,2),l=i[0],s=i[1],m=(0,A.useHistory)(),c=(0,r.useTranslation)().t,p=(0,Se.Z)().showErrorMessage,g=o.useState({isLoading:!0,campaign:[]}),f=(0,u.Z)(g,2),v=f[0],E=f[1];o.useEffect((function(){(0,d.IS)().then((function(e){0===(null==e?void 0:e.resultCode)?E({isLoading:!1,campaign:e.campaignTypes}):(p(e),E(Ne(Ne({},v),{},{isLoading:!1})))}))}),[]);var y=function(e){s(null),e&&m.push("/home/campaign/create?resellerId=campaign&campId=".concat(e))};return(0,q()().checkPermission)(U.Z.createCampaign)?o.createElement(o.Fragment,null,o.createElement(H.SeamlessButton,{variant:"contained",onClick:function(e){s(e.currentTarget)},color:"primary",disabled:n||v.isLoading,startIcon:!v.isLoading&&o.createElement(pe.Z,null)},v.isLoading?c("loading"):c("createCampaign")),o.createElement(we,{id:"customized-menu",anchorEl:l,keepMounted:!0,open:Boolean(l),onClose:function(){return y()}},v.campaign.map((function(e){var t,n,a=e.typeId,i=e.typeName;return o.createElement(xe,{key:a,onClick:function(){return y(a)}},o.createElement(Ze.Z,null,(t=a,(n=Ie.find((function(e){return e.id===t})))?n.icon:o.createElement(de.Z,{fontSize:"small"}))),o.createElement(Ce.Z,{primary:i}))})))):null};var ke=n(19653),Pe=(0,m.Z)((function(e){return(0,c.Z)({spacingBottom:{marginBottom:e.spacing(.5)},element:{marginRight:e.spacing(1)},skeleton:{height:20},fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{textTransform:"capitalize",fontSize:14,wordBreak:"break-all","& .import-file-name":{textTransform:"none !important"},borderBottom:"1px solid #000000"},rowSpacing:{marginBottom:e.spacing(.5)},alignEnd:{textAlign:"end"},flexBox:{display:"flex",alignItems:"center"},notificationEvent:{marginBottom:e.spacing(1)},gridValue:{paddingLeft:e.spacing(5),paddingBottom:e.spacing(5),paddingRight:e.spacing(5)},scroll:{whiteSpace:"nowrap"},campaignLable:{fontSize:"14px"},spacingTop:{paddingTop:"40px"},adjustmentCell:{width:"95%","& input":{textAlign:"center"}}})})),Me={};const Ae=function(e){var t,n,a,i,l,m,c,p,g,f,v,E,y,Z,C,h=e.data,S=e.campaignTransaction,b=e.loading,T=e.onFilterChange,k=e.isEdit,P=void 0!==k&&k,M=e.onSort,D=e.totalCount,O=e.setParentPage,F=e.setParentPerPage,V=e.page,R=e.perPage,B=Pe(),W=(0,r.useTranslation)().t,j=(0,A.useParams)().id,z=(0,A.useHistory)(),q=new URLSearchParams(window.location.search),U=(0,s.Z)(),G=U.showErrorMessage,J=U.showSuccessMessage,Y=o.useState({}),K=(0,u.Z)(Y,2),$=K[0],Q=K[1],X=o.useState({}),ee=(0,u.Z)(X,2),te=ee[0],ne=ee[1],ae=o.useState(!1),ie=(0,u.Z)(ae,2),le=ie[0],oe=ie[1];o.useEffect((function(){Me={}}),[]),o.useEffect((function(){var e={},t=q.get("status");if((null==S?void 0:S.length)>0){var n={};S.forEach((function(a){var i;n[a.transactionId]=a.adjustment,e[a.transactionId]=a,t&&"PAYOUT_REJECTED"===t&&P&&null!=a.adjustment&&(Me[a.transactionId]={transactionId:a.transactionId,adjustment:"".concat(a.adjustment),originalAmount:"".concat(null!==(i=a.grossCommissionAmount)&&void 0!==i?i:0)})})),ne(e),Q(n)}else ne({}),Q({})}),[S]);var re=[{field:"resellerId",headerName:W("retailerId"),sortable:!0,flex:1,renderCell:function(e){return o.createElement(w.ZP,{title:e.row.resellerId},o.createElement("p",null,e.row.resellerId))}},{field:"resellerName",headerName:W("retailerName"),sortable:!0,flex:1,renderCell:function(e){return o.createElement(w.ZP,{title:e.row.resellerName},o.createElement("p",null,e.row.resellerName))}},{field:"commissionEligibility.",headerName:W("eligibleForComm"),sortable:!1,filterable:!1,flex:1,renderCell:function(e){var t=e.getValue("commissionEligibility");return o.createElement("div",null,o.createElement("span",null,t?"YES":"NO"))}},{field:"commissionCalculated",headerName:W("commissionCal"),sortable:!1,filterable:!1,flex:1,renderCell:function(e){var t=e.getValue("commissionCalculated");return o.createElement("div",null,o.createElement("span",null,t?"YES":"NO"))}},{field:"commissionAmount",headerName:W("commissionAmount"),sortable:!0,flex:1},{field:"adjustment",headerName:W("adjustment"),sortable:!0,width:150,renderCell:function(e){var t=e.getValue("transactionId"),n=e.getValue("adjustment");return o.createElement("div",{className:B.adjustmentCell},P?o.createElement(H.SeamlessInput,{fullWidth:!0,required:!0,id:"input-".concat(t),type:"number",value:$[t],onChange:function(n){var a=+n.target.value;if((0,ke.isNumber)(a)){var i;$[t]=a,Me[t]={transactionId:t,adjustment:"".concat(a),originalAmount:"".concat(null!==(i=e.getValue("grossCommissionAmount"))&&void 0!==i?i:0)};var l=document.getElementById("input-".concat(t));l.value=a,setTimeout((function(){l.value=a}),100)}}}):o.createElement("span",null,n))}},{field:"adjustedAmount",headerName:W("adjustedAmount"),sortable:!0,flex:1},{field:"gstAmount",headerName:W("gstAmount"),sortable:!1,filterable:!1,flex:1},{field:"gstWHAmount",headerName:W("gst_Wh_amount"),sortable:!1,filterable:!1,flex:1},{field:"incomeTaxWHAmount",headerName:W("incometaxTaxWH"),sortable:!1,filterable:!1,flex:1},{field:"grossCommissionAmount",headerName:W("grossCom"),sortable:!0,flex:1}],se=b||le;return o.createElement(x.Z,{container:!0,spacing:3,className:B.spacingBottom},o.createElement(x.Z,{item:!0,xs:12},o.createElement(x.Z,{container:!0,spacing:3,className:B.spacingBottom},o.createElement(x.Z,{item:!0,xs:12,sm:6},o.createElement(N.Z,{variant:"subtitle1",color:"primary"},W("profileInformation"))),o.createElement(x.Z,{item:!0,xs:12,sm:6,className:B.alignEnd})),o.createElement(x.Z,{container:!0,spacing:10},o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(B.fieldHeading,B.spacingBottom)},W("campaignName")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(B.fieldValue)},o.createElement(N.Z,null,(null==h||null===(t=h.campaign)||void 0===t?void 0:t.campaignName)||W("emptyValueMark")))),o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(B.fieldHeading,B.spacingBottom)},W("campaignID")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(B.fieldValue)},o.createElement(N.Z,{className:(0,L.default)(B.campaignLable)},(null==h||null===(n=h.campaign)||void 0===n?void 0:n.campaignUid)||W("emptyValueMark"))))),o.createElement(x.Z,{container:!0,spacing:10},o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(B.fieldHeading,B.spacingBottom)},W("description")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(B.fieldValue)},o.createElement(N.Z,null,(null==h||null===(a=h.campaign)||void 0===a?void 0:a.campaignDescription)||W("emptyValueMark")))),o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(B.fieldHeading,B.spacingBottom)},W("campaignType")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(B.fieldValue)},o.createElement(N.Z,null,null!=h&&null!==(i=h.campaign)&&void 0!==i&&i.campaignType?null==h||null===(l=h.campaign)||void 0===l?void 0:l.campaignType:W("emptyValueMark"))))),o.createElement(x.Z,{container:!0,spacing:10},o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(B.fieldHeading,B.spacingBottom)||W("emptyValueMark")},W("startDate")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(B.fieldValue)},o.createElement(N.Z,null,null==h||null===(m=h.campaign)||void 0===m?void 0:m.startDate))),o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(B.fieldHeading,B.spacingBottom)},W("endDate")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(B.fieldValue)},o.createElement(N.Z,null,(null==h||null===(c=h.campaign)||void 0===c?void 0:c.endDate)||W("emptyValueMark"))))),o.createElement(x.Z,{container:!0,spacing:10},o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(B.fieldHeading,B.spacingBottom)},W("campaigndesignapprovalworkflow")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(B.fieldValue)},o.createElement(N.Z,null,(null==h||null===(p=h.campaign)||void 0===p?void 0:p.payoutWorkflowName)||W("emptyValueMark")))),o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(B.fieldHeading,B.spacingBottom)},W("eventschannel")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(B.fieldValue)},o.createElement(N.Z,null,(null==h||null===(g=h.campaign)||void 0===g?void 0:g.eventChannel)||W("emptyValueMark"))))),o.createElement(x.Z,{container:!0,spacing:4,className:B.spacingBottom},o.createElement(x.Z,{item:!0,xs:12,sm:6},o.createElement(N.Z,{variant:"subtitle1",color:"primary"},W("paymentmode"))),o.createElement(x.Z,{item:!0,xs:12,sm:6,className:B.alignEnd})),o.createElement(x.Z,{container:!0,spacing:10},o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(B.fieldHeading,B.spacingBottom)},W("paymentmode")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(B.fieldValue)},o.createElement(N.Z,null,(null==h||null===(f=h.paymentMode)||void 0===f?void 0:f.paymentMode)||W("emptyValueMark")))),o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(B.fieldHeading,B.spacingBottom)},W("costCenter")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(B.fieldValue)},o.createElement(N.Z,null,(null==h||null===(v=h.paymentMode)||void 0===v||null===(E=v.costCenterList)||void 0===E?void 0:E.map((function(e){return null==e?void 0:e.costCenter})).join(","))||W("emptyValueMark"))))),o.createElement(x.Z,{container:!0,spacing:10},o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(B.fieldHeading,B.spacingBottom)},W("overallCommissionAmount")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(B.fieldValue)},o.createElement(N.Z,null,(null==h||null===(y=h.paymentMode)||void 0===y?void 0:y.commissionAmount)||W("emptyValueMark")))),o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(B.fieldHeading,B.spacingBottom)},W("numberOfQualifiedRetailers")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(B.fieldValue)},o.createElement(N.Z,null,(null==h||null===(Z=h.paymentMode)||void 0===Z?void 0:Z.qualifiedRetailers)||W("emptyValueMark")))),o.createElement(x.Z,{item:!0,xs:12,sm:4},o.createElement(N.Z,{className:(0,L.default)(B.fieldHeading,B.spacingBottom)},W("overallAdjustedCommissionAmount")),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:(0,L.default)(B.fieldValue)},o.createElement(N.Z,null,(null==h||null===(C=h.paymentMode)||void 0===C?void 0:C.adjustedCommissionAmount)||W("emptyValueMark"))))),o.createElement(x.Z,{container:!0,spacing:4,className:B.spacingBottom},o.createElement(x.Z,{item:!0,xs:12,sm:6},o.createElement(N.Z,{variant:"subtitle1",color:"primary"},W("CommissionCalculation"))),o.createElement(x.Z,{item:!0,xs:12,sm:6,className:B.alignEnd})),o.createElement(x.Z,{container:!0,className:(0,L.default)(B.rowSpacing,B.spacingBottom),spacing:3},o.createElement("div",{style:{height:600,width:"100%"}},o.createElement(_(),{pagination:!0,paginationMode:"server",filterMode:"server",sortingMode:"server",rows:Object.values(te),loading:b,columns:re,columnBuffer:3,getRowId:function(e){return e.transactionId},onFilterModelChange:T,onSortModelChange:M,rowCount:D,onPageChange:function(e){O(e.page)},onPageSizeChange:function(e){O(0),F(e.pageSize)},page:V,pageSize:R})),P&&o.createElement(I.Z,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},o.createElement(H.SeamlessButton,{onClick:function(){var e=Object.values(Me);(null==e?void 0:e.length)<=0&&console.warn("Commission Data Not Found => ",Me);var t={commissionAdjustment:e};oe(!0),(0,d.bl)(j,t).then((function(e){0===e.resultCode?(z.push("/home/campaign/adjustment/commission/edit/".concat(j)),J(e)):G(e.resultMessage)})).catch((function(e){G(e)})).finally((function(){return oe(!1)}))},className:(0,L.default)(B.element),color:"primary",variant:"contained",disabled:se},W(se?"loading":"saveButton")),o.createElement(H.SeamlessButton,{onClick:function(){return z.push("/home/campaign/adjustment/commission")},className:(0,L.default)(B.element),color:"primary",disabled:se,variant:"contained"},W(se?"loading":"cancelButton"))))))};var De="";const Oe=function(e){var t=e.workflowStatus,n=e.children,a=(0,r.useTranslation)().t,i=o.useState([]),l=(0,u.Z)(i,2),m=l[0],c=l[1],g=o.useState(!1),f=(0,u.Z)(g,2),v=f[0],E=f[1],y=o.useState(0),Z=(0,u.Z)(y,2),C=Z[0],h=Z[1],S=(0,s.Z)().showErrorMessage,b=o.useState(20),N=(0,u.Z)(b,2),w=N[0],x=N[1],I=o.useState(0),T=(0,u.Z)(I,2),k=T[0],P=T[1],M=o.useState([]),A=(0,u.Z)(M,2),D=A[0],O=A[1],F=o.useState(""),V=(0,u.Z)(F,2),R=(V[0],V[1]),B=o.useState("desc"),W=(0,u.Z)(B,2),_=W[0],H=W[1],L=o.useState("name"),z=(0,u.Z)(L,2),q=z[0],U=z[1],G=((0,j.useServerTable)({page:0,perPage:20,order:"asc",orderBy:"",filter:{}}),o.useCallback((function(e){var t,n,a=(null===(t=e.sortModel[0])||void 0===t?void 0:t.field)||"",i=(null===(n=e.sortModel[0])||void 0===n?void 0:n.sort)||"";U(a),H(i)}),[])),J=o.useCallback((function(e){var t=e.filterModel.items[0].value?e.filterModel.items[0].value:"",n=e.filterModel.items[0].columnField,a=e.filterModel.items[0].operatorValue,i=[];i.push({key:n,operator:a,value:t}),O(i),P(0)}),[]),Y=o.useCallback((function(e){P(e)}),[]),K=o.useCallback((function(e){x(e)}),[]),$=(o.useCallback((function(e){R(e)}),[]),(0,p.IG)(D)),Q={sort:q?"".concat(q,"_").concat(null==_?void 0:_.toLowerCase()):"",pageNumber:$===De?k:0,pageSize:w,filter:JSON.stringify(D)};return o.useEffect((function(){E(!0),(0,d.NA)(Q,t).then((function(e){var t;0===e.resultCode?(h(null==e||null===(t=e.metadata)||void 0===t?void 0:t.totalCount),c(e.campaigns),De=$):1001===e.resultCode?(h(0),c([]),S(e.resultMessage)):S(e.resultMessage||a("anErrorOccurred"))})).catch((function(e){S(e.message||a("anErrorOccurred"))})).finally((function(){return E(!1)}))}),[t,q,_,k,w,D]),o.createElement(o.Fragment,null,n({campaigns:m,loading:v,totalCount:C,workflowStatus:t,onFilterChange:J,onSort:G,setParentPage:Y,setParentPerPage:K}))};var Fe=n(60782),Ve=n(39158),Re=n(81556),Be=n(49166),We=n(38724),je=(0,m.Z)((function(e){return(0,c.Z)({root:{marginTop:e.spacing(5),width:"100%",padding:e.spacing(2)},dialogWrapper:{textAlign:"center","& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginTop:e.spacing(3),marginBottom:e.spacing(3)},btnSpace:{marginRight:e.spacing(2)},content:{textAlign:"left",maxHeight:400,minWidth:550,overflowY:"hidden"}})}));const _e=function(e){var t=e.open,n=e.onClose,a=e.onOk,i=e.children,l=e.maxWidth,s=void 0===l?"md":l,m=e.contentStyle,c=void 0===m?"":m,d=e.hideCancel,p=void 0!==d&&d,g=e.disableBackdropClick,f=void 0!==g&&g,v=e.closeButtonText,E=void 0===v?null:v,y=e.okButtonText,Z=void 0===y?null:y,C=e.withReason,h=je(),S=(0,r.useTranslation)().t,b=o.useState(""),N=(0,u.Z)(b,2),w=N[0],x=N[1],T=o.useState(!1),k=(0,u.Z)(T,2),P=k[0],M=k[1];return o.createElement(H.SeamlessDialog,{open:t,onClose:n,className:h.dialogWrapper,maxWidth:s,fullWidth:!0,disableBackdropClick:f},o.createElement("div",null,o.createElement(o.Fragment,null,o.createElement(We.Z,{className:(0,L.default)(h.content,c)},i,C&&o.createElement(I.Z,{mb:4,display:"flex",flexDirection:"row",justifyContent:"space-between"},o.createElement(H.SeamlessInput,{required:!0,fullWidth:!0,error:P,value:w,name:"reason",multiline:!0,rows:4,rowsMax:4,label:S("reasonText"),onChange:function(e){return x(e.target.value)}}))),!p&&o.createElement(H.SeamlessButton,{type:"button",variant:"outlined",color:"primary",className:h.btnSpace,onClick:n},E||S("cancel")),a&&o.createElement(H.SeamlessButton,{type:"button",variant:"contained",color:"primary",onClick:function(){C&&!w?M(!0):(M(!1),a(w))}},Z))))};var He,Le=(0,m.Z)((function(e){return(0,c.Z)({approveWrapper:{textAlign:"center","& .MuiSvgIcon-root":{fill:"green",fontSize:"xxx-large"},"& h2":{fontSize:"22px",color:e.palette.primary.main},"& p":{width:"60%",margin:"1em auto"}},rejectWrapper:{textAlign:"center","& .MuiSvgIcon-root":{fill:"red",fontSize:"xxx-large"},"& h2":{fontSize:"22px",color:e.palette.primary.main},"& p":{width:"60%",margin:"1em auto"}}})}));null===(He=window.config)||void 0===He||He.defaultPerPageItems;const ze=function(e){var t=e.campaigns,n=void 0===t?[]:t,a=e.loading,l=e.totalCount,m=e.workflowStatus,c=e.onFilterChange,p=e.onSort,g=e.setParentPage,f=e.setParentPerPage,v=((0,i.Z)(e,["campaigns","loading","totalCount","workflowStatus","onFilterChange","onSort","setParentPage","setParentPerPage"]),(0,r.useTranslation)().t),E=(0,A.useHistory)(),y=q()().checkPermission,Z=Le(),C=(0,s.Z)().showErrorMessage,S=o.useState(!1),N=(0,u.Z)(S,2),x=(N[0],N[1]),I=o.useState(!1),T=(0,u.Z)(I,2),k=T[0],P=T[1],M=o.useState(!1),D=(0,u.Z)(M,2),F=D[0],V=D[1],R=o.useState(!1),B=(0,u.Z)(R,2),W=B[0],j=B[1],H=o.useState(!1),L=(0,u.Z)(H,2),z=L[0],G=L[1],J=o.useState(""),Y=(0,u.Z)(J,2),K=Y[0],$=Y[1],Q=o.useState(""),X=(0,u.Z)(Q,2),ee=X[0],te=X[1],ne=function(e){return e&&e.length>30&&(e=e.slice(0,30)+" ..."),e},ae=[{field:"name",headerName:v("campaignName"),sortable:!0,flex:1,renderCell:function(e){return o.createElement(w.ZP,{title:e.row.name},o.createElement("p",null,ne(e.row.name)))}},{field:"description",headerName:v("description"),sortable:!0,flex:1,renderCell:function(e){return o.createElement(w.ZP,{title:e.row.description},o.createElement("p",null,ne(e.row.description)))}},{field:"designWorkflowName",headerName:v("campaignDesignApprovalWorkflow"),sortable:!0,flex:1.4,renderCell:function(e){return o.createElement(w.ZP,{title:e.row.designWorkflowName?e.row.designWorkflowName:e.row.designWorkflowId},o.createElement("p",null,e.row.designWorkflowName?e.row.designWorkflowName:e.row.designWorkflowId))}},{field:"actions",headerName:v("actions"),sortable:!1,filterable:!1,renderCell:function(e){return o.createElement("div",null,o.createElement(b.Z,{size:"small",color:"primary",variant:"text"},y(U.Z.VIEW_CAMPAIGN_DESIGN)&&o.createElement(w.ZP,{title:"View"},o.createElement(h.Z,{component:A.Link,to:{pathname:"/home/campaign/pending-approvals/campaign-design/view/"+e.getValue("trackerUid"),state:{workflowStatus:m}}},o.createElement(O.Z,{fontSize:"small"}))),y(U.Z.APPROVE_CAMPAIGN_DESIGN)&&"pending"===m&&o.createElement(w.ZP,{title:"Approve"},o.createElement(h.Z,{onClick:function(){te(e.getValue("name")),$(e.getValue("trackerUid")),P(!0)}},o.createElement(Ve.Z,{fontSize:"small"}))),y(U.Z.REJECT_CAMPAIGN_DESIGN)&&"pending"===m&&o.createElement(w.ZP,{title:"Reject"},o.createElement(h.Z,{onClick:function(){te(e.getValue("name")),$(e.getValue("trackerUid")),V(!0)}},o.createElement(Fe.Z,{fontSize:"small"})))))},flex:.7}];return o.createElement(o.Fragment,null,o.createElement(_(),{pagination:!0,paginationMode:"server",filterMode:"server",sortingMode:"server",rows:n,loading:a,columns:ae,getRowId:function(e){return"".concat(e.uid,"-").concat(e.trackerUid)},columnBuffer:3,rowCount:l,onSortModelChange:p,onFilterModelChange:c,onPageChange:function(e){g(e.page)},onPageSizeChange:function(e){g(0),f(e.pageSize)},autoHeight:!0}),o.createElement(_e,{open:k,onClose:function(){P(!1),W&&E.push("/home/campaign/pending-approvals/campaign-design")},onOk:function(e){W?(P(!1),E.push("/home/campaign/pending-approvals/campaign-design")):(x(!0),(0,d.s0)(K,"APPROVE",{reason:e}).then((function(e){0===e.resultCode?j(!0):C(e.resultMessage||v("anErrorOccurred"))})).catch((function(e){C(e.message||v("anErrorOccurred"))})).finally((function(){return x(!1)})))},hideCancel:W,okButtonText:v(W?"okay":"approve"),withReason:!W},o.createElement("div",{className:Z.approveWrapper},o.createElement(Re.Z,null),o.createElement("h2",null,v(W?"campaignApprovedSuccessfully":"areYouSureYouWantToApproveThisCampaign")),W&&o.createElement("p",null,v("campginApprovedDescripiton",{campaign:ee})))),o.createElement(_e,{open:F,onClose:function(){V(!1),z&&E.push("/home/campaign/pending-approvals/campaign-design")},onOk:function(e){z?(V(!1),E.push("/home/campaign/pending-approvals/campaign-design")):(x(!0),(0,d.s0)(K,"REJECT",{reason:e}).then((function(e){0===e.resultCode?G(!0):C(e.resultMessage||v("anErrorOccurred"))})).catch((function(e){C(e.message||v("anErrorOccurred"))})).finally((function(){return x(!1)})))},hideCancel:z,okButtonText:v(z?"okay":"reject"),withReason:!z},o.createElement("div",{className:Z.rejectWrapper},o.createElement(Be.Z,null),o.createElement("h2",null,v(z?"campaignHasBeenRejected":"areYouSureYouWantToRejectThisCampaign")),z&&o.createElement("p",null,v("campginRejectedDescripiton",{campaign:ee})))))};var qe=(0,m.Z)((function(e){return(0,c.Z)({tabBtn:{marginLeft:0,textTransform:"capitalize",backgroundColor:"#FFF",color:"#46A2EB",padding:e.spacing(1.25),paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},lftBtn:{borderTopRightRadius:0,borderBottomRightRadius:0},rgtBtn:{borderTopLeftRadius:0,borderBottomLeftRadius:0},pending:{backgroundColor:"#46A2EB",color:"white"},spacingBottom:{marginBottom:e.spacing(1)}})}));const Ue=function(){var e,t,n=(0,A.useLocation)(),a=o.useState(null!==(e=null===(t=n.state)||void 0===t?void 0:t.status)&&void 0!==e?e:"pending"),i=(0,u.Z)(a,2),l=i[0],s=i[1],m=(0,r.useTranslation)().t,c=qe();return o.createElement(o.Fragment,null,o.createElement(x.Z,{container:!0,spacing:3,className:c.spacingBottom},o.createElement(x.Z,{item:!0,xs:12,sm:12},o.createElement(I.Z,{display:"flex",justifyContent:"space-between",alignItems:"center"},o.createElement("div",null,o.createElement(h.Z,{variant:"contained",className:(0,L.default)(c.tabBtn,c.lftBtn,"pending"===l&&c.pending),onClick:function(){return s("pending")}},m("pendingApproval")),o.createElement(h.Z,{variant:"contained",className:(0,L.default)(c.tabBtn,c.rgtBtn,"processed"===l&&c.pending),onClick:function(){return s("processed")}},m("closedApproval")))))),o.createElement(Oe,{workflowStatus:l},(function(e){var t=e.campaigns,n=e.loading,a=e.totalCount,i=e.workflowStatus,l=e.onSort,r=e.setParentPage,s=e.setParentPerPage,m=e.onFilterChange;return o.createElement(ze,{campaigns:t,loading:n,totalCount:a,workflowStatus:i,onSort:l,setParentPage:r,setParentPerPage:s,onFilterChange:m})})))},Ge=function(e){var t=e.id,n=(0,s.Z)().showErrorMessage,a=o.useState(),i=(0,u.Z)(a,2),l=i[0],r=i[1],m=o.useState(!1),c=(0,u.Z)(m,2),p=c[0],g=c[1],f=(0,A.useLocation)().state.workflowStatus,v=o.useCallback((function(){g(!0),(0,d.Fq)(t).then((function(e){0===e.resultCode&&e.campaigns.length>0?r(e.campaigns[0]):r(void 0)})).catch((function(e){n(e)})).finally((function(){return g(!1)}))}),[]);return o.useEffect((function(){v()}),[v]),o.createElement(it,{onSubmit:function(e){return null},initialValues:l,campaignDesignLoading:p,workflowStatus:f})};var Je=n(86619),Ye=n(41262),Ke=n(4614),$e=n(85256),Qe=n(8526),Xe=n(77114),et=n(22728);function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach((function(t){(0,Z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var at=(0,m.Z)((function(e){return(0,c.Z)({elements:{marginRight:e.spacing(1)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},wFull:{width:"100%"},spacingTop:{marginTop:e.spacing(3)},spacingBottom:{marginBottom:e.spacing(1)},skeleton:{height:20},percentTop:{top:"25%"},responsiveImage:{maxWidth:200,width:"100%"},fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{textTransform:"capitalize",fontSize:14,wordBreak:"break-all"},rowSpacing:{marginBottom:e.spacing(.5),marginTop:e.spacing(.5)},autocomplete:{"& .MuiChip-deleteIcon":{display:"none"},"& .MuiAutocomplete-popupIndicator":{display:"none"}},flexSpaceBetween:{display:"flex",justifyContent:"space-between"},dividerSpacing:{marginBottom:"6px",height:"2px",backgroundColor:"#d3d3d3"},kpiEvents:{marginBottom:e.spacing(2),paddingLeft:"10px",paddingRight:"10px",border:"1px solid #e0e0e0",borderRadius:"8px"},approveWrapper:{textAlign:"center","& .MuiSvgIcon-root":{fill:"green",fontSize:"xxx-large"},"& h2":{fontSize:"22px",color:e.palette.primary.main},"& p":{width:"60%",margin:"1em auto"}},rejectWrapper:{textAlign:"center","& .MuiSvgIcon-root":{fill:"red",fontSize:"xxx-large"},"& h2":{fontSize:"22px",color:e.palette.primary.main},"& p":{width:"60%",margin:"1em auto"}},completedMessage:{padding:"10px 20px",backgroundColor:"#BEDEF8",borderRadius:"8px"},inputMultiline:{height:"100%","& .MuiInputBase-root":{height:"100%",minHeight:"40px",display:"flex",alignItems:"start"}}})}));const it=function(e){var t,n,i,l,m,c,p,g,f,v,E,y,Z,C,h,S,b,I,T,k,P,M,D,O,F,V,R,B,W,j,_,z,G,J,Y,K,$,Q,X,ee,te,ne,ae,ie,le,oe,re,se,me,ce,ue,de,pe,ge,fe,ve,Ee,ye,Ze,Ce,he,Se,be,Ne,we,xe,Ie,Te,ke,Pe,Me,Ae,De,Oe,Fe,Ve,We,je,He,Le,ze,qe=e.initialValues,Ue=e.campaignDesignLoading,Ge=e.workflowStatus,tt=e.onSubmit,it=(0,A.useHistory)(),lt=(0,r.useTranslation)().t,ot=q()().checkPermission,rt=null===(t=window)||void 0===t?void 0:t.config,st=(null==rt||null===(n=rt.campaign)||void 0===n?void 0:n.additionalRetailer)||"",mt=at(),ct=(0,s.Z)().showErrorMessage,ut=o.useState(!1),dt=(0,u.Z)(ut,2),pt=dt[0],gt=dt[1],ft=o.useState(!1),vt=(0,u.Z)(ft,2),Et=vt[0],yt=vt[1],Zt=o.useState(!1),Ct=(0,u.Z)(Zt,2),ht=Ct[0],St=Ct[1],bt=o.useState(!1),Nt=(0,u.Z)(bt,2),wt=Nt[0],xt=Nt[1],It=o.useState(""),Tt=(0,u.Z)(It,2),kt=Tt[0],Pt=Tt[1],Mt=[{name:lt("salesTax"),value:"gstRate"},{name:lt("incomeTax"),value:"rateWht"},{name:lt("gstWth"),value:"gstRateWht"}],At=Qe.Ry().shape({reason:Qe.Z_().required(lt("reasonRequired"))}),Dt=(0,Xe.TA)({initialValues:qe,onSubmit:tt,validationSchema:At}),Ot=Dt.values,Ft=Dt.handleChange,Vt=Dt.setValues,Rt=(Dt.isValid,function(e,t){return e.filter((function(e,n,a){return a.findIndex((function(n){return t.every((function(t){return n[t]===e[t]}))}))===n}))});if(o.useEffect((function(){if(qe){var e=(n=[],a=[],i=[],(t=qe).commissionFormula.campaignCommissionFormula.commissionFormulaDetails.map((function(e,t){var l,o,r,s;n.push({kpi:null==e||null===(l=e.kpi)||void 0===l?void 0:l.name,weightage:(null==e?void 0:e.weightage)||""}),a.push({retailerTypeId:e.retailerTypeId,commissionValue:e.commissionValue}),i.push({kpi:null==e||null===(o=e.kpi)||void 0===o?void 0:o.name,slab:"Slab ".concat(t+1),lowerCount:null!==(r=null==e?void 0:e.rangeFrom)&&void 0!==r?r:"",upperCount:null!==(s=null==e?void 0:e.rangeTo)&&void 0!==s?s:"",commissionValue:e.commissionValue})})),t.kpiWeightage=Rt(n,["kpi","weightage"]),t.retailers=Rt(a,["retailerTypeId","commissionValue"]),t.slabBasedKpis=Rt(i,["kpi","commissionValue","lowerCount","upperCount"]),t.reason="",t);Vt(e)}var t,n,a,i}),[qe]),Ue&&!Ot)return o.createElement(Ye.Z,{className:mt.backdrop,open:Ue&&!Ot},o.createElement(Ke.Z,{color:"inherit"}));if(!Ot)return o.createElement(N.Z,{variant:"h5",color:"primary"},lt("noDataFoundError"));var Bt,Wt,jt,_t,Ht,Lt,zt,qt,Ut,Gt,Jt,Yt,Kt=function(e){Ot.reason?(gt(!0),(0,d.s0)(Ot.profileInformation.trackerUid,e,{reason:Ot.reason}).then((function(t){0===t.resultCode?"APPROVE"===e?(Pt("approved"),yt(!0)):(Pt("rejected"),St(!0)):ct(t.resultMessage||lt("anErrorOccurred"))})).catch((function(e){ct(e.message||lt("anErrorOccurred"))})).finally((function(){gt(!1),xt(!0)}))):ct(lt("reasonRequired"))},$t=function(e){return e.map((function(e){var t=Mt.find((function(t){return t.value===e}));return null==t?void 0:t.name}))};return o.createElement(o.Fragment,null,o.createElement(x.Z,{container:!0,spacing:3},o.createElement(x.Z,{item:!0,xs:12,className:mt.flexSpaceBetween},o.createElement(N.Z,{variant:"h5",color:"primary"},lt("profileInformation","Profile Information")),wt&&o.createElement("div",{className:mt.completedMessage},lt("campaignMessage",{status:kt||"approved/rejected"}))),o.createElement(x.Z,{item:!0,xs:12,sm:12},o.createElement(x.Z,{container:!0,className:mt.rowSpacing,spacing:3},o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(w.ZP,{title:null!==(i=null===(l=Ot.profileInformation)||void 0===l?void 0:l.name)&&void 0!==i?i:void 0},o.createElement(H.SeamlessInput,{value:null!==(m=null===(c=Ot.profileInformation)||void 0===c?void 0:c.name)&&void 0!==m?m:lt("emptyValueMark"),name:"campaignName",className:mt.wFull,label:lt("campaignName"),readOnly:!0})))),o.createElement(x.Z,{container:!0,className:mt.rowSpacing,spacing:3},o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(p=null===(g=Ot.profileInformation)||void 0===g?void 0:g.description)&&void 0!==p?p:lt("emptyValueMark"),name:"description",multiline:!0,className:(0,L.default)(mt.wFull,mt.inputMultiline),label:lt("description"),readOnly:!0})),o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(f=null===(v=Ot.profileInformation)||void 0===v||null===(E=v.campaignType)||void 0===E?void 0:E.typeName)&&void 0!==f?f:lt("emptyValueMark"),name:"weightageBasedCampaign",className:mt.wFull,label:lt("weightageBasedCampaign"),readOnly:!0}))),o.createElement(x.Z,{container:!0,className:mt.rowSpacing,spacing:3},o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(y=null===(Z=Ot.profileInformation)||void 0===Z?void 0:Z.startDate)&&void 0!==y?y:lt("emptyValueMark"),name:"startDate",className:mt.wFull,label:lt("startDate"),readOnly:!0})),o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(C=null===(h=Ot.profileInformation)||void 0===h?void 0:h.endDate)&&void 0!==C?C:lt("emptyValueMark"),name:"endDate",className:mt.wFull,label:lt("endDate"),readOnly:!0}))),o.createElement(x.Z,{container:!0,className:mt.rowSpacing,spacing:3},o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(S=null===(b=Ot.profileInformation)||void 0===b?void 0:b.designWorkflowName)&&void 0!==S?S:lt("emptyValueMark"),name:"campaignDesignApprovalWorkflow",className:mt.wFull,label:lt("campaignDesignApprovalWorkflow"),readOnly:!0})),o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(I=null===(T=Ot.profileInformation)||void 0===T?void 0:T.eventChannels)&&void 0!==I?I:lt("emptyValueMark"),name:"eventsChannel",className:mt.wFull,label:lt("eventsChannel"),readOnly:!0})),o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(k=null===(P=Ot.profileInformation)||void 0===P?void 0:P.commissionType)&&void 0!==k?k:lt("emptyValueMark"),name:"commissionType",className:mt.wFull,label:lt("commissionType"),readOnly:!0}))),3===Ot.profileInformation.campaignType.typeId&&o.createElement(x.Z,{container:!0,className:mt.rowSpacing,spacing:3},o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(M=null===(D=Ot.profileInformation)||void 0===D?void 0:D.slabRangeType)&&void 0!==M?M:lt("emptyValueMark"),name:"slabRangeType",className:mt.wFull,label:lt("slabRangeType"),readOnly:!0})),o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(O=null===(F=Ot.profileInformation)||void 0===F?void 0:F.slabCommissionType)&&void 0!==O?O:lt("emptyValueMark"),name:"slabCommissionType",className:mt.wFull,label:lt("slabCommissionType"),readOnly:!0})),"PER_ACHIEVEMENT"===(null===(V=Ot.profileInformation)||void 0===V?void 0:V.slabCommissionType)&&o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(R=Ot.profileInformation)&&void 0!==R&&R.isSequential?"Sequential":"Non Sequential",name:"slabCommissionRule",className:mt.wFull,label:lt("slabCommissionRule"),readOnly:!0})))),o.createElement(x.Z,{item:!0,xs:12},o.createElement(N.Z,{variant:"h5",color:"primary"},lt("targetAudience","Target Audience"))),o.createElement(x.Z,{item:!0,xs:12,sm:12},o.createElement(x.Z,{container:!0,className:mt.rowSpacing,spacing:3},o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(B=null===(W=Ot.targetAudience)||void 0===W||null===(j=W.campaignExtraParam)||void 0===j?void 0:j.audienceType)&&void 0!==B?B:lt("emptyValueMark"),name:"typeOfTargetAudience",className:mt.wFull,label:lt("typeOfTargetAudience"),readOnly:!0}))),o.createElement(x.Z,{container:!0,className:mt.rowSpacing,spacing:3},o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(_=null===(z=Ot.targetAudience)||void 0===z||null===(G=z.campaignExtraParam)||void 0===G?void 0:G.targetAudienceComment)&&void 0!==_?_:lt("emptyValueMark"),name:"comment",multiline:!0,className:(0,L.default)(mt.wFull,mt.inputMultiline),label:lt("comment"),readOnly:!0})),o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(J=null===(Y=Ot.targetAudience)||void 0===Y||null===(K=Y.campaignExtraParam)||void 0===K?void 0:K.targetAudienceDataSource)&&void 0!==J?J:lt("emptyValueMark"),name:"targetSelectionMode",className:mt.wFull,label:lt("targetSelectionMode"),readOnly:!0}))),o.createElement(x.Z,{container:!0,className:mt.rowSpacing,spacing:3},o.createElement(x.Z,{item:!0,xs:12,sm:3},null!==($=Ot.targetAudience)&&void 0!==$&&$.retailerInclusions.length?o.createElement(H.SeamlessInput,{multiline:!0,className:(0,L.default)(mt.wFull,mt.inputMultiline),value:(Yt=null===(Q=Ot.targetAudience)||void 0===Q?void 0:Q.retailerInclusions,Yt.map((function(e){return e.retailerMsisdn})).join(", ")),name:"targetSelectionMode",label:lt("targetSelectionMode"),readOnly:!0}):o.createElement(H.SeamlessInput,{value:lt("emptyValueMark"),name:"retailertypesbymsisdn",className:mt.wFull,label:lt("retailertypesbymsisdn"),readOnly:!0})),o.createElement(x.Z,{item:!0,xs:12,sm:3},null!==(X=Ot.targetAudience)&&void 0!==X&&X.excludedRetailers.length?o.createElement(H.SeamlessInput,{multiline:!0,className:(0,L.default)(mt.wFull,mt.inputMultiline),value:null===(ee=Ot.targetAudience)||void 0===ee?void 0:ee.excludedRetailers.join(", "),name:"excludedRetailers",label:lt("excludedRetailers"),readOnly:!0}):o.createElement(H.SeamlessInput,{value:lt("emptyValueMark"),name:"excludedRetailers",className:mt.wFull,label:lt("excludedRetailers"),readOnly:!0}))),o.createElement(x.Z,{container:!0,className:mt.rowSpacing,spacing:3},o.createElement(x.Z,{item:!0,xs:12,sm:3},null!==(te=Ot.targetAudience)&&void 0!==te&&te.regions.length?o.createElement(et.ZP,{multiple:!0,className:mt.autocomplete,defaultValue:null===(ne=Ot.targetAudience)||void 0===ne?void 0:ne.regions,options:null===(ae=Ot.targetAudience)||void 0===ae?void 0:ae.regions,open:!1,getOptionLabel:function(e){return e.regionName},disableClearable:!0,renderInput:function(e){return o.createElement(Je.Z,(0,a.Z)({},e,{variant:"standard",InputProps:nt(nt({},e.InputProps),{},{readOnly:!0}),label:lt("regions")}))}}):o.createElement(H.SeamlessInput,{value:lt("emptyValueMark"),name:"regions",className:mt.wFull,label:lt("regions")})),o.createElement(x.Z,{item:!0,xs:12,sm:3},null!==(ie=Ot.targetAudience)&&void 0!==ie&&ie.retailerTypes.length?o.createElement(et.ZP,{multiple:!0,className:mt.autocomplete,defaultValue:null===(le=Ot.targetAudience)||void 0===le?void 0:le.retailerTypes,options:null===(oe=Ot.targetAudience)||void 0===oe?void 0:oe.retailerTypes,open:!1,disableClearable:!0,renderInput:function(e){return o.createElement(Je.Z,(0,a.Z)({},e,{variant:"standard",InputProps:nt(nt({},e.InputProps),{},{readOnly:!0}),label:lt("retailerTypes")}))}}):o.createElement(H.SeamlessInput,{value:lt("emptyValueMark"),name:"retailerTypes",className:mt.wFull,label:lt("retailerTypes"),readOnly:!0})))),o.createElement(x.Z,{item:!0,xs:12},o.createElement(N.Z,{variant:"h5",color:"primary"},lt("paymentmode","Payment Mode"))),o.createElement(x.Z,{item:!0,xs:12,sm:12},o.createElement(x.Z,{container:!0,className:mt.rowSpacing,spacing:3},o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(re=null===(se=Ot.paymentInformation)||void 0===se||null===(me=se.campaignPaymentInformation)||void 0===me||null===(ce=me.commissionType)||void 0===ce?void 0:ce.commissionType)&&void 0!==re?re:lt("emptyValueMark"),name:"commissionType",className:mt.wFull,label:lt("commissionType"),readOnly:!0})),o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(ue=null===(de=Ot.paymentInformation)||void 0===de||null===(pe=de.campaignPaymentInformation)||void 0===pe?void 0:pe.paymentFrequency)&&void 0!==ue?ue:lt("emptyValueMark"),name:"paymentFrequency",className:mt.wFull,label:lt("paymentFrequency"),readOnly:!0}))),o.createElement(x.Z,{container:!0,className:mt.rowSpacing,spacing:3},o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(ge=null===(fe=Ot.paymentInformation)||void 0===fe?void 0:fe.glCode)&&void 0!==ge?ge:lt("emptyValueMark"),className:mt.wFull,name:"commissionHead",label:lt("commissionHead"),readOnly:!0})),o.createElement(x.Z,{item:!0,xs:12,sm:3},null!==(ve=Ot.paymentInformation)&&void 0!==ve&&ve.includedCostCenters.length?o.createElement(et.ZP,{multiple:!0,className:mt.autocomplete,defaultValue:null!==(Ee=null===(ye=Ot.paymentInformation)||void 0===ye?void 0:ye.includedCostCenters)&&void 0!==Ee?Ee:[],options:null!==(Ze=null===(Ce=Ot.paymentInformation)||void 0===Ce?void 0:Ce.includedCostCenters)&&void 0!==Ze?Ze:[],getOptionLabel:function(e){return e.costCenter.costCenter},disableClearable:!0,open:!1,renderInput:function(e){return o.createElement(Je.Z,(0,a.Z)({},e,{variant:"standard",InputProps:nt(nt({},e.InputProps),{},{readOnly:!0}),label:lt("costCenter")}))}}):o.createElement(H.SeamlessInput,{value:lt("emptyValueMark"),name:"costCenter",className:mt.wFull,label:lt("costCenter"),readOnly:!0}))),o.createElement(x.Z,{container:!0,className:mt.rowSpacing,spacing:3},o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(he=null===(Se=Ot.paymentInformation)||void 0===Se||null===(be=Se.campaignPaymentInformation)||void 0===be||null===(Ne=be.paymentChannelType)||void 0===Ne?void 0:Ne.paymentChannelName)&&void 0!==he?he:lt("emptyValueMark"),name:"paymentChannel",className:mt.wFull,label:lt("paymentChannel"),readOnly:!0}))),o.createElement(x.Z,{container:!0,className:mt.rowSpacing,spacing:3},o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(we=Ot.paymentInformation)&&void 0!==we&&null!==(xe=we.campaignPaymentInformation)&&void 0!==xe&&xe.payoutWorkflowName?lt("yes"):lt("no"),name:"payoutApproval",className:mt.wFull,label:lt("payoutApproval"),readOnly:!0})),o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(Ie=null===(Te=Ot.paymentInformation)||void 0===Te||null===(ke=Te.campaignPaymentInformation)||void 0===ke?void 0:ke.payoutWorkflowName)&&void 0!==Ie?Ie:lt("emptyValueMark"),name:"payoutWorkflow",className:mt.wFull,label:lt("payoutWorkflow"),readOnly:!0})))),o.createElement(x.Z,{item:!0,xs:12},o.createElement(N.Z,{variant:"h5",color:"primary"},lt("businessRules","Business Rules"))),o.createElement(x.Z,{item:!0,xs:12,sm:12,className:mt.spacingBottom},o.createElement(x.Z,{container:!0,className:mt.rowSpacing,spacing:3},o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:"Manual",name:"targetSelectionMode",className:mt.wFull,label:lt("targetSelectionMode"),readOnly:!0}))),null===(Pe=Ot.businessRule)||void 0===Pe||null===(Me=Pe.kpis)||void 0===Me?void 0:Me.map((function(e,t){var n;return o.createElement("div",{key:"kpi-".concat(t)},o.createElement(x.Z,{container:!0,className:mt.rowSpacing,spacing:3},o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:e.name,name:"KPIName",className:mt.wFull,label:lt("kpiName"),readOnly:!0})),o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:e.targetInCount,name:"KPITargetInCount",className:mt.wFull,label:lt("kpiTargetCount"),readOnly:!0}))),e.kpiEvents.map((function(t,n){var i,l=null===(i=e.exemptedTax)||void 0===i?void 0:i.split(","),r=n+1;return o.createElement("div",{className:mt.kpiEvents,key:"kpi-event-".concat(n)},o.createElement(x.Z,{container:!0,className:mt.rowSpacing,spacing:3},o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:t.transactionEvent.name,name:"Event "+r,className:mt.wFull,label:lt("event ")+r,readOnly:!0})),Boolean(n)?o.createElement(o.Fragment,null,o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:t.previousEventRelation,name:"relationWithFirstEvent",className:mt.wFull,label:lt("relationWithFirstEvent"),readOnly:!0})),o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:t.daysBetweenPreviousEvent,name:"numberOfDays",className:mt.wFull,label:lt("noOfDays"),readOnly:!0}))):o.createElement(o.Fragment,null,o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:t.criteria,name:"targetCriteria",className:mt.wFull,label:lt("targetCriteria"),readOnly:!0})),o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:t.criteriaValue,name:"numberForSelectedCriteria",className:mt.wFull,label:lt("numberForSelectedCriteria"),readOnly:!0})))),Boolean(n)&&o.createElement(o.Fragment,null,o.createElement(x.Z,{container:!0,className:mt.rowSpacing,spacing:3},o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:t.criteria,name:"targetCriteria",className:mt.wFull,label:lt("targetCriteria"),readOnly:!0})),o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:t.criteriaValue,name:"numberForSelectedCriteria",className:mt.wFull,label:lt("numberForSelectedCriteria"),readOnly:!0})))),o.createElement(x.Z,{container:!0,className:mt.rowSpacing,spacing:3},o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!=l&&l.length?"Yes":"No",name:"taxExempted",className:mt.wFull,label:lt("taxExempted"),readOnly:!0})),o.createElement(x.Z,{item:!0,xs:12,sm:3},null!=l&&l.length?o.createElement(et.ZP,{multiple:!0,className:mt.autocomplete,defaultValue:$t(l),options:$t(l),open:!1,disableClearable:!0,renderInput:function(e){return o.createElement(Je.Z,(0,a.Z)({},e,{variant:"standard",InputProps:nt(nt({},e.InputProps),{},{readOnly:!0}),label:lt("taxType")}))}}):o.createElement(H.SeamlessInput,{value:lt("emptyValueMark"),name:"taxType",className:mt.wFull,label:lt("taxType"),readOnly:!0}))))})),t!==(null===(n=Ot.businessRule)||void 0===n?void 0:n.kpis.length)-1&&o.createElement($e.Z,{className:mt.dividerSpacing}))}))),o.createElement(x.Z,{item:!0,xs:12},o.createElement(N.Z,{variant:"h5",color:"primary"},lt("commissionFormula","Commission Formula"))),o.createElement(x.Z,{item:!0,xs:12,sm:12},o.createElement(x.Z,{container:!0,className:mt.rowSpacing,spacing:3},o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(Ae=null===(De=Ot.commissionFormula)||void 0===De||null===(Oe=De.campaignCommissionFormula)||void 0===Oe||null===(Fe=Oe.commissionCriteria)||void 0===Fe?void 0:Fe.criteriaName)&&void 0!==Ae?Ae:lt("emptyValueMark"),name:"commissionCriteria",className:mt.wFull,label:lt("commissioncriteria"),readOnly:!0}))),o.createElement(x.Z,{container:!0,className:mt.rowSpacing,spacing:3},o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(Ve=null===(We=Ot.commissionFormula)||void 0===We||null===(je=We.campaignCommissionFormula)||void 0===je||null===(He=je.commissionDefinitionCriteria)||void 0===He?void 0:He.definitionCriteriaName)&&void 0!==Ve?Ve:lt("emptyValueMark"),className:mt.wFull,name:"commissionDefinitionCriteria",label:lt("commissionDefinitionCriteria"),readOnly:!0}))),4===Ot.profileInformation.campaignType.typeId?o.createElement(o.Fragment,null,Ot.kpiWeightage.map((function(e,t){var n,a;return o.createElement("div",{key:"kpi-".concat(t)},o.createElement(x.Z,{container:!0,className:mt.rowSpacing,spacing:3},o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(n=e.kpi)&&void 0!==n?n:lt("emptyValueMark"),name:"kpiName-".concat(t),className:mt.wFull,label:lt("kpiName"),readOnly:!0})),o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(a=e.weightage)&&void 0!==a?a:lt("emptyValueMark"),name:"kpiWeightage-".concat(t),className:mt.wFull,label:lt("weightage"),readOnly:!0}))))})),Ot.retailers.map((function(e,t){var n,a,i;return o.createElement("div",{key:"retailer-".concat(t)},o.createElement(x.Z,{container:!0,className:mt.rowSpacing,spacing:3},o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(n=e.retailerTypeId)&&void 0!==n?n:lt("emptyValueMark"),name:"retailerType-".concat(t),className:mt.wFull,label:lt("retailerType"),readOnly:!0})),o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(a=e.commissionValue)&&void 0!==a?a:lt("emptyValueMark"),name:"commissionValue-".concat(t),className:mt.wFull,label:"NORMAL"===(null===(i=Ot.profileInformation)||void 0===i?void 0:i.commissionType)?lt("commissionAmount"):lt("commissionPercentageView"),readOnly:!0}))))}))):3===Ot.profileInformation.campaignType.typeId?o.createElement(o.Fragment,null,Ot.slabBasedKpis.map((function(e,t){var n,a,i,l,r,s,m;return o.createElement("div",{key:"kpi-".concat(t),className:mt.kpiEvents},o.createElement(x.Z,{container:!0,className:mt.rowSpacing,spacing:3},o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(n=e.kpi)&&void 0!==n?n:lt("emptyValueMark"),name:"kpiName-".concat(t),className:mt.wFull,label:lt("kpiName"),readOnly:!0}))),o.createElement(x.Z,{container:!0,className:mt.rowSpacing,spacing:3},o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(a=e.slab)&&void 0!==a?a:lt("emptyValueMark"),name:"slab-".concat(t),className:mt.wFull,label:lt("slab"),readOnly:!0})),o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(i=e.lowerCount)&&void 0!==i?i:lt("emptyValueMark"),name:"lowerCount-".concat(t),className:mt.wFull,label:"PERCENTAGE"===(null===(l=Ot.profileInformation)||void 0===l?void 0:l.slabRangeType)?lt("lowerPercentage"):lt("lowerCount"),readOnly:!0})),o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(r=e.upperCount)&&void 0!==r?r:lt("emptyValueMark"),name:"upperCount-".concat(t),className:mt.wFull,label:"PERCENTAGE"===(null===(s=Ot.profileInformation)||void 0===s?void 0:s.slabRangeType)?lt("upperPercentage"):lt("upperCount"),readOnly:!0}))),o.createElement(x.Z,{container:!0,className:mt.rowSpacing,spacing:3},o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(m=e.commissionValue)&&void 0!==m?m:lt("emptyValueMark"),name:"commissionValue-".concat(t),className:mt.wFull,label:lt("commissionAmount"),readOnly:!0}))))}))):o.createElement(o.Fragment,null,"PER_KPI"===(null===(Bt=Ot.commissionFormula)||void 0===Bt||null===(Wt=Bt.campaignCommissionFormula)||void 0===Wt||null===(jt=Wt.commissionDefinitionCriteria)||void 0===jt?void 0:jt.commissionDefinitionCriteria)?o.createElement(o.Fragment,null,null===(_t=Ot.commissionFormula)||void 0===_t||null===(Ht=_t.campaignCommissionFormula)||void 0===Ht?void 0:Ht.commissionFormulaDetails.map((function(e,t){var n,a,i,l;return o.createElement("div",{key:"criteria-".concat(t),className:mt.kpiEvents},o.createElement(x.Z,{container:!0,className:mt.rowSpacing,spacing:3},o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(n=null==e?void 0:e.retailerTypeId)&&void 0!==n?n:st,name:"retailerType-".concat(t),className:mt.wFull,label:lt("retailerType"),readOnly:!0})),o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(a=null==e?void 0:e.kpi.name)&&void 0!==a?a:lt("emptyValueMark"),name:"criteriaKpiName-".concat(t),className:mt.wFull,label:lt("kpiName"),readOnly:!0})),o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(i=e.commissionValue)&&void 0!==i?i:lt("emptyValueMark"),name:"commissionValue-".concat(t),className:mt.wFull,label:"NORMAL"===(null===(l=Ot.profileInformation)||void 0===l?void 0:l.commissionType)?lt("commissionAmount"):lt("commissionPercentageView"),readOnly:!0}))))}))):o.createElement(x.Z,{container:!0,className:mt.rowSpacing,spacing:3},o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(Lt=null===(zt=Ot.commissionFormula)||void 0===zt||null===(qt=zt.campaignCommissionFormula)||void 0===qt||null===(Ut=qt.commissionFormulaDetails)||void 0===Ut||null===(Gt=Ut[0])||void 0===Gt?void 0:Gt.commissionValue)&&void 0!==Lt?Lt:lt("emptyValueMark"),name:"commissionValue",className:mt.wFull,label:"NORMAL"===(null===(Jt=Ot.profileInformation)||void 0===Jt?void 0:Jt.commissionType)?lt("commissionAmount"):lt("commissionPercentageView"),readOnly:!0})))),!wt&&"pending"===Ge&&o.createElement(x.Z,{container:!0,className:mt.spacingTop,spacing:3},o.createElement(x.Z,{item:!0,xs:12,sm:6},o.createElement(H.SeamlessInput,{value:Ot.reason,name:"reason",fullWidth:!0,multiline:!0,required:!0,rows:5,onChange:Ft,rowsMax:5,label:lt("reasonText")})))),wt||"pending"!==Ge?o.createElement(x.Z,{item:!0,xs:12},o.createElement(H.SeamlessButton,{id:"seamless-campaign-form-button-cancel",onClick:function(){return it.push({pathname:"/home/campaign/pending-approvals/campaign-design",state:{status:Ge}})},className:mt.elements,variant:"contained",color:"secondary"},lt("back","Back"))):o.createElement(x.Z,{item:!0,xs:12},ot(U.Z.APPROVE_CAMPAIGN_DESIGN)&&o.createElement(H.SeamlessButton,{id:"seamless-campaign-form-button-approve",onClick:function(){return Kt("APPROVE")},className:mt.elements,variant:"contained",color:"secondary"},pt?o.createElement(Ke.Z,{color:"inherit",size:20}):lt("approve","Approve")),ot(U.Z.REJECT_CAMPAIGN_DESIGN)&&o.createElement(H.SeamlessButton,{id:"seamless-campaign-form-button-reject",onClick:function(){return Kt("REJECT")},className:mt.elements,variant:"outlined",color:"secondary"},pt?o.createElement(Ke.Z,{color:"primary",size:20}):lt("reject","Reject"))),o.createElement(_e,{open:Et,onClose:function(){return yt(!1)},onOk:function(){it.push({pathname:"/home/campaign/pending-approvals/campaign-design",state:{status:Ge}})},hideCancel:!0,okButtonText:"Okay",withReason:!1},o.createElement("div",{className:mt.approveWrapper},o.createElement(Re.Z,null),o.createElement("h2",null,lt("campaignApprovedSuccessfully")),o.createElement("p",null,lt("campginApprovedDescripiton",{campaign:null===(Le=Ot.profileInformation)||void 0===Le?void 0:Le.name})))),o.createElement(_e,{open:ht,onClose:function(){return St(!1)},onOk:function(){return it.push({pathname:"/home/campaign/pending-approvals/campaign-design",state:{status:Ge}})},hideCancel:!0,okButtonText:"Okay",withReason:!1},o.createElement("div",{className:mt.rejectWrapper},o.createElement(Be.Z,null),o.createElement("h2",null,lt("campaignHasBeenRejected")),o.createElement("p",null,lt("campginRejectedDescripiton",{campaign:null===(ze=Ot.profileInformation)||void 0===ze?void 0:ze.name}))))))};var lt="";const ot=function(e){var t=e.workflowStatus,n=e.children,a=(0,r.useTranslation)().t,i=(0,s.Z)().showErrorMessage,l=o.useState([]),m=(0,u.Z)(l,2),c=m[0],g=m[1],f=o.useState(!1),v=(0,u.Z)(f,2),E=v[0],y=v[1],Z=o.useState(0),C=(0,u.Z)(Z,2),h=C[0],S=C[1],b=o.useState(20),N=(0,u.Z)(b,2),w=N[0],x=N[1],I=o.useState(0),T=(0,u.Z)(I,2),k=T[0],P=T[1],M=o.useState([]),A=(0,u.Z)(M,2),D=A[0],O=A[1],F=o.useState(""),V=(0,u.Z)(F,2),R=(V[0],V[1]),B=o.useState("desc"),W=(0,u.Z)(B,2),_=W[0],H=W[1],L=o.useState("campaignName"),z=(0,u.Z)(L,2),q=z[0],U=z[1],G=((0,j.useServerTable)({page:0,perPage:20,order:"asc",orderBy:"",filter:{}}),o.useCallback((function(e){var t,n,a=(null===(t=e.sortModel[0])||void 0===t?void 0:t.field)||"",i=(null===(n=e.sortModel[0])||void 0===n?void 0:n.sort)||"";U(a),H(i)}),[])),J=o.useCallback((function(e){var t=e.filterModel.items[0].value?e.filterModel.items[0].value:"",n=(e.filterModel.items[0].columnField,e.filterModel.items[0].columnField),a=e.filterModel.items[0].operatorValue,i=[];i.push({key:n,operator:a,value:t}),O(i),P(0)}),[]),Y=o.useCallback((function(e){P(e)}),[]),K=o.useCallback((function(e){x(e)}),[]),$=(o.useCallback((function(e){R(e)}),[]),(0,p.IG)(D)),Q={sort:q?"".concat(q,"_").concat(null==_?void 0:_.toLowerCase()):"",pageNumber:$===lt?k:0,pageSize:w,filter:JSON.stringify(D)};return o.useEffect((function(){y(!0),(0,d.O7)(Q,t).then((function(e){var t;0===e.resultCode?(S(null==e||null===(t=e.metadata)||void 0===t?void 0:t.totalCount),g(e.pendingApprovals),lt=$):1101===e.resultCode?(S(0),g([]),i(e.resultMessage)):i(e.resultMessage||a("anErrorOccurred"))})).catch((function(e){i(e.message||a("anErrorOccurred"))})).finally((function(){return y(!1)}))}),[t,q,_,k,w,D]),o.createElement(o.Fragment,null,n({payouts:c,loading:E,totalCount:h,workflowStatus:t,onFilterChange:J,onSort:G,setParentPage:Y,setParentPerPage:K}))};var rt,st=(0,m.Z)((function(e){return(0,c.Z)({approveWrapper:{textAlign:"center","& .MuiSvgIcon-root":{fill:"green",fontSize:"xxx-large"},"& h2":{fontSize:"22px",color:e.palette.primary.main},"& p":{width:"60%",margin:"1em auto"}},rejectWrapper:{textAlign:"center","& .MuiSvgIcon-root":{fill:"red",fontSize:"xxx-large"},"& h2":{fontSize:"22px",color:e.palette.primary.main},"& p":{width:"60%",margin:"1em auto"}}})}));null===(rt=window.config)||void 0===rt||rt.defaultPerPageItems;const mt=function(e){var t=e.payouts,n=void 0===t?[]:t,a=e.loading,i=e.totalCount,l=e.workflowStatus,m=e.onFilterChange,c=e.onSort,p=e.setParentPage,g=e.setParentPerPage,f=(0,r.useTranslation)().t,v=(0,A.useHistory)(),E=q()().checkPermission,y=st(),Z=(0,s.Z)().showErrorMessage,C=o.useState(!1),S=(0,u.Z)(C,2),N=(S[0],S[1]),x=o.useState(!1),I=(0,u.Z)(x,2),T=I[0],k=I[1],P=o.useState(!1),M=(0,u.Z)(P,2),D=M[0],F=M[1],V=o.useState(!1),R=(0,u.Z)(V,2),B=R[0],W=R[1],j=o.useState(!1),H=(0,u.Z)(j,2),L=H[0],z=H[1],G=o.useState(""),J=(0,u.Z)(G,2),Y=J[0],K=J[1],$=function(e){return e&&e.length>30&&(e=e.slice(0,30)+" ..."),e},Q=[{field:"campaignName",headerName:f("campaignName"),sortable:!0,flex:1,renderCell:function(e){return o.createElement(w.ZP,{title:e.row.campaignName},o.createElement("p",null,$(e.row.campaignName)))}},{field:"campaignDescription",headerName:f("description"),sortable:!0,flex:1,renderCell:function(e){return o.createElement(w.ZP,{title:e.row.campaignDescription},o.createElement("p",null,$(e.row.campaignDescription)))}},{field:"workflowName",headerName:f("payoutApprovalWorkflow"),sortable:!0,flex:1.4,renderCell:function(e){return o.createElement(w.ZP,{title:e.row.workflowName?e.row.workflowName:e.row.workflowUid},o.createElement("p",null,$(e.row.workflowName?e.row.workflowName:e.row.workflowUid)))}},{field:"actions",headerName:f("actions"),sortable:!1,filterable:!1,renderCell:function(e){return o.createElement("div",null,o.createElement(b.Z,{size:"small",color:"primary",variant:"text"},E(U.Z.VIEW_COMMISSION_PAYOUT)&&o.createElement(w.ZP,{title:"View"},o.createElement(h.Z,{component:A.Link,to:{pathname:"/home/campaign/pending-approvals/commission-payout/view/"+e.getValue("batchId"),state:{data:e.getValue("payoutReferenceId"),workflowStatus:l}}},o.createElement(O.Z,{fontSize:"small"}))),E(U.Z.APPROVE_COMMISSION_PAYOUT)&&"pending_adj_not_initiated"===l&&o.createElement(w.ZP,{title:"Approve"},o.createElement(h.Z,{onClick:function(){K(e.getValue("payoutReferenceId")),k(!0)}},o.createElement(Ve.Z,{fontSize:"small"}))),E(U.Z.REJECT_COMMISSION_PAYOUT)&&"pending_adj_not_initiated"===l&&o.createElement(w.ZP,{title:"Reject"},o.createElement(h.Z,{onClick:function(){K(e.getValue("payoutReferenceId")),F(!0)}},o.createElement(Fe.Z,{fontSize:"small"})))))},flex:.7}];return o.createElement(o.Fragment,null,o.createElement(_(),{pagination:!0,paginationMode:"server",filterMode:"server",sortingMode:"server",rows:n,loading:a,columns:Q,getRowId:function(e){return"".concat(e.id,"-").concat(e.payoutReferenceId)},columnBuffer:3,rowCount:i,onSortModelChange:c,onFilterModelChange:m,onPageChange:function(e){p(e.page)},onPageSizeChange:function(e){p(0),g(e.pageSize)},autoHeight:!0}),o.createElement(_e,{open:T,onClose:function(){k(!1),B&&v.push("/home/campaign/pending-approvals/commission-payout")},onOk:function(e){B?(k(!1),v.push("/home/campaign/pending-approvals/commission-payout")):(N(!0),(0,d.U_)(Y,"APPROVE",{reason:e}).then((function(e){0===e.resultCode?W(!0):Z(e.resultMessage||f("anErrorOccurred"))})).catch((function(e){Z(e.message||f("anErrorOccurred"))})).finally((function(){return N(!1)})))},hideCancel:B,okButtonText:f(B?"okay":"approve"),withReason:!B},o.createElement("div",{className:y.approveWrapper},o.createElement(Re.Z,null),o.createElement("h2",null,f(B?"payoutApprovedSuccessfully":"areYouSureYouWantToApproveThisPayout")),B&&o.createElement("p",null,f("payoutApprovedDescripiton")))),o.createElement(_e,{open:D,onClose:function(){F(!1),L&&v.push("/home/campaign/pending-approvals/commission-payout")},hideCancel:L,onOk:function(e){L?(F(!1),v.push("/home/campaign/pending-approvals/commission-payout")):(N(!0),(0,d.U_)(Y,"REJECT",{reason:e}).then((function(e){0===e.resultCode?z(!0):Z(e.resultMessage||f("anErrorOccurred"))})).catch((function(e){Z(e.message||f("anErrorOccurred"))})).finally((function(){return N(!1)})))},okButtonText:f(L?"okay":"reject"),withReason:!L},o.createElement("div",{className:y.rejectWrapper},o.createElement(Be.Z,null),o.createElement("h2",null,f(L?"payoutRejectedSuccessfully":"areYouSureYouWantToRejectThisPayout")),L&&o.createElement("p",null,f("payoutRejectedDescripiton")))))};var ct=(0,m.Z)((function(e){return(0,c.Z)({tabBtn:{marginLeft:0,textTransform:"capitalize",backgroundColor:"#FFF",color:"#46A2EB",padding:e.spacing(1.25),paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},lftBtn:{borderTopRightRadius:0,borderBottomRightRadius:0},rgtBtn:{borderTopLeftRadius:0,borderBottomLeftRadius:0},pending:{backgroundColor:"#46A2EB",color:"white"},spacingBottom:{marginBottom:e.spacing(1)}})}));const ut=function(){var e,t,n=(0,A.useLocation)(),a=o.useState(null!==(e=null===(t=n.state)||void 0===t?void 0:t.status)&&void 0!==e?e:"pending_adj_not_initiated"),i=(0,u.Z)(a,2),l=i[0],s=i[1],m=(0,r.useTranslation)().t,c=ct();return o.createElement(o.Fragment,null,o.createElement(x.Z,{container:!0,spacing:3,className:c.spacingBottom},o.createElement(x.Z,{item:!0,xs:12,sm:12},o.createElement(I.Z,{display:"flex",justifyContent:"space-between",alignItems:"center"},o.createElement("div",null,o.createElement(h.Z,{variant:"contained",className:(0,L.default)(c.tabBtn,c.lftBtn,"pending"===l&&c.pending),onClick:function(){return s("pending_adj_not_initiated")}},m("pendingApproval")),o.createElement(h.Z,{variant:"contained",className:(0,L.default)(c.tabBtn,c.rgtBtn,"processed"===l&&c.pending),onClick:function(){return s("processed")}},m("closedApproval")))))),o.createElement(ot,{workflowStatus:l},(function(e){var t=e.payouts,n=e.loading,a=e.totalCount,i=e.workflowStatus,l=e.onSort,r=e.setParentPage,s=e.setParentPerPage,m=e.onFilterChange;return o.createElement(mt,{payouts:t,loading:n,totalCount:a,workflowStatus:i,onSort:l,setParentPage:r,setParentPerPage:s,onFilterChange:m})})))},dt=function(e){var t=e.id,n=(0,s.Z)().showErrorMessage,a=(0,A.useLocation)(),i=o.useState(0),l=(0,u.Z)(i,2),r=l[0],m=l[1],c=o.useState(20),p=(0,u.Z)(c,2),g=p[0],f=p[1],v=a.state,E=v.data,y=v.workflowStatus,Z=o.useState(),C=(0,u.Z)(Z,2),h=C[0],S=C[1],b=o.useState(!1),N=(0,u.Z)(b,2),w=N[0],x=N[1],I=o.useCallback((function(){x(!0),(0,d.Tm)(t,r,1e4).then((function(e){0===e.resultCode?S(e.pendingApproval):S(void 0)})).catch((function(e){n(e)})).finally((function(){return x(!1)}))}),[]);return o.useEffect((function(){I()}),[I]),o.createElement(vt,{onSubmit:function(e){return null},payoutReferenceId:E,initialValues:h,payoutApprovalLoading:w,workflowStatus:y,onPageChange:function(e){m(e)},onPageSizeChange:function(e){f(e)},page:r,perPage:g})};function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(n),!0).forEach((function(t){(0,Z.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ft=(0,m.Z)((function(e){return(0,c.Z)({elements:{marginRight:e.spacing(1)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},wFull:{width:"100%"},spacingTop:{marginTop:e.spacing(3)},spacingBottom:{marginBottom:e.spacing(1)},skeleton:{height:20},percentTop:{top:"25%"},responsiveImage:{maxWidth:200,width:"100%"},fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{textTransform:"capitalize",fontSize:14,wordBreak:"break-all"},rowSpacing:{marginBottom:e.spacing(.5),marginTop:e.spacing(.5)},autocomplete:{"& .MuiChip-deleteIcon":{display:"none"},"& .MuiAutocomplete-popupIndicator":{display:"none"}},flexSpaceBetween:{display:"flex",justifyContent:"space-between"},dividerSpacing:{marginBottom:"6px",height:"2px",backgroundColor:"#d3d3d3"},kpiEvents:{marginBottom:e.spacing(2),paddingLeft:"10px",paddingRight:"10px",border:"1px solid #e0e0e0",borderRadius:"8px"},approveWrapper:{textAlign:"center","& .MuiSvgIcon-root":{fill:"green",fontSize:"xxx-large"},"& h2":{fontSize:"22px",color:e.palette.primary.main},"& p":{width:"60%",margin:"1em auto"}},rejectWrapper:{textAlign:"center","& .MuiSvgIcon-root":{fill:"red",fontSize:"xxx-large"},"& h2":{fontSize:"22px",color:e.palette.primary.main},"& p":{width:"60%",margin:"1em auto"}},completedMessage:{padding:"10px 20px",backgroundColor:"#BEDEF8",borderRadius:"8px"},inputMultiline:{height:"100%","& .MuiInputBase-root":{height:"100%",minHeight:"40px",display:"flex",alignItems:"start"}}})}));const vt=function(e){var t,n,i,l,m,c,p,g,f,v,E,y,Z,C,h,S,b,I,T,k,P,M,D,O,F,V,R,B=e.initialValues,W=e.payoutApprovalLoading,j=e.payoutReferenceId,z=e.workflowStatus,G=e.onSubmit,J=e.page,Y=e.perPage,K=e.onPageChange,$=e.onPageSizeChange,Q=(0,A.useHistory)(),X=(0,r.useTranslation)().t,ee=q()().checkPermission,te=ft(),ne=(0,s.Z)().showErrorMessage,ae=o.useState(!1),ie=(0,u.Z)(ae,2),le=ie[0],oe=ie[1],re=o.useState(!1),se=(0,u.Z)(re,2),me=se[0],ce=se[1],ue=o.useState(!1),de=(0,u.Z)(ue,2),pe=de[0],ge=de[1],fe=o.useState(!1),ve=(0,u.Z)(fe,2),Ee=ve[0],ye=ve[1],Ze=o.useState(""),Ce=(0,u.Z)(Ze,2),he=Ce[0],Se=Ce[1],be=Qe.Ry().shape({reason:Qe.Z_().required(X("reasonRequired"))}),Ne=(0,Xe.TA)({initialValues:B,onSubmit:G,validationSchema:be}),we=Ne.values,xe=Ne.handleChange,Ie=Ne.setValues;if(o.useEffect((function(){B&&(B.reason="",Ie(B))}),[B]),W||!we)return o.createElement(Ye.Z,{className:te.backdrop,open:W||!we},o.createElement(Ke.Z,{color:"inherit"}));var Te=function(e){we.reason?(oe(!0),(0,d.U_)(j,e,{reason:we.reason}).then((function(t){0===t.resultCode?"APPROVE"===e?(Se("approved"),ce(!0)):(Se("rejected"),ge(!0)):ne(t.resultMessage||X("anErrorOccurred"))})).catch((function(e){ne(e.message||X("anErrorOccurred"))})).finally((function(){oe(!1),ye(!0)}))):ne(X("reasonRequired"))},ke=[{field:"resellerId",headerName:X("resellerId"),sortable:!0,flex:1,renderCell:function(e){return o.createElement(w.ZP,{title:e.row.resellerId},o.createElement("p",null,e.row.resellerId))}},{field:"resellerName",headerName:X("resellerName"),sortable:!0,flex:1,renderCell:function(e){return o.createElement(w.ZP,{title:e.row.resellerName},o.createElement("p",null,e.row.resellerName))}},{field:"commissionEligibility",headerName:X("commissionEligibility"),sortable:!0,flex:1,renderCell:function(e){return o.createElement(o.Fragment,null,!0===e.row.commissionEligibility&&o.createElement("p",null,X("yes")),!1===e.row.commissionEligibility&&o.createElement("p",null,X("no")))}},{field:"commissionCalculated",headerName:X("commissionCalculated"),sortable:!0,flex:1,renderCell:function(e){return o.createElement(o.Fragment,null,!0===e.row.commissionCalculated&&o.createElement("p",null,X("yes")),!1===e.row.commissionCalculated&&o.createElement("p",null,X("no")))}},{field:"commissionAmount",headerName:X("commissionAmount"),sortable:!0,flex:1},{field:"adjustment",headerName:X("adjustment"),sortable:!0,flex:1,renderCell:function(e){return o.createElement("p",null,e.row.adjustment?e.row.adjustment:"-")}},{field:"adjustedAmount",headerName:X("adjustedAmount"),sortable:!0,flex:1,renderCell:function(e){return o.createElement("p",null,e.row.adjustedAmount?e.row.adjustedAmount:"-")}},{field:"gstAmount",headerName:X("gstAmount"),sortable:!0,flex:1},{field:"gstWHAmount",headerName:X("gst_Wh_amount"),sortable:!0,flex:1},{field:"incomeTaxWHAmount",headerName:X("incometaxTaxWH"),sortable:!0,flex:1},{field:"grossCommissionAmount",headerName:X("grossCom"),sortable:!0,flex:1}];return o.createElement(o.Fragment,null,o.createElement(x.Z,{container:!0,spacing:3},o.createElement(x.Z,{item:!0,xs:12,className:te.flexSpaceBetween},o.createElement(N.Z,{variant:"h5",color:"primary"},X("profileInformation","Profile Information")),Ee&&o.createElement("div",{className:te.completedMessage},X("payoutMessage",{status:he||"approved/rejected"}))),o.createElement(x.Z,{item:!0,xs:12,sm:12},o.createElement(x.Z,{container:!0,className:te.rowSpacing,spacing:3},o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(t=null===(n=we.campaign)||void 0===n?void 0:n.campaignName)&&void 0!==t?t:X("emptyValueMark"),name:"campaignName",className:te.wFull,label:X("campaignName")})),o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(w.ZP,{title:null!==(i=null===(l=we.campaign)||void 0===l?void 0:l.campaignUid)&&void 0!==i?i:void 0},o.createElement(H.SeamlessInput,{value:null!==(m=null===(c=we.campaign)||void 0===c?void 0:c.campaignUid)&&void 0!==m?m:X("emptyValueMark"),name:"campaignUid",className:te.wFull,label:X("campaignID")})))),o.createElement(x.Z,{container:!0,className:te.rowSpacing,spacing:3},o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(p=null===(g=we.campaign)||void 0===g?void 0:g.campaignDescription)&&void 0!==p?p:X("emptyValueMark"),name:"description",multiline:!0,className:(0,L.default)(te.wFull,te.inputMultiline),label:X("description")})),o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(f=null===(v=we.campaign)||void 0===v?void 0:v.campaignType)&&void 0!==f?f:X("emptyValueMark"),name:"weightageBasedCampaign",className:te.wFull,label:X("weightageBasedCampaign")}))),o.createElement(x.Z,{container:!0,className:te.rowSpacing,spacing:3},o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(E=null===(y=we.campaign)||void 0===y?void 0:y.startDate)&&void 0!==E?E:X("emptyValueMark"),name:"startDate",className:te.wFull,label:X("startDate")})),o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(Z=null===(C=we.campaign)||void 0===C?void 0:C.endDate)&&void 0!==Z?Z:X("emptyValueMark"),name:"endDate",className:te.wFull,label:X("endDate")}))),o.createElement(x.Z,{container:!0,className:te.rowSpacing,spacing:3},o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(h=null===(S=we.campaign)||void 0===S?void 0:S.payoutWorkflowName)&&void 0!==h?h:X("emptyValueMark"),name:"campaignDesignApprovalWorkflow",className:te.wFull,label:X("campaignDesignApprovalWorkflow")})),o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(b=null===(I=we.campaign)||void 0===I?void 0:I.eventChannel)&&void 0!==b?b:X("emptyValueMark"),name:"eventsChannel",className:te.wFull,label:X("eventsChannel")})))),o.createElement(x.Z,{item:!0,xs:12},o.createElement(N.Z,{variant:"h5",color:"primary"},X("paymentmode","Payment Mode"))),o.createElement(x.Z,{item:!0,xs:12,sm:12},o.createElement(x.Z,{container:!0,className:te.rowSpacing,spacing:3},o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(T=null===(k=we.paymentMode)||void 0===k?void 0:k.paymentMode)&&void 0!==T?T:X("emptyValueMark"),name:"paymentmode",className:te.wFull,label:X("paymentmode")})),o.createElement(x.Z,{item:!0,xs:12,sm:3},null!==(P=we.paymentMode)&&void 0!==P&&P.costCenterList.length?o.createElement(et.ZP,{multiple:!0,className:te.autocomplete,defaultValue:null===(M=we.paymentMode)||void 0===M?void 0:M.costCenterList,options:null===(D=we.paymentMode)||void 0===D?void 0:D.costCenterList,getOptionLabel:function(e){return e.costCenter},disableClearable:!0,open:!1,renderInput:function(e){return o.createElement(Je.Z,(0,a.Z)({},e,{variant:"standard",InputProps:gt(gt({},e.InputProps),{},{readOnly:!0}),label:X("costCenter")}))}}):o.createElement(H.SeamlessInput,{value:X("emptyValueMark"),name:"costCenter",className:te.wFull,label:X("costCenter")}))),o.createElement(x.Z,{container:!0,className:te.rowSpacing,spacing:3},o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(O=null===(F=we.paymentMode)||void 0===F?void 0:F.commissionAmount)&&void 0!==O?O:X("emptyValueMark"),className:te.wFull,name:"overallCommissionAmount",label:X("overallCommissionAmount")})),o.createElement(x.Z,{item:!0,xs:12,sm:3},o.createElement(H.SeamlessInput,{value:null!==(V=null===(R=we.paymentMode)||void 0===R?void 0:R.qualifiedRetailers)&&void 0!==V?V:X("emptyValueMark"),className:te.wFull,name:"qualifiedRetailers",label:X("qualifiedRetailers")})))),o.createElement(x.Z,{item:!0,xs:12},o.createElement(N.Z,{variant:"h5",color:"primary"},X("CommissionCalculation","Commission Calculation"))),o.createElement(x.Z,{item:!0,xs:12,sm:12},o.createElement(x.Z,{container:!0,className:te.rowSpacing,spacing:3},o.createElement(x.Z,{item:!0,xs:12},o.createElement("div",{style:{height:"350px",width:"100%"}},o.createElement(_(),{pagination:!0,rows:we.commissionCalculationList,loading:le,columns:ke,columnBuffer:3,getRowId:function(e){return e.transactionId},rowCount:we.commissionCalculationList.length,onPageChange:function(e){K(e.page)},onPageSizeChange:function(e){K(0),$(e.pageSize)},page:J,pageSize:Y})))),!Ee&&"pending_adj_not_initiated"===z&&o.createElement(x.Z,{container:!0,className:te.spacingTop,spacing:3},o.createElement(x.Z,{item:!0,xs:12,sm:6},o.createElement(H.SeamlessInput,{value:we.reason,name:"reason",fullWidth:!0,multiline:!0,required:!0,rows:5,onChange:xe,rowsMax:5,label:X("reasonText")})))),Ee||"processed"===z?o.createElement(x.Z,{item:!0,xs:12},o.createElement(H.SeamlessButton,{id:"seamless-payout-form-button-cancel",onClick:function(){return Q.push({pathname:"/home/campaign/pending-approvals/commission-payout",state:{status:z}})},className:te.elements,variant:"contained",color:"secondary"},X("back","Back"))):o.createElement(x.Z,{item:!0,xs:12},ee(U.Z.APPROVE_COMMISSION_PAYOUT)&&o.createElement(H.SeamlessButton,{id:"seamless-payout-form-button-approve",onClick:function(){return Te("APPROVE")},className:te.elements,variant:"contained",color:"secondary"},le?o.createElement(Ke.Z,{color:"inherit",size:20}):X("approve","Approve")),ee(U.Z.REJECT_COMMISSION_PAYOUT)&&o.createElement(H.SeamlessButton,{id:"seamless-payout-form-button-reject",onClick:function(){return Te("REJECT")},className:te.elements,variant:"outlined",color:"secondary"},le?o.createElement(Ke.Z,{color:"primary",size:20}):X("reject","Reject"))),o.createElement(_e,{open:me,onClose:function(){return ce(!1)},onOk:function(){return Q.push({pathname:"/home/campaign/pending-approvals/commission-payout",state:{status:z}})},hideCancel:!0,okButtonText:X("okay"),withReason:!1},o.createElement("div",{className:te.approveWrapper},o.createElement(Re.Z,null),o.createElement("h2",null,X("payoutApprovedSuccessfully")),o.createElement("p",null,X("payoutApprovedDescripiton")))),o.createElement(_e,{open:pe,onClose:function(){return ge(!1)},onOk:function(){return Q.push({pathname:"/home/campaign/pending-approvals/commission-payout",state:{status:z}})},hideCancel:!0,okButtonText:X("okay"),withReason:!1},o.createElement("div",{className:te.rejectWrapper},o.createElement(Be.Z,null),o.createElement("h2",null,X("payoutRejectedSuccessfully")),o.createElement("p",null,X("payoutRejectedDescripiton"))))))}},34579:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var a=n(74315),i=n(2411),l=n.n(i),o=n(38670);const r=function(e){var t=l().useState(null),n=(0,a.Z)(t,2),i=n[0],r=n[1],s=(0,o.useSelector)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.rbac}),o.shallowEqual);return l().useEffect((function(){var t,n=(null===(t=s.features.find((function(t){return t.module===e})))||void 0===t?void 0:t.features)||[];r(n)}),[s]),i}},56760:(e,t,n)=>{"use strict";n.d(t,{Z:()=>W});var a=n(2411),i=n(48049),l=n(27490),o=n(44104),r=n.n(o),s=n(37603),m=n(74315),c=n(41744),u=n.n(c),d=n(57023),p=n(29609),g=n(23664),f=n(91955),v="";const E=function(e){var t=e.children,n=(0,p.useTranslation)().t,i=(0,g.Z)().showErrorMessage,l=a.useState([]),o=(0,m.Z)(l,2),r=o[0],s=o[1],u=a.useState(!1),E=(0,m.Z)(u,2),y=E[0],Z=E[1],C=a.useState(0),h=(0,m.Z)(C,2),S=h[0],b=h[1],N=a.useState(20),w=(0,m.Z)(N,2),x=w[0],I=w[1],T=a.useState(0),k=(0,m.Z)(T,2),P=k[0],M=k[1],A=a.useState([]),D=(0,m.Z)(A,2),O=D[0],F=D[1],V=a.useState(""),R=(0,m.Z)(V,2),B=(R[0],R[1]),W=a.useState("desc"),j=(0,m.Z)(W,2),_=j[0],H=j[1],L=a.useState("campaignName"),z=(0,m.Z)(L,2),q=z[0],U=z[1],G=((0,c.useServerTable)({page:0,perPage:20,order:"asc",orderBy:"",filter:{}}),a.useCallback((function(e){var t,n,a=(null===(t=e.sortModel[0])||void 0===t?void 0:t.field)||"",i=(null===(n=e.sortModel[0])||void 0===n?void 0:n.sort)||"";U(a),H(i)}),[])),J=a.useCallback((function(e){var t=e.filterModel.items[0].value?e.filterModel.items[0].value:"",n=(e.filterModel.items[0].columnField,e.filterModel.items[0].columnField),a=e.filterModel.items[0].operatorValue,i=[];i.push({key:n,operator:a,value:t}),F(i),M(0)}),[]),Y=a.useCallback((function(e){M(e)}),[]),K=a.useCallback((function(e){I(e)}),[]),$=(a.useCallback((function(e){B(e)}),[]),(0,f.IG)(O)),Q={sort:q?"".concat(q,"_").concat(null==_?void 0:_.toLowerCase()):"",pageNumber:$===v?P:0,pageSize:x,filter:JSON.stringify(O)};return a.useEffect((function(){Z(!0),(0,d.O7)(Q).then((function(e){var t;0===e.resultCode?(b(null==e||null===(t=e.metadata)||void 0===t?void 0:t.totalCount),s(e.pendingApprovals),v=$):i(e.resultMessage||n("anErrorOccurred"))})).catch((function(e){i(e.message||n("anErrorOccurred"))})).finally((function(){return Z(!1)}))}),[q,_,P,x,O]),a.createElement(a.Fragment,null,t({payouts:r,loading:y,totalCount:S,onFilterChange:J,onSort:G,setParentPage:Y,setParentPerPage:K}))};var y,Z=n(77277),C=n(38592),h=n(80030),S=n(60552),b=n(64874),N=n(79692),w=n(12420),x=((0,N.Z)((function(e){return(0,w.Z)({approveWrapper:{textAlign:"center","& .MuiSvgIcon-root":{fill:"green",fontSize:"xxx-large"},"& h2":{fontSize:"22px",color:e.palette.primary.main},"& p":{width:"60%",margin:"1em auto"}},rejectWrapper:{textAlign:"center","& .MuiSvgIcon-root":{fill:"red",fontSize:"xxx-large"},"& h2":{fontSize:"22px",color:e.palette.primary.main},"& p":{width:"60%",margin:"1em auto"}}})})),function(e){return e&&e.length>30&&(e=e.slice(0,30)+" ..."),e});null===(y=window.config)||void 0===y||y.defaultPerPageItems;const I=function(e){var t=e.payouts,n=void 0===t?[]:t,o=e.loading,s=e.totalCount,m=e.onFilterChange,c=e.onSort,d=e.setParentPage,g=e.setParentPerPage,f=(0,p.useTranslation)().t,v=r()().checkPermission,E=[{field:"campaignName",headerName:f("campaignName"),sortable:!0,flex:1,renderCell:function(e){return a.createElement(h.ZP,{title:e.row.campaignName},a.createElement("p",null,x(e.row.campaignName)))}},{field:"campaignDescription",headerName:f("description"),sortable:!0,flex:1,renderCell:function(e){return a.createElement(h.ZP,{title:e.row.campaignDescription},a.createElement("p",null,x(e.row.campaignDescription)))}},{field:"workflowName",headerName:f("payoutApprovalWorkflow"),sortable:!0,flex:1.4,renderCell:function(e){return a.createElement(h.ZP,{title:e.row.workflowUid},a.createElement("p",null,x(e.row.workflowUid)))}},{field:"payoutStatus",headerName:f("payoutStatus"),sortable:!0,flex:1.4,renderCell:function(e){return a.createElement(h.ZP,{title:e.row.payoutStatus},a.createElement("p",null,x(e.row.payoutStatus)))}},{field:"adjustmentStatus",headerName:f("adjustmentStatus"),sortable:!0,flex:1.4,renderCell:function(e){return a.createElement(h.ZP,{title:e.row.adjustmentStatus},a.createElement("p",null,x(e.row.adjustmentStatus)))}},{field:"actions",headerName:f("actions"),sortable:!1,filterable:!1,renderCell:function(e){return a.createElement("div",null,a.createElement(C.Z,{size:"small",color:"primary",variant:"text"},v(l.Z.VIEW_COMMISSION_ADJUSTMENT)&&a.createElement(h.ZP,{title:"View"},a.createElement(Z.Z,{component:i.Link,to:"/home/campaign/adjustment/commission/view/"+e.getValue("batchId")},a.createElement(S.Z,{fontSize:"small"}))),v(l.Z.EDIT_COMMISSION_ADJUSTMENT)&&a.createElement(h.ZP,{title:"EDIT"},a.createElement(Z.Z,{component:i.Link,to:"/home/campaign/adjustment/commission/edit/".concat(e.getValue("batchId"),"?status=").concat(e.row.payoutStatus),disabled:!e.getValue("latest")||"ADJUSTMENT_INITIATED"===e.getValue("adjustmentStatus")},a.createElement(b.Z,{fontSize:"small"})))))},flex:.7}];return a.createElement(a.Fragment,null,a.createElement(u(),{pagination:!0,paginationMode:"server",filterMode:"server",sortingMode:"server",rows:n,loading:o,columns:E,getRowId:function(e){return e.id},columnBuffer:3,rowCount:s,onSortModelChange:c,onFilterModelChange:m,onPageChange:function(e){d(e.page)},onPageSizeChange:function(e){d(0),g(e.pageSize)},autoHeight:!0}))},T=function(){var e=(0,p.useTranslation)().t;return a.createElement(s.SeamlessContainer,{title:e("commissionAdjustmentPageTitle"),description:e("commissionAdjustmentDescription")},a.createElement(E,null,(function(e){var t=e.payouts,n=e.loading,i=e.totalCount,l=e.onSort,o=e.setParentPage,r=e.setParentPerPage,s=e.onFilterChange;return a.createElement(I,{payouts:t,loading:n,totalCount:i,onSort:l,setParentPage:o,setParentPerPage:r,onFilterChange:s})})))};var k,P=n(11746),M=n(13542),A="",D=null===(k=window)||void 0===k?void 0:k.config;const O=function(e){e.approval;var t=(null==D?void 0:D.defaultPerPageItems)||20,n=a.useState(!1),l=(0,m.Z)(n,2),o=l[0],r=l[1],c=(0,g.Z)().showErrorMessage,u=(0,i.useParams)().id,v=(0,p.useTranslation)().t,E=a.useState({}),y=(0,m.Z)(E,2),Z=y[0],C=y[1],h=a.useState([]),S=(0,m.Z)(h,2),b=S[0],N=S[1],w=a.useState(0),x=(0,m.Z)(w,2),I=x[0],T=x[1],k=a.useState(t),O=(0,m.Z)(k,2),F=O[0],V=O[1],R=a.useState(0),B=(0,m.Z)(R,2),W=B[0],j=B[1],_=a.useState([]),H=(0,m.Z)(_,2),L=H[0],z=H[1],q=a.useState("desc"),U=(0,m.Z)(q,2),G=U[0],J=U[1],Y=a.useState("id"),K=(0,m.Z)(Y,2),$=K[0],Q=K[1],X=a.useCallback((function(e){var t=e.sortModel[0].field,n=e.sortModel[0].sort;Q(t),J(n)}),[]);a.useEffect((function(){j(0)}),[L]);var ee=a.useCallback((function(e){var t=e.filterModel.items[0].value?e.filterModel.items[0].value:"",n=e.filterModel.items[0].columnField,a=e.filterModel.items[0].operatorValue,i=[];i.push({key:n,operator:a,value:t}),z([].concat((0,P.Z)(L),i)),j(0)}),[]),te=a.useCallback((function(e){j(e)}),[]),ne=a.useCallback((function(e){V(e)}),[]),ae=(0,f.IG)(L),ie={sort:$?"".concat($,"_").concat(null==G?void 0:G.toLowerCase()):"",pageNumber:ae===A?W:0,pageSize:F,filter:JSON.stringify(L)};return a.useEffect((function(){r(!0),(0,d.Qr)(u,ie).then((function(e){var t,n;0===e.resultCode?(C(e.pendingApproval),N(null==e||null===(t=e.pendingApproval)||void 0===t?void 0:t.commissionCalculationList),A=ae,T(null==e||null===(n=e.metadata)||void 0===n?void 0:n.totalCount)):c(e.resultMessage)})).catch((function(e){c(e)})).finally((function(){return r(!1)}))}),[$,G,W,F,L]),a.createElement(s.SeamlessContainer,{title:v("commissionAdjustmentPageTitle"),description:v("commissionAdjustmentDescription")},a.createElement(M.SV,{loading:o,data:Z,isEdit:!1,campaignTransaction:b,onFilterChange:ee,onSort:X,totalCount:I,setParentPage:te,setParentPerPage:ne,page:W,perPage:F}))};var F,V="",R=null===(F=window)||void 0===F?void 0:F.config;const B=function(e){e.approval;var t=(null==R?void 0:R.defaultPerPageItems)||20,n=a.useState(!1),l=(0,m.Z)(n,2),o=l[0],r=l[1],c=(0,g.Z)().showErrorMessage,u=(0,i.useParams)().id,v=(0,p.useTranslation)().t,E=a.useState({}),y=(0,m.Z)(E,2),Z=y[0],C=y[1],h=a.useState([]),S=(0,m.Z)(h,2),b=S[0],N=S[1],w=a.useState(0),x=(0,m.Z)(w,2),I=x[0],T=x[1],k=a.useState(t),A=(0,m.Z)(k,2),D=A[0],O=A[1],F=a.useState(0),B=(0,m.Z)(F,2),W=B[0],j=B[1],_=a.useState([]),H=(0,m.Z)(_,2),L=H[0],z=H[1],q=a.useState("desc"),U=(0,m.Z)(q,2),G=U[0],J=U[1],Y=a.useState("id"),K=(0,m.Z)(Y,2),$=K[0],Q=K[1],X=a.useCallback((function(e){var t=e.sortModel[0].field,n=e.sortModel[0].sort;Q(t),J(n)}),[]);a.useEffect((function(){j(0)}),[L]);var ee=a.useCallback((function(e){var t=e.filterModel.items[0].value?e.filterModel.items[0].value:"",n=e.filterModel.items[0].columnField,a=e.filterModel.items[0].operatorValue,i=[];i.push({key:n,operator:a,value:t}),z([].concat((0,P.Z)(L),i)),j(0)}),[]),te=a.useCallback((function(e){j(e)}),[]),ne=a.useCallback((function(e){O(e)}),[]),ae=(0,f.IG)(L),ie={sort:$?"".concat($,"_").concat(null==G?void 0:G.toLowerCase()):"",pageNumber:ae===V?W:0,pageSize:D,filter:JSON.stringify(L)};return a.useEffect((function(){r(!0),(0,d.Qr)(u,ie).then((function(e){var t,n;0===e.resultCode?(C(e.pendingApproval),N(null==e||null===(t=e.pendingApproval)||void 0===t?void 0:t.commissionCalculationList),V=ae,T(null==e||null===(n=e.metadata)||void 0===n?void 0:n.totalCount)):c(e.resultMessage)})).catch((function(e){c(e)})).finally((function(){return r(!1)}))}),[$,G,W,D,L]),a.createElement(s.SeamlessContainer,{title:v("commissionAdjustmentPageTitle"),description:v("commissionAdjustmentDescription")},a.createElement(M.SV,{loading:o,data:Z,isEdit:!0,campaignTransaction:b,onFilterChange:ee,onSort:X,totalCount:I,setParentPage:te,setParentPerPage:ne,page:W,perPage:D}))},W=function(){var e=(0,i.useRouteMatch)().path,t=r()().AccessControlled;return a.createElement(i.Switch,null,a.createElement(i.Route,{path:"".concat(e,"/view/:id")},a.createElement(t,{feature:l.Z.VIEW_COMMISSION_ADJUSTMENT},a.createElement(O,null))),a.createElement(i.Route,{path:"".concat(e,"/edit/:id")},a.createElement(t,{feature:l.Z.EDIT_COMMISSION_ADJUSTMENT},a.createElement(B,null))),a.createElement(i.Route,{path:"".concat(e)},a.createElement(t,{feature:l.Z.COMMISSION_ADJUSTMENT_LIST},a.createElement(T,null))),a.createElement(i.Route,{path:e},a.createElement(i.Redirect,{to:e})))}},7643:(e,t,n)=>{"use strict";n.d(t,{Ir:()=>s,sA:()=>te,Fy:()=>Ee,Mo:()=>Ne,vu:()=>ie});var a=n(2411),i=n(29609),l=n(13542),o=n(37603),r=n(33553);const s=function(){var e=(0,i.useTranslation)().t;return a.createElement(o.SeamlessContainer,{title:e("campaignPageTitle"),description:e("campaignPageDescription")},a.createElement(r.Z,null,a.createElement("div",{style:{height:600,width:"100%"}},a.createElement(l.Ir,null))))};var m=n(7560),c=n(11746),u=n(51119),d=n(74315),p=n(56470),g=n(77162),f=n.n(g),v=n(67358),E=n(90436),y=n(48049),Z=n(29089),C=n(33615),h=n.n(C),S=n(84496),b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DMS";return(0,S.Z)("/template/v1/component/".concat(t,"/type/").concat(e))},N=n(57023),w=n(61749),x=n.n(w),I=n(13448),T=n.n(I),k=n(33995),P=n.n(k),M=n(64591),A=n.n(M),D=n(19952),O=n.n(D),F=n(91955),V=n(44104),R=n.n(V),B=n(27490),W=n(78205),j=n.n(W);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t){var n={};for(var a in e)t.includes(a)&&(n[a]=e[a]);return n}var z,q=null,U={},G={},J={},Y=!1,K={},$=!1,Q={},X=!1,ee=function(){var e=(0,p.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){return Promise.resolve()}),800);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();const te=function(){var e,t=(0,y.useHistory)(),n=(0,i.useTranslation)().t,l=R()().checkPermission,o=j()().moment,r=new URLSearchParams(window.location.search),s=(0,Z.Z)(),u=s.showErrorMessage,g=s.showSuccessMessage,C=s.showInfoMessage,S=a.useState({}),w=(0,d.Z)(S,2),I=w[0],k=w[1],M=a.useState(!1),D=(0,d.Z)(M,2),V=D[0],W=D[1],_=a.useState({state:!1,title:"",desc:""}),te=(0,d.Z)(_,2),ne=te[0],ae=te[1],ie=a.useState(!0),le=(0,d.Z)(ie,2),oe=le[0],re=le[1],se=a.useState(),me=(0,d.Z)(se,2),ce=me[0],ue=me[1],de=a.useState(),pe=(0,d.Z)(de,2),ge=pe[0],fe=pe[1],ve=a.useState(""),Ee=(0,d.Z)(ve,2),ye=Ee[0],Ze=Ee[1],Ce=a.useState(""),he=(0,d.Z)(Ce,2),Se=he[0],be=he[1],Ne=a.useState(""),we=(0,d.Z)(Ne,2),xe=we[0],Ie=we[1],Te=a.useState({}),ke=(0,d.Z)(Te,2),Pe=ke[0],Me=ke[1];a.useEffect((function(){z=null,U={},K={},J={},G={},$=!1,X=!1,Q={}}),[]),a.useEffect((function(){re(!0);var e=r.get("cloneId");e&&(0,N.tP)(e).then((function(e){0===e.resultCode?Me(e.campaign):u(e.resultMessage)})).catch((function(e){u(e)})).finally((function(){return re(!1)}))}),[]),a.useEffect((function(){var e;r.get("cloneId")&&(null===(e=Object.keys(Pe))||void 0===e?void 0:e.length)>0&&($=!0,G.BusinessRule=(0,F.GD)(Pe,J,ce,!0),G.CommissionFormula=(0,F.DP)(Pe,!0),G.NotificationManager=(0,F.O9)(Pe),G.data=(0,F.Rz)(Pe,J,o,!0),G.data.name="",U=Pe)}),[Pe,J,null==ce?void 0:ce.values]);var Ae=a.useCallback((function(e,t){if(e){re(!0);var a=new URLSearchParams(window.location.search);"campaign"===e&&a.get("campId")&&(e=a.get("campId")),b(e,"SCC").then((function(a){0===a.resultCode?(function(e){var t;if(J=e,(null===(t=e.sections)||void 0===t?void 0:t.length)>0){var n={};e.sections.forEach((function(e){e.customWidget&&(n[e.customWidget]=e)})),k(n)}}(a.value),t&&t(null,a)):q?t&&t(null,q):(C(n("noTemplateFound","No template found against ".concat(e,". Please wait, System is loading default template"))),b("CAMPAIGN","CMS").then((function(e){0===e.resultCode?(t&&t(null,e),q=e):(t&&t(e),q=null,C(n("defaultTemplateNotFound","Sorry, We even can't find default template in system.")))})))})).catch((function(e){return u(e)})).finally((function(){return re(!1)}))}}),[]);function De(e,t,n){re(!0),(0,N.Pg)(e,n).then((function(e){return function(e,t){if(0===e.resultCode){var n,a,i,l=z&&null!==(n=z)&&void 0!==n&&n.title?"".concat(null===(a=z)||void 0===a?void 0:a.title," saved successfully"):e.resultMessage;if(g(l),null!==(i=z)&&void 0!==i&&i.id){if(U[z.id]=e,"4"==z.id){var o=(0,F.GD)(e,J,ce);G.BusinessRule=o}else"6"==z.id&&(G.NotificationManager=(0,F.O9)(e));e.activeTab=z.id}t&&t(null,e),re(!1)}else{var r;u(e),(null===(r=z)||void 0===r?void 0:r.id)&&(e.activeTab=z.id),t&&t(e),re(!1)}}(e,t)})).catch((function(e){var n;(null===(n=z)||void 0===n?void 0:n.id)&&(e.activeTab=z.id),u(e),re(!1),t&&t(e)}))}function Oe(e){var t={};e.forEach((function(e){var n;null!=e&&e.weightage&&(t["".concat(null==e||null===(n=e.kpi)||void 0===n?void 0:n.name)]=Number(null==e?void 0:e.weightage))}));var n=0;return Object.keys(t).forEach((function(e){n+=t[e]})),n}var Fe=a.useCallback(function(){var e=(0,p.Z)(f().mark((function e(t,a){var i,l,o,r,s,m,d,p,g,v,E,y,Z,C,h,S,b,N,w,x,I,T,k,P,M,A,D,O,V,R,B,j,_,q,J,te,ne,ie,le,oe,re,se,me,ce,ue,de,pe,ge,ve,Ee,ye,Ce,he,Se,Ne,we,xe,Te,ke;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(z=JSON.parse(null!==(i=localStorage.getItem("activeTab"))&&void 0!==i?i:""),null!==(l=z)&&void 0!==l&&l.id){e.next=3;break}return e.abrupt("return",u(n("anErrorOccurred")));case 3:if(Y=!(null==t||!t.FinalSubmit),v=z.widgets.map((function(e){return e.id})),null===(o=z)||void 0===o||!o.customWidget){e.next=11;break}return e.next=8,ee();case 8:E=G[z.customWidget],e.next=12;break;case 11:E=L(t,v);case 12:Z=(Array.isArray(t.regions)?t.regions:null===(r=t.regions)||void 0===r?void 0:r.split(","))||[],C=Z.length>0?Z.map((function(e){return{regionId:e}})):[],h=(Array.isArray(E.retailerTypes)?E.retailerTypes:null===(s=E.retailerTypes)||void 0===s?void 0:s.split(","))||[],S=t.costCenter.split(",").map((function(e){return{costCenter:{costCenterId:e}}})),Ze(null==t?void 0:t.name),"2"===z.id&&be(U[1].uid),e.t0=z.id,e.next="1"===e.t0?21:"2"===e.t0?29:"3"===e.t0?38:"4"===e.t0?56:"5"===e.t0?66:"6"===e.t0?79:83;break;case 21:if(y=H({profileInformation:H({name:t.name,description:t.description,campaignType:{typeId:t.campaignType},startDate:""!==t.startDate?t.startDate:"",endDate:""!==t.endDate?t.endDate:"",eventChannels:t.eventChannels,designWorkflowId:t.designWorkflowId,designWorkflowName:t.designWorkflowName,commissionType:t.commissionCalculationType,slabRangeType:null==t?void 0:t.slabRangeType,slabCommissionType:null==t?void 0:t.slabCommissionType},"PER_ACHIEVEMENT"===t.slabCommissionType&&{isSequential:"sequential"===(null==t?void 0:t.slabType)})},(null===(m=U)||void 0===m||null===(d=m[1])||void 0===d?void 0:d.uid)&&{uid:U[1].uid}),!$||Q.dateFlag||null==Pe||!Pe.profileInformation){e.next=28;break}if(b=Pe.profileInformation,N=b.startDate,w=b.endDate,N!==t.startDate||w!==t.endDate){e.next=28;break}return Q.dateFlag="OK",ae({state:!0,title:n("confirmStartEndDateWarnTitle"),desc:n("confirmStartEndDateWarnDesc",{startDate:N,endDate:w})}),e.abrupt("return",a&&a({activeTab:z.id,resultDescription:n("confirmStartEndDateWarnDesc",{startDate:N,endDate:w}),resultCode:400}));case 28:return e.abrupt("break",113);case 29:if(y={uid:U[1].uid,targetAudience:{campaignExtraParam:{targetAudienceDataSource:null==t?void 0:t.targetAudienceDataSource,audienceType:t.audienceType,targetAudienceComment:t.targetAudienceComment},regions:C,retailerTypes:h,excludedRetailers:(null===(p=t.exludedRetailers)||void 0===p?void 0:p.filter((function(e){return!!e})))||[],retailerInclusions:(null===(g=t.includedRetailers)||void 0===g?void 0:g.filter((function(e){return!!e})))||[]}},"1"!==t.campaignType||"FILE"!==t.targetAudienceDataSource){e.next=37;break}if(X=!0,y={uid:U[1].uid,targetAudience:{campaignExtraParam:{targetAudienceDataSource:t.targetAudienceDataSource,audienceType:t.audienceType}}},!$||Q.targetAudienceFlag){e.next=37;break}return Q.targetAudienceFlag="OK",ae({state:!0,title:n("targetAudienceFileUploadWarnTitle"),desc:n("targetAudienceFileUploadWarnDesc")}),e.abrupt("return",a&&a({activeTab:z.id,resultDescription:n("targetAudienceFileUploadWarnDesc"),resultCode:400}));case 37:return e.abrupt("break",113);case 38:if(x=t.costCenter.split(",").map((function(e){return{costCenter:{costCenterId:e}}})),"2"!==t.campaignType){e.next=43;break}I=t.paymentFrequency,e.next=54;break;case 43:if("Yes"!==t.isEndOfCampaign&&!t.endOfCampaign){e.next=47;break}I=null,e.next=54;break;case 47:if(!(t.paymentFrequency>t.duration)){e.next=53;break}return T="Payment frequency should not be greater than ".concat(t.duration),u(T),e.abrupt("return",a&&a({activeTab:z.id,resultDescription:T,resultCode:400}));case 53:I=t.paymentFrequency;case 54:return y={uid:U[1].uid,paymentInformation:{campaignPaymentInformation:{commissionType:{commissionTypeId:t.commissionType},isEndOfCampaign:!I,paymentFrequency:I,paymentChannelType:{paymentChannelId:t.paymentChannel},payoutApproval:t.payoutApproval,payoutWorkflowId:"No"!==t.payoutApproval?t.payoutWorkflow:void 0,payoutWorkflowName:"No"!==t.payoutApproval?t.payoutWorkflowName:void 0},includedCostCenters:x,glCode:t.commissionHead}},e.abrupt("break",113);case 56:if(!Ve(K.BusinessRule,z)){e.next=58;break}return e.abrupt("return",console.warn("Validation Errors: => ",K.BusinessRule));case 58:if(!((A=(0,F.J$)(E,U,t.commissionCalculationType))&&A.length<=0)){e.next=61;break}return e.abrupt("return",u("Business rule is mandatory"));case 61:if(!(4===(null===(k=U[1])||void 0===k||null===(P=k.profileInformation)||void 0===P||null===(M=P.campaignType)||void 0===M?void 0:M.typeId)&&A.length<2)){e.next=64;break}return u(n("minimumKpiErrorMessageWeightageBasedCampaign")),e.abrupt("return",a&&a({activeTab:z.id,resultDescription:n("minimumKpiErrorMessageWeightageBasedCampaign"),resultCode:400}));case 64:return y={uid:U[1].uid,businessRule:{kpis:A}},e.abrupt("break",113);case 66:if(!Ve(K.CommissionFormula,z)){e.next=68;break}return e.abrupt("return",console.warn("Validation Errors: => ",K.CommissionFormula));case 68:if(!(Oe(j=(0,F.yI)(E,null===(D=U[1])||void 0===D||null===(O=D.profileInformation)||void 0===O||null===(V=O.campaignType)||void 0===V?void 0:V.typeId))>100)){e.next=74;break}return u("Sum of weightage cannot be greater than 100."),e.abrupt("return",a&&a({activeTab:z.id,resultDescription:"Sum of weightage cannot be greater than 100.",resultCode:400}));case 74:if(!(Oe(j)<100&&0!==Oe(j))){e.next=77;break}return u("Sum of weightage should be equal to 100."),e.abrupt("return",a&&a({activeTab:z.id,resultDescription:"Sum of weightage should be equal to 100.",resultCode:400}));case 77:return y={uid:U[1].uid,commissionFormula:{campaignCommissionFormula:{commissionCriteria:{commissionCriteriaId:null===(R=E)||void 0===R?void 0:R.commissionCriteria},commissionDefinitionCriteria:{commissionDefinitionCriteriaId:null===(B=E)||void 0===B?void 0:B.commissionDefinitionCriteria},commissionFormulaDetails:j}}},e.abrupt("break",113);case 79:if(!Ve(K.NotificationManager,z)){e.next=81;break}return e.abrupt("return",console.warn("Validation Errors: => ",K.NotificationManager));case 81:return y={uid:U[1].uid,notificationManagement:{campaignNotificationManagement:[null===(_=E)||void 0===_?void 0:_.campaignPayoutDisbursment]}},e.abrupt("break",113);case 83:if(we=(0,F.J$)(G.BusinessRule,U,t.commissionCalculationType),!(4===(null===(q=U[1])||void 0===q||null===(J=q.profileInformation)||void 0===J||null===(te=J.campaignType)||void 0===te?void 0:te.typeId)&&we.length<2)){e.next=87;break}return u(n("minimumKpiErrorMessageWeightageBasedCampaign")),e.abrupt("return",a&&a({activeTab:z.id,resultDescription:n("minimumKpiErrorMessageWeightageBasedCampaign"),resultCode:400}));case 87:if(!(Oe(xe=(0,F.yI)(G.CommissionFormula,null===(ne=U[1])||void 0===ne||null===(ie=ne.profileInformation)||void 0===ie||null===(le=ie.campaignType)||void 0===le?void 0:le.typeId))>100)){e.next=93;break}return u("Sum of weightage cannot be greater than 100."),e.abrupt("return",a&&a({activeTab:z.id,resultDescription:"Sum of weightage cannot be greater than 100.",resultCode:400}));case 93:if(!(Oe(xe)<100&&0!==Oe(xe))){e.next=96;break}return u("Sum of weightage should be equal to 100."),e.abrupt("return",a&&a({activeTab:z.id,resultDescription:"Sum of weightage should be equal to 100.",resultCode:400}));case 96:if("2"!==t.campaignType){e.next=100;break}Te=t.paymentFrequency,e.next=111;break;case 100:if("Yes"!==t.isEndOfCampaign&&!t.endOfCampaign){e.next=104;break}Te=null,e.next=111;break;case 104:if(!(t.paymentFrequency>t.duration)){e.next=110;break}return ke="Payment frequency should not be greater than ".concat(t.duration),u(ke),e.abrupt("return",a&&a({activeTab:z.id,resultDescription:ke,resultCode:400}));case 110:Te=t.paymentFrequency;case 111:X=!("1"!==t.campaignType||"FILE"!==t.targetAudienceDataSource),y={uid:U[1].uid,profileInformation:H({uid:U[1].uid,name:null==t?void 0:t.name,campaignType:null===(oe=U[1])||void 0===oe||null===(re=oe.profileInformation)||void 0===re?void 0:re.campaignType,state:null===(se=U[1])||void 0===se||null===(me=se.profileInformation)||void 0===me?void 0:me.state,startDate:null==t?void 0:t.startDate,endDate:null==t?void 0:t.endDate,eventChannels:null==t?void 0:t.eventChannels,designWorkflowId:null==t?void 0:t.designWorkflowId,designWorkflowName:t.designWorkflowName,description:null==t?void 0:t.description,commissionType:null==t?void 0:t.commissionCalculationType,slabRangeType:null==t?void 0:t.slabRangeType,slabCommissionType:null==t?void 0:t.slabCommissionType},"PER_ACHIEVEMENT"===t.slabCommissionType&&{isSequential:"sequential"===(null==t?void 0:t.slabType)}),targetAudience:"1"===t.campaignType&&"FILE"===t.targetAudienceDataSource?{campaignExtraParam:{targetAudienceDataSource:t.targetAudienceDataSource,audienceType:t.audienceType}}:{campaignExtraParam:{audienceType:t.audienceType,targetAudienceComment:t.targetAudienceComment,targetAudienceDataSource:null==t?void 0:t.targetAudienceDataSource},regions:C,retailerTypes:t.retailerTypes,excludedRetailers:(null===(ce=t.exludedRetailers)||void 0===ce?void 0:ce.filter((function(e){return!!e})))||[],retailerInclusions:(null===(ue=t.includedRetailers)||void 0===ue?void 0:ue.filter((function(e){return!!e})))||[]},paymentInformation:{campaignPaymentInformation:{commissionType:{commissionTypeId:t.commissionType},isEndOfCampaign:!Te,paymentFrequency:Te,paymentChannelType:{paymentChannelId:t.paymentChannel},payoutApproval:t.payoutApproval,payoutWorkflowId:"No"!==t.payoutApproval?t.payoutWorkflow:void 0,payoutWorkflowName:"No"!==t.payoutApproval?t.payoutWorkflowName:void 0},includedCostCenters:S,glCode:t.commissionHead},businessRule:{kpis:we},commissionFormula:{campaignCommissionFormula:{uid:null===(de=U[5])||void 0===de||null===(pe=de.commissionFormula)||void 0===pe?void 0:pe.campaignCommissionFormula.uid,commissionCriteria:{commissionCriteriaId:G.CommissionFormula.commissionCriteria},commissionDefinitionCriteria:{commissionDefinitionCriteriaId:G.CommissionFormula.commissionDefinitionCriteria},commissionFormulaDetails:xe}},notificationManagement:{campaignNotificationManagement:[].concat((0,c.Z)(null!==(ge=G.NotificationManager)&&void 0!==ge&&ge.campaignParticipationConfirmation?[null===(ve=G.NotificationManager)||void 0===ve?void 0:ve.campaignParticipationConfirmation]:[]),(0,c.Z)(null!==(Ee=G.NotificationManager)&&void 0!==Ee&&Ee.campaignTargetAchieved?[null===(ye=G.NotificationManager)||void 0===ye?void 0:ye.campaignTargetAchieved]:[]),(0,c.Z)(null!==(Ce=G.NotificationManager)&&void 0!==Ce&&Ce.campaignProgress?[null===(he=G.NotificationManager)||void 0===he?void 0:he.campaignProgress]:[]),(0,c.Z)(null!==(Se=G.NotificationManager)&&void 0!==Se&&Se.campaignPayoutDisbursment?[null===(Ne=G.NotificationManager)||void 0===Ne?void 0:Ne.campaignPayoutDisbursment]:[]))},fromSummaryScreen:!0};case 113:De(y,(function(e,t){var n=t||e;fe(n),Y&&t&&(Ie(n.profileInformation.state.status),W(!0)),a&&a(e,t)})),localStorage.removeItem("activeTab");case 115:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[Pe]),Ve=function(e,t){if((e&&Object.values(e)||[]).length<=0)return!1;var n=e[0];return n&&(u(n),fe({activeTab:t.id,resultDescription:n,resultCode:900})),!!n};if(!l(B.Z.createCampaign))return a.createElement("h1",null,"Not Authorized");var Re=n('Your campaign "'.concat(ye,'" with campaign ID "').concat(Se,'" has been created successfully and is in "').concat(xe,'" phase.'));return a.createElement(a.Fragment,null,a.createElement(O(),(0,m.Z)({open:V,onClose:function(){t.push("/home/campaign/campaigns")},dialogDescription:"",dialogTitle:n("campaingSubmitTitle"),closeButtonText:n("okay")},X&&{okButtonText:n("gotoBulk"),onOk:function(){return t.push("/home/bulk/imports/new?source=campaign")}}),a.createElement(E.Z,null,Re),a.createElement("br",null),X&&a.createElement(E.Z,{color:"primary"},n("targetAudienceFileUploadWarnDescSuccess")),a.createElement("br",null),a.createElement("br",null)),a.createElement(O(),{open:ne.state,onClose:function(){return ae(H(H({},ne),{},{state:!1}))},dialogTitle:ne.title,closeButtonText:n("okay"),dialogDescription:ne.desc}),a.createElement(h(),{loading:oe,title:"",description:" ",customWidgetErrors:K,preInitializedData:r.has("cloneId"),isCloningRecord:$,partialSavedUserData:ge,reSubmitAllowed:!0,data:H({},(null===(e=G)||void 0===e?void 0:e.data)||{}),getChildComponentStateHandler:function(e){return ue(e)},customWidgets:{BusinessRule:a.createElement(x(),{templateData:I.BusinessRule,dataHandler:function(e,t){e?K.BusinessRule=e:(G.BusinessRule=t,delete K.BusinessRule)},componentState:ce,editView:!1,loading:oe,data:G.BusinessRule,campaignData:U}),CommissionFormula:a.createElement(T(),{templateData:I.CommissionFormula,isCloning:$,dataHandler:function(e,t){e?K.CommissionFormula=e:(G.CommissionFormula=t,delete K.CommissionFormula)},componentState:ce,editView:!1,loading:oe,data:H({},G.CommissionFormula),campaignData:H({},U)}),NotificationManager:a.createElement(P(),{dataHandler:function(e,t){e?K.NotificationManager=e:(G.NotificationManager=null==t?void 0:t.values,G.frequencyHashMap=null==t?void 0:t.frequencyHashMap,delete K.NotificationManager)},data:G.NotificationManager}),Preview:a.createElement(A(),{template:J,campaignData:H({},U),customWidgetsData:H({},G),componentState:H({},ce),dataHandler:function(e,t){e?u(e):G.Preview=t},loading:oe})},onFormSubmit:Fe,getTemplateHandler:Ae}),oe?a.createElement(v.Z,null):null)};var ne=n(23664),ae="";const ie=function(e){e.approval;var t,n=null===(t=window)||void 0===t?void 0:t.config,r=(null==n||n.defaultPerPageItems,a.useState(!1)),s=(0,d.Z)(r,2),m=s[0],u=s[1],p=a.useState({}),g=(0,d.Z)(p,2),f=(g[0],g[1],(0,ne.Z)().showErrorMessage),v=(0,y.useParams)().id,E=(0,i.useTranslation)().t,Z=a.useState({}),C=(0,d.Z)(Z,2),h=C[0],S=C[1],b=a.useState([]),w=(0,d.Z)(b,2),x=w[0],I=w[1],T=a.useState(0),k=(0,d.Z)(T,2),P=k[0],M=k[1],A=a.useState(20),D=(0,d.Z)(A,2),O=D[0],V=D[1],R=a.useState(0),B=(0,d.Z)(R,2),W=B[0],j=B[1],_=a.useState([{key:"campaignId",operator:"equals",value:v}]),H=(0,d.Z)(_,2),L=H[0],z=H[1],q=a.useState(""),U=(0,d.Z)(q,2),G=U[0],J=U[1],Y=a.useState("desc"),K=(0,d.Z)(Y,2),$=K[0],Q=K[1],X=a.useState("id"),ee=(0,d.Z)(X,2),te=ee[0],ie=ee[1];a.useEffect((function(){j(0)}),[L]);var le=a.useCallback((function(e){var t=e.sortModel[0].field,n=e.sortModel[0].sort;ie(t),Q(n)}),[]),oe=a.useCallback((function(e){var t=e.filterModel.items[0].value?e.filterModel.items[0].value:"",n=(e.filterModel.items[0].columnField,e.filterModel.items[0].columnField),a=e.filterModel.items[0].operatorValue,i=[];i.push({key:n,operator:a,value:t}),z([].concat((0,c.Z)(L),i)),j(1)}),[]),re=a.useCallback((function(e){j(e)}),[]),se=a.useCallback((function(e){V(e)}),[]),me=(a.useCallback((function(e){J(e)}),[]),(0,F.IG)(L)),ce={sort:"".concat(te,"_").concat(null==$?void 0:$.toLowerCase()),pageNumber:me===ae?W:0,pageSize:O,filter:JSON.stringify(L)};return a.useEffect((function(){u(!0),(0,N.tP)(v).then((function(e){0===e.resultCode?S(e.campaign):f(e.resultMessage),u(!0),(0,N.V0)(ce).then((function(e){var t;0===e.resultCode?(I(e.campaigns),M(null==e||null===(t=e.metadata)||void 0===t?void 0:t.totalCount),ae=me):f(e.resultMessage)})).catch((function(e){f(e)})).finally((function(){return u(!1)}))})).catch((function(e){f(e)})).finally((function(){return u(!1)}))}),[te,$,W,O,L,G]),a.createElement(o.SeamlessContainer,{title:E("viewCampaignPageTitle"),description:E("viewCampaignPageDescription")},a.createElement(l.vu,{loading:m,data:h,campaignTransaction:x,onFilterChange:oe,onSort:le,totalCount:P,setParentPage:re,setParentPerPage:se}))};function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function re(e,t){var n={};for(var a in e)t.includes(a)&&(n[a]=e[a]);return n}var se,me=null,ce={},ue={},de={},pe=!1,ge={},fe=!1,ve=function(){var e=(0,p.Z)(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){return Promise.resolve()}),800);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();const Ee=function(){var e,t,n,l,r,s=(0,y.useHistory)(),u=(0,i.useTranslation)().t,g=j()().moment,C=(0,Z.Z)(),S=C.showErrorMessage,w=C.showSuccessMessage,I=C.showInfoMessage,k=a.useState({}),M=(0,d.Z)(k,2),D=M[0],V=M[1],R=a.useState(!1),B=(0,d.Z)(R,2),W=B[0],_=B[1],H=a.useState({isOpen:!1,comment:"",submit:!1,payload:null}),L=(0,d.Z)(H,2),z=L[0],q=L[1],U=a.useState(!0),G=(0,d.Z)(U,2),J=G[0],Y=G[1],K=a.useState(),$=(0,d.Z)(K,2),Q=$[0],X=$[1],ee=a.useState(),te=(0,d.Z)(ee,2),ne=te[0],ae=te[1],ie=a.useState(""),le=(0,d.Z)(ie,2),Ee=le[0],ye=le[1],Ze=a.useState(),Ce=(0,d.Z)(Ze,2),he=Ce[0],Se=Ce[1],be=a.useState(""),Ne=(0,d.Z)(be,2),we=Ne[0],xe=Ne[1],Ie=(0,y.useParams)().id;a.useEffect((function(){se=null,ce={},ge={},de={},ue={},fe=!1}),[]),a.useEffect((function(){Y(!0),(0,N.tP)(Ie).then((function(e){0===e.resultCode?Se(e.campaign):S(e.resultMessage)})).catch((function(e){S(e)})).finally((function(){return Y(!1)}))}),[]);var Te=a.useCallback((function(e,t){e&&(Y(!0),b(e,"SCC").then((function(n){0===n.resultCode?(function(e){var t;if(de=e,(null===(t=e.sections)||void 0===t?void 0:t.length)>0){var n={};e.sections.forEach((function(e){e.customWidget&&(n[e.customWidget]=e)})),V(n)}}(n.value),t&&t(null,n)):me?t&&t(null,me):(I(u("noTemplateFound","No template found against ".concat(e,". Please wait, System is loading default template"))),b("CAMPAIGN","CMS").then((function(e){0===e.resultCode?(t&&t(null,e),me=e):(t&&t(e),me=null,I(u("defaultTemplateNotFound","Sorry, We even can't find default template in system.")))})))})).catch((function(e){return S(e)})).finally((function(){return Y(!1)})))}),[]);function ke(e,t,n){Y(!0),(0,N.Pg)(e,n).then((function(e){return function(e,t){var n,a,i;0===e.resultCode?(w(e.resultMessage),null!==(n=se)&&void 0!==n&&n.id&&(ce[se.id]=e,"4"==se.id&&function(e){if(null!=e&&e.businessRule){var t=e.businessRule.kpis,n=ue.BusinessRule;for(var a in n){var i=n[a],l=t[a];for(var o in i.events){var r,s,m,c,u=null!==(r=null===(s=i.events[o])||void 0===s?void 0:s.uid)&&void 0!==r?r:null==l||null===(m=l.kpiEvents)||void 0===m||null===(c=m[o])||void 0===c?void 0:c.uid;i.events[o]=oe(oe({},i.events[o]),{},{uid:u})}ue.BusinessRule[a]=oe(oe({},i),{},{uid:l.uid})}}}(e),e.activeTab=se.id),(null===(a=se)||void 0===a?void 0:a.id)&&(e.activeTab=se.id),t&&t(null,e),Y(!1)):(S(e),(null===(i=se)||void 0===i?void 0:i.id)&&(e.activeTab=se.id),t&&t(e),Y(!1))}(e,t)})).catch((function(e){var n;(null===(n=se)||void 0===n?void 0:n.id)&&(e.activeTab=se.id),S(e),Y(!1),t&&t(e)}))}function Pe(e){var t={};e.forEach((function(e){var n;null!=e&&e.weightage&&(t["".concat(null==e||null===(n=e.kpi)||void 0===n?void 0:n.name)]=Number(null==e?void 0:e.weightage))}));var n=0;return Object.keys(t).forEach((function(e){n+=t[e]})),n}var Me=a.useCallback(function(){var e=(0,p.Z)(f().mark((function e(t,n){var a,i,l,o,r,s,m,d,p,g,v,E,y,Z,C,h,b,N,w,x,I,T,k,P,M,A,D,O,V,R,B,W,j,H,L,U,G,J,Y,K,$,Q,X,ee,te,ne,ie,le,me,de,Ee,Ze,Ce,Se,be,Ne,we,Te,Me,De,Oe,Fe,Ve,Re,Be,We,je,_e,He,Le,ze,qe,Ue,Ge,Je,Ye,Ke,$e,Qe,Xe,et,tt,nt,at,it,lt;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(se=JSON.parse(null!==(a=localStorage.getItem("activeTab"))&&void 0!==a?a:""),null!==(i=se)&&void 0!==i&&i.id){e.next=3;break}return e.abrupt("return",S(u("anErrorOccurred")));case 3:if(pe=!(null==t||!t.FinalSubmit),H=se.widgets.map((function(e){return e.id})),null===(l=se)||void 0===l||!l.customWidget){e.next=11;break}return e.next=8,ve();case 8:L=ue[se.customWidget],e.next=12;break;case 11:L=re(t,H);case 12:if(ye(null==t?void 0:t.name),G=(Array.isArray(t.regions)?t.regions:null===(o=t.regions)||void 0===o?void 0:o.split(","))||[],J=G.length>0?G.map((function(e){return{regionId:e}})):[],Y=t.costCenter.split(",").map((function(e){return{costCenter:{costCenterId:e}}})),1===se.id&&ye(null==t?void 0:t.name),10!==(null==he||null===(r=he.profileInformation)||void 0===r||null===(s=r.state)||void 0===s?void 0:s.id)&&15!==(null==he||null===(m=he.profileInformation)||void 0===m||null===(d=m.state)||void 0===d?void 0:d.id)){e.next=99;break}e.t0=se.id,e.next="1"===e.t0?21:"2"===e.t0?23:"3"===e.t0?27:"4"===e.t0?45:"5"===e.t0?53:"6"===e.t0?64:66;break;case 21:return U={uid:Ie,profileInformation:oe({name:t.name,description:t.description,campaignType:{typeId:t.campaignType},startDate:""!==t.startDate?t.startDate:"",endDate:""!==t.endDate?t.endDate:"",eventChannels:t.eventChannels,designWorkflowId:t.designWorkflowId,designWorkflowName:t.designWorkflowName,commissionType:t.commissionCalculationType,slabRangeType:null==t?void 0:t.slabRangeType,slabCommissionType:null==t?void 0:t.slabCommissionType},"PER_ACHIEVEMENT"===t.slabCommissionType&&{isSequential:"sequential"===(null==t?void 0:t.slabType)})},e.abrupt("break",97);case 23:return K=(Array.isArray(t.retailerTypes)?t.retailerTypes:null===(p=t.retailerTypes)||void 0===p?void 0:p.split(","))||[],U={uid:Ie,targetAudience:{campaignExtraParam:{targetAudienceDataSource:null==t?void 0:t.targetAudienceDataSource,audienceType:t.audienceType,targetAudienceComment:t.targetAudienceComment},regions:J,retailerTypes:K,excludedRetailers:(null===(g=t.exludedRetailers)||void 0===g?void 0:g.filter((function(e){return!!e})))||[],retailerInclusions:(null===(v=t.includedRetailers)||void 0===v?void 0:v.filter((function(e){return!!e})))||[]}},"1"===t.campaignType&&"FILE"===(null==t?void 0:t.targetAudienceDataSource)&&(fe=!0,U={uid:Ie,targetAudience:{campaignExtraParam:{targetAudienceDataSource:null==t?void 0:t.targetAudienceDataSource,audienceType:t.audienceType}}}),e.abrupt("break",97);case 27:if($=t.costCenter.split(",").map((function(e){return{costCenter:{costCenterId:e}}})),"2"!==t.campaignType){e.next=32;break}Q=t.paymentFrequency,e.next=43;break;case 32:if("Yes"!==t.isEndOfCampaign&&!t.endOfCampaign){e.next=36;break}Q=null,e.next=43;break;case 36:if(!(t.paymentFrequency>t.duration)){e.next=42;break}return X="Payment frequency should not be greater than ".concat(t.duration),S(X),e.abrupt("return",n&&n({activeTab:se.id,resultDescription:X,resultCode:400}));case 42:Q=t.paymentFrequency;case 43:return U={uid:Ie,paymentInformation:{campaignPaymentInformation:{commissionType:{commissionTypeId:t.commissionType},isEndOfCampaign:!Q,paymentFrequency:Q,paymentChannelType:{paymentChannelId:t.paymentChannel},payoutApproval:t.payoutApproval,payoutWorkflowId:"No"!==t.payoutApproval?t.payoutWorkflow:void 0,payoutWorkflowName:"No"!==t.payoutApproval?t.payoutWorkflowName:void 0},includedCostCenters:$,glCode:t.commissionHead}},e.abrupt("break",97);case 45:if(!Ae(ge.BusinessRule,se)){e.next=47;break}return e.abrupt("return",console.warn("Validation Errors: => ",ge.BusinessRule));case 47:if(ne=(0,F.J$)(L,ce,t.commissionCalculationType),!(4===(null==he||null===(ee=he.profileInformation)||void 0===ee||null===(te=ee.campaignType)||void 0===te?void 0:te.typeId)&&ne.length<2)){e.next=51;break}return S(u("minimumKpiErrorMessageWeightageBasedCampaign")),e.abrupt("return",n&&n({activeTab:se.id,resultDescription:u("minimumKpiErrorMessageWeightageBasedCampaign"),resultCode:400}));case 51:return U={uid:Ie,businessRule:{kpis:ne}},e.abrupt("break",97);case 53:if(!(Pe(Ee=(0,F.yI)(L,null==he||null===(ie=he.profileInformation)||void 0===ie||null===(le=ie.campaignType)||void 0===le?void 0:le.typeId))>100)){e.next=59;break}return S("Sum of weightage cannot be greater than 100."),e.abrupt("return",n&&n({activeTab:se.id,resultDescription:"Sum of weightage cannot be greater than 100.",resultCode:400}));case 59:if(!(Pe(Ee)<100&&0!==Pe(Ee))){e.next=62;break}return S("Sum of weightage should be equal to 100."),e.abrupt("return",n&&n({activeTab:se.id,resultDescription:"Sum of weightage should be equal to 100.",resultCode:400}));case 62:return U={uid:Ie,commissionFormula:{campaignCommissionFormula:{commissionCriteria:{commissionCriteriaId:null===(me=L)||void 0===me?void 0:me.commissionCriteria},commissionDefinitionCriteria:{commissionDefinitionCriteriaId:null===(de=L)||void 0===de?void 0:de.commissionDefinitionCriteria},commissionFormulaDetails:Ee}}},e.abrupt("break",97);case 64:return U={uid:Ie,notificationManagement:{campaignNotificationManagement:[].concat((0,c.Z)(null!==(Ze=ue.NotificationManager)&&void 0!==Ze&&Ze.campaignParticipationConfirmation?[null===(Ce=ue.NotificationManager)||void 0===Ce?void 0:Ce.campaignParticipationConfirmation]:[]),(0,c.Z)(null!==(Se=ue.NotificationManager)&&void 0!==Se&&Se.campaignTargetAchieved?[null===(be=ue.NotificationManager)||void 0===be?void 0:be.campaignTargetAchieved]:[]),(0,c.Z)(null!==(Ne=ue.NotificationManager)&&void 0!==Ne&&Ne.campaignProgress?[null===(we=ue.NotificationManager)||void 0===we?void 0:we.campaignProgress]:[]),(0,c.Z)(null!==(Te=ue.NotificationManager)&&void 0!==Te&&Te.campaignPayoutDisbursment?[null===(Me=ue.NotificationManager)||void 0===Me?void 0:Me.campaignPayoutDisbursment]:[]))}},e.abrupt("break",97);case 66:if(De=t.costCenter.split(",").map((function(e){return{costCenter:{costCenterId:e}}})),Oe=(0,F.J$)(ue.BusinessRule,ce,t.commissionCalculationType),!(4===(null==he||null===(E=he.profileInformation)||void 0===E||null===(y=E.campaignType)||void 0===y?void 0:y.typeId)&&Oe.length<2)){e.next=71;break}return S(u("minimumKpiErrorMessageWeightageBasedCampaign")),e.abrupt("return",n&&n({activeTab:se.id,resultDescription:u("minimumKpiErrorMessageWeightageBasedCampaign"),resultCode:400}));case 71:if(!(Pe(Fe=(0,F.yI)(ue.CommissionFormula,null==he||null===(Z=he.profileInformation)||void 0===Z||null===(C=Z.campaignType)||void 0===C?void 0:C.typeId))>100)){e.next=77;break}return S("Sum of weightage cannot be greater than 100."),e.abrupt("return",n&&n({activeTab:se.id,resultDescription:"Sum of weightage cannot be greater than 100.",resultCode:400}));case 77:if(!(Pe(Fe)<100&&0!==Pe(Fe))){e.next=80;break}return S("Sum of weightage should be equal to 100."),e.abrupt("return",n&&n({activeTab:se.id,resultDescription:"Sum of weightage should be equal to 100.",resultCode:400}));case 80:if("2"!==t.campaignType){e.next=84;break}Ve=t.paymentFrequency,e.next=95;break;case 84:if("Yes"!==t.isEndOfCampaign&&!t.endOfCampaign){e.next=88;break}Ve=null,e.next=95;break;case 88:if(!(t.paymentFrequency>t.duration)){e.next=94;break}return Re="Payment frequency should not be greater than ".concat(t.duration),S(Re),e.abrupt("return",n&&n({activeTab:se.id,resultDescription:Re,resultCode:400}));case 94:Ve=t.paymentFrequency;case 95:fe=!("1"!==t.campaignType||"FILE"!==t.targetAudienceDataSource),U={uid:Ie,profileInformation:oe({uid:Ie,name:null==t?void 0:t.name,campaignType:null==he||null===(h=he.profileInformation)||void 0===h?void 0:h.campaignType,state:null==he||null===(b=he.profileInformation)||void 0===b?void 0:b.state,startDate:null==t?void 0:t.startDate,endDate:null==t?void 0:t.endDate,eventChannels:null==t?void 0:t.eventChannels,designWorkflowId:null==t?void 0:t.designWorkflowId,designWorkflowName:t.designWorkflowName,description:null==t?void 0:t.description,commissionType:null==t?void 0:t.commissionCalculationType,slabRangeType:null==t?void 0:t.slabRangeType,slabCommissionType:null==t?void 0:t.slabCommissionType},"PER_ACHIEVEMENT"===t.slabCommissionType&&{isSequential:"sequential"===(null==t?void 0:t.slabType)}),targetAudience:"1"===t.campaignType&&"FILE"===t.targetAudienceDataSource?{campaignExtraParam:{targetAudienceDataSource:t.targetAudienceDataSource,audienceType:t.audienceType}}:{campaignExtraParam:{audienceType:t.audienceType,targetAudienceComment:t.targetAudienceComment,targetAudienceDataSource:null==t?void 0:t.targetAudienceDataSource},regions:J,retailerTypes:t.retailerTypes,excludedRetailers:(null===(N=t.exludedRetailers)||void 0===N?void 0:N.filter((function(e){return!!e})))||[],retailerInclusions:(null===(w=t.includedRetailers)||void 0===w?void 0:w.filter((function(e){return!!e})))||[]},paymentInformation:{campaignPaymentInformation:{commissionType:{commissionTypeId:t.commissionType},isEndOfCampaign:!Ve,paymentFrequency:Ve,paymentChannelType:{paymentChannelId:t.paymentChannel},payoutApproval:t.payoutApproval,payoutWorkflowId:t.payoutWorkflow,payoutWorkflowName:t.payoutWorkflowName},includedCostCenters:De,glCode:t.commissionHead},businessRule:{kpis:Oe},commissionFormula:{campaignCommissionFormula:{uid:null===(x=ce[5])||void 0===x||null===(I=x.commissionFormula)||void 0===I?void 0:I.campaignCommissionFormula.uid,commissionCriteria:{commissionCriteriaId:ue.CommissionFormula.commissionCriteria},commissionDefinitionCriteria:{commissionDefinitionCriteriaId:ue.CommissionFormula.commissionDefinitionCriteria},commissionFormulaDetails:Fe}},notificationManagement:{campaignNotificationManagement:[].concat((0,c.Z)(null!==(T=ue.NotificationManager)&&void 0!==T&&T.campaignParticipationConfirmation?[null===(k=ue.NotificationManager)||void 0===k?void 0:k.campaignParticipationConfirmation]:[]),(0,c.Z)(null!==(P=ue.NotificationManager)&&void 0!==P&&P.campaignTargetAchieved?[null===(M=ue.NotificationManager)||void 0===M?void 0:M.campaignTargetAchieved]:[]),(0,c.Z)(null!==(A=ue.NotificationManager)&&void 0!==A&&A.campaignProgress?[null===(D=ue.NotificationManager)||void 0===D?void 0:D.campaignProgress]:[]),(0,c.Z)(null!==(O=ue.NotificationManager)&&void 0!==O&&O.campaignPayoutDisbursment?[null===(V=ue.NotificationManager)||void 0===V?void 0:V.campaignPayoutDisbursment]:[]))},fromSummaryScreen:!0};case 97:e.next=129;break;case 99:if(nt=(0,F.J$)(ue.BusinessRule,ce,t.commissionCalculationType),!(4===(null==he||null===(Be=he.profileInformation)||void 0===Be||null===(We=Be.campaignType)||void 0===We?void 0:We.typeId)&&nt.length<2)){e.next=103;break}return S(u("minimumKpiErrorMessageWeightageBasedCampaign")),e.abrupt("return",n&&n({activeTab:se.id,resultDescription:u("minimumKpiErrorMessageWeightageBasedCampaign"),resultCode:400}));case 103:if(!(Pe(at=(0,F.yI)(ue.CommissionFormula,null==he||null===(je=he.profileInformation)||void 0===je||null===(_e=je.campaignType)||void 0===_e?void 0:_e.typeId))>100)){e.next=109;break}return S("Sum of weightage cannot be greater than 100."),e.abrupt("return",n&&n({activeTab:se.id,resultDescription:"Sum of weightage cannot be greater than 100.",resultCode:400}));case 109:if(!(Pe(at)<100&&0!==Pe(at))){e.next=112;break}return S("Sum of weightage should be equal to 100."),e.abrupt("return",n&&n({activeTab:se.id,resultDescription:"Sum of weightage should be equal to 100.",resultCode:400}));case 112:if("2"!==t.campaignType){e.next=116;break}it=t.paymentFrequency,e.next=127;break;case 116:if("Yes"!==t.isEndOfCampaign&&!t.endOfCampaign){e.next=120;break}it=null,e.next=127;break;case 120:if(!(t.paymentFrequency>t.duration)){e.next=126;break}return lt="Payment frequency should not be greater than ".concat(t.duration),S(lt),e.abrupt("return",n&&n({activeTab:se.id,resultDescription:lt,resultCode:400}));case 126:it=t.paymentFrequency;case 127:fe=!("1"!==t.campaignType||"FILE"!==t.targetAudienceDataSource),U={uid:Ie,profileInformation:oe({uid:Ie,name:null==t?void 0:t.name,campaignType:null==he||null===(He=he.profileInformation)||void 0===He?void 0:He.campaignType,state:null==he||null===(Le=he.profileInformation)||void 0===Le?void 0:Le.state,startDate:null==t?void 0:t.startDate,endDate:null==t?void 0:t.endDate,eventChannels:null==t?void 0:t.eventChannels,designWorkflowId:null==t?void 0:t.designWorkflowId,designWorkflowName:t.designWorkflowName,description:null==t?void 0:t.description,commissionType:null==t?void 0:t.commissionCalculationType,slabRangeType:null==t?void 0:t.slabRangeType,slabCommissionType:null==t?void 0:t.slabCommissionType},"PER_ACHIEVEMENT"===t.slabCommissionType&&{isSequential:"sequential"===(null==t?void 0:t.slabType)}),targetAudience:"1"===t.campaignType&&"FILE"===t.targetAudienceDataSource?{campaignExtraParam:{targetAudienceDataSource:t.targetAudienceDataSource,audienceType:t.audienceType}}:{campaignExtraParam:{audienceType:t.audienceType,targetAudienceComment:t.targetAudienceComment,targetAudienceDataSource:t.targetAudienceDataSource},regions:J,retailerTypes:t.retailerTypes,excludedRetailers:(null===(ze=t.exludedRetailers)||void 0===ze?void 0:ze.filter((function(e){return!!e})))||[],retailerInclusions:(null===(qe=t.includedRetailers)||void 0===qe?void 0:qe.filter((function(e){return!!e})))||[]},paymentInformation:{campaignPaymentInformation:{commissionType:{commissionTypeId:t.commissionType},isEndOfCampaign:!it,paymentFrequency:it,paymentChannelType:{paymentChannelId:t.paymentChannel},payoutApproval:t.payoutApproval,payoutWorkflowId:"No"!==t.payoutApproval?t.payoutWorkflow:void 0,payoutWorkflowName:"No"!==t.payoutApproval?t.payoutWorkflowName:void 0},includedCostCenters:Y,glCode:t.commissionHead},businessRule:{kpis:nt},commissionFormula:{uid:null==he||null===(Ue=he.commissionFormula)||void 0===Ue||null===(Ge=Ue.campaignCommissionFormula)||void 0===Ge?void 0:Ge.uid,campaignCommissionFormula:{commissionCriteria:{commissionCriteriaId:ue.CommissionFormula.commissionCriteria},commissionDefinitionCriteria:{commissionDefinitionCriteriaId:ue.CommissionFormula.commissionDefinitionCriteria},commissionFormulaDetails:at}},notificationManagement:{campaignNotificationManagement:[].concat((0,c.Z)(null!==(Je=ue.NotificationManager)&&void 0!==Je&&Je.campaignParticipationConfirmation?[null===(Ye=ue.NotificationManager)||void 0===Ye?void 0:Ye.campaignParticipationConfirmation]:[]),(0,c.Z)(null!==(Ke=ue.NotificationManager)&&void 0!==Ke&&Ke.campaignTargetAchieved?[null===($e=ue.NotificationManager)||void 0===$e?void 0:$e.campaignTargetAchieved]:[]),(0,c.Z)(null!==(Qe=ue.NotificationManager)&&void 0!==Qe&&Qe.campaignProgress?[null===(Xe=ue.NotificationManager)||void 0===Xe?void 0:Xe.campaignProgress]:[]),(0,c.Z)(null!==(et=ue.NotificationManager)&&void 0!==et&&et.campaignPayoutDisbursment?[null===(tt=ue.NotificationManager)||void 0===tt?void 0:tt.campaignPayoutDisbursment]:[]))},fromSummaryScreen:!0};case 129:if(null==t||!t.FinalSubmit||z.submit||10===(null==he||null===(R=he.profileInformation)||void 0===R||null===(B=R.state)||void 0===B?void 0:B.id)||15===(null==he||null===(W=he.profileInformation)||void 0===W||null===(j=W.state)||void 0===j?void 0:j.id)){e.next=131;break}return e.abrupt("return",q(oe(oe({},z),{},{submit:!0,isOpen:!0,payload:U})));case 131:ke(U,(function(e,t){var a,i,l,o=t||e;ae(o),pe&&t&&((null===(a=o.profileInformation)||void 0===a?void 0:a.state)&&xe(null===(i=o.profileInformation)||void 0===i||null===(l=i.state)||void 0===l?void 0:l.status),_(!0)),n&&n(e,t)})),localStorage.removeItem("activeTab");case 133:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[he]),Ae=function(e,t){if((e&&Object.values(e)||[]).length<=0)return!1;var n=e[0];return n&&(S(n),ae({activeTab:t.id,resultDescription:n,resultCode:900})),!!n};a.useEffect((function(){ue.data=(0,F.Rz)(he,de,g),ue.BusinessRule=(0,F.GD)(he,de,Q),ue.CommissionFormula=(0,F.DP)(he),ue.NotificationManager=(0,F.O9)(he),ce=he}),[he,de,null==Q?void 0:Q.values]);var De=10===(null==he||null===(e=he.profileInformation)||void 0===e||null===(t=e.state)||void 0===t?void 0:t.id)||15===(null==he||null===(n=he.profileInformation)||void 0===n||null===(l=n.state)||void 0===l?void 0:l.id),Oe=u('Your campaign "'.concat(Ee,'" with campaign ID "').concat(Ie,'" has been updated successfully and is in "').concat(we,'" phase.'));return a.createElement(a.Fragment,null,a.createElement(O(),(0,m.Z)({open:W,onClose:function(){s.push("/home/campaign/campaigns")},dialogDescription:"",dialogTitle:u("campaingSubmitTitle"),closeButtonText:u("okay")},fe&&De&&{okButtonText:u("gotoBulk"),onOk:function(){return s.push("/home/bulk/imports/new?source=campaign")}}),a.createElement(E.Z,null,Oe),a.createElement("br",null),De&&fe&&a.createElement(E.Z,{color:"primary"},u("targetAudienceFileUploadWarnDescSuccess")),a.createElement("br",null),a.createElement("br",null)),a.createElement(O(),{open:z.isOpen,onClose:function(){q({isOpen:!1,comment:"",submit:!1,payload:null})},onOk:function(){z.comment?(q(oe(oe({},z),{},{isOpen:!1})),(0,N.Pg)(oe(oe({},z.payload),{},{userComment:z.comment})).then((function(e){var t,n,a;0===e.resultCode?(w(e.resultMessage),(null===(t=e.profileInformation)||void 0===t?void 0:t.state)&&xe(null===(n=e.profileInformation)||void 0===n||null===(a=n.state)||void 0===a?void 0:a.status),_(!0)):S(e.resultMessage)})).catch((function(e){return S(e)}))):S("Comment is required for editing")},dialogTitle:u("comment"),okButtonText:u("submit"),closeButtonText:u("cancel"),dialogDescription:""},a.createElement(o.SeamlessInput,{multiline:!0,rowsMax:3,id:"comment",key:"final-comment",type:"text",error:!z.comment,fullWidth:!0,required:!0,label:"Comment",helperText:z.comment?"":"Comment is required",name:"comment",value:z.comment,onChange:function(e){return q(oe(oe({},z),{},{comment:e.target.value}))}})),a.createElement(h(),{loading:J,title:"",description:" ",edit:!De,customWidgetErrors:ge,partialSavedUserData:ne,reSubmitAllowed:De,preInitializedData:!0,data:oe({},ue.data||{}),resellerInfo:he,getChildComponentStateHandler:function(e){return X(e)},customWidgets:{BusinessRule:a.createElement(x(),{templateData:D.BusinessRule,dataHandler:function(e,t){e?ge.BusinessRule=e:Object.keys(t).length>0?(ue.BusinessRule=t,delete ge.BusinessRule):ge.BusinessRule={1:"Business rule is mandator"}},componentState:Q,editView:!0,loading:J,data:oe({},ue.BusinessRule),campaignData:ce}),CommissionFormula:a.createElement(T(),{templateData:D.CommissionFormula,dataHandler:function(e,t){e?ge.CommissionFormula=e:(ue.CommissionFormula=t,delete ge.CommissionFormula)},componentState:Q,editView:!1,loading:J,data:oe({},ue.CommissionFormula),campaignData:(0,F.J$)(null===(r=ue)||void 0===r?void 0:r.BusinessRule,ce)}),NotificationManager:a.createElement(P(),{dataHandler:function(e,t){e?ge.NotificationManager=e:(ue.NotificationManager=null==t?void 0:t.values,ue.frequencyHashMap=null==t?void 0:t.frequencyHashMap,delete ge.NotificationManager)},data:oe({},ue.NotificationManager)}),Preview:a.createElement(A(),{template:de,campaignData:oe({},ce),customWidgetsData:oe({},ue),componentState:oe({},Q),dataHandler:function(e,t){e?S(e):ue.Preview=t},loading:J})},onFormSubmit:Me,getTemplateHandler:Te}),J?a.createElement(v.Z,null):null)},ye=function(){var e=(0,i.useTranslation)().t;return a.createElement(o.SeamlessContainer,{title:e("viewCampaignDesignPageTitle"),description:e("viewCampaignDesignPageDescription")},a.createElement("div",{style:{height:600,width:"100%"}},a.createElement(l.C_,null)))},Ze=function(){var e=(0,i.useTranslation)().t,t=(0,y.useParams)().id;return a.createElement(o.SeamlessContainer,{title:e("viewCampaignDesignPageTitle"),description:e("viewCampaignDesignPageDescription")},a.createElement(l.ZA,{id:t}))},Ce=function(){var e=(0,y.useRouteMatch)().path,t=R()().AccessControlled;return a.createElement(y.Switch,null,a.createElement(y.Route,{path:e+"/view/:id"},a.createElement(t,{feature:B.Z.VIEW_CAMPAIGN_DESIGN},a.createElement(Ze,null))),a.createElement(y.Route,null,a.createElement(t,{feature:B.Z.VIEW_ALL_CAMPAIGN_DESIGN},a.createElement(ye,null))))},he=function(){var e=(0,i.useTranslation)().t;return a.createElement(o.SeamlessContainer,{title:e("viewCommissionPayoutPageTitle"),description:e("viewCommissionPayoutPageDescription")},a.createElement("div",{style:{height:600,width:"100%"}},a.createElement(l.HN,null)))},Se=function(){var e=(0,i.useTranslation)().t,t=(0,y.useParams)().id;return a.createElement(o.SeamlessContainer,{title:e("viewPayoutApprovalPageTitle"),description:e("viewPayoutApprovalPageDescription")},a.createElement(l.DT,{id:t}))},be=function(){var e=(0,y.useRouteMatch)().path,t=R()().AccessControlled;return a.createElement(y.Switch,null,a.createElement(y.Route,{path:e+"/view/:id"},a.createElement(t,{feature:B.Z.VIEW_COMMISSION_PAYOUT},a.createElement(Se,null))),a.createElement(y.Route,null,a.createElement(t,{feature:B.Z.VIEW_ALL_COMMISSION_PAYOUT},a.createElement(he,null))))},Ne=function(){var e=(0,y.useRouteMatch)().path;return a.createElement(y.Switch,null,a.createElement(y.Route,{path:"".concat(e,"/commission-payout")},a.createElement(be,null)),a.createElement(y.Route,{path:"".concat(e,"/campaign-design")},a.createElement(Ce,null)),a.createElement(y.Route,{path:e},a.createElement(y.Redirect,{to:e+"/campaign-design"})))}},27490:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const a={createCampaign:"CREATE_CAMPAIGN",editCampaign:"EDIT_CAMPAIGN",updateCampaignStatus:"UPDATE_CAMPAIGN_STATUS",VIEW_COMMISSION_ADJUSTMENT:"VIEW_COMMISSION_ADJUSTMENT",EDIT_COMMISSION_ADJUSTMENT:"EDIT_COMMISSION_ADJUSTMENT",COMMISSION_ADJUSTMENT_LIST:"COMMISSION_ADJUSTMENT_LIST",VIEW_ALL_CAMPAIGN_DESIGN:"VIEW_ALL_CAMPAIGN_DESIGN",VIEW_CAMPAIGN_DESIGN:"VIEW_CAMPAIGN_DESIGN",APPROVE_CAMPAIGN_DESIGN:"APPROVE_CAMPAIGN_DESIGN",REJECT_CAMPAIGN_DESIGN:"REJECT_CAMPAIGN_DESIGN",VIEW_ALL_COMMISSION_PAYOUT:"VIEW_ALL_COMMISSION_PAYOUT",VIEW_COMMISSION_PAYOUT:"VIEW_COMMISSION_PAYOUT",APPROVE_COMMISSION_PAYOUT:"APPROVE_COMMISSION_PAYOUT",REJECT_COMMISSION_PAYOUT:"REJECT_COMMISSION_PAYOUT"}},91955:(e,t,n)=>{"use strict";n.d(t,{J$:()=>s,yI:()=>m,IG:()=>c,Rz:()=>p,GD:()=>g,DP:()=>f,O9:()=>v});var a=n(90929),i=n(11746),l=n(51119);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s=function(e,t,n){var a=[];for(var i in e){var l,o,s,m=e[i],c=("count"===(null==m||null===(l=m.criteriaType)||void 0===l?void 0:l.toLowerCase())&&(null==m||m.eventTargetKPI),[r(r({},(null==m?void 0:m.eventUid)&&{uid:null==m?void 0:m.eventUid}),{},{transactionEvent:{transactionEventsId:m.eventType,name:"".concat(m.eventType)},previousEventId:null,kpiEvents:null,previousEventRelation:null,daysBetweenPreviousEvent:null,criteria:m.criteriaType,criteriaValue:"NORMAL"===n?m.eventTarget:0,deadlineDays:"NORMAL"===n?(null==m?void 0:m.deadlineDays)||m.eventTarget:0,minimumValue:"COUNT"===m.criteriaType?m.minValue:""})]);if(null!=m&&m.events&&(null===(o=Object.keys(m.events))||void 0===o?void 0:o.length)>0)for(var u in m.events){var d,p=m.events[u];"count"===(null==p||null===(d=p.targetCriteriaType)||void 0===d?void 0:d.toLowerCase())&&(null==p||p.eventTargetKPI),c.push(r(r({},(null==p?void 0:p.uid)&&{uid:null==p?void 0:p.uid}),{},{transactionEvent:{transactionEventsId:p.event,name:"".concat(p.event)},previousEventId:null,kpiEvents:null,previousEventRelation:null==p?void 0:p.relationWithPreviousEvent,daysBetweenPreviousEvent:null,criteria:null==p?void 0:p.targetCriteriaType,criteriaValue:null==p?void 0:p.eventTargetKPI,deadlineDays:(null==p?void 0:p.deadlineDays)||(null==p?void 0:p.eventTargetKPI),minimumValue:null==p?void 0:p.minValueEvent}))}var g="yes"===(null===(s=m.taxExempted)||void 0===s?void 0:s.toLowerCase()),f=g?m.taxType:null;a.push(r(r({},(null==m?void 0:m.uid)&&{uid:null==m?void 0:m.uid}),{},{name:m.kpiName,targetInCount:m.kpiTargetCount,exemptedTax:f,isTaxExempted:g,kpiEvents:c}))}return a},m=function(e,t){var n=[];if("2"===(null==e?void 0:e.commissionCriteria)&&"1"===(null==e?void 0:e.commissionDefinitionCriteria))n=[{retailerTypeId:null,additionalRetailers:!1,commissionValue:(null==e?void 0:e.commissionAmountRetailer)||(null==e?void 0:e.commissionPercentageRetailer)}];else{if("1"===(null==e?void 0:e.commissionCriteria)&&"1"===(null==e?void 0:e.commissionDefinitionCriteria))return n=Object.keys(e.commissionData).map((function(t){var n,a;return{retailerTypeId:"other"===t?null:t,additionalRetailers:"other"===t,commissionValue:(null==e||null===(n=e.commissionData[t])||void 0===n?void 0:n.commissionAmountRetailer)||(null==e||null===(a=e.commissionData[t])||void 0===a?void 0:a.commissionPercentageRetailer)}}));if("2"===(null==e?void 0:e.commissionCriteria)&&"2"===(null==e?void 0:e.commissionDefinitionCriteria))4===t?n=Object.keys(null==e?void 0:e.commissionData).map((function(t){var n,a,i;return{kpi:{name:t,uid:null==e||null===(n=e.commissionData)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.uid},retailerTypeId:null,additionalRetailers:!1,commissionValue:null==e?void 0:e.commissionAmount,weightage:null==e||null===(i=e.commissionData[t])||void 0===i?void 0:i.weightage}})):3===t?(n=[],Object.keys(e.commissionData).forEach((function(t){n=[].concat((0,i.Z)(n),(0,i.Z)(e.commissionData[t]))})),n.forEach((function(e,t){n[t]={kpi:e.kpi,additionalRetailers:!1,rangeFrom:(null==e?void 0:e.lowerCount)||(null==e?void 0:e.lowerPercentage),rangeTo:(null==e?void 0:e.upperCount)||(null==e?void 0:e.upperPercentage),commissionValue:null==e?void 0:e.commissionAmount,retailerTypeId:null}}))):n=Object.keys(null==e?void 0:e.commissionData).map((function(t){var n,a,i,l;return{kpi:{name:t,uid:null==e||null===(n=e.commissionData)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.uid},retailerTypeId:null,additionalRetailers:!1,commissionValue:(null==e||null===(i=e.commissionData[t])||void 0===i?void 0:i.commissionAmountKpi)||(null==e||null===(l=e.commissionData[t])||void 0===l?void 0:l.commissionPercentageKpi)}}));else if(4==t){var a=[],l=[];Object.keys(null==e?void 0:e.commissionData).forEach((function(t){var n,i,o,r,s,m,c,u;null!=e&&null!==(n=e.commissionData)&&void 0!==n&&null!==(i=n[t])&&void 0!==i&&i.uid?a.push({uid:null==e||null===(o=e.commissionData)||void 0===o||null===(r=o[t])||void 0===r?void 0:r.uid,weightage:null==e||null===(s=e.commissionData)||void 0===s||null===(m=s[t])||void 0===m?void 0:m.weightage,name:t}):l.push({retailerType:t,commissionValue:null==e||null===(c=e.commissionData)||void 0===c||null===(u=c[t])||void 0===u?void 0:u.commissionAmountRetailer})})),a.forEach((function(e){l.forEach((function(t){n.push({kpi:{name:e.name,uid:e.uid},retailerTypeId:"other"===t.retailerType?null:t.retailerType,additionalRetailers:"other"===t.retailerType,commissionValue:t.commissionValue,weightage:e.weightage})}))}))}else n=Object.keys(null==e?void 0:e.commissionData).map((function(t){var n,a,i,l;return{kpi:{name:t.split("_")[1],uid:null==e||null===(n=e.commissionData)||void 0===n||null===(a=n[t])||void 0===a?void 0:a.uid},retailerTypeId:"other"===t.split("_")[0]?null:t.split("_")[0],additionalRetailers:"other"===t.split("_")[0],commissionValue:(null==e||null===(i=e.commissionData[t])||void 0===i?void 0:i.commissionAmountKpi)||(null==e||null===(l=e.commissionData[t])||void 0===l?void 0:l.commissionPercentageKpi)}}))}return n},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e);return t.reduce((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;return e[n]?"".concat(t?"".concat(t,","):"").concat(n,":").concat(e[n]):t.trim()}),"")},u=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,l=r({},n);for(var o in t){var s=t[o];"object"!==(0,a.Z)(s)?l[o]=s:i>1&&"object"===(0,a.Z)(s)&&(l=e(s,l,i))}return l},d=function(e){var t,n={};if(e&&(null==e||null===(t=e.sections)||void 0===t?void 0:t.length)>0){var a,l,o=null===(a=e.sections)||void 0===a?void 0:a.filter((function(e){var t;return(null===(t=e.widgets)||void 0===t?void 0:t.length)>0})),r=[];null==o||o.forEach((function(e){r=[].concat((0,i.Z)(r),(0,i.Z)(e.widgets))})),null===(l=r)||void 0===l||l.forEach((function(e){n[e.id]=e.defaultValue}))}return n},p=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=d(t),l={};if(e){var o=e.profileInformation,s=e.targetAudience,m=e.paymentInformation;if((l=r(r({},l),u(o))).campaignType="".concat(o.campaignType.typeId),"PER_ACHIEVEMENT"===o.slabCommissionType&&(l.slabType="".concat(o.isSequential?"sequential":"non_sequential")),l.commissionCalculationType="".concat(o.commissionType),2!=l.campaignType&&l.startDate&&l.endDate&&n){var c=n(l.startDate),p=n(l.endDate),g=n(new Date),f=p.diff(c,"days");l.duration=f+1,l.endOfCampaign=g.valueOf()>=c.valueOf()&&g.valueOf()>=p.valueOf()||0===f}if(s){var v,E=s.campaignExtraParam,y=s.regions,Z=s.retailerTypes,C=s.excludedRetailers,h=s.retailerInclusions;l.targetAudienceDataSource=(null==E?void 0:E.targetAudienceDataSource)||i.targetAudienceDataSource,l.audienceType=(null==E?void 0:E.audienceType)||i.audienceType,l.regions=null==y||null===(v=y.map((function(e){return e.regionId})))||void 0===v?void 0:v.join(","),l.retailerTypes=Z.join(","),l.exludedRetailers=C.join(","),l.includedRetailers=h,1==l.campaignType&&a&&"FILE"===l.targetAudienceDataSource&&(l.includedRetailers=""),l.targetAudienceComment=null==E?void 0:E.targetAudienceComment}if(m){var S,b,N,w=m.campaignPaymentInformation,x=m.glCode,I=m.includedCostCenters;l.commissionType=(null==w||null===(S=w.commissionType)||void 0===S?void 0:S.commissionTypeId.toString())||i.commissionType,l.paymentFrequency=(null==w?void 0:w.paymentFrequency)||i.paymentFrequency,l.isEndOfCampaign=l.paymentFrequency?"No":"Yes",l.hidePaymentFrequency=l.isEndOfCampaign,l.commissionHead=x,l.costCenter=null==I||null===(b=I.map((function(e){var t;return null==e||null===(t=e.costCenter)||void 0===t?void 0:t.costCenterId})))||void 0===b?void 0:b.join(","),l.paymentChannel=(null==w||null===(N=w.paymentChannelType)||void 0===N?void 0:N.paymentChannelId.toString())||i.paymentChannel,l.payoutApproval=null!=w&&w.payoutWorkflowName?"Yes":i.payoutApproval,l.payoutWorkflowName=null==w?void 0:w.payoutWorkflowName,l.payoutWorkflow=null==w?void 0:w.payoutWorkflowId}}return l},g=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=d(t),l={},o=(null==n?void 0:n.values)||{};if(null!=e&&e.businessRule){var s=null==e?void 0:e.businessRule,m=s.kpis;m.forEach((function(e,t){var n,s=e.kpiEvents,m=s[0],c={};(null==s?void 0:s.length)>1&&s.forEach((function(e,t){var n;t>0&&(c[t-1]=r(r({},!a&&{uid:e.uid}),{},{event:(null===(n=e.transactionEvent)||void 0===n?void 0:n.transactionEventsId)||"",relationWithPreviousEvent:e.previousEventRelation||i.relationWithPreviousEvent,targetCriteriaType:e.criteria||i.criteriaType,eventTargetKPI:e.criteriaValue,minValueEvent:e.minimumValue,deadlineDays:e.deadlineDays||(null==o?void 0:o.duration)}))})),l[t]=r(r(r({},!a&&{uid:e.uid}),!a&&{eventUid:m.uid}),{},{criteriaType:m.criteria||i.criteriaType,kpiTargetCount:e.targetInCount||i.kpiTargetCount,eventTarget:m.criteriaValue,eventType:null==m||null===(n=m.transactionEvent)||void 0===n?void 0:n.transactionEventsId,kpiName:e.name,minValue:m.minimumValue,taxType:e.exemptedTax,taxExempted:e.exemptedTax?"Yes":"No",deadlineDays:e.deadlineDays||(null==o?void 0:o.duration),events:c})}))}return l},f=function(e){var t,n,a,l,o,s,m,c,u,d,p,g,f,v,E=arguments.length>1&&void 0!==arguments[1]&&arguments[1],y=arguments.length>2?arguments[2]:void 0,Z=null==e||null===(t=e.profileInformation)||void 0===t?void 0:t.commissionType,C=(null==e||null===(n=e.profileInformation)||void 0===n||null===(a=n.campaignType)||void 0===a?void 0:a.typeId)||y,h=null==e||null===(l=e.profileInformation)||void 0===l?void 0:l.slabRangeType,S={commissionAmountRetailer:"",commissionData:{}};if(null!=e&&null!==(o=e.commissionFormula)&&void 0!==o&&o.commissionFormulaDetails)return S;if(S.commissionCriteria=null==e||null===(s=e.commissionFormula)||void 0===s||null===(m=s.campaignCommissionFormula)||void 0===m||null===(c=m.commissionCriteria)||void 0===c?void 0:c.commissionCriteriaId.toString(),S.commissionDefinitionCriteria=null==e||null===(u=e.commissionFormula)||void 0===u||null===(d=u.campaignCommissionFormula)||void 0===d||null===(p=d.commissionDefinitionCriteria)||void 0===p?void 0:p.commissionDefinitionCriteriaId.toString(),"2"===S.commissionCriteria&&"1"===S.commissionDefinitionCriteria)S["".concat("NORMAL"===Z?"commissionAmountRetailer":"commissionPercentageRetailer")]=null==e||null===(g=e.commissionFormula)||void 0===g||null===(f=g.campaignCommissionFormula)||void 0===f||null===(v=f.commissionFormulaDetails[0])||void 0===v?void 0:v.commissionValue.toString();else if("2"===S.commissionCriteria&&"2"===S.commissionDefinitionCriteria){var b,N;null==e||null===(b=e.commissionFormula)||void 0===b||null===(N=b.campaignCommissionFormula)||void 0===N||N.commissionFormulaDetails.forEach((function(e){var t,n,a;if(4===C)S.commissionAmount=null==e||null===(t=e.commissionValue)||void 0===t?void 0:t.toString(),S.commissionData[null==e||null===(n=e.kpi)||void 0===n?void 0:n.name]=r(r({},!E&&{uid:null==e||null===(a=e.kpi)||void 0===a?void 0:a.uid}),{},{weightage:e.weightage});else if(3===C){var l,o,s,m;S.commissionData[null==e||null===(l=e.kpi)||void 0===l?void 0:l.name]||(S.commissionData[null==e||null===(m=e.kpi)||void 0===m?void 0:m.name]=[]),S.commissionData[null==e||null===(o=e.kpi)||void 0===o?void 0:o.name]=[].concat((0,i.Z)(S.commissionData[null==e||null===(s=e.kpi)||void 0===s?void 0:s.name]),[r(r(r(r(r({kpi:{name:e.kpi.name,uid:e.kpi.uid}},"PERCENTAGE"!==h&&{upperCount:e.rangeTo}),"PERCENTAGE"!==h&&{lowerCount:e.rangeFrom}),"PERCENTAGE"===h&&{upperPercentage:e.rangeTo}),"PERCENTAGE"===h&&{lowerPercentage:e.rangeFrom}),{},{commissionAmount:e.commissionValue})])}else{var c,u,d,p;"NORMAL"===Z?S.commissionData[null==e||null===(c=e.kpi)||void 0===c?void 0:c.name]=r(r({},!E&&{uid:null==e||null===(u=e.kpi)||void 0===u?void 0:u.uid}),{},{commissionAmountKpi:e.commissionValue.toString()}):S.commissionData[null==e||null===(d=e.kpi)||void 0===d?void 0:d.name]=r(r({},!E&&{uid:null==e||null===(p=e.kpi)||void 0===p?void 0:p.uid}),{},{commissionPercentageKpi:e.commissionValue.toString()})}}))}else if("1"===S.commissionCriteria&&"1"===S.commissionDefinitionCriteria){var w,x,I=[];null==e||null===(w=e.commissionFormula)||void 0===w||null===(x=w.campaignCommissionFormula)||void 0===x||x.commissionFormulaDetails.forEach((function(e){var t=null!=e&&e.additionalRetailers?"other":null==e?void 0:e.retailerTypeId;I.push(t),S.commissionData[t]="NORMAL"===Z?{commissionAmountRetailer:e.commissionValue.toString()}:{commissionPercentageRetailer:e.commissionValue.toString()}}))}else{var T,k,P=new Set;null==e||null===(T=e.commissionFormula)||void 0===T||null===(k=T.campaignCommissionFormula)||void 0===k||k.commissionFormulaDetails.forEach((function(e){if(4===C){var t,n,a=null!=e&&e.additionalRetailers?"other":null==e?void 0:e.retailerTypeId;P.add(a),S.commissionData[null==e||null===(t=e.kpi)||void 0===t?void 0:t.name]=r(r({},!E&&{uid:null==e||null===(n=e.kpi)||void 0===n?void 0:n.uid}),{},{weightage:null==e?void 0:e.weightage}),S.commissionData[!0===(null==e?void 0:e.additionalRetailers)?"other":null==e?void 0:e.retailerTypeId]={commissionAmountRetailer:null==e?void 0:e.commissionValue}}else{var i,l,o,s,m=null!=e&&e.additionalRetailers?"other":null==e?void 0:e.retailerTypeId;P.add(m),"NORMAL"===Z?S.commissionData["".concat(m,"_").concat(null==e||null===(i=e.kpi)||void 0===i?void 0:i.name)]=r(r({},!E&&{uid:null==e||null===(l=e.kpi)||void 0===l?void 0:l.uid}),{},{commissionAmountKpi:e.commissionValue.toString()}):S.commissionData["".concat(m,"_").concat(null==e||null===(o=e.kpi)||void 0===o?void 0:o.name)]=r(r({},!E&&{uid:null==e||null===(s=e.kpi)||void 0===s?void 0:s.uid}),{},{commissionPercentageKpi:e.commissionValue.toString()})}}))}return S},v=function(e){var t,n,a,i;return{campaignPayoutDisbursment:{notificationEvent:"CAMPAIGN_PAYOUT_DISBURSEMENT",smsTemplate:null==e||null===(t=e.notificationManagement)||void 0===t||null===(n=t.campaignNotificationManagement[0])||void 0===n?void 0:n.smsTemplate,smsTemplateFrequency:null,emailTemplate:null==e||null===(a=e.notificationManagement)||void 0===a||null===(i=a.campaignNotificationManagement[0])||void 0===i?void 0:i.emailTemplate,emailTemplateFrequency:null}}}},23664:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var a=n(13248),i=n(29609);const l=function(){var e=(0,a.useSnackbar)().enqueueSnackbar,t=(0,i.useTranslation)().t;function n(e){var n=t("anErrorOccurred");return["resultMessage","message","resultDescription"].forEach((function(t){e.hasOwnProperty(t)&&(n=e[t])})),n}return{showSuccessMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"success"})},showErrorMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"error"})},showInfoMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"info"})},showWarningMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"warning"})}}}},29089:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var a=n(19721),i=n(29609);const l=function(){var e=(0,a.useSnackbar)().enqueueSnackbar,t=(0,i.useTranslation)().t;function n(e){var n=t("anErrorOccurred");return["resultMessage","message","resultDescription"].forEach((function(t){e.hasOwnProperty(t)&&(n=e[t])})),n}return{showSuccessMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"success"})},showErrorMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"error"})},showInfoMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"info"})},showWarningMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"warning"})}}}}}]);