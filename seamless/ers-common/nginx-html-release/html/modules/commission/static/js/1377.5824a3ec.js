(self.webpackChunk_unified_commission=self.webpackChunk_unified_commission||[]).push([[1377],{49642:(e,t,a)=>{"use strict";a.d(t,{S$:()=>E,zY:()=>m,Pu:()=>p,dS:()=>f,WL:()=>g,mt:()=>d,lo:()=>s,Xt:()=>u});var n=a(61416);const l=a.n(n)();var r="/icms/v1/commission";function i(e,t){return t?l(r+e,t):l(r+e)}function o(e,t,a){return l(r+e,{method:t,body:a})}var s=function(){return i("/count-metrics")},c=a(34126),m=function(e){return o("","POST",e)},u=function(e){return o("/".concat("submit"),"PUT",e)},d=function(){return i("/data-source")},p=function(e){return i("/data-source/".concat(e,"/fields"))},f=function(e){return i("?".concat(c.stringify(e)))},g=function(e){return i("/".concat(e))},E=function(e){return o("/cancel/".concat(e),"POST")}},31175:(e,t,a)=>{"use strict";a.d(t,{C6:()=>q,Ow:()=>le,RL:()=>ke,WZ:()=>Oe,iT:()=>Ce,jw:()=>Z});var n,l=a(2411),r=a.n(l),i=a(74315),o=a(49642),s=a(23664),c=null===(n=window.config.commission)||void 0===n?void 0:n.commissionStatus;const m=function(e){var t=e.children,a=(0,s.Z)().showErrorMessage,n=l.useState(!1),r=(0,i.Z)(n,2),m=r[0],u=r[1],d=l.useState(null),p=(0,i.Z)(d,2),f=p[0],g=p[1],E=l.useCallback((function(){u(!0),(0,o.lo)().then((function(e){return g(function(e){return e.statusList.map((function(t,a){if(c.indexOf(t.key)>=0)switch(t.key){case"UNAPPROVED":t.key="Pending Approval";break;case"ACTIVE":t.key="Active";break;case"PENDING_FOR_REVIEW":t.key="Pending Review";break;default:delete e.statusList[a]}else delete e.statusList[a]})),e}(e.data))})).catch((function(e){return a(e)})).finally((function(){return u(!1)}))}),[]);return l.useEffect((function(){E()}),[E]),l.createElement(l.Fragment,null,t({loading:m,statusCount:f}))};var u=a(79692),d=a(12420),p=a(29609),f=a(33553),g=a(98069),E=a(70773),v=(0,u.Z)((function(e){return(0,d.Z)({stats:{marginRight:e.spacing(2)}})}));const y=function(e){var t=e.statusCount,a=e.loading,n=((0,p.useTranslation)().t,v());return!t||a?l.createElement(f.Z,{display:"flex",flexDirection:"row",borderColor:"grey.200"},Array.from({length:3}).map((function(e,t){return l.createElement(f.Z,{mr:2,key:"loading"+t},l.createElement(g.Z,{variant:"text",animation:"wave"}),l.createElement(g.Z,{variant:"rect",width:210,height:118,animation:"wave"}))}))):l.createElement(f.Z,{display:"flex",flexDirection:"row"},t.statusList.map((function(e){return l.createElement(E.Stat,{className:n.stats,label:e.key,value:e.value,key:e.key})})))},Z=function(){return r().createElement(m,null,(function(e){var t=e.loading,a=e.statusCount;return r().createElement(y,{loading:t,statusCount:a})}))},h=function(e){var t=e.children,a=l.useState([]),n=(0,i.Z)(a,2),r=n[0],c=n[1],m=l.useState(!1),u=(0,i.Z)(m,2),d=u[0],p=u[1],f=l.useState(0),g=(0,i.Z)(f,2),E=g[0],v=g[1],y=(0,s.Z)().showErrorMessage,Z=function(e){var t=l.useState(e.page),a=(0,i.Z)(t,2),n=a[0],r=a[1],o=l.useState(e.perPage),s=(0,i.Z)(o,2),c=s[0],m=s[1],u=l.useState(e.order),d=(0,i.Z)(u,2),p=d[0],f=d[1],g=l.useState(e.orderBy),E=(0,i.Z)(g,2),v=E[0],y=E[1],Z=l.useState(e.filter),h=(0,i.Z)(Z,2),b=h[0],S=h[1];return{page:n,perPage:c,order:p,orderBy:v,filter:b,onPageSizeChange:function(e){m(e)},onPageChange:function(e){r(e)},onOrderByChange:function(e){y(e)},onOrderChange:function(e){f(e)},onFilterChange:function(e,t,a){S({key:e,operator:t,value:a})},onReset:function(){r(e.page),m(e.perPage),y(e.orderBy),f(e.order),S(e.filter||{})}}}({page:0,perPage:20,order:"asc",orderBy:"",filter:{key:"",operator:"",value:""}}),h=Z.page,b=Z.perPage,S=Z.order,x=Z.orderBy,w=Z.filter,C=Z.onPageSizeChange,D=Z.onPageChange,N=Z.onOrderByChange,T=Z.onOrderChange,k=Z.onReset,F=Z.onFilterChange,O=function(e){if(e)return e.slice(0,10)},R=l.useCallback((function(){p(!0),(0,o.dS)({sort:"".concat(x,"_").concat(null==S?void 0:S.toLowerCase()),page:h,perPage:b,filter:"".concat(w.key,":").concat(w.operator,":").concat(w.value)}).then((function(e){var t=e.data.map((function(e){return{id:e.id,commissionName:e.commissionName,status:e.statusValue,validityFromDate:O(e.validityFromDate),validityToDate:O(e.validityToDate),nextDisbursementDate:O(e.nextDisbursementDate)}}));c(t||[])})).catch((function(e){return y(e)})).finally((function(){return p(!1)}))}),[h,S,x,b,w,E]);return l.useEffect(R,[R]),l.createElement(l.Fragment,null,t({loading:d,page:h,order:S,orderBy:x,commissions:r,perPage:b,filter:w,onPageSizeChange:C,onPageChange:D,onOrderByChange:N,onOrderChange:T,onFilterChange:F,onReset:k,setCancelUpdate:v}))};var b=a(55238),S=a(77277),x=a(38592),w=a(24276),C=a(90436),D=a(48049),N=a(41744),T=a.n(N),k=a(99781),F=a(66054),O=a(44104),R=a.n(O);const B="CANCELCOMMISSION";var I=(0,u.Z)((function(e){return(0,d.Z)({element:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},dialogWrapper:{textAlign:"center","& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginBottom:e.spacing(3)},btnSpace:{marginRight:e.spacing(2)}})}));const P=function(e){var t=e.commissions,a=e.loading,n=e.page,r=e.order,c=(e.perPage,e.orderBy),m=(e.filter,e.onPageChange),u=e.onPageSizeChange,d=e.onFilterChange,f=e.onOrderByChange,g=e.onOrderChange,v=e.setCancelUpdate,y=((0,b.Z)(e,["commissions","loading","page","order","perPage","orderBy","filter","onPageChange","onPageSizeChange","onFilterChange","onOrderByChange","onOrderChange","setCancelUpdate"]),(0,p.useTranslation)().t),Z=I(),h=R()().checkPermission,N=l.useState(0),O=(0,i.Z)(N,2),P=O[0],q=O[1],M=l.useState(!1),W=(0,i.Z)(M,2),L=W[0],V=W[1],j=(0,s.Z)(),_=j.showErrorMessage,H=j.showSuccessMessage,A=l.useCallback((function(e){e.filterModel.items[0].columnField&&e.filterModel.items[0].value&&e.filterModel.items[0].operatorValue?d(e.filterModel.items[0].columnField,e.filterModel.items[0].operatorValue,e.filterModel.items[0].value):d("","","")}),[]),z=function(){V(!1)},U=[{field:"commissionName",headerName:y("commissionName"),sortable:!0,flex:1,filterable:!0},{field:"status",headerName:y("commissionStatus"),sortable:!1,flex:1,filterable:!1},{field:"validityFromDate",headerName:y("validityFromDate"),sortable:!0,width:200,filterable:!1},{field:"validityToDate",headerName:y("validityToDate"),sortable:!0,flex:1,filterable:!1},{field:"nextDisbursementDate",headerName:y("nextDisbursementDate"),sortable:!0,flex:1,filterable:!1},{field:"actions",headerName:y("actions","Actions"),filterable:!1,sortable:!1,renderCell:function(e){return l.createElement("div",null,l.createElement(x.Z,{size:"small",color:"primary",variant:"text","aria-label":"commission action buttons"},l.createElement(S.Z,{color:"primary",component:D.Link,to:"/home/commission/dashboard/view/"+e.getValue("id")},l.createElement(w.Z,{fontSize:"small"},"visibility")),"DRAFT"==e.getValue("status")&&l.createElement(S.Z,{color:"primary",component:D.Link,to:"/home/commission/dashboard/edit/"+e.getValue("id")},l.createElement(w.Z,{fontSize:"small"},"edit")),h(B)&&"ACTIVE"===e.getValue("status")&&l.createElement(S.Z,{color:"primary",onClick:function(){V(!0),q(e.getValue("id"))}},l.createElement(k.Z,{fontSize:"small",style:{color:F.Z[400]}}))))},flex:1}];return l.createElement(l.Fragment,null,l.createElement(T(),{loading:a,onPageSizeChange:function(e){u(e.pageSize)},onPageChange:function(e){m(e.page+1)},columnBuffer:0,pagination:!0,paginationMode:"server",filterMode:"server",sortingMode:"server",page:n,rows:t,getRowId:function(e){return e.id},columns:U,onSortModelChange:function(e){e.sortModel[0]&&e.sortModel[0].sort?(f(e.sortModel[0].field),g(e.sortModel[0].sort)):(f(""),g("asc"))},sortModel:[{field:c,sort:r}],onFilterModelChange:A,sortingOrder:["asc","desc"]}),l.createElement(E.SeamlessDialog,{open:L,onClose:z,className:Z.dialogWrapper,maxWidth:"sm"},l.createElement(l.Fragment,null,l.createElement("div",{className:Z.modalContentSpacing},l.createElement(C.Z,{gutterBottom:!0,id:"transition-modal-title",variant:"h6",className:Z.fontHeavy},y("cancelCommissionConfirmationTitle")),l.createElement(C.Z,{id:"transition-modal-description",variant:"body1"},y("cancelCommissionConfirmationText"))),l.createElement("div",{className:Z.modalContentSpacing},l.createElement(E.SeamlessButton,{type:"button",variant:"outlined",color:"primary",className:Z.btnSpace,onClick:z},y("noConfirmationButton")),l.createElement(E.SeamlessButton,{type:"button",variant:"contained",color:"primary",onClick:function(){(0,o.S$)(P).then((function(e){V(!1),0===e.resultCode?H(e.resultDescription):_(e.resultDescription),v(Math.random())})).catch((function(e){return _(e)}))}},y("yesConfirmationButton"))))))},q=function(){return l.createElement(h,null,(function(e){return l.createElement(P,e)}))};var M=a(77114),W=a(8526),L=a(6277),V=a(60905),j=a(7560);const _=function(e){var t=(0,p.useTranslation)().t,a=[{key:t("choose"),value:""},{key:t("rule_based"),value:"rule_based"}];return l.createElement(E.SeamlessDropDown,(0,j.Z)({},e,{options:a}))};var H=a(61564),A=a(39590),z=a(19258),U=a(94339),Y=a(24579),X=(0,u.Z)((function(e){return(0,d.Z)({elements:{margin:e.spacing(1)},conditionWrapper:{display:"flex",justifyContent:"space-between",alignItems:"center"}})}));const K=function(e){var t=e.data,a=e.conditionId,n=X(),r=(0,p.useTranslation)().t;return l.createElement(f.Z,{display:"flex",flexDirection:"row",justifyContent:"flex-end",border:1,borderColor:"grey.200",m:2,p:2},l.createElement(V.Z,{container:!0,spacing:4,className:n.conditionWrapper},l.createElement(V.Z,{item:!0,xs:12,sm:3},l.createElement("h4",null,l.createElement("b",null,r("condition")," ",a+1))),l.createElement(f.Z,{display:"flex",flexDirection:"row"},l.createElement(U.Z,{elevation:0},l.createElement(Y.Z,null,l.createElement(C.Z,{variant:"body1"},r("LHS")),l.createElement(C.Z,{variant:"caption"},t.lhs)))),l.createElement(f.Z,{display:"flex",flexDirection:"row"},l.createElement(U.Z,{elevation:0},l.createElement(Y.Z,null,l.createElement(C.Z,{variant:"body1"},r("operator")),l.createElement(C.Z,{variant:"caption"},t.operator)))),l.createElement(f.Z,{display:"flex",flexDirection:"row"},l.createElement(U.Z,{elevation:0},l.createElement(Y.Z,null,l.createElement(C.Z,{variant:"body1"},r("RHS")),l.createElement(C.Z,{variant:"caption"},t.rhs))))))};var G=(0,u.Z)((function(e){return(0,d.Z)({elements:{margin:e.spacing(1)},spacingTop:{marginTop:e.spacing(3)},fullWidth:{width:"100%"}})}));const $=function(e){var t=e.data,a=e.subRuleId,n=(0,p.useTranslation)().t,r=G();return l.createElement(l.Fragment,null,l.createElement(V.Z,{container:!0,className:r.spacingTop},l.createElement(V.Z,{container:!0,spacing:3},l.createElement(V.Z,{item:!0,xs:12,sm:12},l.createElement(C.Z,{variant:"subtitle2",color:"primary",style:{marginBottom:10}},n("Subrule")," ",a+1))),l.createElement(V.Z,{container:!0,spacing:3},l.createElement(V.Z,{item:!0,xs:12,sm:10},t.conditions.map((function(e,t){return l.createElement(K,{key:"condition-".concat(t),data:e,conditionId:t})}))))))};var J=(0,u.Z)((function(e){return(0,d.Z)({elements:{margin:e.spacing(1)},spacingTop:{marginTop:e.spacing(3)},fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{textTransform:"capitalize",fontSize:14},rowSpacing:{marginBottom:e.spacing(.5)},calculationWrapper:{display:"flex",justifyContent:"space-between",alignItems:"center"}})}));const Q=function(e){var t=e.data,a=e.index,n=(0,p.useTranslation)().t,r=J();return l.createElement(l.Fragment,null,l.createElement(V.Z,{container:!0,spacing:3},l.createElement(V.Z,{item:!0,xs:12,sm:9},l.createElement(C.Z,{variant:"subtitle1",color:"primary",style:{marginBottom:10}},n("rule")," ",a+1))),l.createElement(V.Z,{container:!0,spacing:3,className:r.rowSpacing},l.createElement(V.Z,{item:!0,xs:12,sm:4},l.createElement(C.Z,{className:r.fieldHeading},n("tableName"))),l.createElement(V.Z,{item:!0,xs:12,sm:4},l.createElement(C.Z,{className:r.fieldValue},t.tableName))),l.createElement(f.Z,null,t.subRules.map((function(e,t){return l.createElement($,{key:"subrule-".concat(t),data:e,subRuleId:t})}))),l.createElement(f.Z,{display:"flex",flexDirection:"row",justifyContent:"flex-end",border:1,borderColor:"grey.200",m:2,p:2},l.createElement(V.Z,{container:!0,spacing:4,className:r.calculationWrapper},l.createElement(f.Z,{display:"flex",flexDirection:"row"},l.createElement(U.Z,{elevation:0},l.createElement(Y.Z,null,l.createElement(C.Z,{variant:"body1"},n("calculation"))))),l.createElement(f.Z,{display:"flex",flexDirection:"row"},l.createElement(U.Z,{elevation:0},l.createElement(Y.Z,null,l.createElement(C.Z,{variant:"body1"},n("type")),l.createElement(C.Z,{variant:"caption"},t.calculation.type)))),l.createElement(f.Z,{display:"flex",flexDirection:"row"},l.createElement(U.Z,{elevation:0},l.createElement(Y.Z,null,l.createElement(C.Z,{variant:"body1"},n("LHS")),l.createElement(C.Z,{variant:"caption"},t.calculation.lhs)))),l.createElement(f.Z,{display:"flex",flexDirection:"row"},l.createElement(U.Z,{elevation:0},l.createElement(Y.Z,null,l.createElement(C.Z,{variant:"body1"},n("operator")),l.createElement(C.Z,{variant:"subtitle2"},t.calculation.operator)))),l.createElement(f.Z,{display:"flex",flexDirection:"row"},l.createElement(U.Z,{elevation:0},l.createElement(Y.Z,null,l.createElement(C.Z,{variant:"body1"},n("RHS")),l.createElement(C.Z,{variant:"caption"},t.calculation.rhs)))))))};var ee=(0,u.Z)((function(e){return(0,d.Z)({elements:{margin:e.spacing(1)},spacingTop:{marginTop:e.spacing(3)},fullWidth:{width:"100%"}})}));const te=function(e){var t=e.rules,a=ee();return l.createElement(l.Fragment,null,l.createElement(V.Z,{container:!0,className:a.spacingTop},l.createElement(V.Z,{container:!0,spacing:3},l.createElement(V.Z,{item:!0,xs:12,sm:8},t.map((function(e,t){return l.createElement(Q,{key:"rule-".concat(t),data:e,index:t})}))))))};var ae=a(38670);var ne=(0,u.Z)((function(e){return(0,d.Z)({button:{},sectionSeparator:{marginTop:e.spacing(3),marginBottom:e.spacing(2),marginLeft:e.spacing(1)},element:{margin:e.spacing(1)},dateField:{margin:e.spacing(1),width:"100%",marginTop:e.spacing(1)},dividerSpacing:{marginBottom:e.spacing(3)},btnSpacing:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},spacingTop:{marginTop:e.spacing(3)},fullWidth:{width:"100%"}})}));const le=function(e){var t,a,n,r,o=e.data,c=e.onFormSubmit,m=e.view,u=e.loading,d=ne(),g=(0,p.useTranslation)().t,v=(0,ae.useSelector)((function(e){return e.auth}),ae.shallowEqual).user,y=(0,s.Z)().showWarningMessage,Z=l.useState(!1),h=(0,i.Z)(Z,2),b=(h[0],h[1],l.useState(!1)),S=(0,i.Z)(b,2),x=(S[0],S[1]),w=l.useState(0),D=(0,i.Z)(w,2),N=D[0],T=D[1],k=l.useState(""),F=(0,i.Z)(k,2),O=F[0],R=(F[1],l.useState([])),B=(0,i.Z)(R,2),I=B[0],P=B[1],q=window.config.currency||"none",j=window.config.customer||"none",U=(null===(t=window.config)||void 0===t||null===(a=t.commission)||void 0===a?void 0:a.walletType)||"none",Y=null!=v&&v.requestedPrincipalId?null==v?void 0:v.requestedPrincipalId:"",X=window.config.openCalendarWith||"year",K=[W.Ry().shape({commissionName:W.Z_().required(),commissionType:W.Z_().required(),calculationFrequency:W.Z_().required(),disbursementFrequency:W.Z_().required()})],G=(0,M.useFormik)({initialValues:o,onSubmit:function(e){return c&&c(e,O)},validationSchema:K[N],enableReinitialize:!0}),$=function(e){Q.customerId=j,Q.currency=q,Q.walletType=U,Q.createdBy=Y,Q.updatedBy=Y,c(Q,e)},J=[{key:g("choose"),value:""},{key:g("qtr_hourly"),value:"qtr_hourly"}],Q=G.values,ee=G.handleChange,le=G.validateForm,re=[{title:g("schemeDetailsInfo"),caption:g("schemeDetailsInfoDescription"),label:g("schemeDetailsInfoLabel")},{title:g("rulesData"),caption:g("rulesDataDescription"),label:g("rulesDataLabel")},{title:g("previewInfo"),caption:g("previewInfoDescription"),label:g("previewInfoLabel")}],ie=re.map((function(e){return{label:e.label}}));return l.createElement(E.SeamlessContainer,{title:null===(n=re[N])||void 0===n?void 0:n.title,description:null===(r=re[N])||void 0===r?void 0:r.caption},l.createElement(E.SeamlessStepper,{steps:ie,components:{Control:function(e){var t=e.goNext,a=e.goPrev,n=e.disableFirst,r=e.disableLast;return l.createElement(f.Z,null,l.createElement("div",{className:(0,L.default)(d.dividerSpacing)}),l.createElement(E.SeamlessButton,{onClick:function(){a(),T(N-1)},disabled:n,className:(0,L.default)(d.element,d.button),color:"primary",variant:"contained"},g("previous")),l.createElement(E.SeamlessButton,{className:(0,L.default)(d.element,d.btnSpacing,d.button),onClick:function(){le().then((function(e){var a=Object.values(e);a.length>0?y(a[0]):(t(),T(N+1),N+1>2&&x(!0))})),P(Q.rules)},disabled:r,color:"primary",variant:"contained"},g("next")),l.createElement("div",{className:(0,L.default)(d.dividerSpacing)}))}}},l.createElement(V.Z,{container:!0,className:d.spacingTop},l.createElement(V.Z,{container:!0,spacing:3},l.createElement(V.Z,{item:!0,xs:12},l.createElement(C.Z,{variant:"subtitle1",color:"primary"},g("schemeDetailsInfo")))),l.createElement(V.Z,{container:!0,spacing:3},l.createElement(V.Z,{item:!0,xs:12,sm:6},l.createElement(E.SeamlessInput,{required:!0,className:(0,L.default)(d.element),fullWidth:!0,name:"commissionName",value:Q.commissionName,onChange:ee,label:g("commissionName"),disabled:m}))),l.createElement(V.Z,{container:!0,spacing:3},l.createElement(V.Z,{item:!0,xs:12,sm:8},l.createElement(E.SeamlessInput,{className:(0,L.default)(d.element),fullWidth:!0,name:"description",value:Q.description,multiline:!0,rows:4,rowsMax:4,onChange:ee,label:g("description"),disabled:m}))),l.createElement(V.Z,{container:!0,spacing:3},l.createElement(V.Z,{item:!0,xs:12,sm:4},l.createElement(_,{required:!0,fullWidth:!0,id:"commission-types-drop-down",className:(0,L.default)(d.element),helperText:g("selectCommissionType"),value:Q.commissionType,label:g("commissionType"),name:"commissionType",disabled:m,onChange:ee})),l.createElement(V.Z,{item:!0,xs:12,sm:4},l.createElement(E.SeamlessInput,{required:!0,className:(0,L.default)(d.element),fullWidth:!0,name:"walletType",value:U,onChange:ee,label:g("walletType"),disabled:!0}))),l.createElement(V.Z,{container:!0,spacing:3},l.createElement(V.Z,{item:!0,xs:12,sm:4},l.createElement(H.M,{utils:z.Z},l.createElement(A.e,{required:!0,fullWidth:!0,autoOk:!0,className:(0,L.default)(d.dateField),views:["year","month","date"],openTo:X,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"validityFromDate",label:g("validityFromDate"),value:Q.validityFromDate,onChange:function(e){return ee({target:{value:null==e?void 0:e.toISOString(),name:"validityFromDate"}})},KeyboardButtonProps:{"aria-label":"change date"},disabled:m}))),l.createElement(V.Z,{item:!0,xs:12,sm:4},l.createElement(H.M,{utils:z.Z},l.createElement(A.e,{required:!0,fullWidth:!0,autoOk:!0,className:(0,L.default)(d.dateField),views:["year","month","date"],openTo:X,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"validityToDate",label:g("validityToDate"),value:Q.validityToDate,onChange:function(e){return ee({target:{value:null==e?void 0:e.toISOString(),name:"validityToDate"}})},KeyboardButtonProps:{"aria-label":"change date"},disabled:m})))),l.createElement(V.Z,{container:!0,spacing:3},l.createElement(V.Z,{item:!0,xs:12,sm:4},l.createElement(E.SeamlessDropDown,{id:"calculation-frequency-drop-down",required:!0,fullWidth:!0,disabled:m,className:(0,L.default)(d.element),label:g("calculationFrequency"),helperText:g("selectCalculationFrequency"),options:J.map((function(e){return{value:e.value,key:e.key}})),name:"calculationFrequency",value:Q.calculationFrequency,onChange:ee})),l.createElement(V.Z,{item:!0,xs:12,sm:4},l.createElement(E.SeamlessDropDown,{id:"disbursement-frequency-drop-down",required:!0,fullWidth:!0,disabled:m,className:(0,L.default)(d.element),label:g("disbursementFrequency"),helperText:g("selectDisbursementFrequency"),options:J.map((function(e){return{value:e.value,key:e.key}})),name:"disbursementFrequency",value:Q.disbursementFrequency,onChange:ee})))),l.createElement(V.Z,{container:!0,className:d.spacingTop},l.createElement(Ce,{rules:I,onUpdate:function(e){Q.rules=e,P(e)},view:m})),l.createElement(V.Z,{container:!0,className:d.spacingTop},l.createElement(V.Z,{container:!0,spacing:3},l.createElement(V.Z,{item:!0,xs:12},l.createElement(C.Z,{variant:"subtitle1",color:"primary"},g("schemeDetailsInfo")))),l.createElement(V.Z,{container:!0,spacing:3},l.createElement(V.Z,{item:!0,xs:12,sm:6},l.createElement(E.SeamlessInput,{className:(0,L.default)(d.element),fullWidth:!0,name:"schemeName",value:Q.commissionName,onChange:ee,label:g("schemeName"),disabled:!0}))),l.createElement(V.Z,{container:!0,spacing:3},l.createElement(V.Z,{item:!0,xs:12,sm:6},l.createElement(E.SeamlessInput,{className:(0,L.default)(d.element),fullWidth:!0,name:"commissionType",value:Q.commissionType,onChange:ee,label:g("commissionType"),disabled:!0}))),l.createElement(V.Z,{container:!0,spacing:3},l.createElement(V.Z,{item:!0,xs:12,sm:4},l.createElement(H.M,{utils:z.Z},l.createElement(A.e,{fullWidth:!0,autoOk:!0,className:(0,L.default)(d.dateField),views:["year","month","date"],openTo:X,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"validityFromDate",label:g("validityFromDate"),value:Q.validityFromDate,onChange:function(e){return ee({target:{value:null==e?void 0:e.toISOString(),name:"validityFromDate"}})},KeyboardButtonProps:{"aria-label":"change date"},disabled:!0}))),l.createElement(V.Z,{item:!0,xs:12,sm:4},l.createElement(H.M,{utils:z.Z},l.createElement(A.e,{fullWidth:!0,autoOk:!0,className:(0,L.default)(d.dateField),views:["year","month","date"],openTo:X,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"validityToDate",label:g("validityToDate"),value:Q.validityToDate,onChange:function(e){return ee({target:{value:null==e?void 0:e.toISOString(),name:"validityToDate"}})},KeyboardButtonProps:{"aria-label":"change date"},disabled:!0})))),l.createElement(V.Z,{container:!0,spacing:3},l.createElement(V.Z,{item:!0,xs:12,sm:4},l.createElement(E.SeamlessInput,{className:(0,L.default)(d.element),fullWidth:!0,name:"calculationFrequency",value:Q.calculationFrequency,onChange:ee,label:g("calculationFrequency"),disabled:!0})),l.createElement(V.Z,{item:!0,xs:12,sm:4},l.createElement(E.SeamlessInput,{className:(0,L.default)(d.element),fullWidth:!0,name:"disbursementFrequency",value:Q.disbursementFrequency,onChange:ee,label:g("disbursementFrequency"),disabled:!0}))),l.createElement(V.Z,{container:!0,spacing:3},l.createElement(V.Z,{item:!0,xs:12,sm:12},l.createElement(te,{rules:Q.rules}))),l.createElement(V.Z,{container:!0,spacing:3},l.createElement(V.Z,{item:!0,xs:12,sm:8},l.createElement(E.SeamlessInput,{className:(0,L.default)(d.element),fullWidth:!0,name:"description",multiline:!0,rows:4,rowsMax:4,onChange:ee,label:g("description"),disabled:!0,value:Q.description}))))),!m&&l.createElement(f.Z,{display:"flex",flexDirection:"row-reverse",justifyContent:"center"},l.createElement(E.SeamlessButton,{onClick:function(e){return $("publish")},className:(0,L.default)(d.element,d.button),color:"primary",variant:"contained",disabled:u||N<2},g("publishButton")),l.createElement(E.SeamlessButton,{onClick:function(e){return $("draft")},className:(0,L.default)(d.element,d.button),color:"primary",variant:"contained"},g("draftButton"))))};var re=a(51119),ie=a(61837),oe=a(11746);const se=function(e){var t=e.name,a=e.value,n=e.handleChange,r=e.disabled,o=void 0!==r&&r,c=e.required,m=void 0!==c&&c,u=e.columnList,d=l.useState(!1),f=(0,i.Z)(d,2),g=f[0],v=(f[1],(0,s.Z)()),y=(v.showErrorMessage,v.showSuccessMessage,v.showInfoMessage,v.showWarningMessage,(0,p.useTranslation)().t);return l.createElement(l.Fragment,null,l.createElement(E.SeamlessDropDown,{id:"columns-drop-down",fullWidth:!0,"aria-multiselectable":!0,disabled:o||g,required:m,label:y("columnName"),helperText:y("selectColumn"),options:[{id:"Choose",name:""}].concat((0,oe.Z)(u)).map((function(e){return{value:e.name,key:e.id}})),name:t,value:a,onChange:n}))},ce=function(e){var t=e.name,a=e.value,n=e.handleChange,r=e.disabled,i=(0,p.useTranslation)().t;return l.createElement(l.Fragment,null,l.createElement(E.SeamlessDropDown,{id:"condition-operator-drop-down",fullWidth:!0,"aria-multiselectable":!0,required:!0,label:i("operatorName"),helperText:i("selectOperator"),options:[{key:"Choose",value:""}].concat([{key:"equals",value:"equals"},{key:"not equals to",value:"Not equals to"},{key:"greater than",value:"Greater than"},{key:"less than",value:"Less than"},{key:"greater than equals to",value:"Greater than equals to"},{key:"less than equals to",value:"Less than equals to"}]).map((function(e){return{value:e.value,key:e.key}})),name:t,value:a,onChange:n,disabled:r}))};var me=(0,u.Z)((function(e){return(0,d.Z)({elements:{margin:e.spacing(1)}})}));const ue=function(e){var t=e.data,a=e.ruleId,n=e.subRuleId,r=e.conditionId,i=e.view,o=e.columns,s=e.updateCondition,c=e.deleteData,m=me(),u=(0,p.useTranslation)().t,d=function(){s(r,n,a,t)};return l.createElement(f.Z,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",border:1,borderColor:"grey.200",m:2,p:2},l.createElement(V.Z,{container:!0,spacing:4,style:{justifyContent:"space-between",alignItems:"center"}},l.createElement(V.Z,{item:!0,xs:12,sm:2},l.createElement(C.Z,{variant:"caption",color:"primary",style:{marginBottom:10}},u("condition")," ",r+1)),l.createElement(V.Z,{item:!0,xs:12,sm:3},l.createElement(se,{name:"lhs",value:t.lhs,handleChange:function(e){t.lhs=e.target.value,d()},disabled:i,required:!0,columnList:o})),l.createElement(V.Z,{item:!0,xs:12,sm:3},l.createElement(ce,{name:"columnName",value:t.operator,handleChange:function(e){t.operator=e.target.value,d()},disabled:i})),l.createElement(V.Z,{item:!0,xs:12,sm:3,style:{marginBottom:20}},l.createElement(E.SeamlessInput,{required:!0,value:t.rhs,className:m.elements,fullWidth:!0,placeholder:"value",label:u("value"),onChange:function(e){t.rhs=e.target.value,d()},disabled:i})),!i&&l.createElement(V.Z,{item:!0,xs:12,sm:1},l.createElement(ie.Z,{color:"primary",style:{padding:0},className:m.elements,disabled:i,type:"button",onClick:function(){c(a,{type:"DELETE_CONDITION"},n,r)}},l.createElement(w.Z,null,"delete")))))};var de=(0,u.Z)((function(e){return(0,d.Z)({elements:{margin:e.spacing(1)},spacingTop:{marginTop:e.spacing(3)},wrapper:{padding:0},submenuWrapper:{padding:"18px 0 0 27px",borderBottom:1,borderBottomStyle:"solid",borderColor:"#adaaaa",margin:"auto"}})}));const pe=function(e){var t=e.data,a=e.ruleId,n=e.subRuleId,r=e.view,i=e.columns,o=e.updateSubRule,c=e.updateCondition,m=e.addData,u=e.deleteData,d=de(),f=(0,p.useTranslation)().t,g=(0,s.Z)();return g.showErrorMessage,g.showSuccessMessage,g.showInfoMessage,g.showWarningMessage,l.createElement(l.Fragment,null,l.createElement(V.Z,{container:!0,className:d.spacingTop},l.createElement(V.Z,{container:!0,spacing:3},l.createElement(V.Z,{item:!0,xs:12,sm:9,style:{padding:"18px 0 0 27px"}},l.createElement(C.Z,{variant:"subtitle2",color:"primary",style:{marginBottom:10}},f("Subrule")," ",n+1))),l.createElement(V.Z,{container:!0,spacing:3},l.createElement(V.Z,{item:!0,xs:12,sm:10,className:d.submenuWrapper},!r&&l.createElement(E.SeamlessButton,{variant:"contained",color:"secondary",className:d.elements,onClick:function(e){m({type:"ADD_CONDITION"},a,n),o(a,n,t)},disabled:r},"Add Condition"),t.conditions.map((function(e,t){return l.createElement(ue,{key:"condition-".concat(t),data:e,ruleId:a,subRuleId:n,conditionId:t,view:r,columns:i,deleteData:u,updateCondition:c})}))),!r&&l.createElement(V.Z,{item:!0,xs:12,sm:1},l.createElement(ie.Z,{color:"primary",className:(0,L.default)(d.elements),disabled:r,type:"button",onClick:function(){u(a,{type:"DELETE_SUBRULE"},n)}},l.createElement(w.Z,null,"delete"))))))},fe=function(e){var t=e.name,a=e.value,n=e.handleChange,r=e.disabled,c=void 0!==r&&r,m=e.required,u=void 0!==m&&m,d=l.useState([]),f=(0,i.Z)(d,2),g=f[0],v=f[1],y=l.useState(!1),Z=(0,i.Z)(y,2),h=Z[0],b=Z[1],S=(0,s.Z)().showErrorMessage,x=(0,p.useTranslation)().t;return l.useEffect((function(){b(!0),(0,o.mt)().then((function(e){return v(e.data)})).catch((function(e){return S(e)})).finally((function(){return b(!1)}))}),[]),l.createElement(E.SeamlessDropDown,{id:"data-source-drop-down",fullWidth:!0,"aria-multiselectable":!0,disabled:c||h,required:u,label:x("tableName"),helperText:x("selectDataSource"),options:[{id:"Choose",name:""}].concat((0,oe.Z)(g)).map((function(e){return{value:e.name,key:e.id}})),name:t,value:a,onChange:n})},ge=function(e){var t=e.name,a=e.value,n=e.handleChange,r=e.disabled,i=e.lock,o=(0,p.useTranslation)().t;return l.createElement(l.Fragment,null,l.createElement(E.SeamlessDropDown,{id:"calculation-operator-drop-down",fullWidth:!0,"aria-multiselectable":!0,required:!0,label:o("conditionExpression"),helperText:o("selectExpression"),options:[{key:"Choose",value:""}].concat([{key:"percent",value:"%"},{key:"multipliy",value:"*"},{key:"divide",value:"/"},{key:"add",value:"+"}]).map((function(e){return{value:e.value,key:e.key}})),name:t,defaultValue:a,onChange:n,disabled:r||i}))},Ee=function(e){var t=e.name,a=e.value,n=e.handleChange,r=e.disabled,i=e.lock,o=(0,p.useTranslation)().t;return l.createElement(l.Fragment,null,l.createElement(E.SeamlessDropDown,{id:"calculation-lhs-drop-down",fullWidth:!0,required:!0,label:o("columnName"),helperText:o("selectColumn"),options:[{key:"Choose",value:""}].concat([{key:"sum of amount",value:"sum_amount"},{key:"sum of count",value:"sum_count"}]).map((function(e){return{value:e.value,key:e.key}})),name:t,defaultValue:a,onChange:n,disabled:r||i}))},ve=function(e){var t=e.name,a=e.value,n=e.handleChange,r=e.disabled,i=(0,p.useTranslation)().t;return l.createElement(l.Fragment,null,l.createElement(E.SeamlessDropDown,{id:"calculation-type-drop-down",fullWidth:!0,"aria-multiselectable":!0,required:!0,label:i("calculationType"),helperText:i("selectType"),options:[{key:"Choose",value:""}].concat([{key:"formula-based",value:"FORMULA-BASED"},{key:"fixed",value:"FIXED"}]).map((function(e){return{value:e.value,key:e.key}})),name:t,defaultValue:a,onChange:n,disabled:r}))};function ye(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ze(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(a),!0).forEach((function(t){(0,re.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ye(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var he=(0,u.Z)((function(e){return(0,d.Z)({elements:{margin:e.spacing(1)},spacingTop:{marginTop:e.spacing(3)},deleteWrapper:{display:"flex",justifyContent:"flex-end",paddingRight:"16px",borderBottom:1,borderBottomStyle:"solid",borderColor:"#adaaaa"},buttonWrapper:{marginRight:"16px",float:"right"}})}));const be=function(e){var t=e.data,a=e.index,n=e.view,r=e.updateRule,c=e.updateSubRule,m=e.updateCondition,u=e.addData,d=e.deleteData,g=(0,p.useTranslation)().t,v=he(),y=l.useState(!1),Z=(0,i.Z)(y,2),h=(Z[0],Z[1]),b=l.useState([]),S=(0,i.Z)(b,2),x=S[0],D=S[1],N=l.useState(!1),T=(0,i.Z)(N,2),k=T[0],F=T[1],O=(0,s.Z)().showErrorMessage;l.useEffect((function(){B(t.tableName)}),[t]);var R=function(){r(a,Ze(Ze({},t),{},{tableName:t.tableName,subRules:t.subRules,calculation:t.calculation}))},B=function(e){h(!0),""!==e?(0,o.Pu)(e).then((function(e){return D(e.data)})).catch((function(e){return O(e)})).finally((function(){return h(!1)})):D([])};return l.createElement(l.Fragment,null,l.createElement(V.Z,{container:!0,spacing:3},l.createElement(V.Z,{item:!0,xs:12,sm:9,style:{padding:"18px 0 0 27px"}},l.createElement(C.Z,{variant:"subtitle1",color:"primary",style:{marginBottom:10}},g("rule")," ",a+1))),l.createElement(f.Z,{width:"80%",display:"flex",flexDirection:"row",border:1,borderColor:"grey.200",boxShadow:"1px 1px 4px 1px #8888",borderRadius:6,m:2,p:2},l.createElement(fe,{name:"tableName",value:t.tableName,handleChange:function(e){!function(e){t.tableName=e.target.value,B(t.tableName)}(e),R()},disabled:n,required:!0})),l.createElement(V.Z,{container:!0,style:{justifyContent:"right"}},!n&&l.createElement(E.SeamlessButton,{className:v.buttonWrapper,variant:"contained",color:"secondary",onClick:function(e){u({type:"ADD_SUBRULE"},a),R()},disabled:n},"Add SubRule"),t.subRules.map((function(e,t){return l.createElement(pe,{key:"subrule-".concat(t),data:e,ruleId:a,subRuleId:t,view:n,columns:x,addData:u,deleteData:d,updateSubRule:c,updateCondition:m})}))),l.createElement("div",{style:{marginTop:30}},l.createElement(f.Z,{display:"flex",flexDirection:"row",justifyContent:"space-between",border:1,borderColor:"grey.200",m:2,p:2},l.createElement(V.Z,{container:!0,spacing:2,style:{justifyContent:"space-between",alignItems:"center"}},l.createElement(V.Z,{item:!0,xs:12,sm:1},l.createElement(C.Z,{variant:"caption",color:"primary",style:{marginBottom:10}},l.createElement("b",null,g("calculation")))),l.createElement(V.Z,{item:!0,xs:12,sm:3},l.createElement(ve,{name:"type",value:t.calculation.type,handleChange:function(e){var a;t.calculation.type=e.target.value,a=t.calculation.type,F("FIXED"===a),R()},disabled:n})),l.createElement(V.Z,{item:!0,xs:12,sm:3},l.createElement(Ee,{name:"lhs",value:t.calculation.lhs,handleChange:function(e){t.calculation.lhs=e.target.value,R()},disabled:n,lock:k})),l.createElement(V.Z,{item:!0,xs:12,sm:3},l.createElement(ge,{name:"operator",value:t.calculation.operator,handleChange:function(e){t.calculation.operator=e.target.value,R()},disabled:n,lock:k})),l.createElement(V.Z,{item:!0,xs:12,sm:2,style:{marginBottom:20}},l.createElement(E.SeamlessInput,{required:!0,defaultValue:t.calculation.rhs,className:v.elements,fullWidth:!0,label:g("value"),placeholder:"value",onChange:function(e){t.calculation.rhs=e.target.value,R()},disabled:n}))))),!n&&l.createElement(V.Z,{item:!0,xs:12,sm:12,className:v.deleteWrapper},l.createElement(ie.Z,{color:"primary",disabled:n,type:"button",onClick:function(e){return d(a,{type:"DELETE_RULE"})}},l.createElement(w.Z,null,"delete"))))};function Se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function xe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(a),!0).forEach((function(t){(0,re.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Se(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var we=(0,u.Z)((function(e){return(0,d.Z)({elements:{margin:e.spacing(1)},spacingBottom:{marginBottom:e.spacing(2)},buttonWrapper:{marginRight:"16px",float:"right"}})}));const Ce=function(e){var t=e.rules,a=e.onUpdate,n=e.view,o=we(),s=function(e,t,a,n){var l=r().useState(e),o=(0,i.Z)(l,2),s=o[0],c=o[1];return{data:s,addRulesData:function(e,l,r){switch(e.type){case"ADD_RULE":i=xe({},t),c([].concat((0,oe.Z)(s),[i]));break;case"ADD_SUBRULE":!function(e){var t=xe({},a);s.map((function(a,n){n===e&&a.subRules.push(t)}))}(l);break;case"ADD_CONDITION":!function(e,t){var a=xe({},n);s.map((function(n,l){l===e&&n.subRules.map((function(e,n){n===t&&e.conditions.push(a)}))}))}(l,r)}var i},updateRule:function(e,t){c(s.map((function(a,n){return n===e?xe(xe({},a),{},{tableName:t.tableName,subRules:t.subRules,calculation:t.calculation}):a})))},updateSubRule:function(e,t,a){c(s.map((function(n,l){return l===e?xe(xe({},n),{},{subRules:(0,oe.Z)(n.subRules.map((function(e,n){return n==t?xe(xe({},e),{},{conditions:a.conditions}):e})))}):n})))},updateCondition:function(e,t,a,n){c(s.map((function(l,r){return r===a?xe(xe({},l),{},{subRules:(0,oe.Z)(l.subRules.map((function(a,l){return l===t?xe(xe({},a),{},{conditions:(0,oe.Z)(a.conditions.map((function(t,a){return a===e?xe(xe({},t),{},{lhs:n.lhs,rhs:n.rhs,operator:n.operator}):t})))}):a})))}):l})))},deleteRulesData:function(e,t,a,n){switch(t.type){case"DELETE_RULE":!function(e){var t=s.filter((function(t,a){return a!==e}));c(s=t)}(e);break;case"DELETE_SUBRULE":!function(e,t){c(s.map((function(a,n){if(n===e){var l=a.subRules.filter((function(e,a){return a!==t}));return a.subRules=l,a}return a})))}(e,a);break;case"DELETE_CONDITION":!function(e,t,a){c(s.map((function(n,l){return l===e?xe(xe({},n),{},{subRules:(0,oe.Z)(n.subRules.map((function(e,n){if(n==t){var l=e.conditions.filter((function(e,t){return t!==a}));return e.conditions=l,e}return e})))}):n})))}(e,a,n)}}}}(t,{tableName:"",calculation:{type:"",lhs:"",operator:"",rhs:""},subRules:[]},{conditions:[]},{lhs:"",operator:"",rhs:""}),c=s.data,m=s.addRulesData,u=s.updateRule,d=s.updateSubRule,p=s.updateCondition,f=s.deleteRulesData;l.useEffect((function(){g()}),[c]);var g=function(){a(c)};return l.createElement(V.Z,{container:!0,spacing:2,className:o.spacingBottom},l.createElement(V.Z,{item:!0,xs:12,sm:12},!n&&l.createElement(E.SeamlessButton,{className:o.buttonWrapper,variant:"contained",color:"secondary",onClick:function(e){return m({type:"ADD_RULE"})},disabled:n},"Add Rule"),c.map((function(e,t){return l.createElement(be,{key:"rule-".concat(t),data:e,index:t,view:n,addData:m,deleteData:f,updateRule:u,updateSubRule:d,updateCondition:p})}))))};(0,u.Z)((function(e){return(0,d.Z)({element:{marginTop:e.spacing(2),marginBottom:e.spacing(2)}})}));const De=function(e){var t=e.children,a=e.id,n=(0,s.Z)().showErrorMessage,r=l.useState(!1),c=(0,i.Z)(r,2),m=c[0],u=c[1],d=l.useState(),p=(0,i.Z)(d,2),f=p[0],g=p[1];return l.useEffect((function(){u(!0),(0,o.WL)(a).then((function(e){if(u(!1),e.data){var t=e.data;t&&g(t)}})).catch((function(e){return n(e)})).finally((function(){return u(!1)}))}),[]),f?l.createElement(l.Fragment,null,t({commissionData:f,loading:m})):l.createElement("div",null)};var Ne=(0,u.Z)((function(e){return(0,d.Z)({fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{textTransform:"capitalize",fontSize:14},rowSpacing:{marginBottom:e.spacing(.5),margin:"auto"}})}));const Te=function(e){var t=e.commissionData,a=e.loading,n=(0,p.useTranslation)().t,l=Ne(),i=function(e){if(e)return e.slice(0,10)};return a?r().createElement(E.ViewLoader,null):r().createElement("div",null,r().createElement(f.Z,{p:2,border:.2,borderColor:"grey.200",borderRadius:6,display:"flex",flexDirection:"row"},r().createElement(f.Z,{display:"flex",flexDirection:"column",width:"50%"},r().createElement(V.Z,{container:!0,spacing:3,className:l.rowSpacing},r().createElement(V.Z,{item:!0,xs:12,sm:4},r().createElement(C.Z,{className:l.fieldHeading},n("commissionName"))),r().createElement(V.Z,{item:!0,xs:12,sm:4},r().createElement(C.Z,{className:l.fieldValue},null==t?void 0:t.commissionName))),r().createElement(V.Z,{container:!0,spacing:3,className:l.rowSpacing},r().createElement(V.Z,{item:!0,xs:12,sm:4},r().createElement(C.Z,{className:l.fieldHeading},n("statusValue"))),r().createElement(V.Z,{item:!0,xs:12,sm:4},r().createElement(C.Z,{className:l.fieldValue},null==t?void 0:t.statusValue))),r().createElement(V.Z,{container:!0,spacing:3,className:l.rowSpacing},r().createElement(V.Z,{item:!0,xs:12,sm:4},r().createElement(C.Z,{className:l.fieldHeading},n("commissionType"))),r().createElement(V.Z,{item:!0,xs:12,sm:4},r().createElement(C.Z,{className:l.fieldValue},null==t?void 0:t.commissionType))),r().createElement(V.Z,{container:!0,spacing:3,className:l.rowSpacing},r().createElement(V.Z,{item:!0,xs:12,sm:4},r().createElement(C.Z,{className:l.fieldHeading},n("createdBy"))),r().createElement(V.Z,{item:!0,xs:12,sm:4},r().createElement(C.Z,{className:l.fieldValue},null==t?void 0:t.createdBy))),r().createElement(V.Z,{container:!0,spacing:3,className:l.rowSpacing},r().createElement(V.Z,{item:!0,xs:12,sm:4},r().createElement(C.Z,{className:l.fieldHeading},n("creationTimeStamp"))),r().createElement(V.Z,{item:!0,xs:12,sm:4},r().createElement(C.Z,{className:l.fieldValue},i(null==t?void 0:t.creationTimeStamp)))),r().createElement(V.Z,{container:!0,spacing:3,className:l.rowSpacing},r().createElement(V.Z,{item:!0,xs:12,sm:4},r().createElement(C.Z,{className:l.fieldHeading},n("currency"))),r().createElement(V.Z,{item:!0,xs:12,sm:4},r().createElement(C.Z,{className:l.fieldValue},null==t?void 0:t.currency))),r().createElement(V.Z,{container:!0,spacing:3,className:l.rowSpacing},r().createElement(V.Z,{item:!0,xs:12,sm:4},r().createElement(C.Z,{className:l.fieldHeading},n("customerId"))),r().createElement(V.Z,{item:!0,xs:12,sm:4},r().createElement(C.Z,{className:l.fieldValue},null==t?void 0:t.customerId))),r().createElement(V.Z,{container:!0,spacing:3,className:l.rowSpacing},r().createElement(V.Z,{item:!0,xs:12,sm:4},r().createElement(C.Z,{className:l.fieldHeading},n("validityFromDate"))),r().createElement(V.Z,{item:!0,xs:12,sm:4},r().createElement(C.Z,{className:l.fieldValue},i(null==t?void 0:t.validityFromDate)))),r().createElement(V.Z,{container:!0,spacing:3,className:l.rowSpacing},r().createElement(V.Z,{item:!0,xs:12,sm:4},r().createElement(C.Z,{className:l.fieldHeading},n("validityToDate"))),r().createElement(V.Z,{item:!0,xs:12,sm:4},r().createElement(C.Z,{className:l.fieldValue},i(null==t?void 0:t.validityToDate))))),r().createElement(f.Z,{display:"flex",flexDirection:"column",width:"50%"},r().createElement(V.Z,{container:!0,spacing:3,className:l.rowSpacing},r().createElement(V.Z,{item:!0,xs:12,sm:4},r().createElement(C.Z,{className:l.fieldHeading},n("nextCalculationDate"))),r().createElement(V.Z,{item:!0,xs:12,sm:4},r().createElement(C.Z,{className:l.fieldValue},i(null==t?void 0:t.nextCalculationDate)))),r().createElement(V.Z,{container:!0,spacing:3,className:l.rowSpacing},r().createElement(V.Z,{item:!0,xs:12,sm:4},r().createElement(C.Z,{className:l.fieldHeading},n("nextDisbursementDate"))),r().createElement(V.Z,{item:!0,xs:12,sm:4},r().createElement(C.Z,{className:l.fieldValue},i(null==t?void 0:t.nextDisbursementDate)))),r().createElement(V.Z,{container:!0,spacing:3,className:l.rowSpacing},r().createElement(V.Z,{item:!0,xs:12,sm:4},r().createElement(C.Z,{className:l.fieldHeading},n("calculationFrequency"))),r().createElement(V.Z,{item:!0,xs:12,sm:4},r().createElement(C.Z,{className:l.fieldValue},null==t?void 0:t.calculationFrequency))),r().createElement(V.Z,{container:!0,spacing:3,className:l.rowSpacing},r().createElement(V.Z,{item:!0,xs:12,sm:4},r().createElement(C.Z,{className:l.fieldHeading},n("disbursementFrequency"))),r().createElement(V.Z,{item:!0,xs:12,sm:4},r().createElement(C.Z,{className:l.fieldValue},null==t?void 0:t.disbursementFrequency))),r().createElement(V.Z,{container:!0,spacing:3,className:l.rowSpacing},r().createElement(V.Z,{item:!0,xs:12,sm:4},r().createElement(C.Z,{className:l.fieldHeading},n("walletType"))),r().createElement(V.Z,{item:!0,xs:12,sm:4},r().createElement(C.Z,{className:l.fieldValue},null==t?void 0:t.walletType))),r().createElement(V.Z,{container:!0,spacing:3,className:l.rowSpacing},r().createElement(V.Z,{item:!0,xs:12,sm:4},r().createElement(C.Z,{className:l.fieldHeading},n("version"))),r().createElement(V.Z,{item:!0,xs:12,sm:4},r().createElement(C.Z,{className:l.fieldValue},null==t?void 0:t.version))),r().createElement(V.Z,{container:!0,spacing:3,className:l.rowSpacing},r().createElement(V.Z,{item:!0,xs:12,sm:4},r().createElement(C.Z,{className:l.fieldHeading},n("updatedBy"))),r().createElement(V.Z,{item:!0,xs:12,sm:4},r().createElement(C.Z,{className:l.fieldValue},null==t?void 0:t.updatedBy))),r().createElement(V.Z,{container:!0,spacing:3,className:l.rowSpacing},r().createElement(V.Z,{item:!0,xs:12,sm:4},r().createElement(C.Z,{className:l.fieldHeading},n("updateTimeStamp"))),r().createElement(V.Z,{item:!0,xs:12,sm:4},r().createElement(C.Z,{className:l.fieldValue},i(null==t?void 0:t.updateTimeStamp)))))),r().createElement(f.Z,{p:2,border:.2,borderColor:"grey.200",borderRadius:6,display:"flex",flexDirection:"column",marginTop:"1%"},r().createElement(f.Z,{display:"flex",flexDirection:"row"},r().createElement(U.Z,{elevation:0},r().createElement(Y.Z,null,r().createElement(C.Z,{variant:"body1"},r().createElement("b",null,n("rules")))))),r().createElement(f.Z,{display:"flex",flexDirection:"row"},r().createElement(V.Z,{container:!0,spacing:3,className:l.rowSpacing},r().createElement(te,{rules:t.rules})))))},ke=function(e){var t=e.id;return l.createElement(De,{id:t},(function(e){return l.createElement(Te,e)}))};var Fe=a(18896);const Oe=function(e){var t=e.disable,a=void 0!==t&&t;return l.createElement(E.SeamlessButton,{component:D.Link,to:"/home/commission/commissions",variant:"contained",color:"primary",disabled:a,endIcon:l.createElement(Fe.Z,null)},"Create Commission")}},34579:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var n=a(74315),l=a(2411),r=a.n(l),i=a(38670);const o=function(e){var t=r().useState(null),a=(0,n.Z)(t,2),l=a[0],o=a[1],s=(0,i.useSelector)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.rbac}),i.shallowEqual);return r().useEffect((function(){var t,a=(null===(t=s.features.find((function(t){return t.module===e})))||void 0===t?void 0:t.features)||[];o(a)}),[s]),l}},28685:(e,t,a)=>{"use strict";a.d(t,{Z:()=>p});var n=a(2411),l=a(48049),r=a(74315),i=a(70773),o=a(29609),s=a(23664),c=a(31175),m=a(59398),u=a(49642);const d=function(){var e=(0,o.useTranslation)().t,t=(0,l.useHistory)(),a=n.useState(),d=(0,r.Z)(a,2),p=(d[0],d[1],n.useState(!1)),f=(0,r.Z)(p,2),g=(f[0],f[1]),E=(0,s.Z)().showSuccessMessage,v=n.useState({commissionName:"",validityFromDate:new Date((new Date).setFullYear((new Date).getFullYear())).toISOString(),validityToDate:new Date((new Date).setFullYear((new Date).getFullYear())).toISOString(),disbursementFrequency:"",status:0,rules:[],customerId:"",creationTimeStamp:"",updateTimeStamp:"",createdBy:"",updatedBy:"",commissionType:"",approvedBy:null,version:"",currency:"",walletType:"",calculationFrequency:"",nextCalculationDate:"",nextDisbursementDate:""}),y=(0,r.Z)(v,2),Z=y[0],h=(y[1],n.useState(Z)),b=(0,r.Z)(h,2),S=b[0];return b[1],n.createElement(i.SeamlessContainer,{title:e("newCommissionSchemePageTitle"),description:e("newCommissionSchemePageDescription")},n.createElement(c.Ow,{data:(0,m.getNecessaryObject)(S,["createdAt","updatedAt"]),onFormSubmit:function(e,a){"draft"===a&&(g(!0),(0,u.zY)(e).then((function(e){E(e),g(!1),t.push("/home/commission/dashboard")})).finally((function(){return g(!1)}))),"publish"===a&&(g(!0),(0,u.Xt)(e).then((function(e){E(e),g(!1),t.push("/home/commission/dashboard")})).finally((function(){return g(!1)})))}}))},p=function(){return n.createElement(l.Switch,null,n.createElement(l.Route,null,n.createElement(d,null)))}},24803:(e,t,a)=>{"use strict";a.d(t,{Z:()=>h});var n=a(2411),l=a(48049),r=a(74315),i=a(67358),o=a(70773),s=a(29609),c=a(79692),m=a(12420),u=a(23664),d=a(49642),p=a(31175),f=(0,c.Z)((function(e){return(0,m.Z)({element:{marginTop:e.spacing(2),marginBottom:e.spacing(2)}})}));const g=function(){var e=(0,l.useParams)().id,t=(0,s.useTranslation)().t,a=(0,l.useHistory)(),c=(0,u.Z)(),m=c.showSuccessMessage,g=c.showErrorMessage,E=n.useState(!1),v=(0,r.Z)(E,2),y=v[0],Z=v[1],h=n.useState(),b=(0,r.Z)(h,2),S=b[0],x=b[1],w=n.useState(!1),C=(0,r.Z)(w,2),D=(C[0],C[1]),N=(f(),n.useCallback((function(){Z(!0),(0,d.WL)(e).then((function(e){if(Z(!1),e.data){var t=e.data;x(t)}})).catch((function(e){return g(e)})).finally((function(){return Z(!1)}))}),[]));return n.useEffect((function(){N()}),[]),n.createElement(o.SeamlessContainer,{title:t("editCommissionsPageTitle")+(null==S?void 0:S.commissionName),description:t("editCommissionsPageDescription")},S?n.createElement(p.Ow,{data:S,onFormSubmit:function(e,t){"draft"===t&&(D(!0),(0,d.zY)(e).then((function(e){m(e),D(!1),a.push("/home/commission/dashboard")})).finally((function(){return D(!1)}))),"publish"===t&&(D(!0),(0,d.Xt)(e).then((function(e){m(e),D(!1),a.push("/home/commission/dashboard")})).finally((function(){return D(!1)})))},view:"DRAFT"!==S.statusValue}):n.createElement("div",null),y?n.createElement(i.Z,null):null)};var E=a(33553),v=(0,c.Z)((function(e){return(0,m.Z)({elements:{width:"100%",height:600}})}));const y=function(){var e=(0,s.useTranslation)().t,t=v();return n.createElement(o.SeamlessContainer,{title:e("viewAllCommissionSchemePageTitle"),description:e("viewAllCommissionSchemePageDescription")},n.createElement(E.Z,{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-evenly",bgcolor:"#F7F7F7",padding:"10px"},n.createElement(p.jw,null)),n.createElement(E.Z,{display:"flex",flexDirection:"row",justifyContent:"flex-end",style:{marginTop:20}},n.createElement(p.WZ,{disable:!1})),n.createElement("div",{className:t.elements},n.createElement(p.C6,null)))},Z=function(){var e=(0,l.useParams)().id,t=(0,s.useTranslation)().t;return n.createElement(o.SeamlessContainer,{title:t("viewCommissionSchemePageTitle"),description:t("viewCommissionSchemePageDescription")},n.createElement(p.RL,{id:e}))},h=function(){var e=(0,l.useRouteMatch)().path;return n.createElement(l.Switch,null,n.createElement(l.Route,{path:e+"/view/:id"},n.createElement(Z,null)),n.createElement(l.Route,{path:e+"/edit/:id"},n.createElement(g,null)),n.createElement(l.Route,null,n.createElement(y,null)))}},23664:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var n=a(19721),l=a(29609);const r=function(){var e=(0,n.useSnackbar)().enqueueSnackbar,t=(0,l.useTranslation)().t;function a(e){var a=t("anErrorOccurred");return["resultMessage","message","resultDescription"].forEach((function(t){e.hasOwnProperty(t)&&(a=e[t])})),a}return{showSuccessMessage:function(t){e("string"!=typeof t?a(t):t,{variant:"success"})},showErrorMessage:function(t){e("string"!=typeof t?a(t):t,{variant:"error"})},showInfoMessage:function(t){e("string"!=typeof t?a(t):t,{variant:"info"})},showWarningMessage:function(t){e("string"!=typeof t?a(t):t,{variant:"warning"})}}}}}]);