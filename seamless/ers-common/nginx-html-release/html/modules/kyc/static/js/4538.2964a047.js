(self.webpackChunk_unified_kyc=self.webpackChunk_unified_kyc||[]).push([[4538],{34579:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var a=n(74315),i=n(2411),r=n.n(i),l=n(6632);const o=function(e){var t=r().useState(null),n=(0,a.Z)(t,2),i=n[0],o=n[1],s=(0,l.useSelector)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.rbac}),l.shallowEqual);return r().useEffect((function(){var t,n=(null===(t=s.features.find((function(t){return t.module===e})))||void 0===t?void 0:t.features)||[];o(n)}),[s]),i}},17904:(e,t,n)=>{"use strict";n.d(t,{_:()=>Fn,FJ:()=>Bn,aX:()=>Cn,rO:()=>xn,a5:()=>On});var a=n(2411),i=n(48049),r=n(44104),l=n.n(r),o=n(74315),s=n(37603),u=n(19645),c=n(45090);const d=function(){var e=(0,c.useSnackbar)().enqueueSnackbar,t=(0,u.useTranslation)().t;function n(e){var n=t("anErrorOccurred");return["resultMessage","message","resultDescription"].forEach((function(t){e.hasOwnProperty(t)&&(n=e[t])})),n}return{showSuccessMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"success"})},showErrorMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"error"})},showInfoMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"info"})},showWarningMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"warning"})}}};var m=n(61416);const v=n.n(m)();var p,f,g,h=function(e){e.searchValue=btoa(e.searchValue);var t=Object.keys(e).map((function(t){return t+"="+e[t]})).join("&");return v("/kyc/v2/kyc?".concat(t))},y=function(e){e.searchValue=btoa(e.searchValue);var t=Object.keys(e).map((function(t){return t+"="+e[t]})).join("&");return v("/kyc/v2/kyc/pending?".concat(t))},b=(null===(p=window)||void 0===p||null===(f=p.config)||void 0===f||null===(g=f.kyc)||void 0===g?void 0:g.sendOperationIdParams)||!1,E=function(e,t,n){var a="/template/v1/component/".concat(e,"/type/").concat(t);return b&&(a="/template/v1/component/".concat(e,"/type/").concat(t,"?operationId=").concat(n)),v(a)},S=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i="searchResellerBasicInfoByAttribute";return a&&(i=a),v("/dms/auth/".concat(i,"?limit=").concat(t,"&offSet=").concat(n),{method:"POST",body:e})},w=function(e){return v(e)},Z=function(e,t){return v("/dms/auth/getResellerBasicInfo",{method:"POST",body:{dealerID:{id:e,type:t},fetchAccountBalanceInformation:!0}})},I=n(90929),C=n(8526),k=window.config.defaultTemplate||"",F=function(e){return null===e?{}:D(e).reduce((function(e,t){var n={};switch(t.type){case"date":n=new Date;break;case"checkbox":t.options.forEach((function(e){n[e.key]=!1}));break;case"select":var a=t.options.find((function(e){return e.value===t.defaultValue}));n=a||null;break;case"radio":var i=t.options.find((function(e){return e.value===t.defaultValue}));n=i?i.value:"";break;default:n=t.defaultValue}var r=t.id.split(".");if(2===r.length){var l=r[0],o=r[1];e[l]=e[l]||{},e[l][o]=n}else e[t.id]=n;return e}),{})},x=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)return[];var a=e.sections,i=n.controlableFieldIDs,r=void 0===i?[]:i,l=n.regexFields,o=void 0===l?{}:l,s=n.regexEnabledFieldsId,u=void 0===s?[]:s,c=a.map((function(e){var n=(e.widgets||e.questions).reduce((function(e,n){var a={},i=n.placeholder||n.name||O(n.id);["text","file","radio","dropdown","password"].includes(n.type)?(a[n.id]=C.Z_().nullable(),n.required||(a[n.id]=C.Z_().nullable())):"number"===n.type?a[n.id]=C.Rx():"email"===n.type?a[n.id]=C.Z_().email():"date"===n.type?a[n.id]=C.hT().nullable():"select"===n.type?a[n.id]=C.Ry().nullable():"/^[a-zA-Z0-9]*$/"===n.validation&&(a[n.id]=C.Z_().matches(/^[a-zA-Z0-9]*$/)),n.required&&a[n.id]&&!r.includes(n.id)&&(a[n.id]=a[n.id].required("".concat(i," ").concat(t("isRequiredField"))).nullable()),u.includes(n.id)&&(a[n.id]=a[n.id].matches(new RegExp("".concat(o[n.id])),n.errorMessage||t("invalidRegexError",{placeholder:i})).nullable());var l=n.id.split(".");if(2===l.length){var s=l[0],c={};c[l[1]]=a[n.id],e[s]=e[s]?e[s].concat(C.Ry(c)).nullable():C.Ry().shape(c).nullable()}else e[n.id]=a[n.id];return e}),{});return C.Ry().shape(n).nullable()}));return c},D=function(e){return e?e.sections.reduce((function(e,t){var n=t.questions||t.widgets;return e.concat(n)}),[]):[]},O=function(e){var t=e.split("."),n=(e=t.length>1?t[1]:t[0]).replace(/([a-z])([A-Z])/g,"$1 $2");return(n=n.split("_").join(" "))&&n[0].toUpperCase()+n.slice(1)},T=function(e,t){return(null==e?void 0:e.message)||(null==e?void 0:e.error)||(null==e?void 0:e.resultDescription)||(null==e?void 0:e.resultMessage)||t||"Something went wrong, An error occurred"},P=function(e){return null==e?void 0:e.map((function(e){var t,n=e.resellerData,a=n.resellerId,i=n.resellerName,r=n.resellerTypeName,l=n.parentResellerName,o=n.resellerMSISDN,s=n.timezone,u=n.status,c=(null==e?void 0:e.resellerData).fields,d=((void 0===c?{}:c)||{}).parameters,m=void 0===d?{}:d,v=(null===(t=Object.keys(m))||void 0===t?void 0:t.filter((function(e){return!!e})))||[],p=[];return v.length&&(null==v||v.forEach((function(e){"change_reason_comment"==e&&p.push(m[e]),"change_status_url"==e&&p.push(m[e])}))),{resellerId:a,resellerName:i,resellerTypeName:r,parentResellerName:l,resellerMSISDN:o,timezone:s,status:u,reasons:p}}))},B=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n[e],i=e;return e.startsWith("extraFields.")&&(i=i.replace("extraFields.",""),a=null==n||null===(t=n.extraFields)||void 0===t?void 0:t[i]),a},R=function(e){var t=e;return e.startsWith("extraFields.")&&(t=t.replace("extraFields.","")),t},j=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.activeValidationRules,i=void 0===a?{}:a,r=n.controlableFieldIDs,l=void 0===r?[]:r,o=(n.isUniqueFieldIds,n.isExistFieldIds,n.invalidFields),s=void 0===o?{}:o,u=n.controlableFields,c=void 0===u?{}:u,d=(null==i?void 0:i._nodes)||[];if("false"===e.one_time_password&&1==e.motte_de_passe_flag&&!e.motte_de_passe&&d.includes("motte_de_passe"))return{errMsg:t("mottePassRequired","Motte De Passe field is required!"),id:"motte_de_passe"};var m=Object.keys(s);if(m.length>0&&d.includes(m[0])){var v=m[0];return{errMsg:s[v],id:v}}if(k&&l.length>0){var p=N(e,c),f=p.split("#");return{errMsg:f[1],id:f[0]}}return{errMsg:"",id:""}},N=function(e,t){var n="";for(var a in t){var i=t[a],r=Object.keys(i),l=(Object.values(i),e[r[0]]);l&&l.toLocaleLowerCase()===a.toLowerCase()?e[a]||(n="".concat(a,"#").concat(O(a)," field is required.")):delete e[a]}return n},M=function(e,t){var n={},a=Object.keys(t);if(Object.values(t),a.length>0)for(var i in t){var r=t[i];if(r.includes("array")&&"string"==typeof e[i]){var l=r.split("array")[1]||",";n[i]=e[i].split(l)}else r.includes("json")&&"string"==typeof e[i]?n[i]=JSON.parse(e[i]):r.includes("string")&&"object"===(0,I.Z)(e[i])&&(n[i]=JSON.stringify(e[i]))}return n};const V=function(e){var t=e.type,n=e.component,r=e.children,l=e.operationType,s=d().showErrorMessage,u=(0,i.useHistory)(),c=a.useState(),m=(0,o.Z)(c,2),v=m[0],p=m[1],f=a.useState(!1),g=(0,o.Z)(f,2),h=g[0],y=g[1],b=a.useState({}),S=(0,o.Z)(b,2),w=S[0],Z=S[1];return a.useEffect((function(){y(!0),E(n,t,l).then((function(e){if(0===e.resultCode){p(e.value);var t=F(e.value);Z(t)}else s(e.resultMessage),u.push("/home/kyc/register/")})).finally((function(){return y(!1)}))}),[t,n]),a.createElement(a.Fragment,null,r({template:v,loading:h,data:w,type:t}))};var _=n(51119),A=n(11746),K=n(98069),W=n(33553),q=n(79692),L=n(12420),Y=n(77114),z=n(6277),H=n(7560),U=n(67358),G=n(80030),$=n(90436),J=n(61564),X=n(39590),Q=n(2682),ee=n(5806),te=n(44962),ne=n(42494),ae=n(84899),ie=n(64326),re=n(21324),le=n(86619),oe=n(4555),se=n(30701),ue=n(19258),ce=n(77790),de=n.n(ce),me=n(48764),ve=n.n(me),pe=n(24217),fe=n.n(pe),ge=n(14560),he=n(8499),ye=n.n(he);function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){(0,_.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Se=(0,q.Z)((function(e){return(0,L.Z)({element:{marginRight:e.spacing(1),marginTop:e.spacing(1)},validateBtn:{float:"right",top:-50,padding:0}})}));const we=function(e){var t,n=e.setDisableNext,i=(e.disableNext,e.section),r=e.values,l=(e.disabledView,e.type),c=e.errors,m=void 0===c?{}:c,v=e.metaData,p=void 0===v?{}:v,f=e.handleChange,g=e.editView,h=e.blurHandler,y=e.focusHandler,b=e.validateForm,E=e.setFieldValue,S=(d().showErrorMessage,(0,u.useTranslation)().t),Z=Se(),C=a.useState(!1),k=(0,o.Z)(C,2),F=k[0],x=k[1],D=i.widgets||i.questions,T=p.searchByFieldsId,P=void 0===T?[]:T,j=p.resultFoundForWidgetID,N=void 0===j?"":j,M=p.searchByFields,V=void 0===M?{}:M,_=p.controlableFields,K=void 0===_?{}:_,q=p.controlableFieldIDs,L=void 0===q?[]:q,Y=p.searchResellersData,ce=void 0===Y?[]:Y,me=p.searchableFieldsId,pe=void 0===me?[]:me,he=p.cinLoading,be=void 0!==he&&he,we=p.dataSourceFieldIDs,Ze=void 0===we?[]:we,Ie=p.dataSourceFields,Ce=a.useState(!1),ke=(0,o.Z)(Ce,2),Fe=ke[0],xe=ke[1],De=a.useState(!1),Oe=(0,o.Z)(De,2),Te=Oe[0],Pe=(Oe[1],((null===(t=window.config)||void 0===t?void 0:t.kyc)||["extraFields.dealerCode"]).preFilledParentIdDataFields),Be=window.config.openCalendarWith||"year",Re=function(e){e&&D.forEach((function(t){Pe.includes(t.id)&&E(t.id,e)}))};return a.useEffect((function(){b().then((function(e){Object.values(e).length>0?n&&n(!0):n&&n(!1)}))}),[r]),a.createElement(W.Z,{width:"100%",p:1,borderColor:"grey.200",border:.2,borderRadius:6},a.createElement($.Z,{variant:"h5",gutterBottom:!0},i.title),a.createElement($.Z,{variant:"body1"},i.description),a.createElement(W.Z,{mt:2,mr:2,mb:2,display:"flex",flexDirection:"row",flexWrap:"wrap"},D.map((function(e,t){var n,i,o,u,c=null,d=e.id.split("."),v=void 0,p=void 0;v=1===d.length?r[e.id]||"":r[d[0]][d[1]]||"",d.length>1&&null!=m&&m.extraFields&&(p=(null==m?void 0:m.extraFields[d[1]])||"");var b=e.id,C=pe.includes(b),k=(null==e?void 0:e.placeholder)||e.name||S("".concat(b),O(b));if(L.length>0&&L.includes(b)){var D,T=K[b];if(0===(null===(D=Object.keys(r))||void 0===D?void 0:D.length))return null;if(function(e,t){if(e&&t)for(var n in e){var a=e[n],i=B(n,t);return R(n),"object"===(0,I.Z)(a)&&(null==a?void 0:a.length)>0?a.includes(i):i==a}return!1}(T,r))return null}var j=g&&!e.mutable||(null===(n=e.validation)||void 0===n?void 0:n.disabled);switch(e.type){case"label":break;case"text":c=a.createElement(W.Z,{width:"30%",style:{marginTop:-5},pt:2,pr:2,key:t},a.createElement(s.SeamlessInput,{id:"".concat(e.id.replaceAll(".","-"),"-input-box"),fullWidth:!0,required:e.required,name:e.id,disabled:j,label:k,error:!!m[e.id]||p||Te,helperText:j?"":m[e.id]||p||S("pleaseEnterValue"),value:v,onChange:function(t){var n;f({target:{value:null==t||null===(n=t.target)||void 0===n?void 0:n.value,name:e.id}})},onBlur:function(){setTimeout((function(){var t;return h({widget:e,value:v,isGenertic:null===(t=e.validation)||void 0===t?void 0:t.searchable})}),200)},onFocus:function(){return y(e.id)}}),be&&C&&a.createElement(U.Z,null),ce&&C&&N===e.id&&!(null!==(i=c)&&void 0!==i&&null!==(o=i.validation)&&void 0!==o&&o.hideResellerSearchPopup)&&a.createElement(a.Fragment,null,a.createElement(G.ZP,{title:"".concat(S("searchResellerCIN"))},a.createElement(s.SeamlessButton,{id:"search-reseller-cin-button",className:(0,z.default)(Z.validateBtn),onClick:function(){return xe(!0)}},a.createElement(oe.Z,null))),a.createElement(ge.SearchResellerChildrenModal,{open:Fe,setOpen:xe,loading:be,data:ce})));break;case"date":c=a.createElement(W.Z,{width:"30%",style:{marginTop:-10},pt:2,pr:2,key:t},a.createElement(J.M,{utils:ue.Z},a.createElement(X.e,{id:"".concat(e.id.replaceAll(".","-"),"-input-box"),required:e.required,variant:"inline",openTo:Be,format:"yyyy/MM/dd",autoOk:!0,views:["year","month","date"],margin:"normal",label:k,disabled:j,name:e.id,value:v,onChange:function(t){f({target:{value:t,name:e.id}})},KeyboardButtonProps:{"aria-label":"change date"}})));break;case"radio":c=a.createElement(W.Z,{width:"30%",pt:2,pr:2,key:t},a.createElement(ne.Z,{component:"fieldset"},a.createElement(ae.Z,{component:"legend",required:e.required},k),a.createElement(Q.Z,{name:e.id,value:v,onChange:f},e.options.map((function(t){return a.createElement(ee.Z,{value:t.value,control:a.createElement(te.Z,{id:"".concat(e.id.replaceAll(".","-"),"-radio-button")}),disabled:j,label:t.name||t.key})})))));break;case"checkbox":c=a.createElement(W.Z,{width:"30%",pt:2,pr:2,key:t},a.createElement(ne.Z,{component:"fieldset"},a.createElement(ae.Z,{component:"legend",required:e.required}," ",k),a.createElement(ie.Z,null,e.options.map((function(t){return a.createElement(ee.Z,{control:a.createElement(re.Z,{id:"".concat(e.id.replaceAll(".","-"),"-check-box"),checked:v[t.key],onChange:f,disabled:j,name:"".concat(e.id,".").concat(t.key)}),label:t.name||t.key})})))));break;case"select":c=a.createElement(W.Z,{width:"30%",pt:2,pr:2,key:t},a.createElement(se.ZP,{id:"".concat(e.id.replaceAll(".","-"),"-autocomplete"),value:v,options:e.options,getOptionLabel:function(e){return e.key?e.key:e},disabled:j,style:{width:"100%"},onChange:function(t,n){f({target:{value:n,name:e.id}})},renderInput:function(t){return a.createElement(le.Z,(0,H.Z)({id:"".concat(e.id.replaceAll(".","-"),"-autocomplete-text-field")},t,{autoComplete:"new-password",label:k,variant:"outlined",required:e.required}))}}));break;case"dropdown":if("contractKey"===b||"contractId"===b)c=a.createElement(W.Z,{width:"30%",style:{marginTop:0},pt:2,pr:2,key:t},a.createElement(fe(),{name:b,resellerType:l,label:v&&k,disabled:j,errors:m||p,helperText:S("selectContractType"),value:v,handleChange:f}));else if("parentResellerId"===b){var M;c=a.createElement(W.Z,{width:"30%",style:{marginTop:0},pt:2,pr:2,key:t},a.createElement(ve(),{name:b,label:k,required:e.required,disabled:j,errors:m,value:v,dataSourceUrl:null==e||null===(M=e.validation)||void 0===M?void 0:M.datasource,helperText:m[b],handleChange:function(t){f({target:{value:t.value,name:e.id,key:t.key}})},resellerType:l,getParentReseller:Re,type:"autocomplete",refresh:!0}))}else{var _,q=(0,A.Z)((null===(_=e.options)||void 0===_?void 0:_.map((function(e){return{key:e.key||e.name,value:e.value}})))||[]);P.includes(b)&&V[b]&&(q=V[b]),c=a.createElement(W.Z,{width:"30%",pt:2,pr:2,key:t},a.createElement(se.ZP,{id:"".concat(e.id.replaceAll(".","-"),"-autocomplete"),value:v,"aria-required":e.required,options:q,getOptionLabel:function(e){return function(e,t){var n,a;if(!e)return"";var i;return(null===(n=i="string"==typeof e?null==t?void 0:t.find((function(t){var n,a;return(null!==(n=null!==(a=null==t?void 0:t.value)&&void 0!==a?a:null==t?void 0:t.key)&&void 0!==n?n:null==t?void 0:t.id)===e})):e)||void 0===n?void 0:n.name)||(null===(a=i)||void 0===a?void 0:a.key)||i}(e,q)},getOptionSelected:function(e,t){return e.value==v},disabled:j,loading:F,style:{width:"100%"},onChange:function(t,n){var a;null!=e&&null!==(a=e.validation)&&void 0!==a&&a.associatedFieldFilterUrl?function(e,t){var n,a,i=e.validation.anyAssociatedField,r=null==e||null===(n=e.validation)||void 0===n||null===(a=n.associatedFieldFilterUrl)||void 0===a?void 0:a.replace("${regionName}",t);x(!0),w(r).then((function(t){var n=(null==t?void 0:t.values)||(null==t?void 0:t.data);if(E(i,null),n&&n.length>0){var a;P.includes(i)||P.push(i),V[i]=[];var r=(null==e||null===(a=e.validation)||void 0===a?void 0:a.parseFromDataSource)||{};n.forEach((function(e){var t="object"===(0,I.Z)(e);V[i].push({value:t?e[null==r?void 0:r.value]:e,name:t?e[null==r?void 0:r.name]:e,key:t?e[null==r?void 0:r.name]:e})}))}x(!1)}))}(e,null==n?void 0:n.value):function(e,t,n){var a;if(null!==(a=t.validation)&&void 0!==a&&a.anyAssociatedField){var i=t.validation.anyAssociatedField;x(!0),w("/dms/v1/template/dropdown/".concat(i,"?associatedFieldName=").concat(e,"&associatedFieldValue=").concat(n)).then((function(e){e.values&&0!==e.values.length&&(P.includes(i)||P.push(i),V[i]=[],e.values.forEach((function(e){V[i].push({value:e,name:e,key:e})}))),x(!1)}))}}(b,e,null==n?void 0:n.value),f({target:{value:(null==n?void 0:n.value)||"",name:e.id}})},renderInput:function(t){return a.createElement(le.Z,(0,H.Z)({id:"".concat(e.id.replaceAll(".","-"),"-autocomplete-text-field")},t,{autoComplete:b,label:k,variant:"outlined",required:e.required,error:!!m[e.id],helperText:m[e.id]}))}}))}break;case"file":c=a.createElement(W.Z,{width:"30%",pt:2,pr:2,key:t},a.createElement(de(),{name:e.id,value:v,label:k,onChange:f,resourceType:"agent",disabled:!e.mutable}),v&&S("uploadSuccessful"));break;case"multiselect":var Y=(null===(u=e.options)||void 0===u?void 0:u.map((function(e){return{name:e.name,id:e.value}})))||[],$=v?v.split(",").map((function(e){return{id:e,name:e}})):[];P.includes(b)&&V[b]&&(Y=V[b]),c=a.createElement(W.Z,{width:"30%",pt:2,pr:2,key:t},a.createElement(ye(),{data:Y,disabled:j,selectedItems:$,label:k,required:e.required,handleChange:function(e){!function(e,t){if(Ze.includes(t)){var n=Ie[t];V[n]=e.map((function(e){var t,n,a;return Ee(Ee({},e),{},{value:null!==(t=null!==(n=null!==(a=null==e?void 0:e.id)&&void 0!==a?a:null==e?void 0:e.key)&&void 0!==n?n:null==e?void 0:e.name)&&void 0!==t?t:e})}))}var a=e.map((function(e){var t;return null!==(t=e.value)&&void 0!==t?t:e.id})).join(",");f({target:{value:a,name:t}})}(e,b)}}));break;default:c=a.createElement(W.Z,{width:"30%",style:{marginTop:-5},pt:2,pr:2,key:t},a.createElement(s.SeamlessInput,(0,H.Z)({id:"".concat(e.id.replaceAll(".","-"),"-input-box"),fullWidth:!0,type:e.type},"password"===e.type&&{autoComplete:"new-password"},{required:e.required,error:!!m[e.id]||p,helperText:m[e.id]||p||S("pleaseEnterValue"),name:e.id,disabled:j,label:k,value:v,onChange:function(t){var n;f({target:{value:null==t||null===(n=t.target)||void 0===n?void 0:n.value,name:e.id}})},onBlur:function(){h({widget:e,value:v})}})))}return c}))))};var Ze=n(27483),Ie=n.n(Ze),Ce=n(47539),ke=n.n(Ce),Fe=n(78205),xe=n.n(Fe),De=n(559),Oe=n(6632);function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){(0,_.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Be=(0,q.Z)((function(e){return(0,L.Z)({root:{height:500,overflowY:"scroll"},button:{margin:e.spacing(1)},element:{margin:e.spacing(1)},dividerSpacing:{marginBottom:e.spacing(3)},btnSpacing:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},spacingTop:{marginTop:e.spacing(3)},customButtonDesign:{padding:"8px 40px!important",fontFamily:"Noto Sans",fontWeight:400,lineHeight:1.38,borderRadius:"7px!important"},btnPrimary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main}})})),Re="",je=[],Ne=[],Me=[],Ve=[],_e=[],Ae=[],Ke=[],We=[],qe={},Le={},Ye={},ze=[],He={},Ue=[],Ge=[],$e=[],Je={},Xe={},Qe={},et=[],tt=[],nt=[],at=[],it=[],rt=window.config.resellerAdditionalConfig.BasicResellerInfoAPILimit||400;const lt=function(e){var t,n,r,l=e.template,c=e.loading,m=e.data,p=e.type,f=(0,i.useHistory)(),g=Be(),h=(0,u.useTranslation)().t,y=(0,Oe.useSelector)((function(e){return e.auth})).user;y&&null!==(t=y.info)&&void 0!==t&&t.resellerData&&(n=null===(r=y.info.resellerData)||void 0===r?void 0:r.resellerId);var b=d(),E=b.showErrorMessage,C=b.showSuccessMessage,k=b.showWarningMessage,F=b.showInfoMessage,B=a.useState(!0),R=(0,o.Z)(B,2),N=R[0],V=R[1],q=a.useState(0),L=(0,o.Z)(q,2),H=L[0],U=L[1],G={},$=(0,Y.TA)({initialValues:m,onSubmit:function(e){var t=function(e,t,n){var a=D(t),i={};return Object.keys(e).forEach((function(t){var n=a.find((function(e){return e.id===t&&"select"===e.type})),r=a.find((function(e){return e.id===t&&"date"===e.type}));i[t]=n?e[t]?e[t].value:"":r?e[t].toISOString().split("T")[0]:e[t]})),i.customerType=n,i}(lt(e),l,p),n=M(t,Qe)||{},a=Pe(Pe({},t),n);Object.keys(a).forEach((function(e){a[e]||(a[e]=""),"extraFields"==e&&Object.keys(a[e]).forEach((function(t){a[e][t]||(a[e][t]="")}))})),function(e){return v("/kyc/v2/kyc",{method:"POST",body:e})}(a).then((function(e){C(e),f.push("/home/kyc/register/")})).catch((function(e){E(e)}))},validationSchema:Ue[H],enableReinitialize:!0}),J=$.values,X=$.handleChange,Q=$.handleSubmit,ee=$.handleReset,te=$.validateForm,ne=$.errors,ae=$.setFieldError,ie=$.setValues,re=$.setFieldValue;a.useEffect((function(){l&&l.sections.map((function(e){G[e.id]=!1})),Te()}),[l]);var le=a.useState(!1),oe=(0,o.Z)(le,2),se=oe[0],ue=oe[1],ce=a.useState([]),de=(0,o.Z)(ce,2),me=de[0],ve=de[1],pe=a.useState(!1),fe=(0,o.Z)(pe,2),ge=fe[0],he=fe[1],ye=a.useState({}),be=(0,o.Z)(ye,2),Ee=be[0],Se=be[1],Ze=Ie()(null).validateRequest,Ce=ke()(null).generateIdByFieldName,Fe=xe()().dateFormatter;function Te(){je.splice(0,je.length),Xe={},Ue=[],U(0)}a.useEffect((function(){return l&&!Object.keys(null==l?void 0:l.sections[H]).includes("msisdn")&&V(!1),Te(),function(){return Te()}}),[]),a.useEffect((function(){Te(),V(!0)}),[p]),a.useEffect((function(){n&&m&&!m.parentResellerId&&(m.parentResellerId=n)}),[m]);var lt=function(e){var t=nt.filter((function(e){return"date"===e.type})).map((function(e){return e.id}));if(t.length>0)for(var n in e)t.includes(n)&&e[n]&&(e[n]=Fe(e[n],"YYYY/MM/DD"));return e};a.useEffect((function(){if((nt=function(e){return e&&e.sections?(0,A.Z)(e.sections.map((function(e){return e.widgets||e.questions}))).flat(1):[]}(l))&&nt.length>0){var e=function(e){var t,n,a,i,r,l,o,s,u,c,d,m,v,p,f,g,y=nt[e],b=y.id;y.unique&&et.push(b),null!==(t=y.validation)&&void 0!==t&&t.mustExist&&""!==y.validation.mustExist&&tt.push(b),null!==(n=y.validation)&&void 0!==n&&n.listViewModal&&y.validation.listViewModal&&at.push(b),null!==(a=y.validation)&&void 0!==a&&a.externalValidation&&""!==y.validation.externalValidation&&(Je[b]=y.validation.externalValidation,$e.push(b)),null!==(i=y.validation)&&void 0!==i&&i.parsedValueBeforeSubmit&&""!==y.validation.parsedValueBeforeSubmit&&(Qe[b]=y.validation.parsedValueBeforeSubmit),null!==(r=y.validation)&&void 0!==r&&r.searchable&&null!==(l=y.validation)&&void 0!==l&&l.searchable&&Ne.push(b),null!==(o=y.validation)&&void 0!==o&&o.autoGenerate&&!0===y.validation.autoGenerate&&Ve.push(b),null!==(s=y.validation)&&void 0!==s&&s.perfix&&!0===y.validation.prefix&&Ae.push(b),null!==(u=y.validation)&&void 0!==u&&u.preFill&&!0===y.validation.preFill&&Me.push(b),null!==(c=y.validation)&&void 0!==c&&c.hideIf&&""!==y.validation.hideIf&&(Le[b]=null===(f=y.validation)||void 0===f?void 0:f.hideIf,_e.push(b)),null!==(d=y.validation)&&void 0!==d&&d.regex&&""!==y.validation.regex&&(qe[b]=null===(g=y.validation)||void 0===g?void 0:g.regex,Ke.push(b));var E=y.name||y.placeholder||O(b||"");if(null!==(m=y.validation)&&void 0!==m&&m.searchByValue&&""!==y.validation.searchByValue&&(We.push(b),ot({additionalFields:[],resellerData:{resellerTypeId:y.validation.searchByValue,status:"Active"},widget:y},(function(e,t){!e&&t&&We.includes(b)&&(Ye[b]=function(e){return P(e).map((function(e){return{value:e.resellerId,name:"".concat(e.resellerName," ").concat(e.resellerId?"("+e.resellerId+")":""),key:"".concat(e.resellerName," ").concat(e.resellerId?"("+e.resellerId+")":"")}}))}(t)||[])})),h("searchResellersFoundByCIN",{type:E})),null!==(v=y.validation)&&void 0!==v&&v.dataSource&&""!==(null===(p=y.validation)||void 0===p?void 0:p.dataSource)){var S;We.push(b);var Z=null===(S=y.validation)||void 0===S?void 0:S.dataSource;if(Z&&Z.startsWith("${")&&Z.endsWith("}")){var C=Z.replace(/[^a-zA-Z ]/g,"");C.includes("extraFields")&&(C=C.replace("extraFields","extraFields.")),ze.push(C),He[C]=b,We.push(b)}else{var k;Z.startsWith("/")&&w(null===(k=y.validation)||void 0===k?void 0:k.dataSource).then((function(e){Ye[b]=[];var t=(null==e?void 0:e.values)||(null==e?void 0:e.data);if((null==t?void 0:t.length)>0){var n=y.validation.parseFromDataSource||{};t.forEach((function(e){var t="object"===(0,I.Z)(e);Ye[b].push({value:t?e[null==n?void 0:n.value]:e,name:t?e[null==n?void 0:n.name]:e,key:t?e[null==n?void 0:n.name]:e})}))}}))}}};for(var t in nt)e(t)}Ue=x(l,h,{controlableFieldIDs:_e,regexEnabledFieldsId:Ke,regexFields:qe}),U(0)}),[l]);var ot=function(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=a.message,r=void 0===i?h("searchResellersFoundByCIN",{type:"CIN"}):i,l=a.widgetId,o=void 0===l?"":l,s=null==e?void 0:e.widget;if(ue(!0),"msisdn"===o){var u,c=null==e||null===(u=e.resellerData)||void 0===u?void 0:u.resellerMSISDN,d="MSISDN";n=Z(c,d)}else if("customerId"===o){var m,v=null==e||null===(m=e.resellerData)||void 0===m?void 0:m.customerId,p="RESELLERID";n=Z(v,p)}else{var f;n=S(e,rt,0,null==s||null===(f=s.validation)||void 0===f?void 0:f.dataSource)}n.then((function(e){var n,a=null;if(0===e.resultCode&&e.resellers&&e.resellers.length>0){if(a=e.resellers,ve(P(a)),o&&et.includes(o)&&a.find((function(e){var t,n;return"active"===(null===(t=e.resellerData)||void 0===t||null===(n=t.status)||void 0===n?void 0:n.toLowerCase())}))){var i=h("alreadyExistCannotProceed",{type:O(o)});return Xe[o]=i,ae(o,i),setTimeout((function(){return re(o,"")}),3e3),V(!0),ve(null),E(i)}if(Me.length>0){var l,s=e.resellers[0],u=null==s||null===(l=s.additionalFields)||void 0===l?void 0:l.reduce((function(e,t){return e[t.name]=t.value,e}),{}),c=Pe({},J),d=[];for(var m in Me){var v=Me[m];c[v]=u[v],Ne.includes(v)&&d.push(u[v])}Ge=d,ie(c),r&&k("".concat(r))}}else if(0===e.resultCode&&null!=e&&e.resellerInfo&&null!=e&&null!==(n=e.resellerInfo)&&void 0!==n&&n.resellerData){var p,f;if("active"===(null===(p=(a=null==e?void 0:e.resellerInfo).resellerData)||void 0===p||null===(f=p.status)||void 0===f?void 0:f.toLowerCase())){var g=h("alreadyExistCannotProceed",{type:O(o)});return Xe[o]=g,ae(o,g),E(g)}}else{var y=h("noDataFoundByValue");o&&tt.includes(o)?(y=h("noDataFoundErrorThatMustExists",{type:O(o)}),ae(o,y),Xe[o]=y,E(y)):F(y),ve(null),a=null,Ge=[]}t(null,a)})).catch((function(e){E(T(e,h("anErrorOccurred"))),t(e,null)})).finally((function(){return ue(!1)}))},st=function(e,t){if(t&&t.widgetId){var n=t.widgetId,a=t.value;je.push(n),re(n,a)}},ut=function(e){if(at.includes(e)&&!it.includes(e)){var t,n;if(e.includes("extraFields.")){var a=e.split(".");n=J[a[0]][a[1]]}else n=J[e];it.push(e);var i={widgetId:e,values:(null===(t=n)||void 0===t?void 0:t.split(","))||[""]};tt.includes(e)&&(i.isSearchable=Ne.includes(e),i.isUnique=et.includes(e),i.mustExist=tt.includes(e)),Se(i),he(!0)}else it.splice(0,it.length)},ct=function(e,t){var n=e.widget.id,a=e.value,i=e.isGeneric,r=void 0===i?"additional":i,l=e.widget;at.includes(n)||delete Xe[n],$e.includes(n)?(ue(!0),Ze(Pe(Pe({},J),{},{validation:Je[n],widgetId:n}),(function(e,t){var i={type:O(n)};if(!e&&0===t.resultCode)return C(h("externalValidateSuccess",i)),dt(a,n,r,l);var o=T(e,h("externalValidateError",i));return Xe[n]=o,ae(n,o),setTimeout((function(){return re(n,"")}),3e3),V(!0),E(o)}))):dt(a,n,r,l)},dt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"additional",a=arguments.length>3?arguments[3]:void 0,i=Ne.includes(t),r=at.includes(t);i&&!r&&mt(e,t,n,a),Ve.includes(t)&&!i&&Ce({widgetId:t,value:e},st)},mt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"additional";if(e&&e.length>0&&!Ge.includes(e)){var a=t.split("."),i=a.length>1?a[1]:a[0],r="msisdn"===t?"resellerMSISDN":"extraFields.customer_national_identification_id"===t?"customer_national_identification_id":t,l=((0,_.Z)({},r,e),"additional"!==n?{additionalFields:[{name:i,value:e}],resellerData:{},lifecycleAttributes:{}}:{additionalFields:"extraFields.customer_national_identification_id"===t?[{name:"customer_id",value:e}]:[],resellerData:"extraFields.customer_national_identification_id"===t?{resellerTypeId:"",contractId:"",resellerId:"",countryCode:"",resellerMSISDN:"",resellerName:""}:(0,_.Z)({},r,e),lifecycleAttributes:{}});ot(l,(function(n,a){a&&Ve.includes(t)&&je.push(t),Re=a?t:"",n||a||!Ve.includes(t)||Ce({widgetId:t,value:e},st)}),{message:h("searchResellersFoundByCIN",{type:O(t)}),widgetId:t})}},vt=function(e){k("string"==typeof e?e:e[Object.keys(e)[0]])};return c?a.createElement(W.Z,{justifyContent:"center",alignItems:"center",display:"flex",flexDirection:"row",width:"100%",p:1,borderColor:"grey.200",border:.2,borderRadius:6},a.createElement(W.Z,{m:2},a.createElement(K.Z,{variant:"text",animation:"wave"}),a.createElement(K.Z,{variant:"rect",width:210,height:118,animation:"wave"})),a.createElement(W.Z,{m:2},a.createElement(K.Z,{variant:"text",animation:"wave"}),a.createElement(K.Z,{variant:"rect",width:210,height:118,animation:"wave"})),a.createElement(W.Z,{m:2},a.createElement(K.Z,{variant:"text",animation:"wave"}),a.createElement(K.Z,{variant:"rect",width:210,height:118,animation:"wave"}))):l?a.createElement(a.Fragment,null,a.createElement(De.AddToListPopup,{open:ge,setOpen:he,setData:function(e){if(e&&Ee.widgetId){var t,n=Ee.widgetId;if(delete Xe[n],(null==e||null===(t=e.errData)||void 0===t?void 0:t.length)>0){var a=e.errData.find((function(e){return!!e}));a&&(Xe[n]=a),a&&ae(n,a)}re(n,null==e?void 0:e.result)}else console.error(" 🧨 Something wrong while saving value for widget: ",e,Ee)},loading:c,data:Ee}),a.createElement(s.SeamlessStepper,{className:g.root,steps:l.sections.map((function(e){return{label:e.title}})),components:{Control:function(e){var t=e.goNext,n=e.goPrev,i=e.disableFirst,r=e.disableLast;return a.createElement(W.Z,null,a.createElement("div",{className:(0,z.default)(g.dividerSpacing)}),a.createElement(s.SeamlessButton,{onClick:function(){n(),U(H-1),V(!1)},disabled:i,className:(0,z.default)(g.element,g.button,g.customButtonDesign),color:"primary",variant:"contained"},h("previous")),a.createElement(s.SeamlessButton,{className:(0,z.default)(g.element,g.btnSpacing,g.button,g.customButtonDesign,g.btnPrimary),onClick:function(){!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];te().then((function(n){var a=Object.values(n),i=Object.keys(n);if(a.length>0)return ae(i[0],a[0]),vt(a[0]);var r=j(J,h,{activeValidationRules:Ue[H],isUniqueFieldIds:et,isExistFieldIds:tt,invalidFields:Xe,controlableFields:Le,controlableFieldIDs:_e,resultFoundForWidgetID:Re}),l=r.errMsg,o=r.id;l?(ae(o,l),k(l)):(e(),U(t?H+1:H-1))}))}(t)},disabled:r||N,color:"primary",variant:"contained"},h("next")),a.createElement("div",{className:(0,z.default)(g.dividerSpacing)}))}}},l.sections.map((function(e,t){return a.createElement(we,{metaData:{searchByFields:Ye,searchByFieldsId:We,controlableFieldIDs:_e,controlableFields:Le,searchResellersData:me,CinLoading:se,resultFoundForWidgetID:Re,searchableFieldsId:Ne,dataSourceFieldIDs:ze,dataSourceFields:He},setDisableNext:V,disableNext:N,type:p,section:e,values:J,handleChange:X,setFieldValue:re,blurHandler:ct,focusHandler:ut,validateForm:te,errors:ne})}))),H===l.sections.length-1&&a.createElement(a.Fragment,null,a.createElement(s.SeamlessButton,{onClick:function(e){te().then((function(e){var t=Object.values(e);if(t.length>0)vt(t[0]);else{var n=j(J,h,{activeValidationRules:Ue[H],isUniqueFieldIds:et,isExistFieldIds:tt,invalidFields:Xe,controlableFields:Le,controlableFieldIDs:_e}),a=n.errMsg,i=n.id;a?(ae(i,a),k(a)):Q()}}))},className:(0,z.default)(g.element,g.button,g.customButtonDesign),color:"primary",variant:"contained"},h("submit")),a.createElement(s.SeamlessButton,{onClick:ee,className:(0,z.default)(g.element,g.button),color:"primary",variant:"outlined"},h("reset")))):null},ot=function(e){var t=e.type,n=e.component;return a.createElement(V,{type:t,component:n,operationType:"REGISTER"},(function(e){var t=e.template,n=e.loading,i=e.data,r=e.type;return a.createElement(lt,{template:t,loading:n,data:i,type:r})}))};var st=n(60905),ut=(0,q.Z)((function(e){return(0,L.Z)({button:{margin:e.spacing(1)},btnSpacing:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},spacingTop:{marginTop:e.spacing(3)},element:{margin:e.spacing(1)},widthMax:{width:"90%"}})}));const ct=function(e){var t=e.onSubmit,n=e.initialValues,i=void 0===n?{searchKey:"customerId",searchValue:"",onlyPending:!1}:n,r=(0,u.useTranslation)().t,l=ut(),o=(0,Y.TA)({initialValues:i,onSubmit:t,enableReinitialize:!0}),c=o.values,d=o.handleChange,m=o.handleSubmit,v=o.handleReset;return a.createElement(a.Fragment,null,a.createElement(W.Z,{id:"search-kyc-form-fields",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},a.createElement(st.Z,{item:!0,xs:2},a.createElement(s.SeamlessDropDown,{id:"search-key-input-box",className:(0,z.default)(l.element,l.widthMax),value:c.searchKey,name:"searchKey",label:r("searchKey"),options:[{value:"customerId",key:"Customer ID"},{value:"firstName",key:"First Name"},{value:"kycStatus",key:"KYC Status"},{value:"msisdn",key:"MSISDN"}],onChange:d})),a.createElement(st.Z,{item:!0,xs:2},a.createElement(s.SeamlessInput,{id:"search-value-input-box",value:c.searchValue,className:l.element,name:"searchValue",label:r("searchValue"),onChange:d})),a.createElement(st.Z,{item:!0,xs:2},a.createElement(s.Check,{id:"only-pending-check-box",handleChange:function(e){return d({target:{value:e.target.checked,name:"onlyPending"}})},checked:c.onlyPending,className:l.element,name:"onlyPending",color:"primary",label:r("onlyPending","Only Pending")})),a.createElement(st.Z,{item:!0,xs:6},a.createElement(s.SeamlessButton,{id:"search-kyc-submit-button",onClick:function(e){return m()},variant:"contained",color:"primary"},r("searchKycButton")),a.createElement(s.SeamlessButton,{className:(0,z.default)(l.element,l.button),onClick:function(e){v(e),m()},color:"primary",variant:"outlined"},r("resetButton")))))};var dt=n(77277),mt=n(38592),vt=n(24276),pt=n(64874),ft=n(60552),gt=n(41744),ht=n.n(gt),yt=n(27068),bt=n(67801),Et=(0,q.Z)((function(e){return(0,L.Z)({root:{marginTop:e.spacing(5),width:"100%",padding:e.spacing(2)},formWrapper:{padding:"".concat(e.spacing(1.5)," 0")},formWidget:{marginTop:e.spacing(5),"& .MuiFormControl-root":{marginBottom:e.spacing(1.5),marginRight:e.spacing(1.5)},"& .MuiTypography-root":{marginBottom:e.spacing(1)}},saveBtn:{marginTop:e.spacing(3)},modalImageSize:{maxWidth:70},dialogWrapper:{textAlign:"center","& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginTop:e.spacing(3),marginBottom:e.spacing(3)},btnSpace:{marginRight:e.spacing(2)}})}));const St=function(e){var t=e.loading,n=e.kycs,r=e.approval,c=e.page,m=e.perPage,p=e.onPageChange,f=e.onPageSizeChange,g=e.totalCount,h=e.sortModel,y=e.onSortModelChange,b=Et(),E=d(),S=E.showErrorMessage,w=E.showSuccessMessage,Z=l()().checkPermission,I=(0,u.useTranslation)().t,C=(0,i.useHistory)(),k=a.useState(!1),F=(0,o.Z)(k,2),x=F[0],D=F[1],O=a.useState(!1),T=(0,o.Z)(O,2),P=T[0],B=T[1],R=a.useState(0),j=(0,o.Z)(R,2),N=j[0],M=j[1],V=a.useState(0),_=(0,o.Z)(V,2),A=_[0],K=_[1],W=a.useState(""),q=(0,o.Z)(W,2),L=q[0],Y=q[1],z=function(){D(!1)},H=function(){B(!1)},U=[{field:"customerId",headerName:I("customerId"),sortable:!0,width:150},{field:"msisdn",headerName:I("msisdn"),sortable:!0,width:150},{field:"firstName",headerName:I("firstName"),sortable:!0,width:150},{field:"createrId",headerName:I("createrId"),sortable:!0,width:150},{field:"kycStatus",headerName:I("kycStatus"),sortable:!0,width:150},{field:"dateCreated",headerName:I("dateCreated"),sortable:!0,width:150,valueGetter:function(e){return e.value,(0,yt.Z)(new Date(e.value),"yyyy/MM/dd")}},{field:"actions",headerName:I("actions"),sortable:!1,filterable:!1,renderCell:function(e){return a.createElement("div",null,a.createElement(mt.Z,{size:"small",color:"primary","aria-label":"group action buttons"},a.createElement(dt.Z,{id:"view-kyc-button-".concat(e.row.id),component:i.Link,to:r?"/home/kyc/approval/view/"+encodeURIComponent(e.getValue("customerId").toString()):"/home/kyc/view/"+encodeURIComponent(e.getValue("customerId").toString())},a.createElement(ft.Z,{fontSize:"small"})),Z(bt.Z.editKYCRecord)&&a.createElement(dt.Z,{id:"edit-kyc-button-".concat(e.row.id),component:i.Link,to:r?"/home/kyc/approval/edit/"+encodeURIComponent(e.getValue("customerId").toString()):"/home/kyc/edit/"+encodeURIComponent(e.getValue("customerId").toString())},a.createElement(pt.Z,{fontSize:"small"})),r&&Z(bt.Z.approveKYCRecord)&&a.createElement(dt.Z,{id:"approve-kyc-button-".concat(e.row.id),onClick:function(){D(!0),M(e.getValue("customerId"))}},a.createElement(vt.Z,{fontSize:"small"},"thumb_up")),r&&Z(bt.Z.rejectKYCRecord)&&a.createElement(dt.Z,{id:"reject-kyc-button-".concat(e.row.id),onClick:function(){B(!0),K(e.getValue("customerId"))}},a.createElement(vt.Z,{fontSize:"small"},"thumb_down"))))},width:r&&(Z(bt.Z.approveKYCRecord)||Z(bt.Z.rejectKYCRecord))?200:150}];return a.createElement(a.Fragment,null,r&&a.createElement(s.SeamlessDialog,{id:"approve-dialog",open:x,onClose:z,className:b.dialogWrapper,maxWidth:"md",fullWidth:!0},a.createElement(a.Fragment,null,a.createElement("div",{className:b.modalContentSpacing},a.createElement($.Z,{gutterBottom:!0,id:"transition-modal-title",variant:"h6",className:b.fontHeavy},I("approveCustomerConfirmationTitle"),": ",N),a.createElement($.Z,{id:"transition-modal-description",variant:"body1"},I("approveCustomerConfirmationText")," ",N)),a.createElement(s.SeamlessButton,{id:"no-button",type:"button",variant:"outlined",color:"primary",className:b.btnSpace,onClick:z},I("noConfirmationButton")),a.createElement(s.SeamlessButton,{id:"yes-button",type:"button",variant:"contained",color:"primary",onClick:function(){var e;(e=n.find((function(e){return e.customerId===N})),v("/kyc/v2/kyc/approve",{method:"POST",body:e})).then((function(e){w(e),D(!1),C.push("/home/kyc/approval/")})).catch((function(e){return S(e)}))}},I("yesConfirmationButton")))),r&&a.createElement(s.SeamlessDialog,{id:"reject-dialog",open:P,onClose:H,className:b.dialogWrapper,maxWidth:"md",fullWidth:!0},a.createElement(a.Fragment,null,a.createElement("div",{className:b.modalContentSpacing},a.createElement($.Z,{gutterBottom:!0,id:"transition-modal-title",variant:"h6",className:b.fontHeavy},I("rejectCustomerConfirmationTitle"),": ",A),a.createElement($.Z,{id:"transition-modal-description",variant:"body1"},I("rejectCustomerConfirmationText")," ",A),a.createElement(s.SeamlessInput,{id:"reject-reason-input-box",fullWidth:!0,name:"rejectReason",value:L,onChange:function(e){Y(e.target.value)},label:I("rejectReason")})),a.createElement(s.SeamlessButton,{id:"no-button",type:"button",variant:"outlined",color:"primary",className:b.btnSpace,onClick:H},I("noConfirmationButton")),a.createElement(s.SeamlessButton,{id:"yes-button",type:"button",variant:"contained",color:"primary",onClick:function(){if(""!==L.trim()){var e=n.find((function(e){return e.customerId===A}));e.rejectReason=L,function(e){return v("/kyc/v2/kyc/reject",{method:"POST",body:e})}(e).then((function(e){w(e),B(!1),C.push("/home/kyc/approval/")})).catch((function(e){return S(e)}))}else S("Please fill the reject reason")}},I("yesConfirmationButton")))),a.createElement(ht(),{onPageChange:function(e){p(e.page)},onPageSizeChange:function(e){p(0),f(e.pageSize)},pagination:!0,paginationMode:"server",page:c,pageSize:m,rowCount:g,rows:n,loading:t,columns:U,getRowId:function(e){return e.customId},columnBuffer:3,sortingMode:"server",sortModel:h,onSortModelChange:function(e){e.sortModel!==h&&y(e.sortModel)},onFilterModelChange:function(e){p(0),n.filter((function(t){return t.customerId==e.filterModel.items[0].value}))}}))};function wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(n),!0).forEach((function(t){(0,_.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const It=function(){var e=d().showErrorMessage,t=a.useState([]),n=(0,o.Z)(t,2),i=n[0],r=n[1],l=a.useState(!1),s=(0,o.Z)(l,2),u=s[0],c=s[1],m=a.useState(0),v=(0,o.Z)(m,2),p=v[0],f=v[1],g=a.useState({onlyPending:!1,searchKey:"customerId",searchValue:"",sortBy:"desc",sortType:"startTime"}),y=(0,o.Z)(g,2),b=y[0],E=y[1],S=a.useState([{field:"dateCreated",sort:"asc"}]),w=(0,o.Z)(S,2),Z=w[0],I=w[1],C=(0,gt.useServerTable)({page:0,perPage:20,order:"desc",orderBy:"startTime",filter:{}});return a.useEffect((function(){b&&(c(!0),h(Zt(Zt({},b),{},{page:C.page,size:C.perPage,sortBy:Z[0].field,sortType:Z[0].sort})).then((function(e){e.customerPage.content.map((function(e,t){return e.customId=t})),r(e.customerPage.content),f(e.totalTransactions)})).catch((function(t){return e(t.message||t.resultMessage)})).finally((function(){return c(!1)})))}),[b,Z]),a.createElement(a.Fragment,null,a.createElement(W.Z,{mb:2},a.createElement(ct,{onSubmit:function(e){C.onPageChange(0),E(e)}})),a.createElement("div",{style:{height:600,width:"100%"}},a.createElement(St,(0,H.Z)({kycs:i,loading:u},C,{totalCount:p,sortModel:Z,onSortModelChange:function(e){e.length>0&&I(e)}}))))};function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(n),!0).forEach((function(t){(0,_.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ft=(0,q.Z)((function(e){return(0,L.Z)({button:{margin:e.spacing(1)},element:{margin:e.spacing(1)},dateField:{margin:e.spacing(1),width:"100%",marginTop:e.spacing(1)},dividerSpacing:{marginBottom:e.spacing(3)},btnSpacing:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},spacingTop:{marginTop:e.spacing(3)},card:{backgroundColor:"#F6F6F6"},btnPrimary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main},customButtonDesign:{padding:"8px 40px !important",fontFamily:"Noto Sans",fontWeight:400,lineHeight:1.38,borderRadius:"7px !important"},customBorder:{border:"1px solid #00387a80",color:e.palette.primary.main}})})),xt="",Dt=[],Ot=[],Tt=[],Pt=[],Bt=[],Rt=[],jt=[],Nt=[],Mt=[],Vt={},_t={},At={},Kt=[],Wt={},qt=[],Lt=[],Yt=[],zt={},Ht={},Ut=[],Gt=[],$t=[],Jt=[],Xt={},Qt=window.config.resellerAdditionalConfig.BasicResellerInfoAPILimit||50;const en=function(e){var t=e.data,n=e.template,i=e.onFormSubmit,r=e.editView,l=Ft(),c=(0,u.useTranslation)().t,m=d(),v=m.showWarningMessage,p=m.showErrorMessage,f=m.showInfoMessage,g=m.showSuccessMessage,h=a.useState(0),y=(0,o.Z)(h,2),b=y[0],E=y[1],C=a.useState(!1),k=(0,o.Z)(C,2),F=(k[0],k[1]),D=a.useState([]),B=(0,o.Z)(D,2),R=(B[0],B[1]),N=a.useState(!0),M=(0,o.Z)(N,2),V=M[0],K=M[1],q=Ie()(null).validateRequest,L=ke()(null).generateIdByFieldName,H=((new Date).toISOString().split("T")[0],(0,Y.TA)({initialValues:t,onSubmit:function(e){return i&&i(e)},validationSchema:qt[b],enableReinitialize:!0})),U=H.errors,G=H.values,$=H.setFieldValue,J=H.setValues,X=H.setFieldError,Q=H.handleChange,ee=H.handleSubmit,te=H.handleReset,ne=H.validateForm;a.useEffect((function(){if((Ut=function(e){return e&&e.sections?(0,A.Z)(e.sections.map((function(e){return e.widgets||e.questions}))).flat(1):[]}(n))&&Ut.length>0){var e=function(e){var t,n,a,i,r,l,o,s,u,d,m,v,p,f,g,h,y,b,E,S=Ut[e],Z=S.id;S.unique&&Gt.push(Z),null!==(t=S.validation)&&void 0!==t&&t.mustExist&&""!==S.validation.mustExist&&$t.push(Z),null!==(n=S.validation)&&void 0!==n&&n.listViewModal&&S.validation.listViewModal&&Jt.push(Z),null!==(a=S.validation)&&void 0!==a&&a.externalValidation&&""!==S.validation.externalValidation&&(zt[Z]=S.validation.externalValidation,Yt.push(Z)),null!=S&&null!==(i=S.validation)&&void 0!==i&&i.replaceTextWith&&""!==(null==S||null===(r=S.validation)||void 0===r?void 0:r.replaceTextWith)&&(Bt[Z]=null==S||null===(y=S.validation)||void 0===y?void 0:y.replaceTextWith,Bt.push(Z)),null!==(l=S.validation)&&void 0!==l&&l.parsedValueBeforeSubmit&&""!==S.validation.parsedValueBeforeSubmit&&(Xt[Z]=S.validation.parsedValueBeforeSubmit),null!==(o=S.validation)&&void 0!==o&&o.searchable&&null!==(s=S.validation)&&void 0!==s&&s.searchable&&Ot.push(Z),null!==(u=S.validation)&&void 0!==u&&u.autoGenerate&&!0===S.validation.autoGenerate&&Pt.push(Z),null!==(d=S.validation)&&void 0!==d&&d.perfix&&!0===S.validation.prefix&&jt.push(Z),null!==(m=S.validation)&&void 0!==m&&m.preFill&&!0===S.validation.preFill&&Tt.push(Z),null!==(v=S.validation)&&void 0!==v&&v.hideIf&&""!==S.validation.hideIf&&(_t[Z]=null===(b=S.validation)||void 0===b?void 0:b.hideIf,Rt.push(Z)),null!==(p=S.validation)&&void 0!==p&&p.regex&&""!==S.validation.regex&&(Vt[Z]=null===(E=S.validation)||void 0===E?void 0:E.regex,Nt.push(Z));var C=S.name||S.placeholder||O(Z||"");if(null!==(f=S.validation)&&void 0!==f&&f.searchByValue&&""!==S.validation.searchByValue&&(Mt.push(Z),ue({additionalFields:[],resellerData:{resellerTypeId:S.validation.searchByValue,status:"Active"}},(function(e,t){!e&&t&&Mt.includes(Z)&&(At[Z]=function(e){return P(e).map((function(e){return{value:e.resellerId,name:"".concat(e.resellerName," ").concat(e.resellerId?"("+e.resellerId+")":""),key:"".concat(e.resellerName," ").concat(e.resellerId?"("+e.resellerId+")":"")}}))}(t)||[])})),c("searchResellersFoundByCIN",{type:C})),null!==(g=S.validation)&&void 0!==g&&g.dataSource&&""!==(null===(h=S.validation)||void 0===h?void 0:h.dataSource)){var k,F;Mt.push(Z);var x=null===(k=S.validation)||void 0===k?void 0:k.dataSource;if(x&&x.startsWith("${")&&x.endsWith("}")){var D=x.replace(/[^a-zA-Z ]/g,"");D.includes("extraFields")&&(D=D.replace("extraFields","extraFields.")),Kt.push(D),Wt[D]=Z,Mt.push(Z)}w(null===(F=S.validation)||void 0===F?void 0:F.dataSource).then((function(e){At[Z]=[];var t=(null==e?void 0:e.values)||(null==e?void 0:e.data);if((null==t?void 0:t.length)>0){var n=S.validation.parseFromDataSource||{};t.forEach((function(e){var t="object"===(0,I.Z)(e);At[Z].push({value:t?e[null==n?void 0:n.value]:e,name:t?e[null==n?void 0:n.name]:e,key:t?e[null==n?void 0:n.name]:e})}))}}))}};for(var t in Ut)e(t)}qt=x(n,c,{controlableFieldIDs:Rt,regexEnabledFieldsId:Nt,regexFields:Vt}),E(0)}),[n]);var ae=a.useMemo((function(){var e;return(null==n||null===(e=n.sections)||void 0===e?void 0:e.map((function(e){return{label:e.title}})))||[]}),[n]);if(ae.length<=0)return null;var ie=function(e){},re=function(e,t){if(t&&t.widgetId){var n=t.widgetId,a=t.value;Dt.push(n),$(n,a)}},le=function(e,t){var n=e.widget.id,a=e.value,i=e.isGeneric,r=void 0===i?"additional":i;Jt.includes(n)||delete Ht[n],Yt.includes(n)?(F(!0),q(kt(kt({},G),{},{validation:zt[n],widgetId:n}),(function(e,t){var i={type:O(n)};if(!e&&0===t.resultCode)return g(c("externalValidateSuccess",i)),oe(a,n,r);var l=T(e,c("externalValidateError",i));return Ht[n]=l,X(n,l),setTimeout((function(){return $(n,"")}),3e3),K(!0),p(l)}))):oe(a,n,r)},oe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"additional",a=Ot.includes(t),i=Jt.includes(t);a&&!i&&se(e,t,n),Pt.includes(t)&&!a&&L({widgetId:t,value:e},re)},se=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"additional";if(e&&e.length>0&&!Lt.includes(e)){var a=t.split("."),i=a.length>1?a[1]:a[0],r="msisdn"===t?"resellerMSISDN":"extraFields.customer_national_identification_id"===t?"customer_national_identification_id":t,l=((0,_.Z)({},r,e),"additional"!==n?{additionalFields:[{name:i,value:e}],resellerData:{},lifecycleAttributes:{}}:{additionalFields:"extraFields.customer_national_identification_id"===t?[{name:"customer_id",value:e}]:[],resellerData:"extraFields.customer_national_identification_id"===t?{resellerTypeId:"",contractId:"",resellerId:"",countryCode:"",resellerMSISDN:"",resellerName:""}:(0,_.Z)({},r,e),lifecycleAttributes:{}});ue(l,(function(n,a){a&&Pt.includes(t)&&Dt.push(t),xt=a?t:"",n||a||!Pt.includes(t)||L({widgetId:t,value:e},re)}),{message:c("searchResellersFoundByCIN",{type:O(t)}),widgetId:t})}},ue=function(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=a.message,r=void 0===i?c("searchResellersFoundByCIN",{type:"CIN"}):i,l=a.widgetId,o=void 0===l?"":l;if(F(!0),"msisdn"===o){var s,u=null==e||null===(s=e.resellerData)||void 0===s?void 0:s.resellerMSISDN,d="MSISDN";n=Z(u,d)}else n=S(e,Qt,0);n.then((function(e){var n,a=null;if(0===e.resultCode&&e.resellers&&e.resellers.length>0){if(a=e.resellers,R(P(a)),o&&Gt.includes(o)&&a.find((function(e){var t,n;return"active"===(null===(t=e.resellerData)||void 0===t||null===(n=t.status)||void 0===n?void 0:n.toLowerCase())}))){var i=c("alreadyExistCannotProceed",{type:O(o)});return Ht[o]=i,X(o,i),setTimeout((function(){return $(o,"")}),3e3),K(!0),R(null),p(i)}if(Tt.length>0){var l,s=e.resellers[0],u=null==s||null===(l=s.additionalFields)||void 0===l?void 0:l.reduce((function(e,t){return e[t.name]=t.value,e}),{}),d=kt({},G),m=[];for(var g in Tt){var h=Tt[g];d[h]=u[h],Ot.includes(h)&&m.push(u[h])}Lt=m,J(d),r&&v("".concat(r))}}else if(0===e.resultCode&&null!=e&&e.resellerInfo&&null!=e&&null!==(n=e.resellerInfo)&&void 0!==n&&n.resellerData){var y,b;if("active"===(null===(y=(a=null==e?void 0:e.resellerInfo).resellerData)||void 0===y||null===(b=y.status)||void 0===b?void 0:b.toLowerCase())){var E=c("alreadyExistCannotProceed",{type:O(o)});return Ht[o]=E,X(o,E),p(E)}}else{var S=c("noDataFoundByValue");o&&$t.includes(o)?(S=c("noDataFoundErrorThatMustExists",{type:O(o)}),X(o,S),Ht[o]=S,p(S)):f(S),R(null),a=null,Lt=[]}t(null,a)})).catch((function(e){p(T(e,c("anErrorOccurred"))),t(e,null)})).finally((function(){return F(!1)}))},ce=function(e){v("string"==typeof e?e:e[Object.keys(e)[0]])};return n?a.createElement(a.Fragment,null,a.createElement(s.SeamlessStepper,{steps:ae,components:{Control:function(e){var t=e.goNext,n=e.goPrev,i=e.disableFirst,r=e.disableLast;return a.createElement(W.Z,null,a.createElement("div",{className:(0,z.default)(l.dividerSpacing)}),a.createElement(s.SeamlessButton,{id:"previous-button",onClick:function(){n(),E(b-1),K(!1)},disabled:i,className:(0,z.default)(l.element,l.button,l.customButtonDesign,l.btnPrimary),color:"primary",variant:"contained"},c("previous")),a.createElement(s.SeamlessButton,{id:"next-button",className:(0,z.default)(l.element,l.btnSpacing,l.button,l.customButtonDesign,l.btnPrimary),onClick:function(){!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];ne().then((function(n){var a=Object.values(n),i=Object.keys(n);if(a.length>0)return X(i[0],a[0]),ce(a[0]);var r=j(G,c,{activeValidationRules:qt[b],isUniqueFieldIds:Gt,isExistFieldIds:$t,invalidFields:Ht,controlableFields:_t,controlableFieldIDs:Rt,resultFoundForWidgetID:xt}),l=r.errMsg,o=r.id;l?(X(o,l),v(l)):(e(),E(t?b+1:b-1))}))}(t)},disabled:r||V,color:"primary",variant:"contained"},c("next")),a.createElement("div",{className:(0,z.default)(l.dividerSpacing)}))}}},n.sections.map((function(e,n){return a.createElement(we,{metaData:{searchByFields:At,searchByFieldsId:Mt,controlableFieldIDs:Rt,controlableFields:_t,searchableFieldsId:Ot,dataSourceFieldIDs:Kt,dataSourceFields:Wt,replaceTextWith:Bt},setDisableNext:K,disableNext:V,section:e,key:e.title,values:G,editView:r,handleChange:Q,type:t.customerType,validateForm:ne,focusHandler:ie,setFieldValue:$,blurHandler:le,errors:U})}))),a.createElement(st.Z,{item:!0,xs:12},a.createElement(s.SeamlessButton,{id:"update-button",onClick:function(e){ne().then((function(e){var t=Object.values(e);if(t.length>0)ce(t[0]);else{var n=j(G,c,{activeValidationRules:qt[b],isUniqueFieldIds:Gt,isExistFieldIds:$t,invalidFields:Ht,controlableFields:_t,controlableFieldIDs:Rt}),a=n.errMsg,i=n.id;a?(X(i,a),v(a)):ee()}}))},className:(0,z.default)(l.element,l.button,l.customButtonDesign,l.btnPrimary),color:"primary",variant:"contained"},c("update")),a.createElement(s.SeamlessButton,{id:"reset-button",onClick:te,className:(0,z.default)(l.element,l.button,l.customBorder,l.customButtonDesign),color:"primary",variant:"outlined"},c("reset")))):null};var tn=n(94339),nn=n(24579),an=n(85256),rn=n(27616),ln=n(8284),on=n(70660),sn=n(9692),un=(0,q.Z)((function(e){return(0,L.Z)({fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14,marginLeft:10},fieldValue:{fontSize:14}})}));const cn=function(e){var t,n,i,r=e.title,l=e.value,o=e.skipIfEmpty,s=void 0===o||o,c=(e.id,e.type),d=e.widget,m=(0,u.useTranslation)().t,v=un();if((!l||"string"==typeof l&&"NULL"==(null===(t=l)||void 0===t?void 0:t.toUpperCase()))&&s)return null;if("date"===c){var p=l;l=p.includes("T")?p.split("T")[0]:p}if("extraFields.contractId"===(null==d?void 0:d.id)){var f,g=l;null!=d&&d.options&&l&&(g=null==d||null===(f=d.options[0])||void 0===f?void 0:f.name),l=g}return a.createElement(a.Fragment,null,a.createElement(st.Z,{item:!0,xs:12,sm:3},a.createElement($.Z,{className:v.fieldHeading,variant:"h6"},m("".concat(r),O(r)))),a.createElement(st.Z,{item:!0,xs:12,sm:3},a.createElement($.Z,{className:v.fieldValue,variant:"subtitle2"},null!=d&&null!==(n=d.validation)&&void 0!==n&&n.replaceTextWith?l.replace(/./g,null==d||null===(i=d.validation)||void 0===i?void 0:i.replaceTextWith):l)))};var dn=n(38016),mn=(0,q.Z)((function(e){return(0,L.Z)({card:{backgroundColor:"#F6F6F6"},button:{margin:e.spacing(2)},dialogWrapper:{textAlign:"center","& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginTop:e.spacing(3),marginBottom:e.spacing(3)},btnSpace:{marginRight:e.spacing(2)},rowSpacing:{marginBottom:e.spacing(2)}})})),vn=[],pn=!1;const fn=function(e){var t,n=e.loading,r=e.customer,o=e.approval,c=e.templateData,d=(0,u.useTranslation)().t,m=mn(),v=l()().checkPermission;return a.useEffect((function(){return pn=null,function(){return pn=null}}),[]),c&&(null==c||null===(t=c.sections)||void 0===t?void 0:t.length)>0&&(vn=null==c?void 0:c.sections),n?a.createElement(W.Z,{justifyContent:"flex-start",display:"flex",flexDirection:"column",width:"100%",p:1,borderColor:"grey.200",border:.2,borderRadius:6},a.createElement(W.Z,{m:2,width:"30%"},a.createElement(K.Z,{height:40,variant:"text",animation:"wave"}),a.createElement(K.Z,{height:40,variant:"text",animation:"wave"})),a.createElement(W.Z,{m:2,width:"30%"},a.createElement(K.Z,{height:20,variant:"text",animation:"wave"}),a.createElement(K.Z,{height:20,variant:"text",animation:"wave"})),a.createElement(W.Z,{m:2,width:"30%"},a.createElement(K.Z,{height:20,variant:"text",animation:"wave"}),a.createElement(K.Z,{height:20,variant:"text",animation:"wave"}))):a.createElement(W.Z,{p:2,mb:2,border:.2,borderColor:"grey.200",borderRadius:6,display:"flex",flexDirection:"column"},a.createElement(st.Z,{container:!0,spacing:2},vn.map((function(e,t){var n=(null==e?void 0:e.widgets)||(null==e?void 0:e.questions);return a.createElement(a.Fragment,null,t>0&&a.createElement(st.Z,{item:!0,xs:12},a.createElement(an.Z,{variant:"middle"})),a.createElement(st.Z,{item:!0,xs:12,key:t},a.createElement($.Z,{variant:"subtitle1",color:"primary"},e.title)),n&&n.filter((function(e){return null==e?void 0:e.viewable})).map((function(e){var t=null==e?void 0:e.id;return t.includes("uploadReferences.")?pn?null:(pn=!0,a.createElement(st.Z,{item:!0,xs:12},a.createElement(rn.Z,null,a.createElement(ln.Z,{expandIcon:a.createElement(dn.Z,null),"aria-controls":"panel1a-content",id:"panel1a-header"},a.createElement(st.Z,{item:!0,xs:12},a.createElement($.Z,{variant:"subtitle1"},d("documents")))),a.createElement(on.Z,null,a.createElement(tn.Z,{elevation:1,className:(0,z.default)(m.card)},a.createElement(nn.Z,null,a.createElement(st.Z,{container:!0,spacing:2},Boolean(null==r?void 0:r.uploadReferences)&&Object.keys(r.uploadReferences).map((function(e,t){return a.createElement(st.Z,{item:!0,xs:12,key:t},a.createElement("a",{href:(0,sn.getSrc)(r.uploadReferences[e]),target:"_blank",download:!0},d(e)))}))))))))):t.includes("extraFields.")?function(e){var t=(null==e?void 0:e.id).split("."),n=t[1];return a.createElement(cn,{skipIfEmpty:!1,title:"".concat(null==e?void 0:e.name),value:null==r?void 0:r.extraFields[n],id:t[1],widget:e,type:null==e?void 0:e.type})}(e):a.createElement(cn,{skipIfEmpty:!1,title:"".concat(null==e?void 0:e.name),value:r[t],type:null==e?void 0:e.type,widget:e})})))})),a.createElement(st.Z,{item:!0,style:{marginTop:30},xs:12},a.createElement(an.Z,{variant:"middle"})),a.createElement(st.Z,{container:!0,item:!0,xs:12},r&&o&&v(bt.Z.editKYCRecordInApproval)&&a.createElement(s.SeamlessButton,{component:i.Link,to:o?"/home/kyc/approval/edit/"+(null==r?void 0:r.customerId):"/home/kyc/edit/"+(null==r?void 0:r.customerId),variant:"contained",color:"primary",className:(0,z.default)(m.button)},d("edit")))))};var gn,hn,yn,bn,En=n(66455),Sn=n.n(En),wn=window.config.defaultTemplate||"",Zn=null!==(gn=null===(hn=window)||void 0===hn||null===(yn=hn.config)||void 0===yn||null===(bn=yn.kyc)||void 0===bn?void 0:bn.isResellerTypesChildren)&&void 0!==gn&&gn;const In=function(){var e,t,n,i=(0,u.useTranslation)().t,r=(0,Oe.useSelector)((function(e){return e.auth})).user,l=a.useState(wn),c=(0,o.Z)(l,2),d=c[0],m=c[1],v=a.useState(!!wn),p=(0,o.Z)(v,2),f=p[0],g=p[1];return r&&null!==(e=r.info)&&void 0!==e&&e.resellerData&&(t=null===(n=r.info.resellerData)||void 0===n?void 0:n.resellerTypeId),a.createElement(s.SeamlessContainer,{title:i("registerKycPageTitle"),description:i("registerKycPageDescription")},!wn&&a.createElement(Sn(),{name:"resellerType",value:d,handleChange:function(e){m(e.target.value),g(!0)},resellerType:t,onlyAllowedTypes:!Zn,label:i("selectGroup","Please select group"),helperText:i("pleaseSelectGroup"),required:!0}),f&&a.createElement(ot,{type:d,component:"kyc"}))},Cn=function(){var e=l()().AccessControlled;return a.createElement(i.Switch,null,a.createElement(i.Route,null,a.createElement(e,{feature:bt.Z.registerKYC},a.createElement(In,null))))},kn=function(){var e=(0,u.useTranslation)().t,t=d().showErrorMessage,n=a.useState([]),i=(0,o.Z)(n,2),r=i[0],l=i[1],c=a.useState(!1),m=(0,o.Z)(c,2),v=m[0],p=m[1],f=a.useState(0),g=(0,o.Z)(f,2),h=g[0],b=g[1],E=a.useState([{field:"dateCreated",sort:"desc"}]),S=(0,o.Z)(E,2),w=S[0],Z=S[1],I=(0,gt.useServerTable)({page:0,perPage:20,order:"desc",orderBy:"startTime",filter:{}});return a.useEffect((function(){p(!0),y({page:I.page,size:I.perPage,sortBy:w[0].field,sortType:w[0].sort}).then((function(e){e.customerPage.content.map((function(e,t){return e.customId=t})),l(e.customerPage.content),b(e.totalTransactions)})).catch((function(e){return t(e.message)})).finally((function(){return p(!1)}))}),[I.page,I.perPage,w]),a.createElement(s.SeamlessContainer,{title:e("pendingKycPageTitle"),description:e("pendingKycPageDescription")},a.createElement("div",{style:{height:600,width:"100%"}},a.createElement(St,(0,H.Z)({kycs:r,loading:v,approval:!0},I,{totalCount:h,sortModel:w,onSortModelChange:function(e){e.length>0&&Z(e)}}))))},Fn=function(){var e=l()().AccessControlled;return a.createElement(i.Switch,null,a.createElement(i.Route,null,a.createElement(e,{feature:bt.Z.approveKYC},a.createElement(kn,null))))},xn=function(){var e=(0,u.useTranslation)().t,t=l()().AccessControlled;return a.createElement(t,{feature:bt.Z.searchKYC},a.createElement(s.SeamlessContainer,{title:e("searchKycPageTitle"),description:e("searchKycPageDescription")},a.createElement(It,null)))};var Dn=n(96299);const On=function(e){var t,n=e.approval,r=(0,i.useHistory)(),c=d().showErrorMessage,m=(0,i.useParams)().id,p=(0,u.useTranslation)().t,f=l()().AccessControlled,g=a.useState(!1),b=(0,o.Z)(g,2),S=b[0],w=b[1],Z=a.useState(),I=(0,o.Z)(Z,2),C=I[0],k=I[1],x=a.useState([]),D=(0,o.Z)(x,2),O=D[0],T=D[1],P=a.useState(!1),B=(0,o.Z)(P,2),R=B[0],j=B[1],N=a.useState(""),M=(0,o.Z)(N,2),V=M[0],_=M[1],A=a.useState(),K=(0,o.Z)(A,2),Y=K[0],z=K[1],H=a.useState({}),G=(0,o.Z)(H,2),J=(G[0],G[1]),X=(0,q.Z)((function(e){return(0,L.Z)({element:{textAlign:"left",marginBottom:e.spacing(2),marginRight:e.spacing(2)},parentBtn:{textAlign:"left",marginBottom:e.spacing(2),marginRight:e.spacing(2)},dialogWrapper:{textAlign:"center","& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},modalContentSpacing:{marginBottom:e.spacing(3)},fontHeavy:{fontWeight:e.typography.fontWeightBold},btnSpace:{width:"100%"},btnHistory:{marginRight:e.spacing(2),listStyle:"none"}})}))(),Q=function(){j(!1)},ee=function(e,t){_(t),k("current"==e?O[0]:O[e]),j(!1)};return a.useEffect((function(){w(!0);var e={searchKey:"customerId",searchValue:m,page:0,size:1},t={page:0,size:12,searchKey:"customerId",searchValue:m,includeHistory:!0,sortBy:"lastModifiedDate",sortType:"desc"};n?(y(e).then((function(e){k(e.customerPage.content[0])})).catch((function(e){return c(e)})),y(t).then((function(e){var t,n,a;_(null==e||null===(t=e.customerPage)||void 0===t||null===(n=t.content[0])||void 0===n?void 0:n.lastModifiedDate),T(null==e||null===(a=e.customerPage)||void 0===a?void 0:a.content)})).catch((function(e){return c(e)})).finally((function(){return w(!1)}))):(h(e).then((function(e){k(e.customerPage.content[0])})).catch((function(e){return c(e)})),function(e){e.searchValue=btoa(e.searchValue);var t=Object.keys(e).map((function(t){return"".concat(t,"=").concat(e[t])})).join("&");return v("/kyc/v2/kyc?".concat(t))}(t).then((function(e){var t,n,a;_(null==e||null===(t=e.customerPage)||void 0===t||null===(n=t.content[0])||void 0===n?void 0:n.lastModifiedDate),T(null==e||null===(a=e.customerPage)||void 0===a?void 0:a.content)})).catch((function(e){return c(e)})).finally((function(){return w(!1)})))}),[]),a.useEffect((function(){if(null!=C&&C.customerType){w(!0);var e;e=n?"APPROVE":"PENDING",E("kyc",null==C?void 0:C.customerType,e).then((function(e){if(0===e.resultCode){z(e.value);var t=F(e.value);J(t)}else c(e.resultMessage),r.push("/home/kyc/register/")})).finally((function(){return w(!1)}))}}),[null==C?void 0:C.customerType]),a.createElement(f,{feature:bt.Z.viewKYC},a.createElement(s.SeamlessContainer,{title:p("viewKycPageTitle"),description:p("viewKycPageDescription")},O.length>1?a.createElement(W.Z,{display:"flex",flexDirection:"col",justifyContent:"flex-end",height:"30"},a.createElement(s.SeamlessButton,{color:"primary",variant:"outlined",className:X.parentBtn,onClick:function(){return j(!0)}},p("editHistoryButtonText"))):null,a.createElement(s.SeamlessDialog,{open:R,onClose:Q,className:X.dialogWrapper,maxWidth:"md"},a.createElement(a.Fragment,null,a.createElement("div",{className:X.modalContentSpacing},a.createElement($.Z,{gutterBottom:!0,id:"transition-modal-title",variant:"h6",className:X.fontHeavy},p("editHistoryPopupTitle")),a.createElement("ul",null,a.createElement("li",{key:"current",className:X.btnHistory},a.createElement(s.SeamlessButton,{color:"primary",variant:"contained",disabled:(null===(t=O[0])||void 0===t?void 0:t.lastModifiedDate)===V,className:X.element,onClick:function(){return ee("current",O[0].lastModifiedDate)}},p("latestRecord"))),O.map((function(e,t){return a.createElement("li",{key:t,className:X.btnHistory},a.createElement(s.SeamlessButton,{color:"primary",variant:"contained",disabled:(null==e?void 0:e.lastModifiedDate)===V,className:X.element,onClick:function(){return ee(t,null==e?void 0:e.lastModifiedDate)}},(n=null==e?void 0:e.lastModifiedDate,r=null==(i=window.config)?void 0:i.timeZone,l=new Date(n).toLocaleString(),Dn.ou.fromISO(new Date(n).toISOString()).setZone(r).toFormat("dd/MM/yyyy hh:mm:ss").toLocaleString(Dn.ou.DATETIME_MED)||l)));var n,i,r,l})))),a.createElement(s.SeamlessButton,{type:"button",variant:"outlined",color:"primary",className:X.btnSpace,onClick:Q},p("closeButton")))),C&&a.createElement(fn,{loading:S,templateData:Y,customer:C,approval:n}),S?a.createElement(U.Z,null):null))};function Tn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Pn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tn(Object(n),!0).forEach((function(t){(0,_.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Bn=function(e){var t=e.approval,n=a.useState(!1),r=(0,o.Z)(n,2),c=r[0],m=r[1],p=d(),f=p.showErrorMessage,g=p.showSuccessMessage,b=(0,i.useParams)().id,E=(0,u.useTranslation)().t,S=a.useState(),w=(0,o.Z)(S,2),Z=w[0],I=w[1],C=a.useState("REGISTER"),k=(0,o.Z)(C,2),F=k[0],x=k[1],D=l()().AccessControlled;a.useEffect((function(){m(!0);var e={searchKey:"customerId",searchValue:b,page:0,size:1};t?(x("APPROVE"),y(e).then((function(e){var t=e.customerPage.content[0];I(t)})).catch((function(e){return f(e.resultMessage)})).finally((function(){return m(!1)}))):h(e).then((function(e){var t=e.customerPage.content[0];I(t)})).catch((function(e){return f(e.resultMessage)})).finally((function(){return m(!1)}))}),[]);var O=a.useCallback((function(e,t){var n,a,i,r,l,o,s,u,c=null,d=null,p=function(e){var t=e.sections.reduce((function(e,t){var n=t.questions||t.widgets;return[].concat((0,A.Z)(e),(0,A.Z)(n))}),[]),n={};for(var a in t){var i,r=t[a];null!==(i=r.validation)&&void 0!==i&&i.parsedValueBeforeSubmit&&""!==r.validation.parsedValueBeforeSubmit&&(n[r.id]=r.validation.parsedValueBeforeSubmit)}return n}(t),h=M(e,p)||{};try{var y,b;c="string"==typeof e.dateOfBirth?e.dateOfBirth:null===(y=e.dateOfBirth)||void 0===y||null===(b=y.toISOString())||void 0===b?void 0:b.split("T")[0]}catch(e){}try{var E;d=(null==e?void 0:e.dateOfIssue)instanceof Date==0?e.dateOfIssue:null===(E=e.dateOfIssue)||void 0===E?void 0:E.toISOString()}catch(e){}l=e.gender,o=e.title,s=e.preferredLanguage,u=e.maritalStatus;var S=Pn(Pn(Pn({},e),h),{},{dateOfBirth:c,dateOfIssue:d,gender:"string"==typeof l?l:null===(n=l)||void 0===n?void 0:n.value,maritalStatus:"string"==typeof u?u:null===(a=u)||void 0===a?void 0:a.value,preferredLanguage:"string"==typeof s?s:null===(i=s)||void 0===i?void 0:i.value,title:"string"==typeof o?o:null===(r=o)||void 0===r?void 0:r.value});m(!0),function(e){return v("/kyc/v2/kyc",{method:"PUT",body:e})}(S).then((function(e){g(e),history.back()})).catch((function(e){return f(e)})).finally((function(){return m(!1)}))}),[]);return a.createElement(D,{feature:bt.Z.editKYC},a.createElement(s.SeamlessContainer,{title:E("editKycPageTitle"),description:E("editKycPageDescription")},Z&&a.createElement(V,{type:Z.customerType,component:"kyc",operationType:F},(function(e){var t=e.template;return e.loading,a.createElement(en,{data:Z,template:t,editView:!0,onFormSubmit:function(e){return O(e,t)}})})),c?a.createElement(U.Z,null):null))}},67801:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const a={searchKYC:"SEARCH_KYC",approveKYC:"APPROVE_KYC",registerKYC:"REGISTER_KYC",viewKYC:"VIEW_KYC",editKYC:"EDIT_KYC",approveKYCRecord:"APPROVE_KYC_RECORD",rejectKYCRecord:"REJECT_KYC_RECORD",editKYCRecord:"EDIT_KYC_RECORD",editKYCRecordInApproval:"EDIT_KYC_RECORD_IN_APPROVAL_VIEW"}}}]);