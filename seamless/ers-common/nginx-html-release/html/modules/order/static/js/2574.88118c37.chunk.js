(self.webpackChunk_unified_order=self.webpackChunk_unified_order||[]).push([[2574],{52574:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>k});var r=t(74315),n=t(12783),a=t(2411),s=t.n(a),i=t(6277),u=t(21602),o=t(13268),c=t(33553),d=t(23664),m=t(75696),p=t(17895),v=t(13029),S=t(84252),f=t(48049),y=t(91787),I=t(13432),h=t(68004),b=t(63135),N=function(e){var l,t=e.state,r=e.dispatch,n=null!==(l=t.seller)&&void 0!==l&&l.resellerId?[t.seller.resellerId]:[];return s().createElement(I.Z,{onSelectReseller:function(e){r({type:"seller_select",payload:e})},selectedItems:n})},E=function(e){var l,t=e.state,r=e.dispatch,n=null!==(l=t.buyer)&&void 0!==l&&l.resellerId?[t.buyer.resellerId]:[];return s().createElement(I.Z,{onSelectReseller:function(e){r({type:"buyer_select",payload:e})},selectedItems:n})},g=function(e){var l,t=e.dispatch,r=e.state,n=(0,b.useTranslation)().t;return s().createElement(h.Z,{resellerId:(null==r||null===(l=r.seller)||void 0===l?void 0:l.resellerId)||null,state:r,dispatch:t,quantityLabel:n("amount","Amount")})},Z=(0,m.makeStyles)((function(e){return(0,m.createStyles)({element:{margin:e.spacing(1)}})}));const k=function(e){var l=e.state,t=e.dispatch,m=(0,u.Z)(),I=(0,d.Z)().showErrorMessage,h=(0,a.useState)(!1),b=(0,r.Z)(h,2),k=b[0],M=b[1],C=(0,a.useState)(),P=(0,r.Z)(C,2),_=P[0],q=P[1],w=(0,a.useState)(!1),D=(0,r.Z)(w,2),R=D[0],B=D[1],F=Z(),H=(0,f.useHistory)();function L(e){switch(e){case 0:return null===l.seller;case 1:return null===l.buyer;case 2:return!(0,S.z)(l);default:return!1}}(0,a.useEffect)((function(){t({type:"initiator_select",payload:{resellerId:null==m?void 0:m.requestedPrincipalId,resellerMSISDN:null==m?void 0:m.targetMSISDN,resellerName:null==m?void 0:m.targetPrincipalName}})}),[m]);var x,A,K,U,z=(0,p.requestHelper)(l);return s().createElement(s().Fragment,null,k&&s().createElement(y.Z,{loading:R,orderMessage:_,handleClose:function(){B(!1),H.push("/home/order/orders")}}),s().createElement(n.SeamlessStepper,{steps:[{label:"Select Sender"},{label:"Select Receiver"},{label:"Select Products & Variants"},{label:"Submit & Review"}],components:{Control:function(e){e.goFirst;var r=e.goNext,a=e.goPrev,u=e.disableFirst,o=e.disableLast,d=e.view;return s().createElement(c.Z,null,s().createElement(n.SeamlessButton,{onClick:a,disabled:u,className:(0,i.default)(F.element),color:"primary",variant:"contained"},"Previous"),s().createElement(n.SeamlessButton,{className:(0,i.default)(F.element),onClick:r,disabled:o||L(d),color:"primary",variant:"contained"},"Next"),o&&s().createElement(n.SeamlessButton,{className:(0,i.default)(F.element),onClick:function(){return function(e){var r=(0,p.requestHelper)(l);M(!0),B(!0),(0,v.ry)(r).then((function(e){0===e.resultCode?(t({type:"reset",payload:null}),q({message:e.resultMessage,kind:"success"}),B(!1)):(M(!1),I(e))})).catch((function(e){M(!1),I(e)})).finally((function(){B(!1)}))}()},color:"primary",variant:"contained"},"Submit"))}}},s().createElement(N,{dispatch:t,state:l}),s().createElement(E,{dispatch:t,state:l}),s().createElement(g,{dispatch:t,state:l}),s().createElement(o.Z,{dataAPI:z,state:l,from:{resellerId:(null===(A=l.seller)||void 0===A?void 0:A.resellerId)||"",resellerMSISDN:(null===(K=l.seller)||void 0===K?void 0:K.resellerMSISDN)||"",resellerName:(null===(U=l.seller)||void 0===U?void 0:U.resellerName)||""},itemList:l.stockQuantity.map((function(e){var l;return{productSKU:null==e?void 0:e.productSKU,quantity:null==e?void 0:e.quantity,price:null==e||null===(l=e.unitPrice)||void 0===l?void 0:l.price}})),to:(x=null==l?void 0:l.buyer,{resellerId:null==x?void 0:x.resellerId,resellerMSISDN:null==x?void 0:x.resellerMSISDN,resellerName:null==x?void 0:x.resellerName}),dispatch:t})))}}}]);