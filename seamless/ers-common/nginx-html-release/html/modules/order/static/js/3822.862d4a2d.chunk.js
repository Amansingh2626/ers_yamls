(self.webpackChunk_unified_order=self.webpackChunk_unified_order||[]).push([[3822],{33822:(e,t,i)=>{"use strict";i.d(t,{Z:()=>u});var s=i(11746),r=i(64659),n=i(4730),a=i(51119);const u=function(){function e(t){var i,n=this,u=t.state;(0,r.Z)(this,e),(0,a.Z)(this,"seller",void 0),(0,a.Z)(this,"buyer",void 0),(0,a.Z)(this,"state",void 0),(0,a.Z)(this,"paymentMode",void 0),(0,a.Z)(this,"paymentAgreement",void 0),(0,a.Z)(this,"receivers",void 0),(0,a.Z)(this,"items",void 0),(0,a.Z)(this,"returnType",""),(0,a.Z)(this,"linkedOrderIds",[]),(0,a.Z)(this,"returnReason",""),(0,a.Z)(this,"orderType",void 0),(0,a.Z)(this,"sender",void 0),(0,a.Z)(this,"potentialReceivers",[]),(0,a.Z)(this,"deliveryPaths",void 0),(0,a.Z)(this,"additionalFields",[]),(0,a.Z)(this,"itemsByRange",(function(e,t){return Object.keys(e).map((function(i){var s=e[i];return Object.keys(s).map((function(s){var r=e[i][s];return{productSku:r.productSKU,quantity:null,reserveType:"RANGE",serials:[],batchIds:[],ranges:[{batchId:r.boxId,startSerial:r.startSerial.toString(),endSerial:r.endSerial.toString()}],seller:t}}))})).flat()})),(0,a.Z)(this,"itemsByBatch",(function(e,t){return e.map((function(e){return{productSku:e.productSKU,quantity:1,reserveType:"BATCH",serials:[],batchIds:[e.boxId],ranges:[],seller:t}}))})),(0,a.Z)(this,"itemsBySerial",(function(e,t){return Object.keys(e).map((function(i){return Object.keys(e[i]).map((function(s){var r;return{productSku:i,quantity:null===(r=e[i][s])||void 0===r?void 0:r.length,reserveType:"SERIAL",serials:e[i][s],batchIds:[],ranges:[],seller:t,data:{}}}))})).flat()})),(0,a.Z)(this,"itemsByQuantity",(function(e,t){return null==e?void 0:e.map((function(e){return{productSku:e.productSKU,quantity:parseInt(e.quantity,10),reserveType:e.reserveType,serials:[],batchIds:[],ranges:[],seller:t,data:{}}}))})),(0,a.Z)(this,"getToptups",(function(){return n.state.services.topups.map((function(e){return{productSku:e.productSKU,quantity:1,seller:null,data:{SUBSCRIBERMSISDN:e.SUBSCRIBERMSISDN,accountTypeId:e.accountTypeId,amount:e.amount}}}))})),(0,a.Z)(this,"getSelectedItems",(function(e,t){return[].concat((0,s.Z)(n.itemsByRange(e.serialRangeList,t)),(0,s.Z)(n.itemsByBatch(e.stockRows,t)),(0,s.Z)(n.itemsBySerial(e.serials,t)),(0,s.Z)(n.itemsByQuantity(null==e?void 0:e.stockQuantity,t)),(0,s.Z)(n.getToptups()))})),this.state=u,this.additionalFields=(i=u.additionalFields).length>0?i.map((function(e){return{name:e.key,value:e.value}})):[]}return(0,n.Z)(e,[{key:"requestParams",get:function(){return{buyer:this.buyer,seller:this.seller,sender:this.sender,potentialReceivers:this.potentialReceivers,deliveryPaths:this.deliveryPaths,items:this.items||this.getSelectedItems(this.state,this.seller),orderType:this.orderType||this.state.orderType,paymentAgreement:this.state.paymentAgreement||this.paymentAgreement,paymentMode:this.state.paymentMode||this.paymentMode,receivers:this.receivers,linkedOrderIds:this.linkedOrderIds||[],returnType:this.returnType,returnReason:this.returnReason||"",additionalFields:this.additionalFields}}}]),e}()}}]);