(self.webpackChunk_unified_order=self.webpackChunk_unified_order||[]).push([[4656],{54656:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>D});var r=l(74315),a=l(12783),n=l(2411),o=l.n(n),s=l(6277),i=l(8629),c=l(49429),u=l(38724),d=l(79249),m=l(12231),p=l(73698),f=l(86619),v=l(33553),h=l(21602),S=l(13268),y=l(82037),g=l(75696),E=l(13029),I=l(23664),b=l(88983),Z=l(48049),N=l(74208),k=l(61990),C=l(24235),w=l(63135),M=function(e){var t=e.dispatch,l=e.state;return o().createElement(k.Z,{resellerId:l.recoverFrom.resellerId||null,state:l,dispatch:t})},F=(0,g.makeStyles)((function(e){return(0,g.createStyles)({element:{margin:e.spacing(1)}})}));const D=function(e){var t,l=e.state,g=e.dispatch,k=F(),D=(0,h.Z)(),P=(0,n.useState)(!1),R=(0,r.Z)(P,2),B=R[0],_=R[1],q=(0,n.useState)([]),T=(0,r.Z)(q,2),x=T[0],H=T[1],W=(0,n.useState)(),L=(0,r.Z)(W,2),O=L[0],z=L[1],A=(0,n.useState)(),j=(0,r.Z)(A,2),G=j[0],J=j[1],K=(0,w.useTranslation)().t,Q=(0,I.Z)(),U=Q.showSuccessMessage,V=Q.showErrorMessage,X=Q.showInfoMessage,Y=(0,Z.useHistory)();function $(){_(!1),z(null),J("")}(0,n.useEffect)((function(){g({type:"seller_select",payload:{resellerId:null==D?void 0:D.requestedPrincipalId,resellerMSISDN:null==D?void 0:D.targetMSISDN,resellerName:null==D?void 0:D.targetPrincipalName}})}),[D]),(0,n.useEffect)((function(){(0,E.an)().then((function(e){H(e.orderReasons)})).catch((function(e){X(K("unableToLoadReturnReasonList"))}))}),[]);var ee=[{label:K("recoverFrom")},{label:K("inventory")},{label:K("previewInfo")}];function te(e){switch(e){case 0:return null===l.recoverFrom;case 1:return!(0,C.z3)(l);default:return!1}}var le,re=(0,b.requestHelper)(l,G);return o().createElement(o().Fragment,null,o().createElement(i.Z,{open:B,onClose:$,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",fullWidth:!0,maxWidth:"sm",disableBackdropClick:!0},o().createElement(d.Z,{id:"alert-dialog-title"},K("specifiyReturnReason")),o().createElement(u.Z,null,o().createElement(p.Z,{style:{marginTop:20},labelId:"demo-simple-select-label",id:"demo-simple-select",value:O,onChange:function(e){J("");var t=e.target.value;z(t);var l=x.find((function(e){return e.code===t}));J(l.description)},fullWidth:!0},x.map((function(e){return o().createElement(m.Z,{key:e.code,value:e.code},e.code)}))),"OTHER"===O&&o().createElement(f.Z,{fullWidth:!0,multiline:!0,rowsMax:5,rows:5,value:G,style:{marginTop:30},placeholder:K("specifiyOtherReasons"),onChange:function(e){e.target.value.length>=400||J(e.target.value)}})),o().createElement(c.Z,null,o().createElement(a.SeamlessButton,{onClick:$,color:"primary"},K("cancel")),o().createElement(a.SeamlessButton,{disabled:!G,onClick:function(){var e=(0,b.requestHelper)(l,G);(0,E.ry)(e).then((function(e){0===e.resultCode?(U(e),g({type:"reset",payload:null}),Y.push("/home/order/orders")):($(),V(e))})).catch((function(e){$(),V(e)})).finally((function(){$()}))},color:"primary",variant:"contained",autoFocus:!0},K("return")))),o().createElement(a.SeamlessStepper,{steps:ee,components:{Control:function(e){e.goFirst;var t=e.goNext,l=e.goPrev,r=e.disableFirst,n=e.disableLast,i=e.view;return o().createElement(v.Z,null,o().createElement(a.SeamlessButton,{onClick:l,disabled:r,className:(0,s.default)(k.element),color:"primary",variant:"contained"},K("previous")),o().createElement(a.SeamlessButton,{className:(0,s.default)(k.element),onClick:t,disabled:n||te(i),color:"primary",variant:"contained"},K("next")),n&&o().createElement(a.SeamlessButton,{className:(0,s.default)(k.element),onClick:function(){_(!0)},color:"primary",variant:"contained"},K("submit")))}}},o().createElement(N.Z,{dispatch:g,state:l,loadData:function(e){return(0,y.yS)(D.requestedPrincipalId.toString(),e)},selectedItems:null!=l&&null!==(t=l.buyer)&&void 0!==t&&t.resellerId?[l.buyer.resellerId]:[],onSelect:function(e){g({type:"recover_from",payload:e})},hidden:!1}),o().createElement(M,{dispatch:g,state:l}),o().createElement(S.Z,{dataAPI:re,state:l,from:(le=l.recoverFrom,{resellerName:(null==le?void 0:le.resellerName)||"",resellerId:(null==le?void 0:le.resellerId)||"",resellerMSISDN:(null==le?void 0:le.resellerMSISDN)||""}),to:{resellerName:(null==D?void 0:D.targetPrincipalName)||"",resellerId:(null==D?void 0:D.requestedPrincipalId)||"",resellerMSISDN:(null==D?void 0:D.targetMSISDN)||""},paymentInfo:!1,dispatch:g})))}}}]);