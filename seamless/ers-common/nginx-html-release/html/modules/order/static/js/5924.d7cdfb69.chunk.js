(self.webpackChunk_unified_order=self.webpackChunk_unified_order||[]).push([[5924],{25924:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>k});var r=l(74315),n=l(12783),a=l(2411),s=l.n(a),i=l(6277),u=l(21602),o=l(13268),c=l(33553),d=l(23664),m=l(75696),p=l(53073),v=l(13029),S=l(84252),f=l(48049),y=l(91787),I=l(13432),b=l(68004),h=l(63135),N=function(e){var t,l=e.state,r=e.dispatch,n=null!==(t=l.buyer)&&void 0!==t&&t.resellerId?[l.buyer.resellerId]:[];return s().createElement(I.Z,{onSelectReseller:function(e){r({type:"buyer_select",payload:e})},selectedItems:n})},g=function(e){var t,l=e.dispatch,r=e.state,n=(0,h.useTranslation)().t;return s().createElement(b.Z,{resellerId:(null==r||null===(t=r.seller)||void 0===t?void 0:t.resellerId)||null,state:r,dispatch:l,quantityLabel:n("amount","Amount")})},E=(0,m.makeStyles)((function(e){return(0,m.createStyles)({element:{margin:e.spacing(1)}})}));const k=function(e){var t=e.state,l=e.dispatch,m=(0,u.Z)(),I=(0,d.Z)().showErrorMessage,b=(0,a.useState)(!1),h=(0,r.Z)(b,2),k=h[0],Z=h[1],M=(0,a.useState)(),C=(0,r.Z)(M,2),P=C[0],q=C[1],w=(0,a.useState)(!1),D=(0,r.Z)(w,2),_=D[0],B=D[1],F=E(),H=(0,f.useHistory)();function L(e){switch(e){case 0:return null===t.buyer;case 1:return!(0,S.z)(t);default:return!1}}(0,a.useEffect)((function(){l({type:"seller_select",payload:{resellerId:null==m?void 0:m.requestedPrincipalId,resellerMSISDN:null==m?void 0:m.targetMSISDN,resellerName:null==m?void 0:m.targetPrincipalName}})}),[m]);var R,x=(0,p.requestHelper)(t);return s().createElement(s().Fragment,null,k&&s().createElement(y.Z,{loading:_,orderMessage:P,handleClose:function(){B(!1),H.push("/home/order/orders")}}),s().createElement(n.SeamlessStepper,{steps:[{label:"Select Receiver"},{label:"Select Products & Variants"},{label:"Submit & Review"}],components:{Control:function(e){e.goFirst;var r=e.goNext,a=e.goPrev,u=e.disableFirst,o=e.disableLast,d=e.view;return s().createElement(c.Z,null,s().createElement(n.SeamlessButton,{onClick:a,disabled:u,className:(0,i.default)(F.element),color:"primary",variant:"contained"},"Previous"),s().createElement(n.SeamlessButton,{className:(0,i.default)(F.element),onClick:r,disabled:o||L(d),color:"primary",variant:"contained"},"Next"),o&&s().createElement(n.SeamlessButton,{className:(0,i.default)(F.element),onClick:function(){return function(e){var r=(0,p.requestHelper)(t);Z(!0),B(!0),(0,v.ry)(r).then((function(e){0===e.resultCode?(l({type:"reset",payload:null}),q({message:e.resultMessage,kind:"success"}),B(!1)):(Z(!1),I(e))})).catch((function(e){Z(!1),I(e)})).finally((function(){B(!1)}))}()},color:"primary",variant:"contained"},"Submit"))}}},s().createElement(N,{dispatch:l,state:t}),s().createElement(g,{dispatch:l,state:t}),s().createElement(o.Z,{dataAPI:x,state:t,from:{resellerId:null==m?void 0:m.userId,resellerMSISDN:null==m?void 0:m.targetMSISDN,resellerName:null==m?void 0:m.targetPrincipalName},itemList:t.stockQuantity.map((function(e){var t;return{productSKU:null==e?void 0:e.productSKU,quantity:null==e?void 0:e.quantity,price:null==e||null===(t=e.unitPrice)||void 0===t?void 0:t.price}})),to:(R=null==t?void 0:t.buyer,{resellerId:null==R?void 0:R.resellerId,resellerMSISDN:null==R?void 0:R.resellerMSISDN,resellerName:null==R?void 0:R.resellerName}),dispatch:l})))}}}]);