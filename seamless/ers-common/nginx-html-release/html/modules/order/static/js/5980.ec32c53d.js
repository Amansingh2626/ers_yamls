(self.webpackChunk_unified_order=self.webpackChunk_unified_order||[]).push([[5980],{84496:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var a=n(61416);const r=n.n(a)()},46222:(e,t,n)=>{"use strict";n.d(t,{k_:()=>r,aM:()=>l,EZ:()=>i});var a=n(99367);function r(e,t){var n={dropLocationId:e,sellerId:t};return new Promise((function(e,t){a.Z.dms("/auth/fetchPickupLocations",{method:"POST",body:n}).then((function(n){var a,r;"Active"==(null==n||null===(a=n.sellerInfo)||void 0===a||null===(r=a.resellerData)||void 0===r?void 0:r.status)?e(n):t()}))}))}function l(e){return new Promise((function(t,n){a.Z.dms("/v1/resellers/resellerChildren/".concat(e,"?resellerType=warehouse")).then((function(e){0!=(null==e?void 0:e.resellers.filter((function(e,t){var n;return"Active"==(null==e||null===(n=e.resellerData)||void 0===n?void 0:n.status)}))).length?t(e):n()}))}))}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"resellerId",n={dealerID:{id:e,type:t},fetchAccountBalanceInformation:!1};return a.Z.dms("/auth/getResellerInfo",{method:"POST",body:n})}},70696:(e,t,n)=>{"use strict";n.d(t,{I4:()=>a.I4,q3:()=>c,Xk:()=>m,ed:()=>i,Tk:()=>a.Tk,gA:()=>a.gA,pS:()=>r.pS,Q2:()=>a.Q2,sA:()=>a.sA,s$:()=>a.s$,Fw:()=>a.Fw,Sz:()=>a.Sz,_P:()=>a._P,yz:()=>u,Kk:()=>s,jT:()=>a.jT,uL:()=>a.uL,xe:()=>a.xe,YQ:()=>a.YQ,MP:()=>a.MP,Gl:()=>a.Gl,Yx:()=>d});var a=n(13029),r=n(25369),l=n(84496),i=function(e){return(0,l.Z)("/bi-engine/fetch",{method:"POST",body:e})},o=n(99367),c=function(e){return o.Z.oms("/order-product-quota-rules",{method:"POST",body:e})},s=function(){return o.Z.oms("/order-product-quota-rules")},u=function(e){return o.Z.oms("/order-product-quota-rules/".concat(e))},d=function(e,t){return o.Z.oms("/order-product-quota-rules/".concat(e),{method:"PATCH",body:t})},m=function(e){return o.Z.oms("/order-product-quota-rules/".concat(e),{method:"DELETE"})}},25369:(e,t,n)=>{"use strict";n.d(t,{I8:()=>r,FQ:()=>l,pS:()=>i});var a=n(99367);function r(e,t,n,r){var l="/products/".concat(e,"/inventories/boxes?states=Available"),i={stateNames:["Available"]};return n!=r?(i.childResellerIds=[],i.fetchChildStock=!1,i.fetchOwnStock=!0,i.ownerId=r):(i.fetchChildStock=!!t,i.childResellerIds=t?[t]:[],i.stateNames=["Available"],i.fetchOwnStock=!t),a.Z.ims(l,{method:"POST",body:i})}function l(e,t,n,r){return a.Z.ims("/box/".concat(t,"?states=Available&page=").concat(n,"&pageSize=").concat(r))}function i(e){return a.Z.ims("/inventory-count",{method:"POST",body:e})}},13029:(e,t,n)=>{"use strict";n.d(t,{ry:()=>l,HG:()=>i,an:()=>o,uL:()=>c,I4:()=>s,xe:()=>u,B1:()=>d,he:()=>m,s$:()=>p,Fw:()=>v,Sz:()=>f,Q2:()=>g,Tk:()=>E,sA:()=>y,_P:()=>S,Gl:()=>h,YQ:()=>Z,C9:()=>b,MP:()=>I,jT:()=>T,gA:()=>R,Ig:()=>N});var a=n(34126),r=n(99367);function l(e){var t;if(!0===(null===(t=window.config)||void 0===t?void 0:t.order).raiseOrderApplicationJson)return r.Z.oms("/orders",{method:"POST",body:e},!1);var n={method:"POST",body:{data:JSON.stringify(e)}};return r.Z.oms("/orders",n,!0)}function i(e){return r.Z.oms("/orders?".concat(e))}function o(){return r.Z.oms("/order-reasons?type=RETURN")}function c(){return r.Z.oms("/order-reasons?type=REJECT")}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a={method:"PATCH",body:{}};return t&&(a.headers=new Headers,a.headers.append("Content-Type","application/json"),a.headers.append("userid",t),n&&a.headers.append("clientComment",encodeURIComponent(n))),r.Z.oms("/orders/".concat(e,"/CONFIRM"),a)}function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a={method:"PATCH",body:t};return n&&(a.headers=new Headers,a.headers.append("Content-Type","application/json"),a.headers.append("clientComment",encodeURIComponent(n))),r.Z.oms("/orders/".concat(e,"/REJECT"),a)}function d(e,t){return r.Z.oms("/invoice/".concat(e,"/confirm-payment"),{method:"POST",body:t})}function m(e){return r.Z.oms("/payments/external/".concat(e,"?idType=INVOICE"))}function p(e){return r.Z.oms("/orders/".concat(e))}var v=function(e){return r.Z.oms("/orders?".concat(a.stringify(e)))},f=function(){return r.Z.oms("/order-payment-types")};function g(e){return r.Z.oms("/orders/".concat(e,"/invoice"))}function E(e){return r.Z.oms("/orders/credit-note/".concat(e))}function y(e){return r.Z.oms("/orders/invoices?".concat(a.stringify(e)))}function S(e){return r.Z.oms("/orders/payments?".concat(a.stringify(e)))}function h(e){return r.Z.oms("/settle-invoice",{method:"POST",body:e})}function Z(e,t){var n={method:"POST"};return t&&(n.headers=new Headers,n.headers.append("Content-Type","application/json"),n.headers.append("clientComment",encodeURIComponent(t))),r.Z.oms("/orders/".concat(e,"/reverse"),n)}function b(e){return r.Z.oms("/order/".concat(e,"/returnableitems?enableDigitalProduct=false"))}var I=function(e,t){var n={method:"POST",body:e};return t&&(n.headers=new Headers,n.headers.append("Content-Type","application/json"),n.headers.append("clientComment",encodeURIComponent(t))),r.Z.oms("/orders",n)},T=function(e){return r.Z.oms("/due-unused-payments",{method:"POST",body:e})},R=function(e){return r.Z.oms("/orders/getInternalOrderView",{method:"PUT",body:e})},N=function(e){return r.Z.oms("/orders/rescheduleDeliveryOrder",{method:"PUT",body:e})}},30781:(e,t,n)=>{"use strict";n.d(t,{yZ:()=>r,WI:()=>l,uj:()=>i}),n(34126);var a=n(99367);function r(){return a.Z.pms("/tax")}function l(e){return a.Z.pms("/product/variant/search",{method:"POST",body:e})}function i(e){return a.Z.pms("/product/sku/".concat(e))}},99367:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var a=n(84496),r="/oms/v2";const l={pms:function(e,t){return(0,a.Z)("/pms/v1"+e,t)},ims:function(e,t){return(0,a.Z)("/ims/v1"+e,t)},oms:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,a.Z)(r+e,t,n)},cms:function(e,t){return(0,a.Z)("/acms"+e,t)},dms:function(e,t){return(0,a.Z)("/dms"+e,t)},gms:function(e,t){return(0,a.Z)("/groupmanagementsystem/v1"+e,t)}}},52495:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var a=n(11746),r=n(51119),l=n(74315),i=n(2411),o=n.n(i),c=n(63135),s=n(41744),u=n.n(s),d=n(77277),m=n(26739),p=n(61837),v=n(86619),f=n(85256),g=n(79692),E=n(12420),y=n(2366),S=n(24235),h=n(70696),Z=n(21602),b=n(23664),I=n(29927),T=n(76635);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=(0,g.Z)((function(e){return(0,E.Z)({fieldSetBorder:{borderColor:"rgba(0, 0, 0, 0.23)","& .MuiOutlinedInput-root.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(0, 0, 0, 0.23)",borderWidth:"1px"}},cartSection:{width:"50%",float:"right",paddingRight:5,paddingLeft:5,textAlign:"right"}})}));const w=function(e){var t=e.state,n=e.dispatch,r=(e.resellerId,e.quantityLabel),s=void 0===r?"Quantity":r,g=e.selectedProduct,E=e.inventoryReseller,R=(0,i.useState)(g),w=(0,l.Z)(R,2),x=w[0],C=w[1],P=(0,c.useTranslation)().t,D=O(),k=(0,i.useState)(),_=(0,l.Z)(k,2),B=_[0],M=_[1],L=(0,i.useState)(!1),U=(0,l.Z)(L,2),F=U[0],A=U[1],j=o().useState(!1),q=(0,l.Z)(j,2),W=(q[0],q[1]),K=o().useState("1px solid transparent"),V=(0,l.Z)(K,2),z=V[0],H=V[1],Q=(0,i.useState)([]),Y=(0,l.Z)(Q,2),G=Y[0],J=Y[1],X=(0,i.useState)(),$=(0,l.Z)(X,2),ee=$[0],te=$[1],ne=(0,b.Z)(),ae=ne.showErrorMessage,re=ne.showInfoMessage;(0,Z.Z)(),(0,i.useEffect)((function(){"services"!==(null==g?void 0:g.productType)&&(C(g),te(null==g?void 0:g.productSKU))}),[g]),(0,i.useEffect)((function(){if(x){var e=t.stockQuantity.find((function(e){return e.productSKU===x.productSKU}));e&&e.quantity?M(e.quantity):M("")}}),[x]);var le=function(e){e.preventDefault();var r=N(N({},x),{},{quantity:parseInt(B.toString(),10)});r.reserveType=(0,S.xk)(t.products,r.productSKU);var l=(0,a.Z)(t.stockQuantity),i=t.stockQuantity.findIndex((function(e){return e.productSKU===r.productSKU}));-1===i?l.push(r):l[i].quantity=r.quantity,n({type:"stock_quantity_select",payload:l})},ie=function(e){var a=[];-1!==t.stockQuantity.findIndex((function(t){return t.productSKU===e.productSKU}))&&(a=t.stockQuantity.filter((function(t){return t.productSKU!==e.productSKU})),n({type:"stock_quantity_select",payload:a}))},oe=[{field:"productSKU",flex:1,headerName:P("productSku"),valueGetter:function(e){return e.row.productSKU}},{field:"",headerName:s,flex:1,sortable:!1,disableColumnMenu:!0,renderCell:function(e){var t=e.row.productSKU;return o().createElement(o().Fragment,null,o().createElement(v.Z,{onInput:function(e){e.target.value=e.target.value.replace(/[a-zA-Z]|\.|^0[0-9]*/g,"")},onChange:function(e){M(e.target.value),function(e,t){var n={childResellerIds:[],countChildrenInventories:!1,includeOwnInventory:!0,includeParentInventory:!1,parentResellerIds:[],productSKUs:[e]};E&&(n.parentResellerIds=[E],n.includeOwnInventory=!1,n.includeParentInventory=!0),W(!0),(0,h.pS)(n).then((function(e){var n;0==e.resultCode&&((null==e||null===(n=e.data[0])||void 0===n?void 0:n.availableQuantity)>=t?H("1px solid green"):H("1px solid red")),W(!1)})).catch((function(e){ae(e),W(!1)}))}(t,e.target.value)},type:"number",value:B,style:{height:38,width:300,borderRadius:8,border:z},variant:"outlined",className:D.fieldSetBorder,placeholder:s}),o().createElement(f.Z,{style:{height:34,margin:4},orientation:"vertical"}),o().createElement(d.Z,{disabled:!(B>0),onClick:le,variant:"outlined"},P("addToCart")))}}];return o().createElement(o().Fragment,null,o().createElement("section",{className:D.cartSection},F&&o().createElement(I.Z,{state:t,dispatch:n,onClose:function(){return A(!1)},removeItem:function(e){switch(e.reserverType){case"RANGE":!function(e){var a=N({},t.serialRangeList);if(a[e.boxId]){delete a[e.boxId][e.startSerial],0===Object.keys(a[e.boxId]).length&&delete a[e.boxId];var r=t.selectedSerials.filter((function(t){return t!==e.startSerial})),l=t.selectedByRange.filter((function(t){return t.startSerial!==e.startSerial}));n({type:"remove_range_select",payload:{value:a,data:l,serial:r}});var i=G.map((function(t){return t.startSerial===e.startSerial&&(t.tableMeta={},t.quantSelected&&(t.quantSelected=null)),t}));J(i),re(P("isRemoved",{element:P("range")}))}}(e);break;case"BATCH":!function(e){if(e.productSKU=ee,!t.selectedSerials.includes(e.boxId)){var r=(0,a.Z)(t.stockRows),l=[],i=r.find((function(t){return t.boxId===e.boxId})),o=(l=i?r.filter((function(t){return t.boxId!==e.boxId})):r.concat(e)).map((function(e){return e.boxId}));i||re(P("itemAdded")),n({type:"stock_select",payload:{ids:o,rows:l}})}}(e);break;case"SERIAL":!function(e){var a=e.boxId,r=(0,T.cloneDeep)(t.serials);Object.keys(r).map((function(e){Object.getOwnPropertyNames(r[e]).includes(a)&&delete r[e][a]})),n({type:"set_serials",payload:r}),"-"==a&&ie(e),re(P("isRemoved",{element:P("serial")}))}(e);break;case"NON_SERIAL":ie(e);break;case"TOPUP":var r=t.services.topups.filter((function(t){return t.productSKU!==e.productSKU}));n({type:"topup_selected",payload:r});break;default:ie(e)}}}),o().createElement("section",null,o().createElement(p.Z,{"aria-label":"cart",onClick:function(){return A(!0)}},o().createElement(m.Z,{badgeContent:(0,S.e2)(t),color:"primary"},o().createElement(y.Z,{fontSize:"large"}))))),o().createElement("div",{style:{height:500,clear:"both"}},o().createElement(u(),{rows:x?[x]:[],getRowId:function(e){return null==e?void 0:e.productSKU},columns:oe,disableDensitySelector:!0,disableSelectionOnClick:!0})))}},63771:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ce});var a=n(11746),r=n(51119),l=n(74315),i=n(2411),o=n.n(i),c=n(63135),s=n(41744),u=n.n(s),d=n(67358),m=n(77277),p=n(38592),v=n(26739),f=n(61837),g=n(21324),E=n(23664),y=n(19653),S=n(2366),h=n(79692),Z=n(12420),b=n(33882),I=n(29226),T=n(25369),R=n(21602),N=n(29927),O=n(56470),w=n(77162),x=n.n(w),C=n(8629),P=n(49429),D=n(38724),k=n(79249),_=n(76635);const B=function(e){var t=e.state,n=e.dispatch,a=e.productSKU,r=e.boxId,c=e.handleClose,s=e.rowQuantity,d=(0,i.useState)(!1),p=(0,l.Z)(d,2),v=p[0],f=p[1],g=(0,i.useState)([]),E=(0,l.Z)(g,2),y=E[0],S=E[1],h=(0,i.useState)(100),Z=(0,l.Z)(h,2),b=Z[0],I=Z[1],R=(0,i.useState)(1),N=(0,l.Z)(R,2),w=N[0],B=N[1],M=(0,i.useState)(!0),L=(0,l.Z)(M,2),U=L[0],F=L[1],A=(0,i.useState)([0]),j=(0,l.Z)(A,2),q=j[0],W=j[1],K=function(){var e=(0,O.Z)(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),F(!1),e.next=4,(0,T.FQ)(a,r,w,b).then((function(e){var t=y;t.push(e.items),S(t)})).catch(console.error).finally((function(){f(!1),F(!0)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function V(){try{return t.serials[a][r]}catch(e){return[]}}return(0,i.useEffect)((function(){if(!q.includes(w)){K();var e=q;!q.includes(w)&&e.push(w),W(e)}}),[w,q]),o().createElement(C.Z,{open:!0,onClose:c,"aria-labelledby":"form-dialog-title",disableBackdropClick:!0,disableEscapeKeyDown:!0,fullWidth:!0,maxWidth:"md"},o().createElement(k.Z,{id:"form-dialog-title"},"Select Items from BOX #".concat(r)),o().createElement(D.Z,null,o().createElement("section",{style:{height:450,minWidth:500}},o().createElement(u(),{pageSize:b,hideFooterPagination:!U,onPageChange:function(e){return B(e.page+1)},onPageSizeChange:function(e){return I(e.pageSize)},loading:v,rowCount:s,rows:y.flat(),columns:[{field:"serial",flex:1,headerName:"Serial"},{field:"productSku",flex:1,headerName:"Product SKU"}],checkboxSelection:!0,columnBuffer:4,onSelectionModelChange:function(e){(0,_.isEqual)(e.selectionModel,V())||n({type:"box_item_selected",payload:{items:e.selectionModel,boxId:r,productSKU:a}})},selectionModel:V(),getRowId:function(e){return e.serial},disableColumnFilter:!0,disableDensitySelector:!0,disableColumnSelector:!0}))),o().createElement(P.Z,null,o().createElement(m.Z,{onClick:c,color:"primary"},"Close")))};var M=n(24235),L=n(42494),U=n(50581),F=n(33553),A=n(90436),j=n(27556),q=n(12783),W=n(9495),K=n(79880),V=(0,h.Z)((function(e){return{root:{display:"flex",height:400},detailsPane:{display:"flex",flexWrap:"wrap",flexDirection:"column",paddingLeft:20,paddingTop:20,paddingRight:20,alignContent:"space-around"},input:{width:450},mssidn_box:{width:450,margin:e.spacing(1)},amount_box:{width:450,margin:e.spacing(1),paddingTop:5},amount:{width:450},button:{height:40,alignSelf:"flex-end",marginBottom:2}}}));const z=function(e){var t,n,r,s,d,v,g=e.state,E=e.dispatch,y=e.product,S=e.isFixed,h=void 0!==S&&S,Z=(0,i.useState)(),b=(0,l.Z)(Z,2),I=b[0],T=b[1],R=(0,i.useState)(),N=(0,l.Z)(R,2),O=N[0],w=N[1],x=(0,i.useState)(),C=(0,l.Z)(x,2),P=C[0],D=C[1],k=function(){!h&&T(""),w(""),D(null)};(0,i.useEffect)((function(){k(),h&&T(y.price.price)}),[y.productSKU,h,null==y?void 0:y.price.price]);var B=V(),M=(0,c.useTranslation)().t,z=window.config,H=(null==z||null===(t=z.order)||void 0===t||null===(n=t.topup)||void 0===n?void 0:n.enabled)||!1,Q=(null==z||null===(r=z.order)||void 0===r||null===(s=r.topup)||void 0===s||null===(d=s.orderTypes)||void 0===d?void 0:d.includes(g.orderType))||!1;if(!H||!Q)return o().createElement(F.Z,{style:{display:"flex",justifyContent:"center",marginTop:50}},o().createElement(A.Z,{color:"error",variant:"body1"},M("topupDisabledMsg","Not allowed")));var Y=[{field:"SUBSCRIBERMSISDN",flex:1,hideSortIcons:!0,disableColumnMenu:!0},{field:"accountTypeId",flex:1,hideSortIcons:!0,disableColumnMenu:!0},{field:"amount",flex:1,hideSortIcons:!0,disableColumnMenu:!0},{field:"actions",width:110,hideSortIcons:!0,disableColumnMenu:!0,renderCell:function(e){return o().createElement(p.Z,{size:"small",variant:"outlined"},!h&&o().createElement(f.Z,{size:"small",disableRipple:!0,onClick:function(){return t=e.row,void((n=g.services.topups.find((function(e){return e.productSKU===y.productSKU&&e.SUBSCRIBERMSISDN===t.SUBSCRIBERMSISDN})))&&(D(n),T(n.amount),w(n.SUBSCRIBERMSISDN)));var t,n}},o().createElement(K.Z,{fontSize:"small"})),o().createElement(f.Z,{size:"small",disableRipple:!0,onClick:function(){return t=e.row,n=(0,a.Z)(g.services.topups),(0,_.remove)(n,{productSKU:y.productSKU,SUBSCRIBERMSISDN:t.SUBSCRIBERMSISDN}),void E({type:"topup_selected",payload:n});var t,n}},o().createElement(W.Z,{fontSize:"small"})))}}];return o().createElement(j.Z,{className:B.root},o().createElement("section",{className:B.detailsPane},o().createElement("section",{className:B.mssidn_box},o().createElement(A.Z,{style:{marginBottom:30},color:"textSecondary",variant:"body1",align:"center"},M("subcriberDetails","Subscriber's details")),o().createElement(L.Z,{className:B.input},o().createElement(q.SeamlessInput,{onChange:function(e){return w(e.target.value)},value:O,label:M("subscriberMSSIDN","Subscriber MSISDN")}))),o().createElement(F.Z,{className:B.amount_box},o().createElement(L.Z,{className:B.amount},o().createElement(q.SeamlessInput,{id:"amount",disabled:h,label:M("topupAmount","Topup amount"),value:I,onChange:function(e){var t=e.target.value;t||T(""),!h&&function(e){return new RegExp(/^\d*[1-9]\d*$/).test(e)}(t)&&T(parseInt(t,10))},endAdornment:o().createElement(U.Z,{position:"start"},(null==y||null===(v=y.price)||void 0===v?void 0:v.currency)||"")}))),o().createElement(F.Z,{style:{width:450,display:"flex",justifyContent:"flex-end"}},o().createElement(m.Z,{onClick:k,className:B.button,variant:"text",color:"primary",size:"small",disabled:!(O&&I)},M("reset","Reset")),o().createElement(m.Z,{onClick:function(){return P?(e=g.services.topups.findIndex((function(e){return e.productSKU===y.productSKU&&e.SUBSCRIBERMSISDN===P.SUBSCRIBERMSISDN})),t={SUBSCRIBERMSISDN:O,accountTypeId:"AIRTIME",productSKU:y.productSKU,amount:I},(n=(0,a.Z)(g.services.topups))[e]=t,E({type:"topup_selected",payload:n}),void k()):function(){var e={SUBSCRIBERMSISDN:O,accountTypeId:"AIRTIME",productSKU:y.productSKU,amount:I};if(g.services.topups){var t=(0,a.Z)(g.services.topups),n=t.findIndex((function(t){return t.productSKU===y.productSKU&&t.SUBSCRIBERMSISDN===e.SUBSCRIBERMSISDN}));-1!==n?t[n]=e:t=t.concat(e),E({type:"topup_selected",payload:t}),k()}else E({type:"topup_selected",payload:[e]})}();var e,t,n},className:B.button,variant:"contained",color:"primary",size:"small",disabled:!(O&&I)},P?M("update","Update"):M("addToCart","Add to cart")))),o().createElement("section",{style:{height:400,flex:1}},o().createElement(u(),{rows:g.services.topups.filter((function(e){return e.productSKU===y.productSKU})),getRowId:function(e){return e.SUBSCRIBERMSISDN},columns:Y,disableDensitySelector:!0,disableSelectionOnClick:!0})))};var H=n(60905),Q=n(86619),Y=n(75696),G=n(99688),J=n(46062),X=n.n(J),$=n(39489);function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}X()($.Z,{attributes:{nonce:"c2VhbWxlc3M="},insert:"head",singleton:!1}),$.Z.locals;var ne=(0,Y.makeStyles)((function(e){var t,n;return{root:{backgroundColor:e.palette.primary.main,color:null==e||null===(t=e.palette)||void 0===t||null===(n=t.common)||void 0===n?void 0:n.white},grid:{width:271},formControl:{marginLeft:e.spacing(1)}}}));const ae=function(e){var t=e.handleClose,n=e.handleSubmit,a=e.product,r=e.state,c=ne(),s=te({},r.serialRangeList),u=Object.keys(s).includes("".concat(a.boxId))&&Object.keys(s["".concat(a.boxId)]).includes("".concat(a.startSerial)),d=u?s[a.boxId][a.startSerial].startSerial:"",p=u?s[a.boxId][a.startSerial].endSerial:"",v=u?"".concat(BigInt(p)-BigInt(d)+BigInt("1")):"",f=(0,i.useState)({startSerial:d,endSerial:p,quantity:v}),g=(0,l.Z)(f,2),E=g[0],y=g[1],S=(0,i.useState)(!0),h=(0,l.Z)(S,2),Z=h[0],b=h[1],I=(0,i.useState)(!1),T=(0,l.Z)(I,2),R=T[0],N=T[1],O=(0,i.useState)(!1),w=(0,l.Z)(O,2),x=w[0],_=w[1],B=(0,i.useState)(!1),M=(0,l.Z)(B,2),L=M[0],U=M[1];function F(e,t){var n=e.target.name,r=BigInt(t.startSerial),l=BigInt(a.startSerial),i=t.endSerial?BigInt(t.endSerial):BigInt("0"),o=BigInt(t.quantity),c=BigInt(a.quantity),s=BigInt("1");U("quantity"===n&&(o<=0||o>c)),"startSerial"===n&&(i!==BigInt("0")&&r>i||r<l||r>BigInt(a.endSerial))?N(!0):N(!1),"endSerial"===n&&(i<r||i<l||i>BigInt(a.endSerial))?_(!0):_(!1),""!==t.startSerial&&""!==t.endSerial?b(r<l||r>i||r>l+c-s||i>l+c-s||i<l):b(!0)}return o().createElement(C.Z,{open:!0,maxWidth:"sm",fullWidth:!0,onClose:t,disableBackdropClick:!1},o().createElement(k.Z,{className:c.root,id:"alert-dialog-title"},"Select Range"),o().createElement(D.Z,null,o().createElement(G.Z,{severity:"info",variant:"standard"},"Start and End Serial should be in between ".concat(a.startSerial," and ").concat(a.endSerial),o().createElement("br",null),"Quantity should be in between 1 and ".concat(a.quantity)),o().createElement(H.Z,{container:!0,spacing:1},o().createElement(H.Z,{item:!0,xs:12,sm:6},o().createElement(Q.Z,{error:R,className:c.grid,variant:"outlined",label:"Start Serial",name:"startSerial",type:"number",onInput:function(e){e.target.value=e.target.value.replace(/[^0-9]*/g,"")},autoComplete:"off",onChange:function(e){F(e,function(e){var t=BigInt(E.endSerial),n=BigInt(e.target.value),r=BigInt("1"),l=BigInt(a.quantity),i=BigInt(a.startSerial),o=t-n+r,c=o>0&&o<=l&&n>=i?"".concat(o):"0",s=te(te({},E),{},{startSerial:e.target.value,quantity:c});return y(s),s}(e))},value:E.startSerial,helperText:R?"Invalid Start Serial":""})),o().createElement(H.Z,{item:!0,xs:12,sm:6},o().createElement(Q.Z,{error:x,className:c.grid,variant:"outlined",label:"End Serial",name:"endSerial",type:"number",onInput:function(e){e.target.value=e.target.value.replace(/[^0-9]*/g,"")},autoComplete:"off",onChange:function(e){F(e,function(e){var t=""===E.startSerial?"".concat(a.startSerial):"".concat(E.startSerial),n=BigInt(E.startSerial),r=BigInt(e.target.value),l=BigInt("1"),i=r>=BigInt(a.startSerial)&&r<=BigInt(a.endSerial)?r-n+l:0,o=BigInt(a.quantity),c=BigInt(a.endSerial),s=i>0&&i<=o&&r<=c?"".concat(i):"0",u=te(te({},E),{},{endSerial:e.target.value,quantity:s,startSerial:t});return y(u),u}(e))},helperText:x?"Invaid End Serial":"",value:E.endSerial})),o().createElement(H.Z,{className:c.formControl},o().createElement(Q.Z,{error:L,className:c.grid,variant:"outlined",label:"Quantity",name:"quantity",type:"number",onInput:function(e){e.target.value=e.target.value.replace(/[^0-9]*/g,"")},autoComplete:"off",onChange:function(e){F(e,function(e){var t=""===E.startSerial?"".concat(a.startSerial):"".concat(E.startSerial),n=BigInt(t),r=BigInt(e.target.value),l=BigInt("1"),i=BigInt(a.endSerial),o=BigInt(a.startSerial),c=n+r-l,s=c<=i&&c>=o&&""!==e.target.value?"".concat(c):"",u={quantity:e.target.value,endSerial:s,startSerial:t};return y(u),u}(e))},helperText:L?"Invalid Quantity":"",value:E.quantity})))),o().createElement(P.Z,null,o().createElement(m.Z,{onClick:function(){t(),b(!1)},autoFocus:!0},"Close"),o().createElement(m.Z,{disabled:Z,onClick:function(){Z||n(te(te({},E),{},{productSKU:a.productSKU}),a.boxId,a.startSerial,a)},color:"primary",autoFocus:!0},"Submit")))};function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ie=(0,h.Z)((function(e){return(0,Z.Z)({cartSection:{float:"right",paddingRight:5,paddingLeft:5,textAlign:"right"}})}));function oe(){return o().createElement(y.GridOverlay,null,o().createElement("div",{style:{position:"absolute",top:0,width:"100%"}},o().createElement(d.Z,null)))}const ce=function(e){var t=e.state,n=e.dispatch,r=e.resellerId,s=e.selectedProduct,d=(0,i.useState)(0),y=(0,l.Z)(d,2),h=y[0],Z=y[1],O=(0,i.useState)([]),w=(0,l.Z)(O,2),x=w[0],C=w[1],P=(0,i.useState)(),D=(0,l.Z)(P,2),k=D[0],L=D[1],U=(0,i.useState)(),F=(0,l.Z)(U,2),A=F[0],j=F[1],q=(0,i.useState)(!1),W=(0,l.Z)(q,2),K=W[0],V=W[1],H=(0,i.useState)(),Q=(0,l.Z)(H,2),Y=Q[0],G=Q[1],J=(0,i.useState)(!1),X=(0,l.Z)(J,2),$=X[0],ee=X[1],te=(0,i.useState)(!1),ne=(0,l.Z)(te,2),re=ne[0],ce=ne[1],se=(0,i.useState)(!1),ue=(0,l.Z)(se,2),de=ue[0],me=ue[1],pe=(0,i.useState)(),ve=(0,l.Z)(pe,2),fe=ve[0],ge=ve[1],Ee=ie(),ye=(0,c.useTranslation)().t,Se=(0,E.Z)().showInfoMessage,he=(0,R.Z)().requestedPrincipalId,Ze=he!==r?null==r?void 0:r.toString():null,be=(0,i.useCallback)((function(){k&&(V(!0),(0,T.I8)(k,Ze,he,r).then((function(e){var n=e.data.map((function(e){var n=BigInt(e.endSerial)-BigInt(e.startSerial)+BigInt(1);return e.continuesRange=n===BigInt(e.quantity),e.price=(0,M.CH)(t.products,k),e}));C(n)})).finally((function(){return V(!1)})))}),[k,Ze]);function Ie(e){var a=le({},t.serialRangeList);if(a[e.boxId]){delete a[e.boxId][e.startSerial],0===Object.keys(a[e.boxId]).length&&delete a[e.boxId];var r=t.selectedSerials.filter((function(t){return t!==e.startSerial})),l=t.selectedByRange.filter((function(t){return t.startSerial!==e.startSerial}));n({type:"remove_range_select",payload:{value:a,data:l,serial:r}});var i=x.map((function(t){return t.startSerial===e.startSerial&&(t.tableMeta={},t.quantSelected&&(t.quantSelected=null)),t}));C(i),Se(ye("isRemoved",{element:"Range"}))}}function Te(e){var a=(0,_.cloneDeep)(t.serials);Object.keys(a).map((function(t){Object.getOwnPropertyNames(a[t]).includes(e)&&delete a[t][e]})),n({type:"set_serials",payload:a}),Se(ye("isRemoved",{element:"Serial"}))}function Re(e){return!(!Object.keys(t.serialRangeList).includes("".concat(e.boxId))||!Object.keys(t.serialRangeList[e.boxId]).includes("".concat(e.startSerial)))||!!(Object.keys(t.serials).includes(k)&&Object.keys(t.serials[k]).includes(e.boxId)&&t.serials[k][e.boxId]&&t.serials[k][e.boxId].length)}function Ne(e,a,r,l){e.boxId=l.boxId;var i=le({},t.serialRangeList),o=Object.keys(i);t.selectedByRange=t.selectedByRange.filter((function(e){return e.startSerial!==r})),t.selectedSerials=t.selectedSerials.filter((function(e){return e!==r}));var c=le(le({},l),{},{startSerialSelected:"".concat(e.startSerial),endSerialSelected:"".concat(e.endSerial),productSKU:k,quantity:"".concat(BigInt(e.endSerial)-BigInt(e.startSerial)+BigInt("1"))});o.includes("".concat(a))||(i[a]={}),i[a][r]=e,n({type:"stock_range_select",payload:{value:i,data:c,serial:r}}),Se(ye("itemAdded")),ee(!1)}function Oe(e){Ne({startSerial:null==e?void 0:e.startSerial,endSerial:null==e?void 0:e.endSerial,quantity:null==e?void 0:e.quantity,boxId:null==e?void 0:e.boxId,productSKU:k},null==e?void 0:e.boxId,null==e?void 0:e.startSerial,e)}(0,i.useEffect)((function(){be()}),[be]),(0,i.useEffect)((function(){"services"===(null==s?void 0:s.productType)?j(s):(j(null),L(null==s?void 0:s.productSKU))}));var we,xe,Ce,Pe=[{field:"checkbox",renderHeader:function(){return o().createElement(g.Z,{disabled:!0,indeterminate:t.selectedStock.length>0})},width:80,hideSortIcons:!0,disableColumnMenu:!0,filterable:!1,renderCell:function(e){var n,a,r,l;return o().createElement(g.Z,{onChange:function(){return Oe(e.row)},disabled:null===(n=e.row)||void 0===n||null===(a=n.tableMeta)||void 0===a?void 0:a.selectionDisabled,checked:(r=e.row,!!(null==t||null===(l=t.selectedByRange)||void 0===l?void 0:l.find((function(e){return(null==e?void 0:e.boxId)==(null==r?void 0:r.boxId)&&(null==e?void 0:e.quantity)==(null==r?void 0:r.quantity)}))))})}},{field:"boxId",width:150,headerName:ye("boxId")},{field:"startSerial",width:150,headerName:ye("startSerial"),valueGetter:function(e){var t;return null===(t=e.row.startSerial)||void 0===t?void 0:t.toString()}},{field:"endSerial",width:150,headerName:ye("endSerial"),valueGetter:function(e){var t;return null===(t=e.row.endSerial)||void 0===t?void 0:t.toString()}},{field:"quantity",width:150,sortable:!0,headerName:ye("quantity")},{field:"",headerName:ye("action"),width:350,filterable:!1,renderCell:function(e){return e.row.continuesRange?o().createElement(p.Z,null,o().createElement(m.Z,{disabled:t.selectedStock.includes(e.row.boxId),onClick:function(){return t=e.row,G(t),void ee(!0);var t},color:Re(e.row)?"secondary":"primary",variant:"outlined",startIcon:o().createElement(I.Z,{fontSize:"small"})},e.row.quantSelected?"".concat(e.row.quantSelected,"\n(").concat(ye("edit"),")"):ye("selectRange")),o().createElement(m.Z,{disabled:!Re(e.row),onClick:function(){return Ie(e.row)},color:Re(e.row)?"secondary":"primary",variant:"outlined"},ye("removeRange"))):o().createElement(p.Z,null,o().createElement(m.Z,{disabled:t.selectedStock.includes(e.row.boxId),onClick:function(){return t=e.row,Z(t.quantity),ge(t),void me(!0);var t},color:Re(e.row)?"secondary":"primary",variant:"outlined",startIcon:o().createElement(b.Z,{fontSize:"small"})},e.row.quantSelected?"".concat(e.row.quantSelected,"\n(").concat(ye("edit"),")"):ye("selectItems")),o().createElement(m.Z,{disabled:!Re(e.row),onClick:function(){return Te(e.row.boxId)},color:Re(e.row)?"secondary":"primary",variant:"outlined"},ye("removeItems")))}}];return o().createElement(o().Fragment,null,o().createElement("section",{className:Ee.cartSection},o().createElement("section",null,o().createElement(f.Z,{"aria-label":"cart",onClick:function(){return ce(!0)}},o().createElement(v.Z,{badgeContent:(0,M.e2)(t),color:"primary"},o().createElement(S.Z,{fontSize:"large"}))))),o().createElement("div",{style:{height:500,clear:"both"}},A?o().createElement(z,{isFixed:!A.price.variablePrice,state:t,dispatch:n,product:A}):o().createElement(u(),{loading:K,rows:(we=t.serialRangeList,xe=(0,a.Z)(x),Ce=(0,a.Z)(t.selectedSerials),xe.length>0&&xe.forEach((function(e){var n,a,r,l,i;e.tableMeta={},Ce.includes(e.startSerial)&&(e.quantSelected=null==we||null===(n=we[e.boxId])||void 0===n||null===(a=n[e.startSerial])||void 0===a?void 0:a.quantity,e.tableMeta={selectionDisabled:!0,bgColor:"lightgrey"}),!1===e.continuesRange&&(e.quantSelected=null===(r=t.serials)||void 0===r||null===(l=r[k])||void 0===l||null===(i=l[e.boxId])||void 0===i?void 0:i.length,e.tableMeta={selectionDisabled:!0,bgColor:"lightgrey"})})),xe),getRowId:function(e){return e.boxId},columns:Pe,columnBuffer:2,onSelectionModelChange:function(e){},onRowSelected:Oe,disableDensitySelector:!0,disableSelectionOnClick:!0,components:{LoadingOverlay:oe}}),$?o().createElement(ae,{handleClose:function(){ee(!1)},handleSubmit:Ne,product:le(le({},Y),{},{productSKU:k}),state:t}):null,re&&o().createElement(N.Z,{state:t,dispatch:n,onClose:function(){return ce(!1)},removeItem:function(e){switch(e.reserverType){case"RANGE":case"BATCH":Ie(e);break;case"SERIAL":Te(e.boxId);break;case"NON_SERIAL":!function(e){var a=[];-1!==t.stockQuantity.findIndex((function(t){return t.productSKU===e.productSKU}))&&(a=t.stockQuantity.filter((function(t){return t.productSKU!==e.productSKU})),n({type:"stock_quantity_select",payload:a}))}(e);break;case"TOPUP":var a=t.services.topups.filter((function(t){return t.productSKU!==e.productSKU}));n({type:"topup_selected",payload:a})}}}),de&&o().createElement(B,{rowQuantity:h,state:t,productSKU:k,boxId:null==fe?void 0:fe.boxId,dispatch:n,handleClose:function(){ge(null),me(!1)}})))}},29927:(e,t,n)=>{"use strict";n.d(t,{Z:()=>T});var a=n(11746),r=n(74315),l=n(2411),i=n.n(l),o=n(77277),c=n(8629),s=n(49429),u=n(38724),d=n(79249),m=n(61837),p=n(37390),v=n(97485),f=n(15584),g=n(91256),E=n(58987),y=n(89571),S=n(75696),h=n(9495),Z=n(76635),b=n(63135),I=(0,S.makeStyles)((function(e){var t,n;return{dialogContent:{backgroundColor:e.palette.primary.main,color:null==e||null===(t=e.palette)||void 0===t||null===(n=t.common)||void 0===n?void 0:n.white,textAlign:"left"}}}));const T=function(e){var t=e.state,n=(e.dispatch,e.onClose),S=e.removeItem,T=I(),R=(0,b.useTranslation)().t,N=(0,l.useState)(0),O=(0,r.Z)(N,2),w=O[0],x=O[1];function C(){var e=t.selectedByRange.map((function(e){var t;return{productSKU:null==e?void 0:e.productSKU,quantity:null==e?void 0:e.quantity,boxId:null==e?void 0:e.boxId,startSerial:null==e?void 0:e.startSerial,endSerial:null==e?void 0:e.endSerial,reserverType:"RANGE",amount:null==e||null===(t=e.price)||void 0===t?void 0:t.price}})),n=t.stockRows.map((function(e){return{productSKU:e.productSKU,quantity:e.quantity,boxId:e.boxId,reserverType:"BATCH",startSerial:e.startSerial,endSerial:e.endSerial}})),r=function(){var e=t.serials,n=t.price;try{return Object.keys(e).map((function(t){return Object.keys(e[t]).map((function(a){return{productSKU:t,boxId:a,quantity:e[t][a].length,reserverType:"SERIAL",amount:n[t][0]}}))})).flat()}catch(e){return[]}}(),l=t.stockQuantity.map((function(e){var t;return{productSKU:null==e?void 0:e.productSKU,quantity:null==e?void 0:e.quantity,boxId:"-",reserverType:null==e?void 0:e.reserveType,amount:null==e||null===(t=e.unitPrice)||void 0===t?void 0:t.price}})),i=function(){var e=t.services.topups,n=(0,Z.groupBy)(e,"productSKU");return Object.keys(n).map((function(e){return{productSKU:e,quantity:n[e].length,boxId:"-",reserverType:"TOPUP"}}))}();return[].concat((0,a.Z)(e),(0,a.Z)(n),(0,a.Z)(r),(0,a.Z)(l),(0,a.Z)(i))}return(0,l.useEffect)((function(){var e,t=0;null===(e=C())||void 0===e||e.forEach((function(e){t+=parseInt(null==e?void 0:e.quantity)*parseInt(null==e?void 0:e.amount)})),x(t)}),[t]),i().createElement(c.Z,{open:!0,maxWidth:"lg",fullWidth:!0,disableBackdropClick:!0,disableEscapeKeyDown:!0,disablePortal:!0},i().createElement(d.Z,{className:T.dialogContent,id:"alert-dialog-title"},R("selectedItems")),i().createElement(u.Z,null,i().createElement(g.Z,null,i().createElement(p.Z,{"aria-label":"a dense table"},i().createElement(E.Z,null,i().createElement(y.Z,null,i().createElement(f.Z,null,R("productSKU")),i().createElement(f.Z,null,R("reserveType")),i().createElement(f.Z,null,R("batchId")),i().createElement(f.Z,null,R("quantity")),"PISO"!=t.orderType&&i().createElement(f.Z,null,R("price")),"PISO"!=t.orderType&&i().createElement(f.Z,null,R("total")))),i().createElement(v.Z,null,C().map((function(e,n){return(null==e?void 0:e.quantity)>0&&i().createElement(y.Z,{key:n},i().createElement(f.Z,{component:"th",scope:"row"},null==e?void 0:e.productSKU),i().createElement(f.Z,null,(null==e?void 0:e.reserverType)||"-"),i().createElement(f.Z,null,(null==e?void 0:e.boxId)||"-"),i().createElement(f.Z,null,null==e?void 0:e.quantity),"PISO"!=t.orderType&&i().createElement(f.Z,null,null==e?void 0:e.amount),"PISO"!=t.orderType&&i().createElement(f.Z,null,(null==e?void 0:e.quantity)*(null==e?void 0:e.amount)),i().createElement(f.Z,null,i().createElement(m.Z,{size:"small",disableRipple:!0,onClick:function(){return S(e)}},i().createElement(h.Z,{fontSize:"small"}))))})),"0"!=w&&w&&"PISO"!=t.orderType&&i().createElement(y.Z,{key:w},i().createElement(f.Z,null),i().createElement(f.Z,null),i().createElement(f.Z,null),i().createElement(f.Z,null),i().createElement(f.Z,null,R("cartTotal")),i().createElement(f.Z,null,w)))))),i().createElement(s.Z,null,i().createElement(o.Z,{onClick:n,color:"primary"},R("closeButton"))))}},91787:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var a=n(8629),r=n(79249),l=n(38724),i=n(49429),o=n(77277),c=n(67358),s=n(90436),u=n(2411),d=n.n(u),m=n(63135),p=n(99688),v=n(79270);const f=function(e){var t=e.children,n=(0,m.useTranslation)().t;return d().createElement("section",{style:{marginTop:10,marginBottom:10}},d().createElement(p.Z,{severity:"error"},d().createElement(v.Z,null,n("error","Error")),d().createElement(d().Fragment,null,d().createElement(s.Z,{style:{paddingTop:10}},t))))};var g=n(22470),E=function(e){var t=e.orderMessage;return t?d().createElement(d().Fragment,null,"success"===t.kind&&d().createElement(g.Z,null,d().createElement(d().Fragment,null,t.message)),"error"===t.kind&&d().createElement(f,null,d().createElement(d().Fragment,null,d().createElement(d().Fragment,null,t.message)))):null};const y=function(e){var t=e.handleClose,n=e.orderMessage,u=e.loading,p=void 0!==u&&u,v=e.title,f=void 0===v?"":v,g=(0,m.useTranslation)().t,y=function(){return p&&!(n&&n.message)};return d().createElement(a.Z,{open:!0,fullWidth:!0,disableBackdropClick:!0},f&&d().createElement(r.Z,{id:"alert-dialog-title"},f),d().createElement(l.Z,null,y()?d().createElement(d().Fragment,null,d().createElement(s.Z,{style:{marginBottom:20,marginTop:20}},g("orderSubmitMessage","Submiting order details ...")),d().createElement(c.Z,{color:"primary"})):d().createElement(E,{orderMessage:n})),d().createElement(i.Z,null,d().createElement(o.Z,{disabled:y(),onClick:t,color:"primary",variant:"outlined"},"Close")))}},12842:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var a=n(2411),r=n.n(a),l=n(67358),i=function(e){var t=e.component,l=e.state,i=e.dispatch,o=(0,a.useMemo)((function(){return r().lazy((function(){return n(12173)("./"+t).catch((function(){return Promise.all([n.e(8171),n.e(4608)]).then(n.bind(n,24608))}))}))}),[t]);return r().createElement(a.Suspense,{fallback:r().createElement("div",null,"Loading...")},r().createElement(o,{state:l,dispatch:i}))};const o=function(e){var t=e.state,n=e.dispatch;return t.orderType?r().createElement(r().Fragment,null,r().createElement(i,{component:t.orderType,state:t,dispatch:n})):r().createElement(l.Z,null)}},83971:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var a=n(51119),r=n(74315),l=n(2411),i=n.n(l),o=n(8629),c=n(79249),s=n(38724),u=n(90436),d=n(67358),m=n(86619),p=n(49429),v=n(77277),f=n(13029),g=n(23664),E=n(63135),y=n(22470);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z=function(e){var t=e.paymentMode,n=e.payment,a=e.onChange;return i().createElement("div",null,i().createElement(u.Z,{style:{marginBottom:10}},"Payment Confirmation [ MODE # ",t," ]"," "),i().createElement("div",{style:{display:"flex",width:"100%",margin:"5px 5px 5px 5px"}},i().createElement(m.Z,{required:!0,value:n.paidTo,label:"Paid to",name:"paidTo",fullWidth:!0,onChange:a,variant:"outlined",style:{marginTop:5,marginBottom:5,marginRight:2}}),i().createElement(m.Z,{required:!0,fullWidth:!0,value:n.paidFrom,label:"Payment from",name:"paidFrom",onChange:a,variant:"outlined",style:{marginTop:5,marginBottom:5,marginLeft:2}})),i().createElement(m.Z,{fullWidth:!0,value:n.externalReferenceNumber,label:"External Reference Number (optional)",name:"externalReferenceNumber",onChange:a,variant:"outlined",style:{margin:5}}),i().createElement(m.Z,{fullWidth:!0,value:n.paymentLink,label:"Payment Link (optional)",name:"paymentLink",onChange:a,variant:"outlined",style:{margin:5}}))};const b=function(e){var t=e.orderId,n=e.handleClose,m=e.paymentMode,S=e.title,b=(e.showClose,(0,l.useState)()),I=(0,r.Z)(b,2),T=I[0],R=I[1],N=(0,l.useState)(!1),O=(0,r.Z)(N,2),w=O[0],x=O[1],C=(0,l.useState)(!1),P=(0,r.Z)(C,2),D=P[0],k=P[1],_=(0,l.useState)(),B=(0,r.Z)(_,2),M=B[0],L=B[1],U=(0,g.Z)().showErrorMessage,F=(0,E.useTranslation)().t,A=(0,l.useState)({paidTo:"",paidFrom:"",externalReferenceNumber:"",data:"",paymentLink:""}),j=(0,r.Z)(A,2),q=j[0],W=j[1];(0,l.useEffect)((function(){t&&(x(!0),(0,f.s$)(t).then((function(e){return R(e)})).catch((function(e){U(F("orderDetailsFetchError","Unable to load order details"))})).finally((function(){return x(!1)})))}),[t]);var K=function(){return T&&"PAYMENT_WAIT_CONFIRM"===T.state&&!M};return i().createElement(o.Z,{open:!0,fullWidth:!0},i().createElement(c.Z,{id:"alert-dialog-title"},S||""),i().createElement(s.Z,null,w?i().createElement(i().Fragment,null,i().createElement(u.Z,null,F("gettingOrderDetails","Getting order deatils ...")),i().createElement(d.Z,{color:"secondary"})):null,K()?i().createElement(Z,{onChange:function(e){W((function(t){return h(h({},t),{},(0,a.Z)({},e.target.name,e.target.value))}))},paymentMode:m,payment:q}):null,T&&"PAYMENT_WAIT_CONFIRM"!==T.state&&i().createElement(y.Z,null,i().createElement(i().Fragment,null,"".concat(F("Order ID","Order ID")," : ").concat(t))),!t&&i().createElement(d.Z,{color:"secondary"}),M&&i().createElement(y.Z,null,i().createElement(i().Fragment,null,M))),i().createElement(p.Z,null,i().createElement(v.Z,{onClick:n,color:"primary",variant:"contained",disabled:D},"Close"),K()?i().createElement(v.Z,{disabled:["paidTo","paidFrom"].some((function(e){return!q[e]}))||D,onClick:function(){var e=q.paidTo,t=q.paidFrom,a=q.externalReferenceNumber,r=q.paymentLink,l={paymentSuccess:!0,paymentMode:m||"",data:"",paidTo:e,paidFrom:t,externalReferenceNumber:a,paymentLink:r};k(!0),(0,f.B1)(T.invoiceIds[0],l).then((function(e){0===e.resultCode?L(e.resultMessage):(U(e),n())})).catch((function(e){U(e),n()})).finally((function(){return k(!1)}))},color:"primary",variant:"contained"},D?"Confirming ...":"Confirm"):null))}},28358:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var a=n(2411),r=n(8526),l=n(79692),i=n(12420),o=n(77114),c=n(12783),s=n(60905),u=n(90436),d=n(6277),m=n(63135),p=(0,l.Z)((function(e){return(0,i.Z)({spacingTop:{marginTop:e.spacing(3)},form:{display:"flex",flexDirection:"column",flexWrap:"wrap"},element:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},input:{},description:{width:419},button:{},btnSpacing:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},sectionSeparator:{marginTop:e.spacing(3),marginBottom:e.spacing(2),marginLeft:e.spacing(1)},wrapper:{padding:e.spacing(2)},titleSpacing:{marginBottom:e.spacing(1)},subTitleSpacing:{marginBottom:e.spacing(1)},dividerSpacing:{marginBottom:e.spacing(3)},fullWidth:{width:"100%"},minListViewHeight:{minHeight:600}})}));const v=function(e){var t=e.data,n=e.state,l=e.onFormSubmit,i=e.validateFields,v=p();a.useEffect((function(){var e,t;null!==(e=n.subscriberAdditionalFields)&&void 0!==e&&e.name&&null!==(t=n.subscriberAdditionalFields)&&void 0!==t&&t.phone&&l(n.subscriberAdditionalFields)}),[n.subscriberAdditionalFields]);var f=r.Ry().shape({name:r.Z_().required(),phone:r.Z_().required(),address:r.Z_()}),g=(0,o.TA)({initialValues:t,validationSchema:f,onSubmit:function(e){return l&&l(e,(function(e){}))},enableReinitialize:!0}),E=g.values,y=g.handleChange,S=g.handleSubmit,h=g.validateForm,Z=g.setErrors,b=g.errors,I=(0,m.useTranslation)().t,T=function(){h().then((function(e){Z(e);var t=Object.keys(e);0===t.length&&S(),i(t)}))};return a.createElement(s.Z,{container:!0,className:v.spacingTop},a.createElement(s.Z,{container:!0,spacing:3},a.createElement(s.Z,{item:!0,xs:12},a.createElement(u.Z,{variant:"subtitle1",color:"primary"},I("subscriberInformation")))),a.createElement(s.Z,{container:!0,spacing:3},a.createElement(s.Z,{item:!0,xs:12,sm:4},a.createElement(c.SeamlessInput,{required:!0,className:(0,d.default)(v.element,v.input),name:"name",value:E.name,onChange:y,onKeyUp:T,label:I("subscriberName"),helperText:b.name||"",error:!!b.name,fullWidth:!0})),a.createElement(s.Z,{item:!0,xs:12,sm:4},a.createElement(c.SeamlessInput,{required:!0,error:!!b.phone,className:(0,d.default)(v.element,v.input),name:"phone",value:E.phone,onChange:y,onKeyUp:T,label:I("subscriberPhone"),helperText:b.phone||"",fullWidth:!0}))),a.createElement(s.Z,{container:!0,spacing:3},a.createElement(s.Z,{item:!0,xs:12,sm:8},a.createElement(c.SeamlessInput,{error:!!b.address,className:(0,d.default)(v.element,v.input),name:"address",value:E.address,onChange:y,onBlur:T,label:I("address"),multiline:!0,rows:4,rowsMax:4,fullWidth:!0}))))}},22470:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var a=n(2411),r=n.n(a),l=n(90436),i=n(99688),o=n(79270),c=n(63135);const s=function(e){var t=e.children,n=(0,c.useTranslation)().t;return r().createElement("section",{style:{marginTop:10,marginBottom:10}},r().createElement(i.Z,{severity:"success"},r().createElement(o.Z,null,n("success","Success")),r().createElement(r().Fragment,null,r().createElement(l.Z,{style:{paddingTop:10}},t))))}},24235:(e,t,n)=>{"use strict";n.d(t,{NO:()=>l,xk:()=>i,CH:()=>c,br:()=>s,e2:()=>u,RH:()=>m,z3:()=>p,Jz:()=>f,KJ:()=>g,JU:()=>E});var a=n(11746),r=n(76635);function l(e,t){return e.find((function(e){var n;return(null==e||null===(n=e.variant)||void 0===n?void 0:n.productSKU)===t})).product.productType}function i(e,t){return{serialised:"SERIAL","non-serialised":"NON_SERIAL","trackable-non-serialised":"RANGE","services-topup":"","services-b2b":""}[l(e,t)]}function o(e,t){return e.find((function(e){var n;return(null==e||null===(n=e.variant)||void 0===n?void 0:n.productSKU)===t}))}function c(e,t){var n,a=e.find((function(e){var n;return(null==e||null===(n=e.variant)||void 0===n?void 0:n.productSKU)===t}));return null==a||null===(n=a.variant)||void 0===n?void 0:n.unitPrice}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,a=o(e,n);return t.filter((function(e){var t;return null==a||null===(t=a.product)||void 0===t?void 0:t.taxIds.includes(e.id)}))}function u(e){var t,n,a,r,l,i=e&&(null===(t=e.selectedStock)||void 0===t?void 0:t.length)+(null===(n=e.selectedByRange)||void 0===n?void 0:n.length),o=0;Object.keys(e.serials).map((function(t){var n,a,r=Object.values(null==e?void 0:e.serials[t]);r&&(null===(n=r[0])||void 0===n?void 0:n.length)>=1&&(o+=null===(a=Object.values(e.serials[t]))||void 0===a?void 0:a.length)}));var c=null===(a=e.services)||void 0===a||null===(r=a.topups)||void 0===r?void 0:r.length,s=null===(l=e.stockQuantity)||void 0===l?void 0:l.length;return i+o+c+s}function d(e,t){var n;return null===(n=c(t.products,e))||void 0===n?void 0:n.price}function m(e){var t,n,l=e.selectedByRange,i=e.stockRows,o=e.stockQuantity,c=e.serials,s=l.concat(i),u=o.map((function(e){return{productSKU:e.productSKU,quantity:e.quantity,boxId:"-",reserverType:e.reserveType}})),m=s.map((function(e){var t;return{productSKU:e.productSKU,quantity:parseInt(e.quantity,10),boxId:e.boxId,price:null===(t=e.unitPrice)||void 0===t?void 0:t.price}})),p=Object.keys(c).map((function(t){return Object.keys(c[t]).map((function(n){return{productSKU:t,quantity:c[t][n].length,boxId:n,price:d(t,e)}}))})).flat(),v=(t=e.services.topups,n=(0,r.groupBy)(t,"productSKU"),Object.keys(n).map((function(e){return{productSKU:e,quantity:n[e].length,boxId:"-",reserverType:"TOPUP",amount:n[e].reduce((function(e,t){return e+parseInt(t.amount)}),0)}})));return[].concat((0,a.Z)(m),(0,a.Z)(p),(0,a.Z)(u),(0,a.Z)(v))}function p(e){return u(e)>0||!1}function v(e,t){return e.find((function(e){return e.productSKU===t}))}function f(e,t){var n={amount:0,currency:""},a=e.find((function(e){return e.productSKU===t}));return a&&(n=a.itemRow.unitPrice),n}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,a=v(e,n);return t.filter((function(e){var t,n;return(null==a||null===(t=a.itemRow)||void 0===t||null===(n=t.taxDetails[0])||void 0===n?void 0:n.id)==e.id}))}function E(e,t){var n,a=0,r=e.find((function(e){return e.productSku===t}));return r&&(a=(null===(n=r.transactionRows.find((function(e){return["RECEIVER_PENALTY","PENALTY"].includes(e.tag)})))||void 0===n?void 0:n.amount)||0),a}},21602:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var a=n(29971);const r=function(){return(0,a.useSelector)((function(e){return e.auth}),a.shallowEqual).user}},9594:(e,t,n)=>{"use strict";n.d(t,{K:()=>c,r:()=>s});var a=n(74315),r=n(76635),l=n(2411),i=n.n(l),o=i().createContext();function c(e){var t=e.children,n=i().useState(),l=(0,a.Z)(n,2),c=l[0],s=l[1],u=i().useState(),d=(0,a.Z)(u,2),m=d[0],p=d[1];return i().createElement(o.Provider,{value:{orderTypes:c,raw:m,setValue:function(e){p(e.paymentPresets);var t=(0,r.groupBy)(e.paymentPresets,"category");s(t)}}},t)}function s(){var e=i().useContext(o);if(void 0===e)throw new Error("useOrderType must be used within a OrderTypeProvider");return{raw:e.raw,orderTypes:e.orderTypes,setValue:e.setValue}}},87516:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var a=n(74315),r=n(2411),l=n.n(r),i=n(29971);const o=function(e){var t=l().useState(null),n=(0,a.Z)(t,2),r=n[0],o=n[1],c=(0,i.useSelector)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.rbac}),i.shallowEqual);return l().useEffect((function(){var t,n=(null===(t=c.features.find((function(t){return t.module===e})))||void 0===t?void 0:t.features)||[];o(n)}),[c]),r}},37125:(e,t,n)=>{"use strict";n.d(t,{Z:()=>La});var a=n(2411),r=n.n(a),l=n(48049),i=n(74315),o=n(75696),c=n(60905),s=n(12783),u=n(68848),d=n.n(u),m=n(6277),p=n(55599),v=(0,o.makeStyles)((function(e){return(0,o.createStyles)({form:{display:"flex",flexDirection:"column",flexWrap:"wrap"},element:{margin:e.spacing(1)},input:{},button:{},label:{margin:e.spacing(1)},root:{width:"100%",margin:e.spacing(1)},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},progress:{marginLeft:"8px"},rowSpacing:{marginBottom:e.spacing(.5)},fullWidth:{width:"100%"},spacingTop:{marginTop:e.spacing(3)}})}));const f=function(){var e=v(),t=r().useState(""),n=(0,i.Z)(t,2),a=n[0],l=n[1],o=r().useState(""),u=(0,i.Z)(o,2),f=u[0],g=u[1],E=r().useState(1),y=(0,i.Z)(E,2),S=y[0],h=(y[1],r().useState(0)),Z=(0,i.Z)(h,2),b=Z[0],I=Z[1],T=r().useState(),R=(0,i.Z)(T,2),N=R[0],O=R[1];return r().createElement(r().Fragment,null,r().createElement(c.Z,{container:!0,className:e.spacingTop},r().createElement(c.Z,{container:!0,spacing:3,className:e.spacingTop},r().createElement(c.Z,{item:!0,sm:4},r().createElement(s.SeamlessInput,{value:a,name:"batchId",label:"Batch Id",fullWidth:!0,onChange:function(e){l(e.target.value)},className:(0,m.default)(e.element,e.input)})),r().createElement(c.Z,{item:!0,sm:4},r().createElement(s.SeamlessInput,{value:f,name:"productSku",label:"Product Sku",fullWidth:!0,onChange:function(e){g(e.target.value)},className:(0,m.default)(e.element,e.input)})),r().createElement(c.Z,{item:!0,sm:4},r().createElement(s.SeamlessInput,{value:b,name:"price",label:"Price",type:"number",fullWidth:!0,onChange:function(e){I(parseInt(e.target.value))},className:(0,m.default)(e.element,e.input)}))),r().createElement(c.Z,{container:!0,spacing:3,className:e.spacingTop},r().createElement(c.Z,{item:!0,sm:4},r().createElement(s.SeamlessInput,{value:N,name:"serial",label:"Serial",fullWidth:!0,onChange:function(e){O(e.target.value)},className:(0,m.default)(e.element,e.input)}))),r().createElement(s.SeamlessButton,{className:e.button,onClick:function(e){return t=document.getElementById("#barcode"),n={batchIdData:a,productSkuData:f,q:S,p:b},p.pack(n,!0),void d()(t,"".concat(a,"*").concat(f,"*").concat(N,"*").concat(b),{text:a,width:1,format:"CODE128"});var t,n},variant:"contained",color:"primary",type:"submit"},"Create")),r().createElement("img",{id:"#barcode"}))},g=function(){return a.createElement(s.SeamlessContainer,{title:"Create Barcode",description:"Barcode with specific data"},a.createElement(f,null))};var E=n(9594),y=n(33553),S=n(18896),h=n(79692),Z=n(12420),b=n(63135),I=n(77277),T=n(8629),R=n(49429),N=n(38724),O=n(55999),w=n(79249),x=n(11746),C=n(51119),P=n(76635);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){(0,C.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _={disableOrderType:!1,orderType:"",price:{},selectedCat:null,selectedProducts:[],selectedVariants:[],serialRangeList:{},selectedSerials:[],selectedStock:[],selectedByRange:[],stockRows:[],recoverFrom:null,buyer:null,sender:null,receiver:null,returnOrder:null,serials:{},returnTo:null,seller:null,initiator:null,products:[],paymentAgreement:"",paymentMode:"",stockQuantity:[],taxes:[],dropLocation:[],pickupLocation:[],deliveryOptions:{},services:{topups:[]},potentialReceivers:[],groups:[],routeInfo:[],subscriberAdditionalFields:null,additionalFields:[],returnType:""};const B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"category_select":var n=k(k({},e),{},{selectedCat:t.payload,selectedProducts:_.selectedProducts,selectedVariants:_.selectedVariants});return n;case"product_select":return k(k({},e),{},{selectedProducts:t.payload,selectedVariants:_.selectedVariants});case"add_selected_product_price":var a=t.payload,r=a.productSKUName,l=a.price,i=(0,P.cloneDeep)(e.price);return Object.getOwnPropertyNames(i).includes(r)?i[r][0]=l:i[r]=(0,C.Z)({},0,l),k(k({},e),{},{price:i});case"variant_select":return k(k({},e),{},{selectedVariants:t.payload});case"ordertype_change":var o=(0,x.Z)(e.taxes);return k(k({},_),{},{orderType:t.payload,taxes:o});case"disable_ordertype":return k(k({},e),{},{disableOrderType:t.payload});case"stock_select":return k(k({},e),{},{selectedStock:t.payload.ids,stockRows:t.payload.rows});case"stock_range_select":return k(k({},e),{},{serialRangeList:t.payload.value,selectedByRange:e.selectedByRange.concat(t.payload.data),selectedSerials:e.selectedSerials.concat(t.payload.serial)});case"remove_range_select":return k(k({},e),{},{serialRangeList:t.payload.value,selectedByRange:t.payload.data,selectedSerials:t.payload.serial});case"recover_from":return k(k({},e),{},{recoverFrom:t.payload});case"buyer_select":return k(k({},e),{},{buyer:t.payload});case"order_select":return k(k({},e),{},{returnOrder:t.payload});case"order_select_reset":return k(k({},e),{},{returnOrder:_.returnOrder});case"box_item_selected":var c=t.payload,s=c.items,u=c.productSKU,d=c.boxId,m=(0,P.cloneDeep)(e.serials);return Object.getOwnPropertyNames(m).includes(u)?m[u][d]=s:m[u]=(0,C.Z)({},d,s),k(k({},e),{},{serials:m});case"set_serials":return k(k({},e),{},{serials:t.payload});case"return_to_select":return k(k({},e),{},{returnTo:t.payload});case"return_to_reset":return k(k({},e),{},{returnTo:_.returnTo});case"seller_select":return k(k({},e),{},{seller:t.payload});case"sender_select":return k(k({},e),{},{sender:t.payload});case"receiver_select":return k(k({},e),{},{receiver:t.payload});case"initiator_select":return k(k({},e),{},{initiator:t.payload});case"product_loaded":return k(k({},e),{},{products:t.payload});case"payment_mode_selected":return k(k({},e),{},{paymentMode:t.payload});case"payment_agreement_selected":return k(k({},e),{},{paymentAgreement:t.payload});case"stock_quantity_select":return k(k({},e),{},{stockQuantity:t.payload});case"tax_loaded":return k(k({},e),{},{taxes:t.payload});case"drop_location_select":return k(k({},e),{},{dropLocation:t.payload});case"pickup_location_select":return k(k({},e),{},{pickupLocation:t.payload});case"delivery_option_select":return k(k({},e),{},{deliveryOptions:t.payload});case"return_type":return k(k({},e),{},{returnType:t.payload});case"topup_selected":var p=k(k({},e.services),{},{topups:t.payload});return k(k({},e),{},{services:p});case"group_selected":return k(k({},e),{},{groups:t.payload});case"route_info_selected":return k(k({},e),{},{routeInfo:t.payload});case"subscriber_additional_fields":return k(k({},e),{},{subscriberAdditionalFields:t.payload});case"set_addtional_info":return k(k({},e),{},{additionalFields:t.payload});case"total_amount":var v=(0,x.Z)(e.additionalFields),f=v.findIndex((function(e){return e.key===t.payload.key}));return-1===f?v=v.concat(t.payload):v[f]=t.payload,k(k({},e),{},{additionalFields:v});case"reset":var g=e.orderType;return k(k({},_),{},{orderType:g});default:return e}};var M=n(30781),L=n(23664);function U(e){var t=e.handleClose,n=e.onAccept,a=(0,b.useTranslation)().t;return r().createElement(T.Z,{open:!0,onClose:t,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",disableBackdropClick:!0,disableEscapeKeyDown:!0},r().createElement(w.Z,{id:"alert-dialog-title"},a("changeOrderTypeDialogueTitle")),r().createElement(N.Z,null,r().createElement(O.Z,{id:"alert-dialog-description"},a("changeOrderTypeDialogueDescription"))),r().createElement(R.Z,null,r().createElement(I.Z,{onClick:t,color:"primary"},a("no")),r().createElement(I.Z,{variant:"contained",onClick:n,color:"primary",autoFocus:!0},a("yes"))))}const F=function(e){var t=e.orderType,n=r().useReducer(B,_),a=(0,i.Z)(n,2),l=a[0],o=a[1],c=r().useState(!1),s=(0,i.Z)(c,2),u=s[0],d=s[1],m=r().useState(),p=(0,i.Z)(m,2),v=p[0],f=p[1],g=r().useState(!1),y=(0,i.Z)(g,2),S=y[0],h=y[1],Z=r().useState([]),I=(0,i.Z)(Z,2),T=I[0],R=I[1],N=(0,E.r)().orderTypes,O=(0,L.Z)().showErrorMessage,w=(0,b.useTranslation)().t;return r().useEffect((function(){if(N){h(!0);var e=N["CREATE"===t?"ORDER":t];e&&R(e),h(!1)}}),[N,t]),r().useEffect((function(){T.length>0&&(o({type:"ordertype_change",payload:T[0].name}),(0,M.yZ)().then((function(e){o({type:"tax_loaded",payload:e.taxes})})).catch((function(){O(w("unableToLoadTaxes"))})))}),[T]),r().createElement(r().Fragment,null,u&&r().createElement(U,{onAccept:function(){o({type:"ordertype_change",payload:v}),f(null),d(!1)},handleClose:function(){return d(!1)}}),r().createElement(it,{disable:l.disableOrderType,handleChange:function(e){""==l.orderType?o({type:"ordertype_change",payload:e}):(f(e),d(!0))},name:"Order type",list:T,loading:S,value:l.orderType}),r().createElement(ut.default,{state:l,dispatch:o}))};var A=n(41744),j=n.n(A),q=n(70696),W=n(85990),K=n(30922),V=n(7089),z=n(12231),H=n(73698),Q=n(86619),Y=n(34221),G=n(13029),J=n(19985),X=n(83971),$=n(90436),ee=n(67358),te=n(46222),ne=n(22470),ae=n(96810),re=n.n(ae),le=(0,h.Z)((function(e){return(0,Z.Z)({primaryButton:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,padding:"".concat(e.spacing(1),"px ").concat(e.spacing(3),"px"),borderRadius:e.shape.borderRadius},spacingTop:{marginTop:e.spacing(3)},spacingBottom:{marginBottom:e.spacing(1)},rowSpacing:{marginBottom:e.spacing(.5)},dialogWrapper:{"& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginBottom:e.spacing(3)},fieldTitle:{"& .MuiFormLabel-root":{color:e.palette.primary.main,marginBottom:e.spacing(2)}},btnSpace:{marginRight:e.spacing(2)},textCenter:{textAlign:"center"},btnBlock:{display:"block",width:"100%"},textWhite:{color:"#ffffff"}})})),ie=function(e){var t=e.paymentMode,n=e.showTimer,a=e.payerPhone,l=e.payeeShortcode,i=e.payeeTillNumber,o=e.mPesaCountdownTimer,u=e.renderTime,d=e.setValueTillNumber,p=e.setValuePayeeShortcode,v=e.setValuePayerPhone,f=le(),g=(0,b.useTranslation)().t;return r().createElement("div",null,r().createElement($.Z,{style:{marginBottom:10}},"Payment Mode # ",t),!1===n?r().createElement(r().Fragment,null,r().createElement(c.Z,{container:!0,spacing:3,className:(0,m.default)(f.rowSpacing,f.spacingTop)},r().createElement(c.Z,{item:!0,xs:12},r().createElement(c.Z,{item:!0,xs:6},r().createElement(s.SeamlessInput,{className:f.fieldTitle,fullWidth:!0,name:"msisdn",onChange:function(e){return v(e.target.value)},label:g("payerPhone"),value:a,required:!0}))),r().createElement(c.Z,{item:!0,xs:12},r().createElement(c.Z,{item:!0,xs:6},r().createElement(s.SeamlessInput,{className:f.fieldTitle,fullWidth:!0,name:"shortCode",onChange:function(e){return p(e.target.value)},label:g("payeeShortcode"),value:l,required:!0}))),r().createElement(c.Z,{item:!0,xs:12},r().createElement(c.Z,{item:!0,xs:6},r().createElement(s.SeamlessInput,{className:f.fieldTitle,fullWidth:!0,name:"tillNumber",onChange:function(e){return d(e.target.value)},label:g("payeeTillNumber"),value:i,required:!0}))))):r().createElement(r().Fragment,null,r().createElement(c.Z,{container:!0,spacing:3,className:(0,m.default)(f.rowSpacing,f.spacingTop)},r().createElement(c.Z,{container:!0},r().createElement(c.Z,{item:!0,xs:6,className:f.spacingBottom},r().createElement($.Z,{variant:"subtitle1",color:"primary"},g("payerPhone")),r().createElement($.Z,{variant:"body1"},a))),r().createElement(c.Z,{container:!0},r().createElement(c.Z,{item:!0,xs:6,className:f.spacingTop},r().createElement($.Z,{variant:"subtitle1",color:"primary"},g("payeeShortcode")),r().createElement($.Z,{variant:"body1"},l)),r().createElement(c.Z,{item:!0,xs:6,className:f.spacingTop},r().createElement($.Z,{variant:"subtitle1",color:"primary"},g("payeeTillNumber")),r().createElement($.Z,{variant:"body1"},i))),r().createElement(c.Z,{container:!0,className:f.spacingTop},r().createElement(c.Z,{item:!0,xs:12},r().createElement(s.SeamlessButton,{className:(0,m.default)(f.primaryButton,f.spacingBottom,f.btnBlock),color:"primary",variant:"contained",disabled:!0},g("processing")))),r().createElement(c.Z,{container:!0},r().createElement(c.Z,{item:!0,xs:12,className:f.spacingBottom},r().createElement($.Z,{variant:"body1",className:f.textCenter}))),r().createElement(c.Z,{container:!0},r().createElement(c.Z,{item:!0,xs:12,className:f.textCenter},r().createElement(re(),{duration:o},u))))))};const oe=function(e){var t,n=e.orderId,l=e.handleClose,o=e.paymentMode,c=e.title,s=(e.showClose,le()),u=(0,b.useTranslation)().t,d=(0,a.useState)(!1),m=(0,i.Z)(d,2),p=m[0],v=m[1],f=(0,a.useState)(!1),g=(0,i.Z)(f,2),E=g[0],y=g[1],S=(0,a.useState)(!0),h=(0,i.Z)(S,2),Z=h[0],O=h[1],x=(0,a.useState)(!0),C=(0,i.Z)(x,2),P=C[0],D=C[1],k=(0,a.useState)(!0),_=(0,i.Z)(k,2),B=_[0],M=_[1],U=(0,a.useState)(),F=(0,i.Z)(U,2),A=F[0],j=F[1],q=(0,a.useState)(""),W=(0,i.Z)(q,2),K=W[0],V=W[1],z=(0,a.useState)(""),H=(0,i.Z)(z,2),Q=H[0],Y=H[1],J=(0,a.useState)(""),X=(0,i.Z)(J,2),ae=X[0],re=X[1],oe=(0,a.useState)(""),ce=(0,i.Z)(oe,2),se=ce[0],ue=ce[1],de=(0,a.useState)(""),me=(0,i.Z)(de,2),pe=me[0],ve=me[1],fe=(0,a.useState)(""),ge=(0,i.Z)(fe,2),Ee=ge[0],ye=ge[1],Se=(0,a.useState)(),he=(0,i.Z)(Se,2),Ze=he[0],be=he[1],Ie=(0,a.useState)(!1),Te=(0,i.Z)(Ie,2),Re=Te[0],Ne=Te[1],Oe=(0,a.useState)(!1),we=(0,i.Z)(Oe,2),xe=we[0],Ce=we[1],Pe=(0,a.useState)(),De=(0,i.Z)(Pe,2),ke=De[0],_e=(De[1],(0,L.Z)()),Be=_e.showSuccessMessage,Me=_e.showErrorMessage,Le=null===(t=window.config.order)||void 0===t?void 0:t.mPesaCountdownTimer;(0,a.useEffect)((function(){1==E&&setTimeout((function(){Ee&&function(e){(0,G.he)(e).then((function(e){0==e.resultCode?Be(e.resultDescription):Me(u("Payment is failed"))})).catch((function(e){Me(u("Payment is failed"))}))}(Ee)}),1e3*Le-2e3)}),[E]),(0,a.useEffect)((function(){n&&(Ne(!0),(0,G.s$)(n).then((function(e){be(e),V(e.seller.id),Y(e.buyer.id),j(e.externalReference),e.invoiceIds&&e.invoiceIds.length>0?ye(e.invoiceIds[0]):Me(u("Invoice Id not found")),0==e.resultCode&&((0,te.EZ)(e.buyer.id).then((function(e){var t;if(null!=e&&null!==(t=e.resellerInfo)&&void 0!==t&&t.resellerData){var n,a=null===(n=e.resellerInfo.resellerData)||void 0===n?void 0:n.resellerMSISDN;re(a),M(!1)}else Me(u("buyerNotFetched"))})).catch((function(e){Me(u("buyerNotFetched"))})),(0,te.EZ)(e.seller.id).then((function(e){var t,n;if(e.resellerInfo&&(null===(t=e.resellerInfo)||void 0===t||null===(n=t.additionalFields)||void 0===n?void 0:n.length)>0){var a,r,l=null===(a=e.resellerInfo.additionalFields)||void 0===a?void 0:a.find((function(e){return"shortCode"===e.name})),i=null===(r=e.resellerInfo.additionalFields)||void 0===r?void 0:r.find((function(e){return"tillNo"===e.name}));ue(l.value),ve(i.value),O(!1),D(!1)}else Me(u("sellerNotFetched"))})).catch((function(e){Me(u("sellerNotFetched"))})))})).catch((function(e){l(),Me(u("orderDetailsFetchError","Unable to load order details"))})).finally((function(){return Ne(!1)})))}),[n]);var Ue=function(){return Ze&&"PAYMENT_WAIT_CONFIRM"===Ze.state&&!ke};return r().createElement("div",null,r().createElement(T.Z,{open:!0,fullWidth:!0},r().createElement(w.Z,{id:"alert-dialog-title"},c||""),r().createElement(N.Z,null,Re?r().createElement(r().Fragment,null,r().createElement($.Z,null,u("gettingOrderDetails","Getting order deatils ...")),r().createElement(ee.Z,{color:"secondary"})):null,Ue()?r().createElement(ie,{paymentMode:o,showTimer:E,payerPhone:ae,payeeShortcode:se,payeeTillNumber:pe,mPesaCountdownTimer:Le,renderTime:function(e){var t=e.remainingTime;if(0!==t)return r().createElement("div",{className:"timer"},r().createElement("div",{className:"text"},u("remaining")),r().createElement("div",{className:"value"},t),r().createElement("div",{className:"text"},u("seconds")));l()},setValueTillNumber:function(e){D(!0),ve(e),e&&""!==e&&D(!1)},setValuePayeeShortcode:function(e){O(!0),ue(e),e&&""!==e&&O(!1)},setValuePayerPhone:function(e){M(!0),re(e),e&&""!==e&&M(!1)}}):null,Ze&&"PAYMENT_WAIT_CONFIRM"!==Ze.state&&r().createElement(ne.Z,null,r().createElement(r().Fragment,null,"".concat(u("Order ID","Order ID")," : ").concat(n))),xe&&r().createElement(ee.Z,{color:"secondary"}),ke&&r().createElement(ne.Z,null,r().createElement(r().Fragment,null,ke))),r().createElement(R.Z,null,r().createElement(I.Z,{disabled:p,onClick:l,color:"primary",variant:"contained"},"Close"),Ue()?r().createElement(I.Z,{disabled:p||B||Z||P||xe,onClick:function(){var e={paymentSuccess:!0,paymentMode:o||"",data:"",additionalFields:{msisdn:ae,shortCode:se,tillNumber:pe},paidTo:K,paidFrom:Q,externalReferenceNumber:A,paymentLink:""};Ce(!0),(0,G.B1)(Ze.invoiceIds[0],e).then((function(e){0===e.resultCode?(y(!0),v(!0)):(v(!1),Me(e),l())})).catch((function(e){Me(e),l()})).finally((function(){return Ce(!1)}))},color:"primary",variant:"contained",className:s.textWhite},xe?"Confirming ...":"Confirm"):null)))};var ce,se=n(60552),ue=n(38592),de=n(98480),me=n(7560),pe=n(8526),ve=n(77114),fe=n(4614),ge=n(27616),Ee=n(70660),ye=n(8284),Se=n(38016),he=n(61564),Ze=n(39590),be=n(19258),Ie=null!==(ce=window.config.order.advancedSearchFields)&&void 0!==ce?ce:["senderId","receiverId","buyerId","sellerId"],Te=(0,h.Z)((function(e){return(0,Z.Z)({form:{display:"flex",flexDirection:"column",flexWrap:"wrap"},element:{margin:e.spacing(1)},input:{},button:{},label:{margin:e.spacing(1)},root:{width:"100%",margin:e.spacing(1)},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},progress:{marginLeft:"8px"},rowSpacing:{marginBottom:e.spacing(.5)},fullWidth:{width:"100%"},dateField:{margin:e.spacing(1),"& .MuiInput-underline:before":{borderBottomWidth:"2px"}},dropdownFilter:{marginTop:e.spacing(1.5),"& .MuiFormLabel-root":{top:"-".concat(e.spacing(1),"px"),transform:"scale(1)"},"& .MuiInputBase-root":{backgroundColor:"rgb(245, 245, 245)",borderRadius:e.shape.borderRadius,padding:"".concat(e.spacing(.5),"px ").concat(e.spacing(1),"px")},"& .MuiInput-underline:before":{marginLeft:e.spacing(1),marginRight:e.spacing(1),borderBottomWidth:"2px"}}})}));const Re=function(e){var t=e.data,n=e.loading,r=e.orderTypes,o=e.metaData,u=void 0===o?{}:o,d=e.onFormSubmit,p=Te(),v=(0,b.useTranslation)().t,f=(0,l.useHistory)(),g=a.useState("panel1"),E=(0,i.Z)(g,2),y=E[0],S=E[1],h=(pe.Z_(),v("dropdownSelectPlaceholder"),[]);(null==r?void 0:r.paymentPresets).map((function(e){h.push({key:e.orderType,value:e.orderType})})),h.unshift({key:v("all"),value:""});var Z=pe.Ry().shape({orderData:pe.Ry({orderId:pe.Z_(),orderType:pe.Z_(),buyerId:pe.Z_(),sellerId:pe.Z_(),receiverId:pe.Z_(),senderId:pe.Z_(),state:pe.Z_(),from:pe.Z_(),to:pe.Z_()})}),I=(0,ve.TA)({initialValues:t,validationSchema:Z,onSubmit:function(e){return d&&d(e)},enableReinitialize:!0}),T=I.values,R=I.handleChange,N=I.handleSubmit,O=I.handleReset,w=(I.setFieldValue,window.config.openCalendarWith||"year");return a.createElement("div",{className:p.root},a.createElement(ge.Z,{expanded:"panel1"===y,onChange:("panel1",function(e,t){S(!!t&&"panel1")})},a.createElement(ye.Z,{expandIcon:a.createElement(Se.Z,null),"aria-controls":"panel1bh-content",id:"panel1bh-header"},a.createElement($.Z,{className:p.heading},a.createElement("strong",null,v("advancedSearch")))),a.createElement(Ee.Z,null,a.createElement(c.Z,{className:p.fullWidth},a.createElement(c.Z,{container:!0,spacing:3,className:p.rowSpacing},a.createElement(c.Z,{item:!0,sm:4},a.createElement(s.SeamlessInput,{fullWidth:!0,className:(0,m.default)(p.element,p.input),name:"orderId",value:T.orderId,onChange:R,label:v("orderId")})),a.createElement(c.Z,{item:!0,sm:4},a.createElement(s.SeamlessDropDown,{id:"order-type-drop-down",fullWidth:!0,className:p.dropdownFilter,label:v("orderType"),helperText:v("orderTypeForOrders"),options:h,name:"orderType",value:T.orderType,onChange:R})),a.createElement(c.Z,{item:!0,sm:4},a.createElement(s.SeamlessDropDown,{id:"state-drop-down",fullWidth:!0,className:p.dropdownFilter,label:v("statesFormTitle"),helperText:v("statesForTheOrders"),options:[{key:"",value:""},{key:"Created",value:"CREATED"},{key:"Transfer wait confirm",value:"TRANSFER_WAIT_CONFIRM"},{key:"Transferred",value:"TRANSFERRED"},{key:"Transfer rejected",value:"TRANSFER_REJECTED"},{key:"Return transferred",value:"RETURN_TRANSFERRED"},{key:"Return transfer wait confirm",value:"RETURN_TRANSFER_WAIT_CONFIRM"},{key:"Return transfer rejected",value:"RETURN_TRANSFER_REJECTED"},{key:"External created",value:"EXTERNAL_CREATED"},{key:"External approved",value:"EXTERNAL_APPROVED"},{key:"External rejected",value:"EXTERNAL_REJECTED"},{key:"External closed",value:"EXTERNAL_CLOSED"},{key:"External cancel",value:"EXTERNAL_CANCEL"},{key:"External return transfer wait confirm",value:"EXTERNAL_RETURN_TRANSFER_WAIT_CONFIRM"},{key:"External return transferred",value:"EXTERNAL_RETURN_TRANSFERRED"},{key:"External return transfer rejected",value:"EXTERNAL_RETURN_TRANSFER_REJECTED"},{key:"Partially transferred",value:"PARTIALLY_TRANSFERRED"},{key:"Payment wait confirm",value:"PAYMENT_WAIT_CONFIRM"},{key:"Payment failed",value:"PAYMENT_FAILED"},{key:"External wait created",value:"EXTERNAL_WAIT_CREATED"},{key:"External created with error",value:"EXTERNAL_CREATED_WITH_ERROR"},{key:"Pending approval",value:"PENDING_APPROVAL"},{key:"Rejected",value:"REJECTED"},{key:"Submitted",value:"SUBMITTED"},{key:"Reserved wait confirm",value:"RESERVED_WAIT_CONFIRM"},{key:"Reserved",value:"RESERVED"},{key:"Reserve rejected",value:"RESERVE_REJECTED"},{key:"External scheduled",value:"EXTERNAL_SCHEDULED"},{key:"External process failed",value:"EXTERNAL_PROCESS_FAILED"},{key:"Reversed",value:"REVERSED"},{key:"Payment initiated",value:"PAYMENT_INITIATED"},{key:"Reverse initiated",value:"REVERSE_INITIATED"},{key:"Reverse failed",value:"REVERSE_FAILED"},{key:"Reverse wait confirm",value:"REVERSE_WAIT_CONFIRM"},{key:"Reverse Inconsistent",value:"REVERSE_INCONSISTENT"},{key:"Reverse Rejected",value:"REVERSE_REJECTED"},{key:"Return Submitted",value:"RETURN_SUBMITTED"}],name:"state",value:T.state,onChange:R}))),a.createElement(c.Z,{container:!0,spacing:3,className:p.rowSpacing},Ie.map((function(e){return a.createElement(c.Z,{item:!0,sm:3},a.createElement(s.SeamlessInput,{fullWidth:!0,className:(0,m.default)(p.element,p.input),name:e,value:T[e],onChange:R,label:v(e)}))}))),a.createElement(c.Z,{container:!0,spacing:3,className:p.rowSpacing},a.createElement(c.Z,{item:!0,sm:3},a.createElement(he.M,{utils:be.Z},a.createElement(Ze.e,(0,me.Z)({className:p.dateField,fullWidth:!0,disableFuture:!0,views:["year","month","date"],openTo:w,format:"yyyy-MM-dd",placeholder:"yyyy-mm-dd",autoOk:!0,id:"from"},null!=u&&u.allowedSearchFromDate?{minDate:null==u?void 0:u.allowedSearchFromDate}:{},{label:v("from"),value:T.from||null,error:!1,onChange:function(e){return R({target:{value:e,name:"from"}})},KeyboardButtonProps:{"aria-label":"change date"}})))),a.createElement(c.Z,{item:!0,sm:3},a.createElement(he.M,{utils:be.Z},a.createElement(Ze.e,{className:p.dateField,fullWidth:!0,autoOk:!0,disableFuture:!0,views:["year","month","date"],openTo:w,format:"yyyy-MM-dd",placeholder:"yyyy-mm-dd",minDate:T.from||0,maxDate:new Date,id:"to",label:v("to"),value:T.to||null,error:!1,onChange:function(e){return R({target:{value:e,name:"to"}})},KeyboardButtonProps:{"aria-label":"change date"}})))),a.createElement(c.Z,{container:!0,spacing:3,className:p.rowSpacing},a.createElement(c.Z,{item:!0,sm:12},a.createElement(s.SeamlessButton,{onClick:function(){O(T),f.push("/home/order/orders")},className:(0,m.default)(p.element,p.button),color:"primary",variant:"outlined"},v("resetSearch")),a.createElement(s.SeamlessButton,{onClick:function(e){return N()},className:(0,m.default)(p.element,p.button),disabled:n,color:"primary",variant:"contained"},v("search"),n&&a.createElement(fe.Z,{color:"inherit",size:14,thickness:6,className:p.progress}))))))))};var Ne,Oe,we,xe,Ce,Pe,De=n(78205),ke=n.n(De);function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){(0,C.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Me=window.config,Le=null!==(Ne=Me.order.advancedSearchFields)&&void 0!==Ne?Ne:["senderId","receiverId","buyerId","sellerId"],Ue=null===(Oe=Me.order.advancedSearchViaBIEngine)||void 0===Oe||Oe,Fe=null!==(we=Me.order.allowedToFetchDataUptoYears)&&void 0!==we?we:3,Ae=null!==(xe=Me.order.allowedSearchUptoMonths)&&void 0!==xe?xe:0,je=null!==(Ce=Me.order.disableColumnFilter)&&void 0!==Ce&&Ce,qe=null,We=(0,o.makeStyles)({filterRoot:{paddingLeft:12,marginTop:8},textField:{bottom:-8}});function Ke(e){var t=We(),n=e.item,a=e.applyValue;return r().createElement("div",{className:t.filterRoot},r().createElement(Q.Z,{className:t.filterRoot,name:n.field,value:n.value,onChange:function(e){a(Be(Be({},n),{},{value:e.target.value}))}}))}null===(Pe=document.querySelector(".MuiDataGridPanelContent-root"))||void 0===Pe||Pe.querySelector(".MuiIconButton-sizeSmall");var Ve=null,ze="",He=!1,Qe=[],Ye=Me.defaultPerPageItems||20,Ge=Le.reduce((function(e,t){return e[t]="",e}),{orderId:"",orderType:"",state:"",from:"",to:""}),Je=Ge,Xe={reportName:"transaction_search_report",senderMSISDN:"",receiverMSISDN:"",fromDate:"",toDate:"",auth_code:"",servedMSISDN:"",buyerId:"",sellerId:"",senderId:"",receiverId:"",orderId:"",orderType:"",state:"",page:1,size:Ye},$e={request:Xe},et=!0;const tt=function(e){var t=e.rejectReasonsAsProp,n=e.orderTypes,o=(0,b.useTranslation)().t,c=(0,l.useHistory)(),s=ke()().moment,u=(0,L.Z)(),d=u.showSuccessMessage,m=u.showErrorMessage,p=r().useState(!1),v=(0,i.Z)(p,2),f=v[0],g=v[1],E=r().useState(!1),y=(0,i.Z)(E,2),S=y[0],h=y[1],Z=r().useState(!1),x=(0,i.Z)(Z,2),P=x[0],D=x[1],k=r().useState(""),_=(0,i.Z)(k,2),B=_[0],M=_[1],U=(0,a.useState)(t),F=(0,i.Z)(U,2),A=F[0],$=(F[1],(0,a.useState)()),ee=(0,i.Z)($,2),te=ee[0],ne=ee[1],ae=(0,a.useState)(),re=(0,i.Z)(ae,2),le=re[0],ie=re[1],ce=(0,a.useState)(Ye),me=(0,i.Z)(ce,2),pe=me[0],ve=me[1],fe=(0,a.useState)(1),ge=(0,i.Z)(fe,2),Ee=ge[0],ye=ge[1],Se=(0,a.useState)("desc"),he=(0,i.Z)(Se,2),Ze=he[0],be=he[1],Ie=(0,a.useState)("createTimestamp"),Te=(0,i.Z)(Ie,2),Ne=Te[0],Oe=Te[1],we=(0,a.useState)({}),xe=(0,i.Z)(we,2),Ce=xe[0],Pe=xe[1],De=(0,a.useState)(),_e=(0,i.Z)(De,2),Me=_e[0],Le=_e[1],We=r().useState(),tt=(0,i.Z)(We,2),nt=tt[0],at=tt[1],rt=(0,a.useState)(!1),lt=(0,i.Z)(rt,2),it=lt[0],ot=lt[1],ct=(0,a.useState)(!1),st=(0,i.Z)(ct,2),ut=st[0],dt=st[1],mt=r().useState(!1),pt=(0,i.Z)(mt,2),vt=pt[0],ft=pt[1],gt=r().useRef(vt),Et=r().useCallback((function(){return at((new Date).getMilliseconds())}),[]);function yt(){Je=Ge,et=!0,$e.request=Xe}(0,a.useEffect)((function(){var e;return Ae>0&&(qe=s().subtract(Ae,"month")),yt(),null!==(e=window.location.href)&&void 0!==e&&e.includes("/pending-reversal")?(He=!0,Pe(Be(Be({},Ce),{},{state:"REVERSE_WAIT_CONFIRM"}))):He=!1,function(){return yt()}}),[]);var St=function(e){et=!1;var t=e.from;delete e.from;var n=e.to;delete e.to;var a=s().subtract(Fe,"year").format("YYYY-MM-DD");if(n||t){if(n&&!t)t=s(n).subtract(Fe,"year").format("YYYY-MM-DD"),n=s(n).format("YYYY-MM-DD");else if(!n&&t){if(t=s(t).format("YYYY-MM-DD"),n=s().format("YYYY-MM-DD"),s(n).diff(t,"months")>12*Fe)return m("You cannot query more than ".concat(Fe," years data at once."))}else if(n&&t){if(s(n).diff(t,"months")>12*Fe)return m("You cannot query more than ".concat(Fe," years data at once."));t=s(t).format("YYYY-MM-DD"),n=s(n).format("YYYY-MM-DD")}}else t=a,n=s().format("YYYY-MM-DD");t&&(t+="T00:00:00.000Z"),n&&(n+="T23:59:59.000Z");var r=Be({},$e);if(r.request=Be(Be(Be({},r.request),e),{},{fromDate:t,toDate:n,page:Ee-1,size:pe}),Object.entries(Ce).length){if(r.request.page>0)return!1;if(""!==Object.entries(Ce)[0][1]){var l=Object.keys(Ce)[0];r.request=Be(Be({},r.request),{},(0,C.Z)({},l,Object.values(Ce)[0]))}}for(var i in r.request)""===r.request[i]&&(r.request[i]="ALL");if(gt.current&&r.request.page>0)return!1;g(!0),(0,q.ed)(r).then((function(e){0===e.resultCode?(Qe=(0,de.Ge)(e.list),Le({nextPage:Ee+1,page:Ee,pageCount:Math.floor(e.totalRecordCount/pe),pageSize:pe,totalCount:e.totalRecordCount})):(Qe=[],m(e))})).catch((function(e){return m(e)})).finally((function(){g(!1),gt.current=!1}))},ht=(0,a.useCallback)((function(){if(!et)return St(Je);var e=Ce;He&&(e=Be(Be({},e),{},{state:"REVERSE_WAIT_CONFIRM"})),Zt(e)}),[Ne,Ze,Ee,pe,Ce,nt]),Zt=function(e){var t=(0,J.Er)(e),n={sort:"".concat(Ne,"_").concat(null==Ze?void 0:Ze.toLowerCase()),page:t===ze?Ee:1,perPage:pe,filter:t};g(!0),(0,q.Fw)(n).then((function(e){Qe=(0,de.v7)(e.orders,Ot),Le(e.metadata),ze=t})).catch((function(e){g(!1),m(e)})).finally((function(){return g(!1)}))};r().useEffect((function(){ht()}),[ht]);var bt=function(){ne(""),ie(null),h(!1)},It=function(){D(!1)},Tt=[{label:"Equal",value:"equal",getApplyFilterFn:function(e){return e.columnField&&e.value&&e.operatorValue?function(t){return t.value==e.value}:null},InputComponent:Ke}],Rt=["PAYMENT_WAIT_CONFIRM"],Nt=(0,de.yM)(),Ot=Nt.columnsToAppend,wt=Nt.columnsToHide,xt=Nt.columnsToSearch,Ct=Nt.columnsSearchOnly,Pt=Nt.columnSortIndex,Dt=[{field:"createTimestamp",headerName:o("createTimestamp","Create timestamp"),sortable:!0,width:200,type:"date",filterable:!1,renderCell:function(e){return r().createElement(V.Z,{label:e.getValue("createTimestamp")||""})}},{field:"state",headerName:o("state","State"),sortable:!0,width:250,filterable:!He,filterOperators:Tt},{field:"paymentMode",headerName:o("paymentMode","Payment mode"),sortable:!1,filterable:!1,width:150},{field:"orderId",headerName:o("orderId","Order ID"),sortable:!0,width:400,filterOperators:Tt},{field:"orderType",headerName:o("orderType","Order type"),sortable:!0,width:180,filterOperators:Tt},{field:"senderId",headerName:o("senderId","Sender ID"),sortable:!1,width:180,filterOperators:Tt},{field:"receiverId",headerName:o("receiverId","Receiver ID"),sortable:!1,width:180,filterOperators:Tt},{field:"buyerId",headerName:o("buyerId","Buyer ID"),sortable:!0,width:180,filterOperators:Tt},{field:"sellerId",headerName:o("sellerId","Seller ID"),sortable:!1,width:180,filterOperators:Tt},{field:"externalReference",headerName:o("externalReference","External ref no."),sortable:!1,filterable:!1,width:250,type:"date",hide:!0},{field:"actions",headerName:o("actions","Actions"),sortable:!1,filterable:!1,width:170,renderCell:function(e){var t;return r().createElement(r().Fragment,null,r().createElement(ue.Z,{size:"small",color:"primary",variant:"text","aria-label":"orders action buttons"},r().createElement(I.Z,{color:"primary",component:l.Link,to:"/home/order/orders/view/"+btoa(e.row.orderId)},r().createElement(se.Z,{fontSize:"small"})),e.row.canConfirm&&r().createElement(I.Z,{color:"primary",onClick:function(){return t=e.row,ie(t),void h(!0);var t}},r().createElement(W.Z,{fontSize:"small"})),e.row.canReject&&r().createElement(I.Z,{color:"secondary",onClick:function(){return t=e.row,ie(t),void D(!0);var t}},r().createElement(K.Z,{fontSize:"small"})),!0===(null===(t=e.row)||void 0===t?void 0:t.canPaymentConfirm)&&Rt.includes(e.row.state)&&r().createElement(I.Z,{color:"primary",onClick:function(){return t=e.row,ie(t),void ot(!0);var t}},r().createElement(Y.Z,{fontSize:"small"}))))}}];(null==wt?void 0:wt.length)>0&&(Dt=Dt.filter((function(e){return!wt.includes(e.field)}))),(null==Ot?void 0:Ot.length)>0&&Ot.map((function(e){var t;null===(t=Dt)||void 0===t||t.splice(Pt[e]||Dt.length-4,0,{field:e,headerName:o("".concat(e,"HeaderName"),o(e)),sortable:!0,filterOperators:Tt,filterable:(null==xt?void 0:xt.includes(e))||!1,width:200,hide:Ct.includes(e)})}));var kt=(0,a.useCallback)((function(e){var t,n,a=e.filterModel.items[0].value,r=e.filterModel.items[0].columnField;if(null===(n=null===(t=document.querySelector(".MuiDataGridPanelContent-root"))||void 0===t?void 0:t.querySelector(".MuiIconButton-sizeSmall"))||void 0===n||n.addEventListener("click",(function(){return c.push("/home/order/orders")})),void 0!==a){Ve&&clearTimeout(Ve);var l=Be(Be({},Ce),{},(0,C.Z)({},r,a));He&&(l=Be(Be({},l),{},{state:"REVERSE_WAIT_CONFIRM"})),Ve=setTimeout((function(){Pe(l),ye(1)}),800)}}),[]),_t=(0,a.useCallback)((function(e){var t=e.sortModel[0].field,n=e.sortModel[0].sort;Oe(t),be(n),ye(1)}),[]);return r().createElement(r().Fragment,null,r().createElement(Re,{data:Je,metaData:{allowedSearchFromDate:qe},orderTypes:n,loading:f,onFormSubmit:function(e){if(ft(!0),gt.current=!0,ye(1),Je=Be({},e),Ue)return St(Be({},e));var t,n,a,r,l=Be({},e),i="",c="";l.from&&(i+=null===(t=l.from)||void 0===t||null===(n=t.toISOString())||void 0===n?void 0:n.split("T")[0],delete l.from,c=l.to?null===(a=l.to)||void 0===a?void 0:a.toISOString():(new Date).toISOString()),c&&(i+="<>"+(null===(r=c)||void 0===r?void 0:r.split("T")[0]),delete l.to),!l.to||l.from?(l.createTimestamp=i,Pe(l)):m(o("fromDateError"))}}),r().createElement(j(),{loading:f,columnBuffer:4,columns:Dt,disableColumnFilter:je,rows:Qe,getRowId:function(e){return e.index||e.orderId},pageSize:pe,pagination:!0,page:Ee-1,onPageChange:function(e){ye(e.page+1)},onPageSizeChange:function(e){ve(e.pageSize),ye(1)},rowCount:(null==Me?void 0:Me.totalCount)||1,onFilterModelChange:kt,onSortModelChange:_t,filterMode:"server",paginationMode:"server",sortingMode:"server"}),r().createElement(T.Z,{open:S,onClose:bt,fullWidth:!0,maxWidth:"sm"},r().createElement(w.Z,{id:"form-dialog-title"},"Confirm !"),r().createElement(N.Z,null,r().createElement(O.Z,{id:"alert-dialog-description"},"Are you sure , you want to Accept?")),r().createElement(R.Z,null,r().createElement(I.Z,{onClick:bt,color:"primary"},o("cancel","Cancel")),r().createElement(I.Z,{disabled:ut,variant:"contained",onClick:function(){dt(!0),(0,G.I4)(null==le?void 0:le.orderId).then((function(e){0===(null==e?void 0:e.resultCode)?(d((null==e?void 0:e.resultMessage)||"Order accepted."),Et(),h(!1)):(d((null==e?void 0:e.resultMessage)||"Error accepting order."),h(!1))})).catch((function(e){h(!1),m(e)})).finally((function(){return dt(!1)}))},color:"primary",autoFocus:!0},"".concat(o("accept","Accept")," ").concat(ut?"...":"")))),r().createElement(T.Z,{open:P,onClose:It,fullWidth:!0,maxWidth:"sm",disablePortal:!0},r().createElement(w.Z,{id:"form-dialog-title"},"Reject !"),r().createElement(N.Z,null,r().createElement(O.Z,{id:"alert-dialog-description"},"Are you sure , you want to Reject?"),r().createElement(H.Z,{fullWidth:!0,value:B,onChange:function(e){var t=e.target.value;ne(""),M(t);var n=A.find((function(e){return e.code===t}));ne(n.description)},style:{margin:25}},A.map((function(e){return r().createElement(z.Z,{key:e.code,value:e.code},e.code)}))),"OTHER"===B&&r().createElement(Q.Z,{fullWidth:!0,multiline:!0,rowsMax:5,rows:5,value:te,style:{marginTop:30},placeholder:"Specify other reasons",onChange:function(e){e.target.value.length>=400||ne(e.target.value)}})),r().createElement(R.Z,null,r().createElement(I.Z,{onClick:It,color:"primary"},o("cancel","Cancel")),r().createElement(I.Z,{disabled:!te||ut,variant:"contained",onClick:function(){dt(!0);var e={rejectReason:te};(0,G.xe)(null==le?void 0:le.orderId,e).then((function(e){0===(null==e?void 0:e.resultCode)?(d((null==e?void 0:e.resultMessage)||"Order rejected."),Et(),D(!1)):(m(e||"Error accepting order."),D(!1))})).catch((function(e){h(!1),m(e)})).finally((function(){return dt(!1)}))},color:"primary",autoFocus:!0},"".concat(o("reject","Reject")," ").concat(ut?"...":"")))),it&&("M_PESA"===le.paymentMode?r().createElement(oe,{showClose:!0,orderId:le.orderId,paymentMode:le.paymentMode,title:"Payment confirmation",handleClose:function(){ot(!1),ie(null),Et()}}):r().createElement(X.Z,{showClose:!0,orderId:le.orderId,paymentMode:le.paymentMode,title:"Payment confirmation",handleClose:function(){ot(!1),ie(null),Et()}})))};var nt=n(98069),at=n(82726),rt=n(80030),lt=n(45410);const it=function(e){var t,n=e.list,r=void 0===n?[]:n,l=e.loading,i=void 0!==l&&l,o=e.name,c=e.value,u=e.handleChange,d=e.disable,m=(0,b.useTranslation)().t,p=c&&(null===(t=r.find((function(e){return e.name===c})))||void 0===t?void 0:t.description)||"";return i?a.createElement(nt.Z,{height:50,width:200}):a.createElement("section",{style:{display:"flex"}},a.createElement(s.SeamlessDropDown,{id:"order-type-drop-down",required:!0,disabled:d,label:"Order Type",helperText:c?"":m("selectOrderTypes","Please Select Order Type"),options:r.map((function(e){return{value:e.name,key:e.label}})),name:o,value:c,onChange:function(e){return u(e.target.value)},style:{marginRight:10}}),c&&a.createElement(rt.ZP,{title:p,placement:"right"},a.createElement(at.Z,{fontSize:"small",style:{color:lt.Z[400],cursor:"pointer",alignSelf:"center"}})))};var ot,ct,st,ut=n(12842),dt=(n(28358),n(56470)),mt=n(77162),pt=n.n(mt),vt=n(85256),ft=n(18079),gt=n(31168),Et=n(13737),yt=window.config,St=(null==yt||null===(ot=yt.order)||void 0===ot?void 0:ot.manualAdjustmentOptions)||["RESELLERID","RESELLERMSISDN"],ht=null!==(ct=null==yt||null===(st=yt.order)||void 0===st?void 0:st.maxCharacterLimit)&&void 0!==ct?ct:160,Zt=(0,h.Z)((function(e){return(0,Z.Z)({button:{margin:e.spacing(1)},element:{margin:e.spacing(1)},spacingBottom:{marginBottom:e.spacing(2)},btnSpace:{marginRight:e.spacing(2)},drodpwonOptions:{textAlign:"left",marginTop:-5,marginBottom:e.spacing(1),padding:"5px 10px"},disabled:{opacity:.5},appBar:{position:"relative"},title:{flex:1},mybtn:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,padding:"10px 18px",borderRadius:"5px"},mySendBtn:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,boxShadow:"0px 3px 1px -2px rgb(0 0 0 / 20%), 0px 2px 2px 0px rgb(0 0 0 / 14%), 0px 1px 5px 0px rgb(0 0 0 / 12%)",padding:"10px 18px",borderRadius:"5px"},dialogContent:{marginTop:e.spacing(2),marginBottom:e.spacing(7)},fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{textTransform:"capitalize",fontSize:14,wordBreak:"break-all"},rowSpacing:{marginBottom:e.spacing(.5)},dividerSpacing:{marginBottom:e.spacing(3)},btnSpacing:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},tp2:{marginTop:e.spacing(2)},txtareaBox:{"& .MuiInputBase-input":{padding:e.spacing(1.2)}}})}));const bt=function(e){var t,n,r=e.data,l=e.onFormSubmit,o=e.handleData,u=(e.loading,Zt()),d=(0,b.useTranslation)().t,p=(0,L.Z)().showErrorMessage,v=a.useState(0),f=(0,i.Z)(v,2),g=f[0],E=f[1],S=a.useState(),h=(0,i.Z)(S,2),Z=h[0],I=h[1],T=a.useState(),R=(0,i.Z)(T,2),N=R[0],O=R[1],w=a.useState([]),x=(0,i.Z)(w,2),C=x[0],P=(x[1],a.useState([])),D=(0,i.Z)(P,2),k=D[0],_=(D[1],a.useState("")),B=(0,i.Z)(_,2),M=B[0],U=B[1],F=a.useState("DEBIT"),A=(0,i.Z)(F,2),j=A[0],q=A[1],W=a.useState(r.constrainType),K=(0,i.Z)(W,2),V=K[0],Q=K[1];a.useEffect((function(){Y(r.senderReseller),G(r.receiverReseller)}),[r.senderReseller,r.receiverReseller]);var Y=function(e){e&&(0,te.EZ)(e,V).then(function(){var e=(0,dt.Z)(pt().mark((function e(t){var n,a,r,l,i;return pt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.resellerInfo&&null!==(n=t.resellerInfo)&&void 0!==n&&n.resellerData?(C.length=0,l={resellerId:t.resellerInfo.resellerData.resellerId,resellerName:t.resellerInfo.resellerData.resellerName,resellerType:t.resellerInfo.resellerData.resellerTypeName,resellerMSISDN:t.resellerInfo.resellerData.resellerMSISDN,transferFromAccount:null===(a=t.resellerInfo.resellerData.accounts[0])||void 0===a||null===(r=a.account)||void 0===r?void 0:r.accountId},t.resellerInfo.resellerData.accounts.map((function(e){U(e.currency),null==e||e.account,C.push(null==e?void 0:e.account)})),I(l)):(I(null),i="Data for Sender by ".concat(d(V),"  is not found."),p(i));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){I(null),p(e)}))},G=function(e){e&&(0,te.EZ)(e,V).then(function(){var e=(0,dt.Z)(pt().mark((function e(t){var n,a,r,l,i;return pt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.resellerInfo&&null!==(n=t.resellerInfo)&&void 0!==n&&n.resellerData?(k.length=0,l={resellerId:t.resellerInfo.resellerData.resellerId,resellerName:t.resellerInfo.resellerData.resellerName,resellerType:t.resellerInfo.resellerData.resellerTypeName,resellerMSISDN:t.resellerInfo.resellerData.resellerMSISDN,transferToAccount:null===(a=t.resellerInfo.resellerData.accounts[0])||void 0===a||null===(r=a.account)||void 0===r?void 0:r.accountId},t.resellerInfo.resellerData.accounts.map((function(e){null==e||e.account,k.push(null==e?void 0:e.account)})),O(l)):(O(null),i="Data for Receiver by ".concat(d(V),"  is not found."),p(i));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){O(null),p(e)}))},J=St.map((function(e,t){return a.createElement(z.Z,{key:e,value:e},d("".concat(e)))})),X=pe.Ry().shape({senderReseller:pe.Z_().required(d("senderResellerNameRequiredError")),receiverReseller:pe.Z_().required(d("receiverResellerNameRequiredError")),amount:pe.Rx().required(d("amountRequiredError")),comment:pe.Z_().max(ht)}),ee=(0,ve.TA)({initialValues:r,onSubmit:function(e){return l&&l(e)},validationSchema:X,enableReinitialize:!0}),ne=ee.values,ae=ee.errors,re=ee.handleChange,le=ee.handleSubmit,ie=ee.handleReset,oe=(ee.setFieldValue,ee.validateForm),ce=[{title:d("createManualAdjustment"),caption:d("createManualAdjustmentDescription"),label:d("accountInfoLabel")},{title:d("confirmManualAdjustment"),caption:d("confirmManualAdjustmentDescription"),label:d("preview")}];return a.createElement(s.SeamlessContainer,{title:null===(t=ce[g])||void 0===t?void 0:t.title,description:null===(n=ce[g])||void 0===n?void 0:n.caption},a.createElement(s.SeamlessStepper,{steps:[{label:ce[0].label},{label:ce[1].label}],components:{Control:function(e){var t=e.goNext,n=e.goPrev,r=e.goFirst,l=e.disableFirst;return e.disableLast,a.createElement(y.Z,null,a.createElement("div",{className:(0,m.default)(u.dividerSpacing)}),!l&&a.createElement("div",null,a.createElement(s.SeamlessButton,{onClick:function(){n(),E(g-1)},className:(0,m.default)(u.element,u.button,u.mybtn),color:"primary",variant:"contained"},d("previous")),a.createElement(s.SeamlessButton,{className:(0,m.default)(u.element,u.btnSpacing,u.mySendBtn),onClick:function(e){ne.currency=M,le(),r(),E(g-1),setTimeout((function(){ie(e)}),500)},disabled:l,style:{float:"right"},color:"primary",variant:"contained"},d("transfer"),a.createElement(ft.Z,{fontSize:"small",style:{marginLeft:8}}))),l&&a.createElement(s.SeamlessButton,{className:(0,m.default)(u.element,u.btnSpacing,u.mybtn),onClick:function(){oe().then(function(){var e=(0,dt.Z)(pt().mark((function e(n){var a;return pt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=Object.values(n)).length>0?(E(g),p(a[0])):(t(),E(g+1));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},color:"primary",disabled:!Z||!N,variant:"contained"},d("continue")),a.createElement("div",{className:(0,m.default)(u.dividerSpacing)}))}}},a.createElement(c.Z,{className:u.tp2,container:!0},a.createElement(c.Z,{container:!0,spacing:2,className:u.spacingBottom},a.createElement(c.Z,{container:!0,spacing:2,xs:12},a.createElement(c.Z,{item:!0,xs:4},a.createElement(gt.Z,{value:j,exclusive:!0,className:u.btnSpacing,onChange:function(e,t){q(t),o&&o({type:t,constrainType:V})},"aria-label":"notification-mode"},a.createElement(Et.Z,{value:"DEBIT","aria-label":"partialReturn"},a.createElement(rt.ZP,{title:d("debitTransaction","Remove an amount of money")},a.createElement($.Z,null,d("debit","Debit")))),a.createElement(Et.Z,{value:"CREDIT","aria-label":"fullReturn"},a.createElement(rt.ZP,{title:d("creditTransaction","Amount of money to be added")},a.createElement($.Z,null,d("credit","Credit")))))),a.createElement(c.Z,{item:!0,xs:4},a.createElement(H.Z,{labelId:"select-option-label",id:"select-option",value:V,onChange:function(e){o&&o({constrainType:e.target.value,type:j}),Q(e.target.value)},className:u.drodpwonOptions,fullWidth:!0},J))),a.createElement(c.Z,{item:!0,xs:4},a.createElement(s.SeamlessInput,{className:(0,m.default)(u.element),fullWidth:!0,required:!0,error:!(null==ae||!ae.senderReseller),helperText:null==ae?void 0:ae.senderReseller,name:"senderReseller",value:ne.senderReseller,onChange:re,label:d("senderByType",{type:d("".concat(V))}),onBlur:function(e){Y(e.target.value)}})),a.createElement(c.Z,{item:!0,xs:4},a.createElement(s.SeamlessInput,{className:(0,m.default)(u.element),fullWidth:!0,required:!0,error:!(null==ae||!ae.receiverReseller),helperText:null==ae?void 0:ae.receiverReseller,name:"receiverReseller",value:ne.receiverReseller,onChange:re,label:d("receiverByType",{type:d("".concat(V))}),onBlur:function(e){G(e.target.value)}})),a.createElement(c.Z,{item:!0,xs:4},a.createElement(s.SeamlessInput,{className:(0,m.default)(u.element),fullWidth:!0,required:!0,error:!(null==ae||!ae.amount),helperText:ae.amount?d("validNumber"):"",name:"amount",value:ne.amount,onChange:re,label:d("amount")})),a.createElement(c.Z,{item:!0,xs:12},a.createElement(s.SeamlessInput,{className:(0,m.default)(u.element,u.txtareaBox),fullWidth:!0,error:!(null==ae||!ae.comment),helperText:ae.comment||"",name:"comment",value:ne.comment,onChange:re,label:d("comment")})))),a.createElement(c.Z,{container:!0,spacing:3},a.createElement(c.Z,{item:!0,xs:12,sm:10},a.createElement(c.Z,{container:!0,spacing:3,className:u.spacingBottom},a.createElement(c.Z,{item:!0,xs:12},a.createElement($.Z,{variant:"subtitle1",color:"primary"},d("sender")))),a.createElement(c.Z,{container:!0,className:(0,m.default)(u.rowSpacing),spacing:3},a.createElement(c.Z,{item:!0,xs:12,sm:3},a.createElement($.Z,{className:(0,m.default)(u.fieldHeading)},d("resellerId"))),a.createElement(c.Z,{item:!0,xs:12,sm:3},a.createElement($.Z,{className:(0,m.default)(u.fieldValue)},null==Z?void 0:Z.resellerId)),a.createElement(c.Z,{item:!0,xs:12,sm:3},a.createElement($.Z,{className:(0,m.default)(u.fieldHeading)},d("resellerName"))),a.createElement(c.Z,{item:!0,xs:12,sm:3},a.createElement($.Z,{className:(0,m.default)(u.fieldValue)},null==Z?void 0:Z.resellerName))),a.createElement(c.Z,{container:!0,className:(0,m.default)(u.rowSpacing),spacing:3},a.createElement(c.Z,{item:!0,xs:12,sm:3},a.createElement($.Z,{className:(0,m.default)(u.fieldHeading)},d("resellerType"))),a.createElement(c.Z,{item:!0,xs:12,sm:3},a.createElement($.Z,{className:(0,m.default)(u.fieldValue)},null==Z?void 0:Z.resellerType)),a.createElement(c.Z,{item:!0,xs:12,sm:3},a.createElement($.Z,{className:(0,m.default)(u.fieldHeading)},d("resellerMSISDN"))),a.createElement(c.Z,{item:!0,xs:12,sm:3},a.createElement($.Z,{className:(0,m.default)(u.fieldValue)},null==Z?void 0:Z.resellerMSISDN))),a.createElement(c.Z,{container:!0,spacing:3,className:u.spacingBottom},a.createElement(c.Z,{item:!0,xs:12},a.createElement(vt.Z,{className:(0,m.default)(u.dividerSpacing)}))),a.createElement(c.Z,{container:!0,spacing:3,className:u.spacingBottom},a.createElement(c.Z,{item:!0,xs:12},a.createElement($.Z,{variant:"subtitle1",color:"primary"},d("receiver")))),a.createElement(c.Z,{container:!0,className:(0,m.default)(u.rowSpacing),spacing:3},a.createElement(c.Z,{item:!0,xs:12,sm:3},a.createElement($.Z,{className:(0,m.default)(u.fieldHeading)},d("resellerId"))),a.createElement(c.Z,{item:!0,xs:12,sm:3},a.createElement($.Z,{className:(0,m.default)(u.fieldValue)},null==N?void 0:N.resellerId)),a.createElement(c.Z,{item:!0,xs:12,sm:3},a.createElement($.Z,{className:(0,m.default)(u.fieldHeading)},d("resellerName"))),a.createElement(c.Z,{item:!0,xs:12,sm:3},a.createElement($.Z,{className:(0,m.default)(u.fieldValue)},null==N?void 0:N.resellerName))),a.createElement(c.Z,{container:!0,className:(0,m.default)(u.rowSpacing),spacing:3},a.createElement(c.Z,{item:!0,xs:12,sm:3},a.createElement($.Z,{className:(0,m.default)(u.fieldHeading)},d("resellerType"))),a.createElement(c.Z,{item:!0,xs:12,sm:3},a.createElement($.Z,{className:(0,m.default)(u.fieldValue)},null==N?void 0:N.resellerType)),a.createElement(c.Z,{item:!0,xs:12,sm:3},a.createElement($.Z,{className:(0,m.default)(u.fieldHeading)},d("resellerMSISDN"))),a.createElement(c.Z,{item:!0,xs:12,sm:3},a.createElement($.Z,{className:(0,m.default)(u.fieldValue)},null==N?void 0:N.resellerMSISDN))),a.createElement(c.Z,{container:!0,spacing:3,className:u.spacingBottom},a.createElement(c.Z,{item:!0,xs:12},a.createElement(vt.Z,{className:(0,m.default)(u.dividerSpacing)}))),a.createElement(c.Z,{container:!0,className:(0,m.default)(u.rowSpacing),spacing:3},a.createElement(c.Z,{item:!0,xs:12,sm:3},a.createElement($.Z,{className:(0,m.default)(u.fieldHeading)},d("amount"))),a.createElement(c.Z,{item:!0,xs:12,sm:3},a.createElement($.Z,{className:(0,m.default)(u.fieldValue)},ne.amount)),a.createElement(c.Z,{item:!0,xs:12,sm:3},a.createElement($.Z,{className:(0,m.default)(u.fieldHeading)},d("comment"))),a.createElement(c.Z,{item:!0,xs:12,sm:3},a.createElement($.Z,{className:(0,m.default)(u.fieldValue)},ne.comment)))))))};var It={totalDue:{amount:""},totalUnusedCredit:{amount:""}};const Tt=function(e){var t=e.children,n=e.sellerId,a=void 0===n?"":n,l=e.buyerId,o=void 0===l?"":l,c=r().useState(null),s=(0,i.Z)(c,2),u=s[0],d=s[1],m=r().useState(!1),p=(0,i.Z)(m,2),v=p[0],f=p[1],g=(0,L.Z)().showErrorMessage,E={buyers:o?[o]:[],sellers:a?[a]:[]},y=r().useCallback((function(){f(!0),(0,q.jT)(E).then((function(e){var t,n,a,r;""!==(null===(t=It)||void 0===t||null===(n=t.totalDue)||void 0===n?void 0:n.amount)&&""!==(null===(a=It)||void 0===a||null===(r=a.totalUnusedCredit)||void 0===r?void 0:r.amount)||(It={totalDue:{amount:e.totalDue.amount},totalUnusedCredit:{amount:e.totalUnusedCredit.amount}}),d(e)})).catch((function(e){return g(e)})).finally((function(){return f(!1)}))}),[a,o]);return r().useEffect((function(){y()}),[y]),r().createElement(r().Fragment,null,t({loading:v,unusedPayments:u,filteredStats:It}))};var Rt=n(21602),Nt=n(7021),Ot=n(33229),wt=n(5290),xt=n(27556),Ct=n(18621),Pt=(0,h.Z)((function(e){return(0,Z.Z)({statCount:{padding:e.spacing(2),width:"100%",display:"flex",alignItems:"center",flexDirection:"row",justifyContent:"space-between",borderRadius:"".concat(e.shape.borderRadius,"px")},typo:{marginTop:e.spacing(5)},labelTitle:{fontSize:14,paddingLeft:e.spacing(1.2),paddingRight:e.spacing(1.2)}})})),Dt=(0,Ct.animated)($.Z);const kt=function(e){var t=e.children,n=e.color,r=(e.style,e.label),l=e.value,i=e.labelColor,o=e.className,s=Pt();return a.createElement(xt.Z,{className:(0,m.default)(s.statCount,o)},a.createElement(c.Z,{container:!0},a.createElement(c.Z,{container:!0,spacing:3},a.createElement(c.Z,{item:!0,xs:8},a.createElement(c.Z,{item:!0,xs:8},a.createElement(V.Z,{size:"medium",color:n||"primary",style:{backgroundColor:i,color:"white"},label:a.createElement($.Z,{variant:"h6",className:s.labelTitle},r)})),a.createElement(c.Z,{className:s.typo},a.createElement(Dt,{variant:"h4"},l))),a.createElement(c.Z,{item:!0,xs:4},t))))};var _t="",Bt="",Mt=(0,h.Z)((function(e){return(0,Z.Z)({stats:{marginRight:e.spacing(2)},icon:{marginTop:e.spacing(8)},stat:{margin:e.spacing(1)},colorSecondary:{color:e.palette.secondary.main},widgetTitle:{paddingBottom:"0 !important",paddingLeft:"".concat(e.spacing(3),"px !important"),paddingTop:"".concat(e.spacing(2),"px !important")},noTopSpacing:{paddingTop:"0 !important"}})}));const Lt=function(e){var t,n,r,l,i,o,s=e.unusedPayments,u=e.loading,d=e.filteredStats,p=e.buyerId,v=e.sellerId,f=window.config.order.settleInvoiceDealerType||"hq",g=(0,Rt.Z)(),E=(0,b.useTranslation)().t,y=Mt();return""===(null==d?void 0:d.totalDue.amount)?a.createElement(c.Z,{container:!0,spacing:3},a.createElement(c.Z,{item:!0,sm:12},a.createElement(nt.Z,{variant:"text",animation:"wave"}),a.createElement(nt.Z,{variant:"rect",width:"100%",height:160,animation:"wave"}))):(f!==g.resellerType?(_t=null==s||null===(r=s.totalDue)||void 0===r?void 0:r.amount,Bt=null==s||null===(l=s.totalUnusedCredit)||void 0===l?void 0:l.amount):(_t=null==d||null===(i=d.totalDue)||void 0===i?void 0:i.amount,Bt=null==d||null===(o=d.totalUnusedCredit)||void 0===o?void 0:o.amount),a.createElement(c.Z,{container:!0,spacing:3},s&&a.createElement(a.Fragment,null,a.createElement(c.Z,{item:!0,sm:6},a.createElement(c.Z,{container:!0,spacing:3},a.createElement(c.Z,{item:!0,sm:12,className:y.widgetTitle},a.createElement($.Z,{variant:"subtitle1",color:"primary"},p&&""==v?"".concat(E("detailsFor")," ").concat(g.userId," / ").concat(p):"".concat(E("detailsFor")," ").concat(g.userId))),a.createElement(c.Z,{item:!0,md:12,lg:6,className:y.noTopSpacing},a.createElement(kt,{className:y.stat,label:E("totalDue"),value:_t,color:"secondary"},a.createElement(Ot.Z,{color:"primary",style:{fontSize:60},className:y.icon}))),a.createElement(c.Z,{item:!0,md:12,lg:6,className:y.noTopSpacing},a.createElement(kt,{className:(0,m.default)(y.stat),label:E("totalUnusedCredit"),value:Bt,color:"secondary"},a.createElement(Nt.Z,{color:"primary",style:{fontSize:60},className:y.icon}))))),f==g.resellerType&&a.createElement(a.Fragment,null,(""!==p||""!==v)&&a.createElement(a.Fragment,null,u?a.createElement(c.Z,{item:!0,sm:6},a.createElement($.Z,{variant:"body1"},E("loadingPosData")),a.createElement(nt.Z,{variant:"rect",width:"100%",height:145,animation:"wave"})):a.createElement(a.Fragment,null,a.createElement(c.Z,{item:!0,sm:6},a.createElement(c.Z,{container:!0,spacing:3},a.createElement(c.Z,{item:!0,sm:12,className:y.widgetTitle},a.createElement($.Z,{variant:"subtitle1",color:"primary"},p&&""==v?"".concat(E("detailsFor")," ").concat(p):v&&p?"".concat(E("detailsFor")," ").concat(p," / ").concat(v):"".concat(E("detailsFor")," ").concat(v))),a.createElement(c.Z,{item:!0,md:12,lg:6,className:y.noTopSpacing},a.createElement(kt,{className:y.stat,label:E("due"),value:null==s||null===(t=s.totalDue)||void 0===t?void 0:t.amount,color:"secondary"},a.createElement(wt.Z,{color:"primary",style:{fontSize:60},className:y.icon}))),a.createElement(c.Z,{item:!0,md:12,lg:6,className:y.noTopSpacing},a.createElement(kt,{className:(0,m.default)(y.stat),label:E("unusedCredit"),value:null==s||null===(n=s.totalUnusedCredit)||void 0===n?void 0:n.amount,color:"secondary"},a.createElement(wt.Z,{color:"primary",style:{fontSize:60},className:y.icon})))))))))))},Ut=function(e){var t=e.sellerId,n=e.buyerId;return r().createElement(Tt,{sellerId:t,buyerId:n},(function(e){var a=e.loading,l=e.unusedPayments,i=e.filteredStats;return r().createElement(Lt,{loading:a,unusedPayments:l,filteredStats:i,sellerId:t,buyerId:n})}))};var Ft=n(44104),At=n.n(Ft),jt=n(37033),qt=(0,h.Z)((function(e){return(0,Z.Z)({titleSpacing:{marginBottom:e.spacing(1)},subTitleSpacing:{marginBottom:e.spacing(1)},dividerSpacing:{marginBottom:e.spacing(3)}})})),Wt={title:"viewOrdersPageTitle",desc:"viewOrdersPageDescription"},Kt=[];const Vt=function(){qt();var e,t,n,r,o=(0,b.useTranslation)().t,c=(0,L.Z)().showErrorMessage,u=a.useState(!1),d=(0,i.Z)(u,2),m=d[0],p=d[1],v=a.useState(),f=(0,i.Z)(v,2),g=f[0],E=f[1],h=At()().checkPermission,Z=null===(e=null===(t=window)||void 0===t||null===(n=t.config)||void 0===n||null===(r=n.order)||void 0===r?void 0:r.orderListingBasedOnCondition)||void 0===e||e;return a.useEffect((function(){(0,G.Sz)().then((function(e){E(e),Z?e.paymentPresets.filter((function(e){return"ORDER"===e.category})).length>0&&p(!0):p(!0)})),Kt.length<=0&&(0,G.uL)().then((function(e){Kt=e.orderReasons})).catch((function(e){c("error loading reject reasons")}))}),[]),(0,a.useEffect)((function(){var e;null!==(e=window.location.href)&&void 0!==e&&e.includes("/pending-reversal")?(Wt.title="viewPendingReversalOrdersPageTitle",Wt.desc="viewPendingReversalOrdersPageDescription"):(Wt.title="viewOrdersPageTitle",Wt.desc="viewOrdersPageDescription")}),[]),a.createElement(s.SeamlessContainer,{title:o("".concat(Wt.title)),description:o("".concat(Wt.desc))},m&&h(jt.Z.RAISE_ORDER_BUTTON)&&a.createElement(y.Z,{display:"flex",flexDirection:"row",justifyContent:"flex-end"},a.createElement(s.SeamlessButton,{component:l.Link,to:"/home/order/orders/create",variant:"contained",color:"primary",endIcon:a.createElement(S.Z,null),style:{whiteSpace:"nowrap"}},o("createOrder"))),a.createElement("div",{style:{height:"calc(90vh - 250px)",width:"100%"}},m?a.createElement(tt,{rejectReasonsAsProp:Kt,orderTypes:g}):a.createElement(a.Fragment,null,a.createElement(nt.Z,{variant:"rect",height:300,animation:"wave"}),a.createElement(nt.Z,{variant:"text",height:120,animation:"wave"}))))};var zt=!1;const Ht=function(){var e=(0,b.useTranslation)().t,t=e("raiseOrderPageTitle"),n=e("raiseOrderPageDescription"),i=(0,l.useParams)().orderType,o=(0,E.r)().setValue;return(0,a.useEffect)((function(){(0,q.Sz)().then((function(e){e&&(zt=!0,o(e))}))}),[]),zt?r().createElement(s.SeamlessContainer,{title:t,description:n},r().createElement(F,{orderType:i.toUpperCase()})):r().createElement(ee.Z,null)};var Qt=n(15459),Yt=(0,h.Z)((function(e){return(0,Z.Z)({fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{fontSize:14}})}));const Gt=function(e){var t=e.headingProps,n=void 0===t?{xs:12,sm:3}:t,r=e.valueProps,l=void 0===r?{xs:12,sm:3}:r,i=e.title,o=e.value,s=e.key,u=void 0===s?0:s,d=((0,b.useTranslation)().t,Yt());return o&&"NULL"!=o&&"Null"!=o?a.createElement(a.Fragment,{key:u},a.createElement(c.Z,(0,me.Z)({item:!0},n),a.createElement($.Z,{className:d.fieldHeading},i)),a.createElement(c.Z,(0,me.Z)({item:!0},l),a.isValidElement(o)?o:a.createElement($.Z,{className:d.fieldValue},o))):null};var Jt,Xt,$t,en=n(3843),tn=n(64902),nn=n(15e3),an=n(29971),rn=n(35457);function ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function on(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ln(Object(n),!0).forEach((function(t){(0,C.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ln(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var cn=(0,h.Z)((function(e){return(0,Z.Z)({primaryButton:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,padding:"".concat(e.spacing(1),"px ").concat(e.spacing(3),"px"),borderRadius:e.shape.borderRadius},secondaryButton:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,padding:"".concat(e.spacing(1),"px ").concat(e.spacing(3),"px"),borderRadius:e.shape.borderRadius},spacingTop:{marginTop:e.spacing(3)},element:{margin:e.spacing(1),padding:"".concat(e.spacing(1),"px ").concat(e.spacing(1.5),"px"),borderRadius:e.shape.borderRadius},btnPrimary:{background:e.palette.primary.main,color:e.palette.primary.contrastText},btnSecondary:{background:e.palette.secondary.main,color:e.palette.primary.contrastText},spacingBottom:{marginBottom:e.spacing(1)},subHeadingSpacing:{marginTop:10,marginLeft:10},wrapper:{padding:e.spacing(2)},titleSpacing:{marginBottom:e.spacing(1)},subTitleSpacing:{marginBottom:e.spacing(1)},dividerSpacing:{marginBottom:e.spacing(3)},fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{textTransform:"capitalize",fontSize:14},rowSpacing:{marginBottom:e.spacing(.5)},fullWidth:{width:"100%"},innerTitle:{color:e.palette.secondary.light},displayBlock:{display:"block"},dialogWrapper:{"& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},progress:{marginLeft:"8px"},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginBottom:e.spacing(3)},btnSpace:{marginRight:e.spacing(2)},toRight:{textAlign:"right"}})})),sn=(0,Qt.Z)((function(e){return(0,Z.Z)({root:{backgroundColor:e.palette.background.default,borderBottom:"1px solid rgba(0, 0, 0, .125)",marginBottom:-1,minHeight:56,"&$expanded":{minHeight:56}},content:{"&$expanded":{margin:0}},expanded:{}})}))(ye.Z),un={title:"Are you sure , you want to Accept?",button:"Accept",action:"reject"},dn=window.config,mn=null!==(Jt=null===(Xt=dn.order)||void 0===Xt?void 0:Xt.commissionPercentage)&&void 0!==Jt?Jt:1,pn=null!==($t=dn.order.maxCharacterLimit)&&void 0!==$t?$t:160;const vn=function(e){var t,n,r,o,u,d,p,v,f,g,E,S,h,Z,x,C,P,D,k,_,B,M,U,F,A,j,W,K,V,Y,G,X,ee,te,ne,ae,re,le,ie,oe,ce,se,ue,de,me,pe,ve,ye,he,Ze,be,Ie,Te,Re=e.orderData,Ne=e.orderId,Oe=e.loading,we=void 0!==Oe&&Oe,xe=cn(),Ce=(0,b.useTranslation)().t,Pe=(0,l.useHistory)(),De=At()().checkPermission,ke=(0,an.useSelector)((function(e){return e.auth})).user,_e=(0,L.Z)(),Be=_e.showErrorMessage,Me=_e.showWarningMessage,Le=_e.showSuccessMessage,Ue=a.useState(!1),Fe=(0,i.Z)(Ue,2),Ae=(Fe[0],Fe[1]),je=a.useState(null),qe=(0,i.Z)(je,2),We=qe[0],Ke=qe[1],Ve=a.useState(null),ze=(0,i.Z)(Ve,2),He=ze[0],Qe=ze[1],Ye=a.useState({isOpen:!1,content:null}),Ge=(0,i.Z)(Ye,2),Je=Ge[0],Xe=Ge[1],$e=a.useState(!1),et=(0,i.Z)($e,2),tt=et[0],nt=et[1],at=a.useState(!1),rt=(0,i.Z)(at,2),lt=rt[0],it=rt[1],ot=a.useState(""),ct=(0,i.Z)(ot,2),st=ct[0],ut=ct[1],dt=(0,a.useState)([]),mt=(0,i.Z)(dt,2),pt=mt[0],ft=mt[1],gt=(0,a.useState)(),Et=(0,i.Z)(gt,2),yt=Et[0],St=Et[1],ht=(0,a.useState)([]),Zt=(0,i.Z)(ht,2),bt=Zt[0],It=Zt[1],Tt=a.useState(!1),Rt=(0,i.Z)(Tt,2),Nt=Rt[0],Ot=Rt[1],wt=a.useState(!1),xt=(0,i.Z)(wt,2),Ct=xt[0],Pt=xt[1],Dt=a.useState(""),kt=(0,i.Z)(Dt,2),_t=kt[0],Bt=kt[1],Mt=a.useState(!1),Lt=(0,i.Z)(Mt,2),Ut=Lt[0],Ft=Lt[1];(0,a.useEffect)((function(){un={title:"Are you sure , you want to Accept?",button:Ce("accept"),action:"reject"},(0,q.uL)().then((function(e){ft(e.orderReasons)})).catch((function(e){Be("error loading reject reasons")}))}),[]);var qt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"reject";"reverse"===e&&(un.action=e,un.title=Ce("reversalTitle"),un.button=Ce("doTransactionReverse","Yes! Proceed Reverse")),St(""),nt(!0)},Wt=function(){St(""),nt(!1)},Kt=function(){it(!1)};function Vt(e){e.target.value.length>=pn||St(e.target.value)}var zt=function(e,t){return t=t||"","".concat(e=e||0," ").concat(t)},Ht=function(){Xe(on(on({},Je),{},{isOpen:!1}))},Qt=a.useState("panel1"),Yt=(0,i.Z)(Qt,2),Jt=(Yt[0],Yt[1]);(0,a.useEffect)((function(){var e,t=null==Re||null===(e=Re.internalOrders)||void 0===e?void 0:e.filter((function(e){return"WAITING_RESERVATION"===e.state}));It(t)}),[Re]);var Xt=a.createElement(fe.Z,{color:"inherit",size:14,thickness:6,className:xe.progress});a.useEffect((function(){var e;Re&&(null==Re||null===(e=Re.additionalFields)||void 0===e||e.map((function(e){var t,n=null==e||null===(t=e.name)||void 0===t?void 0:t.split("_");"SEAMLESS"===(null==n?void 0:n[0])&&("downloadLink"===(null==n?void 0:n[2])&&Bt(e.value),"SHOW-REQUESTEDITEMS"===(null==n?void 0:n[1])&&Pt(!0),"SHOW-DOWNLOADBUTTON"===(null==n?void 0:n[1])&&Ot(!0))})))}),[Re]);var $t;return a.createElement(c.Z,{container:!0},a.createElement(c.Z,{container:!0,className:xe.spacingTop},a.createElement(c.Z,{item:!0,className:xe.toRight,xs:12},a.createElement(y.Z,{display:"flex",flexDirection:"row",justifyContent:"flex-end"},bt&&(null==bt?void 0:bt.length)>0&&a.createElement(a.Fragment,null,a.createElement(s.SeamlessButton,{component:l.Link,to:"/home/order/orders/reschedule-delivery/".concat(null===(t=bt[0])||void 0===t?void 0:t.id),variant:"contained",color:"secondary",className:(0,m.default)(xe.btnSpace,xe.secondaryButton)},Ce("rescheduleDeliveryOrders"))),De(jt.Z.DOWNLOAD_MASS_VOUCHER)&&Nt&&"Y"===_t?a.createElement(s.SeamlessButton,{variant:"contained",color:"primary",disabled:Ut,className:(0,m.default)(xe.btnSpace,xe.primaryButton),onClick:function(){return function(e){Ft(!0);var t=new Headers;t.append("authorization",localStorage.getItem("token")||""),t.append("Accept-Language","en-US;en-IN;q=0.9,en-US;q=0.7,en-GB;q=0.6"),t.append("Content-Type","application/octet-stream");var n={method:"GET",headers:t,redirect:"follow"},a="".concat(dn.protocol,"://").concat(dn.server,"/api/vfo-link/download?orderId=").concat(e),r="";fetch(a,n).then((function(e){if(200===(null==e?void 0:e.status)){var t,n,a=null===(t=e.headers.get("Content-Disposition"))||void 0===t?void 0:t.split(";");return r=null==a||null===(n=a[1].split("="))||void 0===n?void 0:n[1],e.blob()}Be(Ce("unableToDownloadVoucher"))})).then((function(e){e&&r?function(e,t){var n=URL.createObjectURL(e),a=document.createElement("a");a.href=n,a.download=t,a.click()}(e,r):Be(Ce("fileNotFound"))})).catch((function(e){return Be(e)})).finally((function(){return Ft(!1)}))}(Re.orderId)},startIcon:Ut?a.createElement(fe.Z,{size:20}):a.createElement(rn.Z,null)},Ce("downloadVoucher")):null,a.createElement(s.SeamlessButton,{component:l.Link,to:"/home/order/orders",variant:"contained",color:"primary",className:xe.primaryButton},Ce("backButton"))))),Re&&a.createElement(c.Z,{container:!0,className:xe.spacingTop},a.createElement(c.Z,{item:!0,className:xe.toRight,xs:12},"TRANSFERRED"===Re.state&&De(jt.Z.ORDER_REVERSAL)&&a.createElement(s.SeamlessButton,{onClick:function(){return qt("reverse")},variant:"contained",color:"primary",className:(0,m.default)(xe.element,xe.btnPrimary),endIcon:we?Xt:a.createElement(tn.Z,null)},Ce("requestReversal")),"REVERSE_WAIT_CONFIRM"===Re.state&&a.createElement(a.Fragment,null,De(jt.Z.APPROVE_ORDER_REVERSAL)&&a.createElement(s.SeamlessButton,{onClick:function(){return qt()},variant:"contained",color:"primary",className:(0,m.default)(xe.element,xe.btnPrimary),endIcon:we?Xt:a.createElement(en.Z,null)},Ce("approveReversal")),De(jt.Z.REJECT_ORDER_REVERSAL)&&a.createElement(s.SeamlessButton,{onClick:function(e){St(""),it(!0)},variant:"contained",color:"secondary",className:(0,m.default)(xe.element,xe.btnSecondary),endIcon:we?Xt:a.createElement(nn.Z,null)},Ce("rejectReversal")))),a.createElement(c.Z,{item:!0,xs:12},a.createElement($.Z,{variant:"subtitle1",color:"primary",className:xe.innerTitle},Ce("basicOrderInfo"))),a.createElement(c.Z,{container:!0,spacing:3,className:(0,m.default)(xe.rowSpacing,xe.spacingTop)},a.createElement(Gt,{title:Ce("orderId"),value:Re.orderId,valueProps:{sm:8}}),a.createElement(Gt,{title:Ce("orderType"),value:Re.orderType?Re.orderType:null,valueProps:{sm:8}}),a.createElement(Gt,{title:Ce("createTimestamp"),value:Re.createTimestamp?Re.createTimestamp:null,valueProps:{sm:8}}),a.createElement(Gt,{title:Ce("state"),value:Re.state?Re.state:null,valueProps:{sm:8}})),(null==Re?void 0:Re.reversalDetails)&&(null==dn||null===(n=dn.order)||void 0===n||null===(r=n.reversalOrderTypes)||void 0===r?void 0:r.includes(null==Re?void 0:Re.orderType))&&a.createElement(a.Fragment,null,a.createElement(c.Z,{item:!0,xs:12,className:xe.spacingTop},a.createElement($.Z,{variant:"subtitle1",color:"primary",className:xe.innerTitle},Ce("reversalInfo"))),a.createElement(c.Z,{container:!0,spacing:3,className:(0,m.default)(xe.rowSpacing,xe.spacingTop)},a.createElement(Gt,{title:Ce("reversalRequestedBy"),value:null==Re||null===(o=Re.reversalDetails)||void 0===o?void 0:o.reversalRequestedBy,valueProps:{sm:8}}),a.createElement(Gt,{title:Ce("reversalRequestDate"),value:null==Re||null===(u=Re.reversalDetails)||void 0===u?void 0:u.reversalRequestDate,valueProps:{sm:8}}),a.createElement(Gt,{title:Ce("approvedBy"),value:null==Re||null===(d=Re.reversalDetails)||void 0===d?void 0:d.reversalApprovedBy,valueProps:{sm:8}}),a.createElement(Gt,{title:Ce("approvalTimestamp"),value:null==Re||null===(p=Re.reversalDetails)||void 0===p?void 0:p.reversalApprovalDate,valueProps:{sm:8}}),a.createElement(Gt,{title:Ce("approvalReason"),value:null==Re||null===(v=Re.reversalDetails)||void 0===v?void 0:v.approvalReason,valueProps:{sm:8}}),a.createElement(Gt,{title:Ce("rejectedBy"),value:null==Re||null===(f=Re.reversalDetails)||void 0===f?void 0:f.reversalRejectedBy,valueProps:{sm:8}}),a.createElement(Gt,{title:Ce("rejectTimestamp"),value:null==Re||null===(g=Re.reversalDetails)||void 0===g?void 0:g.reversalRejectDate,valueProps:{sm:8}}),a.createElement(Gt,{title:Ce("rejectReason"),value:null==Re||null===(E=Re.reversalDetails)||void 0===E?void 0:E.rejectReason,valueProps:{sm:8}}))),(Re.initiator||Re.sender||Re.seller||Re.buyer||Re.receiver)&&a.createElement(c.Z,{container:!0,spacing:3,className:xe.spacingBottom},a.createElement(c.Z,{item:!0,xs:12,className:xe.spacingTop},a.createElement($.Z,{variant:"subtitle1",color:"primary",className:(0,m.default)(xe.innerTitle,xe.spacingBottom)},Ce("involvedParties")))),Re.initiator&&a.createElement(a.Fragment,null,a.createElement(ge.Z,{square:!0,className:xe.fullWidth},a.createElement(sn,{"aria-controls":"panel2d-content",id:"panel2d-header",expandIcon:a.createElement(Se.Z,null)},a.createElement($.Z,{variant:"subtitle1",color:"primary"},Ce("initiator"))),a.createElement(Ee.Z,null,a.createElement(c.Z,{container:!0,spacing:3,className:(0,m.default)(xe.rowSpacing,xe.spacingTop)},a.createElement(Gt,{title:Ce("id"),value:Re.initiator.id}),Re.initiator&&(null===(S=Re.initiator)||void 0===S?void 0:S.additionalFields)&&(null===(h=Re.initiator)||void 0===h?void 0:h.additionalFields.filter((function(e){return e.name!==Ce("orderPasswordField")})).map((function(e,t){return a.createElement(Gt,{key:t,title:Ce(e.name,(0,J.WR)(e.name)),value:e.value})}))))))),Re.sender&&a.createElement(a.Fragment,null,a.createElement(ge.Z,{square:!0,className:xe.fullWidth},a.createElement(sn,{"aria-controls":"panel3d-content",id:"panel3d-header",expandIcon:a.createElement(Se.Z,null)},a.createElement($.Z,{variant:"subtitle1",color:"primary"},Ce("sender"))),a.createElement(Ee.Z,null,a.createElement(c.Z,{container:!0,spacing:3,className:(0,m.default)(xe.rowSpacing,xe.spacingTop)},a.createElement(Gt,{title:Ce("id"),value:Re.sender.id}),Re.sender&&(null===(Z=Re.sender)||void 0===Z?void 0:Z.additionalFields)&&(null===(x=Re.sender)||void 0===x?void 0:x.additionalFields.filter((function(e){return e.name!==Ce("orderPasswordField")})).map((function(e,t){return a.createElement(Gt,{key:t,title:Ce(e.name,(0,J.WR)(e.name)),value:e.value})}))))))),Re.seller&&a.createElement(a.Fragment,null,a.createElement(ge.Z,{square:!0,className:xe.fullWidth},a.createElement(sn,{"aria-controls":"panel4d-content",id:"panel4d-header",expandIcon:a.createElement(Se.Z,null)},a.createElement($.Z,{variant:"subtitle1",color:"primary"},Ce("seller"))),a.createElement(Ee.Z,null,a.createElement(c.Z,{container:!0,spacing:3,className:(0,m.default)(xe.rowSpacing,xe.spacingTop)},a.createElement(Gt,{title:Ce("id"),value:Re.seller.id}),Re.seller&&(null===(C=Re.seller)||void 0===C?void 0:C.additionalFields)&&(null===(P=Re.seller)||void 0===P?void 0:P.additionalFields.map((function(e,t){return a.createElement(Gt,{key:t,title:Ce(e.name,(0,J.WR)(e.name)),value:e.value})}))))))),Re.buyer&&a.createElement(a.Fragment,null,a.createElement(ge.Z,{square:!0,className:xe.fullWidth},a.createElement(sn,{"aria-controls":"panel5d-content",id:"panel5d-header",expandIcon:a.createElement(Se.Z,null)},a.createElement($.Z,{variant:"subtitle1",color:"primary"},Ce("buyer"))),a.createElement(Ee.Z,null,a.createElement(c.Z,{container:!0,spacing:3,className:(0,m.default)(xe.rowSpacing,xe.spacingTop)},a.createElement(Gt,{title:Ce("id"),value:Re.buyer.id}),Re.buyer&&(null===(D=Re.buyer)||void 0===D?void 0:D.additionalFields)&&(null===(k=Re.buyer)||void 0===k?void 0:k.additionalFields.map((function(e,t){return a.createElement(Gt,{key:t,title:Ce(e.name,(0,J.WR)(e.name)),value:e.value})}))))))),Re.receiver&&a.createElement(a.Fragment,null,a.createElement(ge.Z,{square:!0,className:xe.fullWidth},a.createElement(sn,{"aria-controls":"panel6d-content",id:"panel6d-header",expandIcon:a.createElement(Se.Z,null)},a.createElement($.Z,{variant:"subtitle1",color:"primary"},Ce("receiver"))),a.createElement(Ee.Z,null,a.createElement(c.Z,{container:!0,spacing:3,className:(0,m.default)(xe.rowSpacing,xe.spacingTop)},a.createElement(Gt,{title:Ce("id"),value:Re.receiver.id}),(null===(_=Re.receiver)||void 0===_?void 0:_.additionalFields)&&(null===(B=Re.receiver)||void 0===B?void 0:B.additionalFields.filter((function(e){return e.name!==Ce("orderPasswordField")})).map((function(e,t){return a.createElement(Gt,{key:t,title:Ce(e.name,(0,J.WR)(e.name)),value:e.value})}))))))),Re&&(null==Re?void 0:Re.items)&&a.createElement(a.Fragment,null,a.createElement(c.Z,{container:!0,spacing:3,className:xe.spacingBottom},a.createElement(c.Z,{item:!0,xs:12,className:xe.spacingTop},a.createElement($.Z,{variant:"subtitle1",color:"primary",className:(0,m.default)(xe.innerTitle,xe.spacingBottom)},Ce("itemsList")))),a.createElement(ge.Z,{square:!0,className:xe.fullWidth},a.createElement(sn,{"aria-controls":"panel7d-content",id:"panel7d-header",expandIcon:a.createElement(Se.Z,null)},a.createElement($.Z,{variant:"subtitle1",color:"primary"},Ce("items"))),a.createElement(Ee.Z,{className:xe.displayBlock},0==Re.items.length&&a.createElement($.Z,{variant:"subtitle1"},Ce("noRecordText")),(null==Re?void 0:Re.items.length)>0&&(null==Re?void 0:Re.items.map((function(e,t){var n,r,l,i;return a.createElement("div",{key:t},a.createElement(c.Z,{container:!0,spacing:3,className:(0,m.default)(xe.rowSpacing,xe.spacingTop)},a.createElement(Gt,{title:Ce("productName"),value:e.productName}),a.createElement(Gt,{title:Ce("productSku"),value:e.productSku}),a.createElement(Gt,{title:Ce("quantity"),value:e.quantity}),a.createElement(Gt,{title:Ce("reserveType"),value:e.reserveType}),a.createElement(Gt,{title:Ce("serials"),value:null===(n=e.serials)||void 0===n?void 0:n.join(", ")}),a.createElement(Gt,{title:Ce("batchIds"),value:null===(r=e.batchIds)||void 0===r?void 0:r.join(", ")})),e.ranges&&a.createElement(a.Fragment,null,a.createElement(c.Z,{item:!0,xs:12},a.createElement($.Z,{variant:"subtitle1",color:"primary",className:(0,m.default)(xe.spacingTop,xe.spacingBottom)},Ce("ranges"))),e.ranges.map((function(e,t){return a.createElement(c.Z,{container:!0,key:t,spacing:3,className:xe.rowSpacing},a.createElement(Gt,{title:Ce("batchId"),value:e.batchId}),a.createElement(Gt,{title:Ce("startSerial"),value:e.startSerial}),a.createElement(Gt,{title:Ce("endSerial"),value:e.endSerial}))}))),e.seller&&a.createElement(a.Fragment,null,a.createElement(c.Z,{container:!0,spacing:3,className:xe.rowSpacing},a.createElement(c.Z,{item:!0,xs:12},a.createElement($.Z,{variant:"subtitle1",color:"primary",className:xe.spacingTop},Ce("seller"))),a.createElement(Gt,{title:Ce("id"),value:e.seller.id}),(null===(l=e.seller)||void 0===l?void 0:l.additionalFields)&&(null===(i=e.seller)||void 0===i?void 0:i.additionalFields.map((function(e,t){return a.createElement(Gt,{key:t,title:Ce(e.name,(0,J.WR)(e.name)),value:e.value})}))))),e.data&&a.createElement(a.Fragment,null,a.createElement(c.Z,{container:!0,spacing:3,className:xe.rowSpacing},a.createElement(c.Z,{item:!0,xs:12},a.createElement($.Z,{variant:"subtitle1",color:"primary",className:xe.spacingTop},Ce("data"))),function(e){var t=[];for(var n in e){var r,l=e[n],i="resultMessage"===n?"resultDescription":n;"commissionPercentage"===n&&mn>0&&e[n]&&(l=Number(e[n])/mn,l+="percentage"===(null===(r=e.commissionValueType)||void 0===r?void 0:r.toLowerCase())?"%":""),t.push(a.createElement(Gt,{key:n,title:Ce(i,(0,J.WR)(n)),value:l}))}return t}(e.data))),a.createElement(vt.Z,{className:xe.spacingTop}))})))))),(Re.paymentMode||Re.paymentMode)&&a.createElement(a.Fragment,null,a.createElement(c.Z,{item:!0,xs:12,className:(0,m.default)(xe.rowSpacing,xe.spacingTop)},a.createElement($.Z,{variant:"subtitle1",color:"primary",className:xe.innerTitle},Ce("paymentInformation"))),a.createElement(c.Z,{container:!0,spacing:3,className:(0,m.default)(xe.rowSpacing,xe.spacingTop)},a.createElement(Gt,{title:Ce("paymentMode"),value:Re.paymentMode?Re.paymentMode:null,valueProps:{sm:8}}),a.createElement(Gt,{title:Ce("paymentAgreement"),value:Re.paymentAgreement?Re.paymentAgreement:null,valueProps:{sm:8}}))),(Re.erpOrders&&Re.erpOrders.length>0||Re.internalOrders&&Re.internalOrders.length>0)&&a.createElement(c.Z,{container:!0,spacing:3,className:xe.spacingBottom},a.createElement(c.Z,{item:!0,xs:12,className:xe.spacingTop},a.createElement($.Z,{variant:"subtitle1",color:"primary",className:(0,m.default)(xe.innerTitle,xe.spacingBottom)},Ce("orders")))),(null==Re?void 0:Re.internalOrders)&&Re.internalOrders.length>0&&a.createElement(a.Fragment,null,a.createElement(ge.Z,{square:!0,className:xe.fullWidth},a.createElement(sn,{"aria-controls":"panel8d-content",id:"panel8d-header",expandIcon:a.createElement(Se.Z,null)},a.createElement($.Z,{variant:"subtitle1",color:"primary"},Ce("internalOrders"))),a.createElement(Ee.Z,{className:xe.displayBlock},Re.internalOrders.map((function(e,t){var n,r,l,i,o;return a.createElement("div",{key:t},a.createElement(c.Z,{container:!0,spacing:3,className:(0,m.default)(xe.rowSpacing,xe.spacingTop)},a.createElement(Gt,{title:Ce("id"),value:e.id}),a.createElement(Gt,{title:Ce("type"),value:e.type}),a.createElement(Gt,{title:Ce("state"),value:e.state}),a.createElement(Gt,{title:Ce("creationTimestamp"),value:e.creationTimestamp}),a.createElement(Gt,{title:Ce("externalReferenceNumber"),value:e.externalReferenceNumber}),a.createElement(Gt,{title:Ce("clientComment"),value:null==e||null===(n=e.orderRequest)||void 0===n||null===(r=n.clientContext)||void 0===r?void 0:r.clientComment})),(null==e?void 0:e.receiver)&&(null==e||null===(l=e.receiver)||void 0===l?void 0:l.id)&&a.createElement(c.Z,{container:!0,spacing:3,className:xe.spacingBottom},a.createElement(c.Z,{item:!0,xs:12,className:xe.spacingTop},a.createElement($.Z,{variant:"subtitle1",className:xe.innerTitle},Ce("receiver"))),a.createElement(Gt,{title:Ce("id"),value:e.receiver.id})),a.createElement(c.Z,{container:!0,spacing:3,className:xe.rowSpacing},(null==e||null===(i=e.receiver)||void 0===i?void 0:i.additionalFields)&&(null==e||null===(o=e.receiver)||void 0===o?void 0:o.additionalFields.map((function(e,t){return a.createElement(Gt,{key:t,title:Ce(e.name,(0,J.WR)(e.name)),value:e.value})})))),a.createElement(vt.Z,{className:xe.spacingTop}))}))))),(null==Re?void 0:Re.externalReference)&&Re.externalReference.length>0&&a.createElement(a.Fragment,null,a.createElement(ge.Z,{square:!0,className:xe.fullWidth},a.createElement(sn,{"aria-controls":"panel9d-content",id:"panel9d-header",expandIcon:a.createElement(Se.Z,null)},a.createElement($.Z,{variant:"subtitle1",color:"primary"},Ce("erpOrders"))),a.createElement(Ee.Z,{className:xe.displayBlock},a.createElement(a.Fragment,null,(null==Re?void 0:Re.erpOrders)&&0==Re.erpOrders.length&&a.createElement(a.Fragment,null,a.createElement(c.Z,{container:!0,spacing:3,className:xe.spacingBottom},a.createElement(c.Z,{item:!0,xs:12,className:xe.spacingTop},a.createElement($.Z,{className:(0,m.default)(xe.fieldValue,xe.spacingBottom)},Ce("erpOrdersStatusCouldNotFetch")))),""!=(null==Re?void 0:Re.externalReference[0])&&(null==Re?void 0:Re.externalReference.map((function(e,t){return a.createElement(c.Z,{container:!0,spacing:3,className:xe.rowSpacing},a.createElement(Gt,{title:Ce("id"),value:e}),a.createElement(Gt,{title:Ce("resultMessage"),value:Ce("statusNotFetched")}))})))),(null==Re?void 0:Re.erpOrders)&&Re.erpOrders.length>0&&a.createElement(a.Fragment,null,Re.erpOrders.map((function(e,t){return a.createElement("div",{key:t,className:xe.spacingTop},a.createElement(c.Z,{container:!0,spacing:3,className:xe.rowSpacing},a.createElement(Gt,{title:Ce("id"),value:e.erpOrderId}),a.createElement(Gt,{title:Ce("status"),value:e.erpStatus})),a.createElement(vt.Z,null))}))))))),(null==Re?void 0:Re.invoiceIds)&&Re.invoiceIds.length>0&&a.createElement(a.Fragment,null,a.createElement(c.Z,{item:!0,xs:12,className:(0,m.default)(xe.rowSpacing,xe.spacingTop)},a.createElement($.Z,{variant:"subtitle1",color:"primary",className:xe.innerTitle},Ce("invoices"))),a.createElement(ge.Z,{square:!0,onChange:function(e,t){return function(e,n){Jt(!!n&&"panel10"),1==n&&(Ae(!0),(0,q.Q2)(t).then((function(e){0==e.resultCode?Ke(e):Me(e)})).catch((function(e){Be(e)})).finally((function(){return Ae(!1)})))}}(0,atob(Ne)),className:xe.fullWidth},a.createElement(sn,{"aria-controls":"panel10d-content",id:"panel10d-header",expandIcon:a.createElement(Se.Z,null)},a.createElement($.Z,{variant:"subtitle1",color:"primary"},Ce("invoices"))),a.createElement(Ee.Z,{className:xe.displayBlock},We&&We.invoices&&We.invoices.map((function(e,t){return a.createElement("div",{key:t,className:xe.spacingTop},a.createElement(c.Z,{container:!0,spacing:3,className:xe.rowSpacing},a.createElement(c.Z,{item:!0,sm:1},a.createElement($.Z,{className:xe.fieldHeading},Ce("id"))),a.createElement(c.Z,{item:!0,sm:7},a.createElement($.Z,{className:xe.fieldValue,onClick:function(){Xe({isOpen:!0,content:e})}},e.invoiceId)),a.createElement(Gt,{title:Ce("status"),value:e.status,headingProps:{sm:1},valueProps:{sm:3}})),a.createElement(vt.Z,null))})))),a.createElement(s.SeamlessDialog,{open:Je.isOpen,onClose:Ht,className:xe.dialogWrapper,maxWidth:"md",fullWidth:!0},a.createElement(a.Fragment,null,a.createElement("div",{className:xe.modalContentSpacing},a.createElement($.Z,{gutterBottom:!0,id:"transition-modal-title",variant:"h6",className:xe.fontHeavy},Ce("invoiceDetails"))),Je.content&&a.createElement("div",{className:xe.modalContentSpacing},a.createElement(c.Z,{container:!0,spacing:3,className:(0,m.default)(xe.rowSpacing,xe.spacingTop)},a.createElement(Gt,{title:Ce("id"),value:Je.content.invoiceId,headingProps:{sm:1},valueProps:{sm:11}}),a.createElement(Gt,{title:Ce("seller"),value:Je.content.seller}),a.createElement(Gt,{title:Ce("status"),value:Je.content.status}),a.createElement(Gt,{title:Ce("dueAmount"),value:zt(null===(M=Je.content.dueAmount)||void 0===M?void 0:M.amount,null===(U=Je.content.dueAmount)||void 0===U?void 0:U.currency)}),a.createElement(Gt,{title:Ce("totalNetPrice"),value:zt(null===(F=Je.content.totalNetPrice)||void 0===F?void 0:F.amount,null===(A=Je.content.totalNetPrice)||void 0===A?void 0:A.currency)}),a.createElement(Gt,{title:Ce("totalPrice"),value:zt(null===(j=Je.content.totalPrice)||void 0===j?void 0:j.amount,null===(W=Je.content.totalPrice)||void 0===W?void 0:W.currency)}),a.createElement(Gt,{title:Ce("totalTax"),value:zt(null===(K=Je.content.totalTax)||void 0===K?void 0:K.amount,null===(V=Je.content.totalTax)||void 0===V?void 0:V.currency)}),a.createElement(Gt,{title:Ce("totalSellerCommission"),value:zt(null===(Y=Je.content.totalSellerCommission)||void 0===Y?void 0:Y.amount,null===(G=Je.content.totalSellerCommission)||void 0===G?void 0:G.currency)}),a.createElement(Gt,{title:Ce("totalBuyerCommission"),value:zt(null===(X=Je.content.totalBuyerCommission)||void 0===X?void 0:X.amount,null===(ee=Je.content.totalBuyerCommission)||void 0===ee?void 0:ee.currency)}),a.createElement(Gt,{title:Ce("totalDiscount"),value:zt(null===(te=Je.content.totalDiscount)||void 0===te?void 0:te.amount,null===(ne=Je.content.totalDiscount)||void 0===ne?void 0:ne.currency)})),a.createElement(c.Z,{container:!0,spacing:3,className:(0,m.default)(xe.rowSpacing,xe.spacingTop)},Je.content.invoiceEntryList&&Je.content.invoiceEntryList.length>0&&a.createElement(c.Z,{item:!0,xs:12,className:xe.rowSpacing},a.createElement($.Z,{variant:"subtitle1",color:"primary",className:(0,m.default)(xe.innerTitle,xe.rowSpacing)},Ce("invoiceEntryList")))),Je.content.invoiceEntryList&&Je.content.invoiceEntryList.length>0&&Je.content.invoiceEntryList.map((function(e,t){var n,r,l,i,o,s,u,d,p,v,f,g,E,y,S,h;return a.createElement(a.Fragment,{key:t},a.createElement(c.Z,{container:!0,spacing:3,className:(0,m.default)(xe.rowSpacing,xe.spacingBottom)},a.createElement(Gt,{title:Ce("productSKU"),value:e.productSKU}),a.createElement(Gt,{title:Ce("productCode"),value:e.productCode}),a.createElement(Gt,{title:Ce("productName"),value:e.productName}),a.createElement(Gt,{title:Ce("buyerCommission"),value:zt(null===(n=e.buyerCommission)||void 0===n?void 0:n.amount,null===(r=e.buyerCommission)||void 0===r?void 0:r.currency)}),a.createElement(Gt,{title:Ce("unitPrice"),value:zt(null===(l=e.unitPrice)||void 0===l?void 0:l.amount,null===(i=e.unitPrice)||void 0===i?void 0:i.currency)}),a.createElement(Gt,{title:Ce("totalPrice"),value:zt(null===(o=e.totalPrice)||void 0===o?void 0:o.amount,null===(s=e.totalPrice)||void 0===s?void 0:s.currency)}),a.createElement(Gt,{title:Ce("netPrice"),value:zt(null===(u=e.netPrice)||void 0===u?void 0:u.amount,null===(d=e.netPrice)||void 0===d?void 0:d.currency)}),a.createElement(Gt,{title:Ce("sellerCommission"),value:zt(null===(p=e.sellerCommission)||void 0===p?void 0:p.amount,null===(v=e.sellerCommission)||void 0===v?void 0:v.currency)}),a.createElement(Gt,{title:Ce("discount"),value:zt(null==e||null===(f=e.discount)||void 0===f?void 0:f.amount,null==e||null===(g=e.discount)||void 0===g?void 0:g.currency)}),a.createElement(Gt,{title:"",value:(null==e?void 0:e.taxes)&&(null==e?void 0:e.taxes.join(", ")),valueProps:{sm:12}})),a.createElement(c.Z,{container:!0,spacing:3,className:xe.rowSpacing},a.createElement(Gt,{title:Ce("uomUnit"),value:"".concat(null!==(E=e.uom)&&void 0!==E&&E.unit?null===(y=e.uom)||void 0===y?void 0:y.unit:""," ")}),a.createElement(Gt,{title:Ce("uomQuantity"),value:"".concat(null!==(S=e.uom)&&void 0!==S&&S.quantity?null===(h=e.uom)||void 0===h?void 0:h.quantity:"")})),a.createElement(vt.Z,{className:xe.spacingBottom}))})),a.createElement(c.Z,{container:!0,spacing:3,className:(0,m.default)(xe.rowSpacing,xe.spacingTop)},a.createElement(s.SeamlessButton,{type:"button",variant:"contained",color:"primary",className:xe.primaryButton,onClick:Ht},Ce("close"))))))),(null==Re?void 0:Re.creditNoteIds)&&Re.creditNoteIds.length>0&&a.createElement(a.Fragment,null,a.createElement(c.Z,{item:!0,xs:12,className:(0,m.default)(xe.rowSpacing,xe.spacingTop)},a.createElement($.Z,{variant:"subtitle1",color:"primary",className:xe.innerTitle},Ce("creditNoteDetails"))),a.createElement(ge.Z,{square:!0,onChange:("panel10",$t=Re.creditNoteIds[0],function(e,t){Jt(!!t&&"panel10"),1==t&&(Ae(!0),(0,q.Tk)($t).then((function(e){0==e.resultCode?Qe(e):Me(e)})).catch((function(e){Be(e)})).finally((function(){return Ae(!1)})))}),className:xe.fullWidth},a.createElement(sn,{"aria-controls":"panel10d-content",id:"panel10d-header",expandIcon:a.createElement(Se.Z,null)},a.createElement($.Z,{variant:"subtitle1",color:"primary"},Ce("creditNote"))),a.createElement(Ee.Z,{className:xe.displayBlock},He&&He.creditNote&&a.createElement("div",{className:xe.spacingTop},a.createElement(c.Z,{container:!0,spacing:3,className:xe.rowSpacing},a.createElement(c.Z,{item:!0,sm:1},a.createElement($.Z,{className:xe.fieldHeading},Ce("id"))),a.createElement(c.Z,{item:!0,sm:7},a.createElement($.Z,{className:xe.fieldValue,onClick:function(){Xe({isOpen:!0,content:He.creditNote})}},He.creditNote.creditNoteId)),a.createElement(Gt,{title:Ce("status"),value:He.creditNote.status,headingProps:{sm:1},valueProps:{sm:3}})),a.createElement(vt.Z,null)))),a.createElement(s.SeamlessDialog,{open:Je.isOpen,onClose:Ht,className:xe.dialogWrapper,maxWidth:"md",fullWidth:!0},a.createElement(a.Fragment,null,a.createElement("div",{className:xe.modalContentSpacing},a.createElement($.Z,{gutterBottom:!0,id:"transition-modal-title",variant:"h6",className:xe.fontHeavy},Ce("creditNoteDetails"))),(null==Je?void 0:Je.content)&&a.createElement("div",{className:xe.modalContentSpacing},a.createElement(c.Z,{container:!0,spacing:3,className:(0,m.default)(xe.rowSpacing,xe.spacingTop)},a.createElement(Gt,{title:Ce("id"),value:Je.content.creditNoteId,headingProps:{sm:1},valueProps:{sm:11}}),a.createElement(Gt,{title:Ce("ogOrderId"),value:Je.content.originalOrderId}),a.createElement(Gt,{title:Ce("returnOrderId"),value:Je.content.returnOrderId}),a.createElement(Gt,{title:Ce("totalNetPrice"),value:zt(null===(ae=Je.content.totalNetPrice)||void 0===ae?void 0:ae.amount,null===(re=Je.content.totalNetPrice)||void 0===re?void 0:re.currency)}),a.createElement(Gt,{title:Ce("totalPrice"),value:zt(null===(le=Je.content.totalPrice)||void 0===le?void 0:le.amount,null===(ie=Je.content.totalPrice)||void 0===ie?void 0:ie.currency)}),a.createElement(Gt,{title:Ce("totalTax"),value:zt(null===(oe=Je.content.totalTax)||void 0===oe?void 0:oe.amount,null===(ce=Je.content.totalTax)||void 0===ce?void 0:ce.currency)}),a.createElement(Gt,{title:Ce("totalSellerCommission"),value:zt(null===(se=Je.content.totalSellerCommission)||void 0===se?void 0:se.amount,null===(ue=Je.content.totalSellerCommission)||void 0===ue?void 0:ue.currency)}),a.createElement(Gt,{title:Ce("totalBuyerCommission"),value:zt(null===(de=Je.content.totalBuyerCommission)||void 0===de?void 0:de.amount,null===(me=Je.content.totalBuyerCommission)||void 0===me?void 0:me.currency)}),a.createElement(Gt,{title:Ce("totalPenalty"),value:zt(null===(pe=Je.content.totalPenalty)||void 0===pe?void 0:pe.amount,null===(ve=Je.content.totalPenalty)||void 0===ve?void 0:ve.currency)})),a.createElement(c.Z,{container:!0,spacing:3,className:(0,m.default)(xe.rowSpacing,xe.spacingTop)},(null==Je||null===(ye=Je.content)||void 0===ye?void 0:ye.creditNoteEntryList)&&(null==Je||null===(he=Je.content)||void 0===he?void 0:he.creditNoteEntryList.length)>0&&a.createElement(c.Z,{item:!0,xs:12,className:xe.rowSpacing},a.createElement($.Z,{variant:"subtitle1",color:"primary",className:(0,m.default)(xe.innerTitle,xe.rowSpacing)},Ce("creditNoteEntryList")))),(null==Je||null===(Ze=Je.content)||void 0===Ze?void 0:Ze.creditNoteEntryList)&&(null==Je||null===(be=Je.content)||void 0===be?void 0:be.creditNoteEntryList.length)>0&&(null==Je||null===(Ie=Je.content)||void 0===Ie?void 0:Ie.creditNoteEntryList.map((function(e,t){var n,r,l,i,o,s,u,d,p,v,f,g,E,y,S,h;return a.createElement(a.Fragment,{key:t},a.createElement(c.Z,{container:!0,spacing:3,className:(0,m.default)(xe.rowSpacing,xe.spacingBottom)},a.createElement(Gt,{title:Ce("productSKU"),value:e.productSKU}),a.createElement(Gt,{title:Ce("productCode"),value:e.productCode}),a.createElement(Gt,{title:Ce("productName"),value:e.productName}),a.createElement(Gt,{title:Ce("buyerCommission"),value:zt(null===(n=e.buyerCommission)||void 0===n?void 0:n.amount,null===(r=e.buyerCommission)||void 0===r?void 0:r.currency)}),a.createElement(Gt,{title:Ce("unitPrice"),value:zt(null===(l=e.unitPrice)||void 0===l?void 0:l.amount,null===(i=e.unitPrice)||void 0===i?void 0:i.currency)}),a.createElement(Gt,{title:Ce("totalPrice"),value:zt(null===(o=e.totalPrice)||void 0===o?void 0:o.amount,null===(s=e.totalPrice)||void 0===s?void 0:s.currency)}),a.createElement(Gt,{title:Ce("netPrice"),value:zt(null===(u=e.netPrice)||void 0===u?void 0:u.amount,null===(d=e.netPrice)||void 0===d?void 0:d.currency)}),a.createElement(Gt,{title:Ce("sellerCommission"),value:zt(null===(p=e.sellerCommission)||void 0===p?void 0:p.amount,null===(v=e.sellerCommission)||void 0===v?void 0:v.currency)}),a.createElement(Gt,{title:Ce("penalty"),value:zt(null==e||null===(f=e.penalty)||void 0===f?void 0:f.amount,null==e||null===(g=e.penalty)||void 0===g?void 0:g.currency)}),a.createElement(Gt,{title:"",value:(null==e?void 0:e.taxes)&&(null==e?void 0:e.taxes.join(", ")),valueProps:{sm:12}})),a.createElement(c.Z,{container:!0,spacing:3,className:xe.rowSpacing},a.createElement(Gt,{title:Ce("uomUnit"),value:"".concat(null!==(E=e.uom)&&void 0!==E&&E.unit?null===(y=e.uom)||void 0===y?void 0:y.unit:""," ")}),a.createElement(Gt,{title:Ce("uomQuantity"),value:"".concat(null!==(S=e.uom)&&void 0!==S&&S.quantity?null===(h=e.uom)||void 0===h?void 0:h.quantity:"")})),a.createElement(vt.Z,{className:xe.spacingBottom}))}))),a.createElement(c.Z,{container:!0,spacing:3,className:(0,m.default)(xe.rowSpacing,xe.spacingTop)},a.createElement(s.SeamlessButton,{type:"button",variant:"contained",color:"primary",className:xe.primaryButton,onClick:Ht},Ce("close"))))))),Ct&&(null==Re?void 0:Re.requestedItems.length)>0&&a.createElement(a.Fragment,null,a.createElement(c.Z,{item:!0,xs:12,className:(0,m.default)(xe.rowSpacing,xe.spacingTop)},a.createElement($.Z,{variant:"subtitle1",color:"primary",className:xe.innerTitle},Ce("requestedItems"))),a.createElement(ge.Z,{square:!0,className:xe.fullWidth},a.createElement(sn,{"aria-controls":"panel11d-content",id:"panel11d-header",expandIcon:a.createElement(Se.Z,null)},a.createElement($.Z,{variant:"subtitle1",color:"primary"},Ce("requestedItems"))),a.createElement(Ee.Z,null,a.createElement(c.Z,null,null==Re||null===(Te=Re.requestedItems)||void 0===Te?void 0:Te.map((function(e,t){var n,r,l,i,o,s,u,d,p,v,f,g,E,y,S,h,Z,b,I;return a.createElement(c.Z,{xs:12},a.createElement(c.Z,{container:!0,spacing:3,className:(0,m.default)(xe.rowSpacing,xe.spacingBottom,xe.spacingTop)},a.createElement(Gt,{title:Ce("productSKU"),value:null==e?void 0:e.productSku}),a.createElement(Gt,{title:Ce("quantity"),value:null==e?void 0:e.quantity}),a.createElement(Gt,{title:Ce("reserveType"),value:null==e?void 0:e.reserveType})),a.createElement(c.Z,{container:!0,spacing:3,className:(0,m.default)(xe.rowSpacing,xe.spacingBottom)},a.createElement(c.Z,{xs:12},a.createElement($.Z,{variant:"subtitle2",color:"primary",className:xe.subHeadingSpacing},Ce("seller"))),a.createElement(Gt,{title:Ce("sellerId"),value:null==e||null===(n=e.seller)||void 0===n?void 0:n.id}),a.createElement(Gt,{title:Ce("sellerIdType"),value:null==e||null===(r=e.seller)||void 0===r?void 0:r.idType})),a.createElement(c.Z,{container:!0,spacing:3,className:(0,m.default)(xe.rowSpacing,xe.spacingBottom)},a.createElement(c.Z,{xs:12},a.createElement($.Z,{variant:"subtitle2",color:"primary",className:xe.subHeadingSpacing},Ce("data"))),a.createElement(Gt,{title:Ce("productCode"),value:null==e||null===(l=e.data)||void 0===l?void 0:l.productCode}),a.createElement(Gt,{title:Ce("productColorId"),value:null==e||null===(i=e.data)||void 0===i?void 0:i.productColorId}),a.createElement(Gt,{title:Ce("productSizeId"),value:null==e||null===(o=e.data)||void 0===o?void 0:o.productSizeId}),a.createElement(Gt,{title:Ce("productVariantNumber"),value:null==e||null===(s=e.data)||void 0===s?void 0:s.productVariantNumber}),a.createElement(Gt,{title:Ce("salesUnitId"),value:null==e||null===(u=e.data)||void 0===u?void 0:u.salesUnitId}),a.createElement(Gt,{title:Ce("taxCode"),value:null==e||null===(d=e.data)||void 0===d?void 0:d.taxCode}),a.createElement(Gt,{title:Ce("costAmount"),value:null==e||null===(p=e.data)||void 0===p?void 0:p.costAmount}),a.createElement(Gt,{title:Ce("itemStyle"),value:null==e||null===(v=e.data)||void 0===v?void 0:v.itemStyle}),a.createElement(Gt,{title:Ce("lineNumber"),value:null==e||null===(f=e.data)||void 0===f?void 0:f.lineNumber}),a.createElement(Gt,{title:Ce("netAmount"),value:null==e||null===(g=e.data)||void 0===g?void 0:g.netAmount}),a.createElement(Gt,{title:Ce("netAmountInclusiveTax"),value:null==e||null===(E=e.data)||void 0===E?void 0:E.netAmountInclusiveTax}),a.createElement(Gt,{title:Ce("netPrice"),value:null==e||null===(y=e.data)||void 0===y?void 0:y.netPrice}),a.createElement(Gt,{title:Ce("originalPrice"),value:null==e||null===(S=e.data)||void 0===S?void 0:S.originalPrice}),a.createElement(Gt,{title:Ce("originalSalesTaxGroup"),value:null==e||null===(h=e.data)||void 0===h?void 0:h.originalSalesTaxGroup}),a.createElement(Gt,{title:Ce("periodicDiscountGroup"),value:null==e||null===(Z=e.data)||void 0===Z?void 0:Z.periodicDiscountGroup}),a.createElement(Gt,{title:Ce("price"),value:null==e||null===(b=e.data)||void 0===b?void 0:b.price})),(null==Re||null===(I=Re.requestedItems)||void 0===I?void 0:I.length)-1!==t?a.createElement(vt.Z,null):null)})))))),(null==Re?void 0:Re.additionalFields)&&(null==Re?void 0:Re.additionalFields.length)>0&&a.createElement(a.Fragment,null,a.createElement(c.Z,{item:!0,xs:12,className:(0,m.default)(xe.rowSpacing,xe.spacingTop)},a.createElement($.Z,{variant:"subtitle1",color:"primary",className:xe.innerTitle},Ce("additionalFields"))),a.createElement(ge.Z,{square:!0,className:xe.fullWidth},a.createElement(sn,{"aria-controls":"panel11d-content",id:"panel11d-header",expandIcon:a.createElement(Se.Z,null)},a.createElement($.Z,{variant:"subtitle1",color:"primary"},Ce("additionalInformation"))),a.createElement(Ee.Z,null,a.createElement(c.Z,{container:!0,spacing:3,className:(0,m.default)(xe.rowSpacing,xe.spacingTop)},Re&&(null==Re?void 0:Re.additionalFields)&&((null==Re?void 0:Re.additionalFields.filter((function(e){return e.name!==Ce("invoiceAmount")})).length)>0?null==Re?void 0:Re.additionalFields.filter((function(e){return e.name!==Ce("invoiceAmount")})).map((function(e,t){var n,r;return"SEAMLESS"===(null==e||null===(n=e.name)||void 0===n?void 0:n.split("_")[0])?null:a.createElement(Gt,{key:t,title:Ce(e.name,(0,J.WR)(e.name)),value:(r=e.value,r&&r.startsWith("http")?a.createElement("a",{target:"_blank",href:"".concat(r,"?disposition=attachment")},r):r)})})):a.createElement($.Z,{variant:"subtitle1"},Ce("noAdditionalData"))))))),a.createElement(T.Z,{open:tt,onClose:Wt,fullWidth:!0,maxWidth:"sm"},a.createElement(w.Z,{id:"form-dialog-title"},"Confirm !"),a.createElement(N.Z,null,a.createElement(O.Z,{id:"alert-dialog-description"},un.title),("reverse"===un.action||"REVERSE_WAIT_CONFIRM"===Re.state)&&a.createElement(c.Z,{item:!0,xs:12},a.createElement(Q.Z,{fullWidth:!0,multiline:!0,rowsMax:5,rows:5,value:yt,style:{marginTop:30},error:(null==yt?void 0:yt.length)>=pn-5,helperText:(null==yt?void 0:yt.length)>=pn-5?Ce("maxCharacterAllowed",{limit:pn,current:(null==yt?void 0:yt.length)+1}):"",placeholder:Ce("pleaseSpecifyReasons"),onChange:Vt}))),a.createElement(R.Z,null,a.createElement(I.Z,{onClick:Wt,color:"primary"},Ce("cancel","Cancel")),a.createElement(I.Z,{disabled:we,variant:"contained",onClick:function(){if("reverse"===un.action)return function(){if(!yt)return Be(Ce("addYourCommentForRequestReversal"));Ae(!0),(0,q.YQ)(atob(Ne),yt).then((function(e){0==e.resultCode?(Le(e.resultMessage),Pe.push("/home/order/orders/view/".concat(Ne))):Me(e.resultMessage)})).catch((function(e){Be(e)})).finally((function(){return Ae(!1)}))}();var e="REVERSE_WAIT_CONFIRM"===Re.state?yt:"";Ae(!0),(0,q.I4)(atob(Ne),ke.userId,e).then((function(e){0===(null==e?void 0:e.resultCode)?(Le((null==e?void 0:e.resultMessage)||"Order accepted."),Pe.push("/home/order/orders/view/".concat(Ne)),nt(!1)):(Le((null==e?void 0:e.resultMessage)||"Error accepting order."),nt(!1))})).catch((function(e){nt(!1),Be(e)})).finally((function(){return Ae(!1)}))},color:"primary",autoFocus:!0},Ce(un.button)," ",we&&Xt))),a.createElement(T.Z,{open:lt,onClose:Kt,fullWidth:!0,maxWidth:"sm",disablePortal:!0},a.createElement(w.Z,{id:"form-dialog-title"},"Reject !"),a.createElement(N.Z,null,a.createElement(O.Z,{id:"alert-dialog-description"},Ce("rejectConfirmationMsg")),a.createElement(H.Z,{fullWidth:!0,value:st,onChange:function(e){var t=e.target.value;St(""),ut(t);var n=pt.find((function(e){return e.code===t}));St(n.description)}},pt.map((function(e){return a.createElement(z.Z,{key:e.code,value:e.code},e.code)}))),"OTHER"===st&&a.createElement(Q.Z,{fullWidth:!0,multiline:!0,rowsMax:5,rows:5,value:yt,error:(null==yt?void 0:yt.length)>=pn-5,helperText:(null==yt?void 0:yt.length)>=pn-5?Ce("maxCharacterAllowed",{limit:pn,current:(null==yt?void 0:yt.length)+1}):"",style:{marginTop:30},placeholder:"Specify other reasons",onChange:Vt})),a.createElement(R.Z,null,a.createElement(I.Z,{onClick:Kt,color:"primary"},Ce("cancel","Cancel")),a.createElement(I.Z,{disabled:!yt||we,variant:"contained",onClick:function(){Ae(!0);var e={rejectReason:yt},t="REVERSE_WAIT_CONFIRM"===Re.state?yt:"";(0,q.xe)(atob(Ne),e,t).then((function(e){0===(null==e?void 0:e.resultCode)?(Le((null==e?void 0:e.resultMessage)||"Order rejected."),Pe.push("/home/order/orders/view/".concat(Ne)),it(!1)):(Be(e||"Error accepting order."),it(!1))})).catch((function(e){nt(!1),Be(e)})).finally((function(){return Ae(!1)}))},color:"primary",autoFocus:!0},Ce("reject","Reject")," ",we&&Xt)))))};function fn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function gn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fn(Object(n),!0).forEach((function(t){(0,C.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var En={selectedProducts:[],selectedVariants:[],serialRangeList:{},selectedSerials:[],selectedStock:[],selectedByRange:[],stockRows:[],serials:{},seller:null,products:[],stockQuantity:[],services:{topups:[]},internalOrderId:"",data:{}};const yn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:En,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"product_select":return gn(gn({},e),{},{selectedProducts:t.payload,selectedVariants:En.selectedVariants});case"variant_select":return gn(gn({},e),{},{selectedVariants:t.payload});case"stock_select":return gn(gn({},e),{},{selectedStock:t.payload.ids,stockRows:t.payload.rows});case"stock_range_select":return gn(gn({},e),{},{serialRangeList:t.payload.value,selectedByRange:e.selectedByRange.concat(t.payload.data),selectedSerials:e.selectedSerials.concat(t.payload.serial)});case"remove_range_select":return gn(gn({},e),{},{serialRangeList:t.payload.value,selectedByRange:t.payload.data,selectedSerials:t.payload.serial});case"internal_order_id":return gn(gn({},e),{},{internalOrderId:t.payload});case"box_item_selected":var n=t.payload,a=n.items,r=n.productSKU,l=n.boxId,i=(0,P.cloneDeep)(e.serials);return Object.getOwnPropertyNames(i).includes(r)?i[r][l]=a:i[r]=(0,C.Z)({},l,a),gn(gn({},e),{},{serials:i});case"set_serials":return gn(gn({},e),{},{serials:t.payload});case"product_loaded":return gn(gn({},e),{},{products:t.payload});case"stock_quantity_select":return gn(gn({},e),{},{stockQuantity:t.payload});case"topup_selected":var o=gn(gn({},e.services),{},{topups:t.payload});return gn(gn({},e),{},{services:o});default:return e}};var Sn=n(64659),hn=n(4730);const Zn=function(){function e(t){var n=this,a=t.state;(0,Sn.Z)(this,e),(0,C.Z)(this,"state",void 0),(0,C.Z)(this,"internalOrderId",void 0),(0,C.Z)(this,"replacementItems",void 0),(0,C.Z)(this,"data",void 0),(0,C.Z)(this,"itemsByRange",(function(e){return Object.keys(e).map((function(t){var n=e[t];return Object.keys(n).map((function(n){var a=e[t][n];return{productSku:a.productSKU,quantity:null,reserveType:"RANGE",serials:[],batchIds:[],ranges:[{batchId:a.boxId,startSerial:a.startSerial.toString(),endSerial:a.endSerial.toString()}],seller:{},data:{}}}))})).flat()})),(0,C.Z)(this,"itemsByBatch",(function(e){return e.map((function(e){return{productSku:e.productSKU,quantity:1,reserveType:"BATCH",serials:[],batchIds:[e.boxId],ranges:[],seller:{},data:{}}}))})),(0,C.Z)(this,"itemsBySerial",(function(e){return Object.keys(e).map((function(t){return Object.keys(e[t]).map((function(n){return{productSku:t,quantity:e[t][n].length,reserveType:"SERIAL",serials:e[t][n],batchIds:[],ranges:[],seller:{},data:{}}}))})).flat()})),(0,C.Z)(this,"itemsByQuantity",(function(e){return e.map((function(e){return{productSku:e.productSKU,quantity:parseInt(e.quantity,10),reserveType:e.reserveType,serials:[],batchIds:[],ranges:[],seller:{},data:{}}}))})),(0,C.Z)(this,"getToptups",(function(){return n.state.services.topups.map((function(e){return{productSku:e.productSKU,quantity:1,seller:{},data:{SUBSCRIBERMSISDN:e.SUBSCRIBERMSISDN,accountTypeId:e.accountTypeId,amount:e.amount}}}))})),(0,C.Z)(this,"getSelectedItems",(function(e){return[].concat((0,x.Z)(n.itemsByRange(e.serialRangeList)),(0,x.Z)(n.itemsByBatch(e.stockRows)),(0,x.Z)(n.itemsBySerial(e.serials)),(0,x.Z)(n.itemsByQuantity(e.stockQuantity)),(0,x.Z)(n.getToptups()))})),this.state=a}return(0,hn.Z)(e,[{key:"requestParams",get:function(){return{internalOrderId:this.internalOrderId,replacementItems:this.replacementItems||this.getSelectedItems(this.state)}}}]),e}();var bn=n(91787),In=n(11637),Tn=n(77954),Rn=n(43434),Nn=n(94339),On=n(32552),wn=(0,o.makeStyles)((function(e){return{groupLabel:{fontWeight:"bolder"}}}));const xn=function(e){var t=e.onSelect,n=e.disabled,l=void 0!==n&&n,o=e.dispatch,c=e.searchProductSKUs,s=(0,L.Z)().showWarningMessage,u=(0,a.useState)(),d=(0,i.Z)(u,2),m=d[0],p=d[1],v=wn(),f=(0,b.useTranslation)().t,g={productSKUs:c};(0,a.useEffect)((function(){(0,M.WI)(g).then((function(e){0==e.resultCode?(o({type:"product_loaded",payload:e.productVariants}),p(e.productVariants)):s(e.resultDescription)}))}),[c]);var E=(0,In.D)({stringify:function(e){return e.variant.productSKU+e.product.name+e.product.description}});return r().createElement(Tn.ZP,{id:"combo-box-demo",options:m||[],disableClearable:!0,disabled:l,onChange:function(e,n){t(n.variant)},filterOptions:E,getOptionLabel:function(e){return e.variant.productSKU},renderOption:function(e){return t=e,r().createElement(r().Fragment,null,r().createElement(Nn.Z,{elevation:0,style:{width:"100%"}},r().createElement(On.Z,{avatar:r().createElement(Rn.Z,{src:t.product.imageUrl?t.product.imageUrl:""}),title:"(".concat(t.variant.productSKU,") - ").concat(t.product.name),subheader:t.product.description})));var t},style:{width:350},classes:{groupLabel:v.groupLabel},renderInput:function(e){return r().createElement(Q.Z,(0,me.Z)({},e,{disabled:l,label:f("selectProductSKU"),variant:"outlined"}))}})};var Cn=n(52495),Pn=n(63771),Dn=n(24235),kn=(0,o.makeStyles)((function(e){return{groupLabel:{fontWeight:"bolder"},sectionWrapper:{width:"50%",float:"left",paddingRight:5,paddingLeft:5}}}));const _n=function(e){var t=e.searchProductSKUs,n=e.resellerId,l=(e.disabled,e.dispatch),o=e.state,c=kn(),s=(0,a.useState)(),u=(0,i.Z)(s,2),d=u[0],m=u[1],p=(0,a.useState)("serialised"),v=(0,i.Z)(p,2),f=v[0],g=v[1];return(0,a.useEffect)((function(){}),[d]),r().createElement(r().Fragment,null,r().createElement("section",{className:c.sectionWrapper},t&&r().createElement(xn,{resellerId:null==n?void 0:n.toString(),onSelect:function(e){return function(e){var t=(null==e?void 0:e.productSKU)||null,n=(0,Dn.NO)(o.products,t);m(e),g(n)}(e)},orderType:o.orderType,searchProductSKUs:t,dispatch:l})),"non-serialised"==f||"services-topup"==f?r().createElement(Cn.Z,{resellerId:null==n?void 0:n.toString(),dispatch:l,state:o,selectedProduct:d}):r().createElement(Pn.Z,{resellerId:null==n?void 0:n.toString(),dispatch:l,state:o,selectedProduct:d}))};var Bn=(0,o.makeStyles)((function(e){return(0,o.createStyles)({element:{margin:e.spacing(1)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}})})),Mn=function(e){var t,n=e.dispatch,a=e.state,l=e.searchProductSKUs;return r().createElement(_n,{resellerId:(null==a||null===(t=a.seller)||void 0===t?void 0:t.resellerId)||null,state:a,dispatch:n,searchProductSKUs:l})};const Ln=function(e){var t=e.state,n=e.dispatch,o=e.internalOrderData,c=e.searchProductSKUs,u=(0,L.Z)(),d=u.showSuccessMessage,m=u.showErrorMessage,p=(0,a.useState)(),v=(0,i.Z)(p,2),f=v[0],g=v[1],E=(0,a.useState)(!0),S=(0,i.Z)(E,2),h=S[0],Z=S[1],I=(0,a.useState)([]),T=(0,i.Z)(I,2),R=T[0],N=T[1],O=(0,a.useState)([]),w=(0,i.Z)(O,2),x=w[0],C=w[1],P=(0,a.useState)(!1),D=(0,i.Z)(P,2),k=D[0],_=D[1],B=(0,a.useState)(!1),M=(0,i.Z)(B,2),U=(M[0],M[1]),F=(0,l.useHistory)(),A=(0,b.useTranslation)().t,j=Bn();return r().useEffect((function(){var e,t,n=[];null!=o&&null!==(e=o.internalOrders[0])&&void 0!==e&&e.missingItems&&(null==o||null===(t=o.internalOrders[0])||void 0===t||t.missingItems.map((function(e){e.quantity&&n.push(e)}))),N(n)}),[]),r().useEffect((function(){var e=[];if(t.stockRows.length>0&&t.stockRows.forEach((function(t){var n=e.findIndex((function(e){return e.productSKU===t.productSKU}));-1!==n?e[n].quantity+=t.quantity:e.push({productSKU:t.productSKU,quantity:t.quantity})})),t.selectedByRange.length>0&&t.selectedByRange.forEach((function(t){var n=e.findIndex((function(e){return e.productSKU===t.productSKU}));-1!==n?e[n].quantity+=parseInt(t.quantity):e.push({productSKU:t.productSKU,quantity:parseInt(t.quantity)})})),t.stockQuantity.length>0&&t.stockQuantity.forEach((function(t){var n=e.findIndex((function(e){return e.productSKU===t.productSKU}));-1!==n?e[n].quantity+=parseInt(t.quantity):e.push({productSKU:t.productSKU,quantity:parseInt(t.quantity)})})),t.serials)for(var n=function(){for(var t=(0,i.Z)(r[a],2),n=t[0],l=t[1],o=0,c=Object.entries(l);o<c.length;o++){var s=(0,i.Z)(c[o],2),u=(s[0],s[1]),d=e.findIndex((function(e){return e.productSKU===n}));-1!==d?e[d].quantity+=parseInt(u.length):e.push({productSKU:n,quantity:parseInt(u.length)})}},a=0,r=Object.entries(t.serials);a<r.length;a++)n();if(R.length>0&&e.length>0){var l=0;R.forEach((function(t){var n,a=e.findIndex((function(e){return e.productSKU===t.productSKU}));(null===(n=e[a])||void 0===n?void 0:n.quantity)>=(null==t?void 0:t.quantity)&&(l+=1)})),l===R.length?Z(!1):Z(!0)}e.length<R.length&&Z(!0),C(e)}),[t]),r().createElement(r().Fragment,null,k&&r().createElement(bn.Z,{loading:k,orderMessage:f,handleClose:function(){_(!1),n({type:"reset",payload:null}),F.push("/home/order/orders")}}),r().createElement(y.Z,null,r().createElement(Mn,{dispatch:n,state:t,searchProductSKUs:c}),r().createElement(s.SeamlessButton,{className:j.element,disabled:h,onClick:function(){var e=0;if(R.forEach((function(t){var n,a=x.findIndex((function(e){return e.productSKU===t.productSKU}));(null===(n=x[a])||void 0===n?void 0:n.quantity)>(null==t?void 0:t.quantity)&&(e+=1,m(A("returnProductSkuQuntityError",{productSkuName:t.productSKU,quantity:t.quantity})))})),!(e>0)){_(!0);var n={internalOrders:[function(e){var t=e.internalOrderId,n=new Zn({state:e});return n.internalOrderId=t,n.data={},n.requestParams}(t)]};return U(!0),(0,G.Ig)(n).then((function(e){0===e.resultCode?(d(e),g({message:e.resultMessage,kind:"success"}),U(!1)):(m(e),_(!1))})).catch((function(e){_(!1),m(e)}))}},color:"primary",variant:"contained"},A("submit"))))};var Un=(0,h.Z)((function(e){return(0,Z.Z)({fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{fontSize:14}})}));const Fn=function(e){var t=e.headingProps,n=void 0===t?{xs:12,sm:3}:t,r=e.valueProps,l=void 0===r?{xs:12,sm:3}:r,i=e.title,o=e.value,s=e.key,u=void 0===s?0:s,d=((0,b.useTranslation)().t,Un());return o&&"NULL"!=o&&"Null"!=o?a.createElement(a.Fragment,{key:u},a.createElement(c.Z,(0,me.Z)({item:!0},n),a.createElement($.Z,{className:d.fieldHeading},i)),a.createElement(c.Z,(0,me.Z)({item:!0},l),a.isValidElement(o)?o:a.createElement($.Z,{className:d.fieldValue},o))):null};var An=(0,h.Z)((function(e){return(0,Z.Z)({spacingTop:{marginTop:e.spacing(3)},spacingBottom:{marginBottom:e.spacing(1)},wrapper:{padding:e.spacing(2)},dividerSpacing:{marginBottom:e.spacing(3)},rowSpacing:{marginBottom:e.spacing(.5)},fullWidth:{width:"100%"},displayFlex:{display:"flex"}})})),jn=(0,Qt.Z)((function(e){return(0,Z.Z)({root:{backgroundColor:e.palette.background.default,borderBottom:"1px solid rgba(0, 0, 0, .125)",marginBottom:-1,minHeight:56,"&$expanded":{minHeight:56}},content:{"&$expanded":{margin:0}},expanded:{}})}))(ye.Z);const qn=function(e){var t=e.internalOrderData,n=(e.loading,An()),r=(0,b.useTranslation)().t;return a.createElement(c.Z,{container:!0,className:n.spacingBottom},t&&a.createElement(c.Z,{container:!0,className:(0,m.default)(n.spacingTop,n.spacingBottom)},(null==t?void 0:t.internalOrders)&&(null==t?void 0:t.internalOrders.length)>0&&(null==t?void 0:t.internalOrders.map((function(e,t){return a.createElement(ge.Z,{square:!0,className:n.fullWidth,key:t,expanded:!0},a.createElement(jn,{"aria-controls":"panel1d-content",id:"panel1d-header",expandIcon:a.createElement(Se.Z,null)},a.createElement($.Z,{variant:"subtitle1",color:"primary"},"".concat(r("orderDetailFor")," : ").concat(e.internalOrderId))),a.createElement(Ee.Z,null,a.createElement(c.Z,{className:n.fullWidth},a.createElement(c.Z,{container:!0,spacing:3,className:n.rowSpacing},a.createElement(c.Z,{item:!0,sm:6},a.createElement($.Z,{variant:"subtitle1",color:"primary",className:n.spacingBottom},r("receivedItems")),a.createElement(vt.Z,{className:n.dividerSpacing}),e.receivedItems&&e.receivedItems.length>0&&e.receivedItems.map((function(e,t){return a.createElement(c.Z,{key:t,className:(0,m.default)(n.displayFlex,n.dividerSpacing)},a.createElement(Fn,{title:r("productSKU"),value:e.productSKU}),a.createElement(Fn,{title:r("quantity"),value:e.quantity}))}))),a.createElement(c.Z,{item:!0,sm:6},a.createElement($.Z,{variant:"subtitle1",color:"primary",className:n.spacingBottom},r("missingItems")),a.createElement(vt.Z,{className:n.dividerSpacing}),e.missingItems&&e.missingItems.length>0&&e.missingItems.map((function(e,t){return e.quantity?a.createElement(c.Z,{key:t,className:(0,m.default)(n.displayFlex,n.dividerSpacing)},a.createElement(Fn,{title:r("productSKU"),value:e.productSKU}),a.createElement(Fn,{title:r("quantity"),value:e.quantity})):""})))))))})))))},Wn=function(e){var t=e.orderId,n=(0,L.Z)(),r=n.showErrorMessage,l=n.showWarningMessage,o=a.useState(null),c=(0,i.Z)(o,2),s=c[0],u=c[1],d=a.useState(),m=(0,i.Z)(d,2),p=m[0],v=m[1],f=a.useReducer(yn,En),g=(0,i.Z)(f,2),E=g[0],y=g[1],S=a.useState(!1),h=(0,i.Z)(S,2),Z=h[0],I=h[1],T=((0,b.useTranslation)().t,{internalOrderIds:[t]});return a.useEffect((function(){I(!0),(0,q.gA)(T).then((function(e){if(0==e.resultCode){var n;y({type:"internal_order_id",payload:t}),u(e);var a,r,i=[];null!=e&&null!==(n=e.internalOrders[0])&&void 0!==n&&n.missingItems&&(null==e||null===(a=e.internalOrders[0])||void 0===a||null===(r=a.missingItems)||void 0===r||r.map((function(e){e.quantity&&i.push(e.productSKU)}))),v(i)}else l(e)})).catch((function(e){return r(e)})).finally((function(){return I(!1)}))}),[]),a.createElement(a.Fragment,null,a.createElement(qn,{"data-testid":"order-detail",loading:Z,internalOrderData:s}),Z?a.createElement(ee.Z,null):null,p&&a.createElement(Ln,{dispatch:y,state:E,internalOrderData:s,searchProductSKUs:p}))},Kn=function(){var e=a.useState(!1),t=(0,i.Z)(e,2),n=t[0],r=t[1],o=a.useState(null),c=(0,i.Z)(o,2),u=c[0],d=c[1],m=(0,L.Z)(),p=m.showErrorMessage,v=m.showWarningMessage,f=(0,l.useParams)().orderId,g=(0,b.useTranslation)().t;return a.useEffect((function(){r(!0),(0,q.s$)(atob(f)).then((function(e){0==e.resultCode?d(e):v(e)})).catch((function(e){return p(e)})).finally((function(){return r(!1)}))}),[]),a.createElement(s.SeamlessContainer,{title:g("viewOrderDetailPageTitle"),description:g("viewOrderDetailPageDescription")},a.createElement(vn,{"data-testid":"view-order",loading:n,orderData:u,orderId:f}),n?a.createElement(ee.Z,null):null)},Vn=function(){var e=a.useState(!1),t=(0,i.Z)(e,2),n=t[0],r=(t[1],(0,l.useParams)().orderId),o=(0,b.useTranslation)().t;return a.createElement(s.SeamlessContainer,{title:o("rescheduleDeliveryPageTitle"),description:o("rescheduleDeliveryPageDescription")},a.createElement("div",{style:{height:"calc(90vh - 250px)",width:"100%"}},n?a.createElement(ee.Z,null):null,a.createElement(Wn,{orderId:r})))};var zn=n(61837),Hn=n(74603),Qn=n(21853);function Yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Gn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yn(Object(n),!0).forEach((function(t){(0,C.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jn="",Xn="",$n=(0,o.makeStyles)((function(e){return{inputBox:{display:"inline-flex",flexDirection:"row",alignItems:"center",height:48,paddingLeft:e.spacing(2),width:"100%"},textField:{bottom:-8},input:{marginLeft:e.spacing(1)},iconButton:{padding:e.spacing(1.2)},dropdown:{padding:e.spacing(1.2),color:"grey","&::before":{borderBottom:"none"}},section2:{marginTop:e.spacing(6)},element:{margin:e.spacing(1)},innerTitle:{color:e.palette.grey.A700},spacingTop:{marginTop:e.spacing(1)},spacingBottom:{marginBottom:e.spacing(1)}}}));function ea(e){var t=$n(),n=e.item,r=e.applyValue;return a.createElement("div",{className:t.inputBox},a.createElement(Q.Z,{className:t.inputBox,name:n.field,value:n.value,onChange:function(e){r(Gn(Gn({},n),{},{value:e.target.value}))}}))}const ta=function(){var e=window.config.order.settleInvoiceDealerType||"hq",t=(0,Rt.Z)(),n=$n(),r=(0,L.Z)(),l=r.showSuccessMessage,o=r.showErrorMessage,u=a.useState(!1),d=(0,i.Z)(u,2),p=d[0],v=d[1],f=a.useState(!1),g=(0,i.Z)(f,2),E=g[0],y=g[1],S=a.useState(),h=(0,i.Z)(S,2),Z=h[0],T=h[1],R=a.useState(),N=(0,i.Z)(R,2),O=N[0],w=N[1],x=a.useState(),C=(0,i.Z)(x,2),P=C[0],D=C[1],k=a.useState(""),_=(0,i.Z)(k,2),B=_[0],M=_[1],U=a.useState(""),F=(0,i.Z)(U,2),A=F[0],W=F[1],K=a.useState(0),z=(0,i.Z)(K,2),H=z[0],Q=z[1],Y=a.useState(),G=(0,i.Z)(Y,2),J=G[0],X=G[1],ee=a.useState(10),te=(0,i.Z)(ee,2),ne=te[0],ae=te[1],re=a.useState(1),le=(0,i.Z)(re,2),ie=le[0],oe=le[1],ce=a.useState(10),se=(0,i.Z)(ce,2),de=se[0],me=se[1],pe=a.useState(1),ve=(0,i.Z)(pe,2),fe=ve[0],ge=ve[1],Ee=a.useState(""),ye=(0,i.Z)(Ee,2),Se=ye[0],he=ye[1],Ze=a.useState(""),be=(0,i.Z)(Ze,2),Ie=be[0],Te=be[1],Re=a.useState(""),Ne=(0,i.Z)(Re,2),Oe=Ne[0],we=Ne[1],xe=a.useState(""),Ce=(0,i.Z)(xe,2),Pe=Ce[0],De=Ce[1],ke=a.useState("PENDING"),_e=(0,i.Z)(ke,2),Be=_e[0],Me=(_e[1],a.useState("PARTIAL_PAID")),Le=(0,i.Z)(Me,2),Ue=Le[0],Fe=(Le[1],a.useState("OPEN")),Ae=(0,i.Z)(Fe,2),je=Ae[0],qe=(Ae[1],a.useState("desc")),We=(0,i.Z)(qe,2),Ke=We[0],Ve=We[1],ze=a.useState("createTimestamp"),He=(0,i.Z)(ze,2),Qe=He[0],Ye=He[1],Ge=a.useState("desc"),Je=(0,i.Z)(Ge,2),Xe=Je[0],$e=Je[1],et=a.useState("transactionTime"),tt=(0,i.Z)(et,2),nt=tt[0],at=tt[1],rt=(0,b.useTranslation)().t,lt=At()().checkPermission,it=a.useCallback((function(e){var t,n,a,r;e&&e.filterModel?(Te(null==e||null===(t=e.filterModel)||void 0===t||null===(n=t.items[0])||void 0===n?void 0:n.value),De(null==e||null===(a=e.filterModel)||void 0===a||null===(r=a.items[0])||void 0===r?void 0:r.columnField)):(Te(""),De("")),oe(1)}),[]),ot=a.useCallback((function(e){at(e.sortModel[0].field),$e(e.sortModel[0].sort),oe(1)}),[]);function ct(){if(B){Jn=A||t.requestedPrincipalId;var e="buyer:".concat(B,",seller:").concat(Jn,",status:").concat(je);Ie&&Pe&&(e="buyer:".concat(B,",seller:").concat(Jn,",status:").concat(je,",").concat(Pe,":").concat(Ie));var n={filter:e,page:ie,perPage:ne,sort:"".concat(nt,"_").concat(null==Xe?void 0:Xe.toLowerCase())};y(!0),(0,q._P)(n).then((function(e){if(0!=e.resultCode)o(e.resultMessage),X(null),w(null);else if(e&&e.payments&&e.payments.length>0){var t=[];e.payments.forEach((function(e){t.push(e)})),w(t),X(e.metadata)}else X(null),w(null);y(!1)})).catch((function(e){return y(!1)}))}else X(null),w(null)}a.useEffect((function(){ct()}),[Ie,Pe,Xe,nt,ne,ie]);var st=a.useCallback((function(e){var t,n,a,r;e&&e.filterModel?(he(null==e||null===(t=e.filterModel)||void 0===t||null===(n=t.items[0])||void 0===n?void 0:n.value),we(null==e||null===(a=e.filterModel)||void 0===a||null===(r=a.items[0])||void 0===r?void 0:r.columnField)):(he(""),we("")),ge(1)}),[]),ut=a.useCallback((function(e){Ye(e.sortModel[0].field),Ve(e.sortModel[0].sort),ge(1)}),[]);function dt(){if(B){Jn=A||t.requestedPrincipalId;var e="buyer:".concat(B,",seller:").concat(Jn,",status:").concat(Be,",status:").concat(Ue);Se&&Oe&&(e="buyer:".concat(B,",seller:").concat(Jn,",status:").concat(Be,",status:").concat(Ue,",").concat(Oe,":").concat(Se));var n={filter:e,page:fe,perPage:de,sort:"".concat(Qe,"_").concat(null==Ke?void 0:Ke.toLowerCase())};v(!0),(0,q.sA)(n).then((function(e){if(0!=e.resultCode)o(e.resultMessage),T(null),D(null);else if(e&&e.invoices&&e.invoices.length>0){var t=[];e.invoices.forEach((function(e){t.push(e)})),T(t),D(e.metaData)}else T(null),D(null);v(!1)})).catch((function(e){v(!1)}))}else T(null),D(null)}function mt(){Xn=B,Jn=A,Q(H+1)}a.useEffect((function(){dt()}),[Se,Oe,Ke,Qe,de,fe]);var pt=[{label:"Equal",value:"equal",getApplyFilterFn:function(e){return e.columnField&&e.value&&e.operatorValue?function(t){return t.value==e.value}:null},InputComponent:ea}],vt=[{field:"invoiceId",headerName:rt("invoiceId"),sortable:!0,width:200,filterOperators:pt,filterable:!0},{field:"dueAmount",headerName:rt("amount"),sortable:!0,width:110,filterOperators:pt,filterable:!0},{field:"createTimestamp",headerName:rt("createTimestamp","Create timestamp"),sortable:!0,width:180,type:"date",filterable:!0,filterOperators:pt,renderCell:function(e){return a.createElement(V.Z,{label:e.getValue("invoiceDate")||""})}}];lt(jt.Z.SETTEL_INVOICE_BUTTON)&&vt.push({field:"",headerName:rt("action"),sortable:!1,filterable:!1,width:130,renderCell:function(e){return a.createElement(a.Fragment,null,a.createElement(ue.Z,{size:"small",color:"primary",variant:"text","aria-label":"orders action buttons"},a.createElement(I.Z,{color:"primary",onClick:function(){var n,a,r;return a=null==e||null===(n=e.row)||void 0===n?void 0:n.id,(r={payer:B,payee:A||t.requestedPrincipalId,invoiceIds:[]}).invoiceIds.push(a),v(!0),y(!0),void(0,q.Gl)(r).then((function(e){e&&e.invoices&&(null==e?void 0:e.invoices.length)>0?(l(e),dt(),ct()):o(e),v(!1),y(!1)})).catch((function(e){o(e),v(!1),y(!1)}))}},rt("settle"))))}});var ft=[{field:"paymentId",headerName:rt("paymentId"),sortable:!0,width:200,filterOperators:pt,filterable:!0},{field:"availableAmount",headerName:rt("amount"),sortable:!0,width:110,filterable:!0,filterOperators:pt}];return a.createElement(a.Fragment,null,a.createElement(s.SeamlessContainer,{title:rt("settleInvoice"),description:rt("settleInvoicePageDescription")},a.createElement("section",{style:{background:"#F7F7F7",padding:10,marginBottom:15}},a.createElement(Ut,{buyerId:Xn,sellerId:Jn})),a.createElement(c.Z,{container:!0},a.createElement(c.Z,{container:!0,spacing:3,className:(0,m.default)(n.spacingBottom,n.spacingTop)},a.createElement(c.Z,{item:!0,sm:6,md:4},a.createElement(xt.Z,{className:n.inputBox},a.createElement(Hn.Z,{className:n.input,value:B,onChange:function(e){e.preventDefault(),M(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(Xn=B,Jn=A,B?(dt(),ct()):(w(null),T(null)))},placeholder:rt("buyerId"),fullWidth:!0}),a.createElement(zn.Z,{onClick:function(){mt(),dt(),ct()},type:"submit",disabled:!B,className:n.iconButton,"aria-label":"search"},a.createElement(Qn.Z,null)))),e==t.resellerType&&a.createElement(c.Z,{item:!0,sm:6,md:4},a.createElement(xt.Z,{className:n.inputBox},a.createElement(Hn.Z,{className:n.input,value:A,onChange:function(e){W(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(mt(),B?(dt(),ct()):(w(null),T(null)))},placeholder:rt("sellerId"),fullWidth:!0}),a.createElement(zn.Z,{onClick:function(){mt(),dt(),ct()},type:"submit",disabled:!A,className:n.iconButton,"aria-label":"search"},a.createElement(Qn.Z,null))))),a.createElement(c.Z,{item:!0,xs:12},Z&&Z.length>0&&a.createElement(c.Z,{xs:12},a.createElement($.Z,{variant:"subtitle1",className:(0,m.default)(n.innerTitle,n.spacingBottom)},B&&"List of invoices between ".concat(Jn," and ").concat(B))),a.createElement("div",{style:{display:"flex",flexDirection:"row",height:"calc(90vh - 250px)",width:"100%"}},a.createElement(c.Z,{container:!0,spacing:3},a.createElement(c.Z,{item:!0,xs:12,md:7},a.createElement(j(),{disableDensitySelector:!0,loading:p,columnBuffer:4,columns:vt,rows:Z&&Z.length>0?function(e){var t=e;return 0===t.length?[]:t.map((function(e){var t,n;return{invoiceId:e.invoiceId,dueAmount:(null==e||null===(t=e.dueAmount)||void 0===t?void 0:t.amount)+" "+(null==e||null===(n=e.dueAmount)||void 0===n?void 0:n.currency),invoiceDate:null==e?void 0:e.createTimestamp}}))}(Z):[],getRowId:function(e){return e.invoiceId},pageSize:de,pagination:!0,page:fe-1,onPageSizeChange:function(e){me(e.pageSize)},onPageChange:function(e){ge(e.page+1)},rowCount:(null==P?void 0:P.totalCount)||1,onFilterModelChange:st,filterMode:"server",onSortModelChange:ut,paginationMode:"server",sortingMode:"server"})),a.createElement(c.Z,{item:!0,xs:12,md:4},a.createElement(j(),{disableDensitySelector:!0,loading:E,columnBuffer:4,columns:ft,rows:O&&(null==O?void 0:O.length)>0?function(e){var t=e;return 0===t.length?[]:t.map((function(e){var t,n;return{paymentId:e.paymentId,availableAmount:(null==e||null===(t=e.availableAmount)||void 0===t?void 0:t.amount)+" "+(null==e||null===(n=e.availableAmount)||void 0===n?void 0:n.currency)}}))}(O):[],getRowId:function(e){return e.paymentId},pageSize:ne,pagination:!0,page:ie-1,onPageSizeChange:function(e){ae(e.pageSize)},onPageChange:function(e){oe(e.page+1)},rowCount:(null==J?void 0:J.totalCount)||1,filterMode:"server",onFilterModelChange:it,paginationMode:"server",onSortModelChange:ot,sortingMode:"server"}))))))))};function na(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function aa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?na(Object(n),!0).forEach((function(t){(0,C.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):na(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ra={senderReseller:"",receiverReseller:"",senderAccountType:"",receiverAccountType:"",amount:"",comment:"",currency:"",constrainType:"RESELLERID"},la=ra;const ia=function(){var e=(0,b.useTranslation)().t,t=(0,an.useSelector)((function(e){return e.auth})).user,n=a.useState(ra),r=(0,i.Z)(n,2),l=r[0],o=r[1],c=a.useState(!1),s=(0,i.Z)(c,2),u=(s[0],s[1]),d=(0,L.Z)(),m=d.showErrorMessage,p=d.showSuccessMessage;window.getLang()||window.config.language,a.useEffect((function(){return la=ra,function(){la=ra}}),[]),a.useEffect((function(){la=aa(aa({},la),{},{senderReseller:t.userId}),o(la)}),[t]);var v=a.useCallback((function(t){var n={buyer:{id:t.receiverReseller,idType:t.constrainType,additionalFields:[]},seller:{id:t.senderReseller,idType:t.constrainType,additionalFields:[]},sender:{id:t.senderReseller,idType:t.constrainType,additionalFields:[]},receivers:[{id:t.receiverReseller,idType:t.constrainType,additionalFields:[]}],items:[{productSku:"BALANCE_ADJUSTMENT",quantity:1,data:{amount:t.amount,operationType:"BALANCE_ADJUSTMENT"}}],orderType:"ISO_DST"};u(!0);var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="";for(var n in e)["\\","/",'"'].includes(e[n])||(t+=e[n]);return t}(t.comment);(0,q.MP)(n,a).then((function(t){0===t.resultCode?p(t.resultMessage||e("transferMessage")):m(t)})).catch((function(e){m(e)})).finally((function(){return u(!1)}))}),[]);return a.createElement(bt,{data:l,handleData:function(e){var n,a,r=t.userId,l=t.userId;if("RESELLERMSISDN"===(null==e?void 0:e.constrainType))r=t.targetMSISDN||(null==t||null===(n=t.info)||void 0===n?void 0:n.resellerMSISDN),l=t.targetMSISDN||(null==t||null===(a=t.info)||void 0===a?void 0:a.resellerMSISDN);else if(!["RESELLERID","RESELLERMSISDN"].includes(e.constrainType)){var i,c=null==t||null===(i=t.info)||void 0===i?void 0:i.additionalFields;if(r=(null==t?void 0:t.info)&&t.info[e.constrainType]||"",l=(null==t?void 0:t.info)&&t.info[e.constrainType]||"",(null==c?void 0:c.length)>0){var s=c.find((function(t){return t.name===e.constrainType}));r=s&&s.value||"",l=s&&s.value||""}}"DEBIT"===e.type?(l="",la=aa(aa({},la),{},{senderReseller:r,receiverReseller:l,constrainType:e.constrainType})):(r="",la=aa(aa({},la),{},{receiverReseller:l,senderReseller:r,constrainType:e.constrainType})),o(la)},onFormSubmit:function(e){return v(e)}})},oa=function(){var e=(0,l.useRouteMatch)().path,t=At()().AccessControlled;return a.useEffect((function(){var e=new AbortController;return e.signal,function(){return e.abort()}}),[]),a.createElement(l.Switch,null,a.createElement(l.Route,{path:"".concat(e,"/pending-reversal")},a.createElement(t,{feature:jt.Z.PENDING_REVERSAL_ORDER_LIST},a.createElement(Vt,null))),a.createElement(l.Route,{path:"".concat(e,"/manual-adjustment")},a.createElement(t,{feature:jt.Z.MANUAL_ADJUSTMENT},a.createElement(ia,null))),a.createElement(l.Route,{path:"".concat(e,"/settle-invoice")},a.createElement(t,{feature:jt.Z.SETTLE_INVOICE},a.createElement(ta,null))),a.createElement(l.Route,{path:"".concat(e,"/view/:orderId")},a.createElement(t,{feature:jt.Z.VIEW_ORDER},a.createElement(Kn,null))),a.createElement(l.Route,{path:"".concat(e,"/reschedule-delivery/:orderId")},a.createElement(t,{feature:jt.Z.RESCHEDULE_DELIVERY},a.createElement(Vn,null))),a.createElement(l.Route,{path:"".concat(e,"/:orderType")},a.createElement(t,{feature:jt.Z.RAISE_ORDER},a.createElement(E.K,null,a.createElement(Ht,null)))),a.createElement(l.Route,null,a.createElement(t,{feature:jt.Z.ORDER_LIST},a.createElement(Vt,null))))},ca=function(e){var t=e.disable,n=void 0!==t&&t,r=(0,b.useTranslation)().t;return(0,At()().checkPermission)(jt.Z.CREATE_PRODUCT_QUOTA)?a.createElement(s.SeamlessButton,{component:l.Link,to:"/home/order/product-quota/create",variant:"contained",color:"primary",disabled:n,endIcon:a.createElement(S.Z,null)},r("createProductQuota")):null};var sa=n(64874),ua=n(89058);function da(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ma(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?da(Object(n),!0).forEach((function(t){(0,C.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):da(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pa="1px solid transparent",va="1px solid red",fa=(0,h.Z)((function(e){return(0,Z.Z)({dialogWrapper:{textAlign:"center","& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginBottom:e.spacing(3)},btnSpace:{marginRight:e.spacing(2)},table:{border:0,color:e.palette.common.white,WebkitFontSmoothing:"auto",letterSpacing:"normal","& .MuiDataGrid-columnsContainer":{backgroundColor:e.palette.primary.main,borderRadius:6,color:e.palette.common.white},"& .MuiDataGrid-iconSeparator":{display:"none"},"& .MuiDataGrid-colCell, .MuiDataGrid-cell":{borderRight:"1px solid ".concat("light"===e.palette.type?"#f0f0f0":"#303030")},"& .MuiDataGrid-columnsContainer, .MuiDataGrid-cell":{borderBottom:"1px solid ".concat("light"===e.palette.type?"#f0f0f0":"#303030")},"& .MuiDataGrid-cell":{color:"red"},"& .MuiPaginationItem-root":{borderRadius:0}},spacingTop:{marginTop:e.spacing(3)},form:{display:"flex",flexDirection:"column",flexWrap:"wrap"},element:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},input:{},description:{width:419},button:{},btnSpacing:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},sectionSeparator:{marginTop:e.spacing(3),marginBottom:e.spacing(2),marginLeft:e.spacing(1)},wrapper:{padding:e.spacing(2)},titleSpacing:{marginBottom:e.spacing(1)},subTitleSpacing:{marginBottom:e.spacing(1)},dividerSpacing:{marginBottom:e.spacing(3)},fullWidth:{width:"100%"},minListViewHeight:{minHeight:600},resellerWidget:{padding:"2px 4px",display:"flex",alignItems:"center",justifyContent:"space-between"},dropdown:{padding:10,color:"grey",width:"30%","&::before":{borderBottom:"none"}},resellerSearch:{width:"50%"},iconButton:{padding:10},primaryButton:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,padding:"".concat(e.spacing(1),"px ").concat(e.spacing(3),"px"),borderRadius:e.shape.borderRadius},secondaryButton:{color:e.palette.primary.contrastText,backgroundColor:e.palette.secondary.main,padding:"".concat(e.spacing(1),"px ").concat(e.spacing(3),"px"),borderRadius:e.shape.borderRadius}})})),ga=[{key:"PURCHASE",value:"PURCHASE"},{key:"SELL",value:"SELL"},{key:"RETURN",value:"RETURN"}],Ea=[{isValidNumbers:!1,isValidReseller:!1,isValidSku:!1}],ya=[{isValidNumbers:!0,isValidReseller:!0,isValidSku:!0}],Sa=function(e,t){switch(t.type){case"SKU":return e.map((function(e){return ma(ma({},e),{},{isValidSku:t.Is})}));case"RESELLER":return e.map((function(e){return ma(ma({},e),{},{isValidReseller:t.Is})}));case"NUMBERS":return e.map((function(e){return ma(ma({},e),{},{isValidNumbers:t.Is})}));default:return e}};const ha=function(e){var t,n,r,l=e.data,o=e.onFormSubmit,u=e.edit,d=e.view,p=e.rejectedQoutas,v=a.useState(l),f=(0,i.Z)(v,2),g=f[0],E=f[1],y=a.useState("add"),S=(0,i.Z)(y,2),h=S[0],Z=S[1],T=a.useState(!1),R=(0,i.Z)(T,2),N=R[0],O=R[1],w=a.useState(!1),C=(0,i.Z)(w,2),P=C[0],D=C[1],k=a.useState(0),_=(0,i.Z)(k,2),B=_[0],U=_[1],F=a.useState([]),A=(0,i.Z)(F,2),q=A[0],W=A[1],K=a.useState(!1),V=(0,i.Z)(K,2),Q=V[0],Y=V[1],G=a.useState("resellerId"),J=(0,i.Z)(G,2),X=J[0],ee=J[1],ne=a.useState(),ae=(0,i.Z)(ne,2),re=ae[0],le=ae[1],ie=a.useState(!1),oe=(0,i.Z)(ie,2),ce=oe[0],se=oe[1],de=a.useState(pa),me=(0,i.Z)(de,2),fe=me[0],ge=me[1],Ee=a.useState(pa),ye=(0,i.Z)(Ee,2),Se=ye[0],he=ye[1],Ze=a.useState(!1),be=(0,i.Z)(Ze,2),Ie=be[0],Te=be[1],Re=(0,L.Z)(),Ne=Re.showWarningMessage,Oe=Re.showErrorMessage,we=(Re.showSuccessMessage,a.useReducer(Sa,u?ya:Ea)),xe=(0,i.Z)(we,2),Ce=xe[0],Pe=xe[1],De=a.useState(""),ke=(0,i.Z)(De,2),_e=ke[0],Be=ke[1],Me=(0,b.useTranslation)().t,Le=fa();a.useEffect((function(){p&&0!==p.length&&(W(p),Y(!0))}),[p]);var Ue=pe.Ry().shape({resellerId:pe.Z_(),productSKU:pe.Z_(),quotaFor:pe.Z_(),multipleOf:pe.Rx(),hourlyLimit:pe.Rx(),dailyLimit:pe.Z_(),weeklyLimit:pe.Z_(),monthlyLimit:pe.Z_()}),Fe=(0,ve.TA)({initialValues:l.ruleId?l:g,validationSchema:Ue,onSubmit:function(e){return o&&o(u?ma({},e):q,(function(t){t||We(e)}))},enableReinitialize:!0}),Ae=Fe.values,je=Fe.handleChange,qe=Fe.handleSubmit,We=Fe.handleReset,Ke=Fe.validateForm,Ve=Fe.errors,ze=function(e){e?(se(!0),(0,M.uj)(e).then((function(e){0==e.resultCode?(ge(pa),Pe({type:"SKU",Is:!0})):(ge(va),Pe({type:"SKU",Is:!1})),se(!1)})).catch((function(e){Pe({type:"SKU",Is:!1}),ge(va),Oe(e),se(!1)}))):ge(pa)},He=function(){se(!0),(0,te.EZ)(re,X).then((function(e){var t;null!==(null==e||null===(t=e.resellerInfo)||void 0===t?void 0:t.resellerData)?(he(pa),Pe({type:"RESELLER",Is:!0})):(he(va),Oe(e),Pe({type:"RESELLER",Is:!1})),se(!1)})).catch((function(e){Pe({type:"RESELLER",Is:!1}),he(va),Oe(e),se(!1)}))},Qe=function(){Ae.multipleOf>0&&(Ae.dailyLimit>0||Ae.hourlyLimit>0||Ae.monthlyLimit>0||Ae.weeklyLimit>0)?Pe({type:"NUMBERS",Is:!0}):Pe({type:"NUMBERS",Is:!1})},Ye=function(){q.splice(B,1),W((0,x.Z)(q)),O(!1)},Ge=[{field:"resellerId",headerName:Me("resellerId"),sortable:!0,width:120},{field:"productSKU",headerName:Me("productSKU"),sortable:!0,width:130},{field:"quotaFor",headerName:Me("quotaFor"),sortable:!0,width:115},{field:"multipleOf",headerName:Me("multipleOf"),sortable:!0,width:115},{field:"hourlyLimit",headerName:Me("hourlyLimit"),sortable:!0,width:120},{field:"dailyLimit",headerName:Me("dailyLimit"),sortable:!0,width:120},{field:"weeklyLimit",headerName:Me("weeklyLimit"),sortable:!0,width:120},{field:"monthlyLimit",headerName:Me("monthlyLimit"),sortable:!0,width:120},{field:"actions",headerName:Me("actions"),sortable:!1,renderCell:function(e){return a.createElement("div",null,a.createElement(ue.Z,{size:"small",color:"primary",variant:"text","aria-label":"product quotas action buttons"},a.createElement(I.Z,{onClick:function(){U(e.rowIndex),E(q[+e.rowIndex]),Z("update")}},a.createElement(sa.Z,{fontSize:"small"})),a.createElement(I.Z,{onClick:function(){O(!0),U(e.rowIndex),Be(e.row.resellerId)}},a.createElement(ua.Z,{fontSize:"small",style:{color:"red"}}))),a.createElement(s.SeamlessDialog,{open:N,onClose:function(){O(!1)},className:Le.dialogWrapper,maxWidth:"md",fullWidth:!0},a.createElement(a.Fragment,null,a.createElement("div",{className:Le.modalContentSpacing},a.createElement($.Z,{gutterBottom:!0,id:"transition-modal-title",variant:"h6",className:Le.fontHeavy},Me("deleteProductQuotaConfirmationTitle")),a.createElement($.Z,{id:"transition-modal-description",variant:"body1"},Me("deleteProductQuotaConfirmationText")," ",_e)),a.createElement("div",{className:Le.modalContentSpacing},a.createElement(s.SeamlessButton,{type:"button",variant:"outlined",color:"primary",className:Le.btnSpace,onClick:function(){O(!1)}},Me("noConfirmationButton")),a.createElement(s.SeamlessButton,{type:"button",variant:"contained",color:"primary",onClick:Ye},Me("yesConfirmationButton"))))))},width:120}];return a.useEffect((function(){Object.values(Ce[0]).includes(!1)?Te(!1):Te(!0)}),[Ce]),a.createElement(a.Fragment,null,a.createElement(c.Z,{container:!0,className:Le.spacingTop},a.createElement(c.Z,{container:!0,spacing:3},a.createElement(c.Z,{item:!0,xs:12},a.createElement($.Z,{variant:"subtitle1",color:"primary"},Me("orderProductQuota")))),a.createElement(c.Z,{container:!0,spacing:3,className:Le.spacingTop},a.createElement(c.Z,{item:!0,xs:12,sm:8},a.createElement($.Z,{variant:"body2"},Me("selectReseller")),a.createElement(xt.Z,{className:Le.resellerWidget,style:{border:Se}},a.createElement(H.Z,{className:Le.dropdown,labelId:"demo-simple-select-label",id:"demo-simple-select",value:X,onChange:function(e){ee(e.target.value)}},a.createElement(z.Z,{value:"resellerId"},Me("resellerID","Reseller ID")),a.createElement(z.Z,{value:"msisdn"},null===(t=Me("msisdn","MSISDN"))||void 0===t?void 0:t.toUpperCase())),a.createElement(Hn.Z,{className:(0,m.default)(Le.input,Le.resellerSearch),value:Ae.resellerId,onChange:function(e){e.preventDefault(),je({target:{value:e.target.value,name:"resellerId"}}),le(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&re&&He()},onBlur:He,placeholder:Me("resellerId"===X?"resellerId":"msisdn"),name:"resellerId"}),a.createElement(zn.Z,{type:"submit",disabled:!re,className:Le.iconButton,"aria-label":"search"},a.createElement(Qn.Z,null))))),a.createElement(c.Z,{container:!0,spacing:3},a.createElement(c.Z,{item:!0,xs:12,sm:4},a.createElement(s.SeamlessInput,{required:!0,error:!!Ve.productSKU,className:(0,m.default)(Le.element,Le.input),style:{height:38,borderRadius:8,border:fe},name:"productSKU",value:null===(n=Ae.productSKU)||void 0===n?void 0:n.toString(),onChange:function(e){var t;return je({target:{value:null===(t=e.target.value)||void 0===t?void 0:t.toString(),name:"productSKU"}})},onKeyDown:function(e){var t,n,a;return n=e,a=null===(t=Ae.productSKU)||void 0===t?void 0:t.toString(),void("Enter"===n.key&&a&&ze(a))},onBlur:function(e){var t;ze(null===(t=Ae.productSKU)||void 0===t?void 0:t.toString())},label:Me("productSKU"),disabled:d,fullWidth:!0})),a.createElement(c.Z,{item:!0,xs:12,sm:4},a.createElement(s.SeamlessInput,{error:!!Ve.multipleOf,className:(0,m.default)(Le.element,Le.input),name:"multipleOf",value:Ae.multipleOf,type:"number",onChange:je,onBlur:Qe,label:Me("multipleOf"),disabled:d,fullWidth:!0}))),a.createElement(c.Z,{container:!0,spacing:3},a.createElement(c.Z,{item:!0,xs:12,sm:4},a.createElement(s.SeamlessDropDown,{id:"quota-for-drop-down",className:(0,m.default)(Le.element),label:Me("quotaFor"),name:"quotaFor",options:ga.map((function(e){return{value:e.value,key:e.key}})),value:null===(r=Ae.quotaFor)||void 0===r?void 0:r.toString(),onChange:function(e){return je({target:{value:e.target.value,name:"quotaFor"}})},disabled:d,fullWidth:!0}))),a.createElement(c.Z,{container:!0,spacing:3,className:Le.spacingTop},a.createElement(c.Z,{item:!0,xs:12},a.createElement($.Z,{variant:"subtitle1",color:"primary"},Me("limitConfigurations")))),a.createElement(c.Z,{container:!0,spacing:3},a.createElement(c.Z,{item:!0,xs:12,sm:4},a.createElement(s.SeamlessInput,{error:!!Ve.hourlyLimit,className:(0,m.default)(Le.element,Le.input),name:"hourlyLimit",value:Ae.hourlyLimit,type:"number",onChange:je,onBlur:Qe,label:Me("hourlyLimit"),disabled:d,fullWidth:!0})),a.createElement(c.Z,{item:!0,xs:12,sm:4},a.createElement(s.SeamlessInput,{error:!!Ve.dailyLimit,className:(0,m.default)(Le.element,Le.input),name:"dailyLimit",value:Ae.dailyLimit,type:"number",onChange:je,onBlur:Qe,label:Me("dailyLimit"),disabled:d,fullWidth:!0}))),a.createElement(c.Z,{container:!0,spacing:3},a.createElement(c.Z,{item:!0,xs:12,sm:4},a.createElement(s.SeamlessInput,{error:!!Ve.weeklyLimit,className:(0,m.default)(Le.element,Le.input),name:"weeklyLimit",value:Ae.weeklyLimit,onChange:je,onBlur:Qe,label:Me("weeklyLimit"),disabled:d,fullWidth:!0})),a.createElement(c.Z,{item:!0,xs:12,sm:4},a.createElement(s.SeamlessInput,{error:!!Ve.monthlyLimit,className:(0,m.default)(Le.element,Le.input),name:"monthlyLimit",value:Ae.monthlyLimit,type:"number",onChange:je,onBlur:Qe,label:Me("monthlyLimit"),disabled:d,fullWidth:!0}))),a.createElement(c.Z,{container:!0,spacing:3},!d&&a.createElement(c.Z,{item:!0,xs:12,sm:8},a.createElement(s.SeamlessButton,{disabled:!Ie,onClick:u?function(){Ke().then((function(e){var t=Object.values(e);t.length>0?Ne(t[0]):qe()}))}:function(){if(""!==Ae.resellerId){if("update"===h){var e=(0,x.Z)(q),t=[];q.map((function(e){e.resellerId!==Ae.resellerId||e.productSKU!==Ae.productSKU||e.quotaFor!==Ae.quotaFor||t.push(1)})),t.length>0?(Oe({resultMessage:Me("productQoutaIsAlreadyAdded")}),E(Ae)):(e.splice(B,1,Ae),W(e),E(l),Z("add"))}else if("add"===h){var n=(0,x.Z)(q),a=[];Ae.ruleId=q.length+1,0!==q.length&&q.map((function(e){e.resellerId!==Ae.resellerId||e.productSKU!==Ae.productSKU||e.quotaFor!==Ae.quotaFor||a.push(1)})),a.length>0?(Oe({resultMessage:Me("productQoutaIsAlreadyAdded")}),E(Ae)):(n.push(Ae),W(n),E(l)),We(l)}}else Oe({resultMessage:Me("resellerIdCanNotBeBlank")})},className:Le.primaryButton,color:"primary",variant:"contained"},Me(u?"updateButton":h)),a.createElement(s.SeamlessButton,{onClick:function(){We(l)},className:(0,m.default)(Le.btnSpacing,Le.secondaryButton),color:"primary",variant:"outlined"},Me("resetButton"))))),a.createElement("br",null),u?null:a.createElement(a.Fragment,null,a.createElement("div",{style:{height:"calc(90vh - 200px)",width:"100%"}},Q?a.createElement(j(),{className:Le.table,checkboxSelection:!1,disableColumnFilter:!0,disableColumnSelector:!0,disableDensitySelector:!0,loading:ce,columnBuffer:4,rows:q,getRowId:function(e){return e.ruleId},columns:Ge}):a.createElement(j(),{disableColumnFilter:!0,disableColumnSelector:!0,disableDensitySelector:!0,checkboxSelection:!1,loading:ce,columnBuffer:4,rows:q,getRowId:function(e){return e.ruleId},columns:Ge})),0!=q.length?a.createElement(c.Z,{container:!0,spacing:3},!d&&a.createElement(c.Z,{item:!0,xs:12,sm:8},a.createElement(s.SeamlessButton,{onClick:function(){Ke().then((function(e){var t=Object.values(e);t.length>0?Ne(t[0]):qe()}))},className:Le.primaryButton,color:"primary",variant:"contained"},Me(u?"updateButton":"submitButton")),a.createElement(s.SeamlessButton,{onClick:function(){D(!0)},className:(0,m.default)(Le.btnSpacing,Le.secondaryButton),color:"secondary",variant:"contained"},Me("cancel"))),a.createElement(s.SeamlessDialog,{open:P,onClose:function(){D(!1)},className:Le.dialogWrapper,maxWidth:"md",fullWidth:!0},a.createElement(a.Fragment,null,a.createElement("div",{className:Le.modalContentSpacing},a.createElement($.Z,{gutterBottom:!0,id:"transition-modal-title",variant:"h6",className:Le.fontHeavy},Me("deleteAllProductQuotaConfirmationTitle")),a.createElement($.Z,{id:"transition-modal-description",variant:"body1"},Me("deleteAllProductQuotaConfirmationText"))),a.createElement("div",{className:Le.modalContentSpacing},a.createElement(s.SeamlessButton,{type:"button",variant:"outlined",color:"primary",className:Le.btnSpace,onClick:function(){D(!1)}},Me("noConfirmationButton")),a.createElement(s.SeamlessButton,{type:"button",variant:"contained",color:"primary",onClick:function(){E(l),W([]),We(l)}},Me("yesConfirmationButton")))))):null))};var Za=(0,h.Z)((function(e){return(0,Z.Z)({spacingTop:{marginTop:e.spacing(3)},spacingBottom:{marginBottom:e.spacing(1)},wrapper:{padding:e.spacing(2)},titleSpacing:{marginBottom:e.spacing(1)},subTitleSpacing:{marginBottom:e.spacing(1)},dividerSpacing:{marginBottom:e.spacing(3)},fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{textTransform:"capitalize",fontSize:14},rowSpacing:{marginBottom:e.spacing(.5)}})}));const ba=function(e){var t=e.data,n=e.onFormSubmit,r=(e.edit,e.view,Za()),l=(0,ve.TA)({initialValues:t,onSubmit:function(e){return n&&n(e)},enableReinitialize:!0}).values,i=(0,b.useTranslation)().t;return a.createElement(c.Z,{container:!0},a.createElement(c.Z,{container:!0,spacing:3,className:r.spacingBottom},a.createElement(c.Z,{item:!0,xs:12},a.createElement($.Z,{variant:"subtitle1",color:"primary"},i("orderProductQuota")))),a.createElement(c.Z,{container:!0,spacing:3,className:r.rowSpacing},a.createElement(c.Z,{item:!0,xs:12,sm:4},a.createElement($.Z,{className:r.fieldHeading},i("resellerId"))),a.createElement(c.Z,{item:!0,xs:12,sm:4},a.createElement($.Z,{className:r.fieldValue},l.resellerId))),a.createElement(c.Z,{container:!0,spacing:3,className:r.rowSpacing},a.createElement(c.Z,{item:!0,xs:12,sm:4},a.createElement($.Z,{className:r.fieldHeading},i("productSKU"))),a.createElement(c.Z,{item:!0,xs:12,sm:4},a.createElement($.Z,{className:r.fieldValue},l.productSKU))),a.createElement(c.Z,{container:!0,spacing:3,className:r.rowSpacing},a.createElement(c.Z,{item:!0,xs:12,sm:4},a.createElement($.Z,{className:r.fieldHeading},i("quotaFor"))),a.createElement(c.Z,{item:!0,xs:12,sm:4},a.createElement($.Z,{className:r.fieldValue},l.quotaFor))),a.createElement(c.Z,{container:!0,spacing:3,className:r.rowSpacing},a.createElement(c.Z,{item:!0,xs:12,sm:4},a.createElement($.Z,{className:r.fieldHeading},i("multipleOf"))),a.createElement(c.Z,{item:!0,xs:12,sm:4},a.createElement($.Z,{className:r.fieldValue},l.multipleOf))),a.createElement(c.Z,{container:!0,spacing:3,className:(0,m.default)(r.spacingTop,r.spacingBottom)},a.createElement(c.Z,{item:!0,xs:12},a.createElement($.Z,{variant:"subtitle1",color:"primary"},i("limitConfigurations")))),a.createElement(c.Z,{container:!0,spacing:3,className:r.rowSpacing},a.createElement(c.Z,{item:!0,xs:12,sm:4},a.createElement($.Z,{className:r.fieldHeading},i("hourlyLimit"))),a.createElement(c.Z,{item:!0,xs:12,sm:4},a.createElement($.Z,{className:r.fieldValue},l.hourlyLimit))),a.createElement(c.Z,{container:!0,spacing:3,className:r.rowSpacing},a.createElement(c.Z,{item:!0,xs:12,sm:4},a.createElement($.Z,{className:r.fieldHeading},i("dailyLimit"))),a.createElement(c.Z,{item:!0,xs:12,sm:4},a.createElement($.Z,{className:r.fieldValue},l.dailyLimit))),a.createElement(c.Z,{container:!0,spacing:3,className:r.rowSpacing},a.createElement(c.Z,{item:!0,xs:12,sm:4},a.createElement($.Z,{className:r.fieldHeading},i("weeklyLimit"))),a.createElement(c.Z,{item:!0,xs:12,sm:4},a.createElement($.Z,{className:r.fieldValue},l.weeklyLimit))),a.createElement(c.Z,{container:!0,spacing:3,className:r.rowSpacing},a.createElement(c.Z,{item:!0,xs:12,sm:4},a.createElement($.Z,{className:r.fieldHeading},i("monthlyLimit"))),a.createElement(c.Z,{item:!0,xs:12,sm:4},a.createElement($.Z,{className:r.fieldValue},l.monthlyLimit))),a.createElement(c.Z,{container:!0,spacing:3,className:(0,m.default)(r.spacingTop,r.spacingBottom)},a.createElement(c.Z,{item:!0,xs:12},a.createElement($.Z,{variant:"subtitle1",color:"primary"},i("timestamps")))),a.createElement(c.Z,{container:!0,spacing:3,className:r.rowSpacing},a.createElement(c.Z,{item:!0,xs:12,sm:4},a.createElement($.Z,{className:r.fieldHeading},i("createTimestamp"))),a.createElement(c.Z,{item:!0,xs:12,sm:4},a.createElement($.Z,{className:r.fieldValue},l.createTimestamp))),a.createElement(c.Z,{container:!0,spacing:3,className:r.rowSpacing},a.createElement(c.Z,{item:!0,xs:12,sm:4},a.createElement($.Z,{className:r.fieldHeading},i("updatedAt"))),a.createElement(c.Z,{item:!0,xs:12,sm:4},a.createElement($.Z,{className:r.fieldValue},l.updateTimestamp))))};var Ia={resellerId:"",productSKU:"",quotaFor:"PURCHASE",multipleOf:0,hourlyLimit:0,dailyLimit:0,weeklyLimit:0,monthlyLimit:0};const Ta=function(){var e=a.useState(!1),t=(0,i.Z)(e,2),n=t[0],r=t[1],o=(0,L.Z)(),c=o.showErrorMessage,u=o.showSuccessMessage,d=o.showWarningMessage,m=a.useState([]),p=(0,i.Z)(m,2),v=p[0],f=p[1],g=(0,b.useTranslation)().t,E=(0,l.useHistory)(),y=[];return a.createElement(s.SeamlessContainer,{title:g("createProductQuotaPageTitle"),description:g("createProductQuotaPageDescription")},a.createElement(ha,{"data-testid":"create-product-quota",data:Ia,onFormSubmit:function(e,t){return function(e,t){r(!0),y.length=0;var n=e.map(function(){var e=(0,dt.Z)(pt().mark((function e(n){return pt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.productSKU=[n.productSKU+""],n.quotaFor=[n.quotaFor+""],e.abrupt("return",(0,q.q3)(n).then((function(e){0==e.resultCode?u(e):(d(e.resultMessage),t&&t(e))})).catch((function(e){y.push(n),c(e),t&&t(e)})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());Promise.all(n).then((function(){0===y.length&&E.push("/home/order/product-quota"),f(y)})),r(!1)}(e,t)},rejectedQoutas:v}),n?a.createElement(ee.Z,null):null)};var Ra={resellerId:"",productSKU:"",quotaFor:"",multipleOf:0,hourlyLimit:0,dailyLimit:0,weeklyLimit:0,monthlyLimit:0};const Na=function(){var e=(0,L.Z)(),t=e.showErrorMessage,n=e.showSuccessMessage,r=e.showWarningMessage,o=a.useState(!1),c=(0,i.Z)(o,2),u=c[0],d=c[1],m=(0,l.useParams)().id,p=(0,b.useTranslation)().t,v=(0,l.useHistory)(),f=a.useState(Ra),g=(0,i.Z)(f,2),E=g[0],y=g[1];a.useEffect((function(){(0,q.yz)(atob(m)).then((function(e){return y(e.orderProductQuotaRule)}))}),[]);var S=a.useCallback((function(e){d(!0),(0,q.Yx)(atob(m),e).then((function(e){0==e.resultCode?(n(e),v.push("/home/order/product-quota")):r(e)})).catch((function(e){return t(e)})).finally((function(){return d(!1)}))}),[]);return a.createElement(s.SeamlessContainer,{title:p("editProductQuotaPageTitle"),description:p("editProductQuotaPageDescription")},a.createElement(ha,{"data-testid":"edit-product-quota",edit:!0,data:E,onFormSubmit:function(e){return S(e)}}),u?a.createElement(ee.Z,null):null)};var Oa={resellerId:"",productSKU:"",quotaFor:"",multipleOf:0,hourlyLimit:0,dailyLimit:0,weeklyLimit:0,monthlyLimit:0};const wa=function(){var e=a.useState(!1),t=(0,i.Z)(e,2),n=t[0],r=(t[1],(0,l.useParams)().id),o=(0,b.useTranslation)().t,c=a.useState(Oa),u=(0,i.Z)(c,2),d=u[0],m=u[1];return a.useEffect((function(){(0,q.yz)(atob(r)).then((function(e){return m(e.orderProductQuotaRule)}))}),[]),a.createElement(s.SeamlessContainer,{title:o("viewProductQuotaPageTitle"),description:o("viewProductQuotaPageDescription")},a.createElement(ba,{"data-testid":"view-product-quota",view:!0,data:d}),n?a.createElement(ee.Z,null):null)};var xa=n(55238),Ca=n(66054),Pa=(0,h.Z)((function(e){return(0,Z.Z)({dialogWrapper:{textAlign:"center","& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginBottom:e.spacing(3)},btnSpace:{marginRight:e.spacing(2)}})}));const Da=function(e){var t=e.loading,n=e.productQuotas,r=((0,xa.Z)(e,["loading","productQuotas"]),a.useState(!1)),o=(0,i.Z)(r,2),c=o[0],u=o[1],d=a.useState(0),m=(0,i.Z)(d,2),p=m[0],v=m[1],f=a.useState({}),g=(0,i.Z)(f,2),E=(g[0],g[1],(0,L.Z)()),y=E.showErrorMessage,S=E.showSuccessMessage,h=E.showWarningMessage,Z=At()().checkPermission,T=(0,b.useTranslation)().t,R=(0,l.useHistory)(),N=Pa(),O=function(){(0,q.Xk)(p).then((function(e){u(!1),0==e.resultCode?(S(e),R.push("/home/order/product-quota")):h(e)})).catch((function(e){return y(e)}))},w=function(){u(!1)},x=[{field:"resellerId",headerName:T("resellerId"),sortable:!0,width:130},{field:"productSKU",headerName:T("productSKU"),sortable:!0,width:140},{field:"quotaFor",headerName:T("quotaFor"),sortable:!0,width:120},{field:"multipleOf",headerName:T("multipleOf"),sortable:!0,width:140},{field:"hourlyLimit",headerName:T("hourlyLimit"),sortable:!0,width:140},{field:"dailyLimit",headerName:T("dailyLimit"),sortable:!0,width:140},{field:"weeklyLimit",headerName:T("weeklyLimit"),sortable:!0,width:140},{field:"monthlyLimit",headerName:T("monthlyLimit"),sortable:!0,width:140},{field:"createTimestamp",headerName:T("createTimestamp"),sortable:!0,width:160},{field:"actions",headerName:T("actions"),sortable:!1,renderCell:function(e){return a.createElement("div",null,a.createElement(ue.Z,{size:"small",color:"primary",variant:"text","aria-label":"product quotas action buttons"},a.createElement(I.Z,{color:"primary",component:l.Link,to:"/home/order/product-quota/view/"+btoa(String(e.getValue("id")))},a.createElement(se.Z,{fontSize:"small"})),Z(jt.Z.EDIT_PRODUCT_QUOTA)&&a.createElement(I.Z,{component:l.Link,to:"/home/order/product-quota/edit/"+btoa(String(e.getValue("id")))},a.createElement(sa.Z,{fontSize:"small"})),Z(jt.Z.DELETE_PRODUCT_QUOTA)&&a.createElement(I.Z,{onClick:function(){u(!0),v(e.getValue("id"))}},a.createElement(ua.Z,{fontSize:"small",style:{color:Ca.Z[400]}}))),a.createElement(s.SeamlessDialog,{open:c,onClose:w,className:N.dialogWrapper,maxWidth:"md",fullWidth:!0},a.createElement(a.Fragment,null,a.createElement("div",{className:N.modalContentSpacing},a.createElement($.Z,{gutterBottom:!0,id:"transition-modal-title",variant:"h6",className:N.fontHeavy},T("deleteProductQuotaConfirmationTitle"),": ",p),a.createElement($.Z,{id:"transition-modal-description",variant:"body1"},T("deleteProductQuotaConfirmationText")," ",p)),a.createElement("div",{className:N.modalContentSpacing},a.createElement(s.SeamlessButton,{type:"button",variant:"outlined",color:"primary",className:N.btnSpace,onClick:w},T("noConfirmationButton")),a.createElement(s.SeamlessButton,{type:"button",variant:"contained",color:"primary",onClick:O},T("yesConfirmationButton"))))))},width:140}];return a.createElement(j(),{disableDensitySelector:!0,loading:t,columnBuffer:4,rows:n,getRowId:function(e){return e.ruleId},columns:x,checkboxSelection:!0})},ka=function(e){var t=e.children,n=a.useState([]),r=(0,i.Z)(n,2),l=r[0],o=r[1],c=a.useState(!1),s=(0,i.Z)(c,2),u=s[0],d=s[1],m=(0,L.Z)().showErrorMessage;return a.useEffect((function(){d(!0),(0,q.Kk)().then((function(e){return o(e.orderProductQuotaRules)})).catch((function(e){return m(e)})).finally((function(){return d(!1)}))}),[]),a.createElement(a.Fragment,null,t({productQuotas:l,loading:u}))},_a=function(){return a.createElement(ka,null,(function(e){var t=e.productQuotas,n=e.loading;return a.createElement(Da,{productQuotas:t,loading:n})}))},Ba=function(){var e=(0,b.useTranslation)().t,t=a.useState(!1),n=(0,i.Z)(t,2),r=n[0];return n[1],a.createElement(s.SeamlessContainer,{title:e("viewAllProductQuotaPageTitle"),description:e("viewAllProductQuotaPageDescription")},a.createElement(y.Z,{display:"flex",flexDirection:"row",justifyContent:"flex-end"},a.createElement(ca,null)),a.createElement("div",{style:{height:"calc(90vh - 250px)",width:"100%"}},r?a.createElement(ee.Z,null):null,a.createElement(_a,null)))},Ma=function(){var e=(0,l.useRouteMatch)().path,t=At()().AccessControlled;return a.createElement(l.Switch,null,a.createElement(l.Route,{path:"".concat(e,"/create")},a.createElement(t,{feature:jt.Z.CREATE_PRODUCT_QUOTA},a.createElement(Ta,null))),a.createElement(l.Route,{path:"".concat(e,"/edit/:id")},a.createElement(t,{feature:jt.Z.EDIT_PRODUCT_QUOTA},a.createElement(Na,null))),a.createElement(l.Route,{path:"".concat(e,"/view/:id")},a.createElement(t,{feature:jt.Z.VIEW_PRODUCT_QUOTA},a.createElement(wa,null))),a.createElement(l.Route,null,a.createElement(t,{feature:jt.Z.VIEW_PRODUCT_QUOTA},a.createElement(Ba,null))))},La=function(){var e=(0,l.useRouteMatch)().path;return a.createElement(l.Switch,null,a.createElement(l.Route,{path:"".concat(e,"/orders"),component:oa}),a.createElement(l.Route,{path:"".concat(e,"/product-quota"),component:Ma}),a.createElement(l.Route,{path:"".concat(e,"/barcode"),component:g}),a.createElement(l.Redirect,{to:"".concat(e,"/orders")}))}},98480:(e,t,n)=>{"use strict";var a;n.d(t,{dk:()=>i,yM:()=>o,v7:()=>c,Ge:()=>s});var r=window.config,l=(null==r||null===(a=r.extraColumnConfigurations)||void 0===a?void 0:a.order)||[],i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"v1",a="".concat(r.protocol,"://").concat(r.server,":").concat(r.port,"/api"),l="".concat(a,"/osm/").concat(n,"/resource/").concat(e,"/").concat(t);return new URL(l).toString()},o=function(){var e=l,t=[],n=[],a=[],r=[],i={};if((null==e?void 0:e.length)>0)for(var o in e){var c=e[o],s=Object.keys(c)[0];i[s]=null==c?void 0:c.index,"show"!==c[s]&&!0!==(null==c?void 0:c.searchable)||n.push(s),"hide"===c[s]&&t.push(s),!0===(null==c?void 0:c.searchable)&&("show"!==c[s]&&r.push(s),a.push(s))}return{columnsToAppend:n,columnsToHide:t,columnsToSearch:a,columnsSearchOnly:r,columnSortIndex:i}},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return 0===e.length?[]:e.map((function(e){var n,a,r,l,i,o,c,s,u,d,m={orderId:e.orderId,orderType:e.orderType,buyerId:(null==e||null===(n=e.buyer)||void 0===n?void 0:n.id)||"",sellerId:(null==e||null===(a=e.seller)||void 0===a?void 0:a.id)||"",receiverId:(null==e||null===(r=e.receiver)||void 0===r?void 0:r.id)||"",senderId:(null==e||null===(l=e.sender)||void 0===l?void 0:l.id)||"",paymentMode:e.paymentMode,state:e.state,createTimestamp:e.createTimestamp,canConfirm:e.canConfirm,canReject:e.canReject,sellerMSISDN:null===(i=e.seller)||void 0===i?void 0:i.msisdn,senderMSISDN:null===(o=e.sender)||void 0===o?void 0:o.msisdn,receiverMSISDN:null===(c=e.receiver)||void 0===c?void 0:c.msisdn,buyerMSISDN:null===(s=e.buyer)||void 0===s?void 0:s.msisdn,canPaymentConfirm:e.canPaymentConfirm,externalReference:e.externalReference};return t.includes("auth_code")&&(null===(u=e.additionalFields)||void 0===u?void 0:u.length)>0&&(m.auth_code=null===(d=e.additionalFields.find((function(e){return"auth_code"===e.name})))||void 0===d?void 0:d.value),m}))},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return 0===e.length?[]:e.map((function(e,t){var n,a,r,l,i,o,c,s,u,d=(null===(n=e["oms.receivers"])||void 0===n||null===(a=n[0])||void 0===a?void 0:a.id)||"",m=(null===(r=e["oms.receivers"])||void 0===r||null===(l=r[0])||void 0===l?void 0:l.msisdn)||"",p="";return"ISO"===e["oms.orderType"]&&(m=(null===(o=e["oms.receivers"])||void 0===o||null===(c=o[0])||void 0===c||null===(s=c.omsFields)||void 0===s?void 0:s.SUBSCRIBERMSISDN)||""),(null===(i=e["oms.items"])||void 0===i?void 0:i.length)>0&&(p=null===(u=e["oms.items"].map((function(e){return e.data.SUBSCRIBERMSISDN})))||void 0===u?void 0:u.join(",")),{index:"".concat(e["oms.orderId"],"-").concat(t),orderId:e["oms.orderId"],orderType:e["oms.orderType"],buyerId:e["oms.buyer.id"]||"",sellerId:e["oms.seller.id"]||"",receiverId:d,senderId:e["oms.sender.id"]||"",paymentMode:e["oms.paymentMode"],state:e["oms.orderStatus"],createTimestamp:e.timestamp,canConfirm:!1,canReject:!1,sellerMSISDN:e["oms.seller.msisdn"],senderMSISDN:e["oms.sender.msisdn"],receiverMSISDN:m,servedMSISDN:p,buyerMSISDN:e["oms.buyer.msisdn"],canPaymentConfirm:!1,externalReference:e.transactionNumber,auth_code:e["oms.additionalFields"].auth_code}}))}},37033:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const a={VIEW_ORDER:"VIEW_ORDER",RAISE_ORDER:"RAISE_ORDER",RAISE_ORDER_BUTTON:"RAISE_ORDER_BUTTON",SETTEL_INVOICE_BUTTON:"SETTEL_INVOICE_BUTTON",ORDER_LIST:"ORDER_LIST",PENDING_REVERSAL_ORDER_LIST:"PENDING_REVERSAL_ORDER_LIST",ORDER_REVERSAL:"ORDER_REVERSAL",APPROVE_ORDER_REVERSAL:"APPROVE_ORDER_REVERSAL",REJECT_ORDER_REVERSAL:"REJECT_ORDER_REVERSAL",SETTLE_INVOICE:"SETTLE_INVOICE",MANUAL_ADJUSTMENT:"MANUAL_ADJUSTMENT",CREATE_PRODUCT_QUOTA:"CREATE_PRODUCT_QUOTA",VIEW_PRODUCT_QUOTA:"VIEW_PRODUCT_QUOTA",EDIT_PRODUCT_QUOTA:"EDIT_PRODUCT_QUOTA",DELETE_PRODUCT_QUOTA:"DELETE_PRODUCT_QUOTA",RESCHEDULE_DELIVERY:"RESCHEDULE_DELIVERY",DOWNLOAD_MASS_VOUCHER:"DOWNLOAD_MASS_VOUCHER",SCAN_BOX:"SCAN_BOX"}},19985:(e,t,n)=>{"use strict";n.d(t,{Er:()=>r,N0:()=>l,WR:()=>i});var a=n(11746),r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=":",n=Object.keys(e);return n.reduce((function(){var n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0;return e[r]?"".concat(a?"".concat(a.trim(),","):"").concat(r).concat(t).concat(null===(n=e[r])||void 0===n?void 0:n.trim()):a.trim()}),"")},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e),n=[];return t.forEach((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e[t]?Array.isArray(e[t])?n.push.apply(n,(0,a.Z)(e[t].map((function(e){return"".concat(t,":").concat(e.trim())})))):n.push("".concat(t,":").concat(e[t].trim())):n.push(t)})),n.join(",")},i=function(e){if(!e)return null;var t=e.replace(/([a-z])([A-Z])/g,"$1 $2");return(t=t.split("_").join(" "))&&t[0].toUpperCase()+t.slice(1)}},23664:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var a=n(13248),r=n(63135);const l=function(){var e=(0,a.useSnackbar)().enqueueSnackbar,t=(0,r.useTranslation)().t;function n(e){var n=t("anErrorOccurred");return["resultMessage","message","resultDescription"].forEach((function(t){e.hasOwnProperty(t)&&(n=e[t])})),n}return{showSuccessMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"success"})},showErrorMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"error"})},showInfoMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"info"})},showWarningMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"warning"})}}}},39489:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var a=n(82609),r=n.n(a)()((function(e){return e[1]}));r.push([e.id,"input[type=number]::-webkit-inner-spin-button, \ninput[type=number]::-webkit-outer-spin-button { \n    -webkit-appearance: none;\n    -moz-appearance: none;\n    appearance: none;\n    margin: 0; \n}\n\ninput[type=number]::-webkit-outer-spin-button,\ninput[type=number]::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n}\n\ninput[type=number] {\n    -moz-appearance:textfield;\n}",""]);const l=r},12173:(e,t,n)=>{var a={"./":[12842,9],"./IPO":[70779,9,8171,8052,3822,9e3,2037,3268,2195,8240,3432,4409,7757,4554,9960,779],"./IPO/":[70779,9,8171,8052,3822,9e3,2037,3268,2195,8240,3432,4409,7757,4554,9960,779],"./IPO/helper":[99960,9,3822,9960],"./IPO/helper.ts":[99960,9,3822,9960],"./IPO/index":[70779,9,8171,8052,3822,9e3,2037,3268,2195,8240,3432,4409,7757,4554,9960,779],"./IPO/index.tsx":[70779,9,8171,8052,3822,9e3,2037,3268,2195,8240,3432,4409,7757,4554,9960,779],"./IPO_D":[96757,9,8171,3822,9e3,2037,3268,2195,3432,4409,8004,9290,6757],"./IPO_D/":[96757,9,8171,3822,9e3,2037,3268,2195,3432,4409,8004,9290,6757],"./IPO_D/helper":[69290,9,3822,9290],"./IPO_D/helper.ts":[69290,9,3822,9290],"./IPO_D/index":[96757,9,8171,3822,9e3,2037,3268,2195,3432,4409,8004,9290,6757],"./IPO_D/index.tsx":[96757,9,8171,3822,9e3,2037,3268,2195,3432,4409,8004,9290,6757],"./IPO_ST":[63117,9,8171,8052,3822,9e3,2037,3268,2195,8240,3432,4651,3117],"./IPO_ST/":[63117,9,8171,8052,3822,9e3,2037,3268,2195,8240,3432,4651,3117],"./IPO_ST/helper":[54651,9,3822,4651],"./IPO_ST/helper.ts":[54651,9,3822,4651],"./IPO_ST/index":[63117,9,8171,8052,3822,9e3,2037,3268,2195,8240,3432,4651,3117],"./IPO_ST/index.tsx":[63117,9,8171,8052,3822,9e3,2037,3268,2195,8240,3432,4651,3117],"./IPRO_ST":[39697,9,8171,8052,3822,9e3,2037,3268,2195,8240,4208,1399,9697],"./IPRO_ST/":[39697,9,8171,8052,3822,9e3,2037,3268,2195,8240,4208,1399,9697],"./IPRO_ST/helper":[81399,9,3822,1399],"./IPRO_ST/helper.ts":[81399,9,3822,1399],"./IPRO_ST/index":[39697,9,8171,8052,3822,9e3,2037,3268,2195,8240,4208,1399,9697],"./IPRO_ST/index.tsx":[39697,9,8171,8052,3822,9e3,2037,3268,2195,8240,4208,1399,9697],"./IPRO_ST_FULL":[24491,9,8171,3822,9e3,2037,3268,4208,8120,9491,4491],"./IPRO_ST_FULL/":[24491,9,8171,3822,9e3,2037,3268,4208,8120,9491,4491],"./IPRO_ST_FULL/helper":[99491,9,3822,9491],"./IPRO_ST_FULL/helper.ts":[99491,9,3822,9491],"./IPRO_ST_FULL/index":[24491,9,8171,3822,9e3,2037,3268,4208,8120,9491,4491],"./IPRO_ST_FULL/index.tsx":[24491,9,8171,3822,9e3,2037,3268,4208,8120,9491,4491],"./IRO":[43079,9,8171,3822,9e3,4943,7987,3079],"./IRO/":[43079,9,8171,3822,9e3,4943,7987,3079],"./IRO/helper":[97987,9,3822,7987],"./IRO/helper.ts":[97987,9,3822,7987],"./IRO/index":[43079,9,8171,3822,9e3,4943,7987,3079],"./IRO/index.tsx":[43079,9,8171,3822,9e3,4943,7987,3079],"./ISO":[27080,9,8171,8052,3822,9e3,2037,3268,2195,8240,3432,4859,4409,4867,2612,7080],"./ISO/":[27080,9,8171,8052,3822,9e3,2037,3268,2195,8240,3432,4859,4409,4867,2612,7080],"./ISO/helper":[52612,9,3822,2612],"./ISO/helper.ts":[52612,9,3822,2612],"./ISO/index":[27080,9,8171,8052,3822,9e3,2037,3268,2195,8240,3432,4859,4409,4867,2612,7080],"./ISO/index.tsx":[27080,9,8171,8052,3822,9e3,2037,3268,2195,8240,3432,4859,4409,4867,2612,7080],"./ISO_DST":[25924,9,8171,3822,9e3,2037,3268,2195,3432,8004,3073,5924],"./ISO_DST/":[25924,9,8171,3822,9e3,2037,3268,2195,3432,8004,3073,5924],"./ISO_DST/helper":[53073,9,3822,3073],"./ISO_DST/helper.ts":[53073,9,3822,3073],"./ISO_DST/index":[25924,9,8171,3822,9e3,2037,3268,2195,3432,8004,3073,5924],"./ISO_DST/index.tsx":[25924,9,8171,3822,9e3,2037,3268,2195,3432,8004,3073,5924],"./ISO_DST_MA":[52574,9,8171,3822,9e3,2037,3268,2195,3432,8004,7895,2574],"./ISO_DST_MA/":[52574,9,8171,3822,9e3,2037,3268,2195,3432,8004,7895,2574],"./ISO_DST_MA/helper":[17895,9,3822,7895],"./ISO_DST_MA/helper.ts":[17895,9,3822,7895],"./ISO_DST_MA/index":[52574,9,8171,3822,9e3,2037,3268,2195,3432,8004,7895,2574],"./ISO_DST_MA/index.tsx":[52574,9,8171,3822,9e3,2037,3268,2195,3432,8004,7895,2574],"./ISO_ST":[17719,9,8171,8052,3822,9e3,2037,3268,2195,8240,4859,4208,4867,1111,7719],"./ISO_ST/":[17719,9,8171,8052,3822,9e3,2037,3268,2195,8240,4859,4208,4867,1111,7719],"./ISO_ST/helper":[91111,9,3822,1111],"./ISO_ST/helper.ts":[91111,9,3822,1111],"./ISO_ST/index":[17719,9,8171,8052,3822,9e3,2037,3268,2195,8240,4859,4208,4867,1111,7719],"./ISO_ST/index.tsx":[17719,9,8171,8052,3822,9e3,2037,3268,2195,8240,4859,4208,4867,1111,7719],"./ISRO_ST":[54656,9,8171,8052,3822,9e3,2037,3268,2195,8240,4208,8983,4656],"./ISRO_ST/":[54656,9,8171,8052,3822,9e3,2037,3268,2195,8240,4208,8983,4656],"./ISRO_ST/helper":[88983,9,3822,8983],"./ISRO_ST/helper.ts":[88983,9,3822,8983],"./ISRO_ST/index":[54656,9,8171,8052,3822,9e3,2037,3268,2195,8240,4208,8983,4656],"./ISRO_ST/index.tsx":[54656,9,8171,8052,3822,9e3,2037,3268,2195,8240,4208,8983,4656],"./ISRO_ST_FULL":[3861,9,8171,3822,9e3,2037,3268,4208,8120,5670,3861],"./ISRO_ST_FULL/":[3861,9,8171,3822,9e3,2037,3268,4208,8120,5670,3861],"./ISRO_ST_FULL/helper":[15670,9,3822,5670],"./ISRO_ST_FULL/helper.ts":[15670,9,3822,5670],"./ISRO_ST_FULL/index":[3861,9,8171,3822,9e3,2037,3268,4208,8120,5670,3861],"./ISRO_ST_FULL/index.tsx":[3861,9,8171,3822,9e3,2037,3268,4208,8120,5670,3861],"./NoFlow":[24608,9,8171,4608],"./NoFlow.tsx":[24608,9,8171,4608],"./PISO":[42407,9,8171,8052,3822,9e3,2037,3268,2195,8240,4859,7757,4554,6149,2611,2407],"./PISO/":[42407,9,8171,8052,3822,9e3,2037,3268,2195,8240,4859,7757,4554,6149,2611,2407],"./PISO/Drop":[12611,9,4554,2611],"./PISO/Drop.tsx":[12611,9,4554,2611],"./PISO/Pickup":[86149,9,4859,6149],"./PISO/Pickup.tsx":[86149,9,4859,6149],"./PISO/helper":[67757,9,3822,7757],"./PISO/helper.ts":[67757,9,3822,7757],"./PISO/index":[42407,9,8171,8052,3822,9e3,2037,3268,2195,8240,4859,7757,4554,6149,2611,2407],"./PISO/index.tsx":[42407,9,8171,8052,3822,9e3,2037,3268,2195,8240,4859,7757,4554,6149,2611,2407],"./PO":[3054,9,8171,3822,9e3,2037,3268,2195,3432,4859,4409,8635,1264,6502,3783,3054],"./PO/":[3054,9,8171,3822,9e3,2037,3268,2195,3432,4859,4409,8635,1264,6502,3783,3054],"./PO/helper":[63783,9,3822,3783],"./PO/helper.ts":[63783,9,3822,3783],"./PO/index":[3054,9,8171,3822,9e3,2037,3268,2195,3432,4859,4409,8635,1264,6502,3783,3054],"./PO/index.tsx":[3054,9,8171,3822,9e3,2037,3268,2195,3432,4859,4409,8635,1264,6502,3783,3054],"./RO":[72837,9,8171,3822,9e3,8635,4943,6568,3313,4275,2837],"./RO/":[72837,9,8171,3822,9e3,8635,4943,6568,3313,4275,2837],"./RO/Buyer":[8406,9,8406],"./RO/Buyer.tsx":[8406,9,8406],"./RO/Drop":[73313,9,3313],"./RO/Drop.tsx":[73313,9,3313],"./RO/Pick":[76203,9,6568],"./RO/Pick.tsx":[76203,9,6568],"./RO/helper":[24275,9,3822,4275],"./RO/helper.ts":[24275,9,3822,4275],"./RO/index":[72837,9,8171,3822,9e3,8635,4943,6568,3313,4275,2837],"./RO/index.tsx":[72837,9,8171,3822,9e3,8635,4943,6568,3313,4275,2837],"./SO":[58716,9,8171,8052,3822,9e3,2037,3268,2195,8240,3432,4859,4409,8635,1264,4867,6502,230,8716],"./SO/":[58716,9,8171,8052,3822,9e3,2037,3268,2195,8240,3432,4859,4409,8635,1264,4867,6502,230,8716],"./SO/helper":[30230,9,3822,230],"./SO/helper.ts":[30230,9,3822,230],"./SO/index":[58716,9,8171,8052,3822,9e3,2037,3268,2195,8240,3432,4859,4409,8635,1264,4867,6502,230,8716],"./SO/index.tsx":[58716,9,8171,8052,3822,9e3,2037,3268,2195,8240,3432,4859,4409,8635,1264,4867,6502,230,8716],"./SO_ST":[27609,9,8171,8052,3822,9e3,2037,3268,2195,8240,3432,4859,8635,7126,1264,4282,7421,7609],"./SO_ST/":[27609,9,8171,8052,3822,9e3,2037,3268,2195,8240,3432,4859,8635,7126,1264,4282,7421,7609],"./SO_ST/Buyer":[37126,9,7126],"./SO_ST/Buyer.tsx":[37126,9,7126],"./SO_ST/Drop":[94282,9,2037,4859,7126,4282],"./SO_ST/Drop.tsx":[94282,9,2037,4859,7126,4282],"./SO_ST/helper":[47421,9,3822,7421],"./SO_ST/helper.ts":[47421,9,3822,7421],"./SO_ST/index":[27609,9,8171,8052,3822,9e3,2037,3268,2195,8240,3432,4859,8635,7126,1264,4282,7421,7609],"./SO_ST/index.tsx":[27609,9,8171,8052,3822,9e3,2037,3268,2195,8240,3432,4859,8635,7126,1264,4282,7421,7609],"./index":[12842,9],"./index.tsx":[12842,9],"./type.d":[57848,7,7848],"./type.d.ts":[57848,7,7848]};function r(e){if(!n.o(a,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return Promise.all(t.slice(2).map(n.e)).then((()=>n.t(r,16|t[1])))}r.keys=()=>Object.keys(a),r.id=12173,e.exports=r}}]);