(self.webpackChunk_unified_order=self.webpackChunk_unified_order||[]).push([[6757],{96757:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>B});var l=r(74315),a=r(12783),n=r(2411),s=r.n(n),o=r(6277),i=r(21602),u=r(13268),c=r(33553),d=r(23664),p=r(75696),m=r(69290),S=r(13029),f=r(13432),v=r(4409),y=r(48049),I=r(83971),h=r(68004),b=r(84252),g=r(63135),E=(0,p.makeStyles)((function(e){return(0,p.createStyles)({element:{margin:e.spacing(1)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},stepperButton:{padding:"".concat(e.spacing(1),"px ").concat(e.spacing(1.5),"px !important"),borderRadius:7},primaryButton:{color:e.palette.primary.contrastText,background:e.palette.primary.main}})})),N=function(e){var t,r=e.dispatch,l=e.state;return s().createElement(h.Z,{resellerId:(null==l||null===(t=l.seller)||void 0===t?void 0:t.resellerId)||null,state:l,dispatch:r})},k=function(e){var t,r=e.state,l=e.dispatch;(0,d.Z)().showErrorMessage;var a=null!==(t=r.seller)&&void 0!==t&&t.resellerId?[r.seller.resellerId]:[];return s().createElement(f.Z,{onSelectReseller:function(e){l({type:"seller_select",payload:e})},selectedItems:a})};const B=function(e){var t=e.state,r=e.dispatch,p=(0,i.Z)(),f=(0,d.Z)(),h=f.showSuccessMessage,B=f.showErrorMessage,M=E(),Z=(0,n.useState)(!1),D=(0,l.Z)(Z,2),w=D[0],C=D[1],x=(0,y.useHistory)(),P=(0,n.useState)(),_=(0,l.Z)(P,2),q=_[0],z=_[1],F=(0,n.useState)(!1),H=(0,l.Z)(F,2),A=H[0],K=H[1],L=(0,g.useTranslation)().t;function R(){C(!0);var e=(0,m.requestHelper)(t);return(0,S.ry)(e).then((function(e){0===e.resultCode?(h(e),z(e.orderId)):(B(e),C(!1))})).catch((function(e){C(!1),B(e)}))}function T(e){switch(e){case 0:return null===t.seller;case 1:return!(0,b.z)(t);case 2:return!(t.paymentAgreement&&t.paymentMode);default:return!1}}(0,n.useEffect)((function(){r({type:"buyer_select",payload:{resellerId:p.requestedPrincipalId,resellerMSISDN:p.targetMSISDN,resellerName:p.targetPrincipalName}})}),[p]);var U,O,Q=(0,m.requestHelper)(t);return s().createElement(s().Fragment,null,w&&s().createElement(I.Z,{orderId:q,handleClose:function(){C(!1),r({type:"reset",payload:null}),x.push("/home/order/orders")},paymentMode:t.paymentMode}),s().createElement(a.SeamlessStepper,{steps:[{label:"Select Seller"},{label:"Select Stock"},{label:"Payment Details"},{label:"Order Details"}],components:{Control:function(e){e.goFirst;var t=e.goNext,r=e.goPrev,l=e.disableFirst,n=e.disableLast,i=e.view;return s().createElement(c.Z,null,s().createElement(a.SeamlessButton,{onClick:r,disabled:l,className:(0,o.default)(M.element,M.stepperButton,M.primaryButton),color:"primary",variant:"contained"},L("previous")),s().createElement(a.SeamlessButton,{className:(0,o.default)(M.element,M.stepperButton,M.primaryButton),onClick:t,disabled:n||T(i),color:"primary",variant:"contained"},L("next")),n&&s().createElement(a.SeamlessButton,{className:A?(0,o.default)(M.element,M.stepperButton):(0,o.default)(M.element,M.stepperButton,M.primaryButton),onClick:R,color:"primary",variant:"contained",disabled:A},L("submit")))}}},s().createElement(k,{dispatch:r,state:t}),s().createElement(N,{dispatch:r,state:t}),s().createElement(v.Z,{state:t,dispatch:r}),s().createElement(u.Z,{dataAPI:Q,paymentInfo:!0,state:t,from:(O=null==t?void 0:t.seller,{resellerId:null==O?void 0:O.resellerId,resellerMSISDN:null==O?void 0:O.resellerMSISDN,resellerName:null==O?void 0:O.resellerName}),itemList:t.stockQuantity.map((function(e){var t;return{productSKU:null==e?void 0:e.productSKU,quantity:null==e?void 0:e.quantity,price:null==e||null===(t=e.unitPrice)||void 0===t?void 0:t.price}})),to:(U=null==t?void 0:t.buyer,{resellerId:null==U?void 0:U.resellerId,resellerMSISDN:null==U?void 0:U.resellerMSISDN,resellerName:null==U?void 0:U.resellerName}),dispatch:r,setDisableSubmit:K})))}}}]);