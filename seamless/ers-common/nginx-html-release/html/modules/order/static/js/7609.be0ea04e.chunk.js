(self.webpackChunk_unified_order=self.webpackChunk_unified_order||[]).push([[7609],{27609:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>D});var r=l(74315),a=l(12783),s=l(2411),n=l.n(s),c=l(6277),i=l(21602),o=l(13268),u=l(33553),d=l(75696),p=l(47421),m=l(13029),v=l(13432),f=l(48049),h=l(94282),S=l(81264),y=l(68635),E=l(91787),I=l(23664),b=l(61990),N=l(24235),g=l(63135),Z=function(e){var t,l=e.state,r=e.dispatch,a=null!==(t=l.buyer)&&void 0!==t&&t.resellerId?[l.buyer.resellerId]:[];return n().createElement(v.Z,{onSelectReseller:function(e){r({type:"buyer_select",payload:e})},selectedItems:a})},k=function(e){var t=e.state,l=e.dispatch;return(0,s.useEffect)((function(){l({type:"drop_location_select",payload:[t.buyer]})}),[]),n().createElement(h.default,{state:t,dispatch:l})},M=function(e){var t,l=e.dispatch,r=e.state;return n().createElement(b.Z,{resellerId:(null==r||null===(t=r.seller)||void 0===t?void 0:t.resellerId)||null,state:r,dispatch:l})},C=(0,d.makeStyles)((function(e){return(0,d.createStyles)({element:{margin:e.spacing(1)}})}));const D=function(e){var t=e.state,l=e.dispatch,d=(0,g.useTranslation)().t,v=(0,i.Z)(),h=C(),b=(0,f.useHistory)(),D=(0,s.useState)(),_=(0,r.Z)(D,1)[0],w=(0,I.Z)(),L=w.showSuccessMessage,P=w.showErrorMessage,H=(0,s.useState)(!1),q=(0,r.Z)(H,2),B=q[0],F=q[1],R=(0,s.useState)(!1),x=(0,r.Z)(R,2),O=x[0],z=x[1];(0,s.useEffect)((function(){l({type:"seller_select",payload:{resellerId:null==v?void 0:v.requestedPrincipalId,resellerMSISDN:null==v?void 0:v.targetMSISDN,resellerName:null==v?void 0:v.targetPrincipalName}})}),[v]);var A=[{label:d("selectReceiver")},{label:d("selectDropLocation")},{label:d("selectPickUpLocation")},{label:d("selectStock")},{label:d("selectDeliveryOption")},{label:d("previewInfo")}];function T(e){switch(e){case 0:return null===t.seller;case 1:return 0===t.dropLocation.length;case 2:return 0===t.pickupLocation.length;case 3:return!(0,N.z3)(t);case 4:return!t.deliveryOptions.mode;default:return!1}}var U,j,G=function(e){var t=e.state,l=e.dispatch;return n().createElement(S.Z,{state:t,dispatch:l})},J=function(e){var t=e.dispatch,l=e.state;return n().createElement(y.Z,{state:l,dispatch:t})},K=(0,p.requestHelper)(t);return n().createElement(n().Fragment,null,B&&n().createElement(E.Z,{loading:O,orderMessage:_,handleClose:function(){F(!1),l({type:"reset",payload:null}),b.push("/home/order/orders")}}),n().createElement(a.SeamlessStepper,{steps:A,components:{Control:function(e){e.goFirst;var r=e.goNext,s=e.goPrev,i=e.disableFirst,o=e.disableLast,v=e.view;return n().createElement(u.Z,null,n().createElement(a.SeamlessButton,{onClick:s,disabled:i,className:(0,c.default)(h.element),color:"primary",variant:"contained"},d("previous")),n().createElement(a.SeamlessButton,{className:(0,c.default)(h.element),onClick:r,disabled:o||T(v),color:"primary",variant:"contained"},d("next")),o&&n().createElement(a.SeamlessButton,{className:(0,c.default)(h.element),onClick:function(){return function(e){F(!0);var r=(0,p.requestHelper)(t);return z(!0),(0,m.ry)(r).then((function(e){0===e.resultCode?(l({type:"reset",payload:null}),L(e),b.push("/home/order/orders")):(F(!1),P(e))})).catch((function(e){F(!1),P(e)}))}()},color:"primary",variant:"contained"},d("submit")))}}},n().createElement(Z,{dispatch:l,state:t}),n().createElement(k,{dispatch:l,state:t}),n().createElement(G,{dispatch:l,state:t}),n().createElement(M,{dispatch:l,state:t}),n().createElement(J,{dispatch:l,state:t}),n().createElement(o.Z,{dataAPI:K,state:t,from:(j=null==t?void 0:t.seller,{resellerId:null==j?void 0:j.resellerId,resellerMSISDN:null==j?void 0:j.resellerMSISDN,resellerName:null==j?void 0:j.resellerName}),to:(U=null==t?void 0:t.buyer,{resellerId:null==U?void 0:U.resellerId,resellerMSISDN:null==U?void 0:U.resellerMSISDN,resellerName:null==U?void 0:U.resellerName}),itemList:(0,N.RH)(t),dispatch:l})))}}}]);