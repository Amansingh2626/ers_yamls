(self.webpackChunk_unified_order=self.webpackChunk_unified_order||[]).push([[8004],{84252:(e,t,n)=>{"use strict";function r(e){var t;return null==e||null===(t=e.stockQuantity)||void 0===t?void 0:t.length}function l(e){return r(e)>0||!1}n.d(t,{e:()=>r,z:()=>l})},68004:(e,t,n)=>{"use strict";n.d(t,{Z:()=>N});var r=n(11746),l=n(51119),a=n(74315),o=n(2411),u=n.n(o),i=n(63135),c=n(41744),d=n.n(c),s=n(77277),p=n(26739),m=n(61837),f=n(86619),v=n(85256),y=n(79692),Z=n(12420),E=n(2366),b=n(8629),S=n(49429),h=n(38724),g=n(79249),k=n(37390),C=n(97485),O=n(15584),w=n(91256),K=n(58987),U=n(89571),I=n(75696),q=n(9495),j=(0,I.makeStyles)((function(e){var t,n;return{dialogContent:{backgroundColor:e.palette.primary.main,color:null==e||null===(t=e.palette)||void 0===t||null===(n=t.common)||void 0===n?void 0:n.white}}}));const P=function(e){var t=e.state,n=(e.dispatch,e.onClose),l=e.removeItem,c=e.quantityLabel,d=j(),p=(0,i.useTranslation)().t,f=(0,o.useState)(0),v=(0,a.Z)(f,2),y=v[0],Z=v[1];function E(){var e=t.stockQuantity.map((function(e){var t;return{productSKU:null==e?void 0:e.productSKU,quantity:null==e?void 0:e.quantity,reserverType:null==c?void 0:c.toUpperCase(),amount:null==e||null===(t=e.unitPrice)||void 0===t?void 0:t.price}}));return(0,r.Z)(e)}return(0,o.useEffect)((function(){var e,t=0;null===(e=E())||void 0===e||e.forEach((function(e){t+=(null==e?void 0:e.quantity)*(null==e?void 0:e.amount)})),Z(t)}),[t]),u().createElement(b.Z,{open:!0,maxWidth:"lg",fullWidth:!0,disableBackdropClick:!0,disableEscapeKeyDown:!0,disablePortal:!0},u().createElement(g.Z,{className:d.dialogContent,id:"alert-dialog-title"},"Selected Items"),u().createElement(h.Z,null,u().createElement(w.Z,null,u().createElement(k.Z,{"aria-label":"a dense table"},u().createElement(K.Z,null,u().createElement(U.Z,null,u().createElement(O.Z,null,p("productSku")),u().createElement(O.Z,null,p("reserveType")),u().createElement(O.Z,null,p("quantity")),u().createElement(O.Z,null,p("price")),u().createElement(O.Z,null,p("total")))),u().createElement(C.Z,null,E().map((function(e,t){return u().createElement(U.Z,{key:"".concat(t,"_").concat(null==e?void 0:e.productSKU)},u().createElement(O.Z,{component:"th",scope:"row"},null==e?void 0:e.productSKU),u().createElement(O.Z,null,null==e?void 0:e.reserverType),u().createElement(O.Z,null,null==e?void 0:e.quantity),u().createElement(O.Z,null,null==e?void 0:e.amount),u().createElement(O.Z,null,(null==e?void 0:e.quantity)*(null==e?void 0:e.amount)),u().createElement(O.Z,null,u().createElement(m.Z,{size:"small",disableRipple:!0,onClick:function(){return l(e)}},u().createElement(q.Z,{fontSize:"small"}))))})),"0"!=y&&y&&u().createElement(U.Z,null,u().createElement(O.Z,null),u().createElement(O.Z,null),u().createElement(O.Z,null),u().createElement(O.Z,null,p("cartTotal")),u().createElement(O.Z,null,y)))))),u().createElement(S.Z,null,u().createElement(s.Z,{onClick:n,color:"primary"},"Close")))};var x=n(42195),T=n(84252),D=n(70696),Q=n(21602),_=n(23664),R=n(24235);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L=(0,y.Z)((function(e){return(0,Z.Z)({fieldSetBorder:{borderColor:"rgba(0, 0, 0, 0.23)","& .MuiOutlinedInput-root.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(0, 0, 0, 0.23)",borderWidth:"1px"}}})}));const N=function(e){var t=e.state,n=e.dispatch,l=e.resellerId,c=e.quantityLabel,y=void 0===c?"Quantity":c,Z=(0,o.useState)(),b=(0,a.Z)(Z,2),S=b[0],h=b[1],g=((0,i.useTranslation)().t,L()),k=(0,o.useState)(),C=(0,a.Z)(k,2),O=C[0],w=C[1],K=(0,o.useState)(!1),U=(0,a.Z)(K,2),I=U[0],q=U[1],j=u().useState(!1),z=(0,a.Z)(j,2),N=(z[0],z[1]),A=u().useState("1px solid transparent"),B=(0,a.Z)(A,2),W=B[0],F=B[1],G=(0,_.Z)().showErrorMessage;(0,Q.Z)(),(0,o.useEffect)((function(){if(S){var e=t.stockQuantity.find((function(e){return e.productSKU===S.productSKU}));e&&e.quantity?w(e.quantity):w("")}}),[S]);var H=function(e){e.preventDefault();var l=M(M({},S),{},{quantity:parseInt(O.toString(),10)});l.reserveType=(0,R.xk)(t.products,l.productSKU);var a=(0,r.Z)(t.stockQuantity),o=t.stockQuantity.findIndex((function(e){return e.productSKU===l.productSKU}));-1===o?a.push(l):a[o].quantity=l.quantity,n({type:"stock_quantity_select",payload:a})},J=[{field:"productSKU",flex:1,headerName:"Product SKU",valueGetter:function(e){return e.row.productSKU}},{field:"",headerName:y,flex:1,sortable:!1,disableColumnMenu:!0,renderCell:function(e){var t=e.row.productSKU;return u().createElement(u().Fragment,null,u().createElement(f.Z,{onInput:function(e){e.target.value=e.target.value.replace(/[a-zA-Z]|\.|^0[0-9]*/g,"")},onChange:function(e){w(e.target.value),function(e,t){var n={childResellerIds:[""],countChildrenInventories:!1,includeOwnInventory:!0,includeParentInventory:!1,parentResellerIds:[""],productSKUs:[e]};N(!0),(0,D.pS)(n).then((function(e){var n;0==e.resultCode&&((null==e||null===(n=e.data[0])||void 0===n?void 0:n.availableQuantity)>=t?F("1px solid green"):F("1px solid red")),N(!1)})).catch((function(e){G(e),N(!1)}))}(t,e.target.value)},type:"number",value:O,style:{height:38,width:300,borderRadius:8,border:W},variant:"outlined",className:g.fieldSetBorder,placeholder:y}),u().createElement(v.Z,{style:{height:34,margin:4},orientation:"vertical"}),u().createElement(s.Z,{disabled:!O,onClick:H,variant:"outlined"},"ADD TO CART"))}}];return u().createElement("div",{style:{height:500}},u().createElement("section",{style:{display:"flex",justifyContent:"space-between",paddingRight:5,paddingLeft:5}},l&&u().createElement(x.Z,{resellerId:null==l?void 0:l.toString(),onSelect:h,orderType:t.orderType,dispatch:n}),I&&u().createElement(P,{state:t,dispatch:n,onClose:function(){return q(!1)},removeItem:function(e){var r=[];-1!==t.stockQuantity.findIndex((function(t){return t.productSKU===e.productSKU}))&&(r=t.stockQuantity.filter((function(t){return t.productSKU!==e.productSKU})),n({type:"stock_quantity_select",payload:r}))},quantityLabel:y}),u().createElement("section",null,u().createElement(m.Z,{"aria-label":"cart",onClick:function(){return q(!0)}},u().createElement(p.Z,{badgeContent:(0,T.e)(t),color:"primary"},u().createElement(E.Z,{fontSize:"large"}))))),u().createElement(d(),{rows:S?[S]:[],rowHeight:80,getRowId:function(e){return null==e?void 0:e.productSKU},columns:J,disableDensitySelector:!0,disableSelectionOnClick:!0}))}}}]);