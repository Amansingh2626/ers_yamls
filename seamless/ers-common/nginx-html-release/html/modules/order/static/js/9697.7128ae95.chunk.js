(self.webpackChunk_unified_order=self.webpackChunk_unified_order||[]).push([[9697],{39697:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>T});var r=l(74315),n=l(2411),a=l.n(n),s=l(12783),o=l(6277),i=l(75696),u=l(8629),c=l(49429),d=l(38724),m=l(79249),p=l(12231),f=l(73698),v=l(86619),S=l(48049),y=l(33553),h=l(23664),g=l(81399),b=l(13029),E=l(13268),I=l(21602),Z=l(82037),N=l(74208),k=l(61990),C=l(24235),w=l(63135),M=(0,i.makeStyles)((function(e){return(0,i.createStyles)({element:{margin:e.spacing(1)}})})),_=function(e){var t=e.dispatch,l=e.state,r=(0,I.Z)();return a().createElement(k.Z,{resellerId:(null==r?void 0:r.requestedPrincipalId)||null,state:l,dispatch:t})};const T=function(e){var t,l=e.state,i=e.dispatch,k=(0,I.Z)(),T=(0,h.Z)(),D=T.showSuccessMessage,R=T.showErrorMessage,B=T.showInfoMessage,P=(0,n.useState)(!1),q=(0,r.Z)(P,2),x=q[0],F=q[1],H=(0,n.useState)([]),W=(0,r.Z)(H,2),L=W[0],O=W[1],z=(0,n.useState)(),A=(0,r.Z)(z,2),j=A[0],G=A[1],J=(0,n.useState)(),K=(0,r.Z)(J,2),Q=K[0],U=K[1],V=(0,n.useState)(!1),X=(0,r.Z)(V,2),Y=X[0],$=X[1],ee=(0,S.useHistory)(),te=(0,w.useTranslation)().t,le=M();function re(e){switch(e){case 0:return null===l.returnTo;case 1:return!(0,C.z3)(l);default:return!1}}function ne(){F(!1),G(null),U("")}(0,n.useEffect)((function(){i({type:"buyer_select",payload:{resellerId:null==k?void 0:k.requestedPrincipalId,resellerMSISDN:null==k?void 0:k.targetMSISDN,resellerName:null==k?void 0:k.targetPrincipalName}})}),[k]),(0,n.useEffect)((function(){(0,b.an)().then((function(e){O(e.orderReasons)})).catch((function(e){B(te("unableToLoadReturnReasonList"))}))}),[]);var ae,se=[{label:te("returnTo")},{label:te("selectStock")},{label:te("previewInfo")}],oe=(0,g.requestHelper)(l,Q);return a().createElement(a().Fragment,null,a().createElement(u.Z,{open:x,onClose:ne,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",fullWidth:!0,maxWidth:"sm",disableBackdropClick:!0},a().createElement(m.Z,{id:"alert-dialog-title"},te("specifiyReturnReason")),a().createElement(d.Z,null,a().createElement(f.Z,{style:{marginTop:20},labelId:"demo-simple-select-label",id:"demo-simple-select",value:j,onChange:function(e){U("");var t=e.target.value;G(t);var l=L.find((function(e){return e.code===t}));U(l.description)},fullWidth:!0},L.map((function(e){return a().createElement(p.Z,{key:e.code,value:e.code},e.code)}))),"OTHER"===j&&a().createElement(v.Z,{fullWidth:!0,multiline:!0,rowsMax:5,rows:5,value:Q,style:{marginTop:30},placeholder:te("specifiyOtherReasons"),onChange:function(e){e.target.value.length>=400||U(e.target.value)}})),a().createElement(c.Z,null,a().createElement(s.SeamlessButton,{onClick:ne,color:"primary"},te("cancel")),a().createElement(s.SeamlessButton,{disabled:!Q||Y,onClick:function(){$(!0);var e=(0,g.requestHelper)(l,Q);(0,b.ry)(e).then((function(e){0===e.resultCode?(D(e),i({type:"reset",payload:null}),ee.push("/home/order/orders")):(B(e),$(!1))})).catch((function(e){ne(),R(e),$(!1)})).finally((function(){$(!1),ne()}))},color:"primary",variant:"contained",autoFocus:!0},te(Y?"returning":"return")))),a().createElement(s.SeamlessStepper,{steps:se,components:{Control:function(e){e.goFirst;var t=e.goNext,l=e.goPrev,r=e.disableFirst,n=e.disableLast,i=e.view;return a().createElement(y.Z,null,a().createElement(s.SeamlessButton,{onClick:l,disabled:r,className:(0,o.default)(le.element),color:"primary",variant:"contained"},te("previous")),a().createElement(s.SeamlessButton,{className:(0,o.default)(le.element),onClick:t,disabled:n||re(i),color:"primary",variant:"contained"},te("next")),n&&a().createElement(s.SeamlessButton,{className:(0,o.default)(le.element),onClick:function(){F(!0)},color:"primary",variant:"contained"},te("submit")))}}},a().createElement(N.Z,{dispatch:i,state:l,loadData:function(e){return(0,Z.yS)(k.requestedPrincipalId.toString(),e)},selectedItems:null!=l&&null!==(t=l.buyer)&&void 0!==t&&t.resellerId?[l.buyer.resellerId]:[],onSelect:function(e){i(e?{type:"return_to_select",payload:e}:{type:"return_to_reset",payload:null})},hidden:!0}),a().createElement(_,{dispatch:i,state:l}),a().createElement(E.Z,{dataAPI:oe,state:l,from:(ae=null==l?void 0:l.buyer,{resellerId:null==ae?void 0:ae.resellerId,resellerMSISDN:null==ae?void 0:ae.resellerMSISDN,resellerName:null==ae?void 0:ae.resellerName}),to:function(){var e=null==l?void 0:l.returnTo;return{resellerId:null==e?void 0:e.resellerId,resellerMSISDN:null==e?void 0:e.resellerMSISDN,resellerName:null==e?void 0:e.resellerName}}(),dispatch:i})))}}}]);