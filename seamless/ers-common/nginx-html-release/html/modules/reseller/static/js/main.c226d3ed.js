(()=>{var e,t,n,a,l,r={88885:(e,t,n)=>{"use strict";var a=n(2411),l=n.n(a),r=n(43006),i=n.n(r),o=n(38670),s=n(48049),c=n(74315),u=n(51119),d=n(19721),m=n(29609);const p=function(){var e=(0,d.useSnackbar)().enqueueSnackbar,t=(0,m.useTranslation)().t;function n(e){var n=t("anErrorOccurred");return["resultMessage","message","resultDescription"].forEach((function(t){e.hasOwnProperty(t)&&(n=e[t])})),n}return{showSuccessMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"success"})},showErrorMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"error"})},showInfoMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"info"})},showWarningMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"warning"})}}};var f=n(61416);const v=n.n(f)();var g,h,E,y,b,w,S,Z,T=window.config||{},_=(null==T?void 0:T.defaultPerPageItems)||20,x=null!==(g=null==T||null===(h=T.resellerAdditionalConfig)||void 0===h?void 0:h.callIsBasicResellerInfoAPI)&&void 0!==g&&g,I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,a=n||_,l=t||n?"?limit=".concat(a,"&offset=").concat(t):"";return v("/dms/v1/resellers/resellerChildren/".concat(e).concat(l))},C=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",l=x?"searchResellerBasicInfoByAttribute":"searchResellersByAttribute";return a&&(l=a),v("/dms/auth/".concat(l,"?limit=").concat(t,"&offSet=").concat(n),{method:"POST",body:e})},D=function(e){return v("/dms/auth/getResellerInfo",{method:"POST",body:e})},P=function(e){return v("/dms/auth/updateReseller",{method:"POST",body:e})},N=function(e){return v("/dms/auth/v1/resellerChangeState",{method:"POST",body:e})},k=function(e,t,n){return v("/dms/v1/lifecycle/dealer/status/".concat(n,"/").concat(t),{method:"POST",body:e})},R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DMS";return v("/template/v1/component/".concat(t,"/type/").concat(e))},O=function(e){return v(e)},j=0,A=null,F=function(e){var t,n,a=new Headers;a.append("authorization",localStorage.getItem("token")||""),a.append("Accept-Language","en-US;en-IN;q=0.9,en-US;q=0.7,en-GB;q=0.6");var l={method:"POST",headers:a,body:e,redirect:"follow"},r="".concat(window.config.protocol,"://").concat(window.config.server,":").concat(window.config.port).concat("/api/dms/auth/addReseller"),i=null===(t=window)||void 0===t||null===(n=t.config)||void 0===n?void 0:n.isAllowedTokenRefresh;return fetch(r,l).then((function(t){var n=t.headers.get("authorization");return n?localStorage.setItem("token",n):i&&j<=0&&localStorage.getItem("token")&&(A=e,L().then((function(e){j=0,A&&F(A).then((function(e){0===e.resultCode&&window.history.back()}))})).catch((function(e){++j}))),t.json()}))},L=function(){var e="".concat(window.config.protocol,"://").concat(window.config.server,":").concat(window.config.port).concat(window.config.service,"/refreshToken");return v(e,{method:"POST"})},B=function(e){return v("/dms/auth/deleteResellerUsers",{method:"DELETE",body:e})},M=function(e){return v("/dms/auth/updateResellerUsers",{method:"PUT",body:e})},W=function(e){return v("/dms/auth/addResellerUsers",{method:"POST",body:e})},V=function(){return v("/dms/v1/roles/")},q=function(e){return v("/dms/v1/roles/".concat(5,"/").concat(e))},U=function(e,t){return v("/dms/v1/roles/".concat(5,"/").concat(e),{method:"PUT",body:t})},K=function(e){return v("/dms/v1/resellers/types/".concat(e,"/children"))},z=function(e){return v("/dms/v1/resellers/types/".concat(e))},H=function(e){return v("/dms/v1/password/policies/".concat(e))},G=window.config,Y=null!==(E=null==G?void 0:G.showActiveContracts)&&void 0!==E&&E,$=null!==(y=null==G||null===(b=G.resellerAdditionalConfig)||void 0===b?void 0:b.activeContractLimit)&&void 0!==y?y:0,J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(e+=Y?";contractStatus=1":"").includes("?")?"&":"?",n=$>0&&!e.includes("size=")?"".concat(t,"size=").concat($):"";return v("/acms/v2/contracts".concat(e+=n))},X=n(77277),Q=n(8629),ee=n(49429),te=n(38724),ne=n(79249),ae=n(67358),le=n(90436),re=n(79692),ie=n(12420),oe=n(50835),se=n(70773),ce=n(60905),ue=n(80030),de=n(6277),me=n(11746),pe=n(90929),fe=n(9699),ve=n(19034),ge=n.n(ve);function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(49434),n(34027),n(44697),n(91101),window.config.defaultTemplate;var ye=window.config.language||"en",be=(null===(w=window)||void 0===w||null===(S=w.config)||void 0===S||null===(Z=S.extraColumnConfigurations)||void 0===Z?void 0:Z.resellers)||[],we=function(e){var t=e.replace(/([a-z])([A-Z])/g,"$1 $2");return(t=t.split("_").join(" "))&&t[0].toUpperCase()+t.slice(1)},Se=function(e){if(e&&e.value&&e.value.sections){var t=e.value.sections,n=[];for(var a in t)n=[].concat((0,me.Z)(n),(0,me.Z)(t[a].widgets));return n}return[]};function Ze(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Ee({},t);for(var a in e)["address"].includes(a)?n=Ze(e[a],n):("users"===a&&e[a]&&e[a].length>0&&(n=Ze(e[a][0],n)),"string"==typeof a&&"object"!==(0,pe.Z)(e[a])&&e[a]&&(n[a]=e[a],"resellerName"===a&&(n.name=e[a])));return n}function Te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.mapDataBeforeSubmit||{},a={};if(e&&e.length>0)for(var l in e){var r=e[l],i=n[r.name]||r.name;r.value&&(a[i]=r.value)}return a}var _e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD",n="",a=parseInt(e);return 0===a?n=ge()(new Date).format(t):a>0?n=ge()().add(a,"days").format(t):a<0&&(n=ge()().subtract(Math.abs(a),"days").format(t)),n},xe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=a.defaultValue||!0,r=a.moment,i={},o={},s={};if(e&&e.length>0){for(var c in e){var u,d,m=e[c];null!==(u=m.validation)&&void 0!==u&&u.mapDataBeforeSubmit&&(o[m.validation.mapDataBeforeSubmit]=m.id),null!==(d=m.validation)&&void 0!==d&&d.mapDataBeforeInit&&(s[m.id]=m.validation.mapDataBeforeInit);var p=l&&m.defaultValue||"";p.startsWith("${")&&p.endsWith("}")&&(p=""),l&&m.defaultValue&&"date"===m.type&&r&&(p=_e(m.defaultValue)),i[m.id]=p}if(!n)return i}if(n&&t&&t.resellerData){var f=Ee(Ee({},t.resellerData),{users:t.users});for(var v in s)f[v]=f[s[v]];return Ee(Ee(Ee({},i),Ze(f)),Te(t.additionalFields||[],{mapDataBeforeSubmit:o}))}return[]},Ie=function(e){return e.map((function(e,t){var n,a,l=e.resellerData,r=l.resellerId,i=l.resellerName,o=l.resellerTypeName,s=l.parentResellerName,c=l.parentResellerId,u=l.resellerMSISDN,d=l.resellerTypeId,m=l.timezone,p=l.status,f=l.contractId,v=e.resellerData.fields,g=((void 0===v?{}:v)||{}).parameters,h=void 0===g?{}:g,E=(null===(n=e.resellerData)||void 0===n?void 0:n.isAutotransfer)||0,y=(null===(a=Object.values(h))||void 0===a?void 0:a.filter((function(e){return!!e})))||[],b={},w=Ce().columnsToAppend,S=void 0===w?[]:w;if(S.length>0){var Z,T,_,x,I,C,D,P,N,k,R,O,j,A,F,L,B,M,W,V,q;b.balanceStatus=(null==e||null===(Z=e.lifecycleAttributes)||void 0===Z?void 0:Z.balanceStatus)||"-",b.inventoryStatus=(null==e||null===(T=e.lifecycleAttributes)||void 0===T?void 0:T.inventoryStatus)||"-",b.externalCode=(null==e||null===(_=e.additionalFields)||void 0===_||null===(x=_.filter((function(e){return"externalCode"===e.name}))[0])||void 0===x?void 0:x.value)||"-",b.parentExternalCode=(null==e||null===(I=e.additionalFields)||void 0===I||null===(C=I.filter((function(e){return"parentExternalCode"===e.name}))[0])||void 0===C?void 0:C.value)||"-",b.geographyCode=null!=e&&null!==(D=e.additionalFields)&&void 0!==D&&null!==(P=D.filter((function(e){return"thanaCode"===e.name}))[0])&&void 0!==P&&P.value?null==e||null===(N=e.additionalFields)||void 0===N||null===(k=N.filter((function(e){return"thanaCode"===e.name}))[0])||void 0===k?void 0:k.value:null!=e&&null!==(R=e.additionalFields)&&void 0!==R&&null!==(O=R.filter((function(e){return"territoryCode"===e.name}))[0])&&void 0!==O&&O.value?null==e||null===(j=e.additionalFields)||void 0===j||null===(A=j.filter((function(e){return"territoryCode"===e.name}))[0])||void 0===A?void 0:A.value:null!=e&&null!==(F=e.additionalFields)&&void 0!==F&&null!==(L=F.filter((function(e){return"areaCode"===e.name}))[0])&&void 0!==L&&L.value?null==e||null===(B=e.additionalFields)||void 0===B||null===(M=B.filter((function(e){return"areaCode"===e.name}))[0])||void 0===M?void 0:M.value:(null==e||null===(W=e.additionalFields)||void 0===W||null===(V=W.filter((function(e){return"regionCode"===e.name}))[0])||void 0===V?void 0:V.value)||"-";var U=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a={};if(n&&n.length>0){if(e&&e.length>0)for(var l in e){var r=e[l];n.includes(r.name)&&(a[r.name]=r.value)}if(t&&t.length>0){var i=t[0];for(var o in i)if(n.includes(o)){var s=i[o];"object"===(0,pe.Z)(s)&&(s=Object.values(s).join(" ")),a[o]=s}}}return a}(null==e?void 0:e.additionalFields,null==e||null===(q=e.resellerData)||void 0===q?void 0:q.accounts,S);b=Ee(Ee({},b),U)}return Ee({uuid:"".concat(r,"-").concat(u,"-").concat(t),resellerId:r,resellerName:i,resellerTypeName:o,parentResellerName:s,resellerMSISDN:u,parentResellerId:c,resellerTypeId:d,timezone:m,status:p,reasons:y,contractId:f,isAutotransfer:E},b)}))},Ce=function(){var e=be,t=[],n=[],a=[],l=[];if((null==e?void 0:e.length)>0)for(var r in e){var i=e[r],o=Object.keys(i)[0];("show"===i[o]||!0===i[o]&&!0===(null==i?void 0:i.searchable))&&n.push(o),"hide"===i[o]&&t.push(o),!0===(null==i?void 0:i.searchable)&&("show"!==i[o]&&l.push(o),a.push(o))}return{columnsToAppend:n,columnsToHide:t,columnsToSearch:a,columnsSearchOnly:l}},De=function(e){return{userId:e.userId,password:e.userPassword,roleId:e.roleId,fields:{parameters:Ee(Ee({MSISDN:e.userPhone,Email:e.userEmail},!!e.roleStartDate&&{roleStartDate:e.roleStartDate}),!!e.roleExpiryDate&&{roleExpiryDate:e.roleExpiryDate})}}},Pe=function(e){var t=[];for(var n in e){var a=e[n],l=De(a);t.push(l)}return t},Ne=function(e){if(!e)return[];var t=/{([^}]+)}/g;return e.split("/").filter((function(e){return function(e){return!!e&&e.includes("${")&&e.includes("}")}(e)})).map((function(e){var n=t.exec(e);return n&&n.length>=1?n[1]:(null==n?void 0:n.length)>0?n[0]:e}))},ke=function(e,t,n){var a="";return t.forEach((function(t){n[t]&&(a=e.replace("${"+t+"}",n[t]))})),a},Re=function(e,t){var n=!1;if(e&&t)for(var a in e){var l=e[a];n="object"===(0,pe.Z)(l)&&(null==l?void 0:l.length)>0?n||l.includes(t[a]):n||t[a]==l}return n},Oe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.activeValidationRules,l=void 0===a?{}:a,r=n.controlableFieldIDs,i=void 0===r?[]:r,o=(n.isUniqueFieldIds,n.requiredFieldIds),s=void 0===o?[]:o,c=(n.isExistFieldIds,n.skipValidationIfHidden),u=void 0===c?[]:c,d=n.invalidFields,m=void 0===d?{}:d,p=n.controlableFields,f=void 0===p?{}:p,v=(null==l?void 0:l._nodes)||[];if("false"===e.one_time_password&&1==e.motte_de_passe_flag&&!e.motte_de_passe&&v.includes("motte_de_passe"))return{errMsg:t("mottePassRequired","Motte De Passe field is required!"),id:"motte_de_passe"};var g=Object.keys(m);if(g.length>0&&v.includes(g[0])){var h=g[0];return{errMsg:m[h],id:h}}if(i.length>0){var E=je(e,f,{requiredFieldIds:s,skipValidationIfHidden:u}),y=E.split("#");return{errMsg:y[1],id:y[0]}}return{errMsg:"",id:""}},je=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.skipValidationIfHidden,l=void 0===a?[]:a,r=n.requiredFieldIds,i=void 0===r?[]:r,o="";for(var s in t){var c=t[s],u=Object.keys(c),d=Object.values(c).flat(),m=u[0],p=e[m];if(p&&!d.includes(p)&&i.includes(s)&&!e[s]&&!l.includes(s)){o="".concat(s,"#").concat(we(s)," field is required.");break}}return o},Ae=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Something went wrong, An error occurred";return(null==e?void 0:e.message)||(null==e?void 0:e.error)||(null==e?void 0:e.resultDescription)||(null==e?void 0:e.resultMessage)||t},Fe=function(e,t){var n={},a=Object.keys(t);if(Object.values(t),a.length>0)for(var l in t){var r=t[l];if(r.includes("array")&&"string"==typeof e[l]){var i=r.split("array")[1]||",";n[l]=e[l].split(i)}else r.includes("json")&&"string"==typeof e[l]?n[l]=JSON.parse(e[l]):r.includes("string")&&"object"===(0,pe.Z)(e[l])&&(n[l]=JSON.stringify(e[l]))}return n},Le=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(null==e||null===(t=e.filter((function(e){if(void 0===e.filterBy)return!0;var t=e.filterBy||{},a=t.id,l=t.value;return!!a&&n[a]===l})))||void 0===t?void 0:t.map((function(e){return Ee({},e)})))||[]},Be=n(33553),Me=n(98069);const We=function(e){return!1===e.loading?null:a.createElement(a.Fragment,null,a.createElement(Be.Z,{justifyContent:"center",alignItems:"center",display:"flex",flexDirection:"row",width:"100%",p:1,borderColor:"grey.200",border:.2,borderRadius:6},a.createElement(Be.Z,{m:2},a.createElement(Me.Z,{variant:"text",animation:"wave"}),a.createElement(Me.Z,{variant:"rect",width:210,height:118,animation:"wave"})),a.createElement(Be.Z,{m:2},a.createElement(Me.Z,{variant:"text",animation:"wave"}),a.createElement(Me.Z,{variant:"rect",width:210,height:118,animation:"wave"})),a.createElement(Be.Z,{m:2},a.createElement(Me.Z,{variant:"text",animation:"wave"}),a.createElement(Me.Z,{variant:"rect",width:210,height:118,animation:"wave"}))))};var Ve=n(7560),qe=n(56470),Ue=n(77162),Ke=n.n(Ue),ze=n(91163),He=n(46062),Ge=n.n(He),Ye=n(53004);Ge()(Ye.Z,{attributes:{nonce:"c2VhbWxlc3M="},insert:"head",singleton:!1}),Ye.Z.locals;var $e=n(86619),Je=n(77954),Xe=n(61564),Qe=n(75958),et=n(19258),tt=n(37390),nt=n(97485),at=n(15584),lt=n(91256),rt=n(58987),it=n(89571),ot=n(27556),st=n(4614),ct=(0,re.Z)((function(e){return(0,ie.Z)({root:{marginTop:e.spacing(5),width:"100%",padding:e.spacing(2)},dialogWrapper:{textAlign:"center","& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{}},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginTop:e.spacing(3),marginBottom:e.spacing(3)},btnSpace:{marginRight:e.spacing(2)},content:{textAlign:"left",maxHeight:400,minWidth:550,overflowY:"scroll"},progress:{marginLeft:"1rem"}})}));const ut=function(e){var t=e.open,n=e.onClose,l=e.onOk,r=e.dialogTitle,i=e.dialogDescription,o=e.children,s=e.maxWidth,c=void 0===s?"md":s,u=e.contentStyle,d=void 0===u?"":u,p=e.disableBackdropClick,f=void 0!==p&&p,v=e.loading,g=void 0!==v&&v,h=e.closeButtonText,E=void 0===h?null:h,y=e.okButtonText,b=void 0===y?null:y,w=ct(),S=(0,m.useTranslation)().t;return a.createElement(se.SeamlessDialog,{id:"search-reseller-children-confirmation-dialog",open:t,onClose:n,className:w.dialogWrapper,maxWidth:c,fullWidth:!0,disableBackdropClick:f},a.createElement(se.SeamlessContainer,{title:r,description:i},a.createElement(a.Fragment,null,o&&a.createElement(te.Z,{id:"dailog-content-box",className:(0,de.default)(w.content,d)},o),a.createElement(se.SeamlessButton,{id:"close-button",type:"button",variant:"outlined",color:"primary",className:w.btnSpace,onClick:n},E||S("closeButton")),l&&a.createElement(se.SeamlessButton,{id:"ok-button",type:"button",disabled:g,variant:"contained",color:"primary",onClick:l},b||S("yesConfirmationButton"),g&&a.createElement(st.Z,{color:"inherit",size:14,thickness:6,className:w.progress})))))};var dt=(0,re.Z)((function(e){return(0,ie.Z)({contentStyle:{width:"100%"},table:{minWidth:650},btn:{color:"deepskyblue"}})})),mt=function(e){var t=e.open,n=e.setOpen,l=e.data,r=(e.loading,(0,m.useTranslation)().t),i=dt();return a.createElement(ut,{open:t,onClose:function(){return n(!1)},maxWidth:"lg",contentStyle:i.contentStyle,dialogTitle:r("searchResultReseller"),dialogDescription:r("searchResellersFound"),disableBackdropClick:!0},a.createElement(lt.Z,{id:"search-reseller-children-modal-table-container",component:ot.Z},a.createElement(tt.Z,{id:"search-reseller-children-modal-table",className:i.table,"aria-label":"simple table"},a.createElement(rt.Z,null,a.createElement(it.Z,null,a.createElement(at.Z,{component:"th"},r("resellerId")),a.createElement(at.Z,{component:"th",align:"right"},r("resellerName")),a.createElement(at.Z,{component:"th",align:"right"},r("parentResellerName")),a.createElement(at.Z,{component:"th",align:"right"},r("resellerMSISDN")),a.createElement(at.Z,{component:"th",align:"right"},r("resellerTypeName")),a.createElement(at.Z,{component:"th",align:"right"},r("status")),a.createElement(at.Z,{component:"th",align:"right"},r("resellerReason","Any Action Comments")))),a.createElement(nt.Z,null,l.map((function(e){var t;return a.createElement(it.Z,{key:e.resellerId},a.createElement(at.Z,{component:"th",scope:"row"},a.createElement(ue.ZP,{title:"".concat(r("clickToViewResellerDetail"))},a.createElement(X.Z,{className:i.btn,component:s.Link,target:"_blank",to:"/home/reseller/resellers/view/"+e.resellerId},e.resellerId))),a.createElement(at.Z,{align:"right"},e.resellerName),a.createElement(at.Z,{align:"right"},e.parentResellerName),a.createElement(at.Z,{align:"right"},e.resellerMSISDN),a.createElement(at.Z,{align:"right"},e.resellerTypeName),a.createElement(at.Z,{align:"right"},e.status),a.createElement(at.Z,{align:"right"},null===(t=e.reasons)||void 0===t?void 0:t.map((function(e,t){return e.includes("http://")||e.includes("https://")?a.createElement("a",{href:e,target:"_blank",key:t},r("seeAttachment","See Attachment"),"."):a.createElement("p",{key:t},r("reasonDescription"),a.createElement("q",null,e))}))))}))))))},pt=[],ft={};const vt=function(e){var t=e.children,n=e.typeId,l=e.limit,r=e.offset,i=(e.totalCount,e.setTotalCount),o=e.setResellerData,s=e.dataSourceUrl,u=e.refresh,d=void 0!==u&&u,f=a.useState([]),g=(0,c.Z)(f,2),h=g[0],E=g[1],y=a.useState(!1),b=(0,c.Z)(y,2),w=b[0],S=b[1],Z=p(),T=Z.showErrorMessage,_=(Z.showSuccessMessage,(0,m.useTranslation)().t),x=a.useState([]),I=(0,c.Z)(x,2),D=I[0],P=I[1];a.useEffect((function(){var e;D.length>0&&(ft[n]=D),D.length>0&&(null===(e=ft[n])||void 0===e?void 0:e.length)===D.length&&(S(!0),setTimeout((function(){return S(!1)}),1e3))}),[D]);var N=function(e){var t={additionalFields:[],resellerData:{resellerTypeId:e,status:"Active"}};S(!0),C(t,l,r,s).then((function(e){if(0===e.resultCode){var t=Ie(e.resellers),n=[].concat((0,me.Z)(pt),(0,me.Z)(t));return pt=n,i(e.totalCount),P(n),o(n),Promise.resolve(n)}var a=e.resultMessage||"Sorry, No data found";return T(a),Promise.reject(null)})).catch((function(e){return T(e)})).finally((function(){return S(!1)}))};function k(e){return R.apply(this,arguments)}function R(){return(R=(0,qe.Z)(Ke().mark((function e(t){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.map((function(e){return N(e.id)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=a.useCallback((function(){if(n){var e;if(ft[n]&&(null===(e=ft[n])||void 0===e?void 0:e.length)>0&&!d)return;S(!0),function(e){return v("/dms/v1/resellers/types/".concat(e,"/parents"))}(n).then((function(e){0===e.resultCode?E(e.types):T(e.resultDescription||_("noDataFoundError","Something wrong, No data found."))})).catch((function(e){return T(e)})).finally((function(){return S(!1)}))}}),[n]);function j(){P(pt=[])}return a.useEffect((function(){D.length>0&&j(),O()}),[n]),a.useEffect((function(){if(h&&h.length>0){var e;if(ft[n]&&(null===(e=ft[n])||void 0===e?void 0:e.length)>0&&!d)return;k(h)}}),[h]),a.useEffect((function(){k(h)}),[r]),a.useEffect((function(){j()}),[]),a.createElement(a.Fragment,null,t({resellersData:ft[n]||D,loading:w}))};function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Et=(0,re.Z)((function(e){return(0,ie.Z)({positionTop:{marginTop:e.spacing(4)},autoElement:{marginTop:e.spacing(2),"& .MuiInputLabel-filled.MuiInputLabel-shrink.MuiInputLabel-marginDense":{transform:"translate(12px, 5px) scale(0.75)"},"& .MuiInputBase-root":{paddingTop:e.spacing(1.5)},"& .MuiFormHelperText-root":{marginLeft:0}}})}));const yt=function(e){var t,n,l=e.name,r=e.value,i=e.handleChange,o=e.resellerType,s=e.label,u=e.helperText,d=e.required,p=void 0!==d&&d,f=e.disabled,v=void 0!==f&&f,g=e.errors,h=void 0===g?{}:g,E=e.dataSourceUrl,y=e.type,b=void 0===y?"dropdown":y,w=e.getParentReseller,S=e.refresh,Z=void 0!==S&&S,T=e.editView,_=void 0!==T&&T,x=e.canChangeResellerType,I=void 0!==x&&x,C=e.mutable,D=void 0===C||C,P=(null===(t=window.config)||void 0===t?void 0:t.resellerAdditionalConfig.dropdownLimit)||50,N=(null===(n=window.config)||void 0===n?void 0:n.resellerAdditionalConfig.dropdownOffset)||0,k=(0,m.useTranslation)().t,R=Et(),O=a.useState(P),j=(0,c.Z)(O,2),A=j[0],F=(j[1],a.useState(0)),L=(0,c.Z)(F,2),B=L[0],M=L[1],W=a.useState(0),V=(0,c.Z)(W,2),q=V[0],U=V[1],K=a.useState([]),z=(0,c.Z)(K,2),H=z[0],G=z[1],Y=a.useRef(null);return a.useEffect((function(){if(r&&H){var e,t=H.filter((function(e){return e.resellerId===r}));w&&w(null===(e=t[0])||void 0===e?void 0:e.parentResellerId)}}),[H]),s=s||k("parentResellerCode","Parent Reseller Code"),u=h[l]||u||k("selectParentResellerCode","Select Parent Reseller Code"),o?a.createElement(vt,{typeId:o,dataSourceUrl:E,limit:A,offset:B,totalCount:q,setTotalCount:U,setResellerData:G,refresh:Z},(function(e){var t=e.resellersData,n=e.loading,o=[{resellerId:"",resellerName:k("pleaseSelect_","Please select",{fieldName:"parent"})}].concat((0,me.Z)(t)).map((function(e){return{value:e.resellerId,key:"".concat(e.resellerName," ").concat(e.resellerId?"("+e.resellerId+")":"")}})),c=o.find((function(e){return e.value==r}))||o[0];return a.createElement(a.Fragment,null,"text"!==b||!_||D||I?"autocomplete"==b?a.createElement(Je.ZP,{id:"reseller-parents-drop-down",disabled:v,fullWidth:!0,className:R.autoElement,options:o,"aria-required":p,getOptionLabel:function(e){return e.key},defaultValue:r&&c,getOptionSelected:function(e,t){return e.value==r},size:"small",value:r&&c,onChange:function(e,n){var a;i(n||e);var l=t.filter((function(e){return e.resellerId===(null==n?void 0:n.value)}));w&&w(null===(a=l[0])||void 0===a?void 0:a.parentResellerId)},ref:Y,disableClearable:n,ListboxProps:{onScroll:function(e){if(Math.abs(e.target.scrollHeight-e.target.clientHeight-e.target.scrollTop)<1&&Y.current&&!n&&A<=q&&B<=q){var t=new IntersectionObserver((function(e){e[0].isIntersecting&&(t.unobserve(e[0].target),M((function(e){return e+N})))}),{threshold:1});Y.current&&t.observe(Y.current)}}},renderInput:function(e){return a.createElement($e.Z,(0,Ve.Z)({},e,{name:l,error:!!h[l],variant:"filled",label:s,required:p,helperText:u,InputProps:ht(ht({},e.InputProps),{},{endAdornment:a.createElement(a.Fragment,null,n?a.createElement(st.Z,{color:"primary",size:20}):null,e.InputProps.endAdornment)})}))}}):a.createElement(se.SeamlessDropDown,{id:"reseller-parents-drop-down",required:p,name:l,fullWidth:!0,disabled:v,error:!!h[l],value:r,label:s,helperText:u,onChange:function(e){var n,a=t.filter((function(t){return t.resellerId===e.target.value}));w&&w(null===(n=a[0])||void 0===n?void 0:n.parentResellerId),i(e)},options:[{resellerId:"",resellerName:k("pleaseSelect_","Please select",{fieldName:"parent"})}].concat((0,me.Z)(t)).map((function(e){return{value:e.resellerId,key:"".concat(e.resellerName," ").concat(e.resellerId?"("+e.resellerId+")":"")}}))}):a.createElement(se.SeamlessInput,{id:"reseller-parent-id-input",disabled:!0,fullWidth:!0,className:R.autoElement,label:s,helperText:u,value:r,required:p,error:!!h[l]}))})):null};var bt={};const wt=function(e){var t=e.children,n=e.resellerTypeId,l=e.resellerType,r=e.showAll,i=void 0!==r&&r,o=l||n||"",s=a.useState([]),u=(0,c.Z)(s,2),d=u[0],f=u[1],v=a.useState(!1),g=(0,c.Z)(v,2),h=g[0],E=g[1],y=(0,m.useTranslation)().t,b=p().showErrorMessage;a.useEffect((function(){var e;d.length>0&&o&&(bt[o]=d),d.length>0&&(null===(e=bt[o])||void 0===e?void 0:e.length)===bt.length&&(E(!0),setTimeout((function(){return E(!1)}),1e3))}),[d]);var w=a.useCallback((function(e){var t=e?";resellerType=".concat(e):"";bt[o]&&bt[o].length>0||J(t).then((function(e){0===e.resultCode?f(e.contractList):b(e.resultDescription||y("anErrorOccurred"))})).catch((function(e){return b(e.message||y("anErrorOccurred"))})).finally((function(){return E(!1)}))}),[o,bt]);return a.useEffect((function(){(i||n)&&w(n)}),[n]),a.useEffect((function(){if(l){if(bt[o]&&bt[o].length>0)return;z(l).then((function(e){e.data?w(e.data.typeKey):b(y("anErrorOccurredWhileFetchingResellerType","Sorry, Reseller type not found"))})).catch((function(e){return b(e.message||y("anErrorOccurred"))})).finally((function(){return E(!1)}))}}),[bt,o]),a.createElement(a.Fragment,null,t({contracts:bt[o]||d,loading:h}))},St=function(e){var t=e.name,n=e.value,l=e.handleChange,r=e.resellerTypeId,i=e.resellerType,o=e.label,s=e.helperText,c=e.required,u=void 0!==c&&c,d=e.disabled,p=void 0!==d&&d,f=e.showAll,v=void 0!==f&&f,g=e.errors,h=void 0===g?{}:g,E=e.classes,y=(0,m.useTranslation)().t;return o=o||y("defaultContract","Select Contract"),s=s||y("selectContractType"),a.createElement(wt,{showAll:v,resellerType:i,resellerTypeId:r},(function(e){var r=e.contracts,i=e.loading;return a.createElement(a.Fragment,null,i?a.createElement(Me.Z,null):a.createElement(se.SeamlessDropDown,{id:"reseller-contract-drop-down",required:u,name:t,error:!!h[t],fullWidth:!0,disabled:p,value:n,label:o,helperText:s,onChange:l,options:[{contractKey:" ",name:y("pleaseSelect_","Please select",{fieldName:"contract"})}].concat((0,me.Z)(r)).map((function(e){return{value:e.contractKey,key:"".concat(e.name)}})),className:E&&(0,de.default)(E.element)}))}))};var Zt=n(7089);const Tt=function(e){var t=e.label,n=e.placeholder,l=void 0===n?"Please choose":n,r=e.data,i=e.handleChange,o=e.elemId,s=e.selectedItems,u=void 0===s?[]:s,d=e.disabledItems,m=void 0===d?[]:d,p=e.loading,f=void 0!==p&&p,v=e.style,g=void 0===v?{}:v,h=e.disabled,E=void 0!==h&&h,y=e.required,b=void 0!==y&&y,w=a.useState(u),S=(0,c.Z)(w,2),Z=S[0],T=S[1];o=o||"auto-complete- ".concat(Math.random().toString(36).substring(7));var _=Z.map((function(e){return e.id})),x=u.map((function(e){return e.id})),I=m.map((function(e){return e.id})),C=[].concat((0,me.Z)(x),(0,me.Z)(I)).filter((function(e){return _.includes(e)}));return(0,a.useEffect)((function(){u.length>0&&T(u)}),[u]),r=r.filter((function(e){var t;return!C.includes(null!==(t=null==e?void 0:e.id)&&void 0!==t?t:null==e?void 0:e.value)})),a.createElement("div",null,f?a.createElement(ae.Z,null):null,a.createElement(Je.ZP,{multiple:!0,fullWidth:!0,id:o,disabled:E,value:Z,onChange:function(e,t){if(!E){var n=[].concat((0,me.Z)(m),(0,me.Z)(t.filter((function(e){return!I.includes(e.id)}))));i(n),T(n)}},options:r,getOptionLabel:function(e){return e.name},renderTags:function(e,t){return e.map((function(e,n){return a.createElement(Zt.Z,(0,Ve.Z)({label:e.name},t({index:n}),{disabled:I.includes(e.id)}))}))},style:g,renderInput:function(e){return a.createElement($e.Z,(0,Ve.Z)({},e,{label:t,variant:"outlined",required:b,placeholder:l}))}}))};var _t=n(77790),xt=n.n(_t),It=n(78205),Ct=n.n(It);var Dt=n(37413),Pt=(0,re.Z)((function(e){return(0,ie.Z)({contentStyle:{width:"100%"},table:{minWidth:650},btn:{color:"deepskyblue"},element:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},rowSpacing:{marginBottom:e.spacing(2)}})})),Nt="",kt=[],Rt=window.config.resellerAdditionalConfig.BasicResellerInfoAPILimit||100,Ot=function(e){var t=e.open,n=e.setOpen,l=e.setData,r=e.data,i=(e.loading,(0,m.useTranslation)().t),o=Pt(),s=a.useState([]),u=(0,c.Z)(s,2),d=u[0],f=u[1],v=(Array((null==d?void 0:d.length)||0).fill(""),a.useState(!1)),g=(0,c.Z)(v,2),h=g[0],E=g[1],y=p(),b=y.showErrorMessage,w=y.showSuccessMessage,S=a.useRef(null),Z=function(){var e;null===(e=S.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};a.useEffect((function(){var e=(null==r?void 0:r.values)||[];Nt=null==r?void 0:r.widgetId,f(e)}),[r]),a.useEffect((function(){kt.splice(0,kt.length)}),[]),a.useEffect((function(){Z()}),[d]);var T=a.useCallback((function(e){var t;if(!r.isSearchable)return console.info(" ⚔️ Widget is not searchable => ",r);var n=null===(t=d[e])||void 0===t?void 0:t.trim();if(!n)return console.error(i("emptyValueText"));kt[e]="";var a=Nt.split("."),l={additionalFields:[{name:a.length>1?a[1]:a[0],value:n}],resellerData:{}};r.searchByKey&&("resellerMSISDN"===r.searchByKey?l={additionalFields:[],resellerData:{resellerMSISDN:n,status:"Active"}}:"email"===r.searchByKey&&(l={additionalFields:[],resellerData:{address:{email:n},status:"Active"}})),E(!0),C(l,Rt,0).then((function(t){if(0===t.resultCode&&t.resellers&&t.resellers.length>0)null!=r&&r.mustExist&&w(i("validAndExistText"));else{var n=i("sorryText");b(n),kt[e]=n}})).catch((function(e){b(Ae(e,""))})).finally((function(){return E(!1)}))}),[r,d]),_=a.useCallback((function(){var e=d.filter((function(e,t){return!!e.trim()&&!kt[t]}));l({result:e.join(","),errData:kt}),kt.splice(0,kt.length),n(!1)}),[d]);return a.createElement(ut,{open:t,onClose:function(){return n(!1)},onOk:_,maxWidth:"sm",loading:h,contentStyle:o.contentStyle,okButtonText:i("save&Back"),dialogTitle:i("addAssociations"),dialogDescription:i("multipleAssociations"),disableBackdropClick:!0},d.map((function(e,t){return a.createElement(ce.Z,{container:!0,key:t,spacing:3,alignItems:"center"},a.createElement(ce.Z,{item:!0,xs:9,sm:10},a.createElement(se.SeamlessInput,{fullWidth:!0,required:!0,error:!!kt[t],className:o.element,value:e,onChange:function(e){return function(e,t){d[t]=e,f((0,me.Z)(d))}(e.target.value,t)},label:i("enterAssociation"),onBlur:function(){return T(t)},helperText:kt[t]||"Please enter your values"})),a.createElement(ce.Z,{item:!0,xs:3,sm:2},t===d.length-1&&a.createElement(X.Z,{onClick:function(e){return function(e){if(!d[e])return b(i("emptyValueText"));d.push(" "),f((0,me.Z)(d)),setTimeout((function(){return Z()}),700)}(t)}},a.createElement(Dt.Z,{fontSize:"small"}))))})),a.createElement("div",{ref:S}))},jt=n(55238),At=n(21324),Ft=n(5806);const Lt=function(e){var t=e.checked,n=e.name,l=e.color,r=e.handleChange,i=e.label,o=e.className,s=(0,jt.Z)(e,["checked","name","color","handleChange","label","className"]);return a.createElement(Ft.Z,{className:(0,de.default)(o),control:a.createElement(At.Z,{checked:t,onChange:r,name:n,color:l}),label:i,disabled:s.disabled||!1})};var Bt=(0,re.Z)((function(e){return(0,ie.Z)({spacingTop:{marginTop:e.spacing(3)},form:{display:"flex",flexDirection:"column",flexWrap:"wrap"},element:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},input:{},description:{width:419},button:{},btnSpacing:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},sectionSeparator:{marginTop:e.spacing(3),marginBottom:e.spacing(2),marginLeft:e.spacing(1)},wrapper:{padding:e.spacing(2)},titleSpacing:{marginBottom:e.spacing(1)},subTitleSpacing:{marginBottom:e.spacing(1)},dividerSpacing:{marginBottom:e.spacing(3)},fullWidth:{width:"100%"},minListViewHeight:{minHeight:600}})})),Mt=[{key:"AdminChange",value:"ChangePolicy_AdminChange"},{key:"ResetSMS",value:"ChangePolicy_ResetSMS"},{key:"ResetEmail",value:"ChangePolicy_ResetEmail"},{key:"ResetUSSD",value:"ChangePolicy_AdminChange_ResetUSSD"},{key:"AdminChange_ResetSMS",value:"ChangePolicy_AdminChange_ResetSMS"},{key:"AdminChange_ResetEmail",value:"ChangePolicy_AdminChange_ResetEmail"},{key:"AdminChange_ResetUSSD",value:"ChangePolicy_ResetUSSD"}],Wt=[{key:"Choose",value:0},{key:"Default password reset message",value:"46"}],Vt=[{key:"Auto create",value:"AutoCreate"},{key:"User create",value:"UserCreate"}],qt=[{key:"No message",value:"NO_MESSAGE"},{key:"Email",value:"EMAIL"},{key:"SMS",value:"SMS"}],Ut=[{key:"Choose",value:0},{key:"Default password create message",value:45}],Kt=[{key:"Digits",value:"Digits"},{key:"Any",value:"Any"},{key:"Digits and capital letters",value:"DigitsAndCapitalLetters"},{key:"Digits and letters",value:"DigitsAndLetters"},{key:"Letters",value:"Letters"}],zt=[{key:"Plain text",value:"PlainTextPassword"},{key:"MD5",value:"MD5Password"},{key:"SHA-1",value:"SHA1Password"},{key:"SHA-256",value:"SHA2Password"}],Ht=[{key:"Never expires",value:"NeverExpires"},{key:"5 Years",value:"FiveYears"},{key:"1 Year",value:"OneYear"},{key:"9 Months",value:"NineMonths"},{key:"6 Months",value:"SixMonths"},{key:"3 Months",value:"ThreeMonths"},{key:"45 Days",value:"FortyFiveDays"},{key:"1 Month",value:"OneMonth"},{key:"2 Weeks",value:"TwoWeeks"},{key:"1 Week",value:"OneWeek"},{key:"1 Day",value:"OneDay"}],Gt=[{key:"None",value:"None"},{key:"Trivial check",value:"TrivialCheck"}];const Yt=function(e){var t=e.data,n=e.onFormSubmit,l=e.edit,r=e.view,i=Bt(),o=fe.Ry().shape({bannedPasswords:fe.Z_(),changePolicy:fe.Z_(),createMessage:fe.Z_(),createPolicy:fe.Z_(),createTemplateKey:fe.Z_(),description:fe.Z_(),encryptionFormat:fe.Z_(),legalCharacters:fe.Z_(),maxIncorrectloginAttempt:fe.Rx(),maxPasswordLength:fe.Rx(),minPasswordLength:fe.Rx(),name:fe.Z_().required(),passwordChangeAtFirstLogin:fe.O7(),passwordChangeTemplateKey:fe.Z_(),passwordControl:fe.Z_(),passwordExpiryPeriod:fe.Z_(),passwordRegexp:fe.Z_(),userPasswordsHistoryLimit:fe.Rx(),visiblePassword:fe.O7()}),s=(0,oe.TA)({initialValues:t,validationSchema:o,onSubmit:function(e){return n&&n(e,(function(t){t||f(e)}))},enableReinitialize:!0}),c=s.values,u=s.handleChange,d=s.handleSubmit,f=s.handleReset,v=s.validateForm,g=s.errors,h=p().showWarningMessage,E=(0,m.useTranslation)().t;return a.createElement(ce.Z,{container:!0,className:i.spacingTop},a.createElement(ce.Z,{container:!0,spacing:3},a.createElement(ce.Z,{item:!0,xs:12},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},E("policyInformation")))),a.createElement(ce.Z,{container:!0,spacing:3},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(se.SeamlessInput,{required:!0,error:!!g.name,className:(0,de.default)(i.element,i.input),name:"name",value:c.name,onChange:u,label:E("policyName"),helperText:E("policyNameRequired"),disabled:r,fullWidth:!0}))),a.createElement(ce.Z,{container:!0,spacing:3},a.createElement(ce.Z,{item:!0,xs:12,sm:8},a.createElement(se.SeamlessInput,{error:!!g.description,className:(0,de.default)(i.element,i.input),name:"description",value:c.description,onChange:u,label:E("description"),helperText:E("enterDetails"),disabled:r,multiline:!0,rows:4,rowsMax:4,fullWidth:!0}))),a.createElement(ce.Z,{container:!0,spacing:3,className:i.spacingTop},a.createElement(ce.Z,{item:!0,xs:12},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},E("specifyPasswordLength")))),a.createElement(ce.Z,{container:!0,spacing:3},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(se.SeamlessInput,{error:!!g.minPasswordLength,className:(0,de.default)(i.element,i.input),name:"minPasswordLength",value:c.minPasswordLength,onChange:u,label:E("passwordMinLength"),helperText:E("passwordMinCharacters"),disabled:r,fullWidth:!0})),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(se.SeamlessInput,{error:!!g.maxPasswordLength,className:(0,de.default)(i.element,i.input),name:"maxPasswordLength",value:c.maxPasswordLength,onChange:u,label:E("passwordMaxLength"),helperText:E("passwordMaxCharacters"),disabled:r,fullWidth:!0}))),a.createElement(ce.Z,{container:!0,spacing:3},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(se.SeamlessInput,{error:!!g.passwordRegexp,className:(0,de.default)(i.input),name:"passwordRegexp",value:c.passwordRegexp,onChange:u,label:E("regularExpression"),helperText:E("enterRegexp"),disabled:r,fullWidth:!0}))),a.createElement(ce.Z,{container:!0,spacing:3,className:i.spacingTop},a.createElement(ce.Z,{item:!0,xs:12},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},E("policiesInformation")))),a.createElement(ce.Z,{container:!0,spacing:3},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(se.SeamlessDropDown,{id:"change-policy-drop-down",className:(0,de.default)(i.element),required:!0,label:E("passwordChangePolicy"),helperText:E("selectUpdatePolicy"),options:Mt.map((function(e){return{value:e.value,key:e.key}})),name:"changePolicy",value:c.changePolicy,onChange:u,disabled:r,fullWidth:!0})),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(se.SeamlessDropDown,{id:"create-policy-drop-down",className:(0,de.default)(i.element),required:!0,label:E("passwordCreatePolicy"),helperText:E("selectPolicy"),options:Vt.map((function(e){return{value:e.value,key:e.key}})),name:"createPolicy",value:c.createPolicy,onChange:u,disabled:r,fullWidth:!0}))),a.createElement(ce.Z,{container:!0,spacing:3,className:i.spacingTop},a.createElement(ce.Z,{item:!0,xs:12},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},E("templatesInformation")))),a.createElement(ce.Z,{container:!0,spacing:3},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(se.SeamlessDropDown,{id:"password-change-template-key-drop-down",className:(0,de.default)(i.element),required:!0,label:E("changeTemplateKey"),helperText:E("selectUpdateTemplate"),options:Wt.map((function(e){return{value:e.value,key:e.key}})),name:"passwordChangeTemplateKey",value:c.passwordChangeTemplateKey,onChange:u,disabled:r,fullWidth:!0})),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(se.SeamlessDropDown,{id:"create-template-key-drop-down",className:(0,de.default)(i.element),required:!0,label:E("createTemplateKey"),helperText:E("selectReportTemplate"),options:Ut,name:"createTemplateKey",value:c.createTemplateKey,onChange:u,disabled:r,fullWidth:!0}))),a.createElement(ce.Z,{container:!0,spacing:3,className:i.spacingTop},a.createElement(ce.Z,{item:!0,xs:12},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},E("passwordFormat")))),a.createElement(ce.Z,{container:!0,spacing:3},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(se.SeamlessDropDown,{id:"subdevice-policy-drop-down",className:(0,de.default)(i.element),required:!0,label:E("legalCharacters"),helperText:E("selectCharactersType"),options:Kt,name:"legalCharacters",value:c.legalCharacters,onChange:u,disabled:r,fullWidth:!0})),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(se.SeamlessDropDown,{id:"encryption-format-policy-drop-down",className:(0,de.default)(i.element),required:!0,label:E("encryptionFormat"),helperText:E("selectEncryptionFormat"),options:zt,name:"encryptionFormat",value:c.encryptionFormat,onChange:u,disabled:r,fullWidth:!0}))),a.createElement(ce.Z,{container:!0,spacing:3,className:i.spacingTop},a.createElement(ce.Z,{item:!0,xs:12},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},E("otherPasswordControls")))),a.createElement(ce.Z,{container:!0,spacing:3},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(se.SeamlessDropDown,{id:"password-expiry-period-policy-drop-down",className:(0,de.default)(i.element),required:!0,label:E("passwordExpiryPeriod"),helperText:E("selectPasswordExpiry"),options:Ht,name:"passwordExpiryPeriod",value:c.passwordExpiryPeriod,onChange:u,disabled:r,fullWidth:!0})),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(se.SeamlessDropDown,{id:"create-message-drop-down",className:(0,de.default)(i.element),required:!0,label:E("createMessage"),helperText:E("selectMessageType"),options:qt,name:"createMessage",value:c.createMessage,onChange:u,disabled:r,fullWidth:!0})),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(se.SeamlessDropDown,{id:"password-control-drop-down",className:(0,de.default)(i.element),required:!0,label:E("passwordControl"),helperText:E("selectPasswordCheck"),options:Gt,name:"passwordControl",value:c.passwordControl,onChange:u,disabled:r,fullWidth:!0}))),a.createElement(ce.Z,{container:!0,spacing:3},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(se.SeamlessInput,{error:!!g.maxIncorrectloginAttempt,className:(0,de.default)(i.input,i.element),name:"maxIncorrectloginAttempt",value:c.maxIncorrectloginAttempt,onChange:u,label:E("maxIncorrectLogins"),helperText:E("maxIncorrectLoginsDescription"),disabled:r,fullWidth:!0})),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(se.SeamlessInput,{error:!!g.userPasswordsHistoryLimit,className:(0,de.default)(i.input,i.element),name:"userPasswordsHistoryLimit",value:c.userPasswordsHistoryLimit,onChange:u,label:E("passwordHistoryLimit"),helperText:E("enterPasswordHistoryLimit"),disabled:r,fullWidth:!0}))),a.createElement(ce.Z,{container:!0,spacing:3},a.createElement(ce.Z,{item:!0,xs:12,sm:8},a.createElement(se.SeamlessInput,{error:!!g.bannedPasswords,className:(0,de.default)(i.input,i.element),name:"bannedPasswords",value:c.bannedPasswords,onChange:u,label:E("bannedPasswords"),helperText:E("enterBannedPasswords"),disabled:r,multiline:!0,rows:4,rowsMax:4,fullWidth:!0}))),a.createElement(ce.Z,{container:!0,spacing:3},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(Lt,{className:(0,de.default)(i.element),name:"visiblePassword",checked:Boolean(c.visiblePassword),label:E("visiblePassword"),handleChange:function(e){return u({target:{value:e.target.checked,name:"visiblePassword"}})},color:"primary",disabled:r||!1})),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(Lt,{className:(0,de.default)(i.element),name:"passwordChangeAtFirstLogin",checked:Boolean(c.passwordChangeAtFirstLogin),label:E("passwordChangeAtFirstLogin"),handleChange:function(e){return u({target:{value:e.target.checked,name:"passwordChangeAtFirstLogin"}})},color:"primary",disabled:r||!1}))),a.createElement(ce.Z,{container:!0,spacing:3},!r&&a.createElement(ce.Z,{item:!0,xs:12,sm:8},a.createElement(se.SeamlessButton,{onClick:function(){v().then((function(e){var t=Object.values(e);t.length>0?h(t[0]):d()}))},className:(0,de.default)(i.element,i.button),color:"primary",variant:"contained"},E(l?"updateButton":"submitButton")),a.createElement(se.SeamlessButton,{onClick:f,className:(0,de.default)(i.element,i.btnSpacing,i.button),color:"primary",variant:"outlined"},E("resetButton")))))};var $t=(0,re.Z)((function(e){return(0,ie.Z)({spacingTop:{marginTop:e.spacing(3)},spacingBottom:{marginBottom:e.spacing(1)},wrapper:{padding:e.spacing(2)},titleSpacing:{marginBottom:e.spacing(1)},subTitleSpacing:{marginBottom:e.spacing(1)},dividerSpacing:{marginBottom:e.spacing(3)},fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{textTransform:"capitalize",fontSize:14},regexpValue:{fontSize:14},rowSpacing:{marginBottom:e.spacing(.5)}})}));const Jt=function(e){var t=e.data,n=e.onFormSubmit,l=(e.edit,e.view,$t()),r=(0,oe.TA)({initialValues:t,onSubmit:function(e){return n&&n(e)},enableReinitialize:!0}).values,i=(0,m.useTranslation)().t;return a.createElement(ce.Z,{container:!0},a.createElement(ce.Z,{container:!0,spacing:3,className:l.spacingBottom},a.createElement(ce.Z,{item:!0,xs:12},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},i("policyInformation")))),a.createElement(ce.Z,{container:!0,spacing:3,className:l.rowSpacing},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldHeading},i("policyName"))),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldValue},r.name))),a.createElement(ce.Z,{container:!0,spacing:3,className:l.rowSpacing},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldHeading},i("description"))),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldValue},r.description))),a.createElement(ce.Z,{container:!0,spacing:3,className:(0,de.default)(l.spacingTop,l.spacingBottom)},a.createElement(ce.Z,{item:!0,xs:12},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},i("specifyPasswordLength")))),a.createElement(ce.Z,{container:!0,spacing:3,className:l.rowSpacing},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldHeading},i("passwordMinLength"))),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldValue},r.minPasswordLength))),a.createElement(ce.Z,{container:!0,spacing:3,className:l.rowSpacing},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldHeading},i("passwordMaxLength"))),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldValue},r.maxPasswordLength))),a.createElement(ce.Z,{container:!0,spacing:3,className:l.rowSpacing},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldHeading},i("regularExpression"))),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.regexpValue},r.passwordRegexp))),a.createElement(ce.Z,{container:!0,spacing:3,className:(0,de.default)(l.spacingTop,l.spacingBottom)},a.createElement(ce.Z,{item:!0,xs:12},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},i("policiesInformation")))),a.createElement(ce.Z,{container:!0,spacing:3,className:l.rowSpacing},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldHeading},i("passwordChangePolicy"))),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldValue},r.changePolicy))),a.createElement(ce.Z,{container:!0,spacing:3,className:l.rowSpacing},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldHeading},i("passwordCreatePolicy"))),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldValue},r.createPolicy))),a.createElement(ce.Z,{container:!0,spacing:3,className:(0,de.default)(l.spacingTop,l.spacingBottom)},a.createElement(ce.Z,{item:!0,xs:12},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},i("templatesInformation")))),a.createElement(ce.Z,{container:!0,spacing:3,className:l.rowSpacing},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldHeading},i("changeTemplateKey"))),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldValue},r.passwordChangeTemplateKey))),a.createElement(ce.Z,{container:!0,spacing:3,className:l.rowSpacing},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldHeading},i("reportTemplate"))),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldValue},r.createTemplateKey))),a.createElement(ce.Z,{container:!0,spacing:3,className:(0,de.default)(l.spacingTop,l.spacingBottom)},a.createElement(ce.Z,{item:!0,xs:12},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},i("passwordFormat")))),a.createElement(ce.Z,{container:!0,spacing:3,className:l.rowSpacing},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldHeading},i("legalCharacters"))),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldValue},r.legalCharacters))),a.createElement(ce.Z,{container:!0,spacing:3,className:l.rowSpacing},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldHeading},i("encryptionFormat"))),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldValue},r.encryptionFormat))),a.createElement(ce.Z,{container:!0,spacing:3,className:(0,de.default)(l.spacingTop,l.spacingBottom)},a.createElement(ce.Z,{item:!0,xs:12},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},i("otherPasswordControls")))),a.createElement(ce.Z,{container:!0,spacing:3,className:l.rowSpacing},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldHeading},i("passwordExpiryPeriod"))),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldValue},r.passwordExpiryPeriod))),a.createElement(ce.Z,{container:!0,spacing:3,className:l.rowSpacing},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldHeading},i("createMessage"))),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldValue},r.createMessage))),a.createElement(ce.Z,{container:!0,spacing:3,className:l.rowSpacing},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldHeading},i("passwordControl"))),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldValue},r.passwordControl))),a.createElement(ce.Z,{container:!0,spacing:3,className:l.rowSpacing},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldHeading},i("maxIncorrectLogins"))),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldValue},r.maxIncorrectloginAttempt))),a.createElement(ce.Z,{container:!0,spacing:3,className:l.rowSpacing},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldHeading},i("passwordHistoryLimit"))),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldValue},r.userPasswordsHistoryLimit))),a.createElement(ce.Z,{container:!0,spacing:3,className:l.rowSpacing},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldHeading},i("bannedPasswords"))),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldValue},r.bannedPasswords))),a.createElement(ce.Z,{container:!0,spacing:3,className:l.rowSpacing},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldHeading},i("visiblePassword"))),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldValue},Boolean(r.visiblePassword).toString()))),a.createElement(ce.Z,{container:!0,spacing:3,className:l.rowSpacing},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldHeading},i("passwordChangeAtFirstLogin"))),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(le.Z,{className:l.fieldValue},Boolean(r.passwordChangeAtFirstLogin).toString()))))};var Xt=n(73430);const Qt="CREATE_RESELLER_TYPE",en="EDIT_RESELLER_TYPE",tn="VIEW_RESELLER_TYPE",nn="VIEW_PARENT_RESELLER_TYPE",an="VIEW_CHILD_RESELLER_TYPE",ln="CREATE_PASSWORD_POLICY",rn="VIEW_PASSWORD_POLICY",on="EDIT_PASSWORD_POLICY",sn="DELETE_PASSWORD_POLICY",cn="CREATE_ROLE",un="VIEW_ROLE",dn="EDIT_ROLE",mn="DELETE_ROLE",pn="CREATE_RESELLER",fn="VIEW_RESELLER",vn="EDIT_RESELLER",gn="CHANGE_RESELLER_TYPE",hn="GET_RESELLER_LAST_TRANSACTION",En="CHANGE_PARENT_RESELLER",yn="DELETE_RESELLER_USER",bn="UPDATE_RESELLER_USER",wn="ADD_RESELLER_USER",Sn="ADVANCED_SEARCH_RESELLER",Zn="ACTIVATE_RESELLER",Tn="DEACTIVATE_RESELLER",_n="BLOCK_RESELLER",xn="UNBLOCK_RESELLER",In="FREEZE_RESELLER",Cn="UNFREEZE_RESELLER",Dn="RESET_WRONG_PASSWORD_ATTEMPTS",Pn="RESET_PASSWORD",Nn="EXPIRED_PASSWORD",kn="CHANGE_BALANCE_STATUS",Rn="CHANGE_INVENTORY_STATUS",On="VIEW_HIERARCHY",jn="CREATE_RESELLER_TEMPLATE_DROPDOWN",An="VIEW_RESELLER_TEMPLATE_DROPDOWN",Fn="EDIT_RESELLER_TEMPLATE_DROPDOWN",Ln="DELETE_RESELLER_TEMPLATE_DROPDOWN",Bn="APPROVE_AUTOTRANSFER",Mn="REJECT_AUTOTRANSFER",Wn="UPDATE_PAY_LIMIT",Vn="AUTO_TRANSFER",qn="RESELLER_ADDRESS_INFO",Un="RESELLER_USER_INFO",Kn="RESELLER_ACCOUNT_INFO",zn="RESELLER_ADDITIONAL_INFO",Hn="RESELLER_WALLET_CARD",Gn="RESELLER_CONTRACT_INFO",Yn="LINK_DELINK_SUBRESELLER";var $n=n(44104),Jn=n.n($n);const Xn=function(e){var t=e.disable,n=void 0!==t&&t,l=(0,m.useTranslation)().t;return(0,Jn()().checkPermission)(ln)?a.createElement(se.SeamlessButton,{component:s.Link,to:"/home/reseller/passwords/create",variant:"contained",color:"primary",disabled:n,endIcon:a.createElement(Xt.Z,null)},l("createPasswordPolicy")):null},Qn=function(e){var t=e.children,n=a.useState([]),l=(0,c.Z)(n,2),r=l[0],i=l[1],o=a.useState(!1),s=(0,c.Z)(o,2),u=s[0],d=s[1],m=p().showErrorMessage;return a.useEffect((function(){d(!0),v("/dms/v1/password/policies").then((function(e){return i(e.passwordPolicies)})).catch((function(e){return m(e)})).finally((function(){return d(!1)}))}),[]),a.createElement(a.Fragment,null,t({passwordPolicies:r,loading:u}))};var ea=n(41744),ta=n.n(ea),na=n(38592),aa=n(42375),la=n(21270),ra=n(76945),ia=n(66054),oa=(0,re.Z)((function(e){return(0,ie.Z)({dialogWrapper:{textAlign:"center","& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginBottom:e.spacing(3)},btnSpace:{marginRight:e.spacing(2)}})}));const sa=function(e){var t=e.passwordPolicies,n=e.loading,l=((0,jt.Z)(e,["passwordPolicies","loading"]),(0,m.useTranslation)().t),r=p(),i=r.showErrorMessage,o=r.showSuccessMessage,u=r.showWarningMessage,d=(0,s.useHistory)(),f=oa(),g=Jn()().checkPermission,h=a.useState(!1),E=(0,c.Z)(h,2),y=E[0],b=E[1],w=a.useState(0),S=(0,c.Z)(w,2),Z=S[0],T=S[1],_=function(){var e;(e=Z,v("/dms/v1/password/policies/".concat(e),{method:"DELETE"})).then((function(e){b(!1),0==e.resultCode?(o(e),d.push("/home/reseller/passwords")):u(e)})).catch((function(e){return i(e)}))},x=function(){b(!1)},I=[{field:"name",headerName:l("name"),sortable:!0,flex:1},{field:"encryptionFormat",headerName:l("encryptionFormat"),sortable:!0,flex:1},{field:"description",headerName:l("description"),sortable:!0,flex:1},{field:"actions",headerName:l("actions"),sortable:!1,filterable:!1,renderCell:function(e){return a.createElement("div",null,a.createElement(na.Z,{size:"small",color:"primary",variant:"text","aria-label":"password policy action buttons"},a.createElement(X.Z,{color:"primary",component:s.Link,to:"/home/reseller/passwords/view/"+e.getValue("policyKey")},a.createElement(la.Z,{fontSize:"small"})),g(on)&&a.createElement(X.Z,{component:s.Link,to:"/home/reseller/passwords/edit/"+e.getValue("policyKey")},a.createElement(aa.Z,{fontSize:"small"})),g(sn)&&a.createElement(X.Z,{onClick:function(){b(!0),T(e.getValue("policyKey"))}},a.createElement(ra.Z,{fontSize:"small",style:{color:ia.Z[400]}}))),a.createElement(se.SeamlessDialog,{open:y,onClose:x,className:f.dialogWrapper,maxWidth:"md",fullWidth:!0},a.createElement(a.Fragment,null,a.createElement("div",{className:f.modalContentSpacing},a.createElement(le.Z,{gutterBottom:!0,id:"transition-modal-title",variant:"h6",className:f.fontHeavy},l("deletePasswordPolicyConfirmationTitle"),": ",Z),a.createElement(le.Z,{id:"transition-modal-description",variant:"body1"},l("deletePasswordPolicyConfirmationText")," ",Z)),a.createElement("div",{className:f.modalContentSpacing},a.createElement(se.SeamlessButton,{type:"button",variant:"outlined",color:"primary",className:f.btnSpace,onClick:x},l("noConfirmationButton")),a.createElement(se.SeamlessButton,{type:"button",variant:"contained",color:"primary",onClick:_},l("yesConfirmationButton"))))))},flex:1}];return a.createElement(ta(),{loading:n,columnBuffer:2,rows:t,getRowId:function(e){return e.policyKey},columns:I,checkboxSelection:!0})},ca=function(e){return a.createElement(Qn,null,(function(t){var n=t.passwordPolicies,l=t.loading;return a.createElement(sa,(0,Ve.Z)({},e,{passwordPolicies:n,loading:l}))}))},ua=function(e){var t=e.name,n=e.value,l=e.handleChange,r=e.disabled,i=void 0!==r&&r,o=(0,m.useTranslation)().t;return a.createElement(Qn,null,(function(e){var r=e.passwordPolicies;return e.loading,a.createElement(se.SeamlessDropDown,{id:"password-policies-drop-down",required:!0,fullWidth:!0,disabled:i,label:o("passwordPolicy"),helperText:o("selectPasswordPolicy"),options:r.map((function(e){return{value:e.policyKey,key:e.name}})),name:t,value:n,onChange:l})}))};var da=(0,re.Z)((function(e){return(0,ie.Z)({form:{display:"flex",flexDirection:"column",flexWrap:"wrap"},element:{margin:e.spacing(1),marginBottom:e.spacing(3),minWidth:275},input:{},description:{"& .MuiInput-underline:before":{width:"calc(100% - 10px) !important"}},button:{}})}));const ma=function(e){var t=e.data,n=e.onFormSubmit,l=e.edit,r=e.view,i=e.hideFields,o=da(),s=(0,m.useTranslation)().t,c=p().showErrorMessage,u=fe.Ry().shape({addressLock:fe.Z_(),roleName:fe.Z_().required(s("__isRequiredField",{fieldName:s("roleName")})),importId:fe.Z_().required(s("__isRequiredField",{fieldName:s("importId")})),parentRoleKey:fe.Rx(),passwordPolicyKey:fe.Rx(),roleDescription:fe.Z_(),terminalUser:fe.O7(),userIdRegexp:fe.Z_(),webUser:fe.O7()}),d=(0,oe.TA)({initialValues:t,validationSchema:u,onSubmit:function(e){return n&&n(e,(function(t){t||E(e)}))},enableReinitialize:!0}),f=d.values,v=d.handleChange,g=d.setFieldValue,h=d.handleSubmit,E=d.handleReset,y=d.errors,b=d.validateForm;return a.createElement(Be.Z,{display:"flex",flexDirection:"column"},a.createElement(Be.Z,{display:"flex",flexDirection:"row",alignItems:"center"},a.createElement(se.SeamlessInput,(0,Ve.Z)({required:!0,error:!!y.roleName},null!=i&&i.includes("passwordPolicyKey")?null:{fullWidth:!0},{className:(0,de.default)(o.element,o.input),name:"roleName",value:f.roleName,onBlur:function(){if(f.roleName){var e=f.roleName.split(" ").join("-");e&&g("importId",e)}},onChange:v,label:s("roleName"),helperText:(null==y?void 0:y.roleName)||s("pleaseEnter_",{fieldName:s("roleName")}),disabled:r})),!(null!=i&&i.includes("passwordPolicyKey"))&&a.createElement(ua,{name:"passwordPolicyKey",disabled:r,value:f.passwordPolicyKey,handleChange:v}),!(null!=i&&i.includes("importId"))&&a.createElement(se.SeamlessInput,{error:!!y.importId,className:(0,de.default)(o.element,o.input),name:"importId",fullWidth:!0,required:!0,value:f.importId,helperText:(null==y?void 0:y.importId)||s("pleaseEnter_",{fieldName:s("importId")}),onChange:v,label:s("importId"),disabled:r||l})),a.createElement(Be.Z,{display:"flex",flexDirection:"row",alignItems:"center"},!(null!=i&&i.includes("addressLock"))&&a.createElement(se.SeamlessInput,{error:!!y.addressLock,className:(0,de.default)(o.element,o.input),name:"addressLock",value:f.addressLock,onChange:v,label:"Address Lock",helperText:"Enter address lock",disabled:r}),!(null!=i&&i.includes("userIdRegexp"))&&a.createElement(se.SeamlessInput,{error:!!y.userIdRegexp,className:(0,de.default)(o.element,o.input),name:"userIdRegexp",value:f.userIdRegexp,onChange:v,label:"Userid regexp",helperText:"Enter userid regexp",disabled:r})),a.createElement(Be.Z,{display:"flex",flexDirection:"row",alignItems:"center"},a.createElement(se.SeamlessInput,{error:!!y.roleDescription,className:(0,de.default)(o.element,o.description),name:"roleDescription",value:f.roleDescription,onChange:v,label:"Description",helperText:"Enter role description",disabled:r,multiline:!0,rows:4,rowsMax:4,fullWidth:!0})),!(null!=i&&i.includes("webUser"))&&a.createElement(Be.Z,{display:"flex",flexDirection:"row",alignItems:"center"},a.createElement(Lt,{className:(0,de.default)(o.element),name:"webUser",checked:Boolean(f.webUser),label:"Web user (will permit user to log-in on website i.e. ERSAdmin or ResellerAdmin depending on application)",handleChange:function(e){return v({target:{value:e.target.checked,name:"webUser"}})},color:"primary",disabled:r||!1})),!(null!=i&&i.includes("terminalUser"))&&a.createElement(Be.Z,{display:"flex",flexDirection:"row",alignItems:"center"},a.createElement(Lt,{className:(0,de.default)(o.element),name:"terminalUser",checked:Boolean(f.terminalUser),label:"Terminal user (link terminal specific settings to users with this role i.e. terminal user type, card number)",handleChange:function(e){return v({target:{value:e.target.checked,name:"terminalUser"}})},color:"primary",disabled:r||!1})),!r&&a.createElement(Be.Z,null,a.createElement(se.SeamlessButton,{onClick:function(e){b().then((function(e){var t=Object.values(e);t.length>0?c(t[0]):h()}))},className:(0,de.default)(o.element,o.button),color:"primary",variant:"contained"},s(l?"updateButton":"submitButton")),a.createElement(se.SeamlessButton,{onClick:E,className:(0,de.default)(o.element,o.button),color:"primary",variant:"outlined"},s("resetButton"))))},pa=function(e){var t=e.disable,n=void 0!==t&&t,l=e.label,r=e.url,i=void 0===r?"/home/reseller/roles/create":r,o=e.permission,c=void 0===o?Qt:o,u=(0,m.useTranslation)().t;return(0,Jn()().checkPermission)(c)?a.createElement(se.SeamlessButton,{component:s.Link,to:i,variant:"contained",color:"primary",disabled:n,endIcon:a.createElement(Xt.Z,null)},l||u("createRoles")):null};var fa=[],va="";const ga=function(e){var t=e.redirectUrl,n=(0,m.useTranslation)().t,a=(0,s.useHistory)(),r=p(),i=r.showErrorMessage,o=r.showSuccessMessage,u=r.showWarningMessage,d=l().useState([]),f=(0,c.Z)(d,2),g=f[0],h=f[1],E=l().useState(!1),y=(0,c.Z)(E,2),b=y[0],w=y[1];l().useEffect((function(){va="/home/reseller/roles",t&&(va=t)}),[]);var S=l().useCallback((function(){if(fa.length>0)return h(fa);w(!0),V().then((function(e){fa=e.roles,h(e.roles)})).catch((function(e){return i(e)})).finally((function(){return w(!1)}))}),[]),Z=l().useCallback((function(e,t){var n;w(!0),(n=e,v("/dms/v1/roles/".concat(5,"/").concat(n),{method:"DELETE"})).then((function(e){0==e.resultCode?(o(e),a.push(va),t&&t(null)):(i(e),t&&t(e))})).catch((function(e){return i(e)})).finally((function(){return w(!1)}))}),[]);return{loading:b,roles:g,fetchRoles:S,updateRole:l().useCallback((function(e,t,l){if(!e)return u(n("anErrorOccurred"));w(!0),U("".concat(e),t).then((function(e){0==e.resultCode?(o(e),a.push(va),l&&l(null)):(i(e),l&&l(e))})).catch((function(e){return i(e)})).finally((function(){return w(!1)}))}),[]),deleteRole:Z,createRole:l().useCallback((function(e,t){var n;w(!0),(n=e,v("/dms/v1/roles/5",{method:"POST",body:n})).then((function(e){0==e.resultCode?(o(e),a.push(va),t&&t(null)):(i(e),t&&t(e))})).catch((function(e){i(e),t&&t(e)})).finally((function(){return w(!1)}))}),[])}};var ha,Ea=!1;const ya=function(e){var t=e.roles,n=e.loading,l=((0,jt.Z)(e,["roles","loading"]),(0,m.useTranslation)().t),r=p().showWarningMessage,i=ga({}),o=i.deleteRole,s=i.updateRole,u=i.loading,d=Jn()().checkPermission,f=a.useState(!1),v=(0,c.Z)(f,2),g=v[0],h=v[1],E=a.useState(!1),y=(0,c.Z)(E,2),b=y[0],w=y[1],S=a.useState(0),Z=(0,c.Z)(S,2),T=Z[0],_=Z[1],x=a.useCallback((function(e){if(!ha)return r(l("anErrorOccurred"));s(ha.roleKey,e,(function(e){e||w(!1)}))}),[]),I=[{field:"roleName",headerName:l("roleName"),sortable:!0,width:200},{field:"passwordPolicyKey",headerName:l("passwordPolicyKey"),sortable:!0,width:200},{field:"importId",headerName:l("importId"),sortable:!0,width:200},{field:"lastModified",headerName:l("lastModified"),sortable:!0,width:200},{field:"actions",headerName:l("actions"),sortable:!1,width:200,filterable:!1,renderCell:function(e){return a.createElement("div",null,a.createElement(na.Z,{size:"small",color:"primary",variant:"text","aria-label":"roles action buttons"},d(dn)&&a.createElement(X.Z,{onClick:function(){var n=e.getValue("roleKey");(ha=t.find((function(e){return e.roleKey===n})))&&w(!0),Ea=!1}},a.createElement(aa.Z,{fontSize:"small"})),a.createElement(X.Z,{onClick:function(){var n=e.getValue("roleKey");ha=t.find((function(e){return e.roleKey===n})),Ea=!0,ha&&w(!0)}},a.createElement(la.Z,{fontSize:"small"})),d(mn)&&a.createElement(X.Z,{onClick:function(){h(!0),_(e.getValue("roleKey"))}},a.createElement(ra.Z,{fontSize:"small",style:{color:ia.Z[400]}}))))}}];return a.createElement(a.Fragment,null,a.createElement(ta(),{loading:u||n,columnBuffer:2,rows:t,getRowId:function(e){return e.roleKey},columns:I,checkboxSelection:!0}),a.createElement(ut,{open:b,maxWidth:"lg",loading:u||n,onClose:function(){return w(!1)},dialogTitle:l(Ea?"viewRolesPageTitle":"editRolesPageTitle"),dialogDescription:l(Ea?"viewRolesPageDescription":"editRolesPageDescription")},ha&&a.createElement(ma,{"data-testid":"edit-policy",edit:!0,view:Ea,data:ha,onFormSubmit:function(e){return x(e)}}),n?a.createElement(ae.Z,null):null),a.createElement(ut,{open:g,onClose:function(){h(!1)},loading:u||n,onOk:function(){o(T,(function(e){e||h(!1)}))},dialogTitle:"".concat(l("deleteRolesConfirmationTitle")," ").concat(T),dialogDescription:"".concat(l("deleteRolesConfirmationText")," ").concat(T),okButtonText:l("yesConfirmationButton"),closeButtonText:l("noConfirmationButton")}))};var ba=[];const wa=function(e){var t=e.children,n=e.cacheEnabled,l=void 0===n||n,r=a.useState([]),i=(0,c.Z)(r,2),o=i[0],s=i[1],u=a.useState(!1),d=(0,c.Z)(u,2),m=d[0],f=d[1],v=p().showErrorMessage;return a.useEffect((function(){if(ba.length>0&&l)return s(ba);f(!0),V().then((function(e){ba=e.roles,s(e.roles)})).catch((function(e){return v(e)})).finally((function(){return f(!1)}))}),[]),a.createElement(a.Fragment,null,t({roles:o,loading:m}))},Sa=function(){return a.createElement(wa,{cacheEnabled:!1},(function(e){var t=e.roles,n=e.loading;return a.createElement(ya,{roles:t,loading:n})}))},Za=function(e){var t=e.name,n=e.value,l=e.defaultKey,r=void 0===l?"roleKey":l,i=e.required,o=void 0!==i&&i,s=e.handleChange,c=e.helperText,u=e.label,d=e.disabled,p=void 0!==d&&d,f=e.errors,v=void 0===f?{}:f,g=e.selectedRow,h=e.classes,E=(0,m.useTranslation)().t;return c=v[t]||c||E("selectRoles"),u=u||E("role"),a.createElement(wa,null,(function(e){var l=e.roles,i=e.loading;return a.createElement(a.Fragment,null,a.createElement(se.SeamlessDropDown,{id:"roles-drop-down",required:o,fullWidth:!0,label:u,className:h,error:!!v[t],helperText:c,disabled:p,options:[{key:E("choose"),value:" "}].concat((0,me.Z)(l.map((function(e){return{value:e[r],key:e.roleName}})))),name:t,value:n,onChange:function(e){s(e);var t=l.find((function(t){return t[r]==e.target.value}));g&&g(null,t)}}),i&&a.createElement(ae.Z,null))}))};var Ta=n(60413),_a=n(58577),xa=n(91636),Ia=n(48761);function Ca(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Da(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ca(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ca(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pa,Na=(0,re.Z)((function(e){return(0,ie.Z)({element:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},filterRoot:{paddingLeft:12,marginTop:8}})}));function ka(e){var t,n=Na(),l=e.item,r=e.applyValue;return a.createElement("div",{className:n.filterRoot},a.createElement($e.Z,{className:n.filterRoot,name:l.field,value:l.value||(null===(t=Pa)||void 0===t?void 0:t.value),onChange:function(e){r(Da(Da({},l),{},{value:e.target.value}))}}))}var Ra="",Oa="",ja="",Aa=null;const Fa=function(e){var t,n,l,r=e.resellersData,i=e.handleParentReseller,o=e.loading,u=e.totalCount,d=void 0===u?20:u,f=e.additionalProps,v=e.page,g=e.perPage,h=(e.selectionModel,e.onSelectionModelChange),E=(e.onChangeRowsPerPage,e.onPageSizeChange),y=e.onPageChange,b=e.handleFilterSearch,w=e.customerCare,S=void 0!==w&&w,Z=((0,jt.Z)(e,["resellersData","handleParentReseller","loading","totalCount","additionalProps","page","perPage","selectionModel","onSelectionModelChange","onChangeRowsPerPage","onPageSizeChange","onPageChange","handleFilterSearch","customerCare"]),(0,m.useTranslation)().t),T=a.useState(!1),_=(0,c.Z)(T,2),x=_[0],I=_[1],C=a.useState(!1),D=(0,c.Z)(C,2),N=D[0],k=D[1],R=a.useState(""),O=(0,c.Z)(R,2),j=O[0],A=O[1],F=a.useState(""),L=(0,c.Z)(F,2),B=L[0],M=L[1],W=a.useState(0),V=(0,c.Z)(W,2),q=V[0],U=V[1],K=a.useState(!1),z=(0,c.Z)(K,2),H=z[0],G=z[1],Y=a.useState({newResellerParentId:"",resellerId:""}),$=(0,c.Z)(Y,2),J=$[0],Q=$[1],ee=(Na(),p()),te=ee.showErrorMessage,ne=ee.showSuccessMessage,le=Jn()().checkPermission,re=Ce(),ie=re.columnsToAppend,oe=re.columnsToHide,se=re.columnsToSearch,ce=re.columnsSearchOnly,de=(0,s.useHistory)(),me=null===(t=window)||void 0===t||null===(n=t.config)||void 0===n||null===(l=n.resellerAdditionalConfig)||void 0===l?void 0:l.hideActionsWhenDeactivated;a.useEffect((function(){Pa=null==f?void 0:f.lastFilter}),[null==f?void 0:f.lastFilter]);var pe=a.useCallback((function(e){if(e&&null!=e&&e.filterModel){var t=e.filterModel,n=(null==t?void 0:t.items)||[];Aa&&clearTimeout(Aa);var a=n[0];Aa=setTimeout((function(){b&&b(a)}),800)}}),[]),fe=[{label:"Equal",value:"contain",getApplyFilterFn:function(e){return e.columnField&&e.value&&e.operatorValue?function(t){var n,a;return(null===(n=t.value)||void 0===n?void 0:n.toUpperCase())==(null===(a=e.value)||void 0===a?void 0:a.toUpperCase())}:null},InputComponent:ka}],ve=[{field:"resellerId",headerName:Z("resellerId"),sortable:!0,filterOperators:fe,width:200},{field:"resellerName",headerName:Z("resellerName"),sortable:!0,filterable:se.includes("resellerName"),filterOperators:fe,width:200},{field:"resellerTypeName",headerName:Z("resellerTypeName"),sortable:!0,filterable:se.includes("resellerTypeName"),filterOperators:fe,width:200},{field:"parentResellerName",headerName:Z("parentResellerName"),sortable:!0,filterable:se.includes("parentResellerName"),filterOperators:fe,width:200},{field:"resellerMSISDN",headerName:Z("resellerMSISDN"),filterOperators:fe,sortable:!0,width:200},{field:"status",headerName:Z("status"),sortable:!0,filterable:se.includes("status"),filterOperators:fe,width:200},{field:"actions",headerName:Z("actions"),width:270,sortable:!1,filterable:!1,renderCell:function(e){return a.createElement("div",null,"Deactivated"!==e.row.status||"Deactivated"===e.row.status&&!me?a.createElement(na.Z,{size:"small",color:"primary",variant:"text","aria-label":"resellers action buttons"},a.createElement(X.Z,{color:"primary",component:s.Link,to:S?"/home/customercare/resellers/view/"+e.getValue("resellerId"):"/home/reseller/resellers/view/"+e.getValue("resellerId")},a.createElement(la.Z,{fontSize:"small"})),le(vn)&&a.createElement(X.Z,{component:s.Link,to:"/home/reseller/resellers/edit/"+e.getValue("resellerId")},a.createElement(aa.Z,{fontSize:"small"})),le(gn)&&a.createElement(ue.ZP,{title:"".concat(Z("changeResellerType"))},a.createElement(X.Z,{component:s.Link,to:"/home/reseller/resellers/edit/".concat(e.getValue("resellerId"),"?type=yes")},a.createElement(_a.Z,{fontSize:"small"}))),le(En)&&a.createElement(ue.ZP,{title:"".concat(Z("changeParentReseller"))},a.createElement(X.Z,{onClick:function(){var t,n;I(!0),Ra=(null===(t=e.getValue("resellerId"))||void 0===t?void 0:t.toString())||"",Oa=e.getValue("parentResellerId"),ja=(null===(n=e.getValue("resellerTypeId"))||void 0===n?void 0:n.toString())||"",Q({newResellerParentId:Oa,resellerId:Ra})}},a.createElement(Ta.Z,{fontSize:"small"}))),le(Bn)&&0===e.row.isAutotransfer&&a.createElement(ue.ZP,{title:"".concat(Z("approveAutotransfer"))},a.createElement(X.Z,{onClick:function(){var t;k(!0),M(Z("approveAutotransfer")),A(Z("approveAutotransferCaption")),U(1),Ra=(null===(t=e.getValue("resellerId"))||void 0===t?void 0:t.toString())||""}},a.createElement(xa.Z,{fontSize:"small"}))),le(Mn)&&1===e.row.isAutotransfer&&a.createElement(ue.ZP,{title:"".concat(Z("rejectAutotransfer"))},a.createElement(X.Z,{onClick:function(){var t;k(!0),M(Z("rejectAutotransfer")),A(Z("rejectAutotransferCaption")),U(0),Ra=(null===(t=e.getValue("resellerId"))||void 0===t?void 0:t.toString())||""}},a.createElement(Ia.Z,{fontSize:"small"})))):Z("emptyValueMark"))},flex:1}];return(null==oe?void 0:oe.length)>0&&(ve=ve.filter((function(e){return!oe.includes(e.field)}))),(null==ie?void 0:ie.length)>0&&ie.map((function(e){var t;null===(t=ve)||void 0===t||t.splice(ve.length-1,0,{field:e,headerName:Z("".concat(e,"HeaderName"),Z(e)),sortable:!0,filterOperators:fe,filterable:(null==se?void 0:se.includes(e))||!1,width:200,hide:ce.includes(e)})})),a.createElement(a.Fragment,null,a.createElement(ta(),{loading:o,onPageSizeChange:function(e){E&&E(e.pageSize)},onPageChange:function(e){y&&y(e.page)},onSelectionModelChange:function(e){return h&&h(e,r)},columnBuffer:2,pagination:!0,paginationMode:"server",page:v,onFilterModelChange:pe,pageSize:g,rowCount:d,rows:r,getRowId:function(e){return e.resellerId},columns:ve,checkboxSelection:!0,disableSelectionOnClick:!0}),a.createElement(ut,{open:x,onClose:function(){return I(!1)},okButtonText:Z("updateButton"),onOk:function(){return i&&i(J,(function(e){e||I(!1)}))},dialogTitle:Z("changeParentReseller"),dialogDescription:"".concat(Z("changeParentResellerCaption")," (").concat(Ra,")?")},a.createElement(yt,{name:"newResellerParentId",required:!0,value:J.newResellerParentId,label:Z("parentReseller"),helperText:Z("enterParentReseller"),handleChange:function(e){return Q(Da(Da({},J),{newResellerParentId:e.target.value,resellerId:Ra?Ra.toString():""}))},resellerType:ja})),a.createElement(ut,{open:N,onClose:function(){return k(!1)},okButtonText:Z("updateButton"),onOk:function(){return function(e,t){G(!0),P({dealerData:{resellerData:{resellerId:e,isAutotransfer:t}},dealerPrincipal:{id:e,type:"RESELLERID"}}).then((function(e){0===e.resultCode?(k(!1),ne(e.resultDescription),de.push("/home/reseller/resellers/children")):te(e.resultDescription)})).catch((function(e){return te(e)})).finally((function(){G(!1)}))}(Ra,q)},dialogTitle:B,dialogDescription:"".concat(j," (").concat(Ra,")?")},H?a.createElement(ae.Z,null):null))},La=function(e){var t=e.children,n=e.id,l=e.searchData,r=e.searchedData,i=e.offset,o=void 0===i?0:i,s=e.limit,u=e.perPage,d=a.useState([]),m=(0,c.Z)(d,2),f=m[0],v=m[1],g=a.useState([]),h=(0,c.Z)(g,2),E=h[0],y=h[1],b=a.useState(!1),w=(0,c.Z)(b,2),S=w[0],Z=w[1],T=a.useState(0),_=(0,c.Z)(T,2),x=_[0],C=_[1],D=p().showErrorMessage,P=[],N=[],k=a.useCallback((function(e,t){Z(!0),I(n,t,e).then((function(e){N=Ie(e.resellers);var t=[].concat((0,me.Z)(P),(0,me.Z)(N));P=t,v(N),y(t),C(e.totalCount)})).catch((function(e){return D(e)})).finally((function(){return Z(!1)}))}),[]);return a.useEffect((function(){var e;r&&(null===(e=Object.values(r))||void 0===e?void 0:e.length)>0||l&&(null==l?void 0:l.length)>0?v(null!=l?l:[]):(s=u,(0===o||o<x)&&k(s,o))}),[s,o,u,l]),a.createElement(a.Fragment,null,t({resellersData:f,lazzyResellersData:E,totalCount:x,loading:S}))},Ba=function(e){var t=e.id,n=e.onSelectionModelChange,l=e.handleParentReseller,r=e.searchResellers,i=e.searchedData,o=e.onPageChange,s=e.onPageSizeChange,c=e.selectionModel,u=(e.isLoading,e.additionalProps,e.handleFilterSearch),d=e.paginationData,m=e.customerCare,p=void 0!==m&&m;return a.createElement(La,{id:t,limit:null==d?void 0:d.limit,searchData:r,searchedData:i,offset:null==d?void 0:d.offset,perPage:null==d?void 0:d.perPage},(function(e){var r,i=e.resellersData,m=e.loading,f=e.totalCount;return a.createElement(Fa,{id:t,handleParentReseller:l,resellersData:i,onPageSizeChange:s,totalCount:null!==(r=null==d?void 0:d.totalCount)&&void 0!==r?r:f,perPage:null==d?void 0:d.perPage,page:null==d?void 0:d.page,onPageChange:o,loading:m,handleFilterSearch:u,onSelectionModelChange:n,selectionModel:c,customerCare:p})}))},Ma=function(e){var t=e.disable,n=void 0!==t&&t,l=(0,m.useTranslation)().t;return(0,Jn()().checkPermission)(pn)?a.createElement(se.SeamlessButton,{component:s.Link,to:"/home/reseller/resellers/create",variant:"contained",color:"primary",disabled:n,style:{whiteSpace:"nowrap"},endIcon:a.createElement(Xt.Z,null)},l("createResellers")):null};var Wa=n(27616),Va=n(70660),qa=n(8284),Ua=n(64566),Ka=n(98770);const za=function(e){var t=e.children,n=e.isDescendants,l=void 0!==n&&n,r=e.resellerTypeId,i=e.onlyAllowedTypes,o=a.useState(!1),s=(0,c.Z)(o,2),u=s[0],d=s[1],f=p().showErrorMessage,g=(0,m.useTranslation)().t,h=a.useState([]),E=(0,c.Z)(h,2),y=E[0],b=E[1],w=a.useCallback((function(){r&&(d(!0),function(e,t,n){var a=n?"allowedTypes":t?"descendants":"children";return v("/dms/v1/resellers/types/".concat(e,"/").concat(a))}(r,l,i).then((function(e){0===e.resultCode?b(e.types):f(e.resultDescription||g("noDataFoundError","Something wrong, No data found."))})).catch((function(e){return f(e)})).finally((function(){return d(!1)})))}),[r]);return a.useEffect((function(){w()}),[r]),a.createElement(a.Fragment,null,t({resellerTypes:y,loading:u}))};var Ha=null;const Ga=function(e){var t,n,l,r,i,s,c=e.name,u=e.value,d=e.handleChange,p=e.resellerType,f=e.onlyAllowedTypes,v=e.label,g=e.classes,h=e.helperText,E=e.required,y=void 0!==E&&E,b=e.disabled,w=void 0!==b&&b,S=e.editView,Z=void 0!==S&&S,T=e.isDescendants,_=void 0!==T&&T,x=e.errors,I=void 0===x?{}:x,C=(0,m.useTranslation)().t,D=(0,o.useSelector)((function(e){return e.auth})).user;if(D&&null!==(t=D.info)&&void 0!==t&&t.resellerData&&(Ha=null===(i=D.info)||void 0===i||null===(s=i.resellerData)||void 0===s?void 0:s.resellerTypeId),p=null!==(n=p)&&void 0!==n?n:Ha,v=null!==(l=v)&&void 0!==l?l:C("childResellerType","Child Reseller type"),h=null!==(r=h)&&void 0!==r?r:C("selectChildResellerCode","Select Child Reseller type"),!p)return null;var P=[{id:"",name:C("pleaseSelect_","Please select",{fieldName:"reseller types"})}];return Z&&u&&w&&P.push({id:u,name:u}),a.createElement(za,{isDescendants:_,resellerTypeId:p,onlyAllowedTypes:f},(function(e){var t=e.resellerTypes,n=e.loading;return a.createElement(a.Fragment,null,n?a.createElement(Me.Z,null):a.createElement(se.SeamlessDropDown,{id:"children-reseller-types-drop-down",required:y,disabled:w,name:c,fullWidth:!0,error:!!I[c],value:u,label:v,helperText:h,onChange:d,className:g&&(0,de.default)(g.element),options:[].concat(P,(0,me.Z)(t)).map((function(e){return{value:e.id,key:"".concat(e.name)}}))}))}))};var Ya;function $a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ja(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$a(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xa=(0,re.Z)((function(e){return(0,ie.Z)({element:{marginRight:e.spacing(1)},contentStyle:{width:"100%"},spacingTop:{marginTop:e.spacing(3)},spacingBottom:{marginBottom:e.spacing(2)},dividerSpacing:{marginBottom:e.spacing(3)}})})),Qa=(null===(Ya=window.config)||void 0===Ya?void 0:Ya.resellerAdditionalConfig)||{},el=[],tl={},nl=[],al={},ll={},rl=[],il={},ol=[],sl=[],cl={},ul=[],dl={},ml=[],pl={},fl=a.memo((function(e){var t=e.open,n=e.setOpen,l=e.editView,r=void 0!==l&&l,i=e.onFormSubmit,o=e.additionalFields,s=(e.data,e.allWidgets),d=(e.loading,e.validationRequired),f=void 0===d||d,v=e.title,g=e.description,h=e.resellerType,E=e.isLoading,y=e.metaData,b=void 0===y?{}:y,w=e.setMainFieldValue,S=e.skipFields,Z=void 0===S?[]:S,T=p(),_=T.showWarningMessage,x=T.showErrorMessage,I=Xa(),C=a.useState({}),D=(0,c.Z)(C,2),P=D[0],N=(D[1],(0,m.useTranslation)().t),k=a.useState({state:!1,id:null}),R=(0,c.Z)(k,2),j=R[0],A=R[1];function F(){nl=[],rl=[],tl={},al={},ll={},il={},ol=[],el=[],cl={},sl=[],dl={},ul=[],ml=[],pl={}}a.useEffect((function(){return F(),function(){F()}}),[]);var L=function(e){var t=e.id,n=e.validation.dataSource;if(n&&n.startsWith("${")&&n.endsWith("}")){ol.push(t);var a=n.replace(/[^a-zA-Z ]/g,"");rl.push(a),il[a]=t}var l=Ne(e.validation.dataSource),r="";if(l.length>0){nl.push(t);var i=ke(e.validation.dataSource,l,Ja({},W));tl[t]={fields:l,widget:e},!i.includes("/${")&&i&&(r=i)}ol.push(t),G(e,r)},B=window.config.openCalendarWith||"year";a.useEffect((function(){if(s.length>0)for(var e in s){var t,n,a,l,r,i=s[e],o=i.id;if(!Z.includes(o)){if(i.defaultValue&&i.defaultValue.startsWith("${")&&i.defaultValue.endsWith("}")){var c,u=null===(c=i.defaultValue)||void 0===c?void 0:c.replace(/[^a-zA-Z ]/g,"");cl[o]=u,sl.push(u)}var d,m;null!==(t=i.validation)&&void 0!==t&&t.prefillDataWithKey&&(al[o]=i.validation.prefillDataWithKey),null!==(n=i.validation)&&void 0!==n&&n.hideIf&&""!==i.validation.hideIf&&(dl[o]=null===(d=i.validation)||void 0===d?void 0:d.hideIf,ul.push(o)),null!==(a=i.validation)&&void 0!==a&&a.regex&&""!==i.validation.regex&&(pl[o]=null===(m=i.validation)||void 0===m?void 0:m.regex,ml.push(o)),(null===(l=i.validation)||void 0===l?void 0:l.dataSource)&&""!==(null===(r=i.validation)||void 0===r?void 0:r.dataSource)&&L(i)}}}),[s]);var M=(0,oe.TA)({initialValues:o,onSubmit:function(e){return i&&i(e)},enableReinitialize:!0}),W=M.values,V=M.handleChange,q=M.handleSubmit,U=M.errors,K=M.validateForm,z=M.setFieldError,H=M.setValues,G=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e.id,a=t||e.validation.dataSource,l=Object.keys(ll)||[];l.includes(a)||(A({state:!0,id:n}),O(a).then((function(t){if(0!==(null==t?void 0:t.resultCode)){A({state:!1,id:n});var l=t.resultMessage||t.resultDescription||"Unable to fetch data for: ".concat(e.placeholder);return z(n,l),x(t)}P[n]=[];var i=(null==t?void 0:t.values)||(null==t?void 0:t.data),s=e.validation.extraPayloadFields||[];if((null==i?void 0:i.length)>0){var c,u={},d=e.validation.parseFromDataSource||{};i.forEach((function(e){var t="object"===(0,pe.Z)(e);P[n].push({value:t?e[null==d?void 0:d.value]:e,name:t?e[null==d?void 0:d.name]:e}),s.length>0&&t&&e[d.value]&&(u[e[d.value]]=s.map((function(t){return{name:t.name,value:e[t.value]}})))})),(null===(c=Object.keys(u))||void 0===c?void 0:c.length)>0&&(el.push(n),!ol.includes(n)&&ol.push(n)),o[n]&&r&&Y(n,e,o[n]),A({state:!1,id:n}),ll[a]=P[n]}else x("".concat(n.charAt(0).toUpperCase()+n.slice(1),": ").concat(t.resultDescription)),A({state:!1,id:n})})))},Y=function(e,t,n){var a;if(nl.length>0&&n)for(var l in tl){var r=tl[l];if(r.fields.includes(e)&&r.widget.validation.dataSource){var i=Ja({},r.widget),o=ke(r.widget.validation.dataSource,r.fields,Ja(Ja({},W),{},(0,u.Z)({},e,n)));!o.includes("/${")&&o&&G(i,o)}}if(null!==(a=t.validation)&&void 0!==a&&a.anyAssociatedField){var c=t.validation.anyAssociatedField;A({state:!0,id:e});var d="/dms/v1/template/dropdown/".concat(c,"?associatedFieldName=").concat(e,"&associatedFieldValue=").concat(n);(Object.keys(ll)||[]).includes(d)||O(d).then((function(t){if(ol.push(c),P[c]=[],t.values&&0!==t.values.length)t.values.forEach((function(e){P[c].push({value:e,name:e})})),ll[d]=P[c];else{var n=s.find((function(e){return e.id===c}));P[c]=null==n?void 0:n.options,x("".concat(c.charAt(0).toUpperCase()+c.slice(1),": ").concat(t.resultDescription))}A({state:!0,id:e})}))}};return v=v||N("additionalFieldsDialogTitle","Reseller Additional Fields")||"Reseller Additional Fields",g=g||N("additionalFieldsDialogDescription","Following additional fields for reseller can be submit along with reseller form")||"Following additional fields for reseller can be submit along with reseller form",a.createElement(ut,{open:t,onClose:function(){return n(!1)},onOk:function(){K().then((function(e){var t=Object.values(e);t.length>0?_(t[0]):q()}))},okButtonText:"Done changes",maxWidth:"lg",contentStyle:I.contentStyle,dialogTitle:v,dialogDescription:g,disableBackdropClick:!0},a.createElement(ce.Z,{container:!0,className:I.spacingTop},a.createElement(ce.Z,{container:!0,spacing:3,className:I.spacingBottom},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(Ga,{name:"resellerTypeId",value:b.resellerTypeId,handleChange:function(e){return w("resellerTypeId",e.target.value)},resellerType:h,onlyAllowedTypes:Qa.onlyAllowedTypesForSearch||!1,label:N("selectGroup","Please select group"),helperText:N("pleaseSelectGroup"),required:!1})),!!b.resellerTypeId&&a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(St,{name:"contractId",showAll:!0,resellerType:b.resellerTypeId,helperText:N("selectContractType"),value:b.contractId,label:N("contractId"),handleChange:function(e){return w("contractId",e.target.value)},classes:I})),a.createElement(ce.Z,{item:!0,sm:12},E&&a.createElement(ae.Z,null)))),a.createElement("hr",null),null!=b&&b.resellerTypeId&&s?a.createElement(ce.Z,{container:!0,className:I.spacingTop},a.createElement(ce.Z,{container:!0,spacing:3,className:I.spacingBottom},!E&&s.map((function(e,t){var n=null,l=e.id,i=e.type,o=e.placeholder||we(e.id||""),s=W[l]||"";if(ul.length>0&&ul.includes(l)){var c=dl[l];if(Re(c,W))return null}if(["dropdown","radio"].includes(i)){var u,d=[{value:"",key:N("pleaseSelect_",{fieldName:e.placeholder})}];P[l]&&(e.options=P[l]);var m=[].concat(d,(0,me.Z)((null===(u=e.options)||void 0===u?void 0:u.map((function(e){return{key:e.name,value:e.value}})))||[]));n=a.createElement(se.SeamlessDropDown,{id:"".concat(l,"-drop-down"),error:!!U[l],disabled:r&&e.mutable,fullWidth:!0,required:e.required&&f,className:I.element,label:o,helperText:N("pleaseSelect_",{fieldName:o}),options:m,name:"".concat(l),value:"".concat(s),onChange:function(t){var n;null!=e&&null!==(n=e.validation)&&void 0!==n&&n.associatedFieldFilterUrl?function(e,t){var n,a,l,r=null==t||null===(n=t.validation)||void 0===n?void 0:n.anyAssociatedField,i=null==t||null===(a=t.validation)||void 0===a||null===(l=a.associatedFieldFilterUrl)||void 0===l?void 0:l.replace("${regionName}",e);A({state:!0,id:t.id}),O(i).then((function(e){var n=(null==e?void 0:e.values)||(null==e?void 0:e.data);if(n&&n.length>0){ol.includes(r)||ol.push(r),P[r]=[];var a=t.validation.parseFromDataSource||{};n.forEach((function(e){var t="object"===(0,pe.Z)(e);P[r].push({value:t?e[null==a?void 0:a.value]:e,name:t?e[null==a?void 0:a.name]:e})}))}A({state:!1,id:t.id})})).catch((function(e){A({state:!1,id:t.id})}))}(t.target.value,e):Y(l,e,t.target.value),function(e,t){if(!r&&sl.length>0&&Object.values(cl).includes(t.id)){var n=Ja({},W);for(var a in cl){var l=cl[a];W[l]&&(n[a]=W[l]),l===t.id&&(n[a]=e)}Object.keys(n).length>0&&H(n)}}(t.target.value,e),V(t)}})}else if("date"===i)s=s||(new Date).toISOString(),n=a.createElement(Xe.M,{utils:et.Z},a.createElement(Qe.e,{error:!!U[l],className:(0,de.default)(I.element),views:["year","month","date"],openTo:B,fullWidth:!0,autoOk:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:"".concat(l,"-datepicker"),label:o,name:"".concat(l),value:s,onChange:function(e){return function(e,t,n){"Invalid Date"==e?z(t,N("invalidDate","".concat(n," is not valid date"))):V({target:{value:e,name:t}})}(e,l,o)},KeyboardButtonProps:{"aria-label":"change date"},disabled:r&&e.mutable}));else if(["text","number","email","password"].includes(i)){var p=["number","password"].includes(i)?"text":i;n=a.createElement(se.SeamlessInput,{id:"".concat(l,"-input"),key:"".concat(l,"-input"),error:!!U[l],disabled:r&&e.mutable,type:p,fullWidth:!0,required:e.required&&f,className:I.element,label:o,helperText:"Select the ".concat(o),name:"".concat(l),value:s,onChange:V})}return Z.includes(l)?null:n?a.createElement(ce.Z,{item:!0,key:l,xs:12,sm:4},n,j.state&&j.id===l&&a.createElement(ae.Z,null)):null})))):a.createElement(ce.Z,{container:!0,className:I.spacingTop},a.createElement(le.Z,{variant:"h6"}," ⚠️ ",N("selectResellerTypeToAddMoreFilters"))))}));function vl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function gl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vl(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hl=(0,re.Z)((function(e){return(0,ie.Z)({form:{display:"flex",flexDirection:"column",flexWrap:"wrap"},dropdown:{marginBottom:e.spacing(1),marginLeft:e.spacing(1),marginRight:e.spacing(1),marginTop:e.spacing(3)},element:{margin:e.spacing(1)},input:{margin:e.spacing(1)},button:{},label:{margin:e.spacing(1)},root:{width:"100%",margin:e.spacing(1)},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary,fontWeight:"bold"},progress:{marginLeft:"8px"},spacingfLeft:{marginLeft:e.spacing(.5)}})})),El=null,yl=null,bl=null;const wl=function(e){var t,n,l,r=e.data,i=e.loading,u=e.metaData,p=void 0===u?{}:u,f=e.onFormSubmit,g=e.getTemplateHandler,h=e.customerCare,E=void 0!==h&&h,y=hl(),b=(0,m.useTranslation)().t,w=Jn()().checkPermission,S=(0,s.useHistory)(),Z=(0,o.useSelector)((function(e){return e.auth})).user,T=a.useState("panel1"),_=(0,c.Z)(T,2),x=_[0],I=_[1],C=a.useState(!1),D=(0,c.Z)(C,2),P=D[0],N=D[1],k=a.useState(!1),R=(0,c.Z)(k,2),O=R[0],j=R[1],A=a.useState([]),F=(0,c.Z)(A,2),L=F[0],B=F[1],M=a.useState(!1),W=(0,c.Z)(M,2),V=W[0],q=W[1],U=a.useState([]),K=(0,c.Z)(U,2),z=K[0],H=K[1],G=a.useState(""),Y=(0,c.Z)(G,2),$=Y[0],J=Y[1],X=a.useState(""),Q=(0,c.Z)(X,2),ee=(Q[0],Q[1],a.useState([])),te=(0,c.Z)(ee,2),ne=te[0],ae=te[1],re=(0,d.useSnackbar)().enqueueSnackbar,ie=p.lifelineStatusFlag,ue=void 0!==ie&&ie,pe=p.lifelineStates,ve=void 0===pe?{}:pe,ge=Object.keys(ve),he=null===(t=window)||void 0===t||null===(n=t.config)||void 0===n?void 0:n.resellerAdditionalConfig,Ee=(null==he?void 0:he.hideDataForResellerDetail)||[],ye=(null==he?void 0:he.isExternalCodeSearch)||!1,be=he.resellerSearchDomainBasedDropdowns||!1,we=window.config.report.resellerTypesForDefaultDomain||[],Ze=(0,a.useRef)(null),Te=[{value:"",key:b("dropdownSelectPlaceholder")}].concat((0,me.Z)(ge.map((function(e){return{value:e,key:b("".concat(e,"Balance"))}})))),_e=[{value:"",key:b("dropdownSelectPlaceholder")}].concat((0,me.Z)(ge.map((function(e){return{value:e,key:b("".concat(e,"Inventory"))}})))),Ie={status:fe.Z_()};ue&&(Ie={balanceStatus:fe.Z_(),inventoryStatus:fe.Z_()},delete r.status);var Ce,De,Pe=fe.Ry().shape({resellerData:fe.Ry(gl({resellerId:fe.Z_(),resellerMSISDN:fe.Z_(),resellerTypeId:fe.Z_(),contractId:fe.Z_(),isAutoTransfer:fe.Rx()},Ie)),additionalFields:fe.IX().of(fe.Ry().shape({name:fe.Z_(),value:fe.Z_()}))}),Ne=(0,oe.TA)({initialValues:r,validationSchema:Pe,onSubmit:function(e){return f&&Fe(e)},enableReinitialize:!0}),ke=Ne.values,Re=Ne.handleChange,Oe=Ne.handleSubmit,je=Ne.handleReset,Ae=Ne.setFieldValue,Fe=function(e){f&&f(e,null,{},Re)};Z&&null!==(l=Z.info)&&void 0!==l&&l.resellerData&&(bl=null===(Ce=Z.info)||void 0===Ce?void 0:Ce.resellerData,yl=null===(De=bl)||void 0===De?void 0:De.resellerTypeId),a.useEffect((function(){var e,t,n,a,l,r=null==Z||null===(e=Z.info)||void 0===e||null===(t=e.additionalFields)||void 0===t?void 0:t.filter((function(e){return"accessibleRegionNames"===(null==e?void 0:e.name)})),i=[];if(null===(n=r[0])||void 0===n||null===(a=n.value)||void 0===a||null===(l=a.split(","))||void 0===l||l.map((function(e){return i.push({key:e,value:e})})),i.length>0&&i.unshift({key:"Choose",value:" "}),ae(i),be){var o,s,c,u,d=[],m=null==Z||null===(o=Z.info)||void 0===o||null===(s=o.additionalFields)||void 0===s?void 0:s.filter((function(e){return"domainName"===(null==e?void 0:e.name)})),p=null==Z||null===(c=Z.info)||void 0===c||null===(u=c.additionalFields)||void 0===u?void 0:u.filter((function(e){return"domainCode"===(null==e?void 0:e.name)}));we.includes(Z.resellerType)&&m.length>0&&p.length>0?(d.push({key:m[0].value,value:p[0].value}),B(d),J(p[0].value),Re({target:{value:p[0].value,name:"domainName"}})):v("/groupmanagementsystem/v1/group?status=active").then((function(e){0!==e.resultCode&&re(e.resultMessage,{variant:"error"}),(null==e?void 0:e.groups)&&(null==e||e.groups.map((function(e){null!=e&&e.description&&d.push({key:e.description,value:e.name})}))),d.unshift({key:"Choose",value:""}),B(d)})).catch((function(e){re(e.message,{variant:"error"}),B([])}))}}),[]),a.useEffect((function(){var e;$&&(e=$,v("/groupmanagementsystem/v1/group/name/".concat(e))).then((function(e){var t,n;0!==e.resultCode&&re(e.resultMessage,{variant:"error"});var a=[];(null==e||null===(t=e.group)||void 0===t?void 0:t.members)&&(null==e||null===(n=e.group)||void 0===n||n.members.map((function(e){a.push({key:e.name,value:e.userId})}))),H(a)})).catch((function(e){re(e.message,{variant:"error"}),q(!1)})).finally((function(){return q(!0)}))}),[$]),a.useEffect((function(){var e=ke.resellerTypeId;""===e&&(El=null),Re({target:{name:"additionalFields",value:[]}}),Re({target:{name:"contractId",value:""}}),e&&g&&(j(!0),g(e,(function(e,t){El=t||null,j(!1)})))}),[ke.resellerTypeId]);var Le=a.useMemo((function(){return Se(El).filter((function(e){var t,n=(null===(t=e.validation)||void 0===t?void 0:t.hideInSearchForm)||!1;return"additionalInformation"===e.fieldType&&!n}))}),[El]),Me=a.useMemo((function(){return xe(Le,{},!1,{defaultValue:!1})}),[Le]);return a.createElement("div",{className:y.root},a.createElement(Wa.Z,{expanded:"panel1"===x,onChange:("panel1",function(e,t){I(!!t&&"panel1")})},a.createElement(qa.Z,{expandIcon:a.createElement(Ua.Z,null),"aria-controls":"panel1bh-content",id:"panel1bh-header"},a.createElement(le.Z,{className:y.heading},a.createElement("strong",null,b("advancedSearch")))),a.createElement(Va.Z,null,a.createElement(Be.Z,{display:"flex",className:y.root,flexDirection:"column"},a.createElement(Be.Z,{display:"flex",flexDirection:"row",alignItems:"center"},!E&&a.createElement(se.SeamlessInput,{fullWidth:!0,className:(0,de.default)(y.input),name:"resellerId",value:ke.resellerId,onChange:Re,label:b("resellerId","Dealer code")}),a.createElement(se.SeamlessInput,{fullWidth:!E,className:(0,de.default)(y.input),name:"resellerMSISDN",value:ke.resellerMSISDN,onChange:Re,label:b("resellerMSISDN","Reseller MSISDN")}),!E&&a.createElement(se.SeamlessInput,{fullWidth:!0,className:(0,de.default)(y.input),name:"resellerName",value:ke.resellerName,onChange:Re,label:b("resellerName","Reseller Name")}),ye&&!E&&a.createElement(se.SeamlessInput,{fullWidth:!0,className:(0,de.default)(y.input),name:"externalCode",value:ke.externalCode,onChange:Re,label:b("externalCode","External Code")}),!ue&&!E&&a.createElement(se.SeamlessDropDown,{id:"status-drop-down",fullWidth:!0,className:(0,de.default)(y.dropdown),label:b("status"),helperText:"Please select status for the reseller",options:[{value:"ALL",key:"ALL"},{value:"Active",key:"Active"},{value:"Blocked",key:"Blocked"},{value:"Deactivated",key:"Deactivated"},{value:"Frozen",key:"Frozen"}],name:"status",value:ke.status,onChange:Re})),a.createElement(Be.Z,{display:"flex",flexDirection:"row",alignItems:"center"},ue&&!E&&a.createElement(a.Fragment,null,a.createElement(se.SeamlessDropDown,{id:"status-drop-down",fullWidth:!0,className:(0,de.default)(y.dropdown),label:b("balanceStatus"),helperText:"Please select the balance status",options:Te,name:"balanceStatus",value:ke.balanceStatus,onChange:Re}),a.createElement(se.SeamlessDropDown,{id:"status-drop-down",fullWidth:!0,className:(0,de.default)(y.dropdown),label:b("inventoryStatus"),helperText:"Please select inventory status",options:_e,name:"inventoryStatus",value:ke.inventoryStatus,onChange:Re}))),a.createElement(ce.Z,{container:!0,spacing:3},(null==ne?void 0:ne.length)>0&&a.createElement(ce.Z,{item:!0,sm:3},a.createElement(se.SeamlessDropDown,{id:"region-dropdown",options:ne||[],fullWidth:!0,className:(0,de.default)(y.dropdown),label:b("region"),name:"regionName",onChange:Re,value:ke.regionName})),be&&!E&&a.createElement(ce.Z,{item:!0,sm:3},a.createElement(se.SeamlessDropDown,{id:"domain-name-dropdown",fullWidth:!0,className:(0,de.default)(y.dropdown),label:b("domainName"),helperText:b("domainNameHelper"),options:L,name:"domainName",value:$,onChange:function(e){J(e.target.value);var t=Ze.current.getElementsByClassName("MuiAutocomplete-clearIndicator")[0];t&&t.click()}})),be&&V&&!E&&a.createElement(ce.Z,{item:!0,sm:3},a.createElement(Je.ZP,{multiple:!0,limitTags:2,id:"domain-associates-dropdown",className:(0,de.default)(y.dropdown),options:z,disableCloseOnSelect:!0,getOptionLabel:function(e){return e.key},getOptionSelected:function(e,t){return e.value===t.value},onChange:function(e,t){var n=[];t.map((function(e){n.push(e.value)})),Re({target:{value:n.toString(),name:"domainType"}})},renderInput:function(e){return a.createElement($e.Z,(0,Ve.Z)({},e,{label:b("domainType"),placeholder:b("domainTypeHelper")}))},ref:Ze}))),a.createElement(Be.Z,null,w(Vn)&&!E&&a.createElement(Ft.Z,{className:y.spacingfLeft,control:a.createElement(At.Z,{checked:ke.isAutotransfer,onChange:function(e){Ae("isAutotransfer",e.target.checked)},name:"isAutotransfer",inputProps:{"aria-label":"primary checkbox"}}),label:b("autotransfer")}),a.createElement(se.SeamlessButton,{onClick:function(){El=null,je(ke),E?S.push("/home/customercare/resellers"):S.push("/home/reseller/resellers/children")},className:(0,de.default)(y.element,y.button),color:"secondary",variant:"outlined"},b("resetSearch","Reset Search")),!E&&a.createElement(se.SeamlessButton,{onClick:function(e){return N(!0)},className:(0,de.default)(y.element,y.button),color:"default",disabled:i,variant:"outlined"},a.createElement(Ka.Z,{fontSize:"small",style:{marginRight:10,marginLeft:-10}}),b("addMoreFilters","Add more filters")),a.createElement(se.SeamlessButton,{onClick:function(e){if("ALL"===ke.status&&(ke.status=void 0),$&&(null==ke?void 0:ke.additionalFields)&&(null==ke||ke.additionalFields.push({name:"domainCode",value:$})),E&&""===ke.resellerMSISDN)return re("Please write reseller msisdn",{variant:"error"});Oe()},className:(0,de.default)(y.element,y.button),disabled:i,color:"primary",variant:"contained"},b("search","Search"),i&&a.createElement(st.Z,{color:"inherit",size:14,thickness:6,className:y.progress})))))),a.createElement(fl,{open:P,title:"Search Reseller by additional fields",description:"Following additional fields for ".concat(ke.resellerTypeId),setOpen:N,data:El,resellerType:yl,setMainFieldValue:function(e,t){return Ae(e,t)},validationRequired:!1,isLoading:O,metaData:{resellerTypeId:ke.resellerTypeId,contractId:ke.contractId},additionalFields:Me,allWidgets:Le,skipFields:Ee,onFormSubmit:function(e){var t=[];for(var n in e)e[n]&&t.push({name:n,value:e[n]});Re({target:{value:t,name:"additionalFields"}}),N(!1)},loading:i}))};var Sl,Zl=n(15459),Tl=n(85256),_l=n(15617),xl=n(84470),Il=n(9692),Cl=null===(Sl=window)||void 0===Sl?void 0:Sl.config,Dl=null==Cl?void 0:Cl.currency,Pl=(null==Cl?void 0:Cl.currencyLocale)||"en-US",Nl=(0,re.Z)((function(e){return(0,ie.Z)({fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{fontSize:14,overflowWrap:"break-word"}})}));const kl=function(e){var t,n=e.headingProps,l=void 0===n?{xs:12,sm:3}:n,r=e.valueProps,i=void 0===r?{xs:12,sm:3}:r,o=e.title,s=e.skipEmptyCheck,c=void 0!==s&&s,u=e.parseType,d=void 0===u?"NONE":u,p=e.value,f=Nl(),v=(0,m.useTranslation)().t,g=Ct()().dateFormatter;if((!p||"string"==typeof p&&"NULL"==(null===(t=p)||void 0===t?void 0:t.toUpperCase()))&&!c)return null;if("CURRENCY"===d&&p){var h,E,y=Dl,b=0,w=!1;p&&"object"===(0,pe.Z)(p)?(y=y,b=(null===(h=p)||void 0===h?void 0:h.amount)||0,w=null!==(E=p.sign)&&void 0!==E&&E):!p||"string"!=typeof p&&"number"!=typeof p||(b=Number(p),y=Dl);try{p=(p=new Intl.NumberFormat(Pl,{style:"currency",currency:y,signDisplay:"always"}).format(b)).replace("+",""),!w&&(p=p.replace(y,""))}catch(e){var S;p=(null===(S=p)||void 0===S?void 0:S.amount)||p}}if("DATE"===d&&p)if("string"==typeof p&&(p.includes("T")||p.includes("-")))p=p.split("T")[0];else if(p="string"!=typeof p||p.includes("T")?p:parseInt(p))try{p=g(p,"YYYY-MM-DD HH:mm:ss")}catch(e){}return p&&Array.isArray(p)&&(p=p.join(", ")),a.createElement(a.Fragment,null,a.createElement(ce.Z,(0,Ve.Z)({item:!0},l),a.createElement(le.Z,{className:f.fieldHeading},v(o))),a.createElement(ce.Z,(0,Ve.Z)({item:!0},i),a.createElement(le.Z,{className:f.fieldValue},"FILE"===d&&p?a.createElement("a",{href:(0,Il.getSrc)(p),target:"_blank"},v("seeAttachment")):p)))},Rl=function(e,t){var n=URL.createObjectURL(e),a=document.createElement("a");a.href=n,a.download=t,document.body.appendChild(a),a.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),document.body.removeChild(a)},Ol=function(){(0,m.useTranslation)().t;var e=p().showErrorMessage,t=Ce().columnsToAppend,n=l().useState({}),a=(0,c.Z)(n,2),r=a[0],i=a[1],o=(null==t?void 0:t.includes("balanceStatus"))||(null==t?void 0:t.includes("inventoryStatus"))||!1;return l().useEffect((function(){o&&v("/lifecycle/reseller/status/fetch/labels").then((function(t){var n;if("SUCCESS"===(null==t||null===(n=t.status)||void 0===n?void 0:n.toUpperCase())){var a=t.data.lifecycleStatusValues,l=void 0===a?{}:a,r={};for(var o in l){var s=l[o];r[s.label]=s.nextOperation}i(r)}else e("Unable to fetch lifeline statuses")})).catch((function(t){return e(t)}))}),[o]),{lifelineStatusFlag:o,lifelineStates:r}};var jl,Al=null;function Fl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ll(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fl(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Bl=(0,re.Z)((function(e){return(0,ie.Z)({mainSection:{fontSize:e.typography.fontSize},element:{marginTop:e.spacing(.5)},progress:{marginLeft:"8px"}})}));const Ml=function(e){var t,n=e.data,a=e.loading,r=e.handleData,i=Bl(),o=(0,m.useTranslation)().t,s=fe.Ry().shape({maximumAccountBalance:fe.Rx(),maximumTransactionAmount:fe.Rx(),minimumAccountBalance:fe.Rx(),minimumTransactionAmount:fe.Rx()}),c=(0,oe.TA)({initialValues:n.form,validationSchema:s,onSubmit:function(e){return r({form:e,isOpen:!0})},enableReinitialize:!0}),u=c.values,d=c.handleChange,p=c.errors,f=c.handleSubmit,v=(c.setValues,c.setFieldValue,null===(t=window.config.resellerAdditionalConfig.payLimitPopupinputRequired)||void 0===t||t);return l().createElement(ut,{open:n.isOpen,onClose:function(){return r(Ll(Ll({},n),{},{isOpen:!1}))},onOk:f,loading:a,okButtonText:o("update"),dialogTitle:o("updatePayLimit"),dialogDescription:o("updatePayLimitDescription")},l().createElement(ce.Z,{container:!0,spacing:3},l().createElement(ce.Z,{item:!0,xs:12,sm:6,className:(0,de.default)(i.element)},l().createElement(se.SeamlessInput,{fullWidth:!0,className:(0,de.default)(i.element),required:!0,error:!!p.payLimitValue,helperText:p.payLimitValue||o("pleaseEnterValue"),name:"payLimitValue",value:u.payLimitValue,disabled:v,onChange:d,label:o("payLimitValue","Pay Limit Amount")})),l().createElement(ce.Z,{item:!0,xs:12,sm:6,className:(0,de.default)(i.element)},l().createElement(se.SeamlessDropDown,{id:"paylimitPeriod-drop-down",fullWidth:!0,error:!!p.paylimitPeriod,className:(0,de.default)(i.element),label:o("paylimitPeriod","Pay Limit Period"),helperText:p.paylimitPeriod||o("pleaseSelectValue"),options:[{value:0,key:o("dropdownSelectPlaceholder")},{value:1,key:o("1Day")},{value:7,key:o("1Week")},{value:30,key:o("1Month")},{value:365,key:o("1Year")}],name:"paylimitPeriod",value:u.paylimitPeriod,onChange:d,disabled:v})),l().createElement(ce.Z,{item:!0,xs:12,sm:6,className:(0,de.default)(i.element)},l().createElement(se.SeamlessInput,{fullWidth:!0,className:(0,de.default)(i.element),helperText:p.maximumAccountBalance||o("pleaseEnterValue"),name:"maximumAccountBalance",value:u.maximumAccountBalance,onChange:d,label:o("maximumAccountBalance","Maximum Account Balance")})),l().createElement(ce.Z,{item:!0,xs:12,sm:6,className:(0,de.default)(i.element)},l().createElement(se.SeamlessInput,{fullWidth:!0,className:(0,de.default)(i.element),helperText:p.maximumTransactionAmount||o("pleaseEnterValue"),name:"maximumTransactionAmount",value:u.maximumTransactionAmount,onChange:d,label:o("maximumTransactionAmount","Maximum Transaction Amount")})),l().createElement(ce.Z,{item:!0,xs:12,sm:6,className:(0,de.default)(i.element)},l().createElement(se.SeamlessInput,{fullWidth:!0,className:(0,de.default)(i.element),helperText:p.minimumAccountBalance||o("pleaseEnterValue"),name:"minimumAccountBalance",value:u.minimumAccountBalance,onChange:d,label:o("minimumAccountBalance","Minimum Account Balance")})),l().createElement(ce.Z,{item:!0,xs:12,sm:6,className:(0,de.default)(i.element)},l().createElement(se.SeamlessInput,{fullWidth:!0,className:(0,de.default)(i.element),helperText:p.minimumTransactionAmount||o("pleaseEnterValue"),name:"minimumTransactionAmount",value:u.minimumTransactionAmount,onChange:d,label:o("minimumTransactionAmount","Minimum Transaction Amount")}))))};function Wl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Vl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wl(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ql=(0,re.Z)((function(e){return(0,ie.Z)({mainSection:{fontSize:e.typography.fontSize},element:{marginTop:e.spacing(.5)},progress:{marginLeft:"8px"}})}));const Ul=function(e){var t=e.data,n=e.loading,a=e.handleData,r=ql(),i=(0,m.useTranslation)().t,o=fe.Ry().shape({roleId:fe.Z_(),password:fe.Z_(),email:fe.Z_(),phone:fe.Z_(),userId:fe.Z_()}),s=(0,oe.TA)({initialValues:t.form,validationSchema:o,onSubmit:function(e){return a({form:e,isOpen:!0})},enableReinitialize:!0}),c=s.values,u=s.handleChange,d=s.errors,p=s.handleSubmit;return l().createElement(ut,{open:t.isOpen,onClose:function(){return a(Vl(Vl({},t),{},{isOpen:!1}))},onOk:p,loading:n,okButtonText:i("update"),dialogTitle:i("updateUserConfirmationTitle"),dialogDescription:i("updateUserConfirmationDescription")},l().createElement(ce.Z,{container:!0,spacing:3},l().createElement(ce.Z,{item:!0,xs:12,sm:6,className:(0,de.default)(r.element)},l().createElement(se.SeamlessInput,{fullWidth:!0,className:(0,de.default)(r.element),required:!0,error:!!d.userId,disabled:!0,helperText:(null==d?void 0:d.userId)||i("pleaseEnterValue"),name:"userId",value:c.userId,onChange:u,label:i("userId")})),l().createElement(ce.Z,{item:!0,xs:12,sm:6,className:(0,de.default)(r.element)},l().createElement(Za,{name:"roleId",classes:(0,de.default)(r.element),value:c.roleId,defaultKey:"importId",required:!0,errors:d,handleChange:u})),l().createElement(ce.Z,{item:!0,xs:12,sm:6,className:(0,de.default)(r.element)},l().createElement(se.SeamlessInput,{fullWidth:!0,className:(0,de.default)(r.element),helperText:d.phone||i("pleaseEnterValue"),name:"phone",value:c.phone,onChange:u,label:i("phone")})),l().createElement(ce.Z,{item:!0,xs:12,sm:6,className:(0,de.default)(r.element)},l().createElement(se.SeamlessInput,{fullWidth:!0,className:(0,de.default)(r.element),helperText:d.email||i("pleaseEnterValue"),name:"email",value:c.email,onChange:u,label:i("email")})),l().createElement(ce.Z,{item:!0,xs:12,sm:6,className:(0,de.default)(r.element)},l().createElement(se.SeamlessInput,{fullWidth:!0,className:(0,de.default)(r.element),helperText:d.password||i("pleaseEnterValue"),name:"password",value:c.password,onChange:u,label:i("password")}))))};var Kl=n(61837),zl=n(35083),Hl=n(81250);const Gl=n.p+"images/wallet.png";var Yl=(0,re.Z)((function(e){return(0,ie.Z)({boxSize:{width:500,height:250,margin:e.spacing(1)},typo:{fontSize:20},icon:{color:e.palette.primary.main,height:e.spacing(7),width:e.spacing(7)},button:{"&:hover":{backgroundColor:e.palette.primary.main},backgroundColor:e.palette.primary.main,width:e.spacing(3),height:e.spacing(3),marginRight:e.spacing(1)},moneyValue:{fontSize:"25px"},paper:{backgroundImage:"url(".concat(Gl,")"),backgroundSize:"contain",backgroundPosition:"bottom",backgroundRepeat:"no-repeat",padding:e.spacing(2),width:320,height:180,display:"flex",flexDirection:"row",justifyContent:"space-between",borderRadius:"5",margin:e.spacing(1)},rowSpace:{marginTop:e.spacing(1),marginBottom:e.spacing(1),padding:e.spacing(2)},box:{backgroundColor:"rgb(245, 245, 245)!important"}})}));const $l=function(e){e.label;var t,n,l=e.account,r=(e.className,e.index),i=Yl(),o=(0,m.useTranslation)().t,s=a.useState(!0),u=(0,c.Z)(s,2),d=u[0],p=u[1];return a.createElement(ot.Z,{className:(0,de.default)(i.paper)},a.createElement(ce.Z,{container:!0},d&&a.createElement(ce.Z,{container:!0,spacing:2},a.createElement(ce.Z,{item:!0,xs:9},a.createElement(le.Z,{className:(0,de.default)(i.typo)},l.account.accountTypeId)),a.createElement(ce.Z,{item:!0,xs:3},a.createElement(zl.Z,{className:(0,de.default)(i.icon)}))),a.createElement(ce.Z,{container:!0},!d&&a.createElement(a.Fragment,null,a.createElement(kl,{headingProps:{xs:7,sm:7,lg:5,md:5},valueProps:{xs:5,sm:5,lg:6,md:6},title:o("accountProviderId","Account Provider Id"),value:l.account.accountProviderId||l.accountDescription}),a.createElement(kl,{headingProps:{xs:7,sm:7,lg:5,md:5},valueProps:{xs:5,sm:5,lg:6,md:6},title:o("creationDate","Account Creation Date"),parseType:"DATE",value:l.account.creationDate}),a.createElement(kl,{headingProps:{xs:7,sm:7,lg:5,md:5},valueProps:{xs:5,sm:5,lg:6,md:6},title:o("activationDate","Account Activation Date"),parseType:"DATE",value:l.account.activationDate}),a.createElement(kl,{title:o("status","Account Status"),value:l.status,headingProps:{xs:7,sm:7,lg:5,md:5},valueProps:{xs:5,sm:5,lg:6,md:6}}),a.createElement(kl,{title:o("owner","Account Owner"),value:l.owner,headingProps:{xs:7,sm:7,lg:5,md:5},valueProps:{xs:5,sm:5,lg:6,md:6}}))),a.createElement(ce.Z,{container:!0,spacing:2},a.createElement(ce.Z,{item:!0,xs:8,style:{marginBottom:25,marginTop:-50}},d&&a.createElement(le.Z,{variant:"caption"},l.balance?"".concat(null===(t=l.balance)||void 0===t?void 0:t.currency," ").concat(null===(n=l.balance)||void 0===n?void 0:n.value):"-"))),a.createElement(ce.Z,{container:!0,spacing:2,justify:"flex-end"},a.createElement(ce.Z,{item:!0},a.createElement(ue.ZP,{title:"View"},a.createElement(Kl.Z,{className:(0,de.default)(i.button),color:"primary",key:l.account.accountId+r,onClick:function(){p(!d)}},a.createElement(Hl.Z,{style:{color:"white"}})))))))},Jl=function(e){var t=e.data,n=e.resellerInfo,a=(0,re.Z)((function(e){return(0,ie.Z)({dialogWrapper:{textAlign:"center","& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},dialogTitle:{},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginBottom:e.spacing(3)},btnSpace:{marginRight:e.spacing(2)},btnSpacing:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}})})),r=((0,o.useSelector)((function(e){return e.auth})).user.requestedPrincipalId,(0,m.useTranslation)().t),i={title:t.resellerId,id:t.resellerId,name:t.resellerId,path:t.resellerPath,children:[]},s=l().useState(i),u=(0,c.Z)(s,2),d=u[0],f=u[1],v=l().useState(!1),g=(0,c.Z)(v,2),h=g[0],E=(g[1],l().useState(!1)),y=(0,c.Z)(E,2),b=y[0],w=y[1],S=a(),Z=(p().showErrorMessage,function(){w(!1)}),T=function e(t,n){return t.reduce((function(t,a){return t||(a.path===n?a:a.children?e(a.children,n):void 0)}),null)};return l().createElement(l().Fragment,null,l().createElement(se.SeamlessButton,{onClick:function(){i.children=[],f(i);var e=i,a=t.resellerPath,l=e.path.split("/"),r=l.length;e.id=l[0],e.path=l[0],e.title=l[0],e.name=l[0];for(var o=1;o<r;o++){var s=l.slice(0,o+1).join("/");T(e.children,s)||(e.children.push({title:l[o],id:l[o],name:l[o],path:s,children:[]}),e=e.children.slice(-1)[0])}var c=n.users.filter((function(e){return e.userId!==t.resellerId})).map((function(e){return{title:e.userId||"",id:e.userId||"",name:e.userId||"",path:a+"/".concat(e.userId),children:[]}}));e.children=c,f(i),w(!0)},color:"primary",disabled:h,variant:"contained",className:S.btnSpacing},r("orgChartHierarchy")),l().createElement(se.SeamlessDialog,{open:b,onClose:Z,className:S.dialogWrapper,maxWidth:"md"},l().createElement(ne.Z,{className:S.dialogTitle,style:{textAlign:"center"}},r("resellerHierarchy")),l().createElement(te.Z,null,l().createElement(Er,{data:d,pan:!1,zoom:!1})),l().createElement(ee.Z,null,l().createElement(se.SeamlessButton,{type:"button",variant:"outlined",color:"primary",className:S.btnSpace,onClick:Z},r("close")))))};function Xl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ql(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xl(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var er=(0,re.Z)((function(e){return(0,ie.Z)({btnSpacing:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},spacingTop:{marginTop:e.spacing(3)},spacingBottom:{marginBottom:e.spacing(3)},colHead:{textTransform:"capitalize",fontWeight:"bold"},rowSpacing:{marginBottom:e.spacing(2)},row:{marginBottom:e.spacing(2),marginTop:e.spacing(2),marginLeft:e.spacing(1),marginRight:e.spacing(1)},fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{textTransform:"capitalize",fontSize:14,wordBreak:"break-all","& .import-file-name":{textTransform:"none !important"}},flexBox:{display:"flex",alignItems:"center"},fullWidth:{width:"100%"},boxSize:{width:500,height:250,margin:e.spacing(1)},rowSpace:{marginTop:e.spacing(1),marginBottom:e.spacing(1),padding:e.spacing(2)},box:{backgroundColor:"rgb(245, 245, 245)!important"},dialogWrapper:{textAlign:"center","& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},dialogTitle:{},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginBottom:e.spacing(3)},btnSpace:{marginRight:e.spacing(2)}})})),tr=(0,Zl.Z)((function(e){return(0,ie.Z)({root:{backgroundColor:e.palette.background.default,borderBottom:"1px solid rgba(0, 0, 0, .125)",marginBottom:-1,minHeight:56,"&$expanded":{minHeight:56}},content:{"&$expanded":{margin:0}},expanded:{}})}))(qa.Z),nr={BLOCK:"UNBLOCK",UNBLOCK:"BLOCK",BLOCKED:"UNBLOCK",UNBLOCKED:"BLOCK",FROZEN:"BLOCK",UNFROZEN:"BLOCK",DEACTIVATED:"BLOCK",ACTIVATE:"BLOCK"},ar={FREEZE:"UNFREEZE",UNFREEZE:"FREEZE",FROZEN:"UNFREEZE",UNFROZEN:"FREEZE",BLOCKED:"FREEZE",UNBLOCKED:"FREEZE",DEACTIVATED:"FREEZE",ACTIVATE:"FREEZE"},lr={ACTIVATE:"DEACTIVATE",FROZEN:"DEACTIVATE",UNFROZEN:"DEACTIVATE",BLOCKED:"DEACTIVATE",UNBLOCKED:"DEACTIVATE",DEACTIVATED:"ACTIVATE"},rr={resetProcessing:!1},ir={isLoading:!1,data:null},or="",sr={},cr={},ur=[],dr="";const mr=function(e){var t,n,r,i,u,d,f,g,h,E,y,b,w,S,Z,T,_,x,I,C,D,P,N,k,O,j,A=e.id,F=e.data,L=e.handleStatus,W=e.handleLifelineStatus,V=e.handleExpirePassword,q=e.handleResetPassword,U=e.handleResetWrongPasswordAttempts,K=e.loading,z=e.resellerInfo,H=e.customFeatureList,G=void 0===H?[]:H,Y=er(),$=Jn()(),Q=$.checkPermission,ee=$.checkFederatedPermission,te=(0,m.useTranslation)().t,ne=(0,s.useHistory)(),re=(0,o.useSelector)((function(e){return e.auth.user})),ie=Ol(),oe=ie.lifelineStates,ue=ie.lifelineStatusFlag,me=p(),pe=me.showErrorMessage,fe=me.showSuccessMessage,ve=function(e,t){var n,a,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=l().useState(!1),o=(0,c.Z)(i,2),s=o[0],u=o[1],d=(0,m.useTranslation)().t,f=p(),v=f.showErrorMessage,g=f.showInfoMessage,h=l().useState(null),E=(0,c.Z)(h,2),y=E[0],b=E[1];t&&null!==(n=t.info)&&void 0!==n&&n.resellerData&&(jl=null===(a=t.info.resellerData)||void 0===a?void 0:a.resellerId);var w=l().useCallback((function(e,t){e&&(u(!0),R(e).then((function(n){0===n.resultCode?t&&t(null,n):Al&&t?t(null,Al):(g(d("noTemplateFound",{template:e})),R("DEFAULT").then((function(e){0===e.resultCode?(t&&t(null,e),Al=e):(t&&t(e),Al=null,g(d("defaultTemplateNotFound")))})))})).catch((function(e){return v(e.message)})).finally((function(){return u(!1)})))}),[]);l().useEffect((function(){var t;if(e){var n=null===(t=e.resellerData)||void 0===t?void 0:t.resellerTypeId;w(n,(function(e,t){b(t||null)}))}}),[w,e]);var S=l().useMemo((function(){return Se(y)}),[y]),Z=l().useMemo((function(){return S.filter((function(e){return"generic"===e.fieldType}))}),[S]),T=l().useMemo((function(){return S.filter((function(e){return"additionalInformation"===e.fieldType}))}),[S]),_=l().useMemo((function(){if(!e)return{};var t=xe(S,e,r);return r&&(t.resellerType=t.resellerTypeId),r||(t.parentResellerId=jl),t}),[S,e,r]);return{allWidgets:S,initFormData:_,additionalFields:T,genericFields:Z,resellerTemplate:y,isTemplateGetterLoading:s}}(z,re,!0),ge=ve.additionalFields,he=void 0===ge?[]:ge,Ee=ve.initFormData,ye=ve.allWidgets,be=a.useState("panel1"),Ze=(0,c.Z)(be,2),Te=Ze[0],_e=Ze[1],Ie=a.useState(ir),Ce=(0,c.Z)(Ie,2),De=Ce[0],Pe=Ce[1],Ne=a.useState(ir),ke=(0,c.Z)(Ne,2),Oe=ke[0],je=ke[1],Fe=a.useState(!1),Le=(0,c.Z)(Fe,2),Me=Le[0],We=Le[1],Ve=a.useState({state:!1,data:null}),Ue=(0,c.Z)(Ve,2),ze=Ue[0],He=Ue[1],Ge=a.useState({isOpen:!1,form:{}}),Ye=(0,c.Z)(Ge,2),$e=Ye[0],Je=Ye[1],Xe=a.useState(rr),Qe=(0,c.Z)(Xe,2),et=Qe[0],tt=Qe[1],nt="Active"!==F.status?null===(t=F.status)||void 0===t?void 0:t.toUpperCase():"UNBLOCK",at="Active"!==F.status?null===(n=F.status)||void 0===n?void 0:n.toUpperCase():"UNFREEZE",lt="Active"!==F.status?null===(r=F.status)||void 0===r?void 0:r.toUpperCase():"ACTIVATE",rt=nr[nt],it=ar[at],ot=lr[lt],st=(null==z?void 0:z.lifecycleAttributes)||{},ct=st.balanceStatus||"inactive",dt=st.inventoryStatus||"inactive",mt=oe[ct],pt=oe[dt],ft=(null===(i=re.userId)||void 0===i?void 0:i.toLowerCase())===(null===(u=F.resellerId)||void 0===u?void 0:u.toLowerCase()),vt=null===(d=window)||void 0===d||null===(f=d.config)||void 0===f?void 0:f.resellerAdditionalConfig,gt=(null==vt?void 0:vt.hideDataForResellerDetail)||[],ht=null==vt?void 0:vt.hideActionsWhenDeactivated,Et={accountId:"",accountTypeId:"",maximumAccountBalance:"",maximumTransactionAmount:"",minimumAccountBalance:"",minimumTransactionAmount:"",payLimitValue:0,paylimitPeriod:0,resellerId:A},yt=a.useState({isOpen:!1,form:Et}),bt=(0,c.Z)(yt,2),wt=bt[0],St=bt[1];a.useEffect((function(){for(var e in he){var t,n,a=he[e];null!==(t=a.validation)&&void 0!==t&&t.hideIf&&""!==a.validation.hideIf&&(sr[a.id]=null===(n=a.validation)||void 0===n?void 0:n.hideIf,ur.push(a.id))}}),[he]),a.useEffect((function(){for(var e in ye){var t=ye[e];cr[t.id]=t.placeholder}}),[ye]);var Zt=a.useCallback((function(e,t){var n={resellerId:A,users:[{userId:e,incorrectAttempts:0,password:t}]};tt({resetProcessing:!0}),U&&U(n)}),[A]);a.useEffect((function(){var e=new URLSearchParams(window.location.search);e.has("type")&&(dr="?source="+(e.get("type")||"RESELLERID"))}),[]);var Tt=function(e){var t,n,a,l,r,i=null==z||null===(t=z.users)||void 0===t?void 0:t.find((function(t){return t.userId===e}));if(!i)return pe("Unable to find the user against ID: ".concat(e));i.phone=(null==i||null===(n=i.fields)||void 0===n||null===(a=n.parameters)||void 0===a?void 0:a.MSISDN)||"",i.email=(null==i||null===(l=i.fields)||void 0===l||null===(r=l.parameters)||void 0===r?void 0:r.Email)||"",Je({isOpen:!0,form:i||{}})},_t=a.useCallback((function(e){if(!e.isOpen)return tt(rr),St({isOpen:!1,form:Et});tt({payLimitProcessing:!0});var t=e.form;t.paylimitPeriod=86400*t.paylimitPeriod,function(e){return v("/dms/v1/resellers/updatePayLimit",{method:"PUT",body:e})}(t).then((function(e){if(0===e.resultCode){var n=e.resultDescription||e.resultMessage||"Password expired successfully";fe("".concat(n)),St({form:Et,isOpen:!1}),ne.push("/home/reseller/resellers/view/".concat(t.resellerId))}else pe(e)})).catch((function(e){return pe(e)})).finally((function(){return tt(rr)}))}),[]);a.useEffect((function(){"contractInfo"===Te&&or&&(null==De?void 0:De.id)!==or&&(Pe({isLoading:!0,data:null,id:or}),J("/".concat(or)).then((function(e){Pe({id:or,isLoading:!1,data:e})})).catch((function(e){return xt(e,"contractInfo")})))}),[Te]);var xt=function(e,t){if(e){var n=Ae(e);pe(n)}"contractInfo"===t&&Pe(ir),"lastTransaction"===t&&je(ir)},It=a.useCallback((function(){A&&(null==Oe?void 0:Oe.id)!==A&&(je({isLoading:!0,data:null}),function(e){return v("/lifecycle/reseller/".concat(e,"/transactions"))}(A).then((function(e){var t=e.data,n="NO_DATA"===e.status&&te("noDataFound");je({isLoading:!1,data:t,id:A,message:n})})).catch((function(e){return xt(e,"lastTransaction")})))}),[A,Oe]),Ct=function(e,t){return function(n,a){t&&(or=t),"lastTransaction"===e&&It(),_e(!!a&&e)}};return a.createElement(Be.Z,{display:"flex",flexDirection:"column"},("Deactivated"!=F.status||"Deactivated"===F.status&&!ht)&&a.createElement(Be.Z,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},null!=z&&z.lifecycleAttributes||ue?a.createElement("div",null,mt&&Q(kn)&&a.createElement(se.SeamlessButton,{onClick:function(){return W&&W([A],"balance",mt)},color:"primary",disabled:K,variant:"contained",className:Y.btnSpacing},te("".concat(mt,"Balance"))),pt&&Q(Rn)&&a.createElement(se.SeamlessButton,{onClick:function(){return W&&W([A],"scratchcard",pt)},color:"primary",disabled:K,variant:"contained",className:Y.btnSpacing},te("".concat(pt,"Inventory")))):a.createElement("div",null,rt&&(Q(_n)||ee(G,_n))&&a.createElement(se.SeamlessButton,{onClick:function(){return L&&L(rt)},color:"primary",disabled:K,variant:"contained",className:Y.btnSpacing},te("".concat(rt,"Reseller"))),it&&(Q(In)||ee(G,In))&&a.createElement(se.SeamlessButton,{onClick:function(){return L&&L(it)},color:"primary",disabled:K,variant:"contained",className:Y.btnSpacing},te("".concat(it,"Reseller"))),!ft&&ot&&(Q(Tn)||ee(G,Tn))&&a.createElement(se.SeamlessButton,{onClick:function(){return L&&L(ot)},color:"primary",disabled:K,variant:"contained",className:Y.btnSpacing},te("".concat(ot,"Reseller"))),(Q(On)||ee(G,On))&&a.createElement(Jl,{data:F,resellerInfo:z})),(Q(vn)||ee(G,vn))&&a.createElement("div",null,a.createElement(s.Link,{to:"/home/reseller/resellers/edit/".concat(A||F.resellerId).concat(dr),style:{textAlign:"right"}},a.createElement(aa.Z,{fontSize:"small",color:"primary"})))),a.createElement(Tl.Z,{className:(0,de.default)(Y.spacingTop,Y.spacingBottom)}),K&&a.createElement(ae.Z,null),(Q(Hn)||ee(G,Hn))&&a.createElement(ce.Z,{container:!0,className:(0,de.default)(Y.rowSpace,Y.box)},a.createElement(Be.Z,{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-evenly"},F&&F.accounts&&F.accounts.map((function(e,t){return a.createElement(a.Fragment,{key:t},a.createElement($l,{account:e,index:t}))})))),a.createElement(Wa.Z,{square:!0,expanded:"panel1"===Te,onChange:Ct("panel1"),className:Y.fullWidth},a.createElement(tr,{"aria-controls":"panel2d-content",id:"panel2d-header",expandIcon:a.createElement(Ua.Z,null)},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},te("resellerInformation"))),a.createElement(Va.Z,null,a.createElement(ce.Z,{container:!0,spacing:3,className:Y.row,alignItems:"center"},a.createElement(kl,{valueProps:{xs:12,sm:9},title:te("resellerPath","Reseller Path"),value:F.resellerPath}),a.createElement(kl,{title:cr.resellerId||te("resellerId"),value:F.resellerId}),a.createElement(kl,{title:cr.resellerName||te("resellerName"),value:F.resellerName}),a.createElement(kl,{title:cr.resellerTypeId||te("resellerTypeId"),value:F.resellerTypeId}),a.createElement(kl,{title:cr.resellerTypeName||te("resellerTypeName"),value:F.resellerTypeName}),a.createElement(kl,{title:cr.resellerMSISDN||te("resellerMSISDN","Reseller MSISDN"),value:F.resellerMSISDN}),!(null!=z&&z.lifecycleAttributes)&&a.createElement(kl,{title:cr.status||te("status"),value:F.status}),(null==z||null===(g=z.lifecycleAttributes)||void 0===g?void 0:g.balanceStatus)&&a.createElement(kl,{title:te("balanceStatus"),value:null===(h=z.lifecycleAttributes)||void 0===h?void 0:h.balanceStatus}),(null==z||null===(E=z.lifecycleAttributes)||void 0===E?void 0:E.balanceLifeline)&&a.createElement(kl,{title:te("balanceLifeline"),value:null===(y=z.lifecycleAttributes)||void 0===y?void 0:y.balanceLifeline}),(null==z||null===(b=z.lifecycleAttributes)||void 0===b?void 0:b.inventoryStatus)&&a.createElement(kl,{title:te("inventoryStatus"),value:null===(w=z.lifecycleAttributes)||void 0===w?void 0:w.inventoryStatus}),(null==z||null===(S=z.lifecycleAttributes)||void 0===S?void 0:S.inventoryLifeline)&&a.createElement(kl,{title:te("inventoryLifeline"),value:null===(Z=z.lifecycleAttributes)||void 0===Z?void 0:Z.inventoryLifeline}),a.createElement(kl,{title:te("clusterId","Cluster Id"),value:F.clusterId}),a.createElement(kl,{title:te("oldClusterId","Old Cluster Id"),value:F.oldClusterId}),a.createElement(kl,{title:te("clusterCycleId","Cluster Cycle Id"),value:F.clusterCycleId}),a.createElement(kl,{title:cr.resellerJuridicalName||te("resellerJuridicalName"),value:F.resellerJuridicalName}),a.createElement(kl,{title:cr.distributorId||te("distributorId"),value:F.distributorId}),a.createElement(kl,{title:te("principalIds","Principal Ids"),value:null===(T=F.principalIds)||void 0===T?void 0:T.join(", ")}),"Active"!==F.status&&F.fields&&F.fields.parameters.change_reason_comment&&a.createElement(kl,{title:te("reasonText"),value:F.fields&&F.fields.parameters.change_reason_comment}),"Deactivated"===F.status&&F.fields&&F.fields.parameters.change_status_url&&a.createElement(a.Fragment,null,a.createElement(ce.Z,{item:!0,xs:12,sm:3},a.createElement(le.Z,{className:(0,de.default)(Y.fieldHeading)},te("reasonDocument"))),a.createElement(ce.Z,{item:!0,xs:12,sm:3,className:Y.flexBox},a.createElement(X.Z,{onClick:function(){return function(e){fetch(e.fields.parameters.change_status_url).then((function(e){return e.blob()})).then(function(){var t=(0,qe.Z)(Ke().mark((function t(n){return Ke().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Rl(n,"".concat(e.status,"-").concat(e.resellerId,"-reason-file.png"));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}(F)},style:{marginLeft:"10px",border:"1px solid"}},a.createElement(xl.Z,{fontSize:"small"}))))))),F&&F.contractId&&(Q(Gn)||ee(G,Gn))&&a.createElement(Wa.Z,{square:!0,expanded:"contractInfo"===Te,onChange:Ct("contractInfo",F.contractId),className:Y.fullWidth},a.createElement(tr,{"aria-controls":"contractInfo-content",id:"contractInfo-header",expandIcon:a.createElement(Ua.Z,null)},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},te("contractInfo"))),a.createElement(Va.Z,null,a.createElement(ce.Z,{container:!0,spacing:3,className:Y.row,alignItems:"center"},De.isLoading&&a.createElement(ae.Z,{style:{width:"100%"}}),De.data&&a.createElement(a.Fragment,null,a.createElement(kl,{title:cr.contractKey||te("contractKey"),value:null===(_=De.data)||void 0===_?void 0:_.contractKey}),a.createElement(kl,{title:cr.importId||te("importId"),value:null===(x=De.data)||void 0===x?void 0:x.importId}),a.createElement(kl,{title:cr.contractName||te("contractName"),value:null===(I=De.data)||void 0===I?void 0:I.name}),a.createElement(kl,{title:cr.description||te("description"),value:null===(C=De.data)||void 0===C?void 0:C.description}),a.createElement(kl,{title:cr.resellerTypeId||te("resellerTypeId"),value:null===(D=De.data)||void 0===D?void 0:D.resellerType}))))),A&&F&&(Q(hn)||ee(G,hn))&&a.createElement(Wa.Z,{square:!0,expanded:"lastTransaction"===Te,onChange:Ct("lastTransaction"),className:Y.fullWidth},a.createElement(tr,{"aria-controls":"lastTransaction-content",id:"lastTransaction-header",expandIcon:a.createElement(Ua.Z,null)},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},te("lastTransactionInfo"))),a.createElement(Va.Z,null,a.createElement(ce.Z,{container:!0,spacing:3,className:Y.row,alignItems:"center"},Oe.isLoading&&a.createElement(ae.Z,{style:{width:"100%"}}),Oe.message&&!Oe.data&&a.createElement(kl,{title:Oe.message,skipEmptyCheck:!0,value:""}),Oe.data&&a.createElement(a.Fragment,null,a.createElement(kl,{title:cr.resellerId||te("resellerId"),value:null===(P=Oe.data)||void 0===P?void 0:P.resellerId}),a.createElement(kl,{title:te("lastSenderBalanceTransaction"),value:null===(N=Oe.data)||void 0===N?void 0:N.lastSenderBalanceTransaction}),a.createElement(kl,{title:te("lastReceiverBalanceTransaction"),value:null===(k=Oe.data)||void 0===k?void 0:k.lastReceiverBalanceTransaction}),a.createElement(kl,{title:te("lastSenderInventoryTransaction"),value:null===(O=Oe.data)||void 0===O?void 0:O.lastSenderInventoryTransaction}),a.createElement(kl,{title:te("lastReceiverInventoryTransaction"),value:null===(j=Oe.data)||void 0===j?void 0:j.lastReceiverInventoryTransaction}))))),(Q(qn)||ee(G,qn))&&!gt.includes("addressSection")&&F.address&&a.createElement(Wa.Z,{square:!0,expanded:"panel2"===Te,onChange:Ct("panel2"),className:Y.fullWidth},a.createElement(tr,{"aria-controls":"panel2d-content",id:"panel2d-header",expandIcon:a.createElement(Ua.Z,null)},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},te("resellerAddressInformation","Reseller Address Information"))),a.createElement(Va.Z,null,a.createElement(ce.Z,{container:!0,spacing:3,className:Y.row,alignItems:"center"},a.createElement(kl,{title:cr.phone||te("phone"),skipEmptyCheck:!0,value:F.address.phone}),a.createElement(kl,{title:cr.email||te("email","Email"),skipEmptyCheck:!0,value:F.address.email}),!gt.includes("fax")&&a.createElement(kl,{title:cr.fax||te("fax","Fax"),skipEmptyCheck:!0,value:F.address.fax}),a.createElement(kl,{title:te("timezone","Timezone"),skipEmptyCheck:!0,value:F.timezone}),a.createElement(kl,{valueProps:{xs:12,sm:9},title:cr.address||te("address","Reseller Address"),value:"".concat(F.address.street).concat(F.address.zip&&", ( "+F.address.zip+" ),"," ").concat(F.address.city&&" "+F.address.city+", "," ").concat(F.address.country)})))),(Q(Un)||ee(G,Un))&&z&&z.users&&z.users.length>0&&a.createElement(Wa.Z,{square:!0,expanded:"panel3"===Te,onChange:Ct("panel3"),className:Y.fullWidth},a.createElement(tr,{"aria-controls":"panel3d-content",id:"panel3d-header",expandIcon:a.createElement(Ua.Z,null)},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},te("resellerUsersInformation","Reseller User Information"))),a.createElement(Va.Z,null,a.createElement(ce.Z,{container:!0,spacing:3,className:Y.row,alignItems:"center"},z.users.map((function(e,t){var n,l,r,i;return a.createElement(ce.Z,{container:!0,spacing:3,key:e.userId,className:Y.rowSpacing},t>0&&a.createElement(ce.Z,{item:!0,xs:12},a.createElement(Tl.Z,{variant:"middle"})),a.createElement(pr,{user:e,resellerId:F.resellerId,id:A,loading:K,isLoggedInUser:ft,actionInProgress:et,doReset:Zt,classes:Y,handleExpirePassword:V,handleResetPassword:q,handleDeleteUser:function(e){return He({state:!0,data:e})},handleUpdateUser:Tt,customFeatureList:G}),a.createElement(kl,{title:te("userId"),value:e.userId}),a.createElement(kl,{title:te("password"),value:e.password}),a.createElement(kl,{title:te("phone"),value:null==e||null===(n=e.fields)||void 0===n||null===(l=n.parameters)||void 0===l?void 0:l.MSISDN}),a.createElement(kl,{title:te("email"),value:null==e||null===(r=e.fields)||void 0===r||null===(i=r.parameters)||void 0===i?void 0:i.email}),a.createElement(kl,{title:te("roleId",we("roleId")),value:e.roleId}),a.createElement(kl,{title:te("roleName",we("roleName")),value:e.roleName}),a.createElement(kl,{title:te("passwordChangeRequired",we("passwordChangeRequired")),value:e.passwordChangeRequired?"Yes":"No"}),a.createElement(kl,{title:te("webUser",we("webUser")),value:e.webUser?"Yes":"No"}),a.createElement(kl,{title:te("terminalUser",we("terminalUser")),value:e.terminalUser?"Yes":"No"}))}))))),(Q(Kn)||ee(G,Kn))&&F&&F.accounts&&0!==F.accounts.length&&a.createElement(Wa.Z,{square:!0,expanded:"panel4"===Te,onChange:Ct("panel4"),className:Y.fullWidth},a.createElement(tr,{"aria-controls":"panel4d-content",id:"panel4d-header",expandIcon:a.createElement(Ua.Z,null)},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},te("resellerAccountsInformation"))),a.createElement(Va.Z,null,a.createElement(ce.Z,{container:!0,spacing:3,className:Y.row,alignItems:"center"},a.createElement(Ml,{data:wt,loading:et.payLimitProcessing,handleData:_t}),F&&F.accounts&&F.accounts.map((function(e,t){var n,l,r,i,o,s,c,u,d,m,p,f,v,g,h,E,y,b,w,S,Z,T;return a.createElement(a.Fragment,{key:e.account.accountId+t},a.createElement(ce.Z,{item:!0,xs:12,style:{textAlign:"right"}},(Q(Wn)||ee(G,Wn))&&a.createElement(se.SeamlessButton,{onClick:function(){return function(e){var t,n,a,l,r,i=(null==e?void 0:e.payLimitPeriod)>0?e.payLimitPeriod/86400:0;St({form:Ql(Ql({},Et),{},{accountId:e.account.accountId,accountTypeId:e.account.accountTypeId,payLimitValue:(null===(t=e.payLimit)||void 0===t?void 0:t.value)||0,paylimitPeriod:i,maximumAccountBalance:(null===(n=e.maximumAccountBalance)||void 0===n?void 0:n.value)||"",maximumTransactionAmount:(null===(a=e.maximumTransactionAmount)||void 0===a?void 0:a.value)||"",minimumAccountBalance:(null===(l=e.minimumAccountBalance)||void 0===l?void 0:l.value)||"",minimumTransactionAmount:(null===(r=e.minimumTransactionAmount)||void 0===r?void 0:r.value)||""}),isOpen:!0})}(e)},color:"secondary",disabled:K,variant:"contained",className:Y.btnSpacing},te("updatePayLimit","Update Pay Limit"))),a.createElement(kl,{title:te("accountId","Account Id"),value:e.account.accountId}),a.createElement(kl,{title:te("accountTypeId","Account Type Id"),value:e.account.accountTypeId}),a.createElement(kl,{title:te("accountProviderId","Account Provider Id"),value:e.account.accountProviderId||e.accountDescription}),a.createElement(kl,{title:te("creationDate","Account Creation Date"),parseType:"DATE",value:e.account.creationDate}),a.createElement(kl,{title:te("activationDate","Account Activation Date"),parseType:"DATE",value:e.account.activationDate}),a.createElement(kl,{title:te("status","Account Status"),value:e.status}),a.createElement(kl,{title:te("owner","Account Owner"),value:e.owner}),a.createElement(kl,{title:te("Balance","Account Balance"),parseType:"CURRENCY",value:{amount:null===(n=e.balance)||void 0===n?void 0:n.value,currency:(null===(l=e.balance)||void 0===l?void 0:l.currency)||e.currency,sign:!0}}),!gt.includes("creditLimit")&&a.createElement(kl,{title:te("creditLimit","Account Credit Limit"),parseType:"CURRENCY",value:{amount:null===(r=e.creditLimit)||void 0===r?void 0:r.value,currency:(null===(i=e.creditLimit)||void 0===i?void 0:i.currency)||e.currency,sign:!0}}),!gt.includes("availableAmount")&&a.createElement(kl,{title:te("availableAmount","Account available amount"),parseType:"CURRENCY",value:{amount:null===(o=e.availableAmount)||void 0===o?void 0:o.value,currency:(null===(s=e.availableAmount)||void 0===s?void 0:s.currency)||e.currency,sign:!0}}),!gt.includes("reservedAmount")&&a.createElement(kl,{title:te("reservedAmount","Account Reserved Amount"),parseType:"CURRENCY",value:{amount:null===(c=e.reservedAmount)||void 0===c?void 0:c.value,currency:(null===(u=e.reservedAmount)||void 0===u?void 0:u.currency)||e.currency,sign:!0}}),!gt.includes("minimumAccountBalance")&&a.createElement(kl,{title:te("minimumAccountBalance","Minimum Account Balance"),parseType:"CURRENCY",value:{amount:null===(d=e.minimumAccountBalance)||void 0===d?void 0:d.value,currency:(null===(m=e.minimumAccountBalance)||void 0===m?void 0:m.currency)||e.currency,sign:!0}}),!gt.includes("maximumAccountBalance")&&a.createElement(kl,{title:te("maximumAccountBalance","Maximum Account Balance"),parseType:"CURRENCY",value:{amount:null===(p=e.maximumAccountBalance)||void 0===p?void 0:p.value,currency:(null===(f=e.maximumAccountBalance)||void 0===f?void 0:f.currency)||e.currency,sign:!0}}),!gt.includes("minimumTransactionAmount")&&a.createElement(kl,{title:te("minimumTransactionAmount","Min Transaction Amount"),parseType:"CURRENCY",value:{amount:null===(v=e.minimumTransactionAmount)||void 0===v?void 0:v.value,currency:(null===(g=e.minimumTransactionAmount)||void 0===g?void 0:g.currency)||e.currency,sign:!0}}),!gt.includes("maximumTransactionAmount")&&a.createElement(kl,{title:te("maximumTransactionAmount","Max Transaction Amount"),parseType:"CURRENCY",value:{amount:null===(h=e.maximumTransactionAmount)||void 0===h?void 0:h.value,currency:(null===(E=e.maximumTransactionAmount)||void 0===E?void 0:E.currency)||e.currency,sign:!0}}),!gt.includes("payLimit")&&a.createElement(kl,{title:te("payLimit","Pay Limit"),parseType:"CURRENCY",value:{amount:null===(y=e.payLimit)||void 0===y?void 0:y.value,currency:(null===(b=e.payLimit)||void 0===b?void 0:b.currency)||e.currency,sign:!0}}),!gt.includes("paylimitCount")&&a.createElement(kl,{title:te("payLimitCount","Pay limit count"),value:e.payLimitCount}),!gt.includes("paylimitPeriod")&&a.createElement(kl,{title:te("payLimitPeriod","Pay limit period"),value:e.payLimitPeriod?te("".concat(e.payLimitPeriod/86400,"Day")):0}),!gt.includes("accountValidFrom")&&a.createElement(kl,{title:te("accountValidFrom","Account valid from"),parseType:"DATE",value:e.accountValidFrom}),a.createElement(kl,{title:te("accountLinkTypeId","Account Link type Id"),value:e.accountLinkTypeId}),a.createElement(kl,{title:te("accountExpiry","Account Expiry"),value:e.accountExpiry}),!gt.includes("loanEnabled")&&a.createElement(kl,{title:te("loanEnabled","Loan Enabled"),value:e.loanEnabled?"Yes":"No"}),!gt.includes("loanAmount")&&a.createElement(kl,{title:te("loanAmount","Loan Amount"),parseType:"CURRENCY",value:{amount:null===(w=e.loanAmount)||void 0===w?void 0:w.value,currency:(null===(S=e.loanAmount)||void 0===S?void 0:S.currency)||e.currency,sign:!0}}),!gt.includes("loanPenaltyAmount")&&a.createElement(kl,{title:te("loanPenaltyAmount"),parseType:"CURRENCY",value:{amount:null===(Z=e.fields)||void 0===Z||null===(T=Z.parameters)||void 0===T?void 0:T.loanPenaltyAmount,currency:e.currency,sign:!0}}))}))))),(Q(zn)||ee(G,zn))&&z&&he.length>0&&a.createElement(Wa.Z,{square:!0,expanded:"panel5"===Te,onChange:Ct("panel5"),className:Y.fullWidth},a.createElement(tr,{"aria-controls":"panel5d-content",id:"panel5d-header",expandIcon:a.createElement(Ua.Z,null)},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},te("additionalFields","Reseller Additional Information"))),a.createElement(Va.Z,null,a.createElement(ce.Z,{container:!0},a.createElement(ce.Z,{container:!0,spacing:3,className:Y.row,alignItems:"center"},he.length>0&&he.map((function(e){var t,n,l=e.id,r=Ee[l];if(Re(sr[l],Ee))return null;var i=e.validation,o=(null==i?void 0:i.displayValueAs)||"none";return a.createElement(a.Fragment,{key:l},a.createElement(kl,{title:e.placeholder||e.name||te(l,we(l)),skipEmptyCheck:!0,parseType:"file"===e.type?"FILE":"date"===e.type?"DATE":o.toUpperCase(),value:null!=e&&null!==(t=e.validation)&&void 0!==t&&t.replaceTextWith?r.replace(/./g,null==e||null===(n=e.validation)||void 0===n?void 0:n.replaceTextWith):r||te("emptyValueMark")}),!(null==i||!i.viewSectionSplitter)&&a.createElement(ce.Z,{item:!0,sm:12,xs:12},a.createElement("hr",null)))})))))),a.createElement(ut,{open:ze.state,onClose:function(){return He({state:!1,data:null})},onOk:function(){if(null==ze||!ze.data)return pe("Something went wrong, Unable to delete a user");var e={resellerId:A,resellerIdType:"RESELLERID",userIds:[ze.data]};We(!0),B(e).then((function(e){0===e.resultCode?(fe(e),ne.push("/home/reseller/resellers/view/".concat(A))):pe(e)})).catch((function(e){pe(e)})).finally((function(){return We(!1)}))},loading:Me,dialogTitle:"".concat(te("deleteUserConfirmationTitle")),dialogDescription:"".concat(te("deleteUserConfirmationText")),okButtonText:te("delete"),closeButtonText:te("cancel")}),a.createElement(Ul,{data:$e,loading:Me,handleData:function(e){var t=e.form;if(!e.isOpen)return Je({isOpen:!1,form:{}});var n={password:t.password,email:t.email,phone:t.phone,roleId:t.roleId,userId:t.userId},a={resellerId:A,users:[n]};We(!0),M(a).then((function(e){0===e.resultCode?(fe(e),ne.push("/home/reseller/resellers/view/".concat(A))):pe(e)})).catch((function(e){pe(e)})).finally((function(){return We(!1)}))}}))};var pr=function(e){e.id;var t=e.user,n=e.resellerId,l=e.isLoggedInUser,r=e.actionInProgress,i=e.doReset,o=e.loading,s=e.classes,c=e.handleExpirePassword,u=e.handleDeleteUser,d=e.handleUpdateUser,p=e.handleResetPassword,f=e.customFeatureList,v=void 0===f?[]:f,g=(0,m.useTranslation)().t,h=Jn()(),E=h.checkPermission,y=h.checkFederatedPermission;return l?null:a.createElement(a.Fragment,null,a.createElement(ce.Z,{item:!0,xs:12,style:{textAlign:"right"}},(E(Nn)||y(v,Nn))&&a.createElement(se.SeamlessButton,{onClick:function(){return c&&c(t.userId,n)},color:"secondary",disabled:o,variant:"contained",className:s.btnSpacing},g("expiredPassword","Expired Password")),(E(Dn)||y(v,Dn))&&a.createElement(ue.ZP,{title:"".concat(g("resetWrongPasswordAttemptsMessage",{count:t.incorrectAttempts}))},a.createElement(se.SeamlessButton,{onClick:function(){return i(t.userId,t.password)},color:"secondary",disabled:(null==r?void 0:r.resetProcessing)||0===t.incorrectAttempts,variant:"contained",className:s.btnSpacing},g("resetWrongPasswordAttempts"),(null==r?void 0:r.resetProcessing)&&a.createElement(st.Z,{color:"inherit",size:14,thickness:6,className:s.progress}))),(E(Pn)||y(v,Pn))&&a.createElement(se.SeamlessButton,{onClick:function(){return p&&p(t.userId)},color:"secondary",disabled:o,variant:"contained",className:s.btnSpacing},g("resetPassword","Reset Password")),(E(yn)||y(v,yn))&&a.createElement(X.Z,{className:s.bottomSpacing,onClick:function(){return u(t.userId)},variant:"text",style:{float:"right"}},a.createElement(_l.Z,null)),(E(bn)||y(v,bn))&&a.createElement(X.Z,{className:s.bottomSpacing,onClick:function(){return d(t.userId)},variant:"text",style:{float:"right"}},a.createElement(aa.Z,{fontSize:"small"}))))},fr=n(71861);Ge()(fr.Z,{attributes:{nonce:"c2VhbWxlc3M="},insert:"head",singleton:!1}),fr.Z.locals;var vr=n(36001),gr=n(89263),hr=n(92076);const Er=function(e){var t,n=e.data,r=e.zoom,i=e.pan,o=(0,re.Z)((function(e){return(0,ie.Z)({chart:{"& .orgchart ul li .oc-node .oc-heading":{backgroundColor:e.palette.primary.main},"& .orgchart ul li .oc-node .oc-content":{borderColor:e.palette.primary.main},"& .sekure-org-chart":{transform:d,cursor:"".concat(b," !important")}},mainChartDiv:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:"100%",height:"500px",maxWidth:"1100px",overflow:"scroll",textAlign:"center",border:"1px solid",borderRadius:"5px",borderColor:e.palette.grey[300]},exportGrid:{marginBottom:"10px",marginLeft:"15px"},exportButton:{marginLeft:"10px",marginTop:"15px"},exportDropdown:{width:"100px"}})})),s=l().useState(""),u=(0,c.Z)(s,2),d=u[0],p=u[1],f=l().useState(!1),v=(0,c.Z)(f,2),g=v[0],h=v[1],E=l().useState("default"),y=(0,c.Z)(E,2),b=y[0],w=y[1],S=l().useState(0),Z=(0,c.Z)(S,2),T=Z[0],_=Z[1],x=l().useState(0),I=(0,c.Z)(x,2),C=I[0],D=I[1],P=o(),N=(0,a.useRef)(),k=l().useState("organization_chart"),R=(0,c.Z)(k,2),O=R[0],j=(R[1],l().useState("png")),A=(0,c.Z)(j,2),F=A[0],L=A[1],B=(null===(t=window.config.resellerAdditionalConfig)||void 0===t?void 0:t.orgChartExportOptions)||["pdf","png"],M=(0,m.useTranslation)().t,W=function(e){var t=[],n=1;""===d?p("matrix("+e+", 0, 0, "+e+", 0, 0)"):(t=d.split(","),-1===d.indexOf("3d")?(n=Math.abs(window.parseFloat(t[3])*e))>.5&&n<7&&(t[0]="matrix("+n,t[3]=n,p(t.join(","))):(n=Math.abs(window.parseFloat(t[5])*e))>.5&&n<7&&(t[0]="matrix3d("+n,t[5]=n,p(t.join(","))))};return l().createElement(l().Fragment,null,l().createElement(ce.Z,{container:!0},l().createElement(ce.Z,{item:!0,className:P.exportGrid},l().createElement(se.SeamlessDropDown,{options:B.map((function(e){return{key:M(e+"DownloadButton",e),value:e}})),onChange:function(e){return L(e.target.value)},value:F,name:"fileextension",id:"fileextension",className:P.exportDropdown,label:M("exportType")}),l().createElement(se.SeamlessButton,{name:"export-button",id:"export-button",onClick:function(){N.current.exportTo(O,F)},color:"primary",variant:"contained",className:P.exportButton},M("export"))),l().createElement(ce.Z,{item:!0,xs:12,sm:12,lg:12,md:12},l().createElement("div",{className:P.mainChartDiv},l().createElement("div",{className:P.chart},r&&l().createElement("div",null,l().createElement(se.SeamlessButton,{className:"btn btn-outline-primary zoom-button",onClick:function(){W(1.2)},variant:"outlined",color:"primary"},l().createElement(gr.Z,{color:"primary"})),l().createElement(se.SeamlessButton,{className:"btn btn-outline-primary zoom-button",onClick:function(){W(.8)},variant:"outlined",color:"primary"},l().createElement(hr.Z,{color:"primary"}))),l().createElement("div",{onMouseUp:i&&g?function(){h(!1),w("default")}:void 0,onMouseDown:i?function(e){if(w("move"),e.target.closest(".oc-node"))h(!1);else{h(!0),w("move");var t=0,n=0;if(""!==d){var a=d.split(",");-1===d.indexOf("3d")?(t=parseInt(a[4]),n=parseInt(a[5])):(t=parseInt(a[12]),n=parseInt(a[13]))}if(e.targetTouches){if(1===e.targetTouches.length)_(e.targetTouches[0].pageX-t),D(e.targetTouches[0].pageY-n);else if(e.targetTouches.length>1)return}else _(e.pageX-t),D(e.pageY-n)}}:void 0,onMouseMove:i&&g?function(e){var t=0,n=0;if(w("move"),e.targetTouches){if(1===e.targetTouches.length)t=e.targetTouches[0].pageX-T,n=e.targetTouches[0].pageY-C;else if(e.targetTouches.length>1)return}else t=e.pageX-T,n=e.pageY-C;if(""===d)-1===d.indexOf("3d")?p("matrix(1,0,0,1,"+t+","+n+")"):p("matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,"+t+", "+n+",0,1)");else{var a=d.split(",");-1===d.indexOf("3d")?(a[4]=t,a[5]=n+")"):(a[12]=t,a[13]=n),p(a.join(","))}}:void 0},l().createElement(vr.Z,{datasource:n,chartClass:"sekure-org-chart",depth:1,ref:N})))))))},yr=function(e){var t=e.children,n=(e.showError,e.type),l=a.useState([]),r=(0,c.Z)(l,2),i=r[0],s=r[1],u=a.useState(!1),d=(0,c.Z)(u,2),m=d[0],f=d[1],g=p().showErrorMessage,h=(0,o.useSelector)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.user}),o.shallowEqual);return a.useEffect((function(){f(!0),"REGISTER_KYC"===n?K(h.resellerType).then((function(e){return s(e.types)})).catch((function(e){return g(e)})).finally((function(){return f(!1)})):v("/dms/v1/resellers/types/all").then((function(e){return s(e.types)})).catch((function(e){return g(e)})).finally((function(){return f(!1)}))}),[]),a.createElement(a.Fragment,null,t({resellerTypes:i,loading:m}))};var br=n(27281),wr=n.n(br);function Sr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Zr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sr(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Tr={selectedResellerType:[]};const _r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"selected_reseller_type":var n=[],a=!1;return e.selectedResellerType.map((function(e){e.accountTypeId===t.payload.accountTypeId&&(a=!0)})),a?n=e.selectedResellerType.filter((function(e){return e.accountTypeId!==t.payload.accountTypeId})):t.payload&&(n=e.selectedResellerType.concat(t.payload)),Zr(Zr({},e),{},{selectedResellerType:n});default:return e}};var xr=(0,re.Z)((function(e){return(0,ie.Z)({spacingTop:{marginTop:e.spacing(3)},form:{display:"flex",flexDirection:"column",flexWrap:"wrap"},element:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},input:{},description:{width:419},button:{paddingTop:e.spacing(1),paddingLeft:e.spacing(5),paddingRight:e.spacing(5),paddingBottom:e.spacing(1)},btnSpacing:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},sectionSeparator:{marginTop:e.spacing(3),marginBottom:e.spacing(2),marginLeft:e.spacing(1)},wrapper:{padding:e.spacing(2)},col4th:{minWidth:"24%"},smallDropdown:{width:120},titleSpacing:{marginBottom:e.spacing(1)},subTitleSpacing:{marginBottom:e.spacing(1)},dividerSpacing:{marginBottom:e.spacing(3)},fullWidth:{width:"100%"},minListViewHeight:{minHeight:600},headingTitle:{fontWeight:"bold"},marginTop:{marginTop:e.spacing(1)}})}));const Ir=function(e){var t,n,l=e.data,r=e.edit,i=e.view,o=e.onFormSubmit,s=e.resetHandler,u=e.loading,d=xr(),f=fe.Ry().shape({importId:fe.Z_().required(),name:fe.Z_().required(),description:fe.Z_(),typeKey:fe.Rx(),roleKey:fe.Rx(),allowIdSpecification:fe.O7(),idRegexp:fe.Z_(),allowIdAutoGeneration:fe.O7(),idGenerator:fe.Z_(),used:fe.O7(),allowTopLevel:fe.O7(),allowWebshop:fe.O7(),allowTerminals:fe.O7(),allowWeblogin:fe.O7(),allowParentless:fe.O7(),subDevicePolicy:fe.Rx(),adminSiteSupportReportGroup:fe.Z_(),defaultTaxGroupKey:fe.Rx(),defaultContractKey:fe.Rx(),defaultProductRangeKey:fe.Rx(),defaultReceiptTemplateKey:fe.Rx(),childTypeKeys:fe.IX(),allowedTypeKeys:fe.IX(),accountTemplates:fe.IX().of(fe.Ry().shape({accountTypeKey:fe.Rx(),accountTypeId:fe.Z_().nullable(),accountTypeMode:fe.Z_(),accountTypePrefix:fe.Z_(),maxAccountBalance:fe.Rx(),maxTransactionAmount:fe.Rx(),minAccountBalance:fe.Rx(),minTransactionAmount:fe.Rx(),payLimitPeriod:fe.Rx(),payLimitValue:fe.Rx(),totalCreditLimit:fe.Rx(),transactionLimitCount:fe.Rx()}))}),v=a.useState([]),g=(0,c.Z)(v,2),h=g[0],E=g[1],y=(0,oe.TA)({initialValues:l,validationSchema:f,onSubmit:function(e){return o&&o(e)},enableReinitialize:!0}),b=y.values,w=y.handleChange,S=y.handleSubmit,Z=y.handleReset,T=y.setFieldValue,_=y.errors,x=(y.isValid,y.validateForm),I=y.setFieldError;a.useEffect((function(){b.accountTemplates&&E(b.accountTemplates)}),[b.accountTemplates]);var C=(0,m.useTranslation)().t,D=[{key:C("NoMposTerminal"),value:"0"},{key:C("SyncOnlyOwnMPOSTerminal"),value:"1"},{key:C("SyncOnlyChainMPOSTerminal"),value:"2"},{key:C("SyncAllMPOSTerminal"),value:"4"}],P=(C("choose"),C("topupTransfer"),C("transfer"),C("topup"),[{key:C("choose"),value:"0"},{key:"AS400",value:"AS400"},{key:"ERSWS",value:"ERSWS"},{key:C("internal"),value:"internal"},{key:"INTPasswordCreateMessages",value:"INTPasswordCreateMessages"},{key:"INTPasswordResetMessages",value:"INTPasswordResetMessages"},{key:"Operator reports",value:"Operator reports"},{key:"PartnerAppReports",value:"PartnerAppReports"},{key:"PartnerSiteInfoPage",value:"PartnerSiteInfoPage"},{key:"POSInteractiveReport",value:"POSInteractiveReport"},{key:"Voucher import status reports",value:"Voucher import status reports"},{key:C("web"),value:"Web"},{key:"webportal",value:"webportal"},{key:"WebPOS",value:"WebPOS"},{key:"WebStockMgmt",value:"WebStockMgmt"}]),N=[{title:C("resellerTypeInfo"),caption:C("resellerTypeDescription"),label:C("resellerTypeInfo")},{title:C("settingResellerType"),caption:C("settingResellerTypeDescription"),label:C("settingResellerTypeLabel")},{title:C("chooseSubResellerType"),caption:C("chooseSubResellerTypeDescription"),label:C("chooseSubResellerLabel")},{title:C("chooseAccountTypes"),caption:C("chooseAccountTypesDescription"),label:C("chooseAccountTypesLabel")},{title:C("accountTemplates"),caption:C("accountTemplatesDescription"),label:C("accountTemplates")}];a.useEffect((function(){return function(){}}));var k=p().showWarningMessage,R=a.useState(0),O=(0,c.Z)(R,2),j=O[0],A=O[1],F=a.useState([]),L=(0,c.Z)(F,2),B=(L[0],L[1]),M=a.useReducer(_r,Tr),W=(0,c.Z)(M,2),V=W[0],q=W[1];a.useEffect((function(){q({type:"selected_reseller_type",payload:l.accountTemplates})}),[l.accountTemplates]),a.useEffect((function(){T("accountTemplates",V.selectedResellerType)}),[V.selectedResellerType]);var U=function(){var e=(0,qe.Z)(Ke().mark((function e(t){var n;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={accountTypeKey:0,accountTypeMode:(null==t?void 0:t.accountTypeMode)||"0",accountTypePrefix:"",payLimitPeriod:0,accountTypeId:null==t?void 0:t.accountTypeId,minAccountBalance:null==t?void 0:t.minAccountBalance,maxAccountBalance:null==t?void 0:t.maxAccountBalance,minTransactionAmount:null==t?void 0:t.minTransactionAmount,maxTransactionAmount:null==t?void 0:t.maxTransactionAmount,transactionLimitCount:null==t?void 0:t.countLimit,totalCreditLimit:null==t?void 0:t.creditLimit,payLimitValue:null==t?void 0:t.payLimit},q({type:"selected_reseller_type",payload:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a.createElement(se.SeamlessContainer,{title:null===(t=N[j])||void 0===t?void 0:t.title,description:null===(n=N[j])||void 0===n?void 0:n.caption},a.createElement(se.SeamlessStepper,{steps:[{label:N[0].label},{label:N[1].label},{label:N[2].label},{label:N[3].label}],components:{Control:function(e){var t=e.goNext,n=e.goPrev,r=e.disableFirst,i=e.disableLast;return a.createElement(Be.Z,null,a.createElement("div",{className:(0,de.default)(d.dividerSpacing)}),u?a.createElement(ae.Z,null):null,a.createElement(se.SeamlessButton,{onClick:function(){n(),A(j-1)},disabled:r,className:(0,de.default)(d.element,d.button),color:"primary",variant:"contained"},C("previous")),a.createElement(se.SeamlessButton,{className:(0,de.default)(d.element,d.btnSpacing,d.button),onClick:function(){x().then((function(e){var n=Object.values(e);if(n.length>0)k(n[0]);else if(t(),A(j+1),j+1>1){var a=l.accountTemplates;if(a&&a.length>0){var r=a.map((function(e){return e.accountTypeId}))||[];B(r)}}}))},disabled:i||j===N.length-1&&h.length<1||j===N.length-2&&V.selectedResellerType.length<1,color:"primary",variant:"contained"},C("next")),a.createElement("div",{className:(0,de.default)(d.dividerSpacing)}))}}},a.createElement(ce.Z,{container:!0,className:d.spacingTop},a.createElement(ce.Z,{container:!0,spacing:3},a.createElement(ce.Z,{item:!0,xs:12},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},C("resellerTypeInfo")))),a.createElement(ce.Z,{container:!0,spacing:3},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(se.SeamlessInput,{required:!0,fullWidth:!0,error:!!_.importId,className:(0,de.default)(d.element),name:"importId",value:b.importId,onChange:w,label:C("importId"),disabled:r})),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(se.SeamlessInput,{required:!0,fullWidth:!0,error:!!_.name,className:(0,de.default)(d.element),name:"name",value:b.name,onChange:w,label:C("name"),disabled:i}))),a.createElement(ce.Z,{container:!0,spacing:3},a.createElement(ce.Z,{item:!0,xs:12,sm:8},a.createElement(se.SeamlessInput,{fullWidth:!0,className:(0,de.default)(d.input,d.element),name:"description",multiline:!0,rows:4,rowsMax:4,value:b.description,onChange:w,label:C("description"),disabled:i}))),a.createElement(ce.Z,{container:!0,spacing:3},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(Za,{name:"roleKey",classes:(0,de.default)(d.element),value:b.roleKey,handleChange:w})),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(St,{name:"contractKey",resellerTypeId:l.typeKey,disabled:!r,helperText:C("selectContractType"),value:b.contractKey,handleChange:w,classes:d}))),a.createElement(ce.Z,{container:!0,spacing:3},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(se.SeamlessDropDown,{id:"default-receipt-template-drop-down",fullWidth:!0,disabled:i,className:(0,de.default)(d.element),label:C("defaultReceiptTemplate"),helperText:C("selectReceiptFormat"),options:[{key:C("choose"),value:"0"},{key:C("standard"),value:"1"}].map((function(e){return{value:e.value,key:e.key}})),name:"receiptTemplateKey",value:b.receiptTemplateKey,onChange:w})),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(se.SeamlessDropDown,{id:"default-tax-group-drop-down",fullWidth:!0,disabled:i,className:(0,de.default)(d.element),label:C("defaultTaxGroup"),helperText:C("selectDefaultReportGroup"),options:[{key:"Choose",value:"0"}].map((function(e){return{value:e.value,key:e.key}})),name:"defaultTaxGroupKey",value:b.taxGroupKey,onChange:w}))),a.createElement(ce.Z,{container:!0,spacing:3,className:d.spacingTop},a.createElement(ce.Z,{item:!0,xs:12},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},C("supportInformation")))),a.createElement(ce.Z,{container:!0,spacing:3},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(se.SeamlessDropDown,{id:"subdevice-policy-drop-down",fullWidth:!0,className:(0,de.default)(d.element),label:C("mposSupport"),disabled:i,helperText:C("selectMposSupportType"),options:D.map((function(e){return{value:e.value,key:e.key}})),name:"subDevicePolicy",value:b.subDevicePolicy,onChange:w})),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(se.SeamlessDropDown,{id:"admin-support-report-drop-down",fullWidth:!0,disabled:i,className:(0,de.default)(d.element),label:C("adminSupportReport"),helperText:C("selectReportGroup"),options:P.map((function(e){return{value:e.value,key:e.key}})),name:"adminSiteSupportGroup",value:b.adminSiteSupportGroup,onChange:w})))),a.createElement(ce.Z,{container:!0,className:d.spacingTop},a.createElement(ce.Z,{container:!0,spacing:3},a.createElement(ce.Z,{item:!0,xs:12},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},C("settingResellerTypeLabel")))),a.createElement(ce.Z,{container:!0,spacing:3},a.createElement(ce.Z,{item:!0,xs:12,sm:6},a.createElement(Lt,{className:(0,de.default)(d.element),name:"allowIdSpecification",checked:Boolean(b.allowIdSpecification),label:C("allowIdSpecification"),handleChange:function(e){return w({target:{value:e.target.checked,name:"allowIdSpecification"}})},color:"primary",disabled:i})),a.createElement(ce.Z,{item:!0,xs:12,sm:4},Boolean(b.allowIdSpecification)&&a.createElement(se.SeamlessInput,{fullWidth:!0,className:(0,de.default)(d.element),name:"idRegexp",error:!!_.idRegexp,helperText:_.idRegexp||C("regex","Regex"),value:b.idRegexp,onChange:w,label:C("regex"),disabled:i}))),a.createElement(ce.Z,{container:!0,spacing:3},a.createElement(ce.Z,{item:!0,xs:12,sm:6},a.createElement(Lt,{className:(0,de.default)(d.element),checked:Boolean(b.allowIdAutoGeneration),name:"allowIdAutoGeneration",label:C("allowIdAutogeneration"),handleChange:function(e){return w({target:{value:e.target.checked,name:"allowIdAutoGeneration"}})},color:"primary",disabled:i})),a.createElement(ce.Z,{item:!0,xs:12,sm:4},Boolean(b.allowIdAutoGeneration)&&a.createElement(se.SeamlessInput,{fullWidth:!0,required:Boolean(b.allowIdAutoGeneration),className:(0,de.default)(d.element),name:"idGenerator",error:!!_.idGenerator,helperText:_.idGenerator||C("idGenerator","Id Generator"),value:b.idGenerator,onChange:w,label:C("idGenerator","Id Generator"),disabled:i}))),a.createElement(ce.Z,{container:!0,spacing:3},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(Lt,{className:(0,de.default)(d.element),name:"allowWebshop",checked:Boolean(b.allowWebshop),label:C("allowWebshop"),handleChange:function(e){return w({target:{value:e.target.checked,name:"allowWebshop"}})},color:"primary",disabled:i})),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(Lt,{className:(0,de.default)(d.element),checked:Boolean(b.allowWebLogin),name:"allowWebLogin",label:C("allowWeblogin"),handleChange:function(e){return w({target:{value:e.target.checked,name:"allowWebLogin"}})},color:"primary",disabled:i}))),a.createElement(ce.Z,{container:!0,spacing:3},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(Lt,{className:(0,de.default)(d.element),checked:Boolean(b.allowParentless),name:"allowParentless",label:C("allowParentless"),handleChange:function(e){return w({target:{value:e.target.checked,name:"allowParentless"}})},color:"primary",disabled:i})),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(Lt,{className:(0,de.default)(d.element),checked:Boolean(b.used),name:"used",label:C("used"),handleChange:function(e){return w({target:{value:e.target.checked,name:"used"}})},color:"primary",disabled:i}))),a.createElement(ce.Z,{container:!0,spacing:3},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(Lt,{className:(0,de.default)(d.element),name:"allowTerminals",checked:Boolean(b.allowTerminals),label:C("allowTerminals"),handleChange:function(e){return w({target:{value:e.target.checked,name:"allowTerminals"}})},color:"primary",disabled:i})),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(Lt,{className:(0,de.default)(d.element),checked:Boolean(b.allowTopLevel),name:"allowTopLevel",label:C("allowTopLevel"),handleChange:function(e){return w({target:{value:e.target.checked,name:"allowTopLevel"}})},color:"primary",disabled:i}))),a.createElement(ce.Z,{container:!0,spacing:3},a.createElement(ce.Z,{item:!0,xs:12,sm:4}),a.createElement(ce.Z,{item:!0,xs:12,sm:4}))),a.createElement(yr,null,(function(e){var t=e.resellerTypes,n=e.loading,l=[];b.allowedTypeKeys&&b.allowedTypeKeys.length>0&&(l=t.filter((function(e){var t;return null==b||null===(t=b.allowedTypeKeys)||void 0===t?void 0:t.includes(e.id)})));var r=[];return b.childTypeKeys&&b.childTypeKeys.length>0&&(r=t.filter((function(e){var t;return null==b||null===(t=b.childTypeKeys)||void 0===t?void 0:t.includes(e.id)}))),a.createElement(ce.Z,{container:!0,className:d.spacingTop},a.createElement(ce.Z,{container:!0,spacing:6},a.createElement(ce.Z,{item:!0,xs:12},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},C("subResellerTypes")))),a.createElement(ce.Z,{container:!0,spacing:3,className:d.marginTop},a.createElement(ce.Z,{item:!0,xs:12,sm:6},a.createElement(Tt,{data:t,loading:n,disabled:i,selectedItems:r,label:C("selectSubResellerTypes"),handleChange:function(e){var t=e.map((function(e){return e.id}));w({target:{value:t,name:"childTypeKeys"}})}})),a.createElement(ce.Z,{item:!0,xs:12,sm:4})),a.createElement(ce.Z,{container:!0,spacing:6,className:d.marginTop},a.createElement(ce.Z,{item:!0,xs:12},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},C("allowedResellerTypes")))),a.createElement(ce.Z,{container:!0,spacing:3,className:d.marginTop},a.createElement(ce.Z,{item:!0,xs:12,sm:6},a.createElement(Tt,{data:t,loading:n,disabled:i,selectedItems:l,label:C("selectAllowedResellerTypes"),handleChange:function(e){var t=e.map((function(e){return e.id}));w({target:{value:t,name:"allowedTypeKeys"}})}})),a.createElement(ce.Z,{item:!0,xs:12,sm:4})))})),a.createElement(ce.Z,{container:!0,className:d.spacingTop},a.createElement(ce.Z,{container:!0,spacing:3},a.createElement(ce.Z,{item:!0,xs:12},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},C("accountType")))),a.createElement(ce.Z,{container:!0,spacing:3,className:d.spacingTop},a.createElement(ce.Z,{item:!0,xs:12,className:d.minListViewHeight},a.createElement(wr(),{onSelectReseller:U,selectionModel:V.selectedResellerType.map((function(e){return e.accountTypeId}))})))),a.createElement(ce.Z,{container:!0,className:d.spacingTop},b.accountTemplates&&b.accountTemplates.length>0&&b.accountTemplates.map((function(e,t){return a.createElement(ce.Z,{container:!0,key:t},a.createElement(ce.Z,{container:!0,spacing:3,className:d.spacingTop},a.createElement(ce.Z,{item:!0,xs:12},a.createElement(le.Z,{className:d.headingTitle},C("accountType"),": ",e.accountTypeId))),a.createElement(ce.Z,{container:!0,spacing:3},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(se.SeamlessDropDown,{id:"account-mode-drop-down",disabled:i,fullWidth:!0,className:(0,de.default)(d.element),label:C("accountMode"),helperText:C("selectAccountMode"),options:[{value:"0",key:C("none")},{value:r?"Owner":"1",key:C("owner")},{value:r?"Shared":"2",key:C("shared")}].map((function(e){return{value:e.value,key:e.key}})),name:"accountTemplates[".concat(t,"].accountTypeMode"),value:null==e?void 0:e.accountTypeMode,onChange:w})),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(se.SeamlessInput,{className:(0,de.default)(d.input,d.element),fullWidth:!0,name:"accountTemplates[".concat(t,"].accountTypeKey"),value:null==e?void 0:e.accountTypeId,onChange:w,label:C("accountTypeKey"),disabled:!0})),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(se.SeamlessInput,{className:(0,de.default)(d.input,d.element),fullWidth:!0,name:"accountTemplates[".concat(t,"].accountTypePrefix"),value:null==e?void 0:e.accountTypePrefix,onChange:w,label:C("updatePrefix"),disabled:i}))),a.createElement(ce.Z,{container:!0,spacing:3,className:d.spacingTop},a.createElement(ce.Z,{item:!0,xs:12},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},C("countAndCreditLimit")))),a.createElement(ce.Z,{container:!0,spacing:3},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(se.SeamlessInput,{className:(0,de.default)(d.input,d.element),fullWidth:!0,name:"accountTemplates[".concat(t,"].transactionLimitCount"),value:null==e?void 0:e.transactionLimitCount,onChange:w,label:C("countLimit"),disabled:i})),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(se.SeamlessInput,{className:(0,de.default)(d.input,d.element),fullWidth:!0,name:"accountTemplates[".concat(t,"].totalCreditLimit"),value:null==e?void 0:e.totalCreditLimit,onChange:w,label:C("creditLimit"),disabled:i}))),a.createElement(ce.Z,{container:!0,spacing:3,className:d.spacingTop},a.createElement(ce.Z,{item:!0,xs:12},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},C("payLimit")))),a.createElement(ce.Z,{container:!0,spacing:3},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(se.SeamlessDropDown,{id:"account-mode-drop-down",disabled:i,className:(0,de.default)(d.element),fullWidth:!0,label:C("payLimitPeriod"),helperText:C("selectTimePeriod"),options:[{value:0,key:C("disabled")},{value:86400,key:C("24hours")},{value:604800,key:C("oneWeek")},{value:2592e3,key:C("oneMonth")}].map((function(e){return{value:e.value,key:e.key}})),name:"accountTemplates[".concat(t,"].payLimitPeriod"),value:null==e?void 0:e.payLimitPeriod,onChange:w})),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(se.SeamlessInput,{className:(0,de.default)(d.input,d.element),fullWidth:!0,name:"accountTemplates[".concat(t,"].payLimitValue"),value:null==e?void 0:e.payLimitValue,onChange:w,label:C("payLimitAmount"),disabled:i}))),a.createElement(ce.Z,{container:!0,spacing:3,className:d.spacingTop},a.createElement(ce.Z,{item:!0,xs:12},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},C("accountBalance")))),a.createElement(ce.Z,{container:!0,spacing:3},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(se.SeamlessInput,{className:(0,de.default)(d.input,d.element),fullWidth:!0,name:"accountTemplates[".concat(t,"].minAccountBalance"),value:null==e?void 0:e.minAccountBalance,onChange:w,label:C("minAccountBalance"),disabled:i})),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(se.SeamlessInput,{className:(0,de.default)(d.input,d.element),fullWidth:!0,name:"accountTemplates[".concat(t,"].maxAccountBalance"),value:null==e?void 0:e.maxAccountBalance,onChange:w,label:C("maxAccountBalance"),disabled:i}))),a.createElement(ce.Z,{container:!0,spacing:3,className:d.spacingTop},a.createElement(ce.Z,{item:!0,xs:12},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},C("transactionAmount")))),a.createElement(ce.Z,{container:!0,spacing:3},a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(se.SeamlessInput,{className:(0,de.default)(d.input,d.element),fullWidth:!0,name:"accountTemplates[".concat(t,"].minTransactionAmount"),value:null==e?void 0:e.minTransactionAmount,onChange:w,label:C("minTransactionAmount"),disabled:i})),a.createElement(ce.Z,{item:!0,xs:12,sm:4},a.createElement(se.SeamlessInput,{className:(0,de.default)(d.input,d.element),fullWidth:!0,name:"accountTemplates[".concat(t,"].maxTransactionAmount"),value:null==e?void 0:e.maxTransactionAmount,onChange:w,label:C("maxTransactionAmount"),disabled:i}))))})))),!i&&a.createElement(Be.Z,{display:"flex",flexDirection:"row-reverse",justifyContent:"center"},a.createElement(se.SeamlessButton,{onClick:function(){x().then((function(e){var t=Object.values(e);if(t.length>0)k(t[0]);else{if(b.allowIdAutoGeneration&&!b.idGenerator)return I("idGenerator","Id Generator field is required"),void k("Id Generator field is required");if(b.allowIdSpecification&&!b.idRegexp)return I("idRegexp","Regex field is required"),void k("Regex field is required");w({target:{value:b.accountTemplates,names:"accountTemplates"}}),S()}}))},className:(0,de.default)(d.element,d.button),color:"primary",variant:"contained",disabled:u},C(r?"updateButton":"submitButton")),a.createElement(se.SeamlessButton,{onClick:function(){Z(b),s&&s()},className:(0,de.default)(d.element,d.btnSpacing,d.button),color:"primary",variant:"outlined"},C("resetButton"))))};var Cr=(0,re.Z)((function(e){return(0,ie.Z)({spacingTop:{marginTop:e.spacing(3)},spacingBottom:{marginBottom:e.spacing(1)},wrapper:{padding:e.spacing(2)},titleSpacing:{marginBottom:e.spacing(1)},subTitleSpacing:{marginBottom:e.spacing(1)},dividerSpacing:{marginBottom:e.spacing(3)},fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{textTransform:"capitalize",fontSize:14},rowSpacing:{marginBottom:e.spacing(.5)},minListViewHeight:{minHeight:400}})}));const Dr=function(e){var t,n,l,r,i=e.data,o=e.onFormSubmit,s=Cr(),u=a.useState([]),d=(0,c.Z)(u,2),p=(d[0],d[1]),f=(0,oe.TA)({initialValues:i,onSubmit:function(e){return o&&o(e)},enableReinitialize:!0}).values;a.useEffect((function(){f.accountTemplates&&p(f.accountTemplates)}),[f.accountTemplates]);var v=(0,m.useTranslation)().t;return a.createElement(se.SeamlessContainer,{title:v("createResellerTypePageTitle"),description:v("createResellerTypePageDescription")},a.createElement(ce.Z,{container:!0},a.createElement(ce.Z,{container:!0,spacing:3,className:s.spacingBottom},a.createElement(ce.Z,{item:!0,xs:12},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},v("resellerTypeInfo")))),a.createElement(ce.Z,{container:!0,spacing:3,className:s.rowSpacing},a.createElement(kl,{title:v("importId"),value:f.importId}),a.createElement(kl,{title:v("name"),value:f.name})),a.createElement(ce.Z,{container:!0,spacing:3,className:s.rowSpacing},a.createElement(kl,{title:v("description"),value:f.description}),a.createElement(kl,{title:v("defaultTaxGroup"),value:f.taxGroupKey})),a.createElement(ce.Z,{container:!0,spacing:3,className:s.rowSpacing},a.createElement(kl,{title:v("defaultProductRange"),value:f.productRangeKey}),a.createElement(kl,{title:v("defaultReceiptTemplate"),value:f.receiptTemplateKey})),a.createElement(ce.Z,{container:!0,spacing:3,className:s.rowSpacing},a.createElement(kl,{title:v("defaultContract"),value:f.contractKey})),f.role&&a.createElement(a.Fragment,null,a.createElement(ce.Z,{container:!0,spacing:3,className:(0,de.default)(s.spacingBottom,s.spacingTop)},a.createElement(ce.Z,{item:!0,xs:12},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},v("roleInformation")))),a.createElement(ce.Z,{container:!0,spacing:3,className:s.rowSpacing},a.createElement(kl,{title:v("roleIdentifiers"),value:"".concat(null===(t=f.role)||void 0===t?void 0:t.roleKey," / ").concat(null===(n=f.role)||void 0===n?void 0:n.importId)}),a.createElement(kl,{title:v("roleName"),value:null===(l=f.role)||void 0===l?void 0:l.roleName}),a.createElement(kl,{title:v("roleDescription"),value:null===(r=f.role)||void 0===r?void 0:r.roleDescription}))),a.createElement(ce.Z,{container:!0,spacing:3,className:(0,de.default)(s.spacingBottom,s.spacingTop)},a.createElement(ce.Z,{item:!0,xs:12},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},v("supportInformation")))),a.createElement(ce.Z,{container:!0,spacing:3,className:s.rowSpacing},a.createElement(kl,{title:v("mposSupport"),value:f.subDevicePolicy}),a.createElement(kl,{title:v("adminSupportReport"),value:f.adminSiteSupportGroup}))),a.createElement(ce.Z,{container:!0},a.createElement(ce.Z,{container:!0,spacing:3,className:(0,de.default)(s.spacingBottom,s.spacingTop)},a.createElement(ce.Z,{item:!0,xs:12},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},v("settingResellerTypeLabel")))),a.createElement(ce.Z,{container:!0,spacing:3,className:s.rowSpacing},a.createElement(kl,{headingProps:{sm:6},valueProps:{sm:2},title:v("allowIdSpecification"),value:Boolean(f.allowIdSpecification).toString()}),Boolean(f.allowIdSpecification)&&a.createElement(kl,{headingProps:{sm:2},valueProps:{sm:2},title:v("regex"),value:f.idRegexp})),a.createElement(ce.Z,{container:!0,spacing:3,className:s.rowSpacing},a.createElement(kl,{title:v("allowIdAutogeneration"),value:Boolean(f.allowIdAutoGeneration).toString()}),a.createElement(kl,{title:v("allowWeblogin"),value:Boolean(f.allowWebLogin).toString()})),a.createElement(ce.Z,{container:!0,spacing:3,className:s.rowSpacing},a.createElement(ce.Z,{item:!0,xs:12,sm:3},a.createElement(le.Z,{className:s.fieldHeading},v("allowParentless"))),a.createElement(ce.Z,{item:!0,xs:12,sm:3},a.createElement(le.Z,{className:s.fieldValue},Boolean(f.allowParentless).toString())),a.createElement(ce.Z,{item:!0,xs:12,sm:3},a.createElement(le.Z,{className:s.fieldHeading},v("used"))),a.createElement(ce.Z,{item:!0,xs:12,sm:3},a.createElement(le.Z,{className:s.fieldValue},Boolean(f.used).toString()))),a.createElement(ce.Z,{container:!0,spacing:3,className:s.rowSpacing},a.createElement(ce.Z,{item:!0,xs:12,sm:3},a.createElement(le.Z,{className:s.fieldHeading},v("allowTerminals"))),a.createElement(ce.Z,{item:!0,xs:12,sm:3},a.createElement(le.Z,{className:s.fieldValue},Boolean(f.allowTerminals).toString())),a.createElement(ce.Z,{item:!0,xs:12,sm:3},a.createElement(le.Z,{className:s.fieldHeading},v("allowTopLevel"))),a.createElement(ce.Z,{item:!0,xs:12,sm:3},a.createElement(le.Z,{className:s.fieldValue},Boolean(f.allowTopLevel).toString()))),a.createElement(ce.Z,{container:!0,spacing:3,className:s.rowSpacing},a.createElement(ce.Z,{item:!0,xs:12,sm:3},a.createElement(le.Z,{className:s.fieldHeading},v("allowWebshop"))),a.createElement(ce.Z,{item:!0,xs:12,sm:3},a.createElement(le.Z,{className:s.fieldValue},Boolean(f.allowWebshop).toString())))),a.createElement(ce.Z,{container:!0},a.createElement(ce.Z,{container:!0,spacing:3,className:(0,de.default)(s.spacingBottom,s.spacingTop)},a.createElement(ce.Z,{item:!0,xs:12},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},v("subResellerTypes")))),a.createElement(ce.Z,{container:!0,spacing:3,className:s.rowSpacing},a.createElement(ce.Z,{item:!0,xs:12,sm:3},a.createElement(le.Z,{className:s.fieldHeading},v("subResellerTypes"))),a.createElement(ce.Z,{item:!0,xs:12,sm:9},a.createElement(yr,null,(function(e){var t=e.resellerTypes,n=(e.loading,[]);return f.childTypeKeys&&f.childTypeKeys.length>0&&(n=t.filter((function(e){var t;return null==f||null===(t=f.childTypeKeys)||void 0===t?void 0:t.includes(e.id)})).map((function(e){return e.name}))),a.createElement(le.Z,{className:s.fieldValue},n.join(", "))}))))),a.createElement(ce.Z,{container:!0},a.createElement(ce.Z,{container:!0,spacing:3,className:(0,de.default)(s.spacingBottom,s.spacingTop)},a.createElement(ce.Z,{item:!0,xs:12},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},v("accountTemplates")))),f.accountTemplates&&f.accountTemplates.length>0&&f.accountTemplates.map((function(e,t){return a.createElement(ce.Z,{container:!0,key:t},a.createElement(ce.Z,{container:!0,spacing:3,className:s.rowSpacing},a.createElement(ce.Z,{item:!0,xs:12},a.createElement(le.Z,{className:s.fieldHeading,variant:"h4"},v("accountType"),": ",e.accountTypeId))),a.createElement(ce.Z,{container:!0,spacing:3,className:s.rowSpacing},a.createElement(ce.Z,{item:!0,xs:12,sm:3},a.createElement(le.Z,{className:s.fieldHeading},v("accountMode"))),a.createElement(ce.Z,{item:!0,xs:12,sm:3},a.createElement(le.Z,{className:s.fieldValue},null==e?void 0:e.accountTypeMode)),a.createElement(ce.Z,{item:!0,xs:12,sm:3},a.createElement(le.Z,{className:s.fieldHeading},v("accountTypeKey"))),a.createElement(ce.Z,{item:!0,xs:12,sm:3},a.createElement(le.Z,{className:s.fieldValue},null==e?void 0:e.accountTypeId))),a.createElement(ce.Z,{container:!0,spacing:3,className:s.rowSpacing},a.createElement(ce.Z,{item:!0,xs:12,sm:3},a.createElement(le.Z,{className:s.fieldHeading},v("updatePrefix"))),a.createElement(ce.Z,{item:!0,xs:12,sm:3},a.createElement(le.Z,{className:s.fieldValue},null==e?void 0:e.accountTypePrefix)),a.createElement(ce.Z,{item:!0,xs:12,sm:3},a.createElement(le.Z,{className:s.fieldHeading},v("countLimit"))),a.createElement(ce.Z,{item:!0,xs:12,sm:3},a.createElement(le.Z,{className:s.fieldValue},null==e?void 0:e.transactionLimitCount))),a.createElement(ce.Z,{container:!0,spacing:3,className:s.rowSpacing},a.createElement(ce.Z,{item:!0,xs:12,sm:3},a.createElement(le.Z,{className:s.fieldHeading},v("creditLimit"))),a.createElement(ce.Z,{item:!0,xs:12,sm:3},a.createElement(le.Z,{className:s.fieldValue},null==e?void 0:e.totalCreditLimit)),a.createElement(ce.Z,{item:!0,xs:12,sm:3},a.createElement(le.Z,{className:s.fieldHeading},v("payLimitPeriod"))),a.createElement(ce.Z,{item:!0,xs:12,sm:3},a.createElement(le.Z,{className:s.fieldValue},null==e?void 0:e.payLimitPeriod))),a.createElement(ce.Z,{container:!0,spacing:3,className:s.rowSpacing},a.createElement(ce.Z,{item:!0,xs:12,sm:3},a.createElement(le.Z,{className:s.fieldHeading},v("payLimitAmount"))),a.createElement(ce.Z,{item:!0,xs:12,sm:3},a.createElement(le.Z,{className:s.fieldValue},null==e?void 0:e.payLimitValue)),a.createElement(ce.Z,{item:!0,xs:12,sm:3},a.createElement(le.Z,{className:s.fieldHeading},v("minBalance"))),a.createElement(ce.Z,{item:!0,xs:12,sm:3},a.createElement(le.Z,{className:s.fieldValue},null==e?void 0:e.minAccountBalance))),a.createElement(ce.Z,{container:!0,spacing:3,className:s.rowSpacing},a.createElement(ce.Z,{item:!0,xs:12,sm:3},a.createElement(le.Z,{className:s.fieldHeading},v("maxAccountBalance"))),a.createElement(ce.Z,{item:!0,xs:12,sm:3},a.createElement(le.Z,{className:s.fieldValue},null==e?void 0:e.maxAccountBalance)),a.createElement(ce.Z,{item:!0,xs:12,sm:3},a.createElement(le.Z,{className:s.fieldHeading},v("minTransactionAmount"))),a.createElement(ce.Z,{item:!0,xs:12,sm:3},a.createElement(le.Z,{className:s.fieldValue},null==e?void 0:e.minTransactionAmount))),a.createElement(ce.Z,{container:!0,spacing:3,className:s.rowSpacing},a.createElement(ce.Z,{item:!0,xs:12,sm:3},a.createElement(le.Z,{className:s.fieldHeading},v("maxTransactionAmount"))),a.createElement(ce.Z,{item:!0,xs:12,sm:3},a.createElement(le.Z,{className:s.fieldValue},null==e?void 0:e.maxTransactionAmount))))}))))},Pr=function(e){var t=e.disable,n=void 0!==t&&t,l=(0,m.useTranslation)().t;return(0,Jn()().checkPermission)(Qt)?a.createElement(se.SeamlessButton,{component:s.Link,to:"/home/reseller/types/create",variant:"contained",color:"primary",disabled:n,endIcon:a.createElement(Xt.Z,null)},l("createResellerType")):null};var Nr=n(42666),kr=(0,re.Z)((function(e){return(0,ie.Z)({dialogWrapper:{textAlign:"center","& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginBottom:e.spacing(3)},btnSpace:{marginRight:e.spacing(2)}})}));const Rr=function(e){var t=e.resellerTypes,n=e.loading,l=((0,jt.Z)(e,["resellerTypes","loading"]),a.useState([])),r=(0,c.Z)(l,2),i=r[0],o=r[1],u=Jn()().checkPermission,d=(0,m.useTranslation)().t,f=p(),g=f.showSuccessMessage,h=f.showErrorMessage,E=f.showWarningMessage,y=kr(),b=a.useState(!1),w=(0,c.Z)(b,2),S=w[0],Z=w[1],T=a.useState(0),_=(0,c.Z)(T,2),x=_[0],I=(_[1],(0,s.useHistory)()),C=function(){var e;(e=x,v("/dms/v1/resellers/types/".concat(e),{method:"DELETE"})).then((function(e){Z(!1),0==e.resultCode?(I.push("/home/reseller/types"),g(e)):E(e)})).catch((function(e){return h(e.resultDescription||e.message||d("anErrorOccurred"))}))},D=function(){Z(!1)},P=[{field:"id",headerName:d("id"),sortable:!0,flex:1},{field:"name",headerName:d("name"),sortable:!0,flex:1},{field:"actions",headerName:d("actions"),sortable:!1,filterable:!1,renderCell:function(e){return a.createElement("div",null,a.createElement(na.Z,{size:"small",color:"primary",variant:"text","aria-label":"reseller types action buttons"},a.createElement(X.Z,{component:s.Link,to:"/home/reseller/types/view/"+e.getValue("id")},a.createElement(la.Z,{fontSize:"small"})),u(en)&&a.createElement(X.Z,{component:s.Link,to:"/home/reseller/types/edit/"+e.getValue("id")},a.createElement(aa.Z,{fontSize:"small"})),u(nn)&&a.createElement(X.Z,{component:s.Link,to:"/home/reseller/types/parent/"+e.getValue("id")},a.createElement(Nr.Z,{fontSize:"small"}))),a.createElement(se.SeamlessDialog,{open:S,onClose:D,className:y.dialogWrapper,maxWidth:"md",fullWidth:!0},a.createElement(a.Fragment,null,a.createElement("div",{className:y.modalContentSpacing},a.createElement(le.Z,{gutterBottom:!0,id:"transition-modal-title",variant:"h6",className:y.fontHeavy},d("deleteResellerTypeConfirmationTitle"),": ",x),a.createElement(le.Z,{id:"transition-modal-description",variant:"body1"},d("deleteResellerTypeConfirmationText")," ",x)),a.createElement("div",{className:y.modalContentSpacing},a.createElement(se.SeamlessButton,{type:"button",variant:"outlined",color:"primary",className:y.btnSpace,onClick:D},d("noConfirmationButton")),a.createElement(se.SeamlessButton,{type:"button",variant:"contained",color:"primary",onClick:C},d("yesConfirmationButton"))))))},flex:1}];return a.createElement(ta(),{loading:n,columnBuffer:2,rows:t,getRowId:function(e){return e.id},columns:P,checkboxSelection:!0,onSelectionModelChange:function(e){o(e.selectionModel)},selectionModel:i})},Or=function(e){return a.createElement(yr,null,(function(t){var n=t.resellerTypes,l=t.loading;return a.createElement(Rr,(0,Ve.Z)({},e,{resellerTypes:n,loading:l}))}))},jr=function(e){var t=e.children,n=e.id,l=a.useState([]),r=(0,c.Z)(l,2),i=r[0],o=r[1],s=a.useState(!1),u=(0,c.Z)(s,2),d=u[0],m=u[1],f=p().showErrorMessage;return a.useEffect((function(){m(!0),K(n).then((function(e){return o(e.types)})).catch((function(e){return f(e)})).finally((function(){return m(!1)}))}),[]),a.createElement(a.Fragment,null,t({resellerTypes:i,loading:d}))},Ar=function(e){var t=e.id;return a.createElement(jr,{id:t},(function(e){var t=e.resellerTypes,n=e.loading;return a.createElement(Rr,{resellerTypes:t,loading:n})}))},Fr=function(e){var t=e.children,n=e.id,l=a.useState([]),r=(0,c.Z)(l,2),i=r[0],o=r[1],s=a.useState(!1),u=(0,c.Z)(s,2),d=u[0],m=u[1],f=p(),g=f.showErrorMessage;return f.showSuccessMessage,f.showInfoMessage,f.showWarningMessage,a.useEffect((function(){var e;m(!0),(e=n,v("/dms/v1/resellers/types/".concat(e,"/parents"))).then((function(e){return o(e.types)})).catch((function(e){return g(e)})).finally((function(){return m(!1)}))}),[]),a.createElement(a.Fragment,null,t({resellerTypes:i,loading:d}))},Lr=function(e){var t=e.id;return a.createElement(Fr,{id:t},(function(e){var t=e.resellerTypes,n=e.loading;return a.createElement(Rr,{resellerTypes:t,loading:n})}))};function Br(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Mr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Br(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Br(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Wr=function(e){var t=e.values,n=e.loading,l=((0,jt.Z)(e,["values","loading"]),(0,m.useTranslation)().t),r=p(),i=r.showErrorMessage,o=r.showSuccessMessage,u=r.showWarningMessage,d=a.useState({loading:!1,open:!1,id:null}),f=(0,c.Z)(d,2),g=f[0],h=f[1],E=(0,s.useHistory)(),y=a.useState(1),b=(0,c.Z)(y,2),w=b[0],S=b[1],Z=Jn()().checkPermission,T=[{field:"fieldName",headerName:l("fieldName"),sortable:!0,width:200},{field:"fieldValue",headerName:l("fieldValue"),sortable:!0,width:250},{field:"associatedFieldName",headerName:l("associatedFieldName"),sortable:!0,width:200},{field:"associatedFieldValue",headerName:l("associatedFieldValue"),sortable:!0,width:250},{field:"actions",headerName:l("actions"),sortable:!1,flex:1,filterable:!1,renderCell:function(e){return a.createElement("div",null,a.createElement(na.Z,{size:"small",color:"primary",variant:"text","aria-label":"roles action buttons"},Z(Fn)&&a.createElement(X.Z,{component:s.Link,to:"/home/reseller/template-dropdowns/edit/".concat(e.getValue("id"))},a.createElement(aa.Z,{fontSize:"small"})),Z(Ln)&&a.createElement(X.Z,{onClick:function(){return h({loading:!1,open:!0,id:e.getValue("id")})}},a.createElement(ra.Z,{fontSize:"small",style:{color:ia.Z[400]}}))))}}];return a.createElement(a.Fragment,null,a.createElement(ta(),{loading:n,columnBuffer:2,rows:t,getRowId:function(e){return e.id},columns:T,checkboxSelection:!0,page:w-1,onPageChange:function(e){S(e.page+1)},onPageSizeChange:function(e){S(1)},onFilterModelChange:function(e){S(1)}}),n&&a.createElement(ae.Z,{style:{width:"100%"}}),a.createElement(ut,{open:g.open,onClose:function(){return h(Mr(Mr({},g),{},{open:!1}))},onOk:function(){var e;h(Mr(Mr({},g),{},{loading:!1})),(e=g.id,v("/dms/v1/template/dropdown/".concat(e),{method:"DELETE"})).then((function(e){0==e.resultCode?(o(e),E.push("/home/reseller/template-dropdowns")):u(e.resultDescription)})).catch((function(e){i(Ae(e))})).finally((function(){return h(Mr(Mr({},g),{},{loading:!1}))}))},dialogTitle:"".concat(l("deleteRolesConfirmationTitle")," ").concat(g.id),dialogDescription:"".concat(l("deleteRolesConfirmationText")," ").concat(g.id),okButtonText:l("yesConfirmationButton"),closeButtonText:l("noConfirmationButton")}))},Vr=function(e){var t=e.children,n=a.useState([]),l=(0,c.Z)(n,2),r=l[0],i=l[1],o=a.useState(!1),s=(0,c.Z)(o,2),u=s[0],d=s[1],m=p().showErrorMessage;return a.useEffect((function(){d(!0),v("/dms/v1/template/dropdown").then((function(e){e.dropdowns?i(e.dropdowns):i([])})).catch((function(e){return m(e)})).finally((function(){return d(!1)}))}),[]),a.createElement(a.Fragment,null,t({values:r,loading:u}))},qr=function(){return a.createElement(Vr,null,(function(e){var t=e.values,n=e.loading;return a.createElement(Wr,{values:t,loading:n})}))};var Ur=(0,re.Z)((function(e){return(0,ie.Z)({form:{display:"flex",flexDirection:"column",flexWrap:"wrap"},element:{margin:e.spacing(1),marginBottom:e.spacing(3),minWidth:275},spacingTop:{marginTop:e.spacing(3)},spacingBottom:{marginBottom:e.spacing(2)},button:{}})})),Kr=[""],zr={},Hr=!1;const Gr=function(e){var t=e.data,n=e.onFormSubmit,l=e.edit,r=e.view,i=e.loading,o=e.dropdownItems,s=Ur(),u=(0,m.useTranslation)().t,d=p().showErrorMessage,f=a.useState([]),g=(0,c.Z)(f,2),h=g[0],E=g[1],y=a.useState({isLoading:!1,data:{fieldNames:Kr,fieldValues:zr}}),b=(0,c.Z)(y,2),w=b[0],S=b[1],Z=u("dropdownSelectPlaceholder");a.useEffect((function(){if(o&&o.length>0){for(var e in S({isLoading:!0,data:{fieldNames:Kr,fieldValues:zr}}),o){var t=o[e];Kr.includes(t.fieldName)||Kr.push(t.fieldName),(zr[t.fieldName]=zr[t.fieldName]||[]).push(t.fieldValue)}S({isLoading:!1,data:{fieldNames:Kr,fieldValues:zr}})}}),[o]);var T=fe.Ry().shape({fieldName:fe.Z_().required(),fieldValue:fe.Z_().required(),associatedFieldName:fe.Z_().nullable(),associatedFieldValue:fe.Z_().nullable()}),_=(0,oe.TA)({initialValues:t,validationSchema:T,onSubmit:function(e){e.associatedFieldName&&!e.associatedFieldValue?N("associatedFieldValue",u("requiredFieldText")):n&&n(e)},enableReinitialize:!0}),x=_.values,I=_.handleChange,C=_.handleSubmit,D=_.handleReset,P=_.errors,N=_.setFieldError,k=_.setFieldValue;return a.useEffect((function(){var e,t=x.associatedFieldName;t?(Hr=!0,E([""]),(e=t,v("/dms/v1/template/dropdown/".concat(e))).then((function(e){0==e.resultCode?(Hr=!1,E([""].concat((0,me.Z)(e.values)))):(Hr=!1,d(Ae(e)),E([""]))})).catch((function(e){d(Ae(e))}))):x.associatedFieldValue&&k("associatedFieldValue","")}),[x.associatedFieldName]),a.createElement(ce.Z,{container:!0,className:s.spacingTop},a.createElement(ce.Z,{container:!0,spacing:3,className:s.spacingBottom},i?a.createElement(ae.Z,null):null,a.createElement(ce.Z,{item:!0,style:{marginTop:12},xs:12,sm:5},a.createElement(Jr,{name:"fieldName",value:x.fieldName,handleChange:I,errors:P})),a.createElement(ce.Z,{item:!0,xs:12,sm:5},a.createElement(se.SeamlessInput,{error:!!P.fieldValue,className:s.element,name:"fieldValue",fullWidth:!0,required:!0,value:x.fieldValue,onChange:I,label:u("fieldValue"),helperText:P.fieldValue||u("enterFieldValue"),disabled:i||r}))),a.createElement(ce.Z,{container:!0,spacing:3,className:s.spacingBottom},a.createElement(ce.Z,{item:!0,xs:12,sm:5},a.createElement(Jr,{name:"associatedFieldName",value:x.associatedFieldName,handleChange:I,errors:P})),a.createElement(ce.Z,{item:!0,xs:12,sm:5},a.createElement(se.SeamlessDropDown,{id:"associatedFieldValues-dropdown",required:!!x.associatedFieldName,fullWidth:!0,disabled:i||Hr||w.isLoading||!x.associatedFieldName||r,label:u("associatedFieldValue"),error:!!P.associatedFieldValue,helperText:P.associatedFieldValue||u("selectAssociatedFieldValue"),options:h.map((function(e,t){return{key:0!==t||e?e:Z,value:e}})),name:"associatedFieldValue",value:x.associatedFieldValue,onChange:I}))),!r&&a.createElement(ce.Z,{container:!0,spacing:3,className:(0,de.default)(s.spacingTop,s.spacingBottom)},a.createElement(se.SeamlessButton,{onClick:D,className:(0,de.default)(s.element,s.button),disabled:i,color:"primary",variant:"outlined"},u("resetButton")),a.createElement(se.SeamlessButton,{onClick:function(e){return C()},className:(0,de.default)(s.element,s.button),color:"primary",disabled:i,variant:"contained"},u(l?"updateButton":"submitButton"))))};var Yr=[];const $r=function(e){var t=e.children,n=a.useState([]),l=(0,c.Z)(n,2),r=l[0],i=l[1],o=a.useState(!1),s=(0,c.Z)(o,2),u=s[0],d=s[1],m=p().showErrorMessage;return a.useEffect((function(){var e=!0;return Yr.length>0?i(Yr):(d(!0),v("/dms/v1/template/dropdown/fields/all").then((function(t){Yr=t.values,e&&i(t.values)})).catch((function(e){return m(Ae(e))})).finally((function(){return d(!1)})),function(){e=!1})}),[]),a.createElement(a.Fragment,null,t({values:r,loading:u}))},Jr=function(e){var t=e.name,n=e.value,l=e.handleChange,r=e.label,i=e.helperText,o=e.required,s=void 0!==o&&o,c=e.disabled,u=void 0!==c&&c,d=e.errors,p=void 0===d?{}:d,f=e.classes,v=(0,m.useTranslation)().t;r=r||v("dropdownSelectPlaceholder"),i=p[t]||i||v("pleaseSelect_",{fieldName:v(t)});var g=v("dropdownSelectPlaceholder");return a.createElement($r,null,(function(e){var o=e.values,c=e.loading;return a.createElement(a.Fragment,null,c?a.createElement(Me.Z,null):a.createElement(se.SeamlessDropDown,{id:"reseller-".concat(t,"-drop-down"),required:s,name:t,error:!!p[t],fullWidth:!0,disabled:u,value:n,label:r,helperText:i,onChange:l,options:[""].concat((0,me.Z)(o||[])).map((function(e,t){return{value:e,key:0!==t||e?e:g}})),className:f&&(0,de.default)(f.element)}))}))};var Xr;function Qr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var ei=window.config.resellerAdditionalConfig.BasicResellerInfoAPILimit||100,ti=(null===(Xr=window.config)||void 0===Xr?void 0:Xr.defaultPerPageItems)||20;const ni=function(e){var t,n=e.children,l=e.searchQuery,r=a.useState([]),i=(0,c.Z)(r,2),s=i[0],d=i[1],f=a.useState(!1),g=(0,c.Z)(f,2),h=g[0],E=g[1],y=a.useState(0),b=(0,c.Z)(y,2),w=b[0],S=(b[1],a.useState([])),Z=(0,c.Z)(S,2),T=(Z[0],Z[1],a.useState([])),_=(0,c.Z)(T,2),x=_[0],I=_[1],D=null===(t=(0,o.useSelector)((function(e){return null==e?void 0:e.auth}),o.shallowEqual).user)||void 0===t?void 0:t.requestedPrincipalId,P=a.useState({limit:ei,offset:0,perPage:ti}),N=(0,c.Z)(P,2),k=(N[0],N[1],(0,m.useTranslation)().t,p().showErrorMessage,(0,ea.useServerTable)({page:0,perPage:20,order:"asc",orderBy:"",filter:{}})),R={additionalFields:[],resellerData:{status:"Active",resellerTypeId:"",contractId:"",resellerId:"",countryCode:"",resellerMSISDN:"",resellerName:""}};return a.useEffect((function(){E(!1),function(e){return v("/dms/auth/getResellerInfo",{method:"POST",body:{dealerID:{id:e,type:"resellerId"},fetchAccountBalanceInformation:!1}})}(D).then((function(e){if(0==e.resultCode){var t=e.resellerInfo.additionalFields,n=["region","salesArea","cluster","route"],a=[];t.forEach((function(e){-1!==n.indexOf(e.name)&&a.push(e)})),I(a)}}))}),[]),a.useEffect((function(){null===l&&""===l||function(e){if(e){var t=[];e.forEach((function(e){t.push(e.charAt(0).toLowerCase()+e.slice(1))})),x.forEach((function(e){-1!==t.indexOf(e.name)&&R.additionalFields.push(e)}))}C(R,ei,0).then((function(e){var t=[];e.resellers.forEach((function(e,n){var a,l,r,i,o,s={id:n,resellerId:null===(a=e.resellerData)||void 0===a?void 0:a.resellerId,resellerName:null===(l=e.resellerData)||void 0===l?void 0:l.resellerName,resellerTypeName:null===(r=e.resellerData)||void 0===r?void 0:r.resellerTypeName,parentResellerName:null===(i=e.resellerData)||void 0===i?void 0:i.parentResellerName,resellerMSISDN:null===(o=e.resellerData)||void 0===o?void 0:o.resellerMSISDN};t.push(s)})),d(t)}))}(l)}),[l]),a.createElement(a.Fragment,null,n(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qr(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({resellers:s,optionData:x,loading:h,totalCount:w},k)))};var ai=(0,re.Z)((function(e){return(0,ie.Z)({dialogWrapper:{textAlign:"center","& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginBottom:e.spacing(3)},btnSpace:{marginRight:e.spacing(2)}})}));const li=function(e){var t=e.resellers,n=e.loading,l=(e.actionButtons,(0,jt.Z)(e,["resellers","loading","actionButtons"]),(0,m.useTranslation)().t),r=(ai(),[{field:"resellerId",headerName:l("resellerId"),sortable:!0,filterable:!0,flex:1},{field:"resellerName",headerName:l("resellerName"),sortable:!0,filterable:!0,flex:1},{field:"resellerTypeName",headerName:l("resellerTypeName"),sortable:!0,filterable:!0,flex:1},{field:"parentResellerName",headerName:l("parentResellerName"),sortable:!0,filterable:!0,flex:1}]);return a.createElement(ta(),{pagination:!0,paginationMode:"server",rows:t,loading:n,columns:r,columnBuffer:3,sortingMode:"server"})};var ri=n(94106),ii=n(46491),oi=(0,re.Z)((function(e){return(0,ie.Z)({element:{margin:e.spacing(1)},root:{width:"100%",margin:e.spacing(1)},width50:{width:"50%"},input:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},progress:{marginLeft:"8px"}})}));const si=function(e){e.data;var t=e.optionData,n=e.loading,l=e.onFormSubmit,r=[];t.forEach((function(e){r.push({id:e.name,name:e.name})}));var i=oi(),o=(0,m.useTranslation)().t,u=((0,s.useParams)().id,(0,s.useHistory)(),a.useState("panel1")),d=(0,c.Z)(u,2),p=d[0],f=d[1],v=a.useState([]),g=(0,c.Z)(v,2),h=g[0],E=g[1],y=fe.Ry().shape({name:fe.Z_()}),b=(0,ri.cI)({mode:"onSubmit",defaultValues:{name:"name"},resolver:(0,ii.X)(y),reValidateMode:"onChange"}),w=b.register,S=(b.getValues,b.errors,b.control),Z=b.handleSubmit,T=(b.reset,b.setError,b.clearErrors,(0,ri.Dq)({name:"data",control:S}));return T.fields,T.append,T.remove,a.useEffect((function(){w({name:"name"})}),[]),a.createElement("div",{className:i.root},a.createElement(Wa.Z,{expanded:"panel1"===p,onChange:("panel1",function(e,t){f(!!t&&"panel1")})},a.createElement(qa.Z,{expandIcon:a.createElement(Ua.Z,null),"aria-controls":"panel1bh-content",id:"panel1bh-header"},a.createElement(le.Z,{className:i.heading},a.createElement("strong",null,o("advancedSearch")))),a.createElement(Va.Z,null,a.createElement(Be.Z,{display:"flex",className:i.root,flexDirection:"column"},a.createElement(Be.Z,{display:"flex",flexDirection:"row",alignItems:"center"},a.createElement(ri.Qr,{control:S,name:"name",ref:w,render:function(e){e.onChange;var t=(0,jt.Z)(e,["onChange"]);return a.createElement(Je.ZP,{multiple:!0,fullWidth:!0,className:(0,de.default)(i.input),id:"tags-standard",options:r.map((function(e){return e.name.charAt(0).toUpperCase()+e.name.slice(1)})),value:h,filterSelectedOptions:!0,onChange:function(e,t){E(t)},renderTags:function(e,t){return e.map((function(e,n){return a.createElement(Zt.Z,(0,Ve.Z)({variant:"outlined",label:e},t({index:n})))}))},renderInput:function(e){return a.createElement($e.Z,(0,Ve.Z)({},e,{variant:"standard",label:o("locationTitle"),helperText:o("locationHelperText")},t))}})}})),a.createElement(Be.Z,null,a.createElement(se.SeamlessButton,{onClick:Z((function(e){l&&l(h)})),className:(0,de.default)(i.element),disabled:n,color:"primary",variant:"contained"},o("search","Search"),n&&a.createElement(st.Z,{color:"inherit",size:14,thickness:6,className:i.progress})))))))},ci=function(){(0,m.useTranslation)().t;var e=l().useState([]),t=(0,c.Z)(e,2),n=t[0],a=t[1],r=function(e){a(e)};return l().createElement(ni,{searchQuery:n},(function(e){var t=e.resellers,n=e.loading,a=e.optionData,i=e.totalCount,o=(0,jt.Z)(e,["resellers","loading","optionData","totalCount"]);return l().createElement("div",{style:{height:600,width:"100%"}},l().createElement(si,{data:[],loading:n,onFormSubmit:r,optionData:a}),l().createElement(li,(0,Ve.Z)({resellers:t,loading:n,totalCount:i},o)))}))};var ui=n(17149),di=n(62810),mi=n(19653),pi=n(74603),fi=n(88995),vi=n(6131),gi=n(95168),hi=n(28234),Ei=n(48348),yi=n(12231),bi=(0,re.Z)((function(e){return(0,ie.Z)({root:{padding:"2px 4px",display:"flex",alignItems:"center",width:400},input:{marginLeft:e.spacing(1),flex:1},m1:{marginLeft:e.spacing(1)},iconButton:{padding:10},divider:{height:28,margin:4}})}));function wi(e){var t=e.handleSubmit,n=bi(),a=(0,m.useTranslation)().t,r=l().useState("resellerId"),i=(0,c.Z)(r,2),o=i[0],s=i[1],d=l().useState(""),p=(0,c.Z)(d,2),f=p[0],v=p[1],g={resellerId:a("retailerId"),resellerName:a("retailerName"),resellerMSISDN:a("searchWithMSISDN")},h=l().useState(null),E=(0,c.Z)(h,2),y=E[0],b=E[1],w=function(e){s(e),b(null)},S=l().useCallback((function(e){var n=(0,u.Z)({},o,f);"email"===o&&(n={address:(0,u.Z)({},o,f)}),t(n),e.preventDefault()}),[o,f]);return l().createElement(Be.Z,{display:"flex"},l().createElement(ot.Z,{component:"form",onSubmit:S,className:n.root},l().createElement(ue.ZP,{title:"".concat(a(g[o]))},l().createElement(Kl.Z,{onClick:function(e){b(e.currentTarget)}},"resellerId"===o&&l().createElement(vi.Z,null),"resellerMSISDN"===o&&l().createElement(gi.Z,null),"resellerName"===o&&l().createElement(hi.Z,null))),l().createElement(Tl.Z,{className:n.divider,orientation:"vertical"}),l().createElement(pi.Z,{className:n.input,onChange:function(e){return v(e.target.value)},placeholder:g[o]}),l().createElement(Kl.Z,{type:"submit",className:n.iconButton,"aria-label":"search"},l().createElement(fi.Z,null))),l().createElement("div",null,l().createElement(Ei.Z,{id:"simple-menu",anchorEl:y,keepMounted:!0,open:Boolean(y),onClose:function(){b(null)}},l().createElement(yi.Z,{disabled:"resellerId"===o,onClick:function(){return w("resellerId")}},a("retailerId")),l().createElement(yi.Z,{disabled:"resellerMSISDN"===o,onClick:function(){return w("resellerMSISDN")}},a("mobileNumber")),l().createElement(yi.Z,{disabled:"resellerName"===o,onClick:function(){return w("resellerName")}},a("retailerName")))))}function Si(){return a.createElement(mi.GridToolbarContainer,null)}const Zi=function(e){var t=e.loading,n=e.listData,l=void 0===n?[]:n,r=e.page,i=e.perPage,o=e.count,s=e.onPageChange,c=e.columns,u=void 0===c?[]:c,d=e.selectionModel,p=e.onSelectionModelChange,f=e.onPageSizeChange,v=((0,m.useTranslation)().t,a.useCallback((function(e){p&&p(e,l)}),[l])),g={Toolbar:Si};return a.createElement(ta(),{loading:t,onPageSizeChange:function(e){f(e.pageSize)},onPageChange:function(e){s(e.page)},columnBuffer:2,disableColumnFilter:!0,disableColumnMenu:!0,disableDensitySelector:!0,disableExtendRowFullWidth:!0,pagination:!0,components:g,paginationMode:"server",page:r,selectionModel:d,onSelectionModelChange:v,rows:l,checkboxSelection:!0,pageSize:i,getRowId:function(e){return e.resellerId||e.uuid},columns:u,rowCount:o,autoHeight:!0})};function Ti(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ti(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ti(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xi=l().createElement(ui.Z,{fontSize:"small"}),Ii=l().createElement(di.Z,{fontSize:"small"}),Ci=(0,re.Z)((function(e){return(0,ie.Z)({mr1:{marginRight:e.spacing(1)},mtb1:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},optionBtn:{color:"#000","&:hover":{color:"#46A2EB"}},dialogWrapper:{"& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{},"& .MuiDialogTitle-root":{paddingTop:e.spacing(.5),paddingBottom:e.spacing(.5)}},closeBtn:{top:-10,right:-20},tabBtn:{marginLeft:0,textTransform:"capitalize",backgroundColor:"#FFF",color:"#46A2EB",padding:e.spacing(1.25)},lftBtn:{borderTopRightRadius:0,borderBottomRightRadius:0},rgtBtn:{borderTopLeftRadius:0,borderBottomLeftRadius:0},active:{backgroundColor:"#46A2EB",color:"white"}})})),Di={},Pi={},Ni=[],ki=[],Ri=null;const Oi=function(e){var t=e.label,n=e.name,a=e.placeholder,r=e.selectedItems,i=(e.disabledItems,e.handleChange),o=e.loading,s=e.required,d=e.disabled,f=e.options,v=e.isOptionClickable,g=void 0!==v&&v,h=e.handleSelection,E=e.additionalFilters,y=void 0===E?{}:E,b=e.searchByField,w=Ci(),S=(0,m.useTranslation)().t,Z=l().useState(!1),T=(0,c.Z)(Z,2),_=T[0],x=T[1],I=l().useState("includeBtn"),D=(0,c.Z)(I,2),P=D[0],N=D[1],k=l().useState([]),R=(0,c.Z)(k,2),O=R[0],j=R[1],A=l().useState([]),F=(0,c.Z)(A,2),L=F[0],B=F[1],M=l().useState({}),W=(0,c.Z)(M,2),V=W[0],q=W[1],U=l().useState(!1),K=(0,c.Z)(U,2),z=K[0],H=K[1],G=l().useState(0),Y=(0,c.Z)(G,2),$=Y[0],J=Y[1],Q=l().useState(0),ee=(0,c.Z)(Q,2)[1],te=l().useState(),ne=(0,c.Z)(te,2),ae=ne[0],le=ne[1],re={},ie=(0,ea.useServerTable)({page:0,perPage:10,order:"asc",orderBy:"",filter:{}}),oe=[{field:"resellerName",headerName:S("retailerName"),sortable:!0,flex:1},{field:"resellerId",headerName:S("retailerId"),sortable:!0,flex:1},{field:"resellerMSISDN",headerName:S("mobileNumber"),sortable:!0,flex:1}],ce=p().showErrorMessage;(null==f?void 0:f.length)>0&&f.forEach((function(e){return re[e.id]=e.name})),l().useEffect((function(){Di={}}),[]),l().useEffect((function(){var e=V.resellerData,t=void 0===e?{}:e;if(Object.keys(t).length>0){var n=[];t.regionId&&n.push({name:"region",value:re[t.regionId]});var a={additionalFields:n,resellerData:_i(_i({contractId:"",resellerId:"",countryCode:"",resellerMSISDN:"",resellerName:"",status:"Active"},!(null!=t&&t.regionId)&&t),y)};H(!0),!_&&x(!0);var l=ie.perPage*ie.page;C(a,ie.perPage,l).then((function(e){if(0===e.resultCode){J(e.totalCount);var t=Ie(e.resellers),n=[];Ni.splice(0,Ni.length);var a=Object.keys(Di);t.forEach((function(e){!a.includes(e.resellerId)&&n.push(e.resellerId),Pi[e.resellerId]=e,Ni.push(e.resellerId)})),B(n),j(t),N("includeBtn")}else ce(e),j([])})).catch((function(e){return ce(e)})).finally((function(){return H(!1)}))}}),[V,ie.perPage,ie.page]);var ue=function(){x(!1),h({selectedOption:Ri,data:Di})},pe=l().useCallback((function(e,t){var n=e.selectionModel;t.forEach((function(e){if("includeBtn"===P&&Ni.includes(e.resellerId)){n.includes(e.resellerId)?delete Di[e.resellerId]:Di[e.resellerId]=e;var t=Object.keys(Di);L.filter((function(e){return!t.includes(e)}))}})),ee((function(e){return e++}))}),[P,L]),fe=l().useCallback((function(e,t){var n=e.selectionModel,a=[];t.forEach((function(e){if("includeBtn"!==P&&Ni.includes(e.resellerId)){n.includes(e.resellerId)?Di[e.resellerId]=e:(delete Di[e.resellerId],ki.push(e.resellerId));var t=Object.keys(Di);a=[].concat((0,me.Z)(L.filter((function(e){return!t.includes(e)}))),ki),B([].concat((0,me.Z)(a),ki))}}))}),[P,L]);l().useEffect((function(){r.forEach((function(e){if(e.name===(null==ae?void 0:ae.name))return!1})),ae&&i([].concat((0,me.Z)(r),[ae]))}),[ae]);var ve=Object.keys(Di),ge=Object.values(Di);return l().createElement(l().Fragment,null,l().createElement(se.SeamlessDialog,{open:_,onClose:ue,className:w.dialogWrapper,maxWidth:"lg",fullWidth:!0,disableBackdropClick:!1},l().createElement(Be.Z,{display:"flex",flexDirection:"row-reverse"},l().createElement(Kl.Z,{size:"small",className:w.closeBtn,onClick:ue},l().createElement(mi.GridCloseIcon,null))),l().createElement(Be.Z,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",className:w.mtb1},l().createElement("div",null,l().createElement(X.Z,{variant:"contained",className:(0,de.default)(w.tabBtn,w.lftBtn,"includeBtn"===P&&w.active),onClick:function(){return N("includeBtn")}},S("includedRetailers")),l().createElement(X.Z,{variant:"contained",className:(0,de.default)(w.tabBtn,w.rgtBtn,"includeBtn"!==P&&w.active),onClick:function(){return N("excludeBtn")}},S("excludedRetailers"))),l().createElement(wi,{handleSubmit:function(e){return q({resellerData:e})}})),"includeBtn"===P?l().createElement(Zi,(0,Ve.Z)({columns:oe,loading:z||o,count:$,selectionModel:L,onSelectionModelChange:function(e,t){return pe(e,t)},listData:O},ie)):l().createElement(Zi,(0,Ve.Z)({columns:oe,loading:z||o,count:$,listData:ge,selectionModel:ve,onSelectionModelChange:function(e,t){return fe(e,t)}},ie,{perPage:ge.length+5}))),l().createElement(Je.ZP,{multiple:!0,options:f,disableCloseOnSelect:!0,getOptionLabel:function(e){return e.name},value:r,onChange:function(e,t,n,a){if("clear"!==n&&"all"===(null==a?void 0:a.option.id))if(r.length===f.length-1)t=[];else{var l=(0,me.Z)(f);l.shift(),t=l}!d&&i(t)},renderOption:function(e,t){var a=t.selected;return l().createElement(l().Fragment,null,l().createElement(At.Z,{icon:xi,checkedIcon:Ii,className:w.mr1,checked:"all"===e.id&&r.length===f.length-1||a}),g&&"all"!==e.id?l().createElement("a",{href:"",className:w.optionBtn,onClick:function(t){t.preventDefault(),le(e);var a=b||n;Ri=e,q({resellerData:(0,u.Z)({},a,e.id)})}},e.name):e.name)},renderInput:function(e){return l().createElement($e.Z,(0,Ve.Z)({},e,{variant:"outlined",required:s,label:t,placeholder:a}))}}))};function ji(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ai(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ji(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ji(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fi=window.config.openCalendarWith||"year",Li=(0,re.Z)((function(e){return(0,ie.Z)({mainSection:{fontSize:e.typography.fontSize},element:{marginRight:e.spacing(1),marginBottom:e.spacing(2)},shrink:{width:"95%"},validateBtn:{float:"right",top:-50,padding:0}})}));const Bi=function(e){var t,n,a,r,i,o,s=e.widget,u=e.handleChange,d=e.values,p=void 0===d?{}:d,f=e.errors,v=void 0===f?{}:f,g=e.error,h=void 0===g?"":g,E=e.controlableFields,y=void 0===E?{}:E,b=e.searchByFields,w=void 0===b?{}:b,S=e.overrideValue,Z=void 0===S?"":S,T=e.disabledMuteableRule,_=void 0!==T&&T,x=e.editView,I=void 0!==x&&x,C=e.disabledPwdFlag,D=void 0!==C&&C,P=e.validationRequired,N=void 0===P||P,k=e.disabledView,R=void 0!==k&&k,O=e.controlableFieldIDs,j=void 0===O?[]:O,A=e.disabledFieldIds,F=void 0===A?[]:A,L=e.dataSourceFieldIDs,B=void 0===L?[]:L,M=e.dataSourceFields,W=void 0===M?{}:M,V=e.changeTypeEnabled,q=void 0!==V&&V,U=e.loading,K=void 0!==U&&U,z=e.cinLoading,H=void 0!==z&&z,G=e.searchByFieldsId,Y=void 0===G?[]:G,$=e.searchableFieldsId,J=void 0===$?[]:$,X=e.resultFoundForWidgetID,Q=void 0===X?"":X,ee=e.searchResellersData,te=void 0===ee?null:ee,ne=e.resellerData,le=void 0===ne?{}:ne,re=e.handleDropdownAssociatedFields,ie=e.dateInputHandler,oe=e.blurHandler,pe=e.focusHandler,fe=e.handleMultiSelectCheckboxSelection,ve=Li(),ge=(0,m.useTranslation)().t,he=l().useState(!1),Ee=(0,c.Z)(he,2),ye=Ee[0],be=Ee[1],Se=function(e,t){var n,a=e.map((function(e){return e.id}));if(a&&"string"==typeof a[0]&&"none"===(null===(n=a[0])||void 0===n?void 0:n.toLowerCase())&&a.shift(),(a.includes("None")||a.includes("none"))&&(a=["None"]),B.includes(t)){var l=W[t];w[l]=e}u({target:{value:a.join(","),name:t}})},Ze=(null===(t=s.validation)||void 0===t?void 0:t.shrink)||0,Te=null,_e=s.id,xe=s.type,Ie=s.placeholder||we(_e||""),Ce=s.defaultValue;Ce&&Ce.startsWith("${")&&Ce.endsWith("}")&&(Ce="");var De=p[_e]||Z||Ce||"",Pe=h||v[_e],Ne="motte_de_passe"===_e&&"true"===p.one_time_password&&"false"===p.motte_de_passe_flag;if(["resellerType"].includes(_e)||Ne)return null;if(j.length>0&&j.includes(_e)){var ke=y[_e];if(Re(ke,p))return null}var Oe="password"===s.validation||"password"===(null===(n=s.validation)||void 0===n?void 0:n.type);q&&Oe&&F.push(_e);var je=I&&!s.mutable,Ae=R||je||"motte_de_passe_flag"===_e&&!0===D||F.includes(_e);if(_&&(Ae=!1),["dropdown","radio"].includes(xe)){var Fe,Le="radio"!==xe?[{value:"",key:ge("pleaseSelect_",{fieldName:s.placeholder})}]:[],Be=(0,me.Z)(s.options||[]);Y.includes(_e)&&w[_e]&&(Be=w[_e]);var Me=[].concat(Le,(0,me.Z)((null===(Fe=Be)||void 0===Fe?void 0:Fe.map((function(e){return{key:e.name,value:e.value}})))||[]));Te=l().createElement(se.SeamlessDropDown,{id:"".concat(_e,"-drop-down"),error:!!Pe,disabled:Ae,fullWidth:!0,required:s.required&&N,className:(0,de.default)(ve.element,Ze&&ve.shrink),label:Ie,helperText:Pe||ge("pleaseSelect_",{fieldName:Ie}),options:Me,name:"".concat(_e),value:"".concat(De),onChange:function(e){re?re(_e,s,e.target.value):console.warn("☢️ handleDropdownAssociatedFields  is missing in props ☢️"),u(e)}})}else if("label"===xe)Te=null;else if("multiselect"===xe){var We,qe;Y.includes(_e)&&w[_e]&&(s.options=w[_e]);var Ue=(null===(We=s.options)||void 0===We?void 0:We.map((function(e){return{name:(null==e?void 0:e.name)||e.key,id:e.value}})))||[];if(null!==(qe=s.validation)&&void 0!==qe&&qe.enableAllOption&&Ue.unshift({name:ge("all"),id:"all"}),s.validation.checkboxFormate){var Ke,He=De&&"string"==typeof De?null===(Ke=De)||void 0===Ke?void 0:Ke.split(","):[],Ge=Ue.filter((function(e){return null==He?void 0:He.includes(e.id)}));Te=l().createElement(Oi,{options:Ue,loading:K,name:_e,placeholder:Ie,selectedItems:Ge,required:s.required&&N,searchByField:s.validation.searchByKey,handleSelection:function(e){return fe&&fe(e,s)},isOptionClickable:s.validation.isOptionClickable,label:Ie,handleChange:function(e){return Se(e,_e)}})}else{var Ye=De?De.split(",").map((function(e){return{id:e,name:e}})):[];Te=l().createElement(Tt,{data:Ue,loading:K,disabled:Ae,selectedItems:Ye,label:Ie,required:s.required&&N,handleChange:function(e){return Se(e,_e)}})}}else if("date"===xe)De=De||new Date,Te=l().createElement(Xe.M,{utils:et.Z},l().createElement(Qe.e,{error:!!Pe,className:(0,de.default)(ve.element),disableToolbar:!0,fullWidth:!0,autoOk:!0,openTo:Fi,views:["year","month","date"],format:"yyyy/MM/dd",inputProps:Ai({},s.validation.inputProps||{}),required:s.required&&N,variant:"inline",margin:"normal",id:"".concat(_e,"-datepicker"),label:Ie,helperText:Pe||Ie,name:"".concat(_e),value:De,onChange:function(e){return ie?ie(e,_e,Ie):console.warn("☢️ dateInputHandler is missing in props ☢️")},KeyboardButtonProps:{"aria-label":"change date"},disabled:Ae}));else if("file"===xe)Te=l().createElement(l().Fragment,null,l().createElement(xt(),{name:_e,value:De,label:Ie,onChange:u,resourceType:"agent"}),De&&ge("uploadSuccessful"));else if(["text","number","email","password"].includes(xe)){var $e=J.includes(_e);Te=l().createElement(l().Fragment,null,l().createElement(se.SeamlessInput,(0,Ve.Z)({id:"".concat(_e,"-input"),key:"".concat(_e,"-input"),error:!!Pe,disabled:Ae,type:xe,inputProps:Ai({},s.validation.inputProps||{}),fullWidth:!0,required:s.required&&N,className:(0,de.default)(ve.element,Ze&&ve.shrink),label:Ie,helperText:Pe||ge("pleaseEnter_",{fieldName:Ie}),name:"".concat(_e),value:De},Oe&&{autoComplete:"new-password"},{onChange:u,onBlur:function(){return oe&&oe(De,_e,s)},onFocus:function(){return pe&&pe(_e)}})),H&&$e&&l().createElement(ae.Z,null),!H&&!Ae&&Q!==_e&&$e&&l().createElement(ue.ZP,{title:"".concat(ge("searchForResult"))},l().createElement(se.SeamlessButton,{className:(0,de.default)(ve.validateBtn)},l().createElement(Dt.Z,{fontSize:"small"}))),te&&$e&&Q===_e&&l().createElement(l().Fragment,null,l().createElement(ue.ZP,{title:"".concat(ge("searchResellerCIN"))},l().createElement(se.SeamlessButton,{className:(0,de.default)(ve.validateBtn),onClick:function(){return be(!0)}},l().createElement(ze.Z,null))),l().createElement(mt,{open:ye,setOpen:be,loading:K,data:te})))}if(!Te)return null;"parentResellerId"===_e&&(Te=l().createElement(yt,{name:_e,required:s.required&&N,value:De,label:Ie,helperText:Pe||ge("pleaseSelect_",{fieldName:Ie}),handleChange:u,disabled:Ae,resellerType:le.resellerType,errors:v})),"roleId"===_e&&"dropdown"===xe&&(Te=l().createElement(Za,{name:_e,classes:(0,de.default)(ve.element),value:De,defaultKey:"importId",required:s.required&&N,disabled:Ae,errors:v,handleChange:u})),"contractKey"!==_e&&"contractId"!==_e||"dropdown"!==xe||(Te=l().createElement(St,{name:_e,errors:v,resellerType:le.resellerType,disabled:Ae,required:s.required&&N,helperText:Pe||ge("selectContractType"),label:Ie,value:De,handleChange:u}));var Je=(null===(a=s.validation)||void 0===a?void 0:a.gridColumn)&&parseInt(null===(r=s.validation)||void 0===r?void 0:r.gridColumn)||4;return l().createElement(l().Fragment,{key:_e},(null===(i=s.validation)||void 0===i?void 0:i.newLine)&&l().createElement(ce.Z,{item:!0,sm:12,style:{padding:0},xs:12}),l().createElement(ce.Z,{item:!0,xs:12,sm:Je},Te),(null===(o=s.validation)||void 0===o?void 0:o.lineBreak)&&l().createElement(ce.Z,{item:!0,sm:12,style:{padding:0},xs:12}))};function Mi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Wi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mi(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vi=(0,re.Z)((function(e){return(0,ie.Z)({mainSection:{fontSize:e.typography.fontSize},bottomSpacing:{marginBottom:e.spacing(2)},rightContent:{textAlign:"right"},borderBtm:{borderBottom:1,marginBottom:e.spacing(1),paddingBottom:e.spacing(1)}})})),qi={userEmail:"email",userPhone:"phone",userPassword:"password"};const Ui=function(e){var t=e.userFields,n=e.editView,a=e.dataHandler,r=e.isUserIdUniqueHandler,i=e.resellerData,o=e.data,d=void 0===o?{}:o,f=Vi(),v=p(),g=v.showErrorMessage,h=v.showSuccessMessage,E=Jn()().checkPermission,y=(0,m.useTranslation)().t,b=(0,s.useHistory)(),w=function(e){for(var t=new Array(e),n=0;n<t.length;n++)t[n]=n+1;return t}(l().useMemo((function(){return Object.keys(d).length}),[d])),S=l().useState(w),Z=(0,c.Z)(S,2),T=Z[0],_=Z[1],x=l().useState(d),I=(0,c.Z)(x,2),C=I[0],D=I[1],P=l().useState({state:!1,data:null}),N=(0,c.Z)(P,2),k=N[0],R=N[1],O=l().useState(!1),j=(0,c.Z)(O,2),A=j[0],F=j[1],L=l().useMemo((function(){var e=[],n=[];return t.forEach((function(t){t.required&&e.push(t.id),t.unique&&n.push(t.id)})),[e,n]}),[]),M=(0,c.Z)(L,2),V=M[0],q=M[1];return l().createElement(ce.Z,{container:!0,spacing:3,className:f.bottomSpacing},l().createElement(ce.Z,{item:!0,xs:12,className:f.rightContent},E(wn)&&l().createElement(se.SeamlessButton,{onClick:function(){return _([].concat((0,me.Z)(T),[T.length+1]))},color:"primary",className:f.bottomSpacing,variant:"contained",startIcon:l().createElement(Xt.Z,null)},y("addNewUser","Add new user"))),l().createElement("div",{style:{display:"flex",flexDirection:"column-reverse",width:"100%"}},T.map((function(e,o){var s;return l().createElement(ce.Z,{container:!0,spacing:3,key:o,className:f.borderBtm},t.map((function(e,t){var i,s,c;return(null===(i=C[o])||void 0===i?void 0:i[e.id])||"roleId"!==e.id||(e.defaultValue=""),l().createElement(Bi,{widget:e,key:e.id,editView:n,overrideValue:null===(s=C[o])||void 0===s?void 0:s[e.id],disabledMuteableRule:n&&!(null!==(c=C[o])&&void 0!==c&&c.principalKey),blurHandler:function(){var t;return function(e,t){var n=null;q.includes(e.id)&&t&&r(t,(function(e){n=(null==e?void 0:e.resultDescription)||"Recently added userId is not unique"})),V.includes(e.id)&&!t&&(n="".concat(e.placeholder," is a required field"),g(n)),a(n,C)}(e,null===(t=C[o])||void 0===t?void 0:t[e.id])},handleChange:function(t){return function(e,t,n){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"text",r=Wi({},C);r[n]=Wi(Wi({},C[n]),{},(0,u.Z)({},t,e.target.value)),D(r),"dropdown"===l&&a(null,r)}(t,e.id,o,e.type)}})})),l().createElement(ce.Z,{item:!0,sm:12},E(yn)&&l().createElement(X.Z,{className:f.bottomSpacing,onClick:function(){return function(e){_(T.filter((function(t){return t!==e})));var t=e-1,l=C[t];n&&null!=l&&l.principalKey?R({state:!0,data:l,index:t}):(delete C[t],a(null,C))}(e)},variant:"text",style:{float:"right"}},l().createElement(_l.Z,null)),n&&!(null!==(s=C[o])&&void 0!==s&&s.principalKey)&&l().createElement(se.SeamlessButton,{onClick:function(){return function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n="";(null===(e=Object.keys(t))||void 0===e?void 0:e.length)<=V.length&&(n="Following are (".concat(V.join(", "),") the required fields"));var a={};for(var l in t){var r=t[l];if(a[qi[l]||l]=r,V.includes(l)&&!r){n="".concat(we(l)," is a required field");break}}if(n)return g(n);var o={resellerId:i.resellerId,resellerIdType:"RESELLERID",users:[a]};F(!0),W(o).then((function(e){0===e.resultCode?(h(e),b.push("/home/reseller/resellers/edit/".concat(i.resellerId,"?tab=4"))):g(e)})).catch((function(e){g(e)})).finally((function(){return F(!1)}))}(C[o])},color:"primary",className:f.bottomSpacing,variant:"contained",style:{float:"right"}},y("submitUser"))),l().createElement(ce.Z,{item:!0,sm:12},l().createElement("hr",null)))}))),l().createElement(ut,{open:k.state,onClose:function(){return R({state:!1,data:null})},onOk:function(){var e;if(null==k||null===(e=k.data)||void 0===e||!e.userId)return g("Something went wrong, Unable to delete a user");var t={resellerId:i.resellerId,resellerIdType:"RESELLERID",userIds:[k.data.userId]};B(t).then((function(e){0===e.resultCode?(h(e),k.index>-1&&delete C[k.index],a(null,C),R({state:!1,data:null}),b.push("/home/reseller/resellers/edit/".concat(i.resellerId,"?tab=4"))):g(e)})).catch((function(e){g(e)})).finally((function(){return F(!1)}))},loading:A,dialogTitle:"".concat(y("deleteUserConfirmationTitle")),dialogDescription:"".concat(y("deleteUserConfirmationText")),okButtonText:y("delete"),closeButtonText:y("cancel")}))};function Ki(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function zi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ki(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ki(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Hi=function(e){var t=e.children,n=(e.resellerTypeId,e.resellerType),l=(e.showAll,e.assignDomainValue),r=a.useState([]),i=(0,c.Z)(r,2),o=i[0],s=i[1],u=a.useState(!1),d=(0,c.Z)(u,2),f=d[0],g=d[1],h=((0,m.useTranslation)().t,p().showErrorMessage);return a.useEffect((function(){g(!0),n&&function(e){return v("/groupmanagementsystem/v1/group/member/findGroups?userId=".concat(e))}(n).then((function(e){var t,n,a;(null==e?void 0:e.groups.length)>=1&&(s(null==e||null===(t=e.groups[0])||void 0===t?void 0:t.group),l(null==e||null===(n=e.groups[0])||void 0===n?void 0:n.group.name,"domainCode"),l(null==e||null===(a=e.groups[0])||void 0===a?void 0:a.group.description,"domainName"))})).catch((function(e){return h(e)})).finally((function(){return g(!1)}))}),[n]),a.createElement(a.Fragment,null,t({domainNameOption:o,loading:f}))};const Gi=a.memo(Hi,(function(e,t){return e.resellerType===t.resellerType}));var Yi=(0,re.Z)((function(e){return(0,ie.Z)({positionTop:{marginTop:e.spacing(4)}})}));const $i=function(e){var t=e.name,n=e.value,l=e.handleChange,r=e.resellerTypeId,i=e.resellerType,o=(e.label,e.helperText),s=e.required,c=void 0!==s&&s,u=e.disabled,d=void 0!==u&&u,p=e.showAll,f=void 0!==p&&p,v=e.errors,g=void 0===v?{}:v,h=e.classes,E=e.assignDomainValue,y=(0,m.useTranslation)().t;y("defaultDomainName","Domain Name"),o=o||y("selectDomainName");var b=Yi();return a.createElement(Gi,{showAll:f,resellerType:i,resellerTypeId:r,assignDomainValue:E},(function(e){var r=e.domainNameOption,i=e.loading;return a.createElement(a.Fragment,null,i?a.createElement(Me.Z,null):a.createElement(a.Fragment,null,"domainCode"===t&&a.createElement(se.SeamlessDropDown,{id:"domain-name-drop-down",required:c,name:t,error:!!g[t],fullWidth:!0,disabled:d,value:n,label:y("defaultDomainCode"),helperText:y("selectDomainCode"),onChange:l,options:[{key:r.name,value:r.name}],className:h&&(0,de.default)(h.element,b.positionTop)}),"domainName"===t&&a.createElement(se.SeamlessDropDown,{id:"domain-name-drop-down",required:c,name:t,error:!!g[t],fullWidth:!0,disabled:d,value:n,label:y("defaultDomainName"),helperText:y("selectDomainName"),onChange:l,options:[{key:r.description,value:r.description}],className:h&&(0,de.default)(h.element,b.positionTop)})))}))},Ji=function(e){var t=e.children,n=e.msisdnData,l=a.useState([]),r=(0,c.Z)(l,2),i=r[0],o=r[1],s=a.useState(!1),u=(0,c.Z)(s,2),m=u[0],f=u[1],g=(0,d.useSnackbar)().enqueueSnackbar,h=p().showWarningMessage;return a.useEffect((function(){if(n.length>0){var e=n.map((function(e){return{resellerData:{resellerMSISDN:e}}}));f(!0),(t=e,v("/dms/auth/bulkSearchResellersByAttribute?limit=".concat(10,"&offSet=").concat(0),{method:"POST",body:t})).then((function(e){if(0===e.resultCode){var t,a=[];0===(null==e?void 0:e.totalCount)&&h("Following phone numbers are not valid: ".concat(n.join(", "))),null==e||null===(t=e.resellers)||void 0===t||t.forEach((function(e){var t,n;a.push({retailerId:null==e||null===(t=e.resellerData)||void 0===t?void 0:t.resellerId,retailerMsisdn:null==e||null===(n=e.resellerData)||void 0===n?void 0:n.resellerMSISDN})})),o(a)}})).catch((function(e){g(e.resultDescription,{variant:e})})).finally((function(){return f(!1)}))}var t}),[n]),a.createElement(a.Fragment,null,t({loading:m,retailerMSISDN:i}))};var Xi=n(11776),Qi=n(38402),eo=n(9520),to=n(49378),no=n(59544),ao=(0,re.Z)((function(e){return(0,ie.Z)({closeIcon:{fontSize:"16px"},listing:{marginTop:e.spacing(1),backgroundColor:"#f5f5f5",borderRadius:"5%",maxHeight:200,overflow:"auto"}})}));const lo=function(e){var t=e.loading,n=e.retailerMSISDN,l=e.setTags,r=ao(),i=a.useState(n),o=(0,c.Z)(i,2),s=o[0],u=o[1];return a.useEffect((function(){u(n)}),[n]),a.useEffect((function(){l(s)}),[s]),t||0===s.length?null:a.createElement("div",null,a.createElement(Xi.Z,{className:(0,de.default)(r.listing)},s.map((function(e,t){return a.createElement(Qi.Z,{key:t},a.createElement(to.Z,{primary:e.retailerMsisdn}),a.createElement(eo.Z,null,a.createElement(Kl.Z,{onClick:function(){return function(e){var t=s.filter((function(t){return e!==t}));u(t),l(t)}(e)}},a.createElement(no.Z,{className:(0,de.default)(r.closeIcon)}))))}))))};var ro=(0,re.Z)((function(e){return(0,ie.Z)({autocomplete:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},btn:{marginLeft:e.spacing(1),textTransform:"none",border:"1px solid"},input:{},closeIcon:{fontSize:"16px"},listing:{marginTop:e.spacing(1),backgroundColor:"#f5f5f5",borderRadius:"5%",height:200,overflow:"auto"}})}));function io(e,t,n){return!(null==e||!e.trim())&&n.indexOf(e)===t}var oo="",so=[];const co=function(e){var t=e.label,n=e.required,l=e.placeholder,r=e.validation,i=e.tagDataHandler,o=e.value,s=p().showWarningMessage,u=a.useState([]),d=(0,c.Z)(u,2),m=d[0],f=d[1],v=a.useState([]),g=(0,c.Z)(v,2),h=g[0],E=g[1],y=a.useState(!0),b=(0,c.Z)(y,2),w=b[0],S=b[1],Z=a.useCallback((function(e,t){if(t.length<1)f(t);else{var n=t.pop();w?f([].concat((0,me.Z)(t),(0,me.Z)(n.split(",")))):S(!0)}}),[w]);a.useEffect((function(){so=m}),[m]),a.useEffect((function(){(null==o?void 0:o.length)>0&&(o.forEach((function(e){so.push(e.retailerMsisdn)})),so=so.filter(io),f(so))}),[o]);var T=function(e){var t=[];if(e&&e.length>0){var n=e.map((function(e){return e.retailerMsisdn})),a=null==m?void 0:m.filter((function(e){return!n.includes(e)}));(null==a?void 0:a.length)>0&&s("Following phone numbers are not valid: ".concat(a.join(", "))),t=e}i(t)},_=ro();return a.createElement(ce.Z,{container:!0,alignItems:"center"},a.createElement(ce.Z,{item:!0,xs:8,sm:8},a.createElement(Je.ZP,{multiple:!0,freeSolo:!0,options:[],value:m,onChange:Z,onBlur:function(e){return function(){if(oo){var e,t=[].concat((0,me.Z)(so),(0,me.Z)(null===(e=oo)||void 0===e?void 0:e.split(",")));if((null==t?void 0:t.length)>0){t.forEach((function(e){so.push(e)}));var n=so.filter(io);so=n,f((0,me.Z)(n))}}}()},className:(0,de.default)(_.autocomplete),renderTags:function(e,t){return e.map((function(e,n){return a.createElement(Zt.Z,(0,Ve.Z)({label:e},t({index:n})))}))},limitTags:3,onInputChange:function(e){var t,n=new RegExp(null==r?void 0:r.regex);oo=null==e||null===(t=e.target)||void 0===t?void 0:t.value,S(n.test(oo))},renderInput:function(e){return a.createElement($e.Z,(0,Ve.Z)({},e,{fullWidth:!0,autoComplete:"false",variant:"outlined",label:t,placeholder:l,className:(0,de.default)(_.input),error:!w,required:n,helperText:w?"":"Enter valid number",size:"medium"}))}})),a.createElement(ce.Z,{item:!0,sm:4,xs:4},a.createElement(se.SeamlessButton,{color:"secondary",variant:"outlined",className:(0,de.default)(_.btn),onClick:function(){E(m)}},"Add")),a.createElement(ce.Z,{item:!0,sm:12,xs:12},a.createElement(Ji,{msisdnData:h},(function(e){var t=e.loading,n=e.retailerMSISDN,l=0===(null==n?void 0:n.length)?o:n;return a.createElement(lo,{loading:t,retailerMSISDN:l,setTags:T})}))))};var uo,mo;function po(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function fo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?po(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):po(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vo=(0,re.Z)((function(e){return(0,ie.Z)({element:{marginRight:e.spacing(1)},contentStyle:{width:"100%"},spacingTop:{marginTop:e.spacing(3)},spacingBottom:{marginBottom:e.spacing(2)},dividerSpacing:{marginBottom:e.spacing(3)},validateBtn:{float:"right",top:-50,padding:0},autoElement:{marginTop:e.spacing(2),"& .MuiInputLabel-filled.MuiInputLabel-shrink.MuiInputLabel-marginDense":{transform:"translate(12px, 5px) scale(0.75)"},"& .MuiInputBase-root":{paddingTop:e.spacing(1.5)},"& .MuiFormHelperText-root":{marginLeft:0}}})})),go=0,ho=null,Eo=0,yo=!1,bo="",wo=[],So=[],Zo=[],To=[],_o=[],xo=[],Io=[],Co=[],Do=[],Po={},No={},ko={},Ro=[],Oo=!0,jo=!1,Ao=[],Fo={},Lo={},Bo={},Mo=[],Wo=[],Vo=[],qo=[],Uo=[],Ko=[],zo=[],Ho=[],Go={},Yo={},$o={},Jo=[],Xo={},Qo=[],es={},ts=[],ns=[],as={},ls={},rs={},is={},os=[],ss={},cs=[],us=[],ds=[],ms=[],ps={},fs=!1,vs={},gs=!1,hs={},Es={},ys={},bs=!1;function ws(e){for(var t in e)delete e[t]}var Ss=(null===(mo=(null!==(uo=window.conf)&&void 0!==uo?uo:{}).resellerAdditionalConfig)||void 0===mo?void 0:mo.BasicResellerInfoAPILimit)||100,Zs=a.memo((function(e){var t,n=e.editView,r=void 0!==n&&n,i=e.disabledView,o=void 0!==i&&i,f=e.isCloningRecord,g=void 0!==f&&f,h=e.onFormSubmit,E=e.additionalFields,y=e.data,b=e.allWidgets,w=e.loading,S=e.resellerData,Z=e.resellerInfo,T=void 0===Z?{}:Z,_=e.additionalProps,x=void 0===_?{}:_,I=e.partialSavedUserData,P=e.callbackData,N=e.customWidgets,k=e.customWidgetErrors,R=void 0===k?{}:k,j=e.validationRequired,A=void 0===j||j,F=e.reSubmitAllowed,L=void 0!==F&&F,B=e.activeTabStatus,M=e.getChildComponentStateHandler,W=e.canChangeResellerTypeFlag,V=void 0!==W&&W,q=p(),U=q.showErrorMessage,K=q.showSuccessMessage,z=q.showWarningMessage,H=q.showInfoMessage,G=(0,m.useTranslation)().t,Y=G("resellerTemplate"),$=vo(),J=(0,s.useHistory)(),X=Ct()(),Q=X.dateFormatter,ee=X.moment,te=function(e){var t=l().useState(!1),n=(0,c.Z)(t,2),a=n[0],r=n[1],i=l().useState(e),o=(0,c.Z)(i,2),s=o[0],u=o[1],f=((0,d.useSnackbar)().enqueueSnackbar,(0,m.useTranslation)().t),g=p().showErrorMessage,h=Ct()().dateFormatter;return{data:s,isLoading:a,validateRequest:l().useCallback((function(e,t){var n,a,l,i,o,s,c=e.widgetId,d=void 0===c?"nationId":c,m=e.validation,p=void 0===m?{}:m,E=p.type||1,y=p.dob||"",b=y.split(".");y=b.length>1?b[1]:b[0];var w=p.fname||"",S=w.split(".");w=S.length>1?S[1]:S[0];var Z=p.mname||"",T=Z.split(".");Z=T.length>1?T[1]:T[0];var _=p.lname||"",x=_.split(".");_=x.length>1?x[1]:x[0];var I=d.includes("extraFields."),C=d.split(".")||[];C.length>1&&(d=C[1]);var D=e[d]||(null==e?void 0:e.extraFields[d]);if(!D)return console.error("☹️ Invalid nationalID is being passed",e);var P=(I?null==e?void 0:e.extraFields[y]:e[y])||(null==e?void 0:e.dob)||(null==e?void 0:e.dateOfBirth)||(null==e||null===(n=e.extraFields)||void 0===n?void 0:n.dob)||(null==e||null===(a=e.extraFields)||void 0===a?void 0:a.dateOfBirth);if(!P)return g(f("dobRequired"));P=h(P);var N={customerId:"SFC",operationId:"IPRSREQUEST",ersReference:"123456788",additionalFields:{docType:E,docNumber:D,firstName:(I?null==e?void 0:e.extraFields[w]:e[w])||(null==e?void 0:e.name)||(null==e?void 0:e.firstName)||(null==e||null===(l=e.extraFields)||void 0===l?void 0:l.firstName)||"",middleName:(I?null==e?void 0:e.extraFields[Z]:e[Z])||(null==e?void 0:e.otherName)||(null==e?void 0:e.middleName)||(null==e||null===(i=e.extraFields)||void 0===i?void 0:i.otherName)||(null==e||null===(o=e.extraFields)||void 0===o?void 0:o.middleName)||"",lastName:(I?null==e?void 0:e.extraFields[_]:e[_])||(null==e?void 0:e.lastName)||(null==e||null===(s=e.extraFields)||void 0===s?void 0:s.lastName)||"",dateOfBirth:P}};r(!0),function(e){return v("/iprs/iprs-complete-check",{method:"POST",body:e})}(N).then((function(e){u(e),t(null,e)})).catch((function(e){g(Ae(e,f("anErrorOccurred"))),t(e)})).finally((function(){return r(!1)}))}),[])}}(null).validateRequest,ne=function(e){var t=l().useState(!1),n=(0,c.Z)(t,2),a=n[0],r=n[1],i=l().useState(e),o=(0,c.Z)(i,2),s=o[0],u=o[1],p=(0,d.useSnackbar)().enqueueSnackbar,f=(0,m.useTranslation)().t;return{data:s,isLoading:a,generateIdByFieldName:l().useCallback((function(e,t){var n=e.widgetId,a=e.value,l=void 0===a?"":a;if(!n)return console.error(" ☹️ widgetID is missing to generate its value => ",e);var i={idType:n,params:{regionPrefix:l}};r(!0),function(e){return v("/dms/auth/generateId",{method:"POST",body:e})}(i).then((function(e){0===e.resultCode&&e.generatedIdType?(u({widgetId:n,value:e.generatedId}),t(null,{widgetId:n,value:e.generatedId})):p("".concat(e.resultDescription),{variant:"warning"}),u(null),t(e)})).catch((function(e){p(Ae(e,f("anErrorOccurred")),{variant:"error"}),u(null),t(e)})).finally((function(){return r(!1)}))}),[])}}(null).generateIdByFieldName,re=a.useState(0),ie=(0,c.Z)(re,2),ve=(ie[0],ie[1]),ge=function(){var e=l().useState({loading:!1,data:null}),t=(0,c.Z)(e,2),n=t[0],a=t[1],r=p().showErrorMessage;return(0,m.useTranslation)().t,{data:n,getUserDetails:l().useCallback((function(e,t){if(!e)return console.warn("☢️ => Error get reseller info query params are missing!");var n=zi(zi({},"string"==typeof e?{dealerID:{id:e,type:"RESELLERID"}}:e),{},{fetchAccountBalanceInformation:!0});a({loading:!0,data:null}),D(n).then((function(e){0===e.resultCode?a({loading:!1,data:e.resellerInfo}):r(e),t&&t(null,e)})).catch((function(e){a({loading:!1,data:null}),r(e),t&&t(e)}))}),[]),addMemberToGroup:function(e,t){if(!e.groupStartDate||!e.groupEndDate)return r("Group start OR end is missing!");var n=[];e.resellerMSISDN&&n.push({dataName:"msisdn",dataValue:e.resellerMSISDN}),e.email&&n.push({dataName:"email",dataValue:e.email});var a=(new Date).toISOString(),l=new Date(e.groupStartDate).toISOString().split("T")[0]===a.split("T")[0]?a:new Date(e.groupStartDate).toISOString(),i="".concat(new Date(e.groupEndDate).toISOString().split("T")[0],"T23:59:59.999Z"),o={members:[{name:e.name,userId:e.resellerId,userIdType:e.resellerType,memberType:"member",status:"active",effectiveFrom:l,effectiveUntil:i,data:n}]};(function(e,t){return v("/groupmanagementsystem/v1/group/".concat(e,"/member"),{method:"POST",body:t})})(e.groupId,o).then((function(e){if(0!==e.resultCode)throw new Error(e.resultDescription||e.resultMessage);t&&t(null,e)})).catch((function(e){r(e),t&&t(e)}))},deleteMemberGroup:function(e,t){var n,a;(n=e.groupId,a=e.memberId,v("/groupmanagementsystem/v1/group/".concat(n,"/member?memberIds=").concat(a),{method:"DELETE"})).then((function(e){0===e.resultCode?t&&t(null,e):t&&t(e)})).catch((function(e){r(e),t&&t(e)}))}}}(),he=ge.getUserDetails,Ee=ge.addMemberToGroup,ye=ge.deleteMemberGroup,be=a.useState(!1),Se=(0,c.Z)(be,2),Ze=Se[0],Te=Se[1],xe=a.useState(!1),Ce=(0,c.Z)(xe,2),De=Ce[0],Pe=Ce[1],je=a.useState({}),Me=(0,c.Z)(je,2),We=Me[0],Ue=Me[1],He=a.useState({}),Ge=(0,c.Z)(He,2),Ye=Ge[0],tt=Ge[1],nt=a.useState(!1),at=(0,c.Z)(nt,2),lt=at[0],rt=at[1],it=a.useState({state:!1,id:null}),ot=(0,c.Z)(it,2),st=ot[0],ct=ot[1],dt=x.canChangeResellerType,pt=void 0!==dt&&dt,ft=x.notEditableFields,vt=void 0===ft?[]:ft,gt=a.useMemo((function(){return function(e){return e&&e.value&&e.value.sections?e.value.sections:[]}(y)}),[y]),ht=gt.map((function(e,t){return{label:e.title||"".concat(Y," ").concat(t+1)}}));function Et(){bs=!1,So=[],Lo={},No={},ko={},vs={},Es={},ys={},Ro=[],ms=[],Eo=0,jo=!1,fs=!1,Uo.splice(0,Uo.length),xo.splice(0,xo.length),zo.splice(0,zo.length),Ko.splice(0,Ko.length),Ho.splice(0,Ho.length),Jo.splice(0,Jo.length),Qo.splice(0,Qo.length),ts.splice(0,ts.length),ns.splice(0,ns.length),os.splice(0,os.length),us=[],ds=[],ws(Go),ws(Yo),ws($o),ws(Xo),ws(es),ws(as),ws(ls),ws(rs),ws(is),ws(ss)}a.useEffect((function(){return Et(),function(){Et()}}),[]),a.useEffect((function(){Et()}),[E.resellerType]),a.useEffect((function(){var e={};r&&null!=E&&E.userData&&(e=E.userData,tt(e),delete E.userData)}),[E]),a.useEffect((function(){var e,t=T.users,n=void 0===t?[]:t;if(go=y&&y.value&&(null===(e=y.value.sections)||void 0===e?void 0:e.length)||0,Oo=!r,1===go&&(Oo=!1),jo=!!pt&&r,b.length>0&&A){var a;So=[].concat((0,me.Z)(So),(0,me.Z)(vt));var l=[],i={};null==gt||null===(a=gt.filter((function(e){return!(null==e||!e.customWidget)})))||void 0===a||a.forEach((function(e){var t;null===(t=e.widgets)||void 0===t||t.forEach((function(e){ms.push(e.id)}))}));var o=function(e){var t,a,o,s,c,u,d,m,p,f,v,h,y,w,S,Z,T,_,x,I,C,D,P,N,k,R,O,j,A,F,L=b[e],B=L.id;if(L.unique&&Mo.push(B),null!==(t=L.validation)&&void 0!==t&&t.mustExist&&""!==L.validation.mustExist&&Wo.push(B),null!==(a=L.validation)&&void 0!==a&&a.listViewModal&&L.validation.listViewModal&&Vo.push(B),null!==(o=L.validation)&&void 0!==o&&o.externalValidation&&""!==L.validation.externalValidation&&(Fo[B]=L.validation.externalValidation,Ao.push(B)),null!==(s=L.fieldType)&&void 0!==s&&s.includes("users[]")&&(Ko.push(L),zo.push(B),L.unique&&Ho.push(B)),null!==(c=L.validation)&&void 0!==c&&c.mapDataBeforeSubmit&&(Yo[L.validation.mapDataBeforeSubmit]=B),L.defaultValue&&L.defaultValue.startsWith("${")&&L.defaultValue.endsWith("}")){var M,W=null===(M=L.defaultValue)||void 0===M?void 0:M.replace(/[^a-zA-Z ]/g,"");$o[B]=W,Jo.push(W)}if(null!==(u=L.validation)&&void 0!==u&&u.minDate&&null!==(d=L.validation)&&void 0!==d&&null!==(m=d.minDate)&&void 0!==m&&m.startsWith("${")&&null!==(p=L.validation)&&void 0!==p&&null!==(f=p.minDate)&&void 0!==f&&f.endsWith("}")){var V,q,U=null===(V=L.validation)||void 0===V||null===(q=V.minDate)||void 0===q?void 0:q.replace(/[^a-zA-Z ]/g,"");ps[B]=U}null!==(v=L.validation)&&void 0!==v&&v.parsedValueBeforeSubmit&&""!==L.validation.parsedValueBeforeSubmit&&(Bo[B]=L.validation.parsedValueBeforeSubmit),null!==(h=L.validation)&&void 0!==h&&h.searchable&&!0===L.validation.searchable&&Zo.push(B),null!==(y=L.validation)&&void 0!==y&&y.getResellerDetail&&ns.push(B),null!==(w=L.validation)&&void 0!==w&&w.mapResellerPathIndex&&(ls[B]=L.validation.mapResellerPathIndex),null!==(S=L.validation)&&void 0!==S&&S.prefillDataWithKey&&(rs[B]=L.validation.prefillDataWithKey);var K,z,H=(null===(Z=L.validation)||void 0===Z?void 0:Z.disabled)&&!0===L.validation.disabled;H&&So.push(B),!r&&g&&L.validation.disabledIfCloning&&So.push(B),null!==(T=L.validation)&&void 0!==T&&T.autoGenerate&&!0===L.validation.autoGenerate&&_o.push(B),null!==(_=L.validation)&&void 0!==_&&_.perfix&&!0===L.validation.prefix&&Io.push(B),null!==(x=L.validation)&&void 0!==x&&x.preFill&&!0===L.validation.preFill&&To.push(B),null!==(I=L.validation)&&void 0!==I&&I.hideIf&&""!==L.validation.hideIf&&(No[B]=null===(K=L.validation)||void 0===K?void 0:K.hideIf,xo.push(B)),null!==(C=L.validation)&&void 0!==C&&C.calculateDurationForDate&&(Es[B]=L.validation.calculateDurationForDate),null!==(D=L.validation)&&void 0!==D&&D.updateFieldValue&&(ys[B]=L.validation.updateFieldValue),null!==(P=L.validation)&&void 0!==P&&P.regex&&""!==L.validation.regex&&(Po[B]=null===(z=L.validation)||void 0===z?void 0:z.regex,Co.push(B)),null!=L&&null!==(N=L.validation)&&void 0!==N&&N.replaceTextWith&&""!==(null==L||null===(k=L.validation)||void 0===k?void 0:k.replaceTextWith)&&cs.push(B);var Y=L.placeholder||we(B||"");null!==(R=L.validation)&&void 0!==R&&R.searchByValue&&""!==L.validation.searchByValue&&(Do.push(B),ln({additionalFields:[],resellerData:{resellerTypeId:L.validation.searchByValue,status:"Active"},widget:L},(function(e,t){!e&&t&&Do.includes(B)&&(ko[B]=En(t)||[])}),{message:G("searchResellersFoundByCIN",{type:Y}),widgetId:B})),(null===(O=L.validation)||void 0===O?void 0:O.dataSource)&&""!==(null===(j=L.validation)||void 0===j?void 0:j.dataSource)&&_t(L),L.required&&!ms.includes(B)&&Uo.push(B),null!==(A=L.validation)&&void 0!==A&&A.skipValidationIfHidden&&us.push(B),ds=us;var $="password"===L.validation||"password"===(null===(F=L.validation)||void 0===F?void 0:F.type);jo&&!E[B]&&L.required&&(So.splice(So.indexOf(B),1),$&&So.push(B));var J,X,Q=jo&&$;!L.required||xo.includes(B)||H||Q||ms.includes(B)||(l.push(L),i[B]=fe.Z_().required("".concat(Y," ").concat(G("isRequiredField")))),Co.includes(B)&&(i[B]=i[B]?i[B].matches(new RegExp("".concat(Po[B])),L.errorMessage||G("invalidRegexError",{placeholder:L.placeholder})):fe.Z_().matches(new RegExp("".concat(Po[B])),L.errorMessage||G("invalidRegexError",{placeholder:L.placeholder}))),zo.length>0&&r&&"userEmail"===B&&(i[B]=fe.Z_()),"string"==typeof L.validation&&$&&n.length>0&&r&&null!==(J=n[0])&&void 0!==J&&J.password&&(E[B]=(null===(X=n[0])||void 0===X?void 0:X.password)||E[B]),["dropdown","radio","multiselect","autocomplete"].includes(L.type)&&(hs[B]=L.options)};for(var s in b)o(s);ho=fe.Ry().shape(fo({},i)),Ro=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.controlableFieldIDs,l=void 0===a?[]:a,r=n.regexFields,i=void 0===r?{}:r,o=n.regexEnabledFieldsId,s=void 0===o?[]:o,c=n.customWidgetFieldIds,u=void 0===c?[]:c;return e.map((function(e){var n=e.widgets.filter((function(e){return!u.includes(e.id)})).reduce((function(e,n){var a={},r=n.placeholder||we(n.id);if(n.required&&!l.includes(n.id)&&(a[n.id]=fe.Z_().required("".concat(r," is a required field"))),s.includes(n.id)){a[n.id]=a[n.id]?a[n.id]:fe.Z_();var o=n.errorMessage||t("invalidRegexError","You've entered invalid ".concat(r,", It doesn't match with required pattern."),{placeholder:r});a[n.id]=a[n.id].matches(new RegExp("\\b".concat(i[n.id],"\\b"),"gi"),o)}return e[n.id]=a[n.id],e}),{});return fe.Ry().shape(n)}))}(gt,G,{controlableFieldIDs:xo,regexEnabledFieldsId:Co,customWidgetFieldIds:ms,regexFields:Po}),So=So.filter((function(e,t,n){return n.indexOf(e)==t}))}wt()}),[b]);var bt,wt=function(){var e=new URLSearchParams(window.location.search);if(e.has("tab")){var t=parseInt(e.get("tab"))||0;setTimeout((function(){if(t>0)for(;t>0;){var e;null===(e=document.querySelector("#nextButtonRef"))||void 0===e||e.click(),t--}}),2500)}var n=document.querySelector(".MuiStepper-horizontal");1===go&&n?n.style.display="none":n&&(n.style.display="flex"),Zt()},Zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};vs=fo({disabledFieldIds:So,searchByFields:ko,searchByFieldsId:Do,dataSourceCachedData:is,controlableFields:No,controlableFieldIDs:xo,values:jt,dropdownFieldsOptions:fo(fo({},hs),ko)},e),M&&M(fo(fo({},vs),e))},_t=function(e){var t=e.id,n=e.validation.dataSource;if(n&&n.startsWith("${")&&n.endsWith("}")){Do.push(t);var a=n.replace(/[^a-zA-Z ]/g,"");os.push(a),ss[a]=t}else if(n.startsWith("/")){var l="",r=Ne(e.validation.dataSource);if(r.length>0){ts.push(t);var i=ke(e.validation.dataSource,r,fo({},jt));es[t]={fields:r,widget:e},!i.includes("/${")&&i&&(l=i)}Do.push(t),It(e,l)}},It=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e.id,a=t||e.validation.dataSource,l=Object.keys(is)||[];l.includes(a)||a.includes("${")?is[a]&&(ko[n]=is[a]):(rt(!0),ct({state:!0,id:n}),O(a).then((function(t){if(0!==(null==t?void 0:t.resultCode)){rt(!1),ct({state:!1,id:n});var l=t.resultMessage||t.resultDescription||"Unable to fetch data for: ".concat(e.placeholder);return Vt(n,l),U(t)}ko[n]=[];var i=e.validation.parseFromDataSource||{},o=(null==t?void 0:t.values)||(null==t?void 0:t.data)||i.root&&t[i.root],s=e.validation.extraPayloadFields||[];if((null==o?void 0:o.length)>0){var c,u={};o.forEach((function(e){var t="object"===(0,pe.Z)(e);ko[n].push({value:t?e[i.value]:e,name:t?e[i.name]:e}),s.length>0&&t&&e[i.value]&&(u[e[i.value]]=s.map((function(t){return{name:t.name,value:e[t.value]}})))})),(null===(c=Object.keys(u))||void 0===c?void 0:c.length)>0&&(Qo.push(n),Xo[n]=u,!Do.includes(n)&&Do.push(n)),E[n]&&r&&hn(n,e,E[n]),rt(!1),ct({state:!1,id:n}),is[a]=ko[n],Zt()}else U("".concat(n.charAt(0).toUpperCase()+n.slice(1),": ").concat(t.resultDescription)),rt(!1),ct({state:!1,id:n})})))},Pt=function(e,t){return e.groupId&&e.groupMemberId&&r&&(e.groupId===t.groupId&&e.groupMemberId===t.groupMemberId&&e.groupStartDate===t.groupStartDate&&e.groupEndDate===t.groupEndDate||ye({groupId:t.groupId,memberId:t.groupMemberId},(function(e){return Promise.resolve(!0)}))),Promise.resolve(!0)},Nt=function(){var e=(0,qe.Z)(Ke().mark((function e(t,n){return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ee(t,(function(e,a){var l;if(0!==(null==e?void 0:e.resultCode)&&t.groupMemberId&&ye({groupId:t.groupId,memberId:t.groupMemberId}),(null==a||null===(l=a.members)||void 0===l?void 0:l.length)>0){var r=a.members[0].id;return Mt("groupMemberId",r),t.groupMemberId=r,h(t,n)}return z(G("anErrorOccurredTryAgain")),Promise.resolve(null)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),kt=Eo===Ro.length,Rt=(0,oe.TA)({initialValues:E,validationSchema:kt||r?ho:Ro[Eo],onSubmit:(bt=(0,qe.Z)(Ke().mark((function e(t){var n,a,l,i,o,s,c,u,d,m,p;return Ke().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Fe(t,Bo)||{},l=fo(fo({},t),a),!(zo.length>0&&(null===(n=Object.keys(Ye))||void 0===n?void 0:n.length)>0)){e.next=9;break}for(c in i=Ko.filter((function(e){return e.required})).map((function(e){return e.id})),o="",s=function(e){var t=Ye[e];i.forEach((function(e){t[e]||(o="".concat(we(e)," is a required field for user's form"))}))},Ye)s(c);if(!o){e.next=9;break}return e.abrupt("return",U(o));case 9:if(u=gt[gs?Eo:Eo-1],d={activeTemplateSection:u,activeTab:Eo,userFields:Ko,userFieldsData:Ye,extraPayloadFields:Xo,isPartialSubmitAllowed:yo,FinalSubmit:gs,allWidgets:b,dropdownFieldsOptions:fo(fo({},hs),ko)},Zt(d),u&&(m=JSON.stringify(u),localStorage.setItem("activeTab",m)),!I||!I.reseller_id){e.next=19;break}return p=(null==I?void 0:I.reseller_id)||l.resellerId,e.next=18,Mt("resellerId",p);case 18:l.resellerId=p;case 19:if(!bs&&r){e.next=24;break}return e.next=22,Pt(l,E);case 22:if(!(I&&I.reseller_id||l.resellerId)||!l.groupId){e.next=24;break}return e.abrupt("return",Nt(l,d));case 24:h(l,d);case 25:case"end":return e.stop()}}),e)}))),function(e){return bt.apply(this,arguments)}),enableReinitialize:!0}),jt=Rt.values,At=Rt.handleChange,Ft=Rt.handleSubmit,Lt=Rt.errors,Bt=Rt.validateForm,Mt=Rt.setFieldValue,Wt=Rt.setValues,Vt=Rt.setFieldError,qt=Rt.setErrors;P&&null!=P&&P.activeTab&&(null===(t=gt[Eo])||void 0===t?void 0:t.id)==(null==P?void 0:P.activeTab)&&(fs=!1),a.useEffect((function(){var e,t;fs=!1,Eo>0&&null!==(e=gt[Eo])&&void 0!==e&&e.partialSubmit&&0!==(null==P?void 0:P.resultCode)&&gt[Eo].id!=P.activeTab&&(fs=!1,null===(t=document.querySelector("#prevButtonRef"))||void 0===t||t.click(),ve((function(e){return++e}))),jt.groupId&&jt.groupMemberId&&0!==P.resultCode&&ye({groupId:jt.groupId,memberId:jt.groupMemberId})}),[P]);var Ut=a.useState(!1),Kt=(0,c.Z)(Ut,2),zt=Kt[0],Ht=Kt[1];a.useEffect((function(){""===jt.one_time_password&&(Mt("one_time_password","false"),Ht(!0)),0==jt.one_time_password&&Mt("motte_de_passe_flag",!0),"false"===jt.one_time_password&&Ht(!0),"true"===jt.one_time_password&&Ht(!1)}),[jt.one_time_password]),a.useEffect((function(){var e=Object.values(Es);if((null==e?void 0:e.length)>0&&null!=jt&&jt.startDate&&null!=jt&&jt.endDate){var t=ee(jt.startDate),n=ee(jt.endDate),a=ee(new Date),l=n.diff(t,"days"),r=ys.endDate||ys.startDate||"duration";Array.isArray(r)?r.forEach((function(e){"duration"===e&&Mt("".concat(e),l+1),"endOfCampaign"===e&&Mt("".concat(e),a.valueOf()>=t.valueOf()&&a.valueOf()>=n.valueOf()||0===l),"hidePaymentFrequency"===e&&(a.valueOf()>=t.valueOf()&&a.valueOf()>=n.valueOf()||0===l?Mt("".concat(e),"Yes"):Mt("".concat(e),jt[e]||"Yes"))})):Mt("".concat(r),l)}}),[null==jt?void 0:jt.startDate,null==jt?void 0:jt.endDate]),a.useEffect((function(){Gt("parentResellerId",jt.parentResellerId)}),[jt.parentResellerId]),a.useEffect((function(){if(r&&E){var e=E.groupId,t=E.groupStartDate,n=E.groupEndDate;bs=e!==jt.groupId||t!==jt.groupStartDate||n!==jt.groupEndDate}else bs=!1}),[jt.groupId,jt.groupStartDate,jt.groupEndDate]);var Gt=function(e,t){t&&ns.includes(e)&&he(t,(function(e,t){if(t&&0===t.resultCode){var n,a,l=fo({},jt),r=t.resellerInfo.resellerData,i={};if(null===(n=t.resellerInfo)||void 0===n||null===(a=n.additionalFields)||void 0===a||a.forEach((function(e){i[e.name]=e.value})),Object.keys(ls).length>0&&r.resellerPath){var o,s=(null===(o=r.resellerPath)||void 0===o?void 0:o.split("/"))||[];for(var c in ls){var u=ls[c];u>-1&&(l[c]=s[u]||"")}}if(Object.keys(rs).length>0&&r)for(var d in rs){var m=rs[d];l[d]=r[m]||i[m]}Wt(l)}}))},Yt=a.useState(!1),$t=(0,c.Z)(Yt,2),Jt=$t[0],Xt=$t[1],Qt=a.useState(null),en=(0,c.Z)(Qt,2),tn=en[0],nn=en[1],an=window.config.openCalendarWith||"year",ln=function(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=a.message,r=void 0===l?G("searchResellersFoundByCIN",{type:"CIN"}):l,i=a.widgetId,o=void 0===i?"":i,s=null==e?void 0:e.widget;ct({state:!1,id:o}),C(e,Ss,0,null==s||null===(n=s.validation)||void 0===n?void 0:n.dataSource).then((function(e){var n=null;if(0===e.resultCode&&e.resellers&&e.resellers.length>0){if(n=e.resellers,nn(Ie(e.resellers)),o&&Mo.includes(o)&&n.find((function(e){var t,n;return"active"===(null===(t=e.resellerData)||void 0===t||null===(n=t.status)||void 0===n?void 0:n.toLowerCase())}))){var a=G("alreadyExistCannotProceed",{type:we(o)});return Lo[o]=a,Vt(o,a),U(a)}To.length>0&&(mn(e.resellers[0],!1),r&&H("".concat(r)))}else{var l=G("noDataFoundByValue");o&&Wo.includes(o)?(l=G("noDataFoundErrorThatMustExists",{type:we(o)}),Vt(o,l),Lo[o]=l,U(l)):H(l),nn(null),n=null,wo=[]}t(null,n)})).catch((function(e){U(Ae(e,"")),t(e,null)})).finally((function(){return ct({state:!1,id:o})}))},rn=function(e,t){if(t&&t.widgetId){var n=t.widgetId,a=t.value;So.push(n),Mt(n,a)}},on=function(){var e,t,n=!1,a=gt[Eo],l=(null==R?void 0:R.errors)||{};if(null!=a&&a.customWidget&&(null===(e=Object.keys(R))||void 0===e?void 0:e.length)>0){var r=null==a?void 0:a.customWidget,i=R[r]||{},o=Object.values(i)||[];(null==o?void 0:o.length)>0&&(U(null==o?void 0:o.join(", ")),n=!0)}else if((null===(t=Object.keys(l))||void 0===t?void 0:t.length)>0){var s=Object.values(l);(null==s?void 0:s.length)>0&&(U(null==s?void 0:s.join(", ")),n=!0)}return n},sn=function(e,t){var n,a;t?(yo=(null===(n=gt[Eo])||void 0===n?void 0:n.partialSubmit)&&!I&&!r||!1,gs=!1,I&&null!=I&&I.activeTab&&null!==(a=gt[Eo])&&void 0!==a&&a.partialSubmit&&(yo=parseInt(null==I?void 0:I.activeTab)<parseInt(gt[Eo].id)),(yo||L)&&Ft(),Eo++,Oo=!r&&Eo!==ht.length-1,B&&B(Eo),setTimeout((function(){qt({})}),1e3)):(Eo=Eo>0?Eo-1:Eo,B&&B(Eo)),e()},cn=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Zt(),!t&&null!=P&&P.activeTab&&0!==P.statusCode?fs=!!(parseInt("".concat(null==P?void 0:P.activeTab))<Eo):t||(fs=!1),t&&on()?console.warn(" ☣️ Custom Widget errors => ",R):r||!t?sn(e,t):void Bt().then((function(n){var a=Object.values(n)||[],l=Object.keys(n),r=Ro[Eo],i=Oe(jt,G,{activeValidationRules:r,isUniqueFieldIds:Mo,isExistFieldIds:Wo,invalidFields:Lo,controlableFields:No,controlableFieldIDs:xo,requiredFieldIds:Uo,skipValidationIfHidden:us}),o=i.errMsg,s=i.id,c=(null==r?void 0:r._nodes)||[];return a.length>0?(Vt(l[0],a[0]),U(a[0])):o&&(Vt(s,o),c.includes(s))?U(o):void sn(e,t)}))},un=function(){if(on())return console.warn(" ☣️ Custom Widget errors => ",R);gs=!1,jt.resellerType&&jt.resellerType===S.resellerType||Mt("resellerType",S.resellerType),Bt().then((function(e){var t=Object.values(e);if(t.length>0)U(t[0]);else{var n,a=Object.values(Go)||[];if((null===(n=Object.keys(a))||void 0===n?void 0:n.length)>0)return U(a.join(", "));var l=Oe(jt,G,{activeValidationRules:ho,isUniqueFieldIds:Mo,isExistFieldIds:Wo,invalidFields:Lo,controlableFields:No,controlableFieldIDs:xo,requiredFieldIds:Uo,skipValidationIfHidden:us}),r=l.errMsg,i=l.id;r?(Vt(i,r),U(r)):(yo=!1,gs=!0,Ft())}}))},dn=function(e){return e.toLowerCase().replace(/([-_][a-z])/g,(function(e){return e.toUpperCase().replace("-","").replace("_","")}))},mn=function(e,t){var n=e,a=n.additionalFields&&n.additionalFields.reduce((function(e,t){return e[Yo[t.name]||t.name]=t.value,e}),{}),l=fo({},jt),r=[];for(var i in To){var o=To[i],s=a&&a[o]||n[t?dn(o):o];if(l[o]=s||l[o],Zo.includes(o)){var c=a&&a[o]||n[t?dn(o):o];c&&r.push(c)}}wo=r,Wt(l)},pn=function(e,t){rt(!0),function(e){return v("/dms/auth/userAlreadyExists",{method:"POST",body:e})}({userId:e}).then((function(e){0===e.resultCode?(K(e),t&&t(null,e)):(U(e),t&&t(e))})).catch((function(n){Vt("userId",n.resultDescription||"userId: ".concat(e," is not unique")),U(n),t&&t(n)})).finally((function(){return rt(!1)}))},fn=function(e,t){if(!r&&Jo.length>0&&Object.values($o).includes(t.id)){var n=fo({},jt);for(var a in $o){var l=$o[a];jt[l]&&(n[a]=jt[l]),l===t.id&&(n[a]=e)}Object.keys(n).length>0&&Wt(n)}if(ys[t.id]&&e){var i=ys[t.id],o=(ko[t.id]||t.options||[]).find((function(t){return t.value===e}));Mt("".concat(i),(null==o?void 0:o.name)||e)}},vn=function(e,t,n){var a=Zo.includes(t),l=Vo.includes(t);a&&!l&&gn(e,t,n),_o.includes(t)&&!a&&ne({widgetId:t,value:e},rn)},gn=function(e,t,n){var a;n.validation&&n.validation.customerNIValidation?e&&(ct({state:!0,id:t}),(a=e,v("/dms/v1/customers/?nationalId=".concat(a))).then((function(e){if(0===e.resultCode&&e.customer){var n=e.customer,a={type:we(t)};K(G("externalValidateSuccess",a)),mn(n,!0),ct({state:!1,id:t})}else ct({state:!1,id:t}),console.error(G("noDataFoundErrorThatMustExists",{type:we(t)}))})).catch((function(e){ct({state:!1,id:t}),console.error(G("noDataFoundErrorThatMustExists",{type:we(t)}))}))):e&&e.length>0&&!wo.includes(e)&&ln({additionalFields:[{name:t,value:e}],resellerData:{},widget:n},(function(n,a){a&&_o.includes(t)&&So.push(t),bo=a?t:"",n||a||!_o.includes(t)||ne({widgetId:t,value:e},rn)}),{message:G("searchResellersFoundByCIN",{type:we(t)}),widgetId:t})},hn=function(e,t,n){var a;if(Gt(e,n),ts.length>0&&n)for(var l in es){var r=es[l];if(r.fields.includes(e)&&r.widget.validation.dataSource){var i=fo({},r.widget),o=ke(r.widget.validation.dataSource,r.fields,fo(fo({},jt),{},(0,u.Z)({},e,n)));!o.includes("/${")&&o&&It(i,o)}}if(null!==(a=t.validation)&&void 0!==a&&a.anyAssociatedField){var s=t.validation.anyAssociatedField;rt(!0);var c="/dms/v1/template/dropdown/".concat(s,"?associatedFieldName=").concat(e,"&associatedFieldValue=").concat(n);(Object.keys(is)||[]).includes(c)||O(c).then((function(e){if(Do.push(s),ko[s]=[],e.values&&0!==e.values.length)e.values.forEach((function(e){ko[s].push({value:e,name:e})})),is[c]=ko[s];else{var t=b.find((function(e){return e.id===s}));ko[s]=null==t?void 0:t.options,U("".concat(s.charAt(0).toUpperCase()+s.slice(1),": ").concat(e.resultDescription))}rt(!1)}))}},En=function(e){return Ie(e).map((function(e){return{value:e.resellerId,name:"".concat(e.resellerName," ").concat(e.resellerId?"("+e.resellerId+")":"")}}))},yn=function(e,t){e?Go.userId=e:(delete Go.userId,tt(t))},bn=function(e,t){var n,a=e.map((function(e){return e.id}));if(a&&"string"==typeof a[0]&&"none"===(null===(n=a[0])||void 0===n?void 0:n.toLowerCase())&&a.shift(),(a.includes("None")||a.includes("none"))&&(a=["None"]),os.includes(t)){var l=ss[t];ko[l]=e}At({target:{value:a.join(","),name:t}})},wn=function(e,t){Mt(t,e,!1)};return b&&b.length>0?a.createElement(a.Fragment,null,a.createElement(Ot,{open:Ze,setOpen:Te,setData:function(e){if(e&&We.widgetId){var t,n=We.widgetId;if(delete Lo[n],Uo.includes(n)&&(null==e||!e.result)&&(null==e||null===(t=e.errData)||void 0===t?void 0:t.length)>0){var a=e.errData.find((function(e){return!!e}));a&&(Lo[n]=a),a&&Vt(n,a)}Mt(n,null==e?void 0:e.result)}else console.error(" 🧨 Something wrong while saving value for widget: ",e,We)},loading:w,data:We}),a.createElement(ut,{open:De,onClose:function(){Pe(!1)},loading:w,onOk:function(){J.goBack()},dialogTitle:"".concat(G("cancelConfirmationTitle")),dialogDescription:"".concat(G("cancelConfirmationText")),okButtonText:G("yes"),closeButtonText:G("no")}),a.createElement(se.SeamlessStepper,{steps:ht,components:{Control:function(e){var t,n=e.goNext,l=e.goPrev,i=e.disableFirst,s=e.disableLast;return a.createElement(Be.Z,{display:"flex",flexDirection:"column"},a.createElement("div",{className:(0,de.default)($.dividerSpacing)}),a.createElement(Be.Z,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},go>1&&a.createElement("div",null,a.createElement(se.SeamlessButton,{onClick:function(){return function(e){return cn(e,!1)}(l)},disabled:i,id:"prevButtonRef",className:(0,de.default)($.element),color:"primary",variant:"contained"},G("previous")),a.createElement(se.SeamlessButton,{className:(0,de.default)($.element),onClick:function(){return function(e){return setTimeout((function(){return cn(e)}),100)}(n)},disabled:s||fs,id:"nextButtonRef",color:"primary",variant:"contained"},null===(t=gt[Eo])||void 0===t||!t.partialSubmit||r||o?G("next"):G("save&Next"))),o?a.createElement(se.SeamlessButton,{onClick:function(){return J.goBack()},className:(0,de.default)($.element),color:"default",variant:"contained",disabled:w||Oo},G("cancel")):a.createElement("div",null,a.createElement(se.SeamlessButton,{onClick:function(){return Pe(!0)},className:(0,de.default)($.element),color:"primary",variant:"contained"},G("cancelButton")),a.createElement(se.SeamlessButton,{onClick:un,className:(0,de.default)($.element),color:"primary",variant:"contained",disabled:w||Oo},G("submitButton")))),a.createElement("div",{className:(0,de.default)($.dividerSpacing)}),w&&a.createElement(ae.Z,null))}}},gt&&gt.length>0&&gt.map((function(e,t){var n;return a.createElement(ce.Z,{key:e.id||t,container:!0,className:$.spacingTop},a.createElement(ce.Z,{container:!0,spacing:3},a.createElement(ce.Z,{item:!0,xs:12},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},e.title||"Reseller Template"))),a.createElement(ce.Z,{container:!0,className:$.spacingTop},"users[]"===(null===(n=e.widgets[0])||void 0===n?void 0:n.fieldType)&&Ko.length>0&&a.createElement(Ui,{userFields:Ko,editView:r,loading:w||lt,resellerData:S,isUserIdUniqueHandler:pn,dataHandler:yn,data:Ye}),null!=e&&e.customWidget&&N&&N[null==e?void 0:e.customWidget]?a.createElement(a.Fragment,{key:e.id},N[null==e?void 0:e.customWidget]):a.createElement(ce.Z,{container:!0,spacing:3,className:$.spacingBottom},e.widgets.map((function(e,t){var n,l,i,s,c=null,u=e.id,d=e.type,m=e.placeholder||we(u||""),p=e.defaultValue;e.defaultValue&&e.defaultValue.startsWith("${")&&e.defaultValue.endsWith("}")&&(p="");var f=jt[u]||p||"",v=Lt[u],g="motte_de_passe"===u&&"true"===jt.one_time_password&&"false"===jt.motte_de_passe_flag;if(["resellerType"].includes(u)||g)return null;if(xo.length>0&&xo.includes(u)){var h=No[u];if(Re(h,jt))return us=ds,null;us.includes(u)&&us.splice(us.indexOf(u),1)}var y="password"===e.validation||"password"===(null===(n=e.validation)||void 0===n?void 0:n.type);jo&&y&&So.push(u);var Z=r&&!e.mutable,T=o||Z||"motte_de_passe_flag"===u&&!0===zt||So.includes(u);if(["dropdown","radio"].includes(d)){var _="radio"!==d?[{value:"",key:G("pleaseSelect_",{fieldName:e.placeholder})}]:[],x=(0,me.Z)(e.options||[]);Do.includes(u)&&ko[u]&&(x=ko[u]);var I=Le(x,jt),C=[].concat(_,(0,me.Z)((null==I?void 0:I.map((function(e){return{key:e.name||e.key,value:e.value}})))||[]));c=a.createElement(se.SeamlessDropDown,{id:"".concat(u,"-drop-down"),error:!!Lt[u],disabled:T,fullWidth:!0,required:e.required&&A,className:$.element,label:m,helperText:v||G("pleaseSelect_",{fieldName:m}),options:C,name:"".concat(u),value:"".concat(f),onChange:function(t){var n;null!=e&&null!==(n=e.validation)&&void 0!==n&&n.associatedFieldFilterUrl?function(e,t){var n,a,l,r=null==t||null===(n=t.validation)||void 0===n?void 0:n.anyAssociatedField,i=null==t||null===(a=t.validation)||void 0===a||null===(l=a.associatedFieldFilterUrl)||void 0===l?void 0:l.replace("${regionName}",e);rt(!0),O(i).then((function(e){var n=(null==e?void 0:e.values)||(null==e?void 0:e.data);if(n&&n.length>0){Do.includes(r)||Do.push(r),ko[r]=[];var a=t.validation.parseFromDataSource||{};n.forEach((function(e){var t="object"===(0,pe.Z)(e);ko[r].push({value:t?e[null==a?void 0:a.value]:e,name:t?e[null==a?void 0:a.name]:e})}))}Zt(),rt(!1)})).catch((function(e){rt(!1)}))}(t.target.value,e):hn(u,e,t.target.value),fn(t.target.value,e),At(t)}})}else if(["autocomplete"].includes(d)){var D=[{value:"",key:G("pleaseSelect_",{fieldName:e.placeholder})}],P=(0,me.Z)(e.options||[]);Do.includes(u)&&ko[u]&&(P=ko[u]);var N=Le(P,jt),k=[].concat(D,(0,me.Z)((null==N?void 0:N.map((function(e){return{key:e.name||e.key,value:e.value}})))||[])),R=k.find((function(e){return e.value==f}))||k[0];c=a.createElement(Je.ZP,{id:"".concat(u,"-auto-complete"),disabled:T,fullWidth:!0,className:(0,de.default)($.element,$.autoElement),options:k,"aria-required":e.required&&A,getOptionLabel:function(e){return e.key},defaultValue:R,loading:st.state&&st.id===u,getOptionSelected:function(e,t){return e.value==f},size:"small",value:R,onChange:function(t,n){var a=(null==n?void 0:n.value)||"";hn(u,e,a),fn(a,e),At({target:{value:a,name:u}})},renderInput:function(t){return a.createElement($e.Z,(0,Ve.Z)({},t,{name:"".concat(u),error:!!Lt[u],variant:"filled",label:m,required:e.required&&A,helperText:v||G("pleaseSelect_",{fieldName:m})}))}})}else if("label"===d)c=null;else if("multiselect"===d){var j;Do.includes(u)&&ko[u]&&(e.options=ko[u]);var F=e.options?Le(e.options,jt):[],L=(0,me.Z)(F.map((function(e){return{name:e.name||e.key,id:"".concat(e.value)}}))||[]);if(null!==(j=e.validation)&&void 0!==j&&j.enableAllOption&&L.unshift({name:G("all"),id:"all"}),e.validation.checkboxFormate){var B,M=f&&"string"==typeof f?null==f?void 0:f.split(","):[],W=L.filter((function(e){return null==M?void 0:M.includes(e.id)})),q={};if(null!==(B=e.validation)&&void 0!==B&&B.additionalFilters){var z,H,Y=e.validation.additionalFilters||{},J=Y.filterKey,X=Y.filterBy;Y.optionsOnly?q[J]=null===(z=Le(hs[X],jt))||void 0===z||null===(H=z.map((function(e){return e.value})))||void 0===H?void 0:H.join(","):q[J]=jt[X]}c=a.createElement(Oi,{options:L,loading:w,name:u,placeholder:m,selectedItems:W,required:e.required&&A,searchByField:e.validation.searchByKey,handleSelection:function(t){return function(e,t){var n;if(null!=e&&e.data&&(null===(n=Object.keys(e.data))||void 0===n?void 0:n.length)>0){var a,l=(null===(a=t.validation)||void 0===a?void 0:a.dependentField)||t.id;Mt(l,Object.keys(e.data))}}(t,e)},isOptionClickable:e.validation.isOptionClickable,additionalFilters:q,label:m,handleChange:function(t){hn(u,e,t.map((function(e){return e.id})).join(",")),bn(t,u)}})}else{var ee=f?f.split(",").map((function(e){return{id:e,name:e}})):[];c=a.createElement(a.Fragment,null,a.createElement(Tt,{data:L,loading:w,disabled:T,selectedItems:ee,label:m,required:e.required&&A,handleChange:function(t){hn(u,e,t.map((function(e){return e.id})).join(",")),bn(t,u)}}),st.state&&st.id===u&&a.createElement(ae.Z,null))}}else if("date"===d){var ne,le=null===(ne=e.validation)||void 0===ne?void 0:ne.minDate,re=ps[u],ie="";!le||le.startsWith("${")||le.endsWith("}")?le&&le.startsWith("${")&&le.endsWith("}")&&(ie=jt[re]?jt[re]:_e("0")):ie=_e(le),c=a.createElement(Xe.M,{utils:et.Z},a.createElement(Qe.e,(0,Ve.Z)({error:!!Lt[u],className:(0,de.default)($.element),views:["year","month","date"],fullWidth:!0,autoOk:!0,openTo:an,format:"yyyy-MM-dd",required:e.required&&A,variant:"inline",inputProps:fo({},e.validation.inputProps||{}),margin:"normal",id:"".concat(u,"-datepicker"),label:!f&&m,helperText:v||m,name:"".concat(u)},le&&ie&&{minDate:new Date(ie).getTime()},{value:null!=f?f:"",onChange:function(e){return function(e,t,n){if("Invalid Date"==e)Vt(t,G("invalidDate","".concat(n," is not valid date")));else{var a=Object.values(ps)||[],l=Object.keys(ps)||[],r=a.indexOf(t);a.length>0&&r>-1&&l[r]&&Mt("".concat(l[r]),e);var i=Q(e,"YYYY-MM-DD");At({target:{value:i,name:t}})}}(e,u,m)},KeyboardButtonProps:{"aria-label":"change date"},disabled:T})))}else if("file"===d)c=a.createElement(a.Fragment,null,a.createElement(xt(),{name:u,value:f,label:m,onChange:At,resourceType:"agent"}),f&&G("uploadSuccessful"),st.state&&st.id===u&&a.createElement(ae.Z,null));else if("taginput"===(null==d?void 0:d.toLowerCase()))c=a.createElement(co,{tagDataHandler:function(e){return function(e,t){var n;(!jt[t]||jt[t]&&e&&(null===(n=jt[t])||void 0===n?void 0:n.length)!==(null==e?void 0:e.length))&&Mt(t,e)}(e,u)},label:m,value:f,validation:e.validation,required:e.required,placeholder:m});else if(["text","number","email","password"].includes(d)){var oe,fe=Zo.includes(u),ve=function(e,t){var n,a;if("string"==typeof(null==e?void 0:e.max)&&null!=e&&null!==(n=e.max)&&void 0!==n&&n.startsWith("${")){var l,r=null===(l=e.max)||void 0===l?void 0:l.replace(/[^a-zA-Z ]/g,"");e.max=t[r]||e.max}if("string"==typeof(null==e?void 0:e.min)&&null!=e&&null!==(a=e.min)&&void 0!==a&&a.startsWith("${")){var i,o=null===(i=e.min)||void 0===i?void 0:i.replace(/[^a-zA-Z ]/g,"");e.min=t[o]||e.min}return e||{}}(null===(oe=e.validation)||void 0===oe?void 0:oe.inputProps,jt);c=a.createElement(a.Fragment,null,a.createElement(se.SeamlessInput,(0,Ve.Z)({id:"".concat(u,"-input"),key:"".concat(u,"-input"),error:!!Lt[u],disabled:T,type:d,inputProps:fo({},ve),fullWidth:!0,required:e.required&&A,className:$.element,label:m,helperText:v||G("pleaseEnter_",{fieldName:m}),name:"".concat(u),value:f},y&&{autoComplete:"new-password"},{onChange:At,onBlur:function(){return setTimeout((function(){return function(e,t,n){var a,l;((null===(a=Object.keys(jt))||void 0===a?void 0:a.length)||0)<((null===(l=Object.keys(E))||void 0===l?void 0:l.length)||0)&&Wt(fo(fo({},E),jt)),Gt(t,e),Vo.includes(t)||delete Lo[t],fn(e,n),Ho.includes(t)&&e&&pn(e),Ao.includes(t)?(ct({state:!0,id:t}),te(fo(fo({},jt),{},{validation:Fo[t],widgetId:t}),(function(a,l){var r={type:we(t)};if(!a&&0===l.resultCode)return K(G("externalValidateSuccess",r)),ct({state:!1,id:t}),vn(e,t,n);var i=Ae(a,G("externalValidateError",r));return Lo[t]=i,Vt(t,i),ct({state:!1,id:t}),U(i)}))):(ct({state:!1,id:t}),vn(e,t,n))}(f,u,e)}),200)},onFocus:function(){return function(e){if(Vo.includes(e)&&!qo.includes(e)){var t,n=jt[e];qo.push(e);var a,l=b.find((function(t){return t.id===e})),r={widgetId:e,values:(null==n?void 0:n.split(","))||[""]};l&&null!==(t=l.validation)&&void 0!==t&&t.searchByKey&&(r.searchByKey=null===(a=l.validation)||void 0===a?void 0:a.searchByKey),Wo.includes(e)&&(r.isSearchable=Zo.includes(e),r.isUnique=Mo.includes(e),r.mustExist=Wo.includes(e)),Ue(r),Te(!0)}else qo.splice(0,qo.length)}(u)}})),lt&&(Mo.includes(u)||Mo.includes(u))&&a.createElement(ae.Z,null),st.state&&st.id===u&&a.createElement(ae.Z,null),!st.state&&!T&&bo!==u&&fe&&a.createElement(ue.ZP,{title:"".concat(G("searchForResult"))},a.createElement(se.SeamlessButton,{className:(0,de.default)($.validateBtn)},a.createElement(Dt.Z,{fontSize:"small"}))),tn&&fe&&bo===u&&a.createElement(a.Fragment,null,a.createElement(ue.ZP,{title:"".concat(G("searchResellerCIN"))},a.createElement(se.SeamlessButton,{className:(0,de.default)($.validateBtn),onClick:function(){return Xt(!0)}},a.createElement(ze.Z,null))),a.createElement(mt,{open:Jt,setOpen:Xt,loading:w,data:tn})))}return c?("parentResellerId"===u&&(c=a.createElement(yt,{name:u,type:d,mutable:e.mutable,required:e.required&&A,value:f,label:m,helperText:v||G("pleaseSelect_",{fieldName:m}),handleChange:function(e){e.target?At(e):At({target:{value:e.value,name:u}})},disabled:T,resellerType:S.resellerType,errors:Lt,editView:r,canChangeResellerType:V})),"roleId"===u&&"dropdown"===d&&(c=a.createElement(Za,{name:u,classes:(0,de.default)($.element),value:f,defaultKey:"importId",label:m,required:e.required&&A,disabled:T,errors:Lt,handleChange:At})),"contractKey"!==u&&"contractId"!==u||"dropdown"!==d||(c=a.createElement(St,{name:u,errors:Lt,resellerType:S.resellerType,disabled:T,required:e.required&&A,helperText:v||G("selectContractType"),label:m,value:f,handleChange:At})),"domainCode"===u&&"dropdown"===d&&(c=a.createElement($i,{name:u,errors:Lt,resellerType:S.resellerType,disabled:T,required:e.required&&A,helperText:v||G("selectDomainCode"),label:m,value:f,assignDomainValue:wn,handleChange:function(e){e.target?At(e):At({target:{value:e.value,name:u}})}})),"domainName"===u&&"dropdown"===d&&(c=a.createElement($i,{name:u,errors:Lt,resellerType:S.resellerType,disabled:T,required:e.required&&A,helperText:v||G("selectDomainName"),label:m,value:f,assignDomainValue:wn,handleChange:function(e){e.target?At(e):At({target:{value:e.value,name:u}})}})),a.createElement(a.Fragment,{key:u},(null===(l=e.validation)||void 0===l?void 0:l.newLine)&&a.createElement(ce.Z,{item:!0,sm:12,style:{padding:0},xs:12}),a.createElement(ce.Z,{item:!0,xs:12,sm:(null===(i=e.validation)||void 0===i?void 0:i.gridColumn)||4},c),(null===(s=e.validation)||void 0===s?void 0:s.lineBreak)&&a.createElement(ce.Z,{item:!0,sm:12,style:{padding:0},xs:12}))):null})))))})))):null}));function Ts(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ts(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ts(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xs(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=document.querySelector(".MuiBreadcrumbs-ol"),a=document.querySelector("#child-app-title");n&&(n.style.visibility=e?"visible":"hidden"),a&&(a.innerText=t)}var Is=(0,re.Z)((function(e){return(0,ie.Z)({spacingTop:{marginTop:e.spacing(3)},element:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},input:{marginBottom:e.spacing(3)},dividerSpacing:{marginBottom:e.spacing(3)}})})),Cs=!1,Ds=!1,Ps=null,Ns=null,ks=!1,Rs="",Os={},js="",As=window.config||{},Fs=As.defaultTemplate||"",Ls=As.actorConfig||{};const Bs=function(e){var t,n,l,r,i,u,d,f=e.data,v=e.edit,g=void 0!==v&&v,h=e.isCloningRecord,E=void 0!==h&&h,y=e.onFormSubmit,b=e.title,w=e.description,S=e.loading,Z=e.preInitializedData,T=void 0!==Z&&Z,_=e.reSubmitAllowed,x=void 0!==_&&_,I=e.customWidgetErrors,C=void 0===I?{}:I,D=e.resellerInfo,P=e.customWidgets,N=e.getChildComponentStateHandler,k=e.partialSavedUserData,R=e.getTemplateHandler,O=Is(),j=(0,m.useTranslation)().t,A=(0,s.useHistory)(),F=Jn()().checkPermission,L=(0,o.useSelector)((function(e){return e.auth})).user,B=a.useState({}),M=(0,c.Z)(B,2),W=M[0],V=M[1],q=a.useState(!1),U=(0,c.Z)(q,2),K=U[0],z=U[1],H=a.useState(k),G=(0,c.Z)(H,2),Y=G[0],$=G[1],J=a.useState(),X=(0,c.Z)(J,2),Q=X[0],ee=X[1],te=Ct()(),ne=te.dateFormatter,ae=te.moment;function re(){Os={},js=""}L&&null!==(t=L.info)&&void 0!==t&&t.resellerData&&(i=null===(u=L.info.resellerData)||void 0===u?void 0:u.resellerId,Ns=null===(d=L.info)||void 0===d?void 0:d.resellerData),a.useEffect((function(){return re(),function(){re()}}),[]);var ie=function(e,t){var n;t?$(null!==(n=t.resultDetails)&&void 0!==n?n:t):ee(e)},pe=(0,oe.TA)({initialValues:f,onSubmit:function(e){y&&y(e,K?ie:void 0)},enableReinitialize:!0}),fe=pe.values,ve=pe.handleChange,ge=pe.handleSubmit,he=pe.setValues,ye=pe.setFieldValue,be=p().showErrorMessage,we=a.useState(null),Ze=(0,c.Z)(we,2),Te=Ze[0],_e=Ze[1],Ie=a.useState(g||!1),Ce=(0,c.Z)(Ie,2),Ne=Ce[0],ke=Ce[1];a.useEffect((function(){var e=fe.resellerType;!e&&f.resellerTypeId&&ye("resellerType",js||f.resellerTypeId),e&&e!==js&&R&&(Cs=!0,R(e,(function(t,n){n?(Cs=!1,js=e,_e(n)):(Cs=!1,_e(null))})))}),[fe.resellerType]);var Re=a.useMemo((function(){return Se(Te)}),[Te]);a.useEffect((function(){if(T&&"campaign"===Rs){var e,t,n=null==D||null===(e=D.profileInformation)||void 0===e||null===(t=e.campaignType)||void 0===t?void 0:t.typeId;ye("resellerType",n),!Ae.resellerType&&(Ae.resellerType=n)}}),[D]);var Oe,je,Ae=a.useMemo((function(){var e;if(T)return{};var t=xe(Re,D,g,{moment:ae});if(g&&(t.resellerType=t.resellerTypeId||Rs),g||(t.parentResellerId=i),g&&null!=D&&D.users&&(null===(e=D.users)||void 0===e?void 0:e.length)>0){var n=D.users,a={};for(var l in n){var r,o,s,c,u,d,m,p,f=n[l],v={roleId:f.roleId,userId:f.userId,userPhone:(null===(r=f.fields)||void 0===r||null===(o=r.parameters)||void 0===o?void 0:o.MSISDN)||"",userEmail:(null===(s=f.fields)||void 0===s||null===(c=s.parameters)||void 0===c?void 0:c.Email)||"",roleStartDate:(null===(u=f.fields)||void 0===u||null===(d=u.parameters)||void 0===d?void 0:d.roleStartDate)||"",roleExpiryDate:(null===(m=f.fields)||void 0===m||null===(p=m.parameters)||void 0===p?void 0:p.roleExpiryDate)||"",userPassword:f.password,principalKey:f.principalKey};0==+l?t=_s(_s({},t),v):a[+l-1]=v}t.userData=a}return t}),[Re,D]);a.useEffect((function(){f&&f.resellerTypeId&&g&&ye("resellerType",f.resellerTypeId)}),[f.resellerTypeId]),a.useEffect((function(){if(fe.resellerType&&ks){var e,t,n,a,l,r,i,o,s,c,u=(null===(e=Os)||void 0===e?void 0:e.oldType)||(null===(t=Os.oldType)||void 0===t?void 0:t.values)||[],d=Object.keys(Ae);if(u.length<=0&&d.length>=4&&(Os.oldType={type:fe.resellerType,values:d}),Os&&(Os.newType={type:fe.resellerType,values:d}),null!==(n=Os)&&void 0!==n&&n.oldType&&null!==(a=Os)&&void 0!==a&&a.newType&&(null===(l=Os.oldType)||void 0===l?void 0:l.type)!==(null===(r=Os.newType)||void 0===r?void 0:r.type)&&(null===(i=Os.newType)||void 0===i||null===(o=i.values)||void 0===o?void 0:o.length)>0&&(null===(s=Os.oldType)||void 0===s||null===(c=s.values)||void 0===c?void 0:c.length)>0){var m=Os.newType.values.filter((function(e){var t;return(null===(t=Os.oldType)||void 0===t?void 0:t.values.includes(e))&&"parentResellerId"!==e}));V({notEditableFields:m,canChangeResellerType:ks})}}}),[fe,Ae]),a.useEffect((function(){ye("resellerType",Fs);var e=new URLSearchParams(window.location.search);ks=!1,e.has("type")&&F(gn)&&(ks=!0,ke(!1)),Ds=e.has("viewOnly");var t=j("resellerManagement");e.has("resellerId")?((Rs=e.get("resellerId"))&&!g&&(ye("resellerType",Rs),!Ae.resellerType&&(Ae.resellerType=Rs)),xs(!1,t=j("campaign"===Rs?"campaignManagementPageTitle":"actorManagement"))):xs(!0,t)}),[]),Ns&&(Ps=null===(Oe=Ns)||void 0===Oe?void 0:Oe.resellerTypeId),g&&f.resellerTypeId&&(Ps=f.resellerTypeId),!Ae.resellerType&&fe.resellerType&&(Ae.resellerType=fe.resellerType),Ae.resellerType||fe.resellerType||!Rs||(Ae.resellerType=Rs),!Ne&&g&&Ns&&(null===(n=Ns)||void 0===n||null===(l=n.resellerTypeId)||void 0===l?void 0:l.toLowerCase())!==(null===(r=Ps)||void 0===r?void 0:r.toLowerCase())&&(Ps=null===(je=Ns)||void 0===je?void 0:je.resellerTypeId);var Fe="";if(Rs&&Ls.slugs)for(var Le in Ls.slugs)Ls.slugs[Le]===Rs&&(Fe=Le);var Be=g?Ds?"viewResellerPageTitle1":"editResellerPageTitle1":"addResellerPageTitle1",Ve=g?Ds?"viewResellerPageDescription1":"editResellerPageDescription1":"addResellerPageDescription1";return a.createElement(se.SeamlessContainer,{title:null!=b?b:j(Be,{type:j(Fe,"reseller")}),description:(null!=w?w:Fe)?"":j(Ve)},!Fs&&!Rs&&a.createElement(a.Fragment,null,g&&!ks&&F(gn)&&a.createElement("div",{style:{textAlign:"right"}},a.createElement(ue.ZP,{title:"".concat(j("changeResellerType"))},a.createElement(se.SeamlessButton,{onClick:function(){A.push("/home/reseller/resellers/edit/".concat(f.resellerId,"?type=yes"))},color:"primary",disabled:S,variant:"text",style:{textAlign:"right"}},a.createElement(_a.Z,{fontSize:"small"})))),a.createElement(ce.Z,{container:!0,className:O.spacingTop},a.createElement(ce.Z,{container:!0,spacing:3},a.createElement(ce.Z,{item:!0,xs:12},a.createElement(le.Z,{variant:"subtitle1",color:"primary"},j("selectGroup")))),a.createElement(ce.Z,{container:!0,spacing:3},a.createElement(ce.Z,{item:!0,xs:12,sm:4,className:(0,de.default)(O.input,O.element)},Ps&&!T?a.createElement(Ga,{name:"resellerType",value:fe.resellerType,handleChange:ve,editView:g,resellerType:Ps,disabled:Ne,onlyAllowedTypes:!0,label:j("selectGroup","Please select group"),helperText:j("pleaseSelectGroup"),required:!0}):a.createElement(Me.Z,null))))),a.createElement("div",{className:(0,de.default)(O.dividerSpacing)}),a.createElement(We,{loading:S||Cs}),a.createElement(Zs,{data:Te,disabledView:S||Cs||Ds,editView:g,isCloningRecord:E,additionalFields:T?f:Ae,allWidgets:Re,resellerData:fe,reSubmitAllowed:x,customWidgetErrors:C,additionalProps:W,partialSavedUserData:Y,customWidgets:P,callbackData:Q,resellerInfo:D,canChangeResellerTypeFlag:ks,activeTabStatus:function(e){(!g||ks)&&ke(!!e)},onFormSubmit:function(e,t){if(Object.keys(e).length>0){null!=t&&t.isPartialSubmitAllowed&&z(!0);var n=function(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=arguments.length>3?arguments[3]:void 0,r=[],i=[],o={},s="motte_de_passe",c=[],u=[],d=[],m={};for(var p in t){var f,v,g,h,E,y=t[p],b=y.id;"multiselect"===y.type&&u.push(b),null!==(f=y.validation)&&void 0!==f&&f.removeRequestPayload&&("add"===y.validation.removeRequestPayload&&l&&c.push(b),"edit"===y.validation.removeRequestPayload&&!l&&c.push(b),"both"===y.validation.removeRequestPayload&&c.push(b)),null!==(v=y.validation)&&void 0!==v&&v.mapDataBeforeSubmit&&(o[b]=y.validation.mapDataBeforeSubmit),"generic"===y.fieldType?r.push(b):"additionalInformation"===y.fieldType&&i.push(b),"password"!==y.validation&&"password"!==(null===(g=y.validation)||void 0===g?void 0:g.type)||"users[]"===y.fieldType||(s=b),l&&null!==(h=y.validation)&&void 0!==h&&h.renamePayloadKeyBeforeUpdate&&(d.push(b),m[b]=null===(E=y.validation)||void 0===E?void 0:E.renamePayloadKeyBeforeUpdate)}var w=a.extraPayloadFields||{},S=a.isPartialSubmitAllowed||!1,Z=a.userFields||[],T=Z.map((function(e){return e.id})),_=a.userFieldsData||{},x={},I={},C={},D=[],P=function(t){if("string"==typeof e[t]&&(e[t]=e[t].trim()),r.indexOf(t)>-1){if(["street","zip","city","country","phone","email"].includes(t))I[t]=e[t];else if(d.includes(t)){var n=m[t]||t;x[n]=e[t]}else x[t]=e[t];c.includes(t)&&x[t]&&delete x[t]}else if((null==Z?void 0:Z.length)>0&&T.indexOf(t)>-1)C[t]=e[t];else if(i.indexOf(t)>-1&&e[t]){var a=Object.keys(w),l=o[t]||t,s=w[l]||{};if(a.includes(l)){var p=e[t].split(",");if(u.includes(l)&&p.length>1){var f={};for(var v in p.forEach((function(e){var n;(null==w||null===(n=w[t])||void 0===n?void 0:n[e]).forEach((function(e){f[e.name]=f[e.name]||[],f[e.name].push(e.value)}))})),f)D.push({name:v,value:f[v].join(",")})}else s[e[t]]&&D.push.apply(D,(0,me.Z)(s[e[t]]))}!c.includes(t)&&D.push({name:l,value:e[t]})}};for(var N in e)P(N);l&&(x.resellerName=x.name);var k=[];if(e[s]&&k.push({password:e[s]}),Z.length>0&&(null===(n=Object.keys(C))||void 0===n?void 0:n.length)>0){var R=De(C);k.push(R);var O=Pe(_);k.push.apply(k,(0,me.Z)(O))}return k.length>0&&k.forEach((function(e,t){0===Object.keys(e).length&&k.splice(t,1)})),S&&k.splice(0,k.length),Ee(Ee({},x),{address:I,additionalFields:D,users:k})}(function(e){var t=Re.filter((function(e){return"date"===e.type})).map((function(e){return e.id}));if(t.length>0)for(var n in e)t.includes(n)&&e[n]&&(e[n]=ne(e[n],"YYYY-MM-DD"));return e}(e),Re,t,g);null!=t&&t.FinalSubmit?n.FinalSubmit=t.FinalSubmit:delete n.FinalSubmit,he(n).then((function(e){return ge()}))}else be("Something went wrong, Unable to submit data!")},getChildComponentStateHandler:N,loading:S||Cs}))};function Ms(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ws(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ms(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ms(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vs=(0,re.Z)((function(e){return(0,ie.Z)({dialogWrapper:{"& .MuiDialog-container":{width:"100%"},"& .MuiDialogTitle-root":{color:e.palette.primary.main,borderBottom:"1px solid #ccc"}},resultTitle:{fontSize:20},titleDanger:{color:"red",fontWeight:"bold"},spacingBottom:{marginBottom:e.spacing(1.5)}})})),qs=null,Us=!1;const Ks=function(){var e=(0,s.useParams)().id,t=Vs(),n=(0,o.useSelector)((function(e){return e.auth})).user,l=a.useState(!1),r=(0,c.Z)(l,2),i=r[0],u=r[1],d=p(),f=d.showErrorMessage,g=d.showSuccessMessage,h=d.showInfoMessage,E=a.useState({}),y=(0,c.Z)(E,2),b=y[0],w=y[1],S=a.useState({}),Z=(0,c.Z)(S,2),T=Z[0],_=Z[1],x=a.useState(!1),I=(0,c.Z)(x,2),C=I[0],N=I[1],k=a.useState({}),O=(0,c.Z)(k,2),j=O[0],A=O[1],F=a.useState(""),L=(0,c.Z)(F,2),B=L[0],M=L[1],W=(0,s.useHistory)(),V=(0,m.useTranslation)().t,q=Jn()().checkPermission,U=a.useState(void 0),K=(0,c.Z)(U,2),z=K[0],H=(K[1],a.useCallback((function(e,t){u(!0),D(e).then((function(e){if(u(!1),0===e.resultCode){var n=e.resellerInfo;if(e.resellerInfo&&n.resellerData){var a=e.resellerInfo.resellerData;if(a){var l=function(e){var t,n;return Ws(Ws({},e),{name:e.resellerName,phone:e.phone||(null==e||null===(t=e.address)||void 0===t?void 0:t.phone),email:e.phone||(null==e||null===(n=e.address)||void 0===n?void 0:n.email),distributorId:e.distributorId||"0",chainStoreId:e.chainStoreId||"0"})}(a);w(l),_(n)}g("Reseller Name: ".concat(n.resellerData.resellerName)),t(null,a)}else f("Sorry, Invalid Parent Reseller Id"),t(e)}})).catch((function(e){return f(e.message)})).finally((function(){return u(!1)}))}),[])),G=a.useCallback((function(e,t){e&&(u(!0),R(e).then((function(n){0===n.resultCode?t&&t(null,n):qs?t&&t(null,qs):(h(V("noTemplateFound","No template found against ".concat(e,". Please wait, System is loading default template"))),R("DEFAULT").then((function(e){0===e.resultCode?(t&&t(null,e),qs=e):(t&&t(e),qs=null,h(V("defaultTemplateNotFound","Sorry, We even can't find default template in system.")))})))})).catch((function(e){return f(e.message)})).finally((function(){return u(!1)})))}),[]);a.useEffect((function(){var t=new URLSearchParams(window.location.search);Us=!1,t.has("type")&&q(gn)&&(Us=!0);var n="RESELLERID";t.has("source")&&(n=t.get("source")||"RESELLERID"),H({dealerID:{id:e,type:n},fetchAccountBalanceInformation:!0},(function(e){}))}),[]);var Y=function(t,a){0===t.resultCode?(g(t.resultDescription||"Reseller type updated successfully"),e===n.userId?W.push("/home/reseller/resellers/view/".concat(e)):W.goBack()):(a&&a(t),null!=t&&t.resultDetails&&Object.values(null==t?void 0:t.resultDetails).length>0?(N(!0),A(null==t?void 0:t.resultDetails),M(null==t?void 0:t.resultDescription)):f(t.resultDescription||"Something went wrong while saving data."))},$=a.useCallback((function(t,n){var a={},l=[];t.users&&((null==t?void 0:t.FinalSubmit)&&delete t.FinalSubmit,a=t.users,delete t.users,l=t.additionalFields,delete t.additionalFields,t.resellerTypeId=t.resellerTypeId||t.resellerType,delete t.resellerType);var r={dealerData:{resellerData:t,users:a,additionalFields:l},dealerPrincipal:{id:e,type:"RESELLERID"}};if(u(!0),Us)return J(r);P(r).then((function(e){return Y(e,n)})).catch((function(e){return f(e)})).finally((function(){return u(!1)}))}),[z]),J=function(e){var t,n,a=e.dealerData,l=e.dealerPrincipal;(function(e){return v("/dms/auth/changeResellerType",{method:"POST",body:e})})({additionalFields:a.additionalFields,dealerPrincipal:l,newParentId:null===(t=a.resellerData)||void 0===t?void 0:t.parentResellerId,newResellerType:null===(n=a.resellerData)||void 0===n?void 0:n.resellerTypeId}).then((function(e){return Y(e)})).catch((function(e){return f(e)})).finally((function(){return u(!1)}))},re=function(){A({}),N(!1)},ie=Object.keys(j);return a.createElement(a.Fragment,null,a.createElement(Bs,{loading:i,data:b,edit:!0,resellerInfo:T,onFormSubmit:$,getTemplateHandler:G}),i?a.createElement(ae.Z,null):null,a.createElement(Q.Z,{open:C,className:t.dialogWrapper,fullWidth:!0,maxWidth:"md",onClose:re,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",disableBackdropClick:!0},a.createElement(ne.Z,{id:"alert-dialog-title"},a.createElement(le.Z,{className:(0,de.default)(t.titleDanger,t.resultTitle)},V(B))),a.createElement(te.Z,null,a.createElement(le.Z,{variant:"subtitle2"},V("errorDetails")),a.createElement("ul",null,j&&Object.values(j).map((function(e,n){return a.createElement("li",{key:n,className:t.spacingBottom},a.createElement(le.Z,{variant:"body1",className:t.titleDanger,display:"inline"},"".concat(ie[n],": ")),a.createElement(le.Z,{variant:"body1",display:"inline"},e))})))),a.createElement(ee.Z,null,a.createElement(X.Z,{onClick:re,variant:"contained",color:"primary"},V("close")))))};function zs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Hs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zs(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gs="",Ys=(0,re.Z)((function(e){return(0,ie.Z)({element:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},uploadInput:{"& #seamless-unified-upload":{border:"2px solid ".concat(e.palette.success.main),borderRadius:"8px"}}})}));const $s=function(e){var t,n,l,r,i=e.customFeatureList,d=void 0===i?[]:i,f=(0,s.useParams)().id,g=(0,m.useTranslation)().t,h=p(),E=h.showErrorMessage,y=h.showSuccessMessage,b=(0,s.useHistory)(),w=a.useState(null),S=(0,c.Z)(w,2),Z=S[0],T=S[1],_=a.useState({reason:"",reasonDocument:""}),x=(0,c.Z)(_,2),I=x[0],C=x[1],P=a.useState(!1),R=(0,c.Z)(P,2),O=R[0],j=R[1],A=a.useState(!1),F=(0,c.Z)(A,2),L=F[0],B=F[1],W=a.useState({}),V=(0,c.Z)(W,2),q=V[0],U=V[1],K=(0,o.useSelector)((function(e){return e.auth})).user,z=Ys(),H={reason:"",reasonDocument:""},G=a.useCallback((function(){var e=new URLSearchParams(window.location.search),t="RESELLERID";e.has("type")&&(t=e.get("type")||"RESELLERID");var n={dealerID:{id:f,type:t},fetchAccountBalanceInformation:!0};j(!0),D(n).then((function(e){if(j(!1),0===e.resultCode){var t=e.resellerInfo;if(T(t),e.resellerInfo&&t.resellerData){var n=e.resellerInfo.resellerData;n&&U(n)}else E(g("noDataFoundResellerInfo","Sorry, Unable to find reseller info")),T(null)}})).catch((function(e){return E(e)})).finally((function(){return j(!1)}))}),[]);a.useEffect((function(){G()}),[]);var Y=a.useCallback((function(e){B(!0),Gs=e}),[]),$=q.resellerId||f,J=null!==(t=null===(n=window)||void 0===n||null===(l=n.config)||void 0===l||null===(r=l.resellerAdditionalConfig)||void 0===r?void 0:r.notificationMode)&&void 0!==t?t:"SMS",X=a.useCallback((function(){j(!0);var e,t=K.requestedPrincipalId?"RESELLERID":"RESELLERMSISDN",n={principalId:{id:K.requestedPrincipalId?K.requestedPrincipalId:K.targetMSISDN,type:t},operationType:Gs,channel:"PORTAL",clientId:K.userId,prepareOnly:!1,prepareRequired:!1,referredChainErsReference:"",pendingTimeout:6e5,customParameters:{globalReason:I.reason},password:I.password,targetPrincipalType:t,targetResellers:(0,u.Z)({},"".concat($),I.reason)};if("DEACTIVATE"===Gs){if(n.customParameters["".concat($)]=I.reasonDocument,null===(e=window.config.resellerAdditionalConfig)||void 0===e?void 0:e.isDocumentRequired){if(!I.reason||!I.reasonDocument)return E(g("missingFieldsErrorGeneral"))}else if(!I.reason)return E(g("missingFieldsErrorGeneral"))}else if(!I.reason)return E(g("missingFieldsErrorGeneral"));N(n).then((function(e){if(0===e.resultCode){var t=e.resultDescription||e.resultMessage||"Status changed successfully";y("".concat(t)),B(!1),G()}else{var n=Object.values(e.resultDetails);E(n[0]||e)}})).catch((function(e){return E(e)})).finally((function(){j(!1),C(H)}))}),[q,I,K]),Q=a.useCallback((function(e,t){(function(e){return v("/dms/auth/expirePassword",{method:"POST",body:e})})({userId:e,resellerId:t}).then((function(e){if(0===e.resultCode){var t=e.resultDescription||e.resultMessage||"Password expired successfully";y("".concat(t)),B(!1),G()}else E(Ae(e,"Unable to expired the reseller password due to some error"))})).catch((function(e){return E(e)})).finally((function(){return j(!1)}))}),[]),ee=a.useCallback((function(e){var t={notificationMode:J,userId:e},n={};Object.keys(t).forEach((function(e){t["".concat(e)]&&(n["".concat(e)]=t["".concat(e)])})),function(e){return v("/dms/auth/forgetPassword",{method:"POST",body:e})}(n).then((function(e){if(0===e.resultCode){var t=e.resultDescription||e.resultMessage||"Password expired successfully";y("".concat(t)),B(!1),G()}else E(Ae(e,"Unable to reset the reseller password due to some error"))})).catch((function(e){return E(e)})).finally((function(){return j(!1)}))}),[]),te=a.useCallback((function(e,t){M(e).then((function(e){if(0===e.resultCode){var t=e.resultDescription||e.resultMessage||g("recordUpdateSuccess","Record updated successfully!");y("".concat(t)),b.push("/home/reseller/resellers/view/".concat(f))}else E(Ae(e,g("recordUpdateError")))})).catch((function(e){return E(e)})).finally((function(){return j(!1)}))}),[]),ne=a.useCallback((function(e,t,n){j(!0),k(e,t.toLowerCase(),n.toLowerCase()).then((function(e){if(0===e.resultCode){var t=e.resultDescription||e.resultMessage||g("recordUpdateSuccess","Record updated successfully!");y("".concat(t)),b.push("/home/reseller/resellers/view/".concat(f))}else E(Ae(e,g("recordUpdateError")))})).catch((function(e){return E(Ae(e,g("recordUpdateError")))})).finally((function(){return j(!1)}))}),[]);return a.createElement(se.SeamlessContainer,{title:g("viewResellersPageTitle",{element:f}),description:g("viewResellersPageDescription")},a.createElement(mr,{"data-testid":"view-reseller-info",data:q,id:f,loading:O,handleExpirePassword:Q,handleResetPassword:ee,handleResetWrongPasswordAttempts:te,resellerInfo:Z,handleStatus:Y,handleLifelineStatus:ne,customFeatureList:d}),O?a.createElement(ae.Z,null):null,a.createElement(ut,{open:L,onClose:function(){B(!1),C(H),j(!1)},onOk:X,dialogTitle:g("areYouSure"),dialogDescription:g("areYouSureOperation",{statusType:Gs})},a.createElement(se.SeamlessInput,{fullWidth:!0,required:!0,multiline:!0,rows:4,rowsMax:4,error:!I.reason,className:z.element,value:I.reason,onChange:function(e){return C(Hs(Hs({},I),{reason:e.target.value}))},label:g("enterReason",{reason:Gs,id:f}),helperText:g("reasonPlaceholder")}),"DEACTIVATE"===Gs&&a.createElement("div",{className:I.reasonDocument?z.uploadInput:""},a.createElement(xt(),{name:"global-reason-doc",value:I.reasonDocument,label:g("reasonDocumentPlaceholder"),onChange:function(e){var t="".concat((0,Il.getSrc)(e.target.value));C(Hs(Hs({},I),{reasonDocument:t}))},resourceType:"agent"}),I.reasonDocument&&g("uploadSuccessful"))))};var Js,Xs,Qs,ec,tc,nc=n(70331),ac=n(6487),lc=n(19869),rc=n(84939),ic=n(50969);function oc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function sc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oc(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var cc="",uc=null,dc=0,mc=(null===(Js=window.config)||void 0===Js?void 0:Js.defaultPerPageItems)||20,pc=mc,fc=pc,vc=null,gc=["resellerId","resellerMSISDN","resellerName","countryCode","status","contractId","resellerTypeName","parentResellerName"],hc=(null===(Xs=document.querySelector(".MuiDataGridPanelContent-root"))||void 0===Xs||Xs.querySelector(".MuiIconButton-sizeSmall"),null===(Qs=window)||void 0===Qs||null===(ec=Qs.config)||void 0===ec?void 0:ec.resellerAdditionalConfig),Ec=null!==(tc=null==hc?void 0:hc.resetAdditionalFilters)&&void 0!==tc&&tc;const yc=function(e){var t,n=e.customerCare,l=void 0!==n&&n,r=e.customFeatureList,i=void 0===r?[]:r,d=(0,m.useTranslation)().t,f=p(),g=f.showErrorMessage,h=f.showSuccessMessage,E=(0,re.Z)((function(e){return(0,ie.Z)({btnElement:{marginLeft:e.spacing(1),marginRight:e.spacing(1),whiteSpace:"nowrap",paddingLeft:e.spacing(2.5),paddingRight:e.spacing(2.5)},spaceElem:{margin:e.spacing(3)},element:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},actionButtonSpacing:{marginBottom:e.spacing(2)},flexSpacingJustify:{justifyContent:"space-between"},uploadInput:{"& #seamless-unified-upload":{border:"2px solid ".concat(e.palette.success.main),borderRadius:"8px"}}})})),y=(0,s.useHistory)(),b=(0,o.useSelector)((function(e){return e.auth})).user,w=a.useState([]),S=(0,c.Z)(w,2),Z=S[0],T=S[1],_=E(),x=b.requestedPrincipalId,D=a.useState(!1),P=(0,c.Z)(D,2),O=P[0],j=P[1],A=a.useState(!1),F=(0,c.Z)(A,2),L=F[0],B=F[1],M=a.useState({limit:fc,offset:dc,perPage:pc}),W=(0,c.Z)(M,2),V=W[0],q=W[1],U=a.useState({reason:"",reasonDocument:"",resellerReasons:{},resellerReasonDocuments:{}}),K=(0,c.Z)(U,2),z=K[0],H=K[1],G=a.useState(null),Y=(0,c.Z)(G,2),$=Y[0],J=Y[1],X=a.useState(!1),Q=(0,c.Z)(X,2),ee=Q[0],te=Q[1],ne=a.useState("1"),ae=(0,c.Z)(ne,2),le=ae[0],oe=ae[1],ce=Ol(),ue=ce.lifelineStates,me=ce.lifelineStatusFlag;function pe(){vc=null,fc=mc,dc=0,pc=mc}var fe=a.useCallback((function(e){j(!0),cc=e;var t={},n={};for(var a in Z){var l=Z[a];t["".concat(l.resellerId)]="",n["".concat(l.resellerId)]=""}H(sc(sc({},z),{resellerReasons:t,resellerReasonDocuments:n}))}),[Z]),ve=a.useCallback((function(){te(!0);var e=b.requestedPrincipalId?"RESELLERID":"RESELLERMSISDN",t={principalId:{id:b.requestedPrincipalId?b.requestedPrincipalId:b.targetMSISDN,type:e},operationType:cc,channel:"PORTAL",clientId:b.userId,prepareOnly:!1,prepareRequired:!1,referredChainErsReference:"",pendingTimeout:6e5,customParameters:{globalReason:z.reason},password:z.password,targetPrincipalType:e,targetResellers:z.resellerReasons};if("DEACTIVATE"===cc){if("1"===le?Object.keys(z.resellerReasonDocuments).forEach((function(e){t.customParameters["".concat(e)]=z.reasonDocument})):Object.keys(z.resellerReasonDocuments).forEach((function(e){t.customParameters["".concat(e)]=z.resellerReasonDocuments[e]})),!z.reason&&0===Object.keys(z.resellerReasons).length||!z.reasonDocument&&0===Object.keys(z.resellerReasonDocuments).length)return g(d("missingFieldsErrorGeneral"))}else if(!z.reason||0===Object.keys(z.resellerReasons).length)return g(d("missingFieldsErrorGeneral"));N(t).then((function(e){if(te(!1),0===e.resultCode){var t=e.resultDescription||e.resultMessage||"Status changed successfully";h("".concat(t)),j(!1),y.push("/home/reseller/resellers/children")}else if(e.batchId)Object.keys(e.resultDetails).forEach((function(t,n){var a=Z.find((function(e){return e.resellerId===t}));g("".concat(null==a?void 0:a.resellerName," - ").concat(e.resultDetails[t]))}));else{var n=e.resultDescription||"Sorry, Unable to change Resellers status: ".concat(cc);g(n)}})).catch((function(e){return g(e)})).finally((function(){return te(!1)}))}),[Z,z,b]),ge=(null===(t=window.config.resellerAdditionalConfig)||void 0===t?void 0:t.isExternalCodeSearch)||!1,he=a.useCallback((function(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};fc=(null==l?void 0:l.limit)||V.limit,pc=(null==l?void 0:l.limit)||V.perPage;var i=null!==(t=null!==(n=null==l?void 0:l.page)&&void 0!==n?n:V.page)&&void 0!==t?t:0;null!=l&&l.offset&&(dc=l.offset),e&&!a&&(dc=0,i=0);var o=[],s=(null==e?void 0:e.additionalFields)||[];null!=e&&e.additionalFields&&(e.additionalFields.length>0&&(o=e.additionalFields),e.resellerTypeId&&delete e.additionalFields)," "===(null==e?void 0:e.contractId)&&(e.contractId=""),ge&&null!=e&&e.externalCode&&o.push({name:"externalCode",value:null==e?void 0:e.externalCode});var c={};if(me){var u=a&&(null==a?void 0:a.lifecycleAttributes)||{},m=sc(sc({},u),{},{balanceStatus:null==e?void 0:e.balanceStatus,inventoryStatus:null==e?void 0:e.inventoryStatus});c.lifecycleAttributes=m}var p=sc({},e);if(p.isAutotransfer?p.isAutotransfer=1:delete p.isAutotransfer,p.regionName&&""!==p.regionName.trim()&&(o.push({name:"regionName",value:p.regionName}),delete p.regionName),p.domainType&&""!==p.domainType){if(p.resellerTypeId&&""!==p.resellerTypeId){var f=null==p?void 0:p.resellerTypeId.concat(","+(null==p?void 0:p.domainType));p.resellerTypeId=f}else p.resellerTypeId=p.domainType;delete p.domainType}var v=sc({additionalFields:o,resellerData:p},c);vc=a||v;var h=b.requestedPrincipalId;if(me)try{var E,y;delete v.status,null==v||null===(E=v.resellerData)||void 0===E||delete E.balanceStatus,null==v||null===(y=v.resellerData)||void 0===y||delete y.inventoryStatus}catch(e){}var w={additionalFields:[],resellerData:{resellerTypeId:"",contractId:"",resellerId:"",countryCode:"",resellerMSISDN:"",resellerName:"",additionalFields:[],domainType:"",regionName:" "}};te(!0),JSON.stringify(vc)===JSON.stringify(w)?I(h,dc,fc).then((function(e){var t;0===e.resultCode?(q(sc(sc({},V),{},{totalCount:e.totalCount,limit:fc,offset:dc,perPage:pc,page:i})),J(Ie(e.resellers)),null===(t=e.resellers)||void 0===t||t.length,B(!0)):(g(e.resultDescription||d("resellerError")),J(null))})).catch((function(e){return g(d("resellerError"))})).finally((function(){return te(!1)})):C(vc,fc,dc).then((function(e){if(0===e.resultCode){var t;q(sc(sc({},V),{},{totalCount:e.totalCount,limit:fc,offset:dc,perPage:pc,page:i})),J(Ie(e.resellers)),null===(t=e.resellers)||void 0===t||t.length,B(!0)}else{var n=e.resultMessage||d("noDataFound","Sorry, No data found");g(n),J(null)}})).catch((function(e){return g(e)})).finally((function(){te(!1),Ec?(r({target:{value:"",name:"resellerTypeId"}}),r({target:{value:"",name:"contractId"}}),r({target:{value:[],name:"additionalFields"}})):r({target:{value:s,name:"additionalFields"}})}))}),[Z,V,z,me]);a.useEffect((function(){return pe(),l||B(!0),function(){pe()}}),[]);var Ee=a.useCallback((function(e){var t,n;null===(n=null===(t=document.querySelector(".MuiDataGridPanelContent-root"))||void 0===t?void 0:t.querySelector(".MuiIconButton-sizeSmall"))||void 0===n||n.addEventListener("click",(function(){var e;if(null!==(e=uc)&&void 0!==e&&e.value)return y.push("/home/reseller/resellers/children")})),e.value&&(vc=(0,u.Z)({},e.columnField,e.value),te(!0),dc=0,uc=e,gc.includes(e.columnField)?he(null,{resellerData:(0,u.Z)({},e.columnField,e.value)}):he(null,{additionalFields:[{name:e.columnField,value:e.value}]}))}),[]),ye=a.useCallback((function(e,t){if(!e.resellerId||!e.newResellerParentId)return g(d("missingFieldsErrorGeneral"));(function(e){return v("/dms/auth/changeParent?newResellerParentId=".concat(e.newResellerParentId,"&resellerId=").concat(e.resellerId),{method:"POST",body:e})})(e).then((function(e){if(te(!1),0===e.resultCode)h("".concat(e.resultDescription)),y.push("/home/reseller/resellers/children"),t&&t(null,e);else{var n=e.resultDescription||"Sorry, Unable to change Parent Resellers";g(n),t&&t(e)}})).catch((function(e){return g(e)})).finally((function(){return te(!1)}))}),[]),be=a.useCallback((function(e,t){e&&(te(!0),R(e).then((function(e){0===e.resultCode?t&&t(null,e):t&&t(e)})).catch((function(e){return g(e)})).finally((function(){return te(!1)})))}),[]),we=a.useCallback((function(e,t){te(!0);var n=Z.map((function(e){return e.resellerId}));k(n,e.toLowerCase(),t.toLowerCase()).then((function(e){if(0===e.resultCode){var t=e.resultDescription||e.resultMessage||d("recordUpdateSuccess","Record updated successfully!");h("".concat(t)),y.push("/home/reseller/resellers/children")}else g(Ae(e,d("recordUpdateError")))})).catch((function(e){return g(Ae(e,d("recordUpdateError")))})).finally((function(){return te(!1)}))}),[Z]),Se=Jn()(),Ze=Se.checkPermission,Te=Se.checkFederatedPermission;return a.createElement(se.SeamlessContainer,{title:d("viewAllResellerChildrenPageTitle"),description:d("viewAllResellerChildrenPageDescription")},a.createElement(Be.Z,{display:"flex",flexDirection:"row",justifyContent:"flex-end",className:(0,de.default)(_.actionButtonSpacing,_.flexSpacingJustify)},a.createElement("div",null,Z&&Z.length>0&&Ze(vn)&&a.createElement(Be.Z,{display:"flex",flexDirection:"row",alignItems:"center"},me?a.createElement(a.Fragment,null,Ze(Tn)&&a.createElement(se.SeamlessButton,{onClick:function(){return we("balance","activate")},color:"primary",variant:"outlined",className:_.btnElement},d("activateBalance")),Ze(Tn)&&a.createElement(se.SeamlessButton,{onClick:function(){return we("balance","terminate")},color:"primary",variant:"outlined",className:_.btnElement},d("terminateBalance")),Ze(Tn)&&a.createElement(se.SeamlessButton,{onClick:function(){return we("scratchcard","activate")},color:"primary",variant:"outlined",className:_.btnElement},d("activateInventory")),Ze(Tn)&&a.createElement(se.SeamlessButton,{onClick:function(){return we("scratchcard","terminate")},color:"primary",variant:"outlined",className:_.btnElement},d("terminateInventory"))):a.createElement(a.Fragment,null,(Ze(_n)||Te(i,_n))&&a.createElement(se.SeamlessButton,{onClick:function(){return fe("BLOCK")},color:"primary",variant:"outlined",className:_.btnElement},d("BLOCKReseller")),Ze(xn)&&a.createElement(se.SeamlessButton,{onClick:function(){return fe("UNBLOCK")},color:"primary",variant:"outlined",className:_.btnElement},d("UNBLOCKReseller")),(Ze(In)||Te(i,In))&&a.createElement(se.SeamlessButton,{onClick:function(){return fe("FREEZE")},color:"primary",variant:"outlined",className:_.btnElement},d("FREEZEReseller")),Ze(Cn)&&a.createElement(se.SeamlessButton,{onClick:function(){return fe("UNFREEZE")},color:"primary",variant:"outlined",className:_.btnElement},d("UNFREEZEReseller")),(Ze(Tn)||Te(i,Tn))&&a.createElement(se.SeamlessButton,{onClick:function(){return fe("DEACTIVATE")},color:"primary",variant:"outlined",className:_.btnElement},d("DEACTIVATEReseller")),Ze(Zn)&&a.createElement(se.SeamlessButton,{onClick:function(){return fe("ACTIVATE")},color:"primary",variant:"outlined",className:_.btnElement},d("ACTIVATEReseller"))))),a.createElement(Ma,null)),(Ze(Sn)||Te(i,Sn))&&a.createElement(wl,{data:{status:"ALL",resellerTypeId:"",contractId:"",resellerId:"",countryCode:"",resellerMSISDN:"",resellerName:"",isAutotransfer:!1,additionalFields:[],domainType:"",regionName:" "},metaData:{lifelineStatusFlag:me,lifelineStates:ue},loading:ee,getTemplateHandler:be,onFormSubmit:he,customerCare:l}),L&&a.createElement("div",{style:{height:600,width:"100%"}},a.createElement(Ba,{id:x,onPageChange:function(e){pc=V.perPage,dc=e*pc,fc=pc,vc?he(null,vc,{page:e}):q({offset:dc,limit:fc,perPage:pc,page:e})},onPageSizeChange:function(e){dc=0,fc=pc=e,vc?he(null,vc,{limit:fc,offset:dc,page:0}):q({offset:dc,limit:fc,perPage:pc,page:0})},searchResellers:$,searchedData:vc,isLoading:ee,handleParentReseller:ye,paginationData:V,additionalProps:{lastFilter:uc},handleFilterSearch:Ee,onSelectionModelChange:function(e,t){var n=e.selectionModel,a=t.filter((function(e){return n.includes(e.resellerId)}));return T(a)},customerCare:l})),a.createElement(ut,{open:O,onClose:function(){return j(!1)},onOk:ve,dialogTitle:d("areYouSure"),dialogDescription:d("areYouSureOperation",{statusType:cc})},a.createElement(lc.ZP,{value:le},a.createElement(nc.Z,{position:"static"},a.createElement(rc.Z,{onChange:function(e,t){oe(t)},"aria-label":"simple tabs example"},a.createElement(ac.Z,{label:"General Reason",value:"1"}),a.createElement(ac.Z,{label:"Individual Reason",value:"2"}))),a.createElement(ic.Z,{value:"1"},a.createElement(se.SeamlessInput,{fullWidth:!0,required:!0,multiline:!0,rows:4,rowsMax:4,error:!z.reason,className:_.element,value:z.reason,onChange:function(e){return H(sc(sc({},z),{reason:e.target.value}))},label:d("enterGlobalReason",{reason:cc}),helperText:d("reasonPlaceholder")}),"DEACTIVATE"===cc&&a.createElement("div",{className:z.reasonDocument?_.uploadInput:""},a.createElement(xt(),{name:"global-reason-doc",value:z.reasonDocument,label:d("reasonDocumentPlaceholder"),onChange:function(e){if("image/png"===e.target.file.type){var t="".concat((0,Il.getSrc)(e.target.value));H(sc(sc({},z),{reasonDocument:t}))}else g(d("pngFileSupport"))},resourceType:"agent"}),z.reasonDocument&&d("uploadSuccessful"))),a.createElement(ic.Z,{value:"2"},Z.map((function(e,t){return a.createElement("div",{key:t},a.createElement(se.SeamlessInput,{fullWidth:!0,className:_.element,name:"reason-".concat(t),value:z.reason[e.resellerId],onChange:function(t){var n=z.resellerReasons;n["".concat(e.resellerId)]=t.target.value,H(sc(sc({},z),{resellerReasons:n}))},label:d("enterReason",{reason:cc,id:e.resellerId}),helperText:d("reasonPlaceholder")}),"DEACTIVATE"===cc&&a.createElement("div",{className:z.resellerReasonDocuments["".concat(e.resellerId)]?_.uploadInput:""},a.createElement(xt(),{name:"reason-doc-"+e.resellerId,value:z.resellerReasonDocuments["".concat(e.resellerId)],label:d("reasonDocumentPlaceholder"),onChange:function(t){var n="".concat((0,Il.getSrc)(t.target.value)),a=z.resellerReasonDocuments;a["".concat(e.resellerId)]=n,H(sc(sc({},z),{resellerReasonDocuments:a}))},resourceType:"agent"}),z.resellerReasonDocuments["".concat(e.resellerId)]&&d("uploadSuccessful")))}))))))};var bc=null;const wc=function(){var e=a.useState(!1),t=(0,c.Z)(e,2),n=t[0],l=t[1],r=p(),i=r.showErrorMessage,o=r.showSuccessMessage,u=r.showInfoMessage,d=a.useState({resellerType:"",resellerId:"",resellerMSISDN:"",parentResellerMSISDN:"",parentResellerId:"",chainStoreId:"1",distributorId:"2",contractId:"",terminalId:"",status:"Active",JuridicalName:"",address:{street:"",zip:"",city:"",country:"",phone:"",email:""},receiptTemplateKey:"1",productRangeKey:"0",moreData:{},rgroup:"",subrgroup:"",subsubrgroup:"",name:"",countryCode:"",dateOfBirth:new Date((new Date).setFullYear((new Date).getFullYear()-20)),phone:"",email:"",users:[],language:ye,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,additionalFields:[],additionalKYCFields:[]}),f=(0,c.Z)(d,2),v=f[0],g=(f[1],(0,s.useHistory)()),h=(0,m.useTranslation)().t,E=a.useState(void 0),y=(0,c.Z)(E,2),b=y[0],w=(y[1],a.useState(void 0)),S=(0,c.Z)(w,2),Z=S[0],T=S[1],_=a.useCallback((function(e,t){e&&(l(!0),R(e).then((function(n){0===n.resultCode?t&&t(null,n):bc?t&&t(null,bc):(u(h("noTemplateFound","No template found against ".concat(e,". Please wait, System is loading default template"))),R("DEFAULT").then((function(e){0===e.resultCode?(t&&t(null,e),bc=e):(t&&t(e),bc=null,u(h("defaultTemplateNotFound","Sorry, We even can't find default template in system.")))})))})).catch((function(e){return i(e)})).finally((function(){return l(!1)})))}),[]),x=function(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];0===e.resultCode?(o(e.resultDescription+"Reseller ID "+(null==e||null===(n=e.resultDetails)||void 0===n?void 0:n.reseller_id)||"Reseller type added successfully"),t&&T(e.resultDetails),!a&&t?t(null,e):g.goBack()):(i(e.resultDescription||"Something wrong while saving data."),t&&t(e))},I=a.useCallback((function(e,t){var n={},a=[];e.users&&((null==e?void 0:e.FinalSubmit)&&delete e.FinalSubmit,n=e.users,delete e.users,a=e.additionalFields,delete e.additionalFields,e.resellerTypeId=e.resellerTypeId||e.resellerType,delete e.resellerType);var r={dealerData:{resellerData:e,users:n,additionalFields:a},dealerPrincipal:{id:e.resellerId,type:"RESELLERID"}};l(!0),P(r).then((function(e){return x(e,t,!0)})).catch((function(e){return i(e)})).finally((function(){return l(!1)}))}),[b]),C=a.useCallback((function(e,t){if(Z)return I(e,t);var n=function(e,t){t&&(e.parentResellerMSISDN=null==t?void 0:t.resellerMSISDN,e.parentResellerId=null==t?void 0:t.resellerId),(null==e?void 0:e.FinalSubmit)&&delete e.FinalSubmit;var n=new FormData;for(var a in e)if(["address","users","additionalFields","additionalKYCFields","moreData"].includes(a)){var l=JSON.stringify(e[a]);n.append(a,"".concat(l))}else n.append(a,e[a]);return n}(e,b);l(!0),F(n).then((function(e){return x(e,t)})).catch((function(e){return i(e)})).finally((function(){return l(!1)}))}),[b,Z]);return a.createElement(a.Fragment,null,a.createElement(Bs,{loading:n,data:v,onFormSubmit:C,getTemplateHandler:_}),n?a.createElement(ae.Z,null):null)},Sc=function(){var e=(0,m.useTranslation)().t;return l().createElement(se.SeamlessContainer,{title:e("viewResellerRegionTitle"),description:e("viewResellerRegionPageDescription")},l().createElement(ci,null))},Zc=function(){var e=(0,s.useRouteMatch)().path,t=Jn()().AccessControlled;return a.createElement(s.Switch,null,a.createElement(s.Route,{path:e+"/create"},a.createElement(t,{feature:pn},a.createElement(wc,null))),a.createElement(s.Route,{path:e+"/edit/:id"},a.createElement(t,{feature:vn},a.createElement(Ks,null))),a.createElement(s.Route,{path:e+"/view/:id"},a.createElement(t,{feature:fn},a.createElement($s,null))),a.createElement(s.Route,{path:e+"/children"},a.createElement(t,{feature:fn},a.createElement(yc,null))),a.createElement(s.Route,{path:e+"/view-reseller-region"},a.createElement(t,{feature:fn},a.createElement(Sc,null))),a.createElement(s.Route,null,a.createElement(t,{feature:fn},a.createElement(yc,null))))};var Tc={importId:"",name:"",description:"",typeKey:0,roleKey:0,allowIdSpecification:!1,idRegexp:"",allowIdAutoGeneration:!1,idGenerator:"",used:!1,allowTopLevel:!1,allowWebshop:!1,allowTerminals:!1,allowWebLogin:!1,allowParentless:!1,subDevicePolicy:"1",adminSiteSupportGroup:"",taxGroupKey:0,contractKey:0,productRangeKey:0,receiptTemplateKey:1,childTypeKeys:[],accountTemplates:[]};const _c=function(){var e=a.useState(!1),t=(0,c.Z)(e,2),n=t[0],l=t[1],r=p(),i=r.showErrorMessage,o=r.showSuccessMessage,u=(0,s.useHistory)(),d=a.useCallback((function(){return u.push("/home/reseller/types/create")}),[]),m=a.useCallback((function(e){var t;l(!0),(t=e,v("/dms/v1/resellers/types/create",{method:"POST",body:t})).then((function(e){0===e.resultCode?(o(e.resultDescription||"Reseller type added successfully"),u.push("/home/reseller/types")):i(e.resultDescription||"Something wrong while saving data.")})).catch((function(e){return i(e)})).finally((function(){return l(!1)}))}),[]);return a.createElement(a.Fragment,null,a.createElement(Ir,{loading:n,data:Tc,onFormSubmit:function(e){return m(e)},resetHandler:d}),n?a.createElement(ae.Z,null):null)};var xc={importId:"",name:"",description:"",typeKey:0,roleKey:0,allowIdSpecification:!1,idRegexp:"",allowIdAutoGeneration:!1,idGenerator:"",used:!1,allowTopLevel:!1,allowWebshop:!1,allowTerminals:!1,allowWebLogin:!1,allowParentless:!1,subDevicePolicy:"",adminSiteSupportGroup:"",taxGroupKey:0,contractKey:0,productRangeKey:0,receiptTemplateKey:0,childTypeKeys:[""],accountTemplates:[]};const Ic=function(){var e=a.useState(!1),t=(0,c.Z)(e,2),n=t[0],l=t[1],r=p(),i=r.showErrorMessage,o=r.showSuccessMessage,u=(0,s.useHistory)(),d=(0,m.useTranslation)().t,f=(0,s.useParams)().type,g=a.useState(xc),h=(0,c.Z)(g,2),E=h[0],y=h[1];a.useEffect((function(){l(!0),z(f).then((function(e){return y(e.data)})).catch((function(e){return i(e)})).finally((function(){return l(!1)}))}),[]);var b,w,S=a.useCallback((function(){return u.push("/home/reseller/types/edit/".concat(f))}),[f]),Z=a.useCallback((function(e){var t;l(!0),e.role&&delete e.role,(t=e,v("/dms/v1/resellers/types/update",{method:"PUT",body:t})).then((function(e){0===e.resultCode?(o(e.resultDescription||"Reseller type added successfully"),u.push("/home/reseller/types")):i(e.resultDescription||"Reseller type added successfully")})).catch((function(e){return i(e)})).finally((function(){return l(!1)}))}),[]);return a.createElement(a.Fragment,null,E?a.createElement(Ir,{edit:!0,"data-testid":"edit-reseller-type",loading:n,data:(b=E,w=["id"],Object.keys(b).reduce((function(e,t){return w.includes(t)||(e[t]=b[t]),e}),{})),onFormSubmit:function(e){return Z(e)},resetHandler:S}):a.createElement("h2",null,d("noDataFoundResellerType",{itemName:f})),n?a.createElement(ae.Z,null):null)};var Cc={importId:"",name:"",description:"",typeKey:0,roleKey:0,allowIdSpecification:!1,idRegexp:"",allowIdAutoGeneration:!1,idGenerator:"",used:!1,allowTopLevel:!1,allowWebshop:!1,allowTerminals:!1,allowWebLogin:!1,allowParentless:!1,subDevicePolicy:"",adminSiteSupportGroup:"",taxGroupKey:0,contractKey:0,productRangeKey:0,receiptTemplateKey:0,childTypeKeys:[""],accountTemplates:[]};const Dc=function(){var e=a.useState(!1),t=(0,c.Z)(e,2),n=t[0],l=t[1],r=p().showErrorMessage,i=(0,m.useTranslation)().t,o=(0,s.useParams)().id,u=a.useState(Cc),d=(0,c.Z)(u,2),f=d[0],v=d[1];return a.useEffect((function(){l(!0),z(o).then((function(e){return v(e.data)})).catch((function(e){return r(e)})).finally((function(){return l(!1)}))}),[]),a.createElement(a.Fragment,null,f?a.createElement(Dr,{edit:!0,"data-testid":"view-reseller-type",loading:n,data:f,view:!0}):a.createElement("h2",null,i("noDataFoundResellerType",{itemName:o})),n?a.createElement(ae.Z,null):null)},Pc=function(){var e=(0,m.useTranslation)().t;return a.createElement(se.SeamlessContainer,{title:e("viewAllResellerTypePageTitle"),description:e("viewAllResellerTypePageDescription")},a.createElement(Be.Z,{display:"flex",flexDirection:"row",justifyContent:"flex-end"},a.createElement(Pr,null)),a.createElement("div",{style:{height:600,width:"100%"}},a.createElement(Or,null)))},Nc=function(){var e=(0,s.useParams)().id;return a.createElement("div",{style:{height:600,width:"100%"}},a.createElement(Lr,{id:e}))},kc=function(){var e=(0,s.useParams)().id;return a.createElement(Be.Z,null,a.createElement("div",{style:{height:600,width:"100%"}},a.createElement(Ar,{id:e})))},Rc=function(){var e=(0,s.useRouteMatch)().path,t=Jn()().AccessControlled;return a.createElement(s.Switch,null,a.createElement(s.Route,{path:e+"/create"},a.createElement(t,{feature:Qt},a.createElement(_c,null))),a.createElement(s.Route,{path:e+"/edit/:type"},a.createElement(t,{feature:en},a.createElement(Ic,null))),a.createElement(s.Route,{path:e+"/parent/:id"},a.createElement(t,{feature:nn},a.createElement(Nc,null))),a.createElement(s.Route,{path:e+"/children/:id"},a.createElement(t,{feature:an},a.createElement(kc,null))),a.createElement(s.Route,{path:e+"/view/:id"},a.createElement(t,{feature:tn},a.createElement(Dc,null))),a.createElement(s.Route,null,a.createElement(t,{feature:tn},a.createElement(Pc,null))))};var Oc={bannedPasswords:"",changePolicy:"ChangePolicy_AdminChange",createMessage:"NO_MESSAGE",createPolicy:"AutoCreate",createTemplateKey:"0",description:"",encryptionFormat:"PlainTextPassword",legalCharacters:"Digits",maxIncorrectloginAttempt:1,maxPasswordLength:1,minPasswordLength:1,name:"",passwordChangeAtFirstLogin:!0,passwordChangeTemplateKey:"0",passwordControl:"None",passwordExpiryPeriod:"NeverExpires",passwordRegexp:"",policyKey:"0",userPasswordsHistoryLimit:1,visiblePassword:!0};const jc=function(){var e,t,n=a.useState(!1),l=(0,c.Z)(n,2),r=l[0],i=l[1],o=p(),u=o.showErrorMessage,d=o.showSuccessMessage,f=o.showWarningMessage,g=(0,m.useTranslation)().t,h=(0,s.useHistory)(),E=a.useCallback((function(e,t){var n;i(!0),(n=e,v("/dms/v1/password/policies",{method:"POST",body:n})).then((function(e){0==e.resultCode?(d(e),h.push("/home/reseller/passwords")):(f(e.resultDescription),t&&t(e))})).catch((function(e){u(e),t&&t(e)})).finally((function(){return i(!1)}))}),[]);return a.createElement(se.SeamlessContainer,{title:g("createPasswordPolicyPageTitle"),description:g("createPasswordPolicyPageDescription")},a.createElement(Yt,{"data-testid":"create-policy",data:(e=Oc,t=["policyKey","default_receipt_template_key"],Object.keys(e).reduce((function(n,a){return t.includes(a)||(n[a]=e[a]),n}),{})),onFormSubmit:function(e,t){return E(e,t)}}),r?a.createElement(ae.Z,null):null)};var Ac={bannedPasswords:"",changePolicy:"ChangePolicy_AdminChange",createMessage:"NO_MESSAGE",createPolicy:"AutoCreate",createTemplateKey:"0",description:"",encryptionFormat:"PlainTextPassword",legalCharacters:"Digits",maxIncorrectloginAttempt:1,maxPasswordLength:1,minPasswordLength:1,name:"",passwordChangeAtFirstLogin:!0,passwordChangeTemplateKey:"0",passwordControl:"None",passwordExpiryPeriod:"NeverExpires",passwordRegexp:"",policyKey:"0",userPasswordsHistoryLimit:1,visiblePassword:!0};const Fc=function(){var e=a.useState(!1),t=(0,c.Z)(e,2),n=t[0],l=t[1],r=p(),i=r.showErrorMessage,o=r.showSuccessMessage,u=r.showWarningMessage,d=(0,s.useParams)().id,f=(0,m.useTranslation)().t,g=(0,s.useHistory)(),h=a.useState(Ac),E=(0,c.Z)(h,2),y=E[0],b=E[1];a.useEffect((function(){H(d).then((function(e){return b(e.passwordPolicy)}))}),[]);var w,S,Z=a.useCallback((function(e){l(!0),function(e,t){return v("/dms/v1/password/policies/".concat(e),{method:"PUT",body:t})}(d,e).then((function(e){0==e.resultCode?(o(e.resultDescription),g.push("/home/reseller/passwords")):u(e.resultDescription)})).catch((function(e){return i(e)})).finally((function(){return l(!1)}))}),[]);return a.createElement(se.SeamlessContainer,{title:f("editPasswordPolicyPageTitle"),description:f("editPasswordPolicyPageDescription")},a.createElement(Yt,{"data-testid":"edit-policy",edit:!0,data:(w=y,S=["policyKey","passwordExpiryPeriodIndays"],Object.keys(w).reduce((function(e,t){return S.includes(t)||(e[t]=w[t]),e}),{})),onFormSubmit:function(e){return Z(e)}}),n?a.createElement(ae.Z,null):null)};var Lc={bannedPasswords:"",changePolicy:"ChangePolicy_AdminChange",createMessage:"NO_MESSAGE",createPolicy:"AutoCreate",createTemplateKey:"0",description:"",encryptionFormat:"PlainTextPassword",legalCharacters:"Digits",maxIncorrectloginAttempt:1,maxPasswordLength:1,minPasswordLength:1,name:"",passwordChangeAtFirstLogin:!0,passwordChangeTemplateKey:"0",passwordControl:"None",passwordExpiryPeriod:"NeverExpires",passwordRegexp:"",policyKey:"0",userPasswordsHistoryLimit:1,visiblePassword:!0};const Bc=function(){var e=a.useState(!1),t=(0,c.Z)(e,2),n=t[0],l=(t[1],(0,s.useParams)().id),r=(0,m.useTranslation)().t,i=a.useState(Lc),o=(0,c.Z)(i,2),u=o[0],d=o[1];return a.useEffect((function(){H(l).then((function(e){return d(e.passwordPolicy)}))}),[]),a.createElement(se.SeamlessContainer,{title:r("viewPasswordPolicyPageTitle"),description:r("viewPasswordPolicyPageDescription")},a.createElement(Jt,{"data-testid":"view-policy",view:!0,data:u}),n?a.createElement(ae.Z,null):null)},Mc=function(){var e=(0,m.useTranslation)().t;return a.createElement(se.SeamlessContainer,{title:e("viewAllPasswordPolicyPageTitle"),description:e("viewAllPasswordPolicyPageDescription")},a.createElement(Be.Z,{display:"flex",flexDirection:"row",justifyContent:"flex-end"},a.createElement(Xn,null)),a.createElement("div",{style:{height:600,width:"100%"}},a.createElement(ca,null)))},Wc=function(){var e=(0,s.useRouteMatch)().path,t=Jn()().AccessControlled;return a.createElement(s.Switch,null,a.createElement(s.Route,{path:e+"/create"},a.createElement(t,{feature:ln},a.createElement(jc,null))),a.createElement(s.Route,{path:e+"/edit/:id"},a.createElement(t,{feature:on},a.createElement(Fc,null))),a.createElement(s.Route,{path:e+"/view/:id"},a.createElement(t,{feature:rn},a.createElement(Bc,null))),a.createElement(s.Route,null,a.createElement(t,{feature:rn},a.createElement(Mc,null))))};var Vc={roleKey:1,domainKey:5,addressLock:"",importId:"",parentRoleKey:0,passwordPolicyKey:0,roleDescription:"",roleName:"",terminalUser:!0,userIdRegexp:"",webUser:!0,lastModified:""};const qc=function(){var e,t,n=(0,m.useTranslation)().t,l=ga({}),r=l.createRole,i=l.loading;return a.createElement(se.SeamlessContainer,{title:n("createRolesPageTitle"),description:n("createRolesPageDescription")},a.createElement(ma,{"data-testid":"create-roles",data:(e=Vc,t=["policyKey","default_receipt_template_key"],Object.keys(e).reduce((function(n,a){return t.includes(a)||(n[a]=e[a]),n}),{})),onFormSubmit:function(e,t){return r(e,t)}}),i?a.createElement(ae.Z,null):null)};var Uc={roleKey:0,domainKey:5,addressLock:"",importId:"",parentRoleKey:0,passwordPolicyKey:0,roleDescription:"",roleName:"",terminalUser:!0,userIdRegexp:"",webUser:!0,lastModified:""};const Kc=function(){var e=a.useState(!1),t=(0,c.Z)(e,2),n=t[0],l=t[1],r=p(),i=r.showErrorMessage,o=r.showSuccessMessage,u=r.showWarningMessage,d=(0,s.useParams)().id,f=(0,m.useTranslation)().t,v=(0,s.useHistory)(),g=a.useState(Uc),h=(0,c.Z)(g,2),E=h[0],y=h[1];a.useEffect((function(){q(d).then((function(e){return y(e.role)}))}),[]);var b,w,S=a.useCallback((function(e){l(!0),U(d,e).then((function(e){0==e.resultCode?(o(e),v.push("/home/reseller/passwords")):u(e)})).catch((function(e){return i(e)})).finally((function(){return l(!1)}))}),[]);return a.createElement(se.SeamlessContainer,{title:f("editRolesPageTitle"),description:f("editRolesPageDescription")},a.createElement(ma,{"data-testid":"edit-policy",edit:!0,data:(b=E,w=["roleKey","lastModified"],Object.keys(b).reduce((function(e,t){return w.includes(t)||(e[t]=b[t]),e}),{})),onFormSubmit:function(e){return S(e)}}),n?a.createElement(ae.Z,null):null)};var zc={roleKey:0,domainKey:5,addressLock:"",importId:"",parentRoleKey:0,passwordPolicyKey:0,roleDescription:"This is role description",roleName:"Test role",terminalUser:!0,userIdRegexp:"[0-9]",webUser:!0,lastModified:""};const Hc=function(){var e=a.useState(!1),t=(0,c.Z)(e,2),n=t[0],l=(t[1],(0,s.useParams)().id),r=(0,m.useTranslation)().t,i=a.useState(zc),o=(0,c.Z)(i,2),u=o[0],d=o[1];return a.useEffect((function(){q(l).then((function(e){return d(e.role)}))}),[]),a.createElement(se.SeamlessContainer,{title:r("viewRolePageTitle"),description:r("viewROlePageDescription")},a.createElement(ma,{"data-testid":"view-policy",view:!0,data:u}),n?a.createElement(ae.Z,null):null)},Gc=function(){var e=(0,m.useTranslation)().t;return a.createElement(se.SeamlessContainer,{title:e("viewAllRolePageTitle"),description:e("viewAllRolePageDescription")},a.createElement(Be.Z,{display:"flex",flexDirection:"row",justifyContent:"flex-end"},a.createElement(pa,null)),a.createElement("div",{style:{height:600,width:"100%"}},a.createElement(Sa,null)))},Yc=function(){var e=(0,s.useRouteMatch)().path,t=Jn()().AccessControlled;return a.createElement(s.Switch,null,a.createElement(s.Route,{path:e+"/create"},a.createElement(t,{feature:cn},a.createElement(qc,null))),a.createElement(s.Route,{path:e+"/edit/:id"},a.createElement(t,{feature:dn},a.createElement(Kc,null))),a.createElement(s.Route,{path:e+"/view/:id"},a.createElement(t,{feature:un},a.createElement(Hc,null))),a.createElement(s.Route,null,a.createElement(t,{feature:un},a.createElement(Gc,null))))};var $c={associatedFieldName:null,associatedFieldValue:null,fieldName:"",fieldValue:""};const Jc=function(){var e=a.useState(!1),t=(0,c.Z)(e,2),n=t[0],l=t[1],r=p(),i=r.showErrorMessage,o=r.showSuccessMessage,u=r.showWarningMessage,d=(0,m.useTranslation)().t,f=(0,s.useHistory)(),g=a.useCallback((function(e,t){l(!0),""===e.associatedFieldName&&(e.associatedFieldName=null),""===e.associatedFieldValue&&(e.associatedFieldValue=null),function(e){return v("/dms/v1/template/dropdown",{method:"POST",body:e})}(e).then((function(e){0==e.resultCode?(o(e),f.push("/home/reseller/template-dropdowns")):u(e.resultDescription)})).catch((function(e){i(Ae(e)),t&&t(e)})).finally((function(){return l(!1)}))}),[]);return a.createElement(se.SeamlessContainer,{title:d("createTemplateDropdownPageTitle"),description:d("createTemplateDropdownPageDescription")},a.createElement(Gr,{"data-testid":"create-reseller-template-dropdown",data:$c,loading:n,onFormSubmit:function(e,t){return g(e,t)}}))};function Xc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Qc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xc(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var eu={associatedFieldName:null,associatedFieldValue:null,fieldName:"",fieldValue:""};const tu=function(){var e=a.useState(!1),t=(0,c.Z)(e,2),n=t[0],l=t[1],r=p(),i=r.showErrorMessage,o=r.showSuccessMessage,u=r.showWarningMessage,d=(0,m.useTranslation)().t,f=(0,s.useHistory)(),g=(0,s.useParams)().id;a.useEffect((function(){l(!0),function(e){return v("/dms/v1/template/dropdown/byId/".concat(e),{method:"GET"})}(g).then((function(e){0==e.resultCode?(eu=Qc(Qc({},eu),e.dropdown),o(e)):u(e)})).catch((function(e){i(e)})).finally((function(){return l(!1)}))}),[g]);var h=a.useCallback((function(e){l(!0),""===e.associatedFieldName&&(e.associatedFieldName=null),""===e.associatedFieldValue&&(e.associatedFieldValue=null),function(e,t){return v("/dms/v1/template/dropdown/".concat(t),{method:"PUT",body:e})}(e,g).then((function(e){0==e.resultCode?(o(e.resultDescription),f.push("/home/reseller/template-dropdowns")):u(e.resultDescription)})).catch((function(e){i(Ae(e))})).finally((function(){return l(!1)}))}),[]);return a.createElement(se.SeamlessContainer,{title:d("createTemplateDropdownPageTitle"),description:d("createTemplateDropdownPageDescription")},a.createElement(Gr,{"data-testid":"create-reseller-template-dropdown",data:eu,loading:n,onFormSubmit:function(e,t){return h(e)}}))},nu=function(){var e=(0,m.useTranslation)().t;return a.createElement(se.SeamlessContainer,{title:e("viewAllTemplateDropdownPageTitle"),description:e("viewAllTemplateDropdownPageDescription")},a.createElement(Be.Z,{display:"flex",flexDirection:"row",justifyContent:"flex-end"},a.createElement(pa,{label:e("createNewTemplateDropdown"),url:"/home/reseller/template-dropdowns/create",permission:jn})),a.createElement("div",{style:{height:600,width:"100%"}},a.createElement(qr,null)))},au=function(){var e=(0,s.useRouteMatch)().path,t=Jn()().AccessControlled;return a.createElement(s.Switch,null,a.createElement(s.Route,{path:e+"/create"},a.createElement(t,{feature:jn},a.createElement(Jc,null))),a.createElement(s.Route,{path:e+"/edit/:id"},a.createElement(t,{feature:Fn},a.createElement(tu,null))),a.createElement(s.Route,null,a.createElement(t,{feature:An},a.createElement(nu,null))))};var lu=n(90724),ru=n(73336);const iu=function(){var e,t,n=(0,re.Z)((function(e){return(0,ie.Z)({btnElement:{whiteSpace:"nowrap",paddingLeft:e.spacing(2),paddingRight:e.spacing(2)},button:{margin:e.spacing(1),marginTop:e.spacing(3.5)},element:{margin:e.spacing(1)},dropdown:{margin:e.spacing(1),marginTop:e.spacing(1.25)}})})),a=(0,o.useSelector)((function(e){return e.auth})).user,r=a.requestedPrincipalId,i={title:null==a?void 0:a.userId,id:r,name:null==a?void 0:a.userId,path:null==a?void 0:a.resellerPath,children:[]},s=(0,m.useTranslation)().t,u=l().useState(i),d=(0,c.Z)(u,2),f=d[0],v=d[1],g=l().useState(!1),h=(0,c.Z)(g,2),E=(h[0],h[1]),y=p().showErrorMessage,b=n(),w=(null===(t=(null!==(e=window.config)&&void 0!==e?e:{}).resellerAdditionalConfig)||void 0===t?void 0:t.resellerOrgChartAPILimit)||10,S=l().useState(0),Z=(0,c.Z)(S,2),T=Z[0],_=Z[1],x=l().useState(0),C=(0,c.Z)(x,2),D=C[0],P=C[1],N=function e(t,n){return t.reduce((function(t,a){return t||(a.path===n?a:a.children?e(a.children,n):void 0)}),null)};return l().useEffect((function(){E(!0),I(r,D,w).then((function(e){!function(e){if(i.children=[],0===e.resultCode){var t=i,n=t.path.split("/"),a=n.length;t.id=n[0],t.path=n[0],t.title=n[0],t.name=n[0];for(var l=1;l<a;l++){var r=n.slice(0,l+1).join("/");N(t.children,r)||(t.children.push({title:n[l],id:n[l],name:n[l],path:r,children:[]}),t=t.children.slice(-1)[0])}e.resellers.forEach((function(e){var n,a,l,r,o,s,c;t=i;for(var u=null==e||null===(n=e.resellerData)||void 0===n?void 0:n.resellerPath,d=null==e||null===(a=e.resellerData)||void 0===a||null===(l=a.resellerPath)||void 0===l?void 0:l.split("/"),m=null==e||null===(r=e.resellerData)||void 0===r||null===(o=r.resellerPath)||void 0===o?void 0:o.split("/").slice(-1),p=d.length,f=1;f<p-1;f++){var v=d.slice(0,f+1).join("/"),g=N(t.children,v);g?t=g:(t.children.push({title:d[f],id:d[f],name:d[f],path:v,children:[]}),t=t.children.slice(-1)[0])}var h=N(i.children,u);h?(h.children.push({title:m,id:m,name:m,path:u,children:[]}),t=h.children.slice(-1)[0]):t.id!==m[0]&&(t.children.push({title:m,id:m,name:m,path:u,children:[]}),t=t.children.slice(-1)[0]);var E=null==e||null===(s=e.users)||void 0===s||null===(c=s.filter((function(t){var n;return(null==t?void 0:t.userId)!==(null==e||null===(n=e.resellerData)||void 0===n?void 0:n.resellerId)})))||void 0===c?void 0:c.map((function(e){return{title:(null==e?void 0:e.userId)||"",id:(null==e?void 0:e.userId)||"",name:(null==e?void 0:e.userId)||"",path:u+"/".concat(null==e?void 0:e.userId),children:[]}}));t.children=E}))}else y(e.resultDescription||s("resellerError"));v(i)}(e),_(e.totalCount)})).catch((function(e){return y(s("resellerError"))})).finally((function(){E(!1)}))}),[r,D]),l().createElement(se.SeamlessContainer,{title:s("resellerHierarchy"),description:s("resellerHierarchyText")},l().createElement("div",{style:{textAlign:"center",alignItems:"center",justifyContent:"center",display:"flex"}},l().createElement(se.SeamlessButton,{onClick:function(){P(D-w)},color:"primary",className:b.btnElement,disabled:0==D},l().createElement(lu.Z,null)),l().createElement(Er,{data:f,pan:!0,zoom:!0}),l().createElement("div",null,l().createElement(se.SeamlessButton,{onClick:function(){return P(D+w)},color:"primary",className:b.btnElement,disabled:w+D>=T},l().createElement(ru.Z,null)))))};var ou=n(16851),su=n(794),cu=(0,re.Z)((function(e){return(0,ie.Z)({box:{marginTop:e.spacing(2)},button:{float:"right"},progress:{marginLeft:"8px"}})}));const uu=function(){var e=(0,m.useTranslation)().t,t=p(),n=t.showErrorMessage,l=t.showSuccessMessage,r=t.showWarningMessage,i=cu(),o=a.useState({button:"",isloading:!1,requestSent:!1}),s=(0,c.Z)(o,2),u=s[0],d=s[1],f=a.useState({id:"",error:!1}),g=(0,c.Z)(f,2),h=g[0],E=g[1],y=function(t){h.error||""===h.id?r(e("enterRequiredFields")):(d({button:t,isloading:!0,requestSent:!0}),function(e,t){return v("/txe/reseller/".concat(e,"SubReseller"),{method:"POST",body:t})}(t,{id:h.id,type:"RESELLERID"}).then((function(e){e.executeSuccessful?(E({id:"",error:!1}),l(e.resultMessage)):n(e.resultMessage)})).catch((function(e){n(e.resultMessage)})).finally((function(){d({button:"",isloading:!1,requestSent:!1})})))},b=a.createElement(st.Z,{color:"inherit",size:14,thickness:6,className:i.progress});return a.createElement(se.SeamlessContainer,{title:e("linkDelinkResellerTitle"),description:e("linkDelinkResellerPageDescription")},a.createElement(ce.Z,{container:!0},a.createElement(ce.Z,{item:!0,xs:12,sm:10,md:4,lg:4},a.createElement(se.SeamlessInput,{label:e("subResellerResellerId"),error:h.error,value:h.id,required:!0,fullWidth:!0,helperText:h.error?e("requiredFieldText"):"",onChange:function(e){""===e.target.value?E({id:"",error:!0}):E({id:e.target.value,error:!1})}}),a.createElement(Be.Z,{className:i.box},a.createElement(X.Z,{color:"primary",variant:"contained",startIcon:a.createElement(ou.Z,null),disabled:u.requestSent,endIcon:"link"==u.button&&u.isloading&&b||null,onClick:function(){y("link")}},e("link")),a.createElement(X.Z,{color:"primary",variant:"contained",className:i.button,startIcon:a.createElement(su.Z,null),disabled:u.requestSent,endIcon:"deLink"==u.button&&u.isloading&&b||null,onClick:function(){y("deLink")}},e("deLink"))))))},du=function(){var e=(0,s.useRouteMatch)().path,t=Jn()().AccessControlled;return a.createElement(s.Switch,null,a.createElement(s.Route,{path:e},a.createElement(t,{feature:Yn},a.createElement(uu,null))))};var mu=n(87561);var pu=(0,re.Z)((function(e){return(0,ie.Z)({root:{padding:e.spacing(1)}})}));const fu=function(){var e=pu(),t=(0,s.useRouteMatch)().path,n=Jn()().AccessControllProvider,r=function(e){var t=l().useState(null),n=(0,c.Z)(t,2),a=n[0],r=n[1],i=(0,o.useSelector)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.rbac}),o.shallowEqual);return l().useEffect((function(){var t,n=(null===(t=i.features.find((function(t){return t.module===e})))||void 0===t?void 0:t.features)||[];r(n)}),[i]),a}("RESELLER");return r?a.createElement(n,{featureList:r},a.createElement(ot.Z,{elevation:0,className:e.root},a.createElement(mu.ZP,null),a.createElement(s.Switch,null,a.createElement(s.Route,{path:t+"/types"},a.createElement(Rc,null)),a.createElement(s.Route,{path:t+"/resellers"},a.createElement(Zc,null)),a.createElement(s.Route,{path:t+"/roles"},a.createElement(Yc,null)),a.createElement(s.Route,{path:t+"/template-dropdowns"},a.createElement(au,null)),a.createElement(s.Route,{path:t+"/passwords"},a.createElement(Wc,null)),a.createElement(s.Route,{path:t+"/link-delink"},a.createElement(du,null)),a.createElement(s.Route,{path:t+"/org"},a.createElement(iu,null)),a.createElement(s.Route,{path:t},a.createElement(s.Redirect,{to:t+"/resellers"}))))):a.createElement(ae.Z,null)};var vu=n(99069),gu=(0,vu.createSlice)({name:"resellers",initialState:{loading:!1,resellers:[],error:null,accountTemplates:[],accounts:{},addressData:{},resellerData:{}},reducers:{saveResellerData:function(e,t){e.resellerData=t.payload}}});gu.actions.saveResellerData;const hu=gu.reducer;var Eu=(0,vu.combineReducers)({resellers:hu});const yu=(0,vu.configureStore)({reducer:Eu});i().render(a.createElement(o.Provider,{store:yu},a.createElement(s.BrowserRouter,null,a.createElement(fu,null))),document.getElementById("root"))},71861:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var a=n(82609),l=n.n(a)()((function(e){return e[1]}));l.push([e.id,"\n.orgchart-container {\n  border: none !important;\n  height: auto !important;\n}\n.sekure-org-chart {\n  background-image: none !important;\n}\n\n.orgchart > ul > li > ul li::before {\n  border-top: 2px solid #6c757d !important;\n  padding-left: 0;\n}\n\n.orgchart > ul > li > ul li > .oc-node::before,\n.orgchart ul li .oc-node:not(:only-child)::after {\n  height: 14px !important;\n  background-color: #6c757d !important;\n}\n\n.orgchart ul li .oc-node:hover,\n.orgchart ul li .oc-node.selected {\n  background-color: transparent !important;\n}\n/* used to disable arrow on hover\n.oc-edge.leftEdge,\n.oc-edge.rightEdge,\n.oc-edge.topEdge,\n.oc-edge.bottomEdge {\n  display: none !important;\n}  */\n\n.orgchart .oc-node .oc-edge {\n  border-color: black;\n  }\n.orgchart .oc-node .oc-edge:hover::before, .orgchart .oc-node:not(:only-child) .oc-edge:hover::after{\n  border-color: black !important;\n}\n\n.org-node-container {\n  border: 2px solid #6c757d;\n  padding: 10px;\n  border-radius: 4px;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  min-height: 60px;\n  min-width: 50px;\n}\n\n.org-person {\n  color: #27b3cc;\n  justify-content: center;\n  display: flex;\n}\n.org-person > div {\n  border-radius: 30px;\n  border: 2px solid #27b3cc;\n  padding: 5px;\n}\n\n.open-user-details {\n  position: absolute;\n  right: 10px;\n  top: 10px;\n  color: #27b3cc;\n  cursor: pointer;\n} \n\n.zoom-button {\n  width: 40px;\n  height: 40px;\n  display: block !important;\n  margin: 8px;\n}\n.btn {\n  font-size: 0.875rem;\n  text-transform: none;\n  text-decoration-line: none;\n  display: inline-block;\n  font-weight: 600;\n  text-align: center;\n  vertical-align: middle;\n  user-select: none;\n  padding: 0.5rem 1rem;\n  font-size: 0.875rem;\n  line-height: 1.5rem;\n  border-radius: 0.125rem;\n  cursor: pointer;\n  margin: 6px;\n}\n\n",""]);const r=l},53004:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var a=n(82609),l=n.n(a)()((function(e){return e[1]}));l.push([e.id,".MuiDialogContent-root{\n    width: 100%;\n}\n.MuiPaper-root {\n    border: none !important;\n}\n.MuiStepper-root {\n    padding-bottom: 0;\n    padding-top: 0;\n}\n",""]);const r=l},96616:(e,t,n)=>{var a={"./af":84465,"./af.js":84465,"./ar":54358,"./ar-dz":71727,"./ar-dz.js":71727,"./ar-kw":98279,"./ar-kw.js":98279,"./ar-ly":87895,"./ar-ly.js":87895,"./ar-ma":11987,"./ar-ma.js":11987,"./ar-sa":52796,"./ar-sa.js":52796,"./ar-tn":12386,"./ar-tn.js":12386,"./ar.js":54358,"./az":57452,"./az.js":57452,"./be":79053,"./be.js":79053,"./bg":65428,"./bg.js":65428,"./bm":21569,"./bm.js":21569,"./bn":56212,"./bn-bd":24635,"./bn-bd.js":24635,"./bn.js":56212,"./bo":13667,"./bo.js":13667,"./br":192,"./br.js":192,"./bs":51802,"./bs.js":51802,"./ca":19118,"./ca.js":19118,"./cs":39990,"./cs.js":39990,"./cv":30557,"./cv.js":30557,"./cy":4227,"./cy.js":4227,"./da":95406,"./da.js":95406,"./de":87994,"./de-at":44139,"./de-at.js":44139,"./de-ch":86591,"./de-ch.js":86591,"./de.js":87994,"./dv":94649,"./dv.js":94649,"./el":14453,"./el.js":14453,"./en-au":48428,"./en-au.js":48428,"./en-ca":36972,"./en-ca.js":36972,"./en-gb":13224,"./en-gb.js":13224,"./en-ie":18843,"./en-ie.js":18843,"./en-il":32732,"./en-il.js":32732,"./en-in":76579,"./en-in.js":76579,"./en-nz":29851,"./en-nz.js":29851,"./en-sg":70442,"./en-sg.js":70442,"./eo":10654,"./eo.js":10654,"./es":63621,"./es-do":68791,"./es-do.js":68791,"./es-mx":67278,"./es-mx.js":67278,"./es-us":60717,"./es-us.js":60717,"./es.js":63621,"./et":72404,"./et.js":72404,"./eu":62944,"./eu.js":62944,"./fa":30496,"./fa.js":30496,"./fi":98137,"./fi.js":98137,"./fil":32872,"./fil.js":32872,"./fo":6545,"./fo.js":6545,"./fr":49090,"./fr-ca":13049,"./fr-ca.js":13049,"./fr-ch":12338,"./fr-ch.js":12338,"./fr.js":49090,"./fy":95088,"./fy.js":95088,"./ga":77812,"./ga.js":77812,"./gd":8374,"./gd.js":8374,"./gl":63649,"./gl.js":63649,"./gom-deva":52674,"./gom-deva.js":52674,"./gom-latn":44948,"./gom-latn.js":44948,"./gu":24033,"./gu.js":24033,"./he":10175,"./he.js":10175,"./hi":58055,"./hi.js":58055,"./hr":41678,"./hr.js":41678,"./hu":85111,"./hu.js":85111,"./hy-am":26530,"./hy-am.js":26530,"./id":19126,"./id.js":19126,"./is":11696,"./is.js":11696,"./it":98710,"./it-ch":38821,"./it-ch.js":38821,"./it.js":98710,"./ja":93974,"./ja.js":93974,"./jv":70648,"./jv.js":70648,"./ka":54731,"./ka.js":54731,"./kk":43501,"./kk.js":43501,"./km":84398,"./km.js":84398,"./kn":91825,"./kn.js":91825,"./ko":13729,"./ko.js":13729,"./ku":19670,"./ku.js":19670,"./ky":78797,"./ky.js":78797,"./lb":50627,"./lb.js":50627,"./lo":65859,"./lo.js":65859,"./lt":80355,"./lt.js":80355,"./lv":16594,"./lv.js":16594,"./me":45324,"./me.js":45324,"./mi":11689,"./mi.js":11689,"./mk":61308,"./mk.js":61308,"./ml":85241,"./ml.js":85241,"./mn":76320,"./mn.js":76320,"./mr":96771,"./mr.js":96771,"./ms":20503,"./ms-my":77748,"./ms-my.js":77748,"./ms.js":20503,"./mt":55534,"./mt.js":55534,"./my":62727,"./my.js":62727,"./nb":7550,"./nb.js":7550,"./ne":49899,"./ne.js":49899,"./nl":41228,"./nl-be":31225,"./nl-be.js":31225,"./nl.js":41228,"./nn":97130,"./nn.js":97130,"./oc-lnc":93130,"./oc-lnc.js":93130,"./pa-in":91282,"./pa-in.js":91282,"./pl":28190,"./pl.js":28190,"./pt":41549,"./pt-br":78135,"./pt-br.js":78135,"./pt.js":41549,"./ro":307,"./ro.js":307,"./ru":89272,"./ru.js":89272,"./sd":79248,"./sd.js":79248,"./se":74969,"./se.js":74969,"./si":65522,"./si.js":65522,"./sk":61581,"./sk.js":61581,"./sl":56428,"./sl.js":56428,"./sq":34611,"./sq.js":34611,"./sr":19821,"./sr-cyrl":20185,"./sr-cyrl.js":20185,"./sr.js":19821,"./ss":35029,"./ss.js":35029,"./sv":80939,"./sv.js":80939,"./sw":73107,"./sw.js":73107,"./ta":72304,"./ta.js":72304,"./te":72550,"./te.js":72550,"./tet":99717,"./tet.js":99717,"./tg":87669,"./tg.js":87669,"./th":94959,"./th.js":94959,"./tk":92661,"./tk.js":92661,"./tl-ph":52234,"./tl-ph.js":52234,"./tlh":94120,"./tlh.js":94120,"./tr":81111,"./tr.js":81111,"./tzl":53080,"./tzl.js":53080,"./tzm":88246,"./tzm-latn":25385,"./tzm-latn.js":25385,"./tzm.js":88246,"./ug-cn":48777,"./ug-cn.js":48777,"./uk":2014,"./uk.js":2014,"./ur":45953,"./ur.js":45953,"./uz":89716,"./uz-latn":87791,"./uz-latn.js":87791,"./uz.js":89716,"./vi":99816,"./vi.js":99816,"./x-pseudo":94450,"./x-pseudo.js":94450,"./yo":22556,"./yo.js":22556,"./zh-cn":7414,"./zh-cn.js":7414,"./zh-hk":50824,"./zh-hk.js":50824,"./zh-mo":88589,"./zh-mo.js":88589,"./zh-tw":63285,"./zh-tw.js":63285};function l(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}l.keys=function(){return Object.keys(a)},l.resolve=r,e.exports=l,l.id=96616},87217:(e,t,n)=>{"use strict";var a=new Error;e.exports=new Promise(((e,t)=>{if("undefined"!=typeof account)return e();n.l("/modules/account/remoteEntry.js",(n=>{if("undefined"!=typeof account)return e();var l=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;a.message="Loading script failed.\n("+l+": "+r+")",a.name="ScriptExternalLoadError",a.type=l,a.request=r,t(a)}),"account")})).then((()=>account))},71022:(e,t,n)=>{"use strict";var a=new Error;e.exports=new Promise(((e,t)=>{if("undefined"!=typeof portal)return e();n.l("/remoteEntry.js",(n=>{if("undefined"!=typeof portal)return e();var l=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;a.message="Loading script failed.\n("+l+": "+r+")",a.name="ScriptExternalLoadError",a.type=l,a.request=r,t(a)}),"portal")})).then((()=>portal))}},i={};function o(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={id:e,loaded:!1,exports:{}};return r[e].call(n.exports,n,n.exports,o),n.loaded=!0,n.exports}o.m=r,o.c=i,e=[],o.O=(t,n,a,l)=>{if(!n){var r=1/0;for(c=0;c<e.length;c++){for(var[n,a,l]=e[c],i=!0,s=0;s<n.length;s++)(!1&l||r>=l)&&Object.keys(o.O).every((e=>o.O[e](n[s])))?n.splice(s--,1):(i=!1,l<r&&(r=l));i&&(e.splice(c--,1),t=a())}return t}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[n,a,l]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((t,n)=>(o.f[n](e,t),t)),[])),o.u=e=>"static/js/"+e+"."+{"node_modules_react_index_js-_11190":"ddfd803c","vendors-node_modules_react-dom_index_js":"9ee8a17f","webpack_sharing_consume_default_react_react-_cea0":"fba18395","vendors-node_modules_react-redux_es_index_js":"470014a6","webpack_sharing_consume_default_react-dom_react-dom-webpack_sharing_consume_default_react_rea-04f810":"21ffab7e","vendors-node_modules_react-router-dom_esm_react-router-dom_js":"e5ccfc66","webpack_sharing_consume_default_react_react-webpack_sharing_consume_default_react_react-_319b-_6de0":"13623e35","vendors-node_modules_material-ui_core_esm_styles_withStyles_js-node_modules_clsx_dist_clsx_m_js":"b493c02a","vendors-node_modules_material-ui_core_esm_SvgIcon_SvgIcon_js-node_modules_material-ui_core_es-d62974":"ad528afb","vendors-node_modules_material-ui_core_esm_ClickAwayListener_ClickAwayListener_js-node_modules-88dad3":"05b4b3b8","vendors-node_modules_notistack_dist_notistack_esm_js":"146852a2","webpack_sharing_consume_default_react_react-_6d22":"adfaf505","webpack_sharing_consume_default_material-ui_styles_material-ui_styles":"59f93607","webpack_sharing_consume_default_react-dom_react-dom-webpack_sharing_consume_default_react-dom-0bbcc1":"d0448c83","vendors-node_modules_react-i18next_dist_es_index_js":"e77cd7b5","webpack_sharing_consume_default_react_react-_ad9f":"a063beb2","vendors-node_modules_material-ui_styles_esm_index_js":"63fedb5b","node_modules_hoist-non-react-statics_dist_hoist-non-react-statics_cjs_js":"e8eb81ad","node_modules_object-assign_index_js":"de46635a","vendors-node_modules_i18next_dist_esm_i18next_js":"1780826c","node_modules_react_index_js-_11191":"ba0dc6cb","vendors-node_modules_reduxjs_toolkit_dist_redux-toolkit_esm_js":"92a0f1fe",webpack_sharing_consume_default_redux_redux:"da78a047","node_modules_material-ui_utils_esm_deepmerge_js-node_modules_clsx_dist_clsx_m_js-node_modules-6110ed":"c8d9e056",node_modules_reselect_es_index_js:"bca04708","node_modules_babel_runtime_helpers_esm_defineProperty_js-node_modules_babel_runtime_helpers_e-b9a5f0":"c44f578a","vendors-node_modules_redux_es_redux_js":"41598dc4"}[e]+".chunk.js",o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t={},n="@unified/reseller:",o.l=(e,a,l,r)=>{if(t[e])t[e].push(a);else{var i,s;if(void 0!==l)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==n+l){i=d;break}}i||(s=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,o.nc&&i.setAttribute("nonce",o.nc),i.setAttribute("data-webpack",n+l),i.src=e),t[e]=[a];var m=(n,a)=>{i.onerror=i.onload=null,clearTimeout(p);var l=t[e];if(delete t[e],i.parentNode&&i.parentNode.removeChild(i),l&&l.forEach((e=>e(a))),n)return n(a)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=m.bind(null,i.onerror),i.onload=m.bind(null,i.onload),s&&document.head.appendChild(i)}},o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),a={},l={},o.f.remotes=(e,t)=>{o.o(a,e)&&a[e].forEach((e=>{var n=o.R;n||(n=[]);var a=l[e];if(!(n.indexOf(a)>=0)){if(n.push(a),a.p)return t.push(a.p);var i=t=>{t||(t=new Error("Container missing")),"string"==typeof t.message&&(t.message+='\nwhile loading "'+a[1]+'" from '+a[2]),r[e]=()=>{throw t},a.p=0},s=(e,n,l,r,o,s)=>{try{var c=e(n,l);if(!c||!c.then)return o(c,r,s);var u=c.then((e=>o(e,r)),i);if(!s)return u;t.push(a.p=u)}catch(e){i(e)}},c=(e,t,l)=>s(t.get,a[1],n,0,u,l),u=t=>{a.p=1,r[e]=e=>{e.exports=t()}};s(o,a[2],0,0,((e,t,n)=>e?s(o.I,a[0],0,e,c,n):i()),1)}}))},(()=>{o.S={};var e={},t={};o.I=(n,a)=>{a||(a=[]);var l=t[n];if(l||(l=t[n]={}),!(a.indexOf(l)>=0)){if(a.push(l),e[n])return e[n];o.o(o.S,n)||(o.S[n]={});var r=o.S[n],i="@unified/reseller",s=(e,t,n,a)=>{var l=r[e]=r[e]||{},o=l[t];(!o||!o.loaded&&(!a!=!o.eager?a:i>o.from))&&(l[t]={get:n,from:i,eager:!!a})},c=e=>{var t=e=>{return t="Initialization of sharing external failed: "+e,"undefined"!=typeof console&&console.warn&&console.warn(t);var t};try{var l=o(e);if(!l)return;var r=e=>e&&e.init&&e.init(o.S[n],a);if(l.then)return u.push(l.then(r,t));var i=r(l);if(i&&i.then)return u.push(i.catch(t))}catch(e){t(e)}},u=[];switch(n){case"default":s("@material-ui/styles","4.11.3",(()=>Promise.all([o.e("vendors-node_modules_material-ui_styles_esm_index_js"),o.e("webpack_sharing_consume_default_react_react-_6d22"),o.e("node_modules_material-ui_utils_esm_deepmerge_js-node_modules_clsx_dist_clsx_m_js-node_modules-6110ed")]).then((()=>()=>o(94280))))),s("@reduxjs/toolkit","1.5.0",(()=>Promise.all([o.e("vendors-node_modules_reduxjs_toolkit_dist_redux-toolkit_esm_js"),o.e("webpack_sharing_consume_default_redux_redux"),o.e("node_modules_reselect_es_index_js")]).then((()=>()=>o(88658))))),s("i18next","20.3.1",(()=>Promise.all([o.e("vendors-node_modules_i18next_dist_esm_i18next_js"),o.e("node_modules_babel_runtime_helpers_esm_defineProperty_js-node_modules_babel_runtime_helpers_e-b9a5f0")]).then((()=>()=>o(45170))))),s("notistack","1.0.5",(()=>Promise.all([o.e("vendors-node_modules_material-ui_core_esm_styles_withStyles_js-node_modules_clsx_dist_clsx_m_js"),o.e("vendors-node_modules_material-ui_core_esm_SvgIcon_SvgIcon_js-node_modules_material-ui_core_es-d62974"),o.e("vendors-node_modules_material-ui_core_esm_ClickAwayListener_ClickAwayListener_js-node_modules-88dad3"),o.e("vendors-node_modules_notistack_dist_notistack_esm_js"),o.e("webpack_sharing_consume_default_react_react-_6d22"),o.e("webpack_sharing_consume_default_material-ui_styles_material-ui_styles"),o.e("webpack_sharing_consume_default_react-dom_react-dom-webpack_sharing_consume_default_react-dom-0bbcc1")]).then((()=>()=>o(87442))))),s("react-dom","17.0.1",(()=>Promise.all([o.e("vendors-node_modules_react-dom_index_js"),o.e("webpack_sharing_consume_default_react_react-_cea0"),o.e("node_modules_object-assign_index_js")]).then((()=>()=>o(28316))))),s("react-i18next","11.8.8",(()=>Promise.all([o.e("vendors-node_modules_react-i18next_dist_es_index_js"),o.e("webpack_sharing_consume_default_react_react-_ad9f")]).then((()=>()=>o(56211))))),s("react-redux","7.2.2",(()=>Promise.all([o.e("vendors-node_modules_react-redux_es_index_js"),o.e("webpack_sharing_consume_default_react-dom_react-dom-webpack_sharing_consume_default_react_rea-04f810")]).then((()=>()=>o(21725))))),s("react-router-dom","5.2.0",(()=>Promise.all([o.e("vendors-node_modules_react-router-dom_esm_react-router-dom_js"),o.e("webpack_sharing_consume_default_react_react-webpack_sharing_consume_default_react_react-_319b-_6de0")]).then((()=>()=>o(47428))))),s("react","17.0.1",(()=>o.e("node_modules_react_index_js-_11190").then((()=>()=>o(2784))))),s("redux","4.0.5",(()=>o.e("vendors-node_modules_redux_es_redux_js").then((()=>()=>o(18717))))),c(87217),c(71022)}return u.length?e[n]=Promise.all(u).then((()=>e[n]=1)):e[n]=1}}})(),(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e+"../../"})(),(()=>{var e=e=>{var t=e=>e.split(".").map((e=>+e==e?+e:e)),n=/^([^-+]+)?(?:-([^+]+))?(?:\+(.+))?$/.exec(e),a=n[1]?t(n[1]):[];return n[2]&&(a.length++,a.push.apply(a,t(n[2]))),n[3]&&(a.push([]),a.push.apply(a,t(n[3]))),a},t=(t,n)=>{t=e(t),n=e(n);for(var a=0;;){if(a>=t.length)return a<n.length&&"u"!=(typeof n[a])[0];var l=t[a],r=(typeof l)[0];if(a>=n.length)return"u"==r;var i=n[a],o=(typeof i)[0];if(r!=o)return"o"==r&&"n"==o||"s"==o||"u"==r;if("o"!=r&&"u"!=r&&l!=i)return l<i;a++}},n=e=>{var t=e[0],a="";if(1===e.length)return"*";if(t+.5){a+=0==t?">=":-1==t?"<":1==t?"^":2==t?"~":t>0?"=":"!=";for(var l=1,r=1;r<e.length;r++)l--,a+="u"==(typeof(o=e[r]))[0]?"-":(l>0?".":"")+(l=2,o);return a}var i=[];for(r=1;r<e.length;r++){var o=e[r];i.push(0===o?"not("+s()+")":1===o?"("+s()+" || "+s()+")":2===o?i.pop()+" "+i.pop():n(o))}return s();function s(){return i.pop().replace(/^\((.+)\)$/,"$1")}},a=(t,n)=>{if(0 in t){n=e(n);var l=t[0],r=l<0;r&&(l=-l-1);for(var i=0,o=1,s=!0;;o++,i++){var c,u,d=o<t.length?(typeof t[o])[0]:"";if(i>=n.length||"o"==(u=(typeof(c=n[i]))[0]))return!s||("u"==d?o>l&&!r:""==d!=r);if("u"==u){if(!s||"u"!=d)return!1}else if(s)if(d==u)if(o<=l){if(c!=t[o])return!1}else{if(r?c>t[o]:c<t[o])return!1;c!=t[o]&&(s=!1)}else if("s"!=d&&"n"!=d){if(r||o<=l)return!1;s=!1,o--}else{if(o<=l||u<d!=r)return!1;s=!1}else"s"!=d&&"n"!=d&&(s=!1,o--)}}var m=[],p=m.pop.bind(m);for(i=1;i<t.length;i++){var f=t[i];m.push(1==f?p()|p():2==f?p()&p():f?a(f,n):!p())}return!!p()},l=(e,l,i,o)=>{var s=((e,n)=>{var a=e[n];return Object.keys(a).reduce(((e,n)=>!e||!a[e].loaded&&t(e,n)?n:e),0)})(e,i);return a(o,s)||"undefined"!=typeof console&&console.warn&&console.warn(((e,t,a)=>"Unsatisfied version "+t+" of shared singleton module "+e+" (required "+n(a)+")")(i,s,o)),r(e[i][s])},r=e=>(e.loaded=1,e.get()),i=e=>function(t,n,a,l){var r=o.I(t);return r&&r.then?r.then(e.bind(e,t,o.S[t],n,a,l)):e(t,o.S[t],n,a,l)},s=i(((e,n,a,l)=>n&&o.o(n,a)?r(((e,n)=>{var a=e[n];return(n=Object.keys(a).reduce(((e,n)=>!e||t(e,n)?n:e),0))&&a[n]})(n,a)):l())),c=i(((e,t,n,a,r)=>t&&o.o(t,n)?l(t,0,n,a):r())),u={},d={76005:()=>c("default","react",[4,17,0,1],(()=>o.e("node_modules_react_index_js-_11191").then((()=>()=>o(2784))))),93304:()=>c("default","react",[,[1,17],[1,16,8,3],1],(()=>o.e("node_modules_react_index_js-_11190").then((()=>()=>o(2784))))),82883:()=>c("default","redux",[,[1,4,0,0,,0],[1,3,0,0],[1,2,0,0],1,1],(()=>o.e("vendors-node_modules_redux_es_redux_js").then((()=>()=>o(18717))))),10529:()=>c("default","react-dom",[1,16,14,0],(()=>Promise.all([o.e("vendors-node_modules_react-dom_index_js"),o.e("webpack_sharing_consume_default_react_react-_cea0"),o.e("node_modules_object-assign_index_js")]).then((()=>()=>o(28316))))),58172:()=>c("default","react",[0,15],(()=>o.e("node_modules_react_index_js-_11190").then((()=>()=>o(2784))))),12801:()=>c("default","react",[,[1,17,0,0],[1,16,0,0],[1,15,0,0],[2,0,14,0],1,1,1],(()=>o.e("node_modules_react_index_js-_11190").then((()=>()=>o(2784))))),59037:()=>c("default","react",[,[1,17,0,0],[1,16,8,0],1],(()=>o.e("node_modules_react_index_js-_11190").then((()=>()=>o(2784))))),75696:()=>c("default","@material-ui/styles",[1,4,11,3],(()=>Promise.all([o.e("vendors-node_modules_material-ui_styles_esm_index_js"),o.e("node_modules_hoist-non-react-statics_dist_hoist-non-react-statics_cjs_js")]).then((()=>()=>o(94280))))),88576:()=>c("default","react-dom",[,[1,17,0,0],[1,16,8,0],1],(()=>Promise.all([o.e("vendors-node_modules_react-dom_index_js"),o.e("webpack_sharing_consume_default_react_react-_cea0"),o.e("node_modules_object-assign_index_js")]).then((()=>()=>o(28316))))),12196:()=>c("default","react",[0,16,6,0],(()=>o.e("node_modules_react_index_js-_11190").then((()=>()=>o(2784))))),54489:()=>c("default","react-dom",[0,16,6,0],(()=>Promise.all([o.e("vendors-node_modules_react-dom_index_js"),o.e("webpack_sharing_consume_default_react_react-_cea0"),o.e("node_modules_object-assign_index_js")]).then((()=>()=>o(28316))))),76982:()=>c("default","react",[,[4,16,8,0],[0],2],(()=>o.e("node_modules_react_index_js-_11190").then((()=>()=>o(2784))))),15777:()=>c("default","redux",[1,4,0,0],(()=>o.e("vendors-node_modules_redux_es_redux_js").then((()=>()=>o(18717))))),2411:()=>c("default","react",[1,17,0,1],(()=>o.e("node_modules_react_index_js-_11190").then((()=>()=>o(2784))))),43006:()=>c("default","react-dom",[1,17,0,1],(()=>Promise.all([o.e("vendors-node_modules_react-dom_index_js"),o.e("webpack_sharing_consume_default_react_react-_cea0")]).then((()=>()=>o(28316))))),38670:()=>c("default","react-redux",[1,7,2,2],(()=>Promise.all([o.e("vendors-node_modules_react-redux_es_index_js"),o.e("webpack_sharing_consume_default_react-dom_react-dom-webpack_sharing_consume_default_react_rea-04f810")]).then((()=>()=>o(21725))))),48049:()=>c("default","react-router-dom",[1,5,2,0],(()=>Promise.all([o.e("vendors-node_modules_react-router-dom_esm_react-router-dom_js"),o.e("webpack_sharing_consume_default_react_react-webpack_sharing_consume_default_react_react-_319b-_6de0")]).then((()=>()=>o(47428))))),19721:()=>c("default","notistack",[1,1,0,3],(()=>Promise.all([o.e("vendors-node_modules_material-ui_core_esm_styles_withStyles_js-node_modules_clsx_dist_clsx_m_js"),o.e("vendors-node_modules_material-ui_core_esm_SvgIcon_SvgIcon_js-node_modules_material-ui_core_es-d62974"),o.e("vendors-node_modules_material-ui_core_esm_ClickAwayListener_ClickAwayListener_js-node_modules-88dad3"),o.e("vendors-node_modules_notistack_dist_notistack_esm_js"),o.e("webpack_sharing_consume_default_react_react-_6d22"),o.e("webpack_sharing_consume_default_material-ui_styles_material-ui_styles"),o.e("webpack_sharing_consume_default_react-dom_react-dom-webpack_sharing_consume_default_react-dom-0bbcc1")]).then((()=>()=>o(87442))))),29609:()=>c("default","react-i18next",[1,11,8,8],(()=>Promise.all([o.e("vendors-node_modules_react-i18next_dist_es_index_js"),o.e("webpack_sharing_consume_default_react_react-_ad9f")]).then((()=>()=>o(56211))))),840:()=>c("default","react",[0,16,8,0],(()=>o.e("node_modules_react_index_js-_11190").then((()=>()=>o(2784))))),48565:()=>c("default","react",[1,16,8,0],(()=>o.e("node_modules_react_index_js-_11190").then((()=>()=>o(2784))))),49434:()=>s("default","i18next",(()=>o.e("vendors-node_modules_i18next_dist_esm_i18next_js").then((()=>()=>o(45170))))),88901:()=>c("default","react",[1,17,0,0],(()=>o.e("node_modules_react_index_js-_11191").then((()=>()=>o(2784))))),69151:()=>s("default","react",(()=>o.e("node_modules_react_index_js-_11191").then((()=>()=>o(2784))))),44808:()=>s("default","@material-ui/styles",(()=>o.e("vendors-node_modules_material-ui_styles_esm_index_js").then((()=>()=>o(94280))))),75540:()=>c("default","react",[1,16,8,4],(()=>o.e("node_modules_react_index_js-_11191").then((()=>()=>o(2784))))),81934:()=>c("default","react",[0,16,8],(()=>o.e("node_modules_react_index_js-_11191").then((()=>()=>o(2784))))),20314:()=>c("default","react",[0,16,12,0],(()=>o.e("node_modules_react_index_js-_11191").then((()=>()=>o(2784))))),45419:()=>c("default","react",[,[1,17],[1,16,8,0],1],(()=>o.e("node_modules_react_index_js-_11191").then((()=>()=>o(2784))))),99069:()=>c("default","@reduxjs/toolkit",[1,1,5,0],(()=>Promise.all([o.e("vendors-node_modules_reduxjs_toolkit_dist_redux-toolkit_esm_js"),o.e("webpack_sharing_consume_default_redux_redux")]).then((()=>()=>o(88658)))))};[2411,43006,38670,48049,19721,29609,840,75696,59037,48565,88576,12196,54489,76982,49434,88901,69151,44808,75540,81934,20314,45419,99069].forEach((e=>{o.m[e]=t=>{u[e]=0,delete o.c[e];var n=d[e]();if("function"!=typeof n)throw new Error("Shared module is not available for eager consumption: "+e);t.exports=n()}}));var m={"webpack_sharing_consume_default_react_react-_cea0":[76005],"webpack_sharing_consume_default_react-dom_react-dom-webpack_sharing_consume_default_react_rea-04f810":[93304,82883,10529],"webpack_sharing_consume_default_react_react-webpack_sharing_consume_default_react_react-_319b-_6de0":[58172,12801],"webpack_sharing_consume_default_react_react-_6d22":[59037],"webpack_sharing_consume_default_material-ui_styles_material-ui_styles":[75696],"webpack_sharing_consume_default_react-dom_react-dom-webpack_sharing_consume_default_react-dom-0bbcc1":[88576,12196,54489],"webpack_sharing_consume_default_react_react-_ad9f":[76982],webpack_sharing_consume_default_redux_redux:[15777]};o.f.consumes=(e,t)=>{o.o(m,e)&&m[e].forEach((e=>{if(o.o(u,e))return t.push(u[e]);var n=t=>{u[e]=0,o.m[e]=n=>{delete o.c[e],n.exports=t()}},a=t=>{delete u[e],o.m[e]=n=>{throw delete o.c[e],t}};try{var l=d[e]();l.then?t.push(u[e]=l.then(n).catch(a)):n(l)}catch(e){a(e)}}))}})(),(()=>{var e={main:0,"webpack_sharing_consume_default_react-dom_react-dom-webpack_sharing_consume_default_react-dom-0bbcc1":0,"webpack_sharing_consume_default_react_react-_ad9f":0,"webpack_sharing_consume_default_react_react-_73dd":0,"webpack_sharing_consume_default_react-i18next_react-i18next":0,"webpack_sharing_consume_default_react_react-_6d22":0,"webpack_sharing_consume_default_material-ui_styles_material-ui_styles":0,"webpack_sharing_consume_default_notistack_notistack-webpack_container_remote_portal_ajax":0,"webpack_sharing_consume_default_react_react-_e29c":0,"webpack_sharing_consume_default_react-redux_react-redux":0,"webpack_sharing_consume_default_react_react-webpack_sharing_consume_default_react_react-_760f-_3c92":0,"webpack_sharing_consume_default_react_react-_d52d":0,"webpack_sharing_consume_default_react-router-dom_react-router-dom":0,webpack_container_remote_portal_SeamlessDateHandler:0,webpack_container_remote_portal_OSM:0,webpack_container_remote_portal_Upload:0,"commons-webpack_sharing_provide_default_material-ui_styles-webpack_sharing_provide_default_re-b29a4a":0};o.f.j=(t,n)=>{var a=o.o(e,t)?e[t]:void 0;if(0!==a)if(a)n.push(a[2]);else if(/^(webpack_sharing_consume_default_(re(act(\-dom_react\-dom\-webpack_sharing_consume_default_react(\-dom\-0bbcc1|_rea\-04f810)|_react\-(_(6d22|ad9f|cea0)|webpack_sharing_consume_default_react_react\-_319b\-_6de0))|dux_redux)|material\-ui_styles_material\-ui_styles)|commons\-webpack_sharing_provide_default_material\-ui_styles\-webpack_sharing_provide_default_re\-b29a4a)$/.test(t))e[t]=0;else{var l=new Promise(((n,l)=>a=e[t]=[n,l]));n.push(a[2]=l);var r=o.p+o.u(t),i=new Error;o.l(r,(n=>{if(o.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var l=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src;i.message="Loading chunk "+t+" failed.\n("+l+": "+r+")",i.name="ChunkLoadError",i.type=l,i.request=r,a[1](i)}}),"chunk-"+t,t)}},o.O.j=t=>0===e[t];var t=(t,n)=>{var a,l,[r,i,s]=n,c=0;for(a in i)o.o(i,a)&&(o.m[a]=i[a]);if(s)var u=s(o);for(t&&t(n);c<r.length;c++)l=r[c],o.o(e,l)&&e[l]&&e[l][0](),e[r[c]]=0;return o.O(u)},n=self.webpackChunk_unified_reseller=self.webpackChunk_unified_reseller||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var s=o.O(void 0,["vendor","commons-webpack_sharing_provide_default_material-ui_styles-webpack_sharing_provide_default_re-b29a4a"],(()=>o(88885)));s=o.O(s)})();