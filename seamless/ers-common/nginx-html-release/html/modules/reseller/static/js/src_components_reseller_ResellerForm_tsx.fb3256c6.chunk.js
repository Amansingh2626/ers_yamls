(self.webpackChunk_unified_reseller=self.webpackChunk_unified_reseller||[]).push([["src_components_reseller_ResellerForm_tsx"],{35487:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var l=n(2411),a=n(70773),r=n(29609),i=n(98069),o=n(34712),s=n(6277),d=n(79692),u=n(12420),c=(0,d.Z)((function(e){return(0,u.Z)({positionTop:{marginTop:e.spacing(4)}})}));const v=function(e){var t=e.name,n=e.value,d=e.handleChange,u=e.resellerTypeId,v=e.resellerType,m=(e.label,e.helperText),p=e.required,f=void 0!==p&&p,g=e.disabled,h=void 0!==g&&g,y=e.showAll,b=void 0!==y&&y,E=e.errors,S=void 0===E?{}:E,w=e.classes,Z=e.assignDomainValue,I=(0,r.useTranslation)().t;I("defaultDomainName","Domain Name"),m=m||I("selectDomainName");var T=c();return l.createElement(o._,{showAll:b,resellerType:v,resellerTypeId:u,assignDomainValue:Z},(function(e){var r=e.domainNameOption,o=e.loading;return l.createElement(l.Fragment,null,o?l.createElement(i.Z,null):l.createElement(l.Fragment,null,"domainCode"===t&&l.createElement(a.SeamlessDropDown,{id:"domain-name-drop-down",required:f,name:t,error:!!S[t],fullWidth:!0,disabled:h,value:n,label:I("defaultDomainCode"),helperText:I("selectDomainCode"),onChange:d,options:[{key:r.name,value:r.name}],className:w&&(0,s.default)(w.element,T.positionTop)}),"domainName"===t&&l.createElement(a.SeamlessDropDown,{id:"domain-name-drop-down",required:f,name:t,error:!!S[t],fullWidth:!0,disabled:h,value:n,label:I("defaultDomainName"),helperText:I("selectDomainName"),onChange:d,options:[{key:r.description,value:r.description}],className:w&&(0,s.default)(w.element,T.positionTop)})))}))}},5316:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var l=n(74315),a=n(2411),r=n(23664),i=n(29609),o=n(96545),s=function(e){var t=e.children,n=(e.resellerTypeId,e.resellerType),s=(e.showAll,e.assignDomainValue),d=a.useState([]),u=(0,l.Z)(d,2),c=u[0],v=u[1],m=a.useState(!1),p=(0,l.Z)(m,2),f=p[0],g=p[1],h=((0,i.useTranslation)().t,(0,r.Z)().showErrorMessage);return a.useEffect((function(){g(!0),n&&(0,o.TJ)(n).then((function(e){var t,n,l;(null==e?void 0:e.groups.length)>=1&&(v(null==e||null===(t=e.groups[0])||void 0===t?void 0:t.group),s(null==e||null===(n=e.groups[0])||void 0===n?void 0:n.group.name,"domainCode"),s(null==e||null===(l=e.groups[0])||void 0===l?void 0:l.group.description,"domainName"))})).catch((function(e){return h(e)})).finally((function(){return g(!1)}))}),[n]),a.createElement(a.Fragment,null,t({domainNameOption:c,loading:f}))};const d=a.memo(s,(function(e,t){return e.resellerType===t.resellerType}))},34712:(e,t,n)=>{"use strict";n.d(t,{_:()=>l.Z}),n(35487);var l=n(5316)},23464:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var l=n(7560),a=n(11746),r=n(74315),i=n(2411),o=n(7089),s=n(86619),d=n(60905),u=n(79692),c=n(12420),v=n(70773),m=n(77954),p=n(6277),f=n(66225),g=n(44074),h=n(23664),y=(0,u.Z)((function(e){return(0,c.Z)({autocomplete:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},btn:{marginLeft:e.spacing(1),textTransform:"none",border:"1px solid"},input:{},closeIcon:{fontSize:"16px"},listing:{marginTop:e.spacing(1),backgroundColor:"#f5f5f5",borderRadius:"5%",height:200,overflow:"auto"}})}));function b(e,t,n){return!(null==e||!e.trim())&&n.indexOf(e)===t}var E="",S=[];const w=function(e){var t=e.label,n=e.required,u=e.placeholder,c=e.validation,w=e.tagDataHandler,Z=e.value,I=(0,h.Z)().showWarningMessage,T=i.useState([]),D=(0,r.Z)(T,2),O=D[0],C=D[1],x=i.useState([]),F=(0,r.Z)(x,2),k=F[0],N=F[1],R=i.useState(!0),j=(0,r.Z)(R,2),P=j[0],B=j[1],M=i.useCallback((function(e,t){if(t.length<1)C(t);else{var n=t.pop();P?C([].concat((0,a.Z)(t),(0,a.Z)(n.split(",")))):B(!0)}}),[P]);i.useEffect((function(){S=O}),[O]),i.useEffect((function(){(null==Z?void 0:Z.length)>0&&(Z.forEach((function(e){S.push(e.retailerMsisdn)})),S=S.filter(b),C(S))}),[Z]);var q=function(e){var t=[];if(e&&e.length>0){var n=e.map((function(e){return e.retailerMsisdn})),l=null==O?void 0:O.filter((function(e){return!n.includes(e)}));(null==l?void 0:l.length)>0&&I("Following phone numbers are not valid: ".concat(l.join(", "))),t=e}w(t)},W=y();return i.createElement(d.Z,{container:!0,alignItems:"center"},i.createElement(d.Z,{item:!0,xs:8,sm:8},i.createElement(m.ZP,{multiple:!0,freeSolo:!0,options:[],value:O,onChange:M,onBlur:function(e){return function(){if(E){var e,t=[].concat((0,a.Z)(S),(0,a.Z)(null===(e=E)||void 0===e?void 0:e.split(",")));if((null==t?void 0:t.length)>0){t.forEach((function(e){S.push(e)}));var n=S.filter(b);S=n,C((0,a.Z)(n))}}}()},className:(0,p.default)(W.autocomplete),renderTags:function(e,t){return e.map((function(e,n){return i.createElement(o.Z,(0,l.Z)({label:e},t({index:n})))}))},limitTags:3,onInputChange:function(e){var t,n=new RegExp(null==c?void 0:c.regex);E=null==e||null===(t=e.target)||void 0===t?void 0:t.value,B(n.test(E))},renderInput:function(e){return i.createElement(s.Z,(0,l.Z)({},e,{fullWidth:!0,autoComplete:"false",variant:"outlined",label:t,placeholder:u,className:(0,p.default)(W.input),error:!P,required:n,helperText:P?"":"Enter valid number",size:"medium"}))}})),i.createElement(d.Z,{item:!0,sm:4,xs:4},i.createElement(v.SeamlessButton,{color:"secondary",variant:"outlined",className:(0,p.default)(W.btn),onClick:function(){N(O)}},"Add")),i.createElement(d.Z,{item:!0,sm:12,xs:12},i.createElement(f.Z,{msisdnData:k},(function(e){var t=e.loading,n=e.retailerMSISDN,l=0===(null==n?void 0:n.length)?Z:n;return i.createElement(g.Z,{loading:t,retailerMSISDN:l,setTags:q})}))))}},66225:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var l=n(74315),a=n(2411),r=n(14674),i=n(19721),o=n(23664);const s=function(e){var t=e.children,n=e.msisdnData,s=a.useState([]),d=(0,l.Z)(s,2),u=d[0],c=d[1],v=a.useState(!1),m=(0,l.Z)(v,2),p=m[0],f=m[1],g=(0,i.useSnackbar)().enqueueSnackbar,h=(0,o.Z)().showWarningMessage;return a.useEffect((function(){if(n.length>0){var e=n.map((function(e){return{resellerData:{resellerMSISDN:e}}}));f(!0),(0,r.v$)(e,10,0).then((function(e){if(0===e.resultCode){var t,l=[];0===(null==e?void 0:e.totalCount)&&h("Following phone numbers are not valid: ".concat(n.join(", "))),null==e||null===(t=e.resellers)||void 0===t||t.forEach((function(e){var t,n;l.push({retailerId:null==e||null===(t=e.resellerData)||void 0===t?void 0:t.resellerId,retailerMsisdn:null==e||null===(n=e.resellerData)||void 0===n?void 0:n.resellerMSISDN})})),c(l)}})).catch((function(e){g(e.resultDescription,{variant:e})})).finally((function(){return f(!1)}))}}),[n]),a.createElement(a.Fragment,null,t({loading:p,retailerMSISDN:u}))}},44074:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var l=n(74315),a=n(61837),r=n(11776),i=n(38402),o=n(9520),s=n(49378),d=n(2411),u=n(59544),c=n(79692),v=n(12420),m=n(6277),p=(0,c.Z)((function(e){return(0,v.Z)({closeIcon:{fontSize:"16px"},listing:{marginTop:e.spacing(1),backgroundColor:"#f5f5f5",borderRadius:"5%",maxHeight:200,overflow:"auto"}})}));const f=function(e){var t=e.loading,n=e.retailerMSISDN,c=e.setTags,v=p(),f=d.useState(n),g=(0,l.Z)(f,2),h=g[0],y=g[1];return d.useEffect((function(){y(n)}),[n]),d.useEffect((function(){c(h)}),[h]),t||0===h.length?null:d.createElement("div",null,d.createElement(r.Z,{className:(0,m.default)(v.listing)},h.map((function(e,t){return d.createElement(i.Z,{key:t},d.createElement(s.Z,{primary:e.retailerMsisdn}),d.createElement(o.Z,null,d.createElement(a.Z,{onClick:function(){return function(e){var t=h.filter((function(t){return e!==t}));y(t),c(t)}(e)}},d.createElement(u.Z,{className:(0,m.default)(v.closeIcon)}))))}))))}},5540:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var l=n(2411),a=n(33553),r=n(98069);const i=function(e){return!1===e.loading?null:l.createElement(l.Fragment,null,l.createElement(a.Z,{justifyContent:"center",alignItems:"center",display:"flex",flexDirection:"row",width:"100%",p:1,borderColor:"grey.200",border:.2,borderRadius:6},l.createElement(a.Z,{m:2},l.createElement(r.Z,{variant:"text",animation:"wave"}),l.createElement(r.Z,{variant:"rect",width:210,height:118,animation:"wave"})),l.createElement(a.Z,{m:2},l.createElement(r.Z,{variant:"text",animation:"wave"}),l.createElement(r.Z,{variant:"rect",width:210,height:118,animation:"wave"})),l.createElement(a.Z,{m:2},l.createElement(r.Z,{variant:"text",animation:"wave"}),l.createElement(r.Z,{variant:"rect",width:210,height:118,animation:"wave"}))))}},41760:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>U});var l=n(51119),a=n(74315),r=n(2411),i=n(79692),o=n(12420),s=n(50835),d=n(70773),u=n(60905),c=n(80030),v=n(90436),m=n(6277),p=n(29609),f=n(23664),g=n(91955),h=n(5540),y=n(36924),b=n(12541),E=n(98069),S=n(78205),w=n.n(S),Z=n(58577),I=n(38670),T=n(48049),D=n(67801),O=n(44104),C=n.n(O);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=document.querySelector(".MuiBreadcrumbs-ol"),l=document.querySelector("#child-app-title");n&&(n.style.visibility=e?"visible":"hidden"),l&&(l.innerText=t)}var N=(0,i.Z)((function(e){return(0,o.Z)({spacingTop:{marginTop:e.spacing(3)},element:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},input:{marginBottom:e.spacing(3)},dividerSpacing:{marginBottom:e.spacing(3)}})})),R=!1,j=!1,P=null,B=null,M=!1,q="",W={},V="",_=window.config||{},A=_.defaultTemplate||"",L=_.actorConfig||{};const U=function(e){var t,n,l,i,o,S,O,x=e.data,_=e.edit,U=void 0!==_&&_,z=e.isCloningRecord,H=void 0!==z&&z,K=e.onFormSubmit,$=e.title,G=e.description,Y=e.loading,J=e.preInitializedData,Q=void 0!==J&&J,X=e.reSubmitAllowed,ee=void 0!==X&&X,te=e.customWidgetErrors,ne=void 0===te?{}:te,le=e.resellerInfo,ae=e.customWidgets,re=e.getChildComponentStateHandler,ie=e.partialSavedUserData,oe=e.getTemplateHandler,se=N(),de=(0,p.useTranslation)().t,ue=(0,T.useHistory)(),ce=C()().checkPermission,ve=(0,I.useSelector)((function(e){return e.auth})).user,me=r.useState({}),pe=(0,a.Z)(me,2),fe=pe[0],ge=pe[1],he=r.useState(!1),ye=(0,a.Z)(he,2),be=ye[0],Ee=ye[1],Se=r.useState(ie),we=(0,a.Z)(Se,2),Ze=we[0],Ie=we[1],Te=r.useState(),De=(0,a.Z)(Te,2),Oe=De[0],Ce=De[1],xe=w()(),Fe=xe.dateFormatter,ke=xe.moment;function Ne(){W={},V=""}ve&&null!==(t=ve.info)&&void 0!==t&&t.resellerData&&(o=null===(S=ve.info.resellerData)||void 0===S?void 0:S.resellerId,B=null===(O=ve.info)||void 0===O?void 0:O.resellerData),r.useEffect((function(){return Ne(),function(){Ne()}}),[]);var Re=function(e,t){var n;t?Ie(null!==(n=t.resultDetails)&&void 0!==n?n:t):Ce(e)},je=(0,s.TA)({initialValues:x,onSubmit:function(e){K&&K(e,be?Re:void 0)},enableReinitialize:!0}),Pe=je.values,Be=je.handleChange,Me=je.handleSubmit,qe=je.setValues,We=je.setFieldValue,Ve=(0,f.Z)().showErrorMessage,_e=r.useState(null),Ae=(0,a.Z)(_e,2),Le=Ae[0],Ue=Ae[1],ze=r.useState(U||!1),He=(0,a.Z)(ze,2),Ke=He[0],$e=He[1];r.useEffect((function(){var e=Pe.resellerType;!e&&x.resellerTypeId&&We("resellerType",V||x.resellerTypeId),e&&e!==V&&oe&&(R=!0,oe(e,(function(t,n){n?(R=!1,V=e,Ue(n)):(R=!1,Ue(null))})))}),[Pe.resellerType]);var Ge=r.useMemo((function(){return(0,g.em)(Le)}),[Le]);r.useEffect((function(){if(Q&&"campaign"===q){var e,t,n=null==le||null===(e=le.profileInformation)||void 0===e||null===(t=e.campaignType)||void 0===t?void 0:t.typeId;We("resellerType",n),!Qe.resellerType&&(Qe.resellerType=n)}}),[le]);var Ye,Je,Qe=r.useMemo((function(){var e;if(Q)return{};var t=(0,g.Mi)(Ge,le,U,{moment:ke});if(U&&(t.resellerType=t.resellerTypeId||q),U||(t.parentResellerId=o),U&&null!=le&&le.users&&(null===(e=le.users)||void 0===e?void 0:e.length)>0){var n=le.users,l={};for(var a in n){var r,i,s,d,u,c,v,m,p=n[a],f={roleId:p.roleId,userId:p.userId,userPhone:(null===(r=p.fields)||void 0===r||null===(i=r.parameters)||void 0===i?void 0:i.MSISDN)||"",userEmail:(null===(s=p.fields)||void 0===s||null===(d=s.parameters)||void 0===d?void 0:d.Email)||"",roleStartDate:(null===(u=p.fields)||void 0===u||null===(c=u.parameters)||void 0===c?void 0:c.roleStartDate)||"",roleExpiryDate:(null===(v=p.fields)||void 0===v||null===(m=v.parameters)||void 0===m?void 0:m.roleExpiryDate)||"",userPassword:p.password,principalKey:p.principalKey};0==+a?t=F(F({},t),f):l[+a-1]=f}t.userData=l}return t}),[Ge,le]);r.useEffect((function(){x&&x.resellerTypeId&&U&&We("resellerType",x.resellerTypeId)}),[x.resellerTypeId]),r.useEffect((function(){if(Pe.resellerType&&M){var e,t,n,l,a,r,i,o,s,d,u=(null===(e=W)||void 0===e?void 0:e.oldType)||(null===(t=W.oldType)||void 0===t?void 0:t.values)||[],c=Object.keys(Qe);if(u.length<=0&&c.length>=4&&(W.oldType={type:Pe.resellerType,values:c}),W&&(W.newType={type:Pe.resellerType,values:c}),null!==(n=W)&&void 0!==n&&n.oldType&&null!==(l=W)&&void 0!==l&&l.newType&&(null===(a=W.oldType)||void 0===a?void 0:a.type)!==(null===(r=W.newType)||void 0===r?void 0:r.type)&&(null===(i=W.newType)||void 0===i||null===(o=i.values)||void 0===o?void 0:o.length)>0&&(null===(s=W.oldType)||void 0===s||null===(d=s.values)||void 0===d?void 0:d.length)>0){var v=W.newType.values.filter((function(e){var t;return(null===(t=W.oldType)||void 0===t?void 0:t.values.includes(e))&&"parentResellerId"!==e}));ge({notEditableFields:v,canChangeResellerType:M})}}}),[Pe,Qe]),r.useEffect((function(){We("resellerType",A);var e=new URLSearchParams(window.location.search);M=!1,e.has("type")&&ce(D.Z.ChangeResellerType)&&(M=!0,$e(!1)),j=e.has("viewOnly");var t=de("resellerManagement");e.has("resellerId")?((q=e.get("resellerId"))&&!U&&(We("resellerType",q),!Qe.resellerType&&(Qe.resellerType=q)),k(!1,t=de("campaign"===q?"campaignManagementPageTitle":"actorManagement"))):k(!0,t)}),[]),B&&(P=null===(Ye=B)||void 0===Ye?void 0:Ye.resellerTypeId),U&&x.resellerTypeId&&(P=x.resellerTypeId),!Qe.resellerType&&Pe.resellerType&&(Qe.resellerType=Pe.resellerType),Qe.resellerType||Pe.resellerType||!q||(Qe.resellerType=q),!Ke&&U&&B&&(null===(n=B)||void 0===n||null===(l=n.resellerTypeId)||void 0===l?void 0:l.toLowerCase())!==(null===(i=P)||void 0===i?void 0:i.toLowerCase())&&(P=null===(Je=B)||void 0===Je?void 0:Je.resellerTypeId);var Xe="";if(q&&L.slugs)for(var et in L.slugs)L.slugs[et]===q&&(Xe=et);var tt=U?j?"viewResellerPageTitle1":"editResellerPageTitle1":"addResellerPageTitle1",nt=U?j?"viewResellerPageDescription1":"editResellerPageDescription1":"addResellerPageDescription1";return r.createElement(d.SeamlessContainer,{title:null!=$?$:de(tt,{type:de(Xe,"reseller")}),description:(null!=G?G:Xe)?"":de(nt)},!A&&!q&&r.createElement(r.Fragment,null,U&&!M&&ce(D.Z.ChangeResellerType)&&r.createElement("div",{style:{textAlign:"right"}},r.createElement(c.ZP,{title:"".concat(de("changeResellerType"))},r.createElement(d.SeamlessButton,{onClick:function(){ue.push("/home/reseller/resellers/edit/".concat(x.resellerId,"?type=yes"))},color:"primary",disabled:Y,variant:"text",style:{textAlign:"right"}},r.createElement(Z.Z,{fontSize:"small"})))),r.createElement(u.Z,{container:!0,className:se.spacingTop},r.createElement(u.Z,{container:!0,spacing:3},r.createElement(u.Z,{item:!0,xs:12},r.createElement(v.Z,{variant:"subtitle1",color:"primary"},de("selectGroup")))),r.createElement(u.Z,{container:!0,spacing:3},r.createElement(u.Z,{item:!0,xs:12,sm:4,className:(0,m.default)(se.input,se.element)},P&&!Q?r.createElement(b.default,{name:"resellerType",value:Pe.resellerType,handleChange:Be,editView:U,resellerType:P,disabled:Ke,onlyAllowedTypes:!0,label:de("selectGroup","Please select group"),helperText:de("pleaseSelectGroup"),required:!0}):r.createElement(E.Z,null))))),r.createElement("div",{className:(0,m.default)(se.dividerSpacing)}),r.createElement(h.default,{loading:Y||R}),r.createElement(y.e,{data:Le,disabledView:Y||R||j,editView:U,isCloningRecord:H,additionalFields:Q?x:Qe,allWidgets:Ge,resellerData:Pe,reSubmitAllowed:ee,customWidgetErrors:ne,additionalProps:fe,partialSavedUserData:Ze,customWidgets:ae,callbackData:Oe,resellerInfo:le,canChangeResellerTypeFlag:M,activeTabStatus:function(e){(!U||M)&&$e(!!e)},onFormSubmit:function(e,t){if(Object.keys(e).length>0){null!=t&&t.isPartialSubmitAllowed&&Ee(!0);var n=function(e){var t=Ge.filter((function(e){return"date"===e.type})).map((function(e){return e.id}));if(t.length>0)for(var n in e)t.includes(n)&&e[n]&&(e[n]=Fe(e[n],"YYYY-MM-DD"));return e}(e),l=(0,g.lO)(n,Ge,t,U);null!=t&&t.FinalSubmit?l.FinalSubmit=t.FinalSubmit:delete l.FinalSubmit,qe(l).then((function(e){return Me()}))}else Ve("Something went wrong, Unable to submit data!")},getChildComponentStateHandler:re,loading:Y||R}))}},38043:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AddToListPopup:()=>S});var l=n(11746),a=n(74315),r=n(2411),i=n(79692),o=n(12420),s=n(54462),d=(n(34111),n(29609)),u=n(77277),c=n(60905),v=n(70773),m=n(37413),p=n(96545),f=n(91955),g=n(23664),h=(0,i.Z)((function(e){return(0,o.Z)({contentStyle:{width:"100%"},table:{minWidth:650},btn:{color:"deepskyblue"},element:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},rowSpacing:{marginBottom:e.spacing(2)}})})),y="",b=[],E=window.config.resellerAdditionalConfig.BasicResellerInfoAPILimit||100,S=function(e){var t=e.open,n=e.setOpen,i=e.setData,o=e.data,S=(e.loading,(0,d.useTranslation)().t),w=h(),Z=r.useState([]),I=(0,a.Z)(Z,2),T=I[0],D=I[1],O=(Array((null==T?void 0:T.length)||0).fill(""),r.useState(!1)),C=(0,a.Z)(O,2),x=C[0],F=C[1],k=(0,g.Z)(),N=k.showErrorMessage,R=k.showSuccessMessage,j=r.useRef(null),P=function(){var e;null===(e=j.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};r.useEffect((function(){var e=(null==o?void 0:o.values)||[];y=null==o?void 0:o.widgetId,D(e)}),[o]),r.useEffect((function(){b.splice(0,b.length)}),[]),r.useEffect((function(){P()}),[T]);var B=r.useCallback((function(e){var t;if(!o.isSearchable)return console.info(" ⚔️ Widget is not searchable => ",o);var n=null===(t=T[e])||void 0===t?void 0:t.trim();if(!n)return console.error(S("emptyValueText"));b[e]="";var l=y.split("."),a={additionalFields:[{name:l.length>1?l[1]:l[0],value:n}],resellerData:{}};o.searchByKey&&("resellerMSISDN"===o.searchByKey?a={additionalFields:[],resellerData:{resellerMSISDN:n,status:"Active"}}:"email"===o.searchByKey&&(a={additionalFields:[],resellerData:{address:{email:n},status:"Active"}})),F(!0),(0,p.FF)(a,E,0).then((function(t){if(0===t.resultCode&&t.resellers&&t.resellers.length>0)null!=o&&o.mustExist&&R(S("validAndExistText"));else{var n=S("sorryText");N(n),b[e]=n}})).catch((function(e){N((0,f.az)(e,""))})).finally((function(){return F(!1)}))}),[o,T]),M=r.useCallback((function(){var e=T.filter((function(e,t){return!!e.trim()&&!b[t]}));i({result:e.join(","),errData:b}),b.splice(0,b.length),n(!1)}),[T]);return r.createElement(s.default,{open:t,onClose:function(){return n(!1)},onOk:M,maxWidth:"sm",loading:x,contentStyle:w.contentStyle,okButtonText:S("save&Back"),dialogTitle:S("addAssociations"),dialogDescription:S("multipleAssociations"),disableBackdropClick:!0},T.map((function(e,t){return r.createElement(c.Z,{container:!0,key:t,spacing:3,alignItems:"center"},r.createElement(c.Z,{item:!0,xs:9,sm:10},r.createElement(v.SeamlessInput,{fullWidth:!0,required:!0,error:!!b[t],className:w.element,value:e,onChange:function(e){return function(e,t){T[t]=e,D((0,l.Z)(T))}(e.target.value,t)},label:S("enterAssociation"),onBlur:function(){return B(t)},helperText:b[t]||"Please enter your values"})),r.createElement(c.Z,{item:!0,xs:3,sm:2},t===T.length-1&&r.createElement(u.Z,{onClick:function(e){return function(e){if(!T[e])return N(S("emptyValueText"));T.push(" "),D((0,l.Z)(T)),setTimeout((function(){return P()}),700)}(t)}},r.createElement(m.Z,{fontSize:"small"}))))})),r.createElement("div",{ref:j}))}},76832:(e,t,n)=>{"use strict";n.d(t,{Z:()=>x});var l=n(11746),a=n(51119),r=n(74315),i=n(2411),o=n.n(i),s=n(79692),d=n(12420),u=n(77277),c=n(60905),v=n(70773),m=n(27990),p=n(73430),f=n(15617),g=n(23664),h=n(29609),y=n(54462),b=n(96545),E=n(67801),S=n(44104),w=n.n(S),Z=n(48049),I=n(91955);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=(0,s.Z)((function(e){return(0,d.Z)({mainSection:{fontSize:e.typography.fontSize},bottomSpacing:{marginBottom:e.spacing(2)},rightContent:{textAlign:"right"},borderBtm:{borderBottom:1,marginBottom:e.spacing(1),paddingBottom:e.spacing(1)}})})),C={userEmail:"email",userPhone:"phone",userPassword:"password"};const x=function(e){var t=e.userFields,n=e.editView,i=e.dataHandler,s=e.isUserIdUniqueHandler,d=e.resellerData,S=e.data,T=void 0===S?{}:S,x=O(),F=(0,g.Z)(),k=F.showErrorMessage,N=F.showSuccessMessage,R=w()().checkPermission,j=(0,h.useTranslation)().t,P=(0,Z.useHistory)(),B=function(e){for(var t=new Array(e),n=0;n<t.length;n++)t[n]=n+1;return t}(o().useMemo((function(){return Object.keys(T).length}),[T])),M=o().useState(B),q=(0,r.Z)(M,2),W=q[0],V=q[1],_=o().useState(T),A=(0,r.Z)(_,2),L=A[0],U=A[1],z=o().useState({state:!1,data:null}),H=(0,r.Z)(z,2),K=H[0],$=H[1],G=o().useState(!1),Y=(0,r.Z)(G,2),J=Y[0],Q=Y[1],X=o().useMemo((function(){var e=[],n=[];return t.forEach((function(t){t.required&&e.push(t.id),t.unique&&n.push(t.id)})),[e,n]}),[]),ee=(0,r.Z)(X,2),te=ee[0],ne=ee[1];return o().createElement(c.Z,{container:!0,spacing:3,className:x.bottomSpacing},o().createElement(c.Z,{item:!0,xs:12,className:x.rightContent},R(E.Z.AddResellerUser)&&o().createElement(v.SeamlessButton,{onClick:function(){return V([].concat((0,l.Z)(W),[W.length+1]))},color:"primary",className:x.bottomSpacing,variant:"contained",startIcon:o().createElement(p.Z,null)},j("addNewUser","Add new user"))),o().createElement("div",{style:{display:"flex",flexDirection:"column-reverse",width:"100%"}},W.map((function(e,l){var r;return o().createElement(c.Z,{container:!0,spacing:3,key:l,className:x.borderBtm},t.map((function(e,t){var r,d,u;return(null===(r=L[l])||void 0===r?void 0:r[e.id])||"roleId"!==e.id||(e.defaultValue=""),o().createElement(m.Z,{widget:e,key:e.id,editView:n,overrideValue:null===(d=L[l])||void 0===d?void 0:d[e.id],disabledMuteableRule:n&&!(null!==(u=L[l])&&void 0!==u&&u.principalKey),blurHandler:function(){var t;return function(e,t){var n=null;ne.includes(e.id)&&t&&s(t,(function(e){n=(null==e?void 0:e.resultDescription)||"Recently added userId is not unique"})),te.includes(e.id)&&!t&&(n="".concat(e.placeholder," is a required field"),k(n)),i(n,L)}(e,null===(t=L[l])||void 0===t?void 0:t[e.id])},handleChange:function(t){return function(e,t,n){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"text",r=D({},L);r[n]=D(D({},L[n]),{},(0,a.Z)({},t,e.target.value)),U(r),"dropdown"===l&&i(null,r)}(t,e.id,l,e.type)}})})),o().createElement(c.Z,{item:!0,sm:12},R(E.Z.DeleteResellerUser)&&o().createElement(u.Z,{className:x.bottomSpacing,onClick:function(){return function(e){V(W.filter((function(t){return t!==e})));var t=e-1,l=L[t];n&&null!=l&&l.principalKey?$({state:!0,data:l,index:t}):(delete L[t],i(null,L))}(e)},variant:"text",style:{float:"right"}},o().createElement(f.Z,null)),n&&!(null!==(r=L[l])&&void 0!==r&&r.principalKey)&&o().createElement(v.SeamlessButton,{onClick:function(){return function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n="";(null===(e=Object.keys(t))||void 0===e?void 0:e.length)<=te.length&&(n="Following are (".concat(te.join(", "),") the required fields"));var l={};for(var a in t){var r=t[a];if(l[C[a]||a]=r,te.includes(a)&&!r){n="".concat((0,I.WR)(a)," is a required field");break}}if(n)return k(n);var i={resellerId:d.resellerId,resellerIdType:"RESELLERID",users:[l]};Q(!0),(0,b.sC)(i).then((function(e){0===e.resultCode?(N(e),P.push("/home/reseller/resellers/edit/".concat(d.resellerId,"?tab=4"))):k(e)})).catch((function(e){k(e)})).finally((function(){return Q(!1)}))}(L[l])},color:"primary",className:x.bottomSpacing,variant:"contained",style:{float:"right"}},j("submitUser"))),o().createElement(c.Z,{item:!0,sm:12},o().createElement("hr",null)))}))),o().createElement(y.default,{open:K.state,onClose:function(){return $({state:!1,data:null})},onOk:function(){var e;if(null==K||null===(e=K.data)||void 0===e||!e.userId)return k("Something went wrong, Unable to delete a user");var t={resellerId:d.resellerId,resellerIdType:"RESELLERID",userIds:[K.data.userId]};(0,b.it)(t).then((function(e){0===e.resultCode?(N(e),K.index>-1&&delete L[K.index],i(null,L),$({state:!1,data:null}),P.push("/home/reseller/resellers/edit/".concat(d.resellerId,"?tab=4"))):k(e)})).catch((function(e){k(e)})).finally((function(){return Q(!1)}))},loading:J,dialogTitle:"".concat(j("deleteUserConfirmationTitle")),dialogDescription:"".concat(j("deleteUserConfirmationText")),okButtonText:j("delete"),closeButtonText:j("cancel")}))}},52833:(e,t,n)=>{"use strict";n.r(t),n.d(t,{SearchResellerChildrenModal:()=>b});var l=n(2411),a=n(79692),r=n(12420),i=n(37390),o=n(97485),s=n(15584),d=n(91256),u=n(58987),c=n(89571),v=n(27556),m=n(54462),p=(n(34111),n(29609)),f=n(48049),g=n(77277),h=n(80030),y=(0,a.Z)((function(e){return(0,r.Z)({contentStyle:{width:"100%"},table:{minWidth:650},btn:{color:"deepskyblue"}})})),b=function(e){var t=e.open,n=e.setOpen,a=e.data,r=(e.loading,(0,p.useTranslation)().t),b=y();return l.createElement(m.default,{open:t,onClose:function(){return n(!1)},maxWidth:"lg",contentStyle:b.contentStyle,dialogTitle:r("searchResultReseller"),dialogDescription:r("searchResellersFound"),disableBackdropClick:!0},l.createElement(d.Z,{id:"search-reseller-children-modal-table-container",component:v.Z},l.createElement(i.Z,{id:"search-reseller-children-modal-table",className:b.table,"aria-label":"simple table"},l.createElement(u.Z,null,l.createElement(c.Z,null,l.createElement(s.Z,{component:"th"},r("resellerId")),l.createElement(s.Z,{component:"th",align:"right"},r("resellerName")),l.createElement(s.Z,{component:"th",align:"right"},r("parentResellerName")),l.createElement(s.Z,{component:"th",align:"right"},r("resellerMSISDN")),l.createElement(s.Z,{component:"th",align:"right"},r("resellerTypeName")),l.createElement(s.Z,{component:"th",align:"right"},r("status")),l.createElement(s.Z,{component:"th",align:"right"},r("resellerReason","Any Action Comments")))),l.createElement(o.Z,null,a.map((function(e){var t;return l.createElement(c.Z,{key:e.resellerId},l.createElement(s.Z,{component:"th",scope:"row"},l.createElement(h.ZP,{title:"".concat(r("clickToViewResellerDetail"))},l.createElement(g.Z,{className:b.btn,component:f.Link,target:"_blank",to:"/home/reseller/resellers/view/"+e.resellerId},e.resellerId))),l.createElement(s.Z,{align:"right"},e.resellerName),l.createElement(s.Z,{align:"right"},e.parentResellerName),l.createElement(s.Z,{align:"right"},e.resellerMSISDN),l.createElement(s.Z,{align:"right"},e.resellerTypeName),l.createElement(s.Z,{align:"right"},e.status),l.createElement(s.Z,{align:"right"},null===(t=e.reasons)||void 0===t?void 0:t.map((function(e,t){return e.includes("http://")||e.includes("https://")?l.createElement("a",{href:e,target:"_blank",key:t},r("seeAttachment","See Attachment"),"."):l.createElement("p",{key:t},r("reasonDescription"),l.createElement("q",null,e))}))))}))))))}},36924:(e,t,n)=>{"use strict";n.d(t,{e:()=>ut});var l,a,r=n(7560),i=n(56470),o=n(90929),s=n(51119),d=n(11746),u=n(74315),c=n(77162),v=n.n(c),m=n(2411),p=n(9699),f=n(79692),g=n(12420),h=n(50835),y=n(70773),b=n(6277),E=n(23664),S=n(91163),w=(n(34111),n(33553)),Z=n(60905),I=n(67358),T=n(86619),D=n(80030),O=n(90436),C=n(77954),x=n(61564),F=n(75958),k=n(19258),N=n(29609),R=n(91955),j=n(96545),P=n(52833),B=n(88591),M=n(82043),q=n(32950),W=n(77790),V=n.n(W),_=n(17120),A=n(85624),L=n(38043),U=n(37413),z=n(4179),H=n(76832),K=n(96407),$=n(35487),G=n(48049),Y=n(78205),J=n.n(Y),Q=n(23464),X=n(54462);function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ne=(0,f.Z)((function(e){return(0,g.Z)({element:{marginRight:e.spacing(1)},contentStyle:{width:"100%"},spacingTop:{marginTop:e.spacing(3)},spacingBottom:{marginBottom:e.spacing(2)},dividerSpacing:{marginBottom:e.spacing(3)},validateBtn:{float:"right",top:-50,padding:0},autoElement:{marginTop:e.spacing(2),"& .MuiInputLabel-filled.MuiInputLabel-shrink.MuiInputLabel-marginDense":{transform:"translate(12px, 5px) scale(0.75)"},"& .MuiInputBase-root":{paddingTop:e.spacing(1.5)},"& .MuiFormHelperText-root":{marginLeft:0}}})})),le=0,ae=null,re=0,ie=!1,oe="",se=[],de=[],ue=[],ce=[],ve=[],me=[],pe=[],fe=[],ge=[],he={},ye={},be={},Ee=[],Se=!0,we=!1,Ze=[],Ie={},Te={},De={},Oe=[],Ce=[],xe=[],Fe=[],ke=[],Ne=[],Re=[],je=[],Pe={},Be={},Me={},qe=[],We={},Ve=[],_e={},Ae=[],Le=[],Ue={},ze={},He={},Ke={},$e=[],Ge={},Ye=[],Je=[],Qe=[],Xe=[],et={},tt=!1,nt={},lt=!1,at={},rt={},it={},ot=!1;function st(e){for(var t in e)delete e[t]}var dt=(null===(a=(null!==(l=window.conf)&&void 0!==l?l:{}).resellerAdditionalConfig)||void 0===a?void 0:a.BasicResellerInfoAPILimit)||100,ut=m.memo((function(e){var t,n=e.editView,l=void 0!==n&&n,a=e.disabledView,c=void 0!==a&&a,f=e.isCloningRecord,g=void 0!==f&&f,W=e.onFormSubmit,Y=e.additionalFields,ee=e.data,ut=e.allWidgets,ct=e.loading,vt=e.resellerData,mt=e.resellerInfo,pt=void 0===mt?{}:mt,ft=e.additionalProps,gt=void 0===ft?{}:ft,ht=e.partialSavedUserData,yt=e.callbackData,bt=e.customWidgets,Et=e.customWidgetErrors,St=void 0===Et?{}:Et,wt=e.validationRequired,Zt=void 0===wt||wt,It=e.reSubmitAllowed,Tt=void 0!==It&&It,Dt=e.activeTabStatus,Ot=e.getChildComponentStateHandler,Ct=e.canChangeResellerTypeFlag,xt=void 0!==Ct&&Ct,Ft=(0,E.Z)(),kt=Ft.showErrorMessage,Nt=Ft.showSuccessMessage,Rt=Ft.showWarningMessage,jt=Ft.showInfoMessage,Pt=(0,N.useTranslation)().t,Bt=Pt("resellerTemplate"),Mt=ne(),qt=(0,G.useHistory)(),Wt=J()(),Vt=Wt.dateFormatter,_t=Wt.moment,At=(0,_.default)(null).validateRequest,Lt=(0,A.default)(null).generateIdByFieldName,Ut=m.useState(0),zt=(0,u.Z)(Ut,2),Ht=(zt[0],zt[1]),Kt=(0,K.Z)(),$t=Kt.getUserDetails,Gt=Kt.addMemberToGroup,Yt=Kt.deleteMemberGroup,Jt=m.useState(!1),Qt=(0,u.Z)(Jt,2),Xt=Qt[0],en=Qt[1],tn=m.useState(!1),nn=(0,u.Z)(tn,2),ln=nn[0],an=nn[1],rn=m.useState({}),on=(0,u.Z)(rn,2),sn=on[0],dn=on[1],un=m.useState({}),cn=(0,u.Z)(un,2),vn=cn[0],mn=cn[1],pn=m.useState(!1),fn=(0,u.Z)(pn,2),gn=fn[0],hn=fn[1],yn=m.useState({state:!1,id:null}),bn=(0,u.Z)(yn,2),En=bn[0],Sn=bn[1],wn=gt.canChangeResellerType,Zn=void 0!==wn&&wn,In=gt.notEditableFields,Tn=void 0===In?[]:In,Dn=m.useMemo((function(){return function(e){return e&&e.value&&e.value.sections?e.value.sections:[]}(ee)}),[ee]),On=Dn.map((function(e,t){return{label:e.title||"".concat(Bt," ").concat(t+1)}}));function Cn(){ot=!1,de=[],Te={},ye={},be={},nt={},rt={},it={},Ee=[],Xe=[],re=0,we=!1,tt=!1,ke.splice(0,ke.length),me.splice(0,me.length),Re.splice(0,Re.length),Ne.splice(0,Ne.length),je.splice(0,je.length),qe.splice(0,qe.length),Ve.splice(0,Ve.length),Ae.splice(0,Ae.length),Le.splice(0,Le.length),$e.splice(0,$e.length),Je=[],Qe=[],st(Pe),st(Be),st(Me),st(We),st(_e),st(Ue),st(ze),st(He),st(Ke),st(Ge)}m.useEffect((function(){return Cn(),function(){Cn()}}),[]),m.useEffect((function(){Cn()}),[Y.resellerType]),m.useEffect((function(){var e={};l&&null!=Y&&Y.userData&&(e=Y.userData,mn(e),delete Y.userData)}),[Y]),m.useEffect((function(){var e,t=pt.users,n=void 0===t?[]:t;if(le=ee&&ee.value&&(null===(e=ee.value.sections)||void 0===e?void 0:e.length)||0,Se=!l,1===le&&(Se=!1),we=!!Zn&&l,ut.length>0&&Zt){var a;de=[].concat((0,d.Z)(de),(0,d.Z)(Tn));var r=[],i={};null==Dn||null===(a=Dn.filter((function(e){return!(null==e||!e.customWidget)})))||void 0===a||a.forEach((function(e){var t;null===(t=e.widgets)||void 0===t||t.forEach((function(e){Xe.push(e.id)}))}));var o=function(e){var t,a,o,s,d,u,c,v,m,f,h,y,b,E,S,w,Z,I,T,D,O,C,x,F,k,N,j,P,B,M,q=ut[e],W=q.id;if(q.unique&&Oe.push(W),null!==(t=q.validation)&&void 0!==t&&t.mustExist&&""!==q.validation.mustExist&&Ce.push(W),null!==(a=q.validation)&&void 0!==a&&a.listViewModal&&q.validation.listViewModal&&xe.push(W),null!==(o=q.validation)&&void 0!==o&&o.externalValidation&&""!==q.validation.externalValidation&&(Ie[W]=q.validation.externalValidation,Ze.push(W)),null!==(s=q.fieldType)&&void 0!==s&&s.includes("users[]")&&(Ne.push(q),Re.push(W),q.unique&&je.push(W)),null!==(d=q.validation)&&void 0!==d&&d.mapDataBeforeSubmit&&(Be[q.validation.mapDataBeforeSubmit]=W),q.defaultValue&&q.defaultValue.startsWith("${")&&q.defaultValue.endsWith("}")){var V,_=null===(V=q.defaultValue)||void 0===V?void 0:V.replace(/[^a-zA-Z ]/g,"");Me[W]=_,qe.push(_)}if(null!==(u=q.validation)&&void 0!==u&&u.minDate&&null!==(c=q.validation)&&void 0!==c&&null!==(v=c.minDate)&&void 0!==v&&v.startsWith("${")&&null!==(m=q.validation)&&void 0!==m&&null!==(f=m.minDate)&&void 0!==f&&f.endsWith("}")){var A,L,U=null===(A=q.validation)||void 0===A||null===(L=A.minDate)||void 0===L?void 0:L.replace(/[^a-zA-Z ]/g,"");et[W]=U}null!==(h=q.validation)&&void 0!==h&&h.parsedValueBeforeSubmit&&""!==q.validation.parsedValueBeforeSubmit&&(De[W]=q.validation.parsedValueBeforeSubmit),null!==(y=q.validation)&&void 0!==y&&y.searchable&&!0===q.validation.searchable&&ue.push(W),null!==(b=q.validation)&&void 0!==b&&b.getResellerDetail&&Le.push(W),null!==(E=q.validation)&&void 0!==E&&E.mapResellerPathIndex&&(ze[W]=q.validation.mapResellerPathIndex),null!==(S=q.validation)&&void 0!==S&&S.prefillDataWithKey&&(He[W]=q.validation.prefillDataWithKey);var z,H,K=(null===(w=q.validation)||void 0===w?void 0:w.disabled)&&!0===q.validation.disabled;K&&de.push(W),!l&&g&&q.validation.disabledIfCloning&&de.push(W),null!==(Z=q.validation)&&void 0!==Z&&Z.autoGenerate&&!0===q.validation.autoGenerate&&ve.push(W),null!==(I=q.validation)&&void 0!==I&&I.perfix&&!0===q.validation.prefix&&pe.push(W),null!==(T=q.validation)&&void 0!==T&&T.preFill&&!0===q.validation.preFill&&ce.push(W),null!==(D=q.validation)&&void 0!==D&&D.hideIf&&""!==q.validation.hideIf&&(ye[W]=null===(z=q.validation)||void 0===z?void 0:z.hideIf,me.push(W)),null!==(O=q.validation)&&void 0!==O&&O.calculateDurationForDate&&(rt[W]=q.validation.calculateDurationForDate),null!==(C=q.validation)&&void 0!==C&&C.updateFieldValue&&(it[W]=q.validation.updateFieldValue),null!==(x=q.validation)&&void 0!==x&&x.regex&&""!==q.validation.regex&&(he[W]=null===(H=q.validation)||void 0===H?void 0:H.regex,fe.push(W)),null!=q&&null!==(F=q.validation)&&void 0!==F&&F.replaceTextWith&&""!==(null==q||null===(k=q.validation)||void 0===k?void 0:k.replaceTextWith)&&Ye.push(W);var $=q.placeholder||(0,R.WR)(W||"");null!==(N=q.validation)&&void 0!==N&&N.searchByValue&&""!==q.validation.searchByValue&&(ge.push(W),ol({additionalFields:[],resellerData:{resellerTypeId:q.validation.searchByValue,status:"Active"},widget:q},(function(e,t){!e&&t&&ge.includes(W)&&(be[W]=El(t)||[])}),{message:Pt("searchResellersFoundByCIN",{type:$}),widgetId:W})),(null===(j=q.validation)||void 0===j?void 0:j.dataSource)&&""!==(null===(P=q.validation)||void 0===P?void 0:P.dataSource)&&Nn(q),q.required&&!Xe.includes(W)&&ke.push(W),null!==(B=q.validation)&&void 0!==B&&B.skipValidationIfHidden&&Je.push(W),Qe=Je;var G="password"===q.validation||"password"===(null===(M=q.validation)||void 0===M?void 0:M.type);we&&!Y[W]&&q.required&&(de.splice(de.indexOf(W),1),G&&de.push(W));var J,Q,X=we&&G;!q.required||me.includes(W)||K||X||Xe.includes(W)||(r.push(q),i[W]=p.Z_().required("".concat($," ").concat(Pt("isRequiredField")))),fe.includes(W)&&(i[W]=i[W]?i[W].matches(new RegExp("".concat(he[W])),q.errorMessage||Pt("invalidRegexError",{placeholder:q.placeholder})):p.Z_().matches(new RegExp("".concat(he[W])),q.errorMessage||Pt("invalidRegexError",{placeholder:q.placeholder}))),Re.length>0&&l&&"userEmail"===W&&(i[W]=p.Z_()),"string"==typeof q.validation&&G&&n.length>0&&l&&null!==(J=n[0])&&void 0!==J&&J.password&&(Y[W]=(null===(Q=n[0])||void 0===Q?void 0:Q.password)||Y[W]),["dropdown","radio","multiselect","autocomplete"].includes(q.type)&&(at[W]=q.options)};for(var s in ut)o(s);ae=p.Ry().shape(te({},i)),Ee=(0,R.oK)(Dn,Pt,{controlableFieldIDs:me,regexEnabledFieldsId:fe,customWidgetFieldIds:Xe,regexFields:he}),de=de.filter((function(e,t,n){return n.indexOf(e)==t}))}Fn()}),[ut]);var xn,Fn=function(){var e=new URLSearchParams(window.location.search);if(e.has("tab")){var t=parseInt(e.get("tab"))||0;setTimeout((function(){if(t>0)for(;t>0;){var e;null===(e=document.querySelector("#nextButtonRef"))||void 0===e||e.click(),t--}}),2500)}var n=document.querySelector(".MuiStepper-horizontal");1===le&&n?n.style.display="none":n&&(n.style.display="flex"),kn()},kn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};nt=te({disabledFieldIds:de,searchByFields:be,searchByFieldsId:ge,dataSourceCachedData:Ke,controlableFields:ye,controlableFieldIDs:me,values:qn,dropdownFieldsOptions:te(te({},at),be)},e),Ot&&Ot(te(te({},nt),e))},Nn=function(e){var t=e.id,n=e.validation.dataSource;if(n&&n.startsWith("${")&&n.endsWith("}")){ge.push(t);var l=n.replace(/[^a-zA-Z ]/g,"");$e.push(l),Ge[l]=t}else if(n.startsWith("/")){var a="",r=(0,R.ZE)(e.validation.dataSource);if(r.length>0){Ae.push(t);var i=(0,R.kH)(e.validation.dataSource,r,te({},qn));_e[t]={fields:r,widget:e},!i.includes("/${")&&i&&(a=i)}ge.push(t),Rn(e,a)}},Rn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e.id,a=t||e.validation.dataSource,r=Object.keys(Ke)||[];r.includes(a)||a.includes("${")?Ke[a]&&(be[n]=Ke[a]):(hn(!0),Sn({state:!0,id:n}),(0,j.qu)(a).then((function(t){if(0!==(null==t?void 0:t.resultCode)){hn(!1),Sn({state:!1,id:n});var r=t.resultMessage||t.resultDescription||"Unable to fetch data for: ".concat(e.placeholder);return zn(n,r),kt(t)}be[n]=[];var i=e.validation.parseFromDataSource||{},s=(null==t?void 0:t.values)||(null==t?void 0:t.data)||i.root&&t[i.root],d=e.validation.extraPayloadFields||[];if((null==s?void 0:s.length)>0){var u,c={};s.forEach((function(e){var t="object"===(0,o.Z)(e);be[n].push({value:t?e[i.value]:e,name:t?e[i.name]:e}),d.length>0&&t&&e[i.value]&&(c[e[i.value]]=d.map((function(t){return{name:t.name,value:e[t.value]}})))})),(null===(u=Object.keys(c))||void 0===u?void 0:u.length)>0&&(Ve.push(n),We[n]=c,!ge.includes(n)&&ge.push(n)),Y[n]&&l&&bl(n,e,Y[n]),hn(!1),Sn({state:!1,id:n}),Ke[a]=be[n],kn()}else kt("".concat(n.charAt(0).toUpperCase()+n.slice(1),": ").concat(t.resultDescription)),hn(!1),Sn({state:!1,id:n})})))},jn=function(e,t){return e.groupId&&e.groupMemberId&&l&&(e.groupId===t.groupId&&e.groupMemberId===t.groupMemberId&&e.groupStartDate===t.groupStartDate&&e.groupEndDate===t.groupEndDate||Yt({groupId:t.groupId,memberId:t.groupMemberId},(function(e){return Promise.resolve(!0)}))),Promise.resolve(!0)},Pn=function(){var e=(0,i.Z)(v().mark((function e(t,n){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gt(t,(function(e,l){var a;if(0!==(null==e?void 0:e.resultCode)&&t.groupMemberId&&Yt({groupId:t.groupId,memberId:t.groupMemberId}),(null==l||null===(a=l.members)||void 0===a?void 0:a.length)>0){var r=l.members[0].id;return Ln("groupMemberId",r),t.groupMemberId=r,W(t,n)}return Rt(Pt("anErrorOccurredTryAgain")),Promise.resolve(null)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Bn=re===Ee.length,Mn=(0,h.TA)({initialValues:Y,validationSchema:Bn||l?ae:Ee[re],onSubmit:(xn=(0,i.Z)(v().mark((function e(t){var n,a,r,i,o,s,d,u,c,m,p;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(0,R.fr)(t,De)||{},r=te(te({},t),a),!(Re.length>0&&(null===(n=Object.keys(vn))||void 0===n?void 0:n.length)>0)){e.next=9;break}for(d in i=Ne.filter((function(e){return e.required})).map((function(e){return e.id})),o="",s=function(e){var t=vn[e];i.forEach((function(e){t[e]||(o="".concat((0,R.WR)(e)," is a required field for user's form"))}))},vn)s(d);if(!o){e.next=9;break}return e.abrupt("return",kt(o));case 9:if(u=Dn[lt?re:re-1],c={activeTemplateSection:u,activeTab:re,userFields:Ne,userFieldsData:vn,extraPayloadFields:We,isPartialSubmitAllowed:ie,FinalSubmit:lt,allWidgets:ut,dropdownFieldsOptions:te(te({},at),be)},kn(c),u&&(m=JSON.stringify(u),localStorage.setItem("activeTab",m)),!ht||!ht.reseller_id){e.next=19;break}return p=(null==ht?void 0:ht.reseller_id)||r.resellerId,e.next=18,Ln("resellerId",p);case 18:r.resellerId=p;case 19:if(!ot&&l){e.next=24;break}return e.next=22,jn(r,Y);case 22:if(!(ht&&ht.reseller_id||r.resellerId)||!r.groupId){e.next=24;break}return e.abrupt("return",Pn(r,c));case 24:W(r,c);case 25:case"end":return e.stop()}}),e)}))),function(e){return xn.apply(this,arguments)}),enableReinitialize:!0}),qn=Mn.values,Wn=Mn.handleChange,Vn=Mn.handleSubmit,_n=Mn.errors,An=Mn.validateForm,Ln=Mn.setFieldValue,Un=Mn.setValues,zn=Mn.setFieldError,Hn=Mn.setErrors;yt&&null!=yt&&yt.activeTab&&(null===(t=Dn[re])||void 0===t?void 0:t.id)==(null==yt?void 0:yt.activeTab)&&(tt=!1),m.useEffect((function(){var e,t;tt=!1,re>0&&null!==(e=Dn[re])&&void 0!==e&&e.partialSubmit&&0!==(null==yt?void 0:yt.resultCode)&&Dn[re].id!=yt.activeTab&&(tt=!1,null===(t=document.querySelector("#prevButtonRef"))||void 0===t||t.click(),Ht((function(e){return++e}))),qn.groupId&&qn.groupMemberId&&0!==yt.resultCode&&Yt({groupId:qn.groupId,memberId:qn.groupMemberId})}),[yt]);var Kn=m.useState(!1),$n=(0,u.Z)(Kn,2),Gn=$n[0],Yn=$n[1];m.useEffect((function(){""===qn.one_time_password&&(Ln("one_time_password","false"),Yn(!0)),0==qn.one_time_password&&Ln("motte_de_passe_flag",!0),"false"===qn.one_time_password&&Yn(!0),"true"===qn.one_time_password&&Yn(!1)}),[qn.one_time_password]),m.useEffect((function(){var e=Object.values(rt);if((null==e?void 0:e.length)>0&&null!=qn&&qn.startDate&&null!=qn&&qn.endDate){var t=_t(qn.startDate),n=_t(qn.endDate),l=_t(new Date),a=n.diff(t,"days"),r=it.endDate||it.startDate||"duration";Array.isArray(r)?r.forEach((function(e){"duration"===e&&Ln("".concat(e),a+1),"endOfCampaign"===e&&Ln("".concat(e),l.valueOf()>=t.valueOf()&&l.valueOf()>=n.valueOf()||0===a),"hidePaymentFrequency"===e&&(l.valueOf()>=t.valueOf()&&l.valueOf()>=n.valueOf()||0===a?Ln("".concat(e),"Yes"):Ln("".concat(e),qn[e]||"Yes"))})):Ln("".concat(r),a)}}),[null==qn?void 0:qn.startDate,null==qn?void 0:qn.endDate]),m.useEffect((function(){Jn("parentResellerId",qn.parentResellerId)}),[qn.parentResellerId]),m.useEffect((function(){if(l&&Y){var e=Y.groupId,t=Y.groupStartDate,n=Y.groupEndDate;ot=e!==qn.groupId||t!==qn.groupStartDate||n!==qn.groupEndDate}else ot=!1}),[qn.groupId,qn.groupStartDate,qn.groupEndDate]);var Jn=function(e,t){t&&Le.includes(e)&&$t(t,(function(e,t){if(t&&0===t.resultCode){var n,l,a=te({},qn),r=t.resellerInfo.resellerData,i={};if(null===(n=t.resellerInfo)||void 0===n||null===(l=n.additionalFields)||void 0===l||l.forEach((function(e){i[e.name]=e.value})),Object.keys(ze).length>0&&r.resellerPath){var o,s=(null===(o=r.resellerPath)||void 0===o?void 0:o.split("/"))||[];for(var d in ze){var u=ze[d];u>-1&&(a[d]=s[u]||"")}}if(Object.keys(He).length>0&&r)for(var c in He){var v=He[c];a[c]=r[v]||i[v]}Un(a)}}))},Qn=m.useState(!1),Xn=(0,u.Z)(Qn,2),el=Xn[0],tl=Xn[1],nl=m.useState(null),ll=(0,u.Z)(nl,2),al=ll[0],rl=ll[1],il=window.config.openCalendarWith||"year",ol=function(e,t){var n,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=l.message,r=void 0===a?Pt("searchResellersFoundByCIN",{type:"CIN"}):a,i=l.widgetId,o=void 0===i?"":i,s=null==e?void 0:e.widget;Sn({state:!1,id:o}),(0,j.FF)(e,dt,0,null==s||null===(n=s.validation)||void 0===n?void 0:n.dataSource).then((function(e){var n=null;if(0===e.resultCode&&e.resellers&&e.resellers.length>0){if(n=e.resellers,rl((0,R.dh)(e.resellers)),o&&Oe.includes(o)&&n.find((function(e){var t,n;return"active"===(null===(t=e.resellerData)||void 0===t||null===(n=t.status)||void 0===n?void 0:n.toLowerCase())}))){var l=Pt("alreadyExistCannotProceed",{type:(0,R.WR)(o)});return Te[o]=l,zn(o,l),kt(l)}ce.length>0&&(pl(e.resellers[0],!1),r&&jt("".concat(r)))}else{var a=Pt("noDataFoundByValue");o&&Ce.includes(o)?(a=Pt("noDataFoundErrorThatMustExists",{type:(0,R.WR)(o)}),zn(o,a),Te[o]=a,kt(a)):jt(a),rl(null),n=null,se=[]}t(null,n)})).catch((function(e){kt((0,R.az)(e,"")),t(e,null)})).finally((function(){return Sn({state:!1,id:o})}))},sl=function(e,t){if(t&&t.widgetId){var n=t.widgetId,l=t.value;de.push(n),Ln(n,l)}},dl=function(){var e,t,n=!1,l=Dn[re],a=(null==St?void 0:St.errors)||{};if(null!=l&&l.customWidget&&(null===(e=Object.keys(St))||void 0===e?void 0:e.length)>0){var r=null==l?void 0:l.customWidget,i=St[r]||{},o=Object.values(i)||[];(null==o?void 0:o.length)>0&&(kt(null==o?void 0:o.join(", ")),n=!0)}else if((null===(t=Object.keys(a))||void 0===t?void 0:t.length)>0){var s=Object.values(a);(null==s?void 0:s.length)>0&&(kt(null==s?void 0:s.join(", ")),n=!0)}return n},ul=function(e,t){var n,a;t?(ie=(null===(n=Dn[re])||void 0===n?void 0:n.partialSubmit)&&!ht&&!l||!1,lt=!1,ht&&null!=ht&&ht.activeTab&&null!==(a=Dn[re])&&void 0!==a&&a.partialSubmit&&(ie=parseInt(null==ht?void 0:ht.activeTab)<parseInt(Dn[re].id)),(ie||Tt)&&Vn(),re++,Se=!l&&re!==On.length-1,Dt&&Dt(re),setTimeout((function(){Hn({})}),1e3)):(re=re>0?re-1:re,Dt&&Dt(re)),e()},cl=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return kn(),!t&&null!=yt&&yt.activeTab&&0!==yt.statusCode?tt=!!(parseInt("".concat(null==yt?void 0:yt.activeTab))<re):t||(tt=!1),t&&dl()?console.warn(" ☣️ Custom Widget errors => ",St):l||!t?ul(e,t):void An().then((function(n){var l=Object.values(n)||[],a=Object.keys(n),r=Ee[re],i=(0,R.Uk)(qn,Pt,{activeValidationRules:r,isUniqueFieldIds:Oe,isExistFieldIds:Ce,invalidFields:Te,controlableFields:ye,controlableFieldIDs:me,requiredFieldIds:ke,skipValidationIfHidden:Je}),o=i.errMsg,s=i.id,d=(null==r?void 0:r._nodes)||[];return l.length>0?(zn(a[0],l[0]),kt(l[0])):o&&(zn(s,o),d.includes(s))?kt(o):void ul(e,t)}))},vl=function(){if(dl())return console.warn(" ☣️ Custom Widget errors => ",St);lt=!1,qn.resellerType&&qn.resellerType===vt.resellerType||Ln("resellerType",vt.resellerType),An().then((function(e){var t=Object.values(e);if(t.length>0)kt(t[0]);else{var n,l=Object.values(Pe)||[];if((null===(n=Object.keys(l))||void 0===n?void 0:n.length)>0)return kt(l.join(", "));var a=(0,R.Uk)(qn,Pt,{activeValidationRules:ae,isUniqueFieldIds:Oe,isExistFieldIds:Ce,invalidFields:Te,controlableFields:ye,controlableFieldIDs:me,requiredFieldIds:ke,skipValidationIfHidden:Je}),r=a.errMsg,i=a.id;r?(zn(i,r),kt(r)):(ie=!1,lt=!0,Vn())}}))},ml=function(e){return e.toLowerCase().replace(/([-_][a-z])/g,(function(e){return e.toUpperCase().replace("-","").replace("_","")}))},pl=function(e,t){var n=e,l=n.additionalFields&&n.additionalFields.reduce((function(e,t){return e[Be[t.name]||t.name]=t.value,e}),{}),a=te({},qn),r=[];for(var i in ce){var o=ce[i],s=l&&l[o]||n[t?ml(o):o];if(a[o]=s||a[o],ue.includes(o)){var d=l&&l[o]||n[t?ml(o):o];d&&r.push(d)}}se=r,Un(a)},fl=function(e,t){hn(!0),(0,j.wm)({userId:e}).then((function(e){0===e.resultCode?(Nt(e),t&&t(null,e)):(kt(e),t&&t(e))})).catch((function(n){zn("userId",n.resultDescription||"userId: ".concat(e," is not unique")),kt(n),t&&t(n)})).finally((function(){return hn(!1)}))},gl=function(e,t){if(!l&&qe.length>0&&Object.values(Me).includes(t.id)){var n=te({},qn);for(var a in Me){var r=Me[a];qn[r]&&(n[a]=qn[r]),r===t.id&&(n[a]=e)}Object.keys(n).length>0&&Un(n)}if(it[t.id]&&e){var i=it[t.id],o=(be[t.id]||t.options||[]).find((function(t){return t.value===e}));Ln("".concat(i),(null==o?void 0:o.name)||e)}},hl=function(e,t,n){var l=ue.includes(t),a=xe.includes(t);l&&!a&&yl(e,t,n),ve.includes(t)&&!l&&Lt({widgetId:t,value:e},sl)},yl=function(e,t,n){n.validation&&n.validation.customerNIValidation?e&&(Sn({state:!0,id:t}),(0,j.OT)(e).then((function(e){if(0===e.resultCode&&e.customer){var n=e.customer,l={type:(0,R.WR)(t)};Nt(Pt("externalValidateSuccess",l)),pl(n,!0),Sn({state:!1,id:t})}else Sn({state:!1,id:t}),console.error(Pt("noDataFoundErrorThatMustExists",{type:(0,R.WR)(t)}))})).catch((function(e){Sn({state:!1,id:t}),console.error(Pt("noDataFoundErrorThatMustExists",{type:(0,R.WR)(t)}))}))):e&&e.length>0&&!se.includes(e)&&ol({additionalFields:[{name:t,value:e}],resellerData:{},widget:n},(function(n,l){l&&ve.includes(t)&&de.push(t),oe=l?t:"",n||l||!ve.includes(t)||Lt({widgetId:t,value:e},sl)}),{message:Pt("searchResellersFoundByCIN",{type:(0,R.WR)(t)}),widgetId:t})},bl=function(e,t,n){var l;if(Jn(e,n),Ae.length>0&&n)for(var a in _e){var r=_e[a];if(r.fields.includes(e)&&r.widget.validation.dataSource){var i=te({},r.widget),o=(0,R.kH)(r.widget.validation.dataSource,r.fields,te(te({},qn),{},(0,s.Z)({},e,n)));!o.includes("/${")&&o&&Rn(i,o)}}if(null!==(l=t.validation)&&void 0!==l&&l.anyAssociatedField){var d=t.validation.anyAssociatedField;hn(!0);var u="/dms/v1/template/dropdown/".concat(d,"?associatedFieldName=").concat(e,"&associatedFieldValue=").concat(n);(Object.keys(Ke)||[]).includes(u)||(0,j.qu)(u).then((function(e){if(ge.push(d),be[d]=[],e.values&&0!==e.values.length)e.values.forEach((function(e){be[d].push({value:e,name:e})})),Ke[u]=be[d];else{var t=ut.find((function(e){return e.id===d}));be[d]=null==t?void 0:t.options,kt("".concat(d.charAt(0).toUpperCase()+d.slice(1),": ").concat(e.resultDescription))}hn(!1)}))}},El=function(e){return(0,R.dh)(e).map((function(e){return{value:e.resellerId,name:"".concat(e.resellerName," ").concat(e.resellerId?"("+e.resellerId+")":"")}}))},Sl=function(e,t){e?Pe.userId=e:(delete Pe.userId,mn(t))},wl=function(e,t){var n,l=e.map((function(e){return e.id}));if(l&&"string"==typeof l[0]&&"none"===(null===(n=l[0])||void 0===n?void 0:n.toLowerCase())&&l.shift(),(l.includes("None")||l.includes("none"))&&(l=["None"]),$e.includes(t)){var a=Ge[t];be[a]=e}Wn({target:{value:l.join(","),name:t}})},Zl=function(e,t){Ln(t,e,!1)};return ut&&ut.length>0?m.createElement(m.Fragment,null,m.createElement(L.AddToListPopup,{open:Xt,setOpen:en,setData:function(e){if(e&&sn.widgetId){var t,n=sn.widgetId;if(delete Te[n],ke.includes(n)&&(null==e||!e.result)&&(null==e||null===(t=e.errData)||void 0===t?void 0:t.length)>0){var l=e.errData.find((function(e){return!!e}));l&&(Te[n]=l),l&&zn(n,l)}Ln(n,null==e?void 0:e.result)}else console.error(" 🧨 Something wrong while saving value for widget: ",e,sn)},loading:ct,data:sn}),m.createElement(X.default,{open:ln,onClose:function(){an(!1)},loading:ct,onOk:function(){qt.goBack()},dialogTitle:"".concat(Pt("cancelConfirmationTitle")),dialogDescription:"".concat(Pt("cancelConfirmationText")),okButtonText:Pt("yes"),closeButtonText:Pt("no")}),m.createElement(y.SeamlessStepper,{steps:On,components:{Control:function(e){var t,n=e.goNext,a=e.goPrev,r=e.disableFirst,i=e.disableLast;return m.createElement(w.Z,{display:"flex",flexDirection:"column"},m.createElement("div",{className:(0,b.default)(Mt.dividerSpacing)}),m.createElement(w.Z,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},le>1&&m.createElement("div",null,m.createElement(y.SeamlessButton,{onClick:function(){return function(e){return cl(e,!1)}(a)},disabled:r,id:"prevButtonRef",className:(0,b.default)(Mt.element),color:"primary",variant:"contained"},Pt("previous")),m.createElement(y.SeamlessButton,{className:(0,b.default)(Mt.element),onClick:function(){return function(e){return setTimeout((function(){return cl(e)}),100)}(n)},disabled:i||tt,id:"nextButtonRef",color:"primary",variant:"contained"},null===(t=Dn[re])||void 0===t||!t.partialSubmit||l||c?Pt("next"):Pt("save&Next"))),c?m.createElement(y.SeamlessButton,{onClick:function(){return qt.goBack()},className:(0,b.default)(Mt.element),color:"default",variant:"contained",disabled:ct||Se},Pt("cancel")):m.createElement("div",null,m.createElement(y.SeamlessButton,{onClick:function(){return an(!0)},className:(0,b.default)(Mt.element),color:"primary",variant:"contained"},Pt("cancelButton")),m.createElement(y.SeamlessButton,{onClick:vl,className:(0,b.default)(Mt.element),color:"primary",variant:"contained",disabled:ct||Se},Pt("submitButton")))),m.createElement("div",{className:(0,b.default)(Mt.dividerSpacing)}),ct&&m.createElement(I.Z,null))}}},Dn&&Dn.length>0&&Dn.map((function(e,t){var n;return m.createElement(Z.Z,{key:e.id||t,container:!0,className:Mt.spacingTop},m.createElement(Z.Z,{container:!0,spacing:3},m.createElement(Z.Z,{item:!0,xs:12},m.createElement(O.Z,{variant:"subtitle1",color:"primary"},e.title||"Reseller Template"))),m.createElement(Z.Z,{container:!0,className:Mt.spacingTop},"users[]"===(null===(n=e.widgets[0])||void 0===n?void 0:n.fieldType)&&Ne.length>0&&m.createElement(H.Z,{userFields:Ne,editView:l,loading:ct||gn,resellerData:vt,isUserIdUniqueHandler:fl,dataHandler:Sl,data:vn}),null!=e&&e.customWidget&&bt&&bt[null==e?void 0:e.customWidget]?m.createElement(m.Fragment,{key:e.id},bt[null==e?void 0:e.customWidget]):m.createElement(Z.Z,{container:!0,spacing:3,className:Mt.spacingBottom},e.widgets.map((function(e,t){var n,a,i,s,u=null,v=e.id,p=e.type,f=e.placeholder||(0,R.WR)(v||""),g=e.defaultValue;e.defaultValue&&e.defaultValue.startsWith("${")&&e.defaultValue.endsWith("}")&&(g="");var h=qn[v]||g||"",E=_n[v],w="motte_de_passe"===v&&"true"===qn.one_time_password&&"false"===qn.motte_de_passe_flag;if(["resellerType"].includes(v)||w)return null;if(me.length>0&&me.includes(v)){var O=ye[v];if((0,R.DU)(O,qn))return Je=Qe,null;Je.includes(v)&&Je.splice(Je.indexOf(v),1)}var N="password"===e.validation||"password"===(null===(n=e.validation)||void 0===n?void 0:n.type);we&&N&&de.push(v);var W=l&&!e.mutable,_=c||W||"motte_de_passe_flag"===v&&!0===Gn||de.includes(v);if(["dropdown","radio"].includes(p)){var A="radio"!==p?[{value:"",key:Pt("pleaseSelect_",{fieldName:e.placeholder})}]:[],L=(0,d.Z)(e.options||[]);ge.includes(v)&&be[v]&&(L=be[v]);var H=(0,R.MN)(L,qn),K=[].concat(A,(0,d.Z)((null==H?void 0:H.map((function(e){return{key:e.name||e.key,value:e.value}})))||[]));u=m.createElement(y.SeamlessDropDown,{id:"".concat(v,"-drop-down"),error:!!_n[v],disabled:_,fullWidth:!0,required:e.required&&Zt,className:Mt.element,label:f,helperText:E||Pt("pleaseSelect_",{fieldName:f}),options:K,name:"".concat(v),value:"".concat(h),onChange:function(t){var n;null!=e&&null!==(n=e.validation)&&void 0!==n&&n.associatedFieldFilterUrl?function(e,t){var n,l,a,r=null==t||null===(n=t.validation)||void 0===n?void 0:n.anyAssociatedField,i=null==t||null===(l=t.validation)||void 0===l||null===(a=l.associatedFieldFilterUrl)||void 0===a?void 0:a.replace("${regionName}",e);hn(!0),(0,j.qu)(i).then((function(e){var n=(null==e?void 0:e.values)||(null==e?void 0:e.data);if(n&&n.length>0){ge.includes(r)||ge.push(r),be[r]=[];var l=t.validation.parseFromDataSource||{};n.forEach((function(e){var t="object"===(0,o.Z)(e);be[r].push({value:t?e[null==l?void 0:l.value]:e,name:t?e[null==l?void 0:l.name]:e})}))}kn(),hn(!1)})).catch((function(e){hn(!1)}))}(t.target.value,e):bl(v,e,t.target.value),gl(t.target.value,e),Wn(t)}})}else if(["autocomplete"].includes(p)){var G=[{value:"",key:Pt("pleaseSelect_",{fieldName:e.placeholder})}],J=(0,d.Z)(e.options||[]);ge.includes(v)&&be[v]&&(J=be[v]);var X=(0,R.MN)(J,qn),ee=[].concat(G,(0,d.Z)((null==X?void 0:X.map((function(e){return{key:e.name||e.key,value:e.value}})))||[])),ne=ee.find((function(e){return e.value==h}))||ee[0];u=m.createElement(C.ZP,{id:"".concat(v,"-auto-complete"),disabled:_,fullWidth:!0,className:(0,b.default)(Mt.element,Mt.autoElement),options:ee,"aria-required":e.required&&Zt,getOptionLabel:function(e){return e.key},defaultValue:ne,loading:En.state&&En.id===v,getOptionSelected:function(e,t){return e.value==h},size:"small",value:ne,onChange:function(t,n){var l=(null==n?void 0:n.value)||"";bl(v,e,l),gl(l,e),Wn({target:{value:l,name:v}})},renderInput:function(t){return m.createElement(T.Z,(0,r.Z)({},t,{name:"".concat(v),error:!!_n[v],variant:"filled",label:f,required:e.required&&Zt,helperText:E||Pt("pleaseSelect_",{fieldName:f})}))}})}else if("label"===p)u=null;else if("multiselect"===p){var le;ge.includes(v)&&be[v]&&(e.options=be[v]);var ae=e.options?(0,R.MN)(e.options,qn):[],re=(0,d.Z)(ae.map((function(e){return{name:e.name||e.key,id:"".concat(e.value)}}))||[]);if(null!==(le=e.validation)&&void 0!==le&&le.enableAllOption&&re.unshift({name:Pt("all"),id:"all"}),e.validation.checkboxFormate){var ie,se=h&&"string"==typeof h?null==h?void 0:h.split(","):[],ce=re.filter((function(e){return null==se?void 0:se.includes(e.id)})),ve={};if(null!==(ie=e.validation)&&void 0!==ie&&ie.additionalFilters){var pe,fe,he=e.validation.additionalFilters||{},Ee=he.filterKey,Se=he.filterBy;he.optionsOnly?ve[Ee]=null===(pe=(0,R.MN)(at[Se],qn))||void 0===pe||null===(fe=pe.map((function(e){return e.value})))||void 0===fe?void 0:fe.join(","):ve[Ee]=qn[Se]}u=m.createElement(z.iS,{options:re,loading:ct,name:v,placeholder:f,selectedItems:ce,required:e.required&&Zt,searchByField:e.validation.searchByKey,handleSelection:function(t){return function(e,t){var n;if(null!=e&&e.data&&(null===(n=Object.keys(e.data))||void 0===n?void 0:n.length)>0){var l,a=(null===(l=t.validation)||void 0===l?void 0:l.dependentField)||t.id;Ln(a,Object.keys(e.data))}}(t,e)},isOptionClickable:e.validation.isOptionClickable,additionalFilters:ve,label:f,handleChange:function(t){bl(v,e,t.map((function(e){return e.id})).join(",")),wl(t,v)}})}else{var De=h?h.split(",").map((function(e){return{id:e,name:e}})):[];u=m.createElement(m.Fragment,null,m.createElement(q.default,{data:re,loading:ct,disabled:_,selectedItems:De,label:f,required:e.required&&Zt,handleChange:function(t){bl(v,e,t.map((function(e){return e.id})).join(",")),wl(t,v)}}),En.state&&En.id===v&&m.createElement(I.Z,null))}}else if("date"===p){var ke,Ne=null===(ke=e.validation)||void 0===ke?void 0:ke.minDate,Re=et[v],Pe="";!Ne||Ne.startsWith("${")||Ne.endsWith("}")?Ne&&Ne.startsWith("${")&&Ne.endsWith("}")&&(Pe=qn[Re]?qn[Re]:(0,R.tm)("0")):Pe=(0,R.tm)(Ne),u=m.createElement(x.M,{utils:k.Z},m.createElement(F.e,(0,r.Z)({error:!!_n[v],className:(0,b.default)(Mt.element),views:["year","month","date"],fullWidth:!0,autoOk:!0,openTo:il,format:"yyyy-MM-dd",required:e.required&&Zt,variant:"inline",inputProps:te({},e.validation.inputProps||{}),margin:"normal",id:"".concat(v,"-datepicker"),label:!h&&f,helperText:E||f,name:"".concat(v)},Ne&&Pe&&{minDate:new Date(Pe).getTime()},{value:null!=h?h:"",onChange:function(e){return function(e,t,n){if("Invalid Date"==e)zn(t,Pt("invalidDate","".concat(n," is not valid date")));else{var l=Object.values(et)||[],a=Object.keys(et)||[],r=l.indexOf(t);l.length>0&&r>-1&&a[r]&&Ln("".concat(a[r]),e);var i=Vt(e,"YYYY-MM-DD");Wn({target:{value:i,name:t}})}}(e,v,f)},KeyboardButtonProps:{"aria-label":"change date"},disabled:_})))}else if("file"===p)u=m.createElement(m.Fragment,null,m.createElement(V(),{name:v,value:h,label:f,onChange:Wn,resourceType:"agent"}),h&&Pt("uploadSuccessful"),En.state&&En.id===v&&m.createElement(I.Z,null));else if("taginput"===(null==p?void 0:p.toLowerCase()))u=m.createElement(Q.Z,{tagDataHandler:function(e){return function(e,t){var n;(!qn[t]||qn[t]&&e&&(null===(n=qn[t])||void 0===n?void 0:n.length)!==(null==e?void 0:e.length))&&Ln(t,e)}(e,v)},label:f,value:h,validation:e.validation,required:e.required,placeholder:f});else if(["text","number","email","password"].includes(p)){var Be,Me=ue.includes(v),qe=(0,R.X2)(null===(Be=e.validation)||void 0===Be?void 0:Be.inputProps,qn);u=m.createElement(m.Fragment,null,m.createElement(y.SeamlessInput,(0,r.Z)({id:"".concat(v,"-input"),key:"".concat(v,"-input"),error:!!_n[v],disabled:_,type:p,inputProps:te({},qe),fullWidth:!0,required:e.required&&Zt,className:Mt.element,label:f,helperText:E||Pt("pleaseEnter_",{fieldName:f}),name:"".concat(v),value:h},N&&{autoComplete:"new-password"},{onChange:Wn,onBlur:function(){return setTimeout((function(){return function(e,t,n){var l,a;((null===(l=Object.keys(qn))||void 0===l?void 0:l.length)||0)<((null===(a=Object.keys(Y))||void 0===a?void 0:a.length)||0)&&Un(te(te({},Y),qn)),Jn(t,e),xe.includes(t)||delete Te[t],gl(e,n),je.includes(t)&&e&&fl(e),Ze.includes(t)?(Sn({state:!0,id:t}),At(te(te({},qn),{},{validation:Ie[t],widgetId:t}),(function(l,a){var r={type:(0,R.WR)(t)};if(!l&&0===a.resultCode)return Nt(Pt("externalValidateSuccess",r)),Sn({state:!1,id:t}),hl(e,t,n);var i=(0,R.az)(l,Pt("externalValidateError",r));return Te[t]=i,zn(t,i),Sn({state:!1,id:t}),kt(i)}))):(Sn({state:!1,id:t}),hl(e,t,n))}(h,v,e)}),200)},onFocus:function(){return function(e){if(xe.includes(e)&&!Fe.includes(e)){var t,n=qn[e];Fe.push(e);var l,a=ut.find((function(t){return t.id===e})),r={widgetId:e,values:(null==n?void 0:n.split(","))||[""]};a&&null!==(t=a.validation)&&void 0!==t&&t.searchByKey&&(r.searchByKey=null===(l=a.validation)||void 0===l?void 0:l.searchByKey),Ce.includes(e)&&(r.isSearchable=ue.includes(e),r.isUnique=Oe.includes(e),r.mustExist=Ce.includes(e)),dn(r),en(!0)}else Fe.splice(0,Fe.length)}(v)}})),gn&&(Oe.includes(v)||Oe.includes(v))&&m.createElement(I.Z,null),En.state&&En.id===v&&m.createElement(I.Z,null),!En.state&&!_&&oe!==v&&Me&&m.createElement(D.ZP,{title:"".concat(Pt("searchForResult"))},m.createElement(y.SeamlessButton,{className:(0,b.default)(Mt.validateBtn)},m.createElement(U.Z,{fontSize:"small"}))),al&&Me&&oe===v&&m.createElement(m.Fragment,null,m.createElement(D.ZP,{title:"".concat(Pt("searchResellerCIN"))},m.createElement(y.SeamlessButton,{className:(0,b.default)(Mt.validateBtn),onClick:function(){return tl(!0)}},m.createElement(S.Z,null))),m.createElement(P.SearchResellerChildrenModal,{open:el,setOpen:tl,loading:ct,data:al})))}return u?("parentResellerId"===v&&(u=m.createElement(B.default,{name:v,type:p,mutable:e.mutable,required:e.required&&Zt,value:h,label:f,helperText:E||Pt("pleaseSelect_",{fieldName:f}),handleChange:function(e){e.target?Wn(e):Wn({target:{value:e.value,name:v}})},disabled:_,resellerType:vt.resellerType,errors:_n,editView:l,canChangeResellerType:xt})),"roleId"===v&&"dropdown"===p&&(u=m.createElement(z.Uh,{name:v,classes:(0,b.default)(Mt.element),value:h,defaultKey:"importId",label:f,required:e.required&&Zt,disabled:_,errors:_n,handleChange:Wn})),"contractKey"!==v&&"contractId"!==v||"dropdown"!==p||(u=m.createElement(M.default,{name:v,errors:_n,resellerType:vt.resellerType,disabled:_,required:e.required&&Zt,helperText:E||Pt("selectContractType"),label:f,value:h,handleChange:Wn})),"domainCode"===v&&"dropdown"===p&&(u=m.createElement($.Z,{name:v,errors:_n,resellerType:vt.resellerType,disabled:_,required:e.required&&Zt,helperText:E||Pt("selectDomainCode"),label:f,value:h,assignDomainValue:Zl,handleChange:function(e){e.target?Wn(e):Wn({target:{value:e.value,name:v}})}})),"domainName"===v&&"dropdown"===p&&(u=m.createElement($.Z,{name:v,errors:_n,resellerType:vt.resellerType,disabled:_,required:e.required&&Zt,helperText:E||Pt("selectDomainName"),label:f,value:h,assignDomainValue:Zl,handleChange:function(e){e.target?Wn(e):Wn({target:{value:e.value,name:v}})}})),m.createElement(m.Fragment,{key:v},(null===(a=e.validation)||void 0===a?void 0:a.newLine)&&m.createElement(Z.Z,{item:!0,sm:12,style:{padding:0},xs:12}),m.createElement(Z.Z,{item:!0,xs:12,sm:(null===(i=e.validation)||void 0===i?void 0:i.gridColumn)||4},u),(null===(s=e.validation)||void 0===s?void 0:s.lineBreak)&&m.createElement(Z.Z,{item:!0,sm:12,style:{padding:0},xs:12}))):null})))))})))):null}))},27990:(e,t,n)=>{"use strict";n.d(t,{Z:()=>j});var l=n(7560),a=n(51119),r=n(11746),i=n(74315),o=n(2411),s=n.n(o),d=n(79692),u=n(12420),c=n(91955),v=n(70773),m=n(32950),p=n(61564),f=n(75958),g=n(19258),h=n(6277),y=n(77790),b=n.n(y),E=n(60905),S=n(67358),w=n(80030),Z=n(37413),I=n(91163),T=n(52833),D=n(88591),O=n(4179),C=n(82043),x=n(29609);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=window.config.openCalendarWith||"year",R=(0,d.Z)((function(e){return(0,u.Z)({mainSection:{fontSize:e.typography.fontSize},element:{marginRight:e.spacing(1),marginBottom:e.spacing(2)},shrink:{width:"95%"},validateBtn:{float:"right",top:-50,padding:0}})}));const j=function(e){var t,n,a,o,d,u,y=e.widget,F=e.handleChange,j=e.values,P=void 0===j?{}:j,B=e.errors,M=void 0===B?{}:B,q=e.error,W=void 0===q?"":q,V=e.controlableFields,_=void 0===V?{}:V,A=e.searchByFields,L=void 0===A?{}:A,U=e.overrideValue,z=void 0===U?"":U,H=e.disabledMuteableRule,K=void 0!==H&&H,$=e.editView,G=void 0!==$&&$,Y=e.disabledPwdFlag,J=void 0!==Y&&Y,Q=e.validationRequired,X=void 0===Q||Q,ee=e.disabledView,te=void 0!==ee&&ee,ne=e.controlableFieldIDs,le=void 0===ne?[]:ne,ae=e.disabledFieldIds,re=void 0===ae?[]:ae,ie=e.dataSourceFieldIDs,oe=void 0===ie?[]:ie,se=e.dataSourceFields,de=void 0===se?{}:se,ue=e.changeTypeEnabled,ce=void 0!==ue&&ue,ve=e.loading,me=void 0!==ve&&ve,pe=e.cinLoading,fe=void 0!==pe&&pe,ge=e.searchByFieldsId,he=void 0===ge?[]:ge,ye=e.searchableFieldsId,be=void 0===ye?[]:ye,Ee=e.resultFoundForWidgetID,Se=void 0===Ee?"":Ee,we=e.searchResellersData,Ze=void 0===we?null:we,Ie=e.resellerData,Te=void 0===Ie?{}:Ie,De=e.handleDropdownAssociatedFields,Oe=e.dateInputHandler,Ce=e.blurHandler,xe=e.focusHandler,Fe=e.handleMultiSelectCheckboxSelection,ke=R(),Ne=(0,x.useTranslation)().t,Re=s().useState(!1),je=(0,i.Z)(Re,2),Pe=je[0],Be=je[1],Me=function(e,t){var n,l=e.map((function(e){return e.id}));if(l&&"string"==typeof l[0]&&"none"===(null===(n=l[0])||void 0===n?void 0:n.toLowerCase())&&l.shift(),(l.includes("None")||l.includes("none"))&&(l=["None"]),oe.includes(t)){var a=de[t];L[a]=e}F({target:{value:l.join(","),name:t}})},qe=(null===(t=y.validation)||void 0===t?void 0:t.shrink)||0,We=null,Ve=y.id,_e=y.type,Ae=y.placeholder||(0,c.WR)(Ve||""),Le=y.defaultValue;Le&&Le.startsWith("${")&&Le.endsWith("}")&&(Le="");var Ue=P[Ve]||z||Le||"",ze=W||M[Ve],He="motte_de_passe"===Ve&&"true"===P.one_time_password&&"false"===P.motte_de_passe_flag;if(["resellerType"].includes(Ve)||He)return null;if(le.length>0&&le.includes(Ve)){var Ke=_[Ve];if((0,c.DU)(Ke,P))return null}var $e="password"===y.validation||"password"===(null===(n=y.validation)||void 0===n?void 0:n.type);ce&&$e&&re.push(Ve);var Ge=G&&!y.mutable,Ye=te||Ge||"motte_de_passe_flag"===Ve&&!0===J||re.includes(Ve);if(K&&(Ye=!1),["dropdown","radio"].includes(_e)){var Je,Qe="radio"!==_e?[{value:"",key:Ne("pleaseSelect_",{fieldName:y.placeholder})}]:[],Xe=(0,r.Z)(y.options||[]);he.includes(Ve)&&L[Ve]&&(Xe=L[Ve]);var et=[].concat(Qe,(0,r.Z)((null===(Je=Xe)||void 0===Je?void 0:Je.map((function(e){return{key:e.name,value:e.value}})))||[]));We=s().createElement(v.SeamlessDropDown,{id:"".concat(Ve,"-drop-down"),error:!!ze,disabled:Ye,fullWidth:!0,required:y.required&&X,className:(0,h.default)(ke.element,qe&&ke.shrink),label:Ae,helperText:ze||Ne("pleaseSelect_",{fieldName:Ae}),options:et,name:"".concat(Ve),value:"".concat(Ue),onChange:function(e){De?De(Ve,y,e.target.value):console.warn("☢️ handleDropdownAssociatedFields  is missing in props ☢️"),F(e)}})}else if("label"===_e)We=null;else if("multiselect"===_e){var tt,nt;he.includes(Ve)&&L[Ve]&&(y.options=L[Ve]);var lt=(null===(tt=y.options)||void 0===tt?void 0:tt.map((function(e){return{name:(null==e?void 0:e.name)||e.key,id:e.value}})))||[];if(null!==(nt=y.validation)&&void 0!==nt&&nt.enableAllOption&&lt.unshift({name:Ne("all"),id:"all"}),y.validation.checkboxFormate){var at,rt=Ue&&"string"==typeof Ue?null===(at=Ue)||void 0===at?void 0:at.split(","):[],it=lt.filter((function(e){return null==rt?void 0:rt.includes(e.id)}));We=s().createElement(O.iS,{options:lt,loading:me,name:Ve,placeholder:Ae,selectedItems:it,required:y.required&&X,searchByField:y.validation.searchByKey,handleSelection:function(e){return Fe&&Fe(e,y)},isOptionClickable:y.validation.isOptionClickable,label:Ae,handleChange:function(e){return Me(e,Ve)}})}else{var ot=Ue?Ue.split(",").map((function(e){return{id:e,name:e}})):[];We=s().createElement(m.default,{data:lt,loading:me,disabled:Ye,selectedItems:ot,label:Ae,required:y.required&&X,handleChange:function(e){return Me(e,Ve)}})}}else if("date"===_e)Ue=Ue||new Date,We=s().createElement(p.M,{utils:g.Z},s().createElement(f.e,{error:!!ze,className:(0,h.default)(ke.element),disableToolbar:!0,fullWidth:!0,autoOk:!0,openTo:N,views:["year","month","date"],format:"yyyy/MM/dd",inputProps:k({},y.validation.inputProps||{}),required:y.required&&X,variant:"inline",margin:"normal",id:"".concat(Ve,"-datepicker"),label:Ae,helperText:ze||Ae,name:"".concat(Ve),value:Ue,onChange:function(e){return Oe?Oe(e,Ve,Ae):console.warn("☢️ dateInputHandler is missing in props ☢️")},KeyboardButtonProps:{"aria-label":"change date"},disabled:Ye}));else if("file"===_e)We=s().createElement(s().Fragment,null,s().createElement(b(),{name:Ve,value:Ue,label:Ae,onChange:F,resourceType:"agent"}),Ue&&Ne("uploadSuccessful"));else if(["text","number","email","password"].includes(_e)){var st=be.includes(Ve);We=s().createElement(s().Fragment,null,s().createElement(v.SeamlessInput,(0,l.Z)({id:"".concat(Ve,"-input"),key:"".concat(Ve,"-input"),error:!!ze,disabled:Ye,type:_e,inputProps:k({},y.validation.inputProps||{}),fullWidth:!0,required:y.required&&X,className:(0,h.default)(ke.element,qe&&ke.shrink),label:Ae,helperText:ze||Ne("pleaseEnter_",{fieldName:Ae}),name:"".concat(Ve),value:Ue},$e&&{autoComplete:"new-password"},{onChange:F,onBlur:function(){return Ce&&Ce(Ue,Ve,y)},onFocus:function(){return xe&&xe(Ve)}})),fe&&st&&s().createElement(S.Z,null),!fe&&!Ye&&Se!==Ve&&st&&s().createElement(w.ZP,{title:"".concat(Ne("searchForResult"))},s().createElement(v.SeamlessButton,{className:(0,h.default)(ke.validateBtn)},s().createElement(Z.Z,{fontSize:"small"}))),Ze&&st&&Se===Ve&&s().createElement(s().Fragment,null,s().createElement(w.ZP,{title:"".concat(Ne("searchResellerCIN"))},s().createElement(v.SeamlessButton,{className:(0,h.default)(ke.validateBtn),onClick:function(){return Be(!0)}},s().createElement(I.Z,null))),s().createElement(T.SearchResellerChildrenModal,{open:Pe,setOpen:Be,loading:me,data:Ze})))}if(!We)return null;"parentResellerId"===Ve&&(We=s().createElement(D.default,{name:Ve,required:y.required&&X,value:Ue,label:Ae,helperText:ze||Ne("pleaseSelect_",{fieldName:Ae}),handleChange:F,disabled:Ye,resellerType:Te.resellerType,errors:M})),"roleId"===Ve&&"dropdown"===_e&&(We=s().createElement(O.Uh,{name:Ve,classes:(0,h.default)(ke.element),value:Ue,defaultKey:"importId",required:y.required&&X,disabled:Ye,errors:M,handleChange:F})),"contractKey"!==Ve&&"contractId"!==Ve||"dropdown"!==_e||(We=s().createElement(C.default,{name:Ve,errors:M,resellerType:Te.resellerType,disabled:Ye,required:y.required&&X,helperText:ze||Ne("selectContractType"),label:Ae,value:Ue,handleChange:F}));var dt=(null===(a=y.validation)||void 0===a?void 0:a.gridColumn)&&parseInt(null===(o=y.validation)||void 0===o?void 0:o.gridColumn)||4;return s().createElement(s().Fragment,{key:Ve},(null===(d=y.validation)||void 0===d?void 0:d.newLine)&&s().createElement(E.Z,{item:!0,sm:12,style:{padding:0},xs:12}),s().createElement(E.Z,{item:!0,xs:12,sm:dt},We),(null===(u=y.validation)||void 0===u?void 0:u.lineBreak)&&s().createElement(E.Z,{item:!0,sm:12,style:{padding:0},xs:12}))}},85624:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var l=n(74315),a=n(2411),r=n.n(a),i=n(96545),o=n(19721),s=n(91955),d=n(29609);const u=function(e){var t=r().useState(!1),n=(0,l.Z)(t,2),a=n[0],u=n[1],c=r().useState(e),v=(0,l.Z)(c,2),m=v[0],p=v[1],f=(0,o.useSnackbar)().enqueueSnackbar,g=(0,d.useTranslation)().t;return{data:m,isLoading:a,generateIdByFieldName:r().useCallback((function(e,t){var n=e.widgetId,l=e.value,a=void 0===l?"":l;if(!n)return console.error(" ☹️ widgetID is missing to generate its value => ",e);var r={idType:n,params:{regionPrefix:a}};u(!0),(0,i.CQ)(r).then((function(e){0===e.resultCode&&e.generatedIdType?(p({widgetId:n,value:e.generatedId}),t(null,{widgetId:n,value:e.generatedId})):f("".concat(e.resultDescription),{variant:"warning"}),p(null),t(e)})).catch((function(e){f((0,s.az)(e,g("anErrorOccurred")),{variant:"error"}),p(null),t(e)})).finally((function(){return u(!1)}))}),[])}}},17120:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>m});var l=n(74315),a=n(2411),r=n.n(a),i=n(96545),o=n(19721),s=n(91955),d=n(29609),u=n(23664),c=n(78205),v=n.n(c);const m=function(e){var t=r().useState(!1),n=(0,l.Z)(t,2),a=n[0],c=n[1],m=r().useState(e),p=(0,l.Z)(m,2),f=p[0],g=p[1],h=((0,o.useSnackbar)().enqueueSnackbar,(0,d.useTranslation)().t),y=(0,u.Z)().showErrorMessage,b=v()().dateFormatter;return{data:f,isLoading:a,validateRequest:r().useCallback((function(e,t){var n,l,a,r,o,d,u=e.widgetId,v=void 0===u?"nationId":u,m=e.validation,p=void 0===m?{}:m,f=p.type||1,E=p.dob||"",S=E.split(".");E=S.length>1?S[1]:S[0];var w=p.fname||"",Z=w.split(".");w=Z.length>1?Z[1]:Z[0];var I=p.mname||"",T=I.split(".");I=T.length>1?T[1]:T[0];var D=p.lname||"",O=D.split(".");D=O.length>1?O[1]:O[0];var C=v.includes("extraFields."),x=v.split(".")||[];x.length>1&&(v=x[1]);var F=e[v]||(null==e?void 0:e.extraFields[v]);if(!F)return console.error("☹️ Invalid nationalID is being passed",e);var k=(C?null==e?void 0:e.extraFields[E]:e[E])||(null==e?void 0:e.dob)||(null==e?void 0:e.dateOfBirth)||(null==e||null===(n=e.extraFields)||void 0===n?void 0:n.dob)||(null==e||null===(l=e.extraFields)||void 0===l?void 0:l.dateOfBirth);if(!k)return y(h("dobRequired"));k=b(k);var N={customerId:"SFC",operationId:"IPRSREQUEST",ersReference:"123456788",additionalFields:{docType:f,docNumber:F,firstName:(C?null==e?void 0:e.extraFields[w]:e[w])||(null==e?void 0:e.name)||(null==e?void 0:e.firstName)||(null==e||null===(a=e.extraFields)||void 0===a?void 0:a.firstName)||"",middleName:(C?null==e?void 0:e.extraFields[I]:e[I])||(null==e?void 0:e.otherName)||(null==e?void 0:e.middleName)||(null==e||null===(r=e.extraFields)||void 0===r?void 0:r.otherName)||(null==e||null===(o=e.extraFields)||void 0===o?void 0:o.middleName)||"",lastName:(C?null==e?void 0:e.extraFields[D]:e[D])||(null==e?void 0:e.lastName)||(null==e||null===(d=e.extraFields)||void 0===d?void 0:d.lastName)||"",dateOfBirth:k}};c(!0),(0,i.NF)(N).then((function(e){g(e),t(null,e)})).catch((function(e){y((0,s.az)(e,h("anErrorOccurred"))),t(e)})).finally((function(){return c(!1)}))}),[])}}},96407:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var l=n(51119),a=n(74315),r=n(2411),i=n.n(r),o=n(96545),s=n(29609),d=n(23664);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const v=function(){var e=i().useState({loading:!1,data:null}),t=(0,a.Z)(e,2),n=t[0],l=t[1],r=(0,d.Z)().showErrorMessage;return(0,s.useTranslation)().t,{data:n,getUserDetails:i().useCallback((function(e,t){if(!e)return console.warn("☢️ => Error get reseller info query params are missing!");var n=c(c({},"string"==typeof e?{dealerID:{id:e,type:"RESELLERID"}}:e),{},{fetchAccountBalanceInformation:!0});l({loading:!0,data:null}),(0,o.gH)(n).then((function(e){0===e.resultCode?l({loading:!1,data:e.resellerInfo}):r(e),t&&t(null,e)})).catch((function(e){l({loading:!1,data:null}),r(e),t&&t(e)}))}),[]),addMemberToGroup:function(e,t){if(!e.groupStartDate||!e.groupEndDate)return r("Group start OR end is missing!");var n=[];e.resellerMSISDN&&n.push({dataName:"msisdn",dataValue:e.resellerMSISDN}),e.email&&n.push({dataName:"email",dataValue:e.email});var l=(new Date).toISOString(),a=new Date(e.groupStartDate).toISOString().split("T")[0]===l.split("T")[0]?l:new Date(e.groupStartDate).toISOString(),i="".concat(new Date(e.groupEndDate).toISOString().split("T")[0],"T23:59:59.999Z"),s={members:[{name:e.name,userId:e.resellerId,userIdType:e.resellerType,memberType:"member",status:"active",effectiveFrom:a,effectiveUntil:i,data:n}]};(0,o.fZ)(e.groupId,s).then((function(e){if(0!==e.resultCode)throw new Error(e.resultDescription||e.resultMessage);t&&t(null,e)})).catch((function(e){r(e),t&&t(e)}))},deleteMemberGroup:function(e,t){var n=e.groupId,l=e.memberId;(0,o.Ah)(n,l).then((function(e){0===e.resultCode?t&&t(null,e):t&&t(e)})).catch((function(e){r(e),t&&t(e)}))}}}},91163:(e,t,n)=>{"use strict";var l=n(13645),a=n(87908);t.Z=void 0,a(n(88901));var r=l(n(2108)),i=n(52322),o=(0,r.default)((0,i.jsx)("path",{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"}),"FormatListNumbered");t.Z=o},37413:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r}),n(88901);var l=n(3752),a=n(52322);const r=(0,l.Z)((0,a.jsx)("path",{d:"M22 5.18L10.59 16.6l-4.24-4.24 1.41-1.41 2.83 2.83 10-10L22 5.18zM12 20c-4.41 0-8-3.59-8-8s3.59-8 8-8c1.57 0 3.04.46 4.28 1.25l1.45-1.45C16.1 2.67 14.13 2 12 2 6.48 2 2 6.48 2 12s4.48 10 10 10c1.73 0 3.36-.44 4.78-1.22l-1.5-1.5c-1 .46-2.11.72-3.28.72zm7-5h-3v2h3v3h2v-3h3v-2h-3v-3h-2v3z"}),"AddTask")},59544:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r}),n(88901);var l=n(3752),a=n(52322);const r=(0,l.Z)((0,a.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")}}]);