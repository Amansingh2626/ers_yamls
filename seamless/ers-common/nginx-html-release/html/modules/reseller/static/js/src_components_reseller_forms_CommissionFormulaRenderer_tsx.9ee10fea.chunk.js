(self.webpackChunk_unified_reseller=self.webpackChunk_unified_reseller||[]).push([["src_components_reseller_forms_CommissionFormulaRenderer_tsx"],{15713:(e,n,i)=>{"use strict";i.r(n),i.d(n,{default:()=>N});var t=i(7560),a=i(11746),l=i(51119),o=i(74315),r=i(2411),c=i.n(r),d=i(79692),s=i(12420),u=i(60905),m=i(61837),v=i(90436),p=i(27990),f=i(29609),g=i(23664),h=i(24389),b=i(6277),E=i(91955),y=(i(88901),i(3752)),w=i(52322);const C=(0,y.Z)((0,w.jsx)("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"ControlPoint"),Z=(0,y.Z)((0,w.jsx)("path",{d:"M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"RemoveCircleOutlineOutlined");function D(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function _(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?D(Object(i),!0).forEach((function(n){(0,l.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):D(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var k=(0,d.Z)((function(e){return(0,s.Z)({mainSection:{minHeight:e.spacing(60),width:"100%"},tbSpace:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},removeSlab:{display:"flex",flexDirection:"row",justifyContent:"flex-end"},rightContent:{textAlign:"right"},borderBtm:{borderBottom:1,marginBottom:e.spacing(1),paddingBottom:e.spacing(1)},btn:{float:"right",textTransform:"capitalize",marginBottom:e.spacing(2)},leftSpacing:{marginLeft:e.spacing(2)},rightSpacing:{marginRight:e.spacing(2)},axis:{paddingTop:e.spacing(3),paddingBottom:e.spacing(3),paddingLeft:e.spacing(2),paddingRight:e.spacing(2),backgroundColor:"#beeaff2b",margin:e.spacing(1),borderRadius:"2%",width:"95%",minHeight:500,alignContent:"flex-start"},element:{marginTop:e.spacing(2)},topSpace:{marginTop:e.spacing(2)},bottomSpace:{marginBottom:e.spacing(2)},shrink:{width:"95%"},pullRight:{float:"right"},tile:{display:"flex",justifyContent:"space-between"}})})),S={};const N=function(e){var n,i,r,d,s,y,w,D=e.templateData,N=e.editView,P=e.dataHandler,T=(e.isCloning,e.campaignData),O=e.componentState,x=e.data,R=k(),F=(0,f.useTranslation)().t,j=c().useState(_({},x)),I=(0,o.Z)(j,2),V=I[0],A=I[1],q=c().useState([]),B=(0,o.Z)(q,2),z=B[0],M=B[1],H=c().useState(),L=(0,o.Z)(H,2),U=L[0],W=L[1],K=(0,g.Z)(),G=K.showErrorMessage,$=K.showInfoMessage,J=(null==O||null===(n=O.values)||void 0===n?void 0:n.includedRetailers.length)>0?[].concat((0,a.Z)(null==O||null===(i=O.values)||void 0===i?void 0:i.retailerTypes.split(",")),["other"]):null==O||null===(r=O.values)||void 0===r?void 0:r.retailerTypes.split(",");c().useEffect((function(){}),[]);var Q=c().useMemo((function(){var e,n,i,t=[],a={},l=[],o=[],r=[],c=[],d=[],s=[],u=[],m={},v={},p=_({},null==D?void 0:D.sectionProps),f=[],g={};return null==D||null===(e=D.widgets)||void 0===e||e.forEach((function(e){var n,i;f.push(e.id),e.required&&(t.push(e.id),a[e.id]=e.placeholder),"commissionAmountRetailer"===e.id&&(m=e),"commissionPercentageRetailer"===e.id&&(v=e),"generic"===e.fieldType&&(l.push(e),null!==(n=e.validation)&&void 0!==n&&n.staticField?r.push(e):c.push(e)),"additionalInformation"===e.fieldType&&(o.push(e),null!==(i=e.validation)&&void 0!==i&&i.staticField?d.push(e):s.push(e)),"slab[]"===e.fieldType&&u.push(e)})),null!=O&&null!==(n=O.dropdownFieldsOptions)&&void 0!==n&&n.retailerTypes&&(null==O||null===(i=O.dropdownFieldsOptions)||void 0===i||i.retailerTypes.forEach((function(e){g[e.value]=e.name}))),[t,a,l,r,c,o,d,s,p,f,m,v,u,g]}),[]),X=(0,o.Z)(Q,14),Y=X[0],ee=X[1],ne=(X[2],X[3]),ie=X[4],te=(X[5],X[6]),ae=X[7],le=(X[8],X[9],X[10]),oe=X[11],re=X[12],ce=X[13];c().useEffect((function(){x.commissionCriteria===V.commissionCriteria&&x.commissionDefinitionCriteria===V.commissionDefinitionCriteria||A(_(_({},V),{},{commissionAmountRetailer:"",commissionData:{}}))}),[V.commissionCriteria,V.commissionDefinitionCriteria,x]),c().useEffect((function(){delete S.commissionAmount}),[V.commissionCriteria]),(0,h.b)((function(){var e,n=(null===(e=Object.keys(S))||void 0===e?void 0:e.length)>0?S:null;null===n&&"3"===O.values.campaignType&&V.commissionData&&Object.keys(V.commissionData).forEach((function(e){for(var i=(null===(t=V.commissionData[e])||void 0===t?void 0:t.length)-1;i>=0;i--)for(var t,a=i-1;a>=0;a--){var l=Number(V.commissionData[e][i].lowerCount)||Number(V.commissionData[e][i].lowerPercentage),o=Number(V.commissionData[e][a].lowerCount)||Number(V.commissionData[e][a].lowerPercentage),r=Number(V.commissionData[e][i].upperCount)||Number(V.commissionData[e][i].upperPercentage),c=Number(V.commissionData[e][a].upperCount)||Number(V.commissionData[e][a].upperPercentage);if(l>=o&&l<=c||r>=o&&r<=c){n={overlapError:F("slabOverlapError",{slab1:i+1,slab2:a+1,kpiName:e})};break}}})),"1"===(null==V?void 0:V.commissionDefinitionCriteria)&&delete S.commissionAmountKpi,"2"===(null==V?void 0:V.commissionDefinitionCriteria)&&delete S.commissionAmountRetailer,P(n,V)}),[V,U],650);var de=function(e,n,i){var t,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;if(e&&null!==(t=n.validation)&&void 0!==t&&t.regex){var o=n.id,r=new RegExp("\\b".concat(n.validation.regex,"\\b"),"gi"),c=n.errorMessage||F("invalidRegexError",{placeholder:n.placeholder}),d=r.test(e);if(d){if(delete S["".concat(o,"_").concat(i).concat(a).concat(-1!==l?l:"","_regex")],l>=0){var s,u,m,v,p,f,g,h;"lowerCount"!==o&&"lowerPercentage"!==o||(null!==(s=V.commissionData[a][l])&&void 0!==s&&s.upperCount&&Number(null===(u=V.commissionData[a][l])||void 0===u?void 0:u.upperCount)<=Number(e)||null!==(m=V.commissionData[a][l])&&void 0!==m&&m.upperPercentage&&Number(null===(v=V.commissionData[a][l])||void 0===v?void 0:v.upperPercentage)<=Number(e)?S["".concat(o,"_").concat(a,"_").concat(l)]=F("lowerGreaterThanUpperError",{lower:F(o),upper:"PERCENTAGE"===O.values.slabRangeType?F("upperPercentage"):F("upperCount")}):(delete S["upperCount_".concat(a,"_").concat(l)],delete S["upperPercentage_".concat(a,"_").concat(l)],delete S["lowerPercentage_".concat(a,"_").concat(l)],delete S["lowerCount_".concat(a,"_").concat(l)])),"upperCount"!==o&&"upperPercentage"!==o||(null!==(p=V.commissionData[a][l])&&void 0!==p&&p.lowerCount&&Number(null===(f=V.commissionData[a][l])||void 0===f?void 0:f.lowerCount)>=Number(e)||null!==(g=V.commissionData[a][l])&&void 0!==g&&g.lowerPercentage&&Number(null===(h=V.commissionData[a][l])||void 0===h?void 0:h.lowerPercentage)>=Number(e)?S["".concat(o,"_").concat(a,"_").concat(l)]=F("upperLessThanLowerError",{upper:F(o),lower:"PERCENTAGE"===O.values.slabRangeType?F("lowerPercentage"):F("lowerCount")}):(delete S["lowerCount_".concat(a,"_").concat(l)],delete S["lowerPercentage_".concat(a,"_").concat(l)],delete S["upperPercentage_".concat(a,"_").concat(l)],delete S["upperCount_".concat(a,"_").concat(l)]))}}else S["".concat(o,"_").concat(i).concat(a).concat(-1!==l?l:"","_regex")]=c}},se=function(e,n,i,t){var a=n.id,o=_({},V),r=o.commissionData,c=e.target.value;r[i]=_(_(_({},r[i]),t),{},(0,l.Z)({},a,e.target.value)),de(c,n,i),A(_(_({},o),{},{commissionData:r}))},ue=function(e,n){var i=n.id,t=_({},V),a=e.target.value;t=_(_({},V),{},(0,l.Z)({},i,a)),de(a,n,""),A(t)};c().useMemo((function(){var e,n,i,t=T[4];if(null!=t&&null!==(e=t.businessRule)&&void 0!==e&&e.kpis&&(null==t||null===(n=t.businessRule)||void 0===n||null===(i=n.kpis)||void 0===i?void 0:i.length)>0){var a,l={},o=null==t||null===(a=t.businessRule)||void 0===a?void 0:a.kpis,r=[];o.forEach((function(e){var n,i;l[null==e?void 0:e.name]=(null==V||null===(n=V.commissionData)||void 0===n||null===(i=n[null==e?void 0:e.name])||void 0===i?void 0:i.length)||1,r.push({name:e.name,commission:"",uid:e.uid})})),W(l),M(r)}if((null==T?void 0:T.length)>0){var c={},d=[];T.forEach((function(e){var n,i;c[e.name]=(null==V||null===(n=V.commissionData)||void 0===n||null===(i=n[e.name])||void 0===i?void 0:i.length)||1,d.push({name:null==e?void 0:e.name,commission:"",uid:null!=e&&e.uid?null==e?void 0:e.uid:null})})),W(c),M(d)}}),[T]);var me=function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return Y.includes(e)&&!n?S["".concat(e)]="".concat(ee[e]," is required"):delete S["".concat(e)],S["".concat(e)]||S["".concat(e,"_").concat(i,"_regex")]};return c().useEffect((function(){var e;Object.keys(S).forEach((function(e){delete S[e]}));var n=null==O||null===(e=O.values)||void 0===e?void 0:e.campaignType,i={},t=(null==x?void 0:x.commissionData)||{};if(!["3","4"].includes(n)){var a=O.values.commissionCalculationType;Object.keys(t).map((function(e){var n=Object.keys(t[e]);(n.includes("commissionAmountRetailer")||n.includes("commissionAmountKpi"))&&"PERCENTAGE"===a&&delete t[e],(n.includes("commissionPercentageRetailer")||n.includes("commissionPercentageKpi"))&&"NORMAL"===a&&delete t[e]}))}if(x&&x.commissionData){if("2"===(null==x?void 0:x.commissionDefinitionCriteria))if("1"===(null==x?void 0:x.commissionCriteria)&&z.length>0){var l=J;"4"!==n?l.forEach((function(e){z.forEach((function(n){var a="".concat(e,"_").concat(n.name);t["".concat(a)]&&(i["".concat(a)]=_(_({},t["".concat(a)]),{},{uid:n.uid}))}))})):(l.forEach((function(e){t[e]&&(i[e]=t[e])})),z.forEach((function(e){t["".concat(null==e?void 0:e.name)]&&(i["".concat(null==e?void 0:e.name)]=_(_({},t["".concat(null==e?void 0:e.name)]),{},{uid:e.uid}))})))}else z.forEach((function(e){var a="".concat(e.name);t["".concat(a)]&&"3"!==n&&(i["".concat(a)]=_(_({},t["".concat(a)]),{},{uid:e.uid})),"3"===n&&t["".concat(a)]&&(t["".concat(a)].forEach((function(n,i){t["".concat(a)][i]=_(_({},n),{},{kpi:{name:e.name,uid:e.uid}})})),i["".concat(a)]=t["".concat(a)])}));else J.forEach((function(e){t[e]&&(i[e]=t[e])}));var o=_(_(_({},V),x),{},{commissionData:i});A(o)}}),[x,z]),c().createElement(u.Z,{container:!0},c().createElement(u.Z,{item:!0,xs:6},c().createElement(u.Z,{container:!0,className:R.axis},ne.map((function(e,n){var i=_(_({},e),(null==e?void 0:e.options)&&{options:(0,E.MN)(null==e?void 0:e.options,O.values)}),a=me(e.id,V[e.id]);return c().createElement(p.Z,(0,t.Z)({widget:i,key:e.id,error:a,editView:N},O,{values:_(_({},O.values),V),overrideValue:null==V?void 0:V[e.id],handleChange:function(n){return ue(n,e)}}))})),"1"===(null==V?void 0:V.commissionCriteria)&&"1"===(null==V?void 0:V.commissionDefinitionCriteria)&&J.map((function(e){return c().createElement(u.Z,{item:!0,xs:12,key:e,className:(0,b.default)(R.topSpace,R.tile)},ie.map((function(n,i){var a,l,o,r,d="";d="retailerTypeField"!==n.id?null===(r=V[e])||void 0===r?void 0:r[n.id]:ce[e];var s=null!==(a=null===(l=V.commissionData)||void 0===l||null===(o=l[e])||void 0===o?void 0:o[n.id])&&void 0!==a?a:"",u=(0,E.DU)(n.validation.hideIf,_(_({},O.values),V.commissionData[e]))?void 0:me(n.id,s,e);return c().createElement(p.Z,(0,t.Z)({widget:n,key:n.id,editView:N,error:u},O,{values:_(_({},O.values),V.commissionData[e]),disabledView:n.validation.disabled,overrideValue:d,handleChange:function(i){return se(i,n,e)}}))})))})),"1"===(null==V?void 0:V.commissionCriteria)&&"2"===(null==V?void 0:V.commissionDefinitionCriteria)&&"4"===(null==O||null===(d=O.values)||void 0===d?void 0:d.campaignType)&&J.map((function(e){return c().createElement(u.Z,{item:!0,xs:12,key:e,className:(0,b.default)(R.topSpace,R.tile)},ie.map((function(n,i){var a,l,o,r,d="";d="retailerTypeField"!==n.id?null===(r=V[e])||void 0===r?void 0:r[n.id]:ce[e];var s=null!==(a=null===(l=V.commissionData)||void 0===l||null===(o=l[e])||void 0===o?void 0:o[n.id])&&void 0!==a?a:"",u=(0,E.DU)(n.validation.hideIf,_(_({},O.values),V.commissionData[e]))?void 0:me(n.id,s,e);return c().createElement(p.Z,(0,t.Z)({widget:n,key:n.id,editView:N,error:u},O,{values:_(_({},O.values),V.commissionData[e]),disabledView:n.validation.disabled,overrideValue:d,handleChange:function(i){return se(i,n,e)}}))})))})))),c().createElement(u.Z,{item:!0,xs:6},c().createElement(u.Z,{container:!0,className:(0,b.default)(R.axis,R.bottomSpace)},te.map((function(e){var n=(0,E.DU)(e.validation.hideIf,_(_({},O.values),V))?void 0:me(e.id,V[e.id]);return c().createElement(p.Z,(0,t.Z)({widget:e,key:e.id,editView:N,error:n},O,{values:_(_({},O.values),V),overrideValue:null==V?void 0:V[e.id],handleChange:function(n){return ue(n,e)}}))})),"2"===(null==V?void 0:V.commissionDefinitionCriteria)&&"4"===(null==O||null===(s=O.values)||void 0===s?void 0:s.campaignType)&&z.map((function(e){return c().createElement(u.Z,{item:!0,xs:12,className:(0,b.default)(R.topSpace,R.bottomSpace,R.tile),key:e.name},null==ae?void 0:ae.map((function(n,i){var a,l,o,r,d="";d="kpiNameField"!==n.id?null===(r=V[e.name])||void 0===r?void 0:r[n.id]:e.name;var s=null!==(a=null===(l=V.commissionData)||void 0===l||null===(o=l[e.name])||void 0===o?void 0:o[n.id])&&void 0!==a?a:"",u=(0,E.DU)(n.validation.hideIf,_(_({},O.values),V.commissionData[e.name]))?void 0:me(n.id,s,e.name);return c().createElement(p.Z,(0,t.Z)({widget:n,key:n.id,editView:N,error:u},O,{values:_(_({},O.values),V.commissionData[e.name]),overrideValue:d,handleChange:function(i){return se(i,n,e.name,{uid:e.uid})}}))})))})),"2"===(null==V?void 0:V.commissionCriteria)&&"1"===(null==V?void 0:V.commissionDefinitionCriteria)&&c().createElement(c().Fragment,null,c().createElement(p.Z,(0,t.Z)({widget:le,error:(0,E.DU)(le.validation.hideIf,_(_({},O.values),V))?void 0:me(le.id,V[le.id])},O,{values:_(_({},O.values),V),overrideValue:V[le.id],handleChange:function(e){return ue(e,le)}})),c().createElement(p.Z,(0,t.Z)({widget:oe,error:(0,E.DU)(oe.validation.hideIf,_(_({},O.values),V))?void 0:me(oe.id,V[oe.id])},O,{values:_(_({},O.values),V),overrideValue:V[oe.id],handleChange:function(e){return ue(e,oe)}}))),"2"===(null==V?void 0:V.commissionCriteria)&&"2"===(null==V?void 0:V.commissionDefinitionCriteria)&&"4"!==(null==O||null===(y=O.values)||void 0===y?void 0:y.campaignType)&&z.map((function(e){return c().createElement(u.Z,{container:!0},c().createElement(u.Z,{container:!0,className:(0,b.default)(R.topSpace,R.bottomSpace,R.tile),key:e.name},null==ae?void 0:ae.map((function(n,i){var a,l,o,r,d="";d="kpiNameField"!==n.id?null===(r=V[e.name])||void 0===r?void 0:r[n.id]:e.name;var s=null!==(a=null===(l=V.commissionData)||void 0===l||null===(o=l[e.name])||void 0===o?void 0:o[n.id])&&void 0!==a?a:"",u=(0,E.DU)(n.validation.hideIf,_(_({},O.values),V.commissionData[e.name]))?void 0:me(n.id,s,e.name);return c().createElement(p.Z,(0,t.Z)({widget:n,key:"".concat(e.name,"-").concat(n.id),editView:N,error:u},O,{values:_(_({},O.values),V.commissionData[e.name]),overrideValue:d,handleChange:function(i){return se(i,n,e.name,{uid:e.uid})}}))}))),"3"===O.values.campaignType&&c().createElement(c().Fragment,null,Array.from(Array(U[e.name]).keys()).map((function(n){return c().createElement(u.Z,{container:!0,className:(0,b.default)(R.topSpace,R.bottomSpace,R.tile),key:"slab-".concat(e.name,"-").concat(n)},c().createElement(u.Z,{item:!0,xs:12,className:R.tbSpace},c().createElement(v.Z,null,"Slab ".concat(n+1))),re.map((function(i,a){var l,o,r,d=null!=V&&null!==(l=V.commissionData)&&void 0!==l&&l["".concat(e.name)]?null==V||null===(o=V.commissionData)||void 0===o||null===(r=o["".concat(e.name)][n])||void 0===r?void 0:r["".concat(i.id)]:"";d||!i.required||(0,E.DU)(i.validation.hideIf,O.values)?delete S["".concat(i.id,"_").concat(e.name,"_regex_").concat(n)]:S["".concat(i.id,"_").concat(e.name,"_regex_").concat(n)]="".concat(i.placeholder," is required");var s=(0,E.DU)(i.validation.hideIf,O.values)?void 0:S["".concat(i.id,"_").concat(e.name,"_regex_").concat(n)]||S["".concat(i.id,"_").concat(e.name).concat(n,"_regex")]||S["".concat(i.id,"_").concat(e.name,"_").concat(n)];return c().createElement(p.Z,(0,t.Z)({widget:i,key:"slab-".concat(e.name,"-").concat(i.id,"-").concat(n),editView:N},O,{overrideValue:d,error:s,values:_({},O.values),handleChange:function(t){!function(e,n,i,t){var a=_({},V),l=e.target.value,o=a.commissionData;o["".concat(t.name)]||(o["".concat(t.name)]=[]),o["".concat(t.name)][i]||(o["".concat(t.name)][i]={kpi:{name:t.name,uid:t.uid}}),o["".concat(t.name)][i]["".concat(n.id)]=l,"lowerCount"!==n.id&&"lowerPercentage"!==n.id||("lowerCount"===n.id&&delete o["".concat(t.name)][i].lowerPercentage,"lowerPercentage"===n.id&&delete o["".concat(t.name)][i].lowerCount),"upperCount"!==n.id&&"upperPercentage"!==n.id||("upperCount"===n.id&&delete o["".concat(t.name)][i].upperPercentage,"upperPercentage"===n.id&&delete o["".concat(t.name)][i].upperCount),a=_(_({},a),{},{commissionData:o}),A(a),de(l,n,"",t.name,i)}(t,i,n,e)}}))})),c().createElement(u.Z,{item:!0,xs:12,className:(0,b.default)(R.removeSlab,R.tbSpace)},c().createElement(m.Z,{onClick:function(){return function(e,n){var i=_({},U),t=_({},V);if(1===i[e])G(F("minimumSlabRequirementError"));else{var a,l,o,r,c,d,s,u,m,v,p,f,g,h=(null===(a=t.commissionData)||void 0===a||null===(l=a[e])||void 0===l||null===(o=l[n])||void 0===o?void 0:o.lowerCount)||(null===(r=t.commissionData)||void 0===r||null===(c=r[e])||void 0===c||null===(d=c[n])||void 0===d?void 0:d.lowerPercentage),b=(null===(s=t.commissionData)||void 0===s||null===(u=s[e])||void 0===u||null===(m=u[n])||void 0===m?void 0:m.upperCount)||(null===(v=t.commissionData)||void 0===v||null===(p=v[e])||void 0===p||null===(f=p[n])||void 0===f?void 0:f.upperPercentage);i[e]=i[e]-1,null===(g=t.commissionData)||void 0===g||g[e].splice(n,1),z.forEach((function(i){re.forEach((function(t){delete S["".concat(t.id,"_").concat(i.name,"_regex_").concat(n)],delete S["".concat(t.id,"_").concat(e).concat(n,"_regex")],delete S["".concat(t.id,"_").concat(i.name,"_").concat(n)]}))})),A(t),W(i),$(F("slabRemoveError",{lowerLabel:"PERCENTAGE"!==O.values.slabRangeType?F("lowerCount"):F("lowerPercentage"),upperLabel:"PERCENTAGE"!==O.values.slabRangeType?F("upperCount"):F("upperPercentage"),lower:h,upper:b,kpiName:e}))}}(e.name,n)}},c().createElement(Z,{fontSize:"small"}),c().createElement(v.Z,null,"Remove Slab"))))})),c().createElement(u.Z,{item:!0,xs:12},c().createElement(m.Z,{onClick:function(){return n=e.name,t=_({},U),void(null===(i=V.commissionData[n])||void 0===i||!i[t[n]-1]||Object.keys(V.commissionData[n][t[n]-1]).length<3?G(F("fillAllTheFieldsOfSlabError",{kpiName:n})):(t[n]=t[n]+1,W(t)));var n,i,t}},c().createElement(C,{fontSize:"small"}),c().createElement(v.Z,null,"Add Slab")))))})),"1"===(null==V?void 0:V.commissionCriteria)&&"2"===(null==V?void 0:V.commissionDefinitionCriteria)&&"4"!==(null===(w=O.values)||void 0===w?void 0:w.campaignType)&&z.length>0&&J.map((function(e){return c().createElement(u.Z,{container:!0,key:e,className:(0,b.default)(R.topSpace)},c().createElement(u.Z,{item:!0,xs:12,className:R.tbSpace},c().createElement(v.Z,null,ce[e])),c().createElement(u.Z,{item:!0,xs:12},z.map((function(n){var i="".concat(e,"_").concat(n.name);return c().createElement(u.Z,{item:!0,xs:12,key:i,className:R.tile},null==ae?void 0:ae.map((function(e,a){var l,o,r,d,s="";s="kpiNameField"!==e.id?null===(d=V[i])||void 0===d?void 0:d[e.id]:n.name;var u=null!==(l=null===(o=V.commissionData)||void 0===o||null===(r=o[i])||void 0===r?void 0:r[e.id])&&void 0!==l?l:"",m=(0,E.DU)(e.validation.hideIf,_(_({},O.values),V.commissionData[i]))?void 0:me(e.id,u,i);return c().createElement(p.Z,(0,t.Z)({widget:e,key:e.id,editView:N,error:m},O,{values:_(_({},O.values),V.commissionData[i]),overrideValue:s,handleChange:function(t){return se(t,e,i,{uid:n.uid})}}))})))}))))})))))}},52833:(e,n,i)=>{"use strict";i.r(n),i.d(n,{SearchResellerChildrenModal:()=>E});var t=i(2411),a=i(79692),l=i(12420),o=i(37390),r=i(97485),c=i(15584),d=i(91256),s=i(58987),u=i(89571),m=i(27556),v=i(54462),p=(i(34111),i(29609)),f=i(48049),g=i(77277),h=i(80030),b=(0,a.Z)((function(e){return(0,l.Z)({contentStyle:{width:"100%"},table:{minWidth:650},btn:{color:"deepskyblue"}})})),E=function(e){var n=e.open,i=e.setOpen,a=e.data,l=(e.loading,(0,p.useTranslation)().t),E=b();return t.createElement(v.default,{open:n,onClose:function(){return i(!1)},maxWidth:"lg",contentStyle:E.contentStyle,dialogTitle:l("searchResultReseller"),dialogDescription:l("searchResellersFound"),disableBackdropClick:!0},t.createElement(d.Z,{id:"search-reseller-children-modal-table-container",component:m.Z},t.createElement(o.Z,{id:"search-reseller-children-modal-table",className:E.table,"aria-label":"simple table"},t.createElement(s.Z,null,t.createElement(u.Z,null,t.createElement(c.Z,{component:"th"},l("resellerId")),t.createElement(c.Z,{component:"th",align:"right"},l("resellerName")),t.createElement(c.Z,{component:"th",align:"right"},l("parentResellerName")),t.createElement(c.Z,{component:"th",align:"right"},l("resellerMSISDN")),t.createElement(c.Z,{component:"th",align:"right"},l("resellerTypeName")),t.createElement(c.Z,{component:"th",align:"right"},l("status")),t.createElement(c.Z,{component:"th",align:"right"},l("resellerReason","Any Action Comments")))),t.createElement(r.Z,null,a.map((function(e){var n;return t.createElement(u.Z,{key:e.resellerId},t.createElement(c.Z,{component:"th",scope:"row"},t.createElement(h.ZP,{title:"".concat(l("clickToViewResellerDetail"))},t.createElement(g.Z,{className:E.btn,component:f.Link,target:"_blank",to:"/home/reseller/resellers/view/"+e.resellerId},e.resellerId))),t.createElement(c.Z,{align:"right"},e.resellerName),t.createElement(c.Z,{align:"right"},e.parentResellerName),t.createElement(c.Z,{align:"right"},e.resellerMSISDN),t.createElement(c.Z,{align:"right"},e.resellerTypeName),t.createElement(c.Z,{align:"right"},e.status),t.createElement(c.Z,{align:"right"},null===(n=e.reasons)||void 0===n?void 0:n.map((function(e,n){return e.includes("http://")||e.includes("https://")?t.createElement("a",{href:e,target:"_blank",key:n},l("seeAttachment","See Attachment"),"."):t.createElement("p",{key:n},l("reasonDescription"),t.createElement("q",null,e))}))))}))))))}},27990:(e,n,i)=>{"use strict";i.d(n,{Z:()=>F});var t=i(7560),a=i(51119),l=i(11746),o=i(74315),r=i(2411),c=i.n(r),d=i(79692),s=i(12420),u=i(91955),m=i(70773),v=i(32950),p=i(61564),f=i(75958),g=i(19258),h=i(6277),b=i(77790),E=i.n(b),y=i(60905),w=i(67358),C=i(80030),Z=i(37413),D=i(91163),_=i(52833),k=i(88591),S=i(4179),N=i(82043),P=i(29609);function T(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function O(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?T(Object(i),!0).forEach((function(n){(0,a.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):T(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var x=window.config.openCalendarWith||"year",R=(0,d.Z)((function(e){return(0,s.Z)({mainSection:{fontSize:e.typography.fontSize},element:{marginRight:e.spacing(1),marginBottom:e.spacing(2)},shrink:{width:"95%"},validateBtn:{float:"right",top:-50,padding:0}})}));const F=function(e){var n,i,a,r,d,s,b=e.widget,T=e.handleChange,F=e.values,j=void 0===F?{}:F,I=e.errors,V=void 0===I?{}:I,A=e.error,q=void 0===A?"":A,B=e.controlableFields,z=void 0===B?{}:B,M=e.searchByFields,H=void 0===M?{}:M,L=e.overrideValue,U=void 0===L?"":L,W=e.disabledMuteableRule,K=void 0!==W&&W,G=e.editView,$=void 0!==G&&G,J=e.disabledPwdFlag,Q=void 0!==J&&J,X=e.validationRequired,Y=void 0===X||X,ee=e.disabledView,ne=void 0!==ee&&ee,ie=e.controlableFieldIDs,te=void 0===ie?[]:ie,ae=e.disabledFieldIds,le=void 0===ae?[]:ae,oe=e.dataSourceFieldIDs,re=void 0===oe?[]:oe,ce=e.dataSourceFields,de=void 0===ce?{}:ce,se=e.changeTypeEnabled,ue=void 0!==se&&se,me=e.loading,ve=void 0!==me&&me,pe=e.cinLoading,fe=void 0!==pe&&pe,ge=e.searchByFieldsId,he=void 0===ge?[]:ge,be=e.searchableFieldsId,Ee=void 0===be?[]:be,ye=e.resultFoundForWidgetID,we=void 0===ye?"":ye,Ce=e.searchResellersData,Ze=void 0===Ce?null:Ce,De=e.resellerData,_e=void 0===De?{}:De,ke=e.handleDropdownAssociatedFields,Se=e.dateInputHandler,Ne=e.blurHandler,Pe=e.focusHandler,Te=e.handleMultiSelectCheckboxSelection,Oe=R(),xe=(0,P.useTranslation)().t,Re=c().useState(!1),Fe=(0,o.Z)(Re,2),je=Fe[0],Ie=Fe[1],Ve=function(e,n){var i,t=e.map((function(e){return e.id}));if(t&&"string"==typeof t[0]&&"none"===(null===(i=t[0])||void 0===i?void 0:i.toLowerCase())&&t.shift(),(t.includes("None")||t.includes("none"))&&(t=["None"]),re.includes(n)){var a=de[n];H[a]=e}T({target:{value:t.join(","),name:n}})},Ae=(null===(n=b.validation)||void 0===n?void 0:n.shrink)||0,qe=null,Be=b.id,ze=b.type,Me=b.placeholder||(0,u.WR)(Be||""),He=b.defaultValue;He&&He.startsWith("${")&&He.endsWith("}")&&(He="");var Le=j[Be]||U||He||"",Ue=q||V[Be],We="motte_de_passe"===Be&&"true"===j.one_time_password&&"false"===j.motte_de_passe_flag;if(["resellerType"].includes(Be)||We)return null;if(te.length>0&&te.includes(Be)){var Ke=z[Be];if((0,u.DU)(Ke,j))return null}var Ge="password"===b.validation||"password"===(null===(i=b.validation)||void 0===i?void 0:i.type);ue&&Ge&&le.push(Be);var $e=$&&!b.mutable,Je=ne||$e||"motte_de_passe_flag"===Be&&!0===Q||le.includes(Be);if(K&&(Je=!1),["dropdown","radio"].includes(ze)){var Qe,Xe="radio"!==ze?[{value:"",key:xe("pleaseSelect_",{fieldName:b.placeholder})}]:[],Ye=(0,l.Z)(b.options||[]);he.includes(Be)&&H[Be]&&(Ye=H[Be]);var en=[].concat(Xe,(0,l.Z)((null===(Qe=Ye)||void 0===Qe?void 0:Qe.map((function(e){return{key:e.name,value:e.value}})))||[]));qe=c().createElement(m.SeamlessDropDown,{id:"".concat(Be,"-drop-down"),error:!!Ue,disabled:Je,fullWidth:!0,required:b.required&&Y,className:(0,h.default)(Oe.element,Ae&&Oe.shrink),label:Me,helperText:Ue||xe("pleaseSelect_",{fieldName:Me}),options:en,name:"".concat(Be),value:"".concat(Le),onChange:function(e){ke?ke(Be,b,e.target.value):console.warn("☢️ handleDropdownAssociatedFields  is missing in props ☢️"),T(e)}})}else if("label"===ze)qe=null;else if("multiselect"===ze){var nn,tn;he.includes(Be)&&H[Be]&&(b.options=H[Be]);var an=(null===(nn=b.options)||void 0===nn?void 0:nn.map((function(e){return{name:(null==e?void 0:e.name)||e.key,id:e.value}})))||[];if(null!==(tn=b.validation)&&void 0!==tn&&tn.enableAllOption&&an.unshift({name:xe("all"),id:"all"}),b.validation.checkboxFormate){var ln,on=Le&&"string"==typeof Le?null===(ln=Le)||void 0===ln?void 0:ln.split(","):[],rn=an.filter((function(e){return null==on?void 0:on.includes(e.id)}));qe=c().createElement(S.iS,{options:an,loading:ve,name:Be,placeholder:Me,selectedItems:rn,required:b.required&&Y,searchByField:b.validation.searchByKey,handleSelection:function(e){return Te&&Te(e,b)},isOptionClickable:b.validation.isOptionClickable,label:Me,handleChange:function(e){return Ve(e,Be)}})}else{var cn=Le?Le.split(",").map((function(e){return{id:e,name:e}})):[];qe=c().createElement(v.default,{data:an,loading:ve,disabled:Je,selectedItems:cn,label:Me,required:b.required&&Y,handleChange:function(e){return Ve(e,Be)}})}}else if("date"===ze)Le=Le||new Date,qe=c().createElement(p.M,{utils:g.Z},c().createElement(f.e,{error:!!Ue,className:(0,h.default)(Oe.element),disableToolbar:!0,fullWidth:!0,autoOk:!0,openTo:x,views:["year","month","date"],format:"yyyy/MM/dd",inputProps:O({},b.validation.inputProps||{}),required:b.required&&Y,variant:"inline",margin:"normal",id:"".concat(Be,"-datepicker"),label:Me,helperText:Ue||Me,name:"".concat(Be),value:Le,onChange:function(e){return Se?Se(e,Be,Me):console.warn("☢️ dateInputHandler is missing in props ☢️")},KeyboardButtonProps:{"aria-label":"change date"},disabled:Je}));else if("file"===ze)qe=c().createElement(c().Fragment,null,c().createElement(E(),{name:Be,value:Le,label:Me,onChange:T,resourceType:"agent"}),Le&&xe("uploadSuccessful"));else if(["text","number","email","password"].includes(ze)){var dn=Ee.includes(Be);qe=c().createElement(c().Fragment,null,c().createElement(m.SeamlessInput,(0,t.Z)({id:"".concat(Be,"-input"),key:"".concat(Be,"-input"),error:!!Ue,disabled:Je,type:ze,inputProps:O({},b.validation.inputProps||{}),fullWidth:!0,required:b.required&&Y,className:(0,h.default)(Oe.element,Ae&&Oe.shrink),label:Me,helperText:Ue||xe("pleaseEnter_",{fieldName:Me}),name:"".concat(Be),value:Le},Ge&&{autoComplete:"new-password"},{onChange:T,onBlur:function(){return Ne&&Ne(Le,Be,b)},onFocus:function(){return Pe&&Pe(Be)}})),fe&&dn&&c().createElement(w.Z,null),!fe&&!Je&&we!==Be&&dn&&c().createElement(C.ZP,{title:"".concat(xe("searchForResult"))},c().createElement(m.SeamlessButton,{className:(0,h.default)(Oe.validateBtn)},c().createElement(Z.Z,{fontSize:"small"}))),Ze&&dn&&we===Be&&c().createElement(c().Fragment,null,c().createElement(C.ZP,{title:"".concat(xe("searchResellerCIN"))},c().createElement(m.SeamlessButton,{className:(0,h.default)(Oe.validateBtn),onClick:function(){return Ie(!0)}},c().createElement(D.Z,null))),c().createElement(_.SearchResellerChildrenModal,{open:je,setOpen:Ie,loading:ve,data:Ze})))}if(!qe)return null;"parentResellerId"===Be&&(qe=c().createElement(k.default,{name:Be,required:b.required&&Y,value:Le,label:Me,helperText:Ue||xe("pleaseSelect_",{fieldName:Me}),handleChange:T,disabled:Je,resellerType:_e.resellerType,errors:V})),"roleId"===Be&&"dropdown"===ze&&(qe=c().createElement(S.Uh,{name:Be,classes:(0,h.default)(Oe.element),value:Le,defaultKey:"importId",required:b.required&&Y,disabled:Je,errors:V,handleChange:T})),"contractKey"!==Be&&"contractId"!==Be||"dropdown"!==ze||(qe=c().createElement(N.default,{name:Be,errors:V,resellerType:_e.resellerType,disabled:Je,required:b.required&&Y,helperText:Ue||xe("selectContractType"),label:Me,value:Le,handleChange:T}));var sn=(null===(a=b.validation)||void 0===a?void 0:a.gridColumn)&&parseInt(null===(r=b.validation)||void 0===r?void 0:r.gridColumn)||4;return c().createElement(c().Fragment,{key:Be},(null===(d=b.validation)||void 0===d?void 0:d.newLine)&&c().createElement(y.Z,{item:!0,sm:12,style:{padding:0},xs:12}),c().createElement(y.Z,{item:!0,xs:12,sm:sn},qe),(null===(s=b.validation)||void 0===s?void 0:s.lineBreak)&&c().createElement(y.Z,{item:!0,sm:12,style:{padding:0},xs:12}))}},24389:(e,n,i)=>{"use strict";i.d(n,{b:()=>l});var t=i(11746),a=i(2411),l=function(e,n,i){(0,a.useEffect)((function(){var n=setTimeout((function(){return e()}),i);return function(){return clearTimeout(n)}}),[].concat((0,t.Z)(n||[]),[i]))}},91163:(e,n,i)=>{"use strict";var t=i(13645),a=i(87908);n.Z=void 0,a(i(88901));var l=t(i(2108)),o=i(52322),r=(0,l.default)((0,o.jsx)("path",{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"}),"FormatListNumbered");n.Z=r},37413:(e,n,i)=>{"use strict";i.d(n,{Z:()=>l}),i(88901);var t=i(3752),a=i(52322);const l=(0,t.Z)((0,a.jsx)("path",{d:"M22 5.18L10.59 16.6l-4.24-4.24 1.41-1.41 2.83 2.83 10-10L22 5.18zM12 20c-4.41 0-8-3.59-8-8s3.59-8 8-8c1.57 0 3.04.46 4.28 1.25l1.45-1.45C16.1 2.67 14.13 2 12 2 6.48 2 2 6.48 2 12s4.48 10 10 10c1.73 0 3.36-.44 4.78-1.22l-1.5-1.5c-1 .46-2.11.72-3.28.72zm7-5h-3v2h3v3h2v-3h3v-2h-3v-3h-2v3z"}),"AddTask")}}]);