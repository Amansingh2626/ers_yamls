(self.webpackChunk_unified_settings=self.webpackChunk_unified_settings||[]).push([[496],{24263:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var l,a,r,i,c=n(74315),o=n(2411),s=n(13248),u=n(48049),m=n(97848),p=null!==(l=null===(a=window)||void 0===a||null===(r=a.config)||void 0===r||null===(i=r.settings)||void 0===i?void 0:i.roleForPolicyMapping)&&void 0!==l&&l;const g=function(e){var t=e.children,n=(0,s.useSnackbar)().enqueueSnackbar,l=(0,u.useHistory)(),a=(0,u.useParams)(),r=a.id,i=a.userRole,g=o.useState(!1),d=(0,c.Z)(g,2),y=d[0],h=d[1],Z=o.useState(!1),f=(0,c.Z)(Z,2),E=f[0],v=f[1],T=o.useState([]),S=(0,c.Z)(T,2),b=S[0],R=S[1],w=o.useState([]),k=(0,c.Z)(w,2),A=k[0],N=k[1],x=o.useState([]),P=(0,c.Z)(x,2),C=P[0],M=P[1],L=o.useState({}),_=(0,c.Z)(L,2),B=_[0],F=_[1];return o.useEffect((function(){v(!0),"create"!=r?p?((0,m.AB)({resellerTypes:[r],userRoles:[i]}).then((function(e){F(e.resellerRolePolicy[0])})).catch((function(e){n(e.resultMessage,{variant:"error"}),l.push("/home/settings/access-management/policy_mapping")})),h(!0)):((0,m.AB)({resellerTypes:[r]}).then((function(e){F(e.resellerPolicyList[0])})).catch((function(e){n(e.resultMessage,{variant:"error"}),l.push("/home/settings/access-management/policy_mapping")})),h(!0)):((0,m.lg)().then((function(e){var t=e.types.map((function(e){return e.id}));R(t)})).catch((function(e){n(e.resultMessage,{variant:"error"}),l.push("/home/settings/access-management/policy_mapping")})).finally((function(){return v(!1)})),(0,m.F3)().then((function(e){N(e.roles.map((function(e){return e.importId})))}))),(0,m.VV)().then((function(e){M(e.policyList.map((function(e){return{value:e.policy.id,key:e.policy.name,description:e.policy.description}})))})),v(!1)}),[r]),o.createElement(o.Fragment,null,t({loading:E,updateData:B,isUpdate:y,retailerTypes:b,roles:A,policyList:C}))}},46787:(e,t,n)=>{"use strict";n.d(t,{Z:()=>C});var l,a,r,i,c=n(11746),o=n(74315),s=n(2411),u=n(33553),m=n(77277),p=n(60905),g=n(90436),d=n(63135),y=n(48049),h=n(79692),Z=n(12420),f=n(70773),E=n(27266),v=n(97848),T=n(13248),S=n(98069),b=n(8629),R=n(79249),w=n(38724),k=n(49429),A=null!==(l=null===(a=window)||void 0===a||null===(r=a.config)||void 0===r||null===(i=r.settings)||void 0===i?void 0:i.roleForPolicyMapping)&&void 0!==l&&l,N=(0,h.Z)((function(e){return(0,Z.Z)({root:{borderRadius:"50%"},dialogTitle:{marginTop:"10px",fontWeight:700,textAlign:"center",color:e.palette.primary.main},rowSpacing:{marginBottom:e.spacing(1.5)},cancelAction:{textAlign:"right"},updateAction:{textAlign:"left"},blurBackDrop:{backdropFilter:"blur(2px)",backgroundColor:"rgba(0, 0, 0, 0.2)"},resellerType:{fontWeight:600,marginRight:e.spacing(2)},grid:{marginTop:e.spacing(2),textAlign:"center"},item:{marginBottom:e.spacing(1)}})}));const x=function(e){var t=e.data,n=e.open,l=e.onSubmit,a=e.cancel,r=N(),i=(0,d.useTranslation)().t;return s.createElement(b.Z,{open:n,fullWidth:!0,disableBackdropClick:!0,className:r.root,BackdropProps:{classes:{root:r.blurBackDrop}}},s.createElement(R.Z,{id:"alert-dialog-title",color:"primary",className:r.dialogTitle},i("policyMappingUpdate")),s.createElement(w.Z,null,s.createElement(p.Z,{container:!0,className:r.rowSpacing},s.createElement(p.Z,{item:!0},s.createElement(g.Z,null,i(A?"policyMappingActorRoleConfirm":"policyMappingConfirm")))),s.createElement(p.Z,{className:r.grid},t.map((function(e){var t;return s.createElement(p.Z,{container:!0,key:null==e?void 0:e.resellerType,className:r.item},s.createElement(p.Z,{item:!0},s.createElement(g.Z,{className:r.resellerType},"".concat(e.resellerType," :"))),A?s.createElement(p.Z,{item:!0},s.createElement(g.Z,{className:r.resellerType},"".concat(e.userRole," :"))):null,s.createElement(p.Z,{item:!0},s.createElement(g.Z,null,null==e||null===(t=e.policy)||void 0===t?void 0:t.name)))})))),s.createElement(k.Z,null,s.createElement(m.Z,{color:"primary",variant:"contained",onClick:l},i("update")),s.createElement(m.Z,{color:"primary",variant:"outlined",onClick:a},i("cancel"))))};var P=(0,h.Z)((function(e){return(0,Z.Z)({rowSpacing:{marginTop:e.spacing(2)},resellerType:{fontWeight:600,marginRight:e.spacing(2)},typography:{marginTop:"10px",fontWeight:700},buttonGrid:{marginTop:e.spacing(5)},button:{marginRight:e.spacing(2)}})}));const C=function(e){var t,n,l=e.loading,a=e.updateData,r=e.isUpdate,i=e.retailerTypes,h=e.roles,Z=e.isView,b=e.policyList,R=(0,y.useHistory)(),w=(0,T.useSnackbar)().enqueueSnackbar,k=(0,d.useTranslation)().t,A=P(),N=s.useState(" "),C=(0,o.Z)(N,2),M=C[0],L=C[1],_=s.useState([]),B=(0,o.Z)(_,2),F=B[0],W=B[1],D=s.useState([]),I=(0,o.Z)(D,2),q=I[0],O=I[1],U=s.useState([]),V=(0,o.Z)(U,2),G=V[0],H=V[1],K=s.useState([]),j=(0,o.Z)(K,2),z=j[0],J=j[1],Q=s.useState(""),X=(0,o.Z)(Q,2),Y=X[0],$=X[1],ee=s.useState([]),te=(0,o.Z)(ee,2),ne=te[0],le=te[1],ae=s.useState(!1),re=(0,o.Z)(ae,2),ie=re[0],ce=re[1];s.useEffect((function(){if(b.length>0){var e=b.filter((function(e){return"".concat(e.value)===M}));e&&$(e[0].description)}}),[M]);var oe=function(){(0,v.Kh)({policyId:M,resellerTypeAndRoles:F.map((function(e){return{resellerType:e,userRoles:G}}))}).then((function(e){w(e.resultMessage,{variant:"success"}),R.push("/home/settings/access-management/policy_mapping")})).catch((function(e){w(e.resultMessage,{variant:"error"})}))};return s.useEffect((function(){var e,t;r&&(L(null==a||null===(e=a.policy)||void 0===e?void 0:e.id),$(null==a||null===(t=a.policy)||void 0===t?void 0:t.description)),O(i),J(h)}),[i,h,r,a]),l?s.createElement(u.Z,{width:"100%"},s.createElement(u.Z,{m:1},s.createElement(S.Z,{animation:"wave",variant:"text",width:200,height:45})),s.createElement(u.Z,{m:1},s.createElement(S.Z,{variant:"text",animation:"wave",width:"30%",height:100})),s.createElement(p.Z,{container:!0},s.createElement(p.Z,{item:!0,xs:4},s.createElement(u.Z,{m:1},s.createElement(S.Z,{variant:"rect",width:210,height:230}))),s.createElement(p.Z,{item:!0,xs:4},s.createElement(u.Z,{m:1},s.createElement(S.Z,{variant:"rect",width:210,height:230}))))):s.createElement(s.Fragment,null,s.createElement(p.Z,null,(Z||r)&&s.createElement(s.Fragment,null,s.createElement(p.Z,{container:!0,spacing:3},s.createElement(p.Z,{item:!0},s.createElement(g.Z,{color:"primary",className:A.resellerType},k("actorType"))),s.createElement(p.Z,{item:!0},s.createElement(g.Z,null,null==a?void 0:a.resellerType))),s.createElement(p.Z,{container:!0,spacing:3},s.createElement(p.Z,{item:!0},s.createElement(g.Z,{color:"primary",className:A.resellerType},k("roleType"))),s.createElement(p.Z,{item:!0},s.createElement(g.Z,null,null==a?void 0:a.userRole)))),s.createElement(p.Z,{item:!0,xs:12,md:3,lg:4,className:A.rowSpacing},Z?s.createElement(f.SeamlessInput,{fullWidth:!0,inputProps:{readOnly:!0},value:null==a||null===(t=a.policy)||void 0===t?void 0:t.name,label:k("Policy"),className:A.rowSpacing}):s.createElement(f.SeamlessDropDown,{required:!0,options:[{key:k("Select Policy"),value:" ",description:""}].concat((0,c.Z)(b)),fullWidth:!0,value:M,onChange:function(e){return L(e.target.value)},label:k("choosePolicy")})),s.createElement(p.Z,{item:!0,xs:12,md:4,lg:4},s.createElement(f.SeamlessInput,{fullWidth:!0,inputProps:{readOnly:!0},multiline:!0,value:Y,label:k("description"),className:A.rowSpacing})),!r&&!Z&&s.createElement(s.Fragment,null,s.createElement(p.Z,{container:!0,spacing:3,className:A.rowSpacing},s.createElement(p.Z,{item:!0,xs:12},s.createElement(g.Z,{variant:"h6",color:"primary",className:A.typography},k("resellerAndRoleType")))),s.createElement(p.Z,{container:!0,spacing:3,className:A.rowSpacing},s.createElement(p.Z,{item:!0,xs:6},s.createElement(E.Z,{left:F,right:q,setLeft:W,setRight:O,rightTitle:k("allActorTypes"),placeholder:k("searchActorType"),leftTitle:k("assignedTo"),allLabelLeft:"Select-All-Assigned-Actor-Types",allLabelRight:"Select-All-Actor-Types"})),s.createElement(p.Z,{item:!0,xs:6},s.createElement(E.Z,{left:G,right:z,setLeft:H,setRight:J,rightTitle:k("allRoleTypes"),placeholder:k("searchRoleType"),leftTitle:k("assignedTo"),allLabelLeft:"Select-All-Assigned-Role-Types",allLabelRight:"Select-All-Role-Types"}))))),!Z&&s.createElement("div",{className:A.buttonGrid},s.createElement(m.Z,{color:"primary",variant:"contained",className:A.button,onClick:function(){r?(0,v.MO)({policyId:M,resellerType:null==a?void 0:a.resellerType,userRole:null==a?void 0:a.userRole}).then((function(e){w(e.resultMessage,{variant:"success"}),R.push("/home/settings/access-management/policy_mapping")})).catch((function(e){w(e.resultMessage,{variant:"error"})})):(0,v.AB)({resellerTypes:[F],userRoles:[G]}).then((function(e){e.resellerRolePolicy&&e.resellerRolePolicy.length>0?(le(e.resellerRolePolicy),ce(!0)):oe()})).catch((function(e){19===e.resultCode||13===e.resultCode?oe():R.push("/home/settings/access-management/policy_mapping")}))},disabled:r?!("".concat(M)!=="".concat(null==a||null===(n=a.policy)||void 0===n?void 0:n.id)):!(" "!==M&&F.length&&G.length)},k(r?"update":"save")),s.createElement(m.Z,{color:"secondary",variant:"outlined",onClick:function(){R.push("/home/settings/access-management/policy_mapping/list")}},k("cancel"))),s.createElement(x,{open:ie,data:ne,onSubmit:function(){return oe()},cancel:function(){ce(!1)}}))}}}]);