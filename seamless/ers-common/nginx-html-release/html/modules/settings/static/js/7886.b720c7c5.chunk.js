(self.webpackChunk_unified_settings=self.webpackChunk_unified_settings||[]).push([[7886],{37886:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>Q});var n,i,a,o,r=l(2411),c=l.n(r),p=l(33553),s=l(70773),u=l(63135),d=l(18896),m=l(7560),g=l(55238),f=l(51119),y=l(74315),v=l(97848),b=l(13248),h=l(41744),w=l.n(h),E=l(48049);function C(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,n)}return l}function T(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?C(Object(l),!0).forEach((function(t){(0,f.Z)(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):C(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}var P=null!==(n=null===(i=window)||void 0===i||null===(a=i.config)||void 0===a||null===(o=a.settings)||void 0===o?void 0:o.roleForPolicyMapping)&&void 0!==n&&n;const S=function(e,t){var l=e.children,n=(0,b.useSnackbar)().enqueueSnackbar,i=(0,E.useHistory)(),a=r.useState(!1),o=(0,y.Z)(a,2),c=o[0],p=o[1],s=r.useState(0),u=(0,y.Z)(s,2),d=u[0],m=u[1],g=r.useState([]),f=(0,y.Z)(g,2),w=f[0],C=f[1],S=(0,h.useServerTable)({page:0,perPage:20,order:"desc",orderBy:"availableFrom",filter:{}}),Z=r.useCallback((function(){p(!0),(0,v.ub)({pageNumber:S.page,pageSize:S.perPage}).then((function(e){if(0==e.resultCode){var t=P?e.resellerRolePolicyList.map((function(e,t){return{index:t,resellerType:e.resellerType,roleType:e.userRole,policyId:e.policy.id,policyName:e.policy.name,description:e.policy.description,availableFrom:e.policy.availableFrom,availableUntil:e.policy.availableUntil}})):e.resellerPolicyList.map((function(e,t){return{index:t,resellerType:e.resellerType,policyId:e.policy.id,policyName:e.policy.name,description:e.policy.description,availableFrom:e.policy.availableFrom,availableUntil:e.policy.availableUntil}}));C(t),m(e.totalCount)}else n(e.resultMessage,{variant:"error"})})).catch((function(e){return n(e.resultMessage,{variant:"error"})})).finally((function(){return p(!1)}))}),[S.page,S.perPage]);return r.useEffect((function(){Z()}),[Z]),r.createElement(r.Fragment,null,l(T(T({loading:c,policyMappings:w,totalCount:d},S),{},{handleDelete:function(e,t){p(!0),(0,v.$_)(e,t).then((function(e){0===(null==e?void 0:e.resultCode)?(n(null==e?void 0:e.resultMessage,{variant:"success"}),i.push("/home/settings/access-management/policy_mapping/list")):n("".concat(null==e?void 0:e.resultMessage),{variant:"error"})})).catch((function(e){return n(e.resultMessage,{variant:"error"})})).finally((function(){return p(!1)}))}})))};var Z,k,M,O,x=l(77277),z=l(38592),F=l(8629),N=l(49429),D=l(38724),j=l(55999),B=l(79249),_=l(80030),U=l(60552),H=l(89058),I=l(73659),L=l(79692),R=l(12420),W=null!==(Z=null===(k=window)||void 0===k||null===(M=k.config)||void 0===M||null===(O=M.settings)||void 0===O?void 0:O.hideDateInPolicy)&&void 0!==Z&&Z,V=(0,L.Z)((function(e){var t,l;return(0,R.Z)({dialogHeader:{fontSize:18,fontWeight:"bold",align:"left",backgroundColor:e.palette.primary.main,color:null==e||null===(t=e.palette)||void 0===t||null===(l=t.common)||void 0===l?void 0:l.white},dialogContent:{fontSize:14},fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldContent:{fontSize:13},row:{marginBottom:e.spacing(1)},top:{marginRight:e.spacing(1),marginTop:e.spacing(.5)},content:{textAlign:"left",maxHeight:400,minWidth:550,overflowY:"scroll"},blurBackDrop:{backdropFilter:"blur(2px)",backgroundColor:"rgba(0, 0, 0, 0.2)"},accordian:{backgroundColor:"rgba(128, 128, 128)"},accordianTitle:{color:"white"}})}));const Y=function(e){var t=e.loading,l=e.policyMappings,n=e.page,i=e.perPage,a=e.onPageChange,o=e.onPageSizeChange,c=e.handleDelete,p=e.totalCount,d=(0,u.useTranslation)().t,m=V(),g=r.useState(""),f=(0,y.Z)(g,2),v=f[0],b=f[1],h=r.useState(!1),C=(0,y.Z)(h,2),T=C[0],P=C[1],S=[{field:"resellerType",headerName:d("actorType"),width:180,filterable:!1,sortable:!1},{field:"roleType",headerName:d("roleType"),width:180,filterable:!1,sortable:!1,valueFormatter:function(e){return void 0===e.row.roleType||null===e.row.roleType?d("emptyValueMark"):e.row.roleType}},{field:"policyName",headerName:d("policy"),width:200,filterable:!1,sortable:!1},{field:"description",headerName:d("description"),width:200,filterable:!1,sortable:!1},{field:"availableFrom",headerName:d("availableFrom"),width:200,filterable:!1,hide:W},{field:"availableUntil",headerName:d("availableUntil"),width:200,filterable:!1,hide:W},{field:"actions",headerName:d("actions"),sortable:!1,filterable:!1,width:150,renderCell:function(e){var t,l,n,i;return r.createElement("div",null,r.createElement(z.Z,{size:"small",color:"primary",variant:"text"},r.createElement(_.ZP,{title:"Edit"},r.createElement(x.Z,{component:E.Link,to:"/home/settings/access-management/policy_mapping/".concat(null==e||null===(t=e.row)||void 0===t?void 0:t.resellerType,"/").concat((null==e||null===(l=e.row)||void 0===l?void 0:l.roleType)||"")},r.createElement(I.Z,{fontSize:"small"}))),r.createElement(_.ZP,{title:"View"},r.createElement(x.Z,{component:E.Link,to:"/home/settings/access-management/policy_mapping/view/".concat(null==e||null===(n=e.row)||void 0===n?void 0:n.resellerType,"/").concat((null==e||null===(i=e.row)||void 0===i?void 0:i.roleType)||"")},r.createElement(U.Z,{fontSize:"small"}))),r.createElement(_.ZP,{title:"Delete"},r.createElement(x.Z,{onClick:function(){b(null==e?void 0:e.row),P(!0)}},r.createElement(H.Z,{fontSize:"small"})))))},flex:0}];return r.createElement(r.Fragment,null,r.createElement(w(),{onPageSizeChange:function(e){o(e.pageSize)},onPageChange:function(e){a(e.page)},pagination:!0,paginationMode:"server",page:n,pageSize:i,rowCount:p,rows:l,loading:t,columns:S,getRowId:function(e){return null==e?void 0:e.index},columnBuffer:3,disableColumnFilter:!0}),r.createElement(F.Z,{open:T,keepMounted:!0,onClose:function(){return P(!1)},BackdropProps:{classes:{root:m.blurBackDrop}}},r.createElement(B.Z,{className:m.dialogHeader,disableTypography:!0},d("areYouSure")),r.createElement(D.Z,null,r.createElement(j.Z,{className:m.dialogContent},d("deletePolicyMappingConfirmationText",{actorType:v.resellerType,roleType:v.roleType}))),r.createElement(N.Z,null,r.createElement(s.SeamlessButton,{variant:"outlined",color:"primary",onClick:function(){return P(!1)}},"Cancel"),r.createElement(s.SeamlessButton,{variant:"contained",color:"primary",onClick:function(){c(v.resellerType,v.roleType),P(!1)}},"Delete"))))},q=function(){return c().createElement(S,null,(function(e){var t=e.policyMappings,l=e.loading,n=e.totalCount,i=(0,g.Z)(e,["policyMappings","loading","totalCount"]);return c().createElement("div",{style:{height:600,width:"100%"}},c().createElement(Y,(0,m.Z)({},i,{loading:l,policyMappings:t,totalCount:n})))}))};var A,$,G,J,K=null!==(A=null===($=window)||void 0===$||null===(G=$.config)||void 0===G||null===(J=G.settings)||void 0===J?void 0:J.roleForPolicyMapping)&&void 0!==A&&A;const Q=function(){var e=(0,u.useTranslation)().t;return r.createElement(s.SeamlessContainer,{title:e("policyMapping"),description:e(K?"policyMappingDescriptionRole":"policyMappingDescription")},r.createElement(p.Z,null,r.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},r.createElement(s.SeamlessButton,{variant:"contained",color:"primary",startIcon:r.createElement(d.Z,null),component:E.Link,to:"/home/settings/access-management/policy_mapping/create"},e("createNewPolicyMapping")))),r.createElement("div",{style:{height:"500px",marginTop:"10px"}},r.createElement(q,null)))}}}]);