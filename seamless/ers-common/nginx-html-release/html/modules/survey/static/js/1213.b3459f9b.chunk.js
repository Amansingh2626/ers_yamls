(self.webpackChunk_unified_survey=self.webpackChunk_unified_survey||[]).push([[1213],{1213:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>M});var n=r(773),a=r(2411),o=r.n(a),i=r(9609),l=r(7560),u=r(5238),s=r(1119),c=r(4315),d=r(1744),p=r.n(d),g=r(5072),m=r(8049),f=r(3664);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const v=function(e){var t=e.children,r=a.useState(!1),n=(0,c.Z)(r,2),o=n[0],i=n[1],l=a.useState(0),u=(0,c.Z)(l,2),p=u[0],v=u[1],h=a.useState([]),b=(0,c.Z)(h,2),S=b[0],O=b[1],w=(0,m.useHistory)(),E=(0,f.Z)(),P=E.showErrorMessage,C=(E.showSuccessMessage,(0,d.useServerTable)({page:0,perPage:20,order:"desc",orderBy:"startTime",filter:{}})),Z=a.useCallback((function(){i(!0),(0,g.jY)({page:C.page,perPage:C.perPage}).then((function(e){var t;0===e.resultCode?(O(null==e?void 0:e.surveys),v(null==e||null===(t=e.metadata)||void 0===t?void 0:t.totalCount)):(P(e.resultDescription),w.push("/home/survey/survey/list"))})).catch((function(e){P(e.resultMessage),w.push("/home/survey/survey/list")})).finally((function(){i(!1)}))}),[C.page,C.perPage]);return a.useEffect((function(){Z()}),[Z]),a.createElement(a.Fragment,null,t(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({pendingSurveys:S,loading:o,totalCount:p},C)))};var h=r(282),b=r(868),S=r(4104),O=r.n(S),w=r(7801),E=r(3442),P=r(1120),C=r(5117),Z=(r(3297),r(327)),j=r(3855);(0,P.Z)((function(e){document.documentElement.style.setProperty("--theme-primary-color",e.palette.primary.main),(0,C.Z)({})}));const k=function(e){var t=e.loading,r=e.pendingSurveys,n=e.page,o=e.perPage,l=e.onPageChange,u=e.onPageSizeChange,s=e.totalCount,c=(0,i.useTranslation)().t,d=O()().checkPermission,g=[{field:"surveyName",headerName:c("surveyName"),width:200,filterable:!1,sortable:!1},{field:"surveyee",headerName:c("surveyee"),width:200,filterable:!1,sortable:!1},{field:"surveyType",headerName:c("surveyType"),width:200,filterable:!1,sortable:!1},{field:"createdOn",headerName:c("pendingSince"),width:200,filterable:!1,sortable:!1,renderCell:function(e){return a.createElement("div",null,e.getValue("createdOn")?(0,Z.Z)((0,j.Z)(new Date(e.getValue("createdOn")).toISOString()),"dd-MM-yyyy HH:mm:ss"):"")}},{field:"actions",headerName:c("actions"),sortable:!1,filterable:!1,renderCell:function(e){var t;return a.createElement("div",null,d(w.Z.SUBMIT_SURVEY)&&a.createElement(b.ZP,{title:"Submit Survey"},a.createElement(h.Z,{component:m.Link,to:"/home/survey/submit-survey/".concat(null==e||null===(t=e.row)||void 0===t?void 0:t.id)},a.createElement(E.Z,{fontSize:"small"}))))},flex:1}];return a.createElement(a.Fragment,null,a.createElement(p(),{onPageSizeChange:function(e){u(e.pageSize)},onPageChange:function(e){l(e.page)},pagination:!0,paginationMode:"server",page:n,pageSize:o,rowCount:s,rows:r,loading:t,columns:g,getRowId:function(e){return e.surveyDocumentId},columnBuffer:3,sortingMode:"server",disableColumnFilter:!0}))},D=function(){return o().createElement(v,null,(function(e){var t=e.reports,r=e.loading,n=e.totalCount,a=(0,u.Z)(e,["reports","loading","totalCount"]);return o().createElement("div",{style:{height:500,width:"100%"}},o().createElement(k,(0,l.Z)({},a,{loading:r,reports:t,totalCount:n})))}))},M=function(){var e=(0,i.useTranslation)().t;return a.createElement(n.SeamlessContainer,{title:e("submitSurvey"),description:e("submitSurveyDescription")},a.createElement("div",{style:{height:"500px",marginTop:"10px"}},a.createElement(D,null)))}}}]);