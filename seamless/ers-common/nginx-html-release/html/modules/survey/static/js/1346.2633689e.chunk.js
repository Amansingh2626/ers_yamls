(self.webpackChunk_unified_survey=self.webpackChunk_unified_survey||[]).push([[1346],{1346:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>M});var a=r(2411),n=r(5167),i=r(9609),o=r(1119),l=r(1746),c=r(4315),s=r(282),u=r(773),m=r(1749),g=r(6019),p=r(2663),d=r(6856),v=r(9525),f=r(7212),y=r(6083),h=r(585),Z=r(4436),b=r(553),E=r(9570),S=r(1120),k=r(5117),C=r(6277),w=r(8069),O=r(8049),T=r(9721),N=r(5072);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var j=(0,S.Z)((function(e){var t,r;return(0,k.Z)({rowSpacing:{marginBottom:e.spacing(.5)},element:{maxWidth:"100%",marginRight:e.spacing(1),marginBottom:e.spacing(1)},description:{marginRight:e.spacing(1)},marginTop5:{marginTop:"10px",fontWeight:700,"& button":{marginRight:"10px",marginTop:"15px"}},resellerSelect:{"& .MuiSelect-select":{borderRadius:"5px",marginTop:3}},label:{color:e.palette.text.secondary,fontSize:12.5,marginBottom:6,textTransform:"capitalize"},leftLabelControl:{paddingRight:5},dialogHeader:{fontSize:18,fontWeight:"bold",align:"left",backgroundColor:e.palette.primary.main,color:null==e||null===(t=e.palette)||void 0===t||null===(r=t.common)||void 0===r?void 0:r.white},dialogContent:{fontSize:14},blurBackDrop:{backdropFilter:"blur(2px)",backgroundColor:"rgba(0, 0, 0, 0.2)"},spacing:{marginLeft:e.spacing(2)}})}));const D=function(e){var t=e.loading,r=e.categories,S=e.updateData,k=e.isUpdate,P=j(),D=(0,O.useHistory)(),B=(0,i.useTranslation)().t,M=(0,O.useParams)().id,q=(0,T.useSnackbar)().enqueueSnackbar,L=a.useState(!1),R=(0,c.Z)(L,2),U=R[0],z=R[1],H=a.useState(""),W=(0,c.Z)(H,2),_=W[0],A=W[1],F=a.useState(!1),I=(0,c.Z)(F,2),$=I[0],G=I[1],J=a.useState(!1),K=(0,c.Z)(J,2),Q=K[0],V=K[1],X=a.useState(!0),Y=(0,c.Z)(X,2),ee=Y[0],te=Y[1],re=a.useState(!0),ae=(0,c.Z)(re,2),ne=ae[0],ie=ae[1],oe=null==S?void 0:S.surveyCategories.map((function(e){return"".concat(e.id)})).sort(),le=a.useState((function(){for(var e={},t=0;t<r.length;t++)e[r[t].id]=!1;return e})),ce=(0,c.Z)(le,2),se=ce[0],ue=ce[1];return a.useEffect((function(){if(k){for(var e=0;e<(null==S?void 0:S.surveyCategories.length);e++)se[null==S?void 0:S.surveyCategories[e].id]=!0;A(null==S?void 0:S.surveyTypeName)}}),[S]),t?a.createElement(n.Z,{width:"100%"},a.createElement(n.Z,{m:1},a.createElement(w.Z,{animation:"wave",variant:"text",width:200,height:45})),a.createElement(n.Z,{m:1},a.createElement(m.Z,{container:!0,spacing:3,className:P.rowSpacing},a.createElement(m.Z,{item:!0,xs:12,sm:3,md:2},a.createElement(w.Z,{animation:"wave",variant:"circle",width:20,height:20})),a.createElement(m.Z,{item:!0,xs:12,sm:3,md:2},a.createElement(w.Z,{animation:"wave",variant:"circle",width:20,height:20})),a.createElement(m.Z,{item:!0,xs:12,sm:3,md:2},a.createElement(w.Z,{animation:"wave",variant:"circle",width:20,height:20}))))):a.createElement(a.Fragment,null,a.createElement(m.Z,{container:!0},a.createElement(Z.Z,{component:"fieldset",error:Q,variant:"standard"},a.createElement(m.Z,{container:!0,spacing:3,className:P.rowSpacing},a.createElement(m.Z,{item:!0,xs:12,sm:3,md:4},a.createElement(u.SeamlessInput,{required:!0,fullWidth:!0,value:_,onChange:function(e){var t;A(null==e||null===(t=e.target)||void 0===t?void 0:t.value.trimLeft()),""===e.target.value?(G(!0),te(!0)):(G(!1),te(!1)),k&&ne&&e.target.value==S.surveyTypeName&&te(!0)},error:$,helperText:$?"Survey Type name must be non-empty":"",label:B("Survey Type"),className:(0,C.default)(P.element),name:"surveyTypeName"}))),a.createElement(g.Z,{error:Q,className:(0,C.default)(P.label,P.leftLabelControl)},"Select Category"),a.createElement(m.Z,{container:!0,spacing:3,className:P.rowSpacing},r.map((function(e){return a.createElement(m.Z,{item:!0,xs:!0,sm:!0,md:!0,lg:!0,key:e.id,className:P.spacing},a.createElement(b.Z,{control:a.createElement(E.Z,{color:"primary",onChange:function(e){1==e.target.checked&&V(!1),ue(x(x({},se),{},(0,o.Z)({},e.target.name,e.target.checked))),k&&function(e){var t=Object.keys(se).filter((function(e){return 1==se[e]})),r=[].concat((0,l.Z)(t),[e.target.name]),a=t.filter((function(t){return t!=e.target.name}));if(1==e.target.checked){var n=r.length==oe.length&&r.every((function(e){return oe.includes(e)}));te(!!n)}else a.length==oe.length&&oe.every((function(e){return a.includes(e)}))?(te(!0),ie(!0)):(te(!1),ie(!1))}(e)},checked:!!se[e.id]&&se[e.id],name:"".concat(e.id)}),label:e.surveyCategoryName}))}))),a.createElement(m.Z,{item:!0},Q?a.createElement(h.Z,null,B("Category list should not be empty")):null))),a.createElement("div",{className:P.marginTop5},a.createElement(s.Z,{color:"primary",variant:"contained",onClick:function(){var e=Object.keys(se).filter((function(e){return 1==se[e]}));e.length<=0?V(!0):(V(!1),k?z(!0):(0,N.Z$)({surveyTypeName:_.trim(),categories:e.length>0?e:null}).then((function(e){q(e.resultDescription,{variant:"success"}),D.push("/home/survey/type/list")})).catch((function(e){q(e.resultMessage,{variant:"error"})})))},disabled:ee},k?B("update","Update"):B("save","Save"))),a.createElement(p.Z,{open:U,keepMounted:!0,onClose:function(){return z(!1)},BackdropProps:{classes:{root:P.blurBackDrop}}},a.createElement(y.Z,{className:P.dialogHeader,disableTypography:!0},"Are you sure?"),a.createElement(v.Z,null,a.createElement(f.Z,{className:P.dialogContent},"Are you sure you want to Save the changes?")),a.createElement(d.Z,null,a.createElement(u.SeamlessButton,{variant:"outlined",color:"primary",onClick:function(){return z(!1)}},"Cancel"),a.createElement(u.SeamlessButton,{variant:"contained",color:"primary",onClick:function(){var e=Object.keys(se).filter((function(e){return 1==se[e]}));e.length<=0?V(!0):(V(!1),z(!1),e.length<=0?V(!0):(V(!1),(0,N.b)(M,{surveyTypeName:_.trim(),categories:e.length>0?e:null}).then((function(e){0==(null==e?void 0:e.resultCode)?(q(e.resultDescription,{variant:"success"}),D.push("/home/survey/type/list")):(q(e.resultDescription,{variant:"error"}),D.push("/home/survey/type/list"))})).catch((function(e){q(e.resultMessage,{variant:"error"})}))))}},"Save"))))},B=function(e){var t=e.children,r=(0,T.useSnackbar)().enqueueSnackbar,n=(0,O.useHistory)(),i=(0,O.useParams)().id,o=a.useState(!1),l=(0,c.Z)(o,2),s=l[0],u=l[1],m=a.useState(!1),g=(0,c.Z)(m,2),p=g[0],d=g[1],v=a.useState({}),f=(0,c.Z)(v,2),y=f[0],h=(f[1],a.useState([])),Z=(0,c.Z)(h,2),b=Z[0],E=Z[1],S=a.useState(),k=(0,c.Z)(S,2),C=k[0],w=k[1];return a.useEffect((function(){d(!0),"create"!=i&&(u(!0),(0,N.ru)(i).then((function(e){w(e.surveyType)})).catch((function(e){r(e.resultMessage,{variant:"error"}),n.push("/home/survey/type/list")}))),(0,N.AT)({categoryPerPage:2147483647,categoryPageNo:0,questionPerPage:0,questionPageNo:0}).then((function(e){0===e.resultCode?E(null==e?void 0:e.surveyCategoryList):(r(e.resultDescription,{variant:"error"}),n.push("/home/survey/type/list"))})).catch((function(e){r(e.resultMessage,{variant:"error"}),n.push("/home/survey/type/list")})).finally((function(){return d(!1)})),d(!1)}),[i]),a.createElement(a.Fragment,null,t({loading:p,data:y,categories:b,updateData:C,isUpdate:s}))},M=function(){return(0,i.useTranslation)().t,a.createElement(n.Z,{p:2},a.createElement(B,null,(function(e){e.data;var t=e.loading,r=e.categories,n=e.updateData,i=e.isUpdate;return a.createElement(D,{loading:t,categories:r,updateData:n,isUpdate:i})})))}}}]);