(self.webpackChunk_unified_survey=self.webpackChunk_unified_survey||[]).push([[1891],{1891:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>B});var n=r(2411),a=r.n(n),o=r(5167),l=r(8049),i=r(8896),u=r(9609),s=r(7560),c=r(5238),d=r(1119),v=r(4315),m=r(1744),f=r.n(m),y=r(5072),p=r(9721);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,d.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const E=function(e){var t=e.children,r=(0,l.useHistory)(),a=n.useState([]),o=(0,v.Z)(a,2),i=o[0],u=o[1],s=n.useState(!1),c=(0,v.Z)(s,2),d=c[0],f=c[1],g=n.useState(0),E=(0,v.Z)(g,2),b=E[0],C=E[1],S=n.useState({key:"",value:"",operator:""}),Z=(0,v.Z)(S,2),O=Z[0],P=Z[1],w=(0,p.useSnackbar)().enqueueSnackbar,k=(0,m.useServerTable)({page:0,perPage:20,order:"asc",orderBy:"",filter:{}}),M=k.page,N=k.perPage,T=k.order,D=k.orderBy,j=k.onPageSizeChange,x=k.onPageChange,z=k.onOrderByChange,L=k.onOrderChange,R=k.onReset,V=n.useCallback((function(){f(!0),(0,y.gp)({perPage:N,page:M,sort:"".concat(D,"_").concat(null==T?void 0:T.toLowerCase()),filter:JSON.stringify([{key:O.key,operator:O.operator,value:O.value}])}).then((function(e){if(0==e.resultCode){var t;C(null==e||null===(t=e.metadata)||void 0===t?void 0:t.totalCount);var n=null==e?void 0:e.surveys.map((function(e){return h(h({},e),{},{surveyTypeName:e.surveyType.surveyTypeName})}));u(n)}else w(e.resultDescription,{variant:"error"}),r.push("/home/")})).catch((function(e){w(e.resultMessage,{variant:"error"}),r.push("/home/")})).finally((function(){f(!1)}))}),[M,N,O,T,D]);return n.useEffect((function(){V()}),[V]),n.createElement(n.Fragment,null,t({surveyList:i,loading:d,totalCount:b,page:M,perPage:N,order:T,orderBy:D,filter:O,onPageSizeChange:j,onPageChange:x,onOrderByChange:z,onOrderChange:L,onReset:R,setFilter:P}))};var b=r(484),C=r(552),S=r(282),Z=r(4837),O=r(868),P=r(3659),w=r(1033),k=r(327),M=r(3855),N=r(1120),T=r(5117),D=r(8920),j=r(4104),x=r.n(j),z=r(7801);r(3297),(0,N.Z)((function(e){document.documentElement.style.setProperty("--theme-primary-color",e.palette.primary.main),(0,T.Z)({})}));const L=function(e){var t=e.loading,r=e.surveyList,a=e.totalCount,o=e.page,i=e.perPage,s=(e.order,e.orderBy,e.filter,e.onPageSizeChange),c=e.onPageChange,d=e.onOrderByChange,m=e.onOrderChange,g=(e.onReset,e.setFilter),h=n.useState(),E=(0,v.Z)(h,2),N=E[0],T=E[1],j=n.useState(!1),L=(0,v.Z)(j,2),R=L[0],V=L[1],B=(0,p.useSnackbar)().enqueueSnackbar,_=(0,u.useTranslation)().t,I=(0,l.useHistory)(),F=((0,D.Z)(),n.useState(!1)),H=(0,v.Z)(F,2),U=H[0],Y=H[1],q=x()().checkPermission,A=n.useCallback((function(e){e.filterModel.items[0].columnField&&e.filterModel.items[0].value&&e.filterModel.items[0].operatorValue?g({key:e.filterModel.items[0].columnField,value:e.filterModel.items[0].value,operator:e.filterModel.items[0].operatorValue}):g({key:"",value:"",operator:""})}),[]),Q=n.useCallback((function(e){e.sortModel[0].sort&&(d(e.sortModel[0].field),m(e.sortModel[0].sort))}),[]),G=[{field:"surveyName",headerName:_("surveyName","Survey Name"),flex:1,filterable:!0,sortable:!0},{field:"surveyTypeName",headerName:_("surveyType","Survey Type"),flex:1,filterable:!1,sortable:!0},{field:"totalQuestionCount",headerName:_("noOfQuestion","No of question"),flex:1,filterable:!1,sortable:!1},{field:"createdOn",headerName:_("createdOn"),flex:1,filterable:!0,sortable:!0,renderCell:function(e){return n.createElement("div",null,e.getValue("createdOn")?(0,k.Z)((0,M.Z)(new Date(e.getValue("createdOn")).toISOString()),"dd-MM-yyyy HH:mm:ss"):"")}},{field:"actions",headerName:_("actions"),flex:1,filterable:!1,sortable:!1,renderCell:function(e){var t,r,a,o,i,u;return n.createElement("div",null,n.createElement(Z.Z,{size:"small",color:"primary",variant:"text"},q(z.Z.EDIT_SURVEY)&&n.createElement(O.ZP,{title:"Edit"},n.createElement(S.Z,{component:l.Link,to:"/home/survey/survey/".concat(null==e||null===(t=e.row)||void 0===t?void 0:t.surveyId),disabled:!(null!=e&&null!==(r=e.row)&&void 0!==r&&null!==(a=r.status)&&void 0!==a&&a.editable)},n.createElement(P.Z,{fontSize:"small"}))),q(z.Z.VIEW_SURVEY)&&n.createElement(O.ZP,{title:"View"},n.createElement(S.Z,{component:l.Link,to:"/home/survey/survey/view/".concat(null==e||null===(o=e.row)||void 0===o?void 0:o.surveyId)},n.createElement(C.Z,{fontSize:"small"}))),q(z.Z.DELETE_SURVEY)&&n.createElement(O.ZP,{title:"Delete"},n.createElement(S.Z,{onClick:function(){T(null==e?void 0:e.row),V(!0)},disabled:!(null!=e&&null!==(i=e.row)&&void 0!==i&&null!==(u=i.status)&&void 0!==u&&u.deletable)},n.createElement(b.Z,{fontSize:"small"})))))}}];return n.createElement(n.Fragment,null,n.createElement(f(),{onPageSizeChange:function(e){s(e.pageSize)},onPageChange:function(e){c(e.page)},pagination:!0,paginationMode:"server",page:o,pageSize:i,rowCount:a,rows:r,loading:t,columns:G,getRowId:function(e){return e.surveyId},columnBuffer:3,sortingMode:"server",filterMode:"server",onFilterModelChange:A,onSortModelChange:Q}),n.createElement(w.Z,{open:R,currentRow:N,setOpen:V,name:null==N?void 0:N.surveyName,deleteHandler:function(e){Y(!0),(0,y.Gn)(null==e?void 0:e.id).then((function(e){0===(null==e?void 0:e.resultCode)?(B("Survey deleted successfully",{variant:"success"}),I.push("/home/survey/survey/list")):B("".concat(null==e?void 0:e.resultDescription),{variant:"error"})})).catch((function(e){return B("".concat(e.resultMessage),{variant:"error"})})).finally((function(){return Y(!1)})),V(!1)},disabled:U,deleteText:"Are you sure you want to delete Survey "}))},R=function(){return a().createElement(E,null,(function(e){var t=e.surevyList,r=e.loading,n=e.totalCount,o=(0,c.Z)(e,["surevyList","loading","totalCount"]);return a().createElement("div",{style:{height:500,width:"100%"}},a().createElement(L,(0,s.Z)({},o,{loading:r,surevyList:t,totalCount:n})))}))};var V=r(773);const B=function(){var e=(0,u.useTranslation)().t,t=x()().checkPermission;return n.createElement(V.SeamlessContainer,{title:e("survey","Survey"),description:e("surveyManagementDescription","")},t(z.Z.CREATE_SURVEY)&&n.createElement(o.Z,{display:"flex",flexDirection:"row"},n.createElement(V.SeamlessButton,{component:l.Link,to:"/home/survey/survey/create",variant:"contained",color:"primary",startIcon:n.createElement(i.Z,null)},e("createNew","Create new"))),n.createElement("div",{style:{height:"500px",marginTop:"10px"}},n.createElement(R,null)))}}}]);