(self.webpackChunk_unified_survey=self.webpackChunk_unified_survey||[]).push([[249],{2049:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var i=n(1119),u=n(6470),r=n(4315),o=n(7162),a=n.n(o),l=n(2411),s=n.n(l),c=n(8049),d=n(3664),m=n(5072);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const f=function(e){var t=e.children,n=(0,c.useHistory)(),i=(0,c.useParams)(),o=s().useState(),l=(0,r.Z)(o,2),v=l[0],f=l[1],q=s().useState(!1),h=(0,r.Z)(q,2),y=h[0],g=h[1],Z=s().useState(),E=(0,r.Z)(Z,2),S=E[0],x=E[1],b=s().useState(),w=(0,r.Z)(b,2),I=w[0],k=w[1],C=s().useState(),O=(0,r.Z)(C,2),N=O[0],T=O[1],D=(0,d.Z)(),M=D.showErrorMessage,j=(D.showSuccessMessage,function(){var e=(0,u.Z)(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.next=3,(0,m.HI)({id:null==i?void 0:i.questionCategoryId}).then(function(){var e=(0,u.Z)(a().mark((function e(u){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p({},u.surveyCategoryEntity),g(!0),e.next=4,(0,m.oI)({id:null==i?void 0:i.questionCategoryId}).then((function(e){var n,i=null==e||null===(n=e.categoryQuestionList)||void 0===n?void 0:n.map((function(e){var n=null==t?void 0:t.find((function(t){var n;return(null==e||null===(n=e.questionData)||void 0===n?void 0:n.type)==(null==t?void 0:t.questionTypeId)}));return{questionMetadata:null==n?void 0:n.questionMetadata,questionStructure:p(p({},null==e?void 0:e.questionData),{},{questionId:e.questionId,inactive:e.inactive})}}));r=p(p({},r),{},{questions:i})})).catch((function(e){M(null==e?void 0:e.resultDescription),n.push("/home/survey/question-category/list")})).finally((function(){return g(!1)}));case 4:f(r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){M(null==e?void 0:e.resultDescription),n.push("/home/survey/question-category/list")})).finally((function(){return g(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),P=function(){var e=(0,u.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.Av)().then(function(){var e=(0,u.Z)(a().mark((function e(t){var u,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null==t||null===(u=t.questionTypes)||void 0===u?void 0:u.map((function(e){return{name:null==e?void 0:e.questionTypeName,value:null==e?void 0:e.questionTypeId}})),x(r),T(null==t?void 0:t.questionTypes),e.next=5,void(0,m.R8)().then((function(e){k(null==e?void 0:e.autoPickQuestionDTOS)})).catch((function(e){M(null==e?void 0:e.resultDescription),n.push("/home/survey/question-category/list")}));case 5:"create"!=(null==i?void 0:i.questionCategoryId)&&j(null==t?void 0:t.questionTypes);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){M(null==e?void 0:e.resultDescription),n.push("/home/survey/question-category/list")})).finally((function(){"create"===(null==i?void 0:i.questionCategoryId)&&g(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return s().useEffect((function(){g(!0),P()}),[null==i?void 0:i.questionCategoryId]),s().createElement(s().Fragment,null,t({loading:y,data:v,questionFormat:N,questionType:S,autopickColletion:I}))}},38:(e,t,n)=>{"use strict";n.d(t,{Z:()=>A});var i=n(1746),u=n(1119),r=n(6470),o=n(4315),a=n(7162),l=n.n(a),s=n(2411),c=n.n(s),d=n(1120),m=n(5117),v=n(773),p=n(3258),f=n(4436),q=n(553),h=n(6562),y=n(585),g=n(6019),Z=n(8662),E=n(2541),S=(0,d.Z)((function(e){return(0,m.Z)({testStyle:{"& textarea":{padding:"auto!important",height:"100px !important",resize:"both"}}})}));const x=function(e){var t=null==e?void 0:e.question,n=t.type,u=t.required,r=t.id,a=t.name,l=t.options,s=t.helperText,d=S(),m=c().useState(a),x=(0,o.Z)(m,2),b=x[0],w=x[1],I="dropdown"===n?l.map((function(e){return{key:e.value,value:l.key}})):[];switch(c().useEffect((function(){w(u?"".concat(a," *"):"".concat(a))}),[u,a]),n){case"short_answer":return c().createElement(v.SeamlessInput,{fullWidth:!0,name:r,label:b,helperText:s});case"paragraph":return c().createElement(v.SeamlessInput,{fullWidth:!0,name:r,label:b,multiline:!0,helperText:s,inputClassName:d.testStyle});case"checkbox":return c().createElement(f.Z,{component:"fieldset"},c().createElement(g.Z,{component:"legend"},b),c().createElement(h.Z,null,null==l?void 0:l.map((function(e,t){return c().createElement(q.Z,{label:null==e?void 0:e.value,key:"checkboxs_"+t,control:c().createElement(p.Z,{name:null==e?void 0:e.key,value:null==e?void 0:e.value})})}))),c().createElement(y.Z,null,s));case"dropdown":return c().createElement(v.SeamlessDropDown,{fullWidth:!0,label:b,helperText:s,options:[{key:"Select",value:null}].concat((0,i.Z)(I||[]))});case"radio_button":return c().createElement(f.Z,{component:"fieldset"},c().createElement(g.Z,{component:"legend"},b),c().createElement(E.Z,{"aria-label":a,name:a},null==l?void 0:l.map((function(e,t){return c().createElement(q.Z,{key:"radio_"+t,value:null==e?void 0:e.value,control:c().createElement(Z.Z,null),label:null==e?void 0:e.value})}))),c().createElement(y.Z,null,s));case"decimal":return c().createElement(v.SeamlessInput,{fullWidth:!0,name:r,label:b,type:"number",helperText:s});default:return null}};var b=n(282),w=n(9609),I=n(2983),k=n(9570),C=n(2318),O=n(1749),N=n(8463),T=n(9912),D=n(7812),M=(0,d.Z)((function(e){return(0,m.Z)({mainGrid:{marginBottom:e.spacing(1)},cardSpace:{marginBottom:e.spacing(3)},footer:{borderTop:"2px solid #f5f5f5"},delete:{marginTop:18},heading:{fontWeight:600,fontSize:16}})}));const j=function(e){var t=e.edit,n=e.addOption,u=e.questions,r=e.deleteQuestion,o=e.handleChange,a=e.questionType,l=e.deleteOption,s=e.questionTypeHandler,d=e.autopickColletion,m=e.setFieldNature,p=M(),f=(0,w.useTranslation)().t;return c().createElement(c().Fragment,null,null==u?void 0:u.map((function(e,u){var h,y,g,Z,E,S,w,M,j,P,W,L,F,z,Q,B,_,G,H,A,R,V,K,U,J,X,Y,$,ee,te,ne,ie,ue,re,oe,ae,le,se,ce,de,me,ve,pe,fe,qe,he,ye,ge,Ze,Ee,Se,xe;return c().createElement(N.Z,{className:p.cardSpace,key:"".concat(u,"}")},c().createElement(T.Z,null,c().createElement(O.Z,{container:!0,spacing:3},c().createElement(O.Z,{item:!0,xs:12,className:p.mainGrid},c().createElement(O.Z,{container:!0,spacing:3},c().createElement(O.Z,{item:!0,xs:12,sm:3,md:3},c().createElement(v.SeamlessDropDown,{fullWidth:!0,required:!0,disabled:!t,label:f("Select question type"),options:[{name:"Select Question Type",value:""}].concat((0,i.Z)(a||[])).map((function(e){return{value:e.value,key:e.name}})),onChange:function(e){var t;o(e),s(null==e||null===(t=e.target)||void 0===t?void 0:t.value,u)},value:e.questionStructure.type,name:"questions.".concat(u,".questionStructure.type")})),c().createElement(O.Z,{item:!0,xs:12,sm:6,md:6},"autopick"==(null==e||null===(h=e.questionStructure)||void 0===h?void 0:h.type)?c().createElement(v.SeamlessDropDown,{required:!0,fullWidth:!0,disabled:!t,label:f("Autopick Question name"),options:[{key:"Select",value:null}].concat((0,i.Z)((d||[]).map((function(e){return{value:e.questionKey,key:e.questionName}})))),onChange:function(e){var t;o(e),m(null==e||null===(t=e.target)||void 0===t?void 0:t.value,u,"autopick")},value:e.questionStructure.id,name:"questions.".concat(u,".questionStructure.id")}):c().createElement(v.SeamlessInput,{required:!0,fullWidth:!0,disabled:!t,onChange:function(e){var t;o(e),m(null===(t=e.target)||void 0===t?void 0:t.value,u,"generic")},label:f("Add question"),value:e.questionStructure.name.trimLeft(),name:"questions.".concat(u,".questionStructure.name")})),"autopick"==(null==e||null===(y=e.questionStructure)||void 0===y?void 0:y.type)?null:c().createElement(O.Z,{item:!0,xs:12,sm:3,md:3},c().createElement(v.SeamlessInput,{required:!0,fullWidth:!0,disabled:!t,label:"Helper text",onChange:o,value:e.questionStructure.helperText,name:"questions.".concat(u,".questionStructure.helperText")})))),c().createElement(O.Z,{item:!0,xs:12,className:p.mainGrid},c().createElement(O.Z,{container:!0,spacing:3},null!=e&&null!==(g=e.questionMetadata)&&void 0!==g&&null!==(Z=g.extraInfo)&&void 0!==Z&&null!==(E=Z.maxLength)&&void 0!==E&&E.mutable?c().createElement(O.Z,{item:!0,xs:12,sm:3,md:3},c().createElement(v.SeamlessInput,{fullWidth:!0,required:!0,readOnly:!(null!=e&&null!==(S=e.questionMetadata)&&void 0!==S&&null!==(w=S.extraInfo)&&void 0!==w&&w.mutable),disabled:!t,onChange:o,label:f("maxLength","Max-length"),value:null===(M=e.questionStructure)||void 0===M||null===(j=M.extraInfo)||void 0===j?void 0:j.maxLength,type:(null==e||null===(P=e.questionMetadata)||void 0===P||null===(W=P.extraInfo)||void 0===W||null===(L=W.maxLength)||void 0===L?void 0:L.type)||"number",name:"questions.".concat(u,".questionStructure.extraInfo.maxLength")})):null,null!=e&&null!==(F=e.questionMetadata)&&void 0!==F&&null!==(z=F.extraInfo)&&void 0!==z&&null!==(Q=z.availableFields)&&void 0!==Q&&null!==(B=Q.maxSizeMB)&&void 0!==B&&B.mutable?c().createElement(O.Z,{item:!0,xs:12,sm:3,md:3},c().createElement(v.SeamlessDropDown,{fullWidth:!0,disabled:!t,label:f("Select size of Image"),options:[{name:"Select",value:null}].concat((0,i.Z)(null===(_=(null==e||null===(G=e.questionMetadata)||void 0===G||null===(H=G.extraInfo)||void 0===H||null===(A=H.availableFields)||void 0===A||null===(R=A.maxSizeMB)||void 0===R?void 0:R.availableValues)||[])||void 0===_?void 0:_.map((function(e){return{value:e+"",name:e+""}})))).map((function(e){return{value:e.value,key:e.name}})),onChange:o,value:null===(V=e.questionStructure)||void 0===V||null===(K=V.extraInfo)||void 0===K?void 0:K.maxSizeMB,name:"questions.".concat(u,".questionStructure.extraInfo.maxSizeMB")})):null)),null!=e&&null!==(U=e.questionMetadata)&&void 0!==U&&null!==(J=U.extraInfo)&&void 0!==J&&null!==(X=J.availableFields)&&void 0!==X&&null!==(Y=X.noOfImage)&&void 0!==Y&&Y.mutable?c().createElement(O.Z,{item:!0,xs:12,className:p.mainGrid},c().createElement(O.Z,{container:!0,spacing:3},c().createElement(O.Z,{item:!0,xs:12,sm:3,md:3},c().createElement(v.SeamlessInput,{fullWidth:!0,required:!0,disabled:!t,onChange:o,label:f("noOfImage","No of Images"),value:null===($=e.questionStructure)||void 0===$||null===(ee=$.extraInfo)||void 0===ee?void 0:ee.noOfImage,type:(null==e||null===(te=e.questionMetadata)||void 0===te||null===(ne=te.extraInfo)||void 0===ne||null===(ie=ne.availableFields)||void 0===ie||null===(ue=ie.noOfImage)||void 0===ue?void 0:ue.type)||"number",inputProps:{min:1},name:"questions.".concat(u,".questionStructure.extraInfo.noOfImage")})))):null,null!==(re=e.questionStructure)&&void 0!==re&&null!==(oe=re.options)&&void 0!==oe&&oe.length?c().createElement(O.Z,{item:!0,xs:12,className:p.mainGrid,key:null===(ae=e.questionStructure)||void 0===ae||null===(le=ae.options)||void 0===le?void 0:le.length},null===(se=e.questionStructure)||void 0===se||null===(ce=se.options)||void 0===ce?void 0:ce.map((function(e,n){return c().createElement(O.Z,{container:!0,spacing:3,key:u+"-"+n},c().createElement(O.Z,{item:!0,xs:12,sm:3,md:3},c().createElement(v.SeamlessInput,{required:!0,fullWidth:!0,label:"Option "+(n+1),value:e.value,disabled:!t,onChange:o,name:"questions.".concat(u,".questionStructure.options.").concat(n,".value")})),0!=n&&t?c().createElement(O.Z,{item:!0,xs:12,sm:3,md:3},c().createElement(D.Z,{className:p.delete,onClick:function(){return l(u,n)}},c().createElement(I.Z,{fontSize:"small"}))):null)}))):null,null!==(de=e.questionStructure)&&void 0!==de&&null!==(me=de.options)&&void 0!==me&&me.length&&t?c().createElement(O.Z,{item:!0,xs:12,className:p.mainGrid},c().createElement(O.Z,{container:!0,spacing:3},c().createElement(O.Z,{item:!0,xs:12,sm:3,md:3},c().createElement(b.Z,{type:"button",variant:"outlined",onClick:function(){return n(u)}},f("addNew","Add"))))):null,null!==(ve=e.questionStructure)&&void 0!==ve&&ve.type&&"image"!=(null===(pe=e.questionStructure)||void 0===pe?void 0:pe.type)&&"autopick"!=(null===(fe=e.questionStructure)||void 0===fe?void 0:fe.type)?c().createElement(O.Z,{item:!0,xs:12,className:p.mainGrid},c().createElement(O.Z,{container:!0,spacing:3},c().createElement(O.Z,{item:!0,xs:12,sm:12,md:12},c().createElement(C.Z,{color:"primary",className:p.heading},"Preview")),c().createElement(O.Z,{item:!0,xs:12,sm:3,md:3},c().createElement(x,{question:e.questionStructure})))):null,c().createElement(O.Z,{container:!0,direction:"row",alignItems:"center",justifyContent:"flex-end",className:p.footer},null!=e&&null!==(qe=e.questionMetadata)&&void 0!==qe&&null!==(he=qe.scorable)&&void 0!==he&&he.mutable?c().createElement(q.Z,{control:c().createElement(k.Z,{color:"primary",onChange:o,value:null===(ye=e.questionStructure)||void 0===ye?void 0:ye.scorable,checked:null===(ge=e.questionStructure)||void 0===ge?void 0:ge.scorable,name:"questions.".concat(u,".questionStructure.scorable")}),disabled:!t,label:f("scorable","Scorable")}):null,null!=e&&null!==(Ze=e.questionMetadata)&&void 0!==Ze&&null!==(Ee=Ze.required)&&void 0!==Ee&&Ee.mutable?c().createElement(q.Z,{control:c().createElement(k.Z,{color:"primary",disabled:!t,onChange:o,value:null===(Se=e.questionStructure)||void 0===Se?void 0:Se.required,checked:null===(xe=e.questionStructure)||void 0===xe?void 0:xe.required,name:"questions.".concat(u,".questionStructure.required")}),label:"Required"}):null,t?c().createElement(D.Z,{onClick:function(){return r(e)}},c().createElement(I.Z,{fontSize:"small"})):null))))})))};var P=n(2598),W=n(8069),L=n(8049),F=n(3664),z=n(8188),Q=n(5167),B=n(5072);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=(0,d.Z)((function(e){return(0,m.Z)({rowSpacing:{marginBottom:e.spacing(.5)},skeletonTop:{marginTop:"30px"},skeletonLeft:{marginLeft:"10px"},heading:{fontWeight:600,fontSize:18,marginTop:20},submit:{marginTop:40}})}));const A=function(e){var t=e.edit,n=e.loading,u=e.data,a=e.questionFormat,c=e.questionType,d=e.autopickColletion,m=H(),p=(0,L.useHistory)(),f=(0,w.useTranslation)().t,q=(0,L.useParams)(),h=(0,F.Z)(),y=h.showErrorMessage,g=h.showSuccessMessage,Z=s.useState({categoryName:"",questions:[]}),E=(0,o.Z)(Z,2),S=E[0],x=E[1],I=function(){var e=(0,r.Z)(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,B.CB)(t,n).then((function(e){0!==(null==e?void 0:e.resultCode)?y(null==e?void 0:e.resultDescription):(g(null==e?void 0:e.resultDescription),p.push("/home/survey/question-category/list"))})).catch((function(e){y(null==e?void 0:e.resultMessage)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=(0,r.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,B.k4)({categoryName:null==t?void 0:t.categoryName.trim()}).then(function(){var e=(0,r.Z)(l().mark((function e(n){var i,u,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n||null===(i=n.surveyCategoryEntity)||void 0===i||!i.id){e.next=7;break}return r=null==t||null===(u=t.questions)||void 0===u?void 0:u.map((function(e){var t,i,u,r,o;return{questionData:G(G({},null==e?void 0:e.questionStructure),{},{options:null==e||null===(t=e.questionStructure)||void 0===t||null===(i=t.options)||void 0===i?void 0:i.map((function(e,t){return{key:t+1,value:e.value}})),errorMessage:"Required",id:"".concat(null==e||null===(u=e.questionStructure)||void 0===u?void 0:u.id)}),questionName:null==e||null===(r=e.questionStructure)||void 0===r?void 0:r.name,surveyCategoryId:null==n||null===(o=n.surveyCategoryEntity)||void 0===o?void 0:o.id}})),o={categoryQuestionData:r},e.next=5,I(o,"POST");case 5:e.next=8;break;case 7:y(n.resultDescription);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){y(null==e?void 0:e.resultDescription)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=(0,r.Z)(l().mark((function e(t,n){var i,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i={id:q.questionCategoryId,categoryName:null==t?void 0:t.categoryName.trim()},u={},(0,B.ht)(i).then(function(){var e=(0,r.Z)(l().mark((function e(i){var r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=null==t||null===(r=t.questions)||void 0===r?void 0:r.map((function(e){var t,n,i,u,r,o=G(G({},null==e?void 0:e.questionStructure),{},{options:null==e||null===(t=e.questionStructure)||void 0===t||null===(n=t.options)||void 0===n?void 0:n.map((function(e,t){return{key:t+1,value:e.value}})),errorMessage:"Required",id:"".concat(null==e||null===(i=e.questionStructure)||void 0===i?void 0:i.id)});return null==o||delete o.inactive,null==o||delete o.questionId,{questionData:o,questionName:null==e||null===(u=e.questionStructure)||void 0===u?void 0:u.name.trim(),questionId:null==e||null===(r=e.questionStructure)||void 0===r?void 0:r.questionId,surveyCategoryId:q.questionCategoryId}})),o={categoryQuestionList:u},null==n||!n.length||!i){e.next=5;break}return e.next=5,M(n,q.questionCategoryId);case 5:return e.next=7,I(o,"PUT");case 7:0!==(null==i?void 0:i.resultCode)&&y(null==i?void 0:i.resultDescription);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){y(null==e?void 0:e.resultDescription)}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var e=(0,r.Z)(l().mark((function e(t,n){var i,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.map((function(e){var t,i,u;return{questionData:G(G({},null==e?void 0:e.questionStructure),{},{options:null==e||null===(t=e.questionStructure)||void 0===t||null===(i=t.options)||void 0===i?void 0:i.map((function(e,t){return{key:t+1,value:e.value}}))}),questionName:null==e||null===(u=e.questionStructure)||void 0===u?void 0:u.name,surveyCategoryId:n}})),u={categoryQuestionData:i},e.next=4,I(u,"POST");case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,u,r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("create"==(null==q?void 0:q.questionCategoryId)){e.next=8;break}return u=null==t||null===(n=t.questions)||void 0===n?void 0:n.filter((function(e){var t;if(null==e||null===(t=e.questionStructure)||void 0===t||!t.questionId)return e})),r=null==t||null===(i=t.questions)||void 0===i?void 0:i.filter((function(e){var t;if(null!=e&&null!==(t=e.questionStructure)&&void 0!==t&&t.questionId)return e})),o={categoryName:null==t?void 0:t.categoryName.trim(),questions:r},e.next=6,D(o,u);case 6:e.next=9;break;case 8:k(t);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s.useEffect((function(){x({categoryName:null==u?void 0:u.surveyCategoryName,questions:null==u?void 0:u.questions})}),[u]),n?s.createElement(Q.Z,{width:"100%"},s.createElement(Q.Z,{m:1},s.createElement(W.Z,{animation:"wave",width:"30%"}),s.createElement(W.Z,{animation:"wave",variant:"text",width:"30%",height:60})),s.createElement(Q.Z,{m:1,className:m.skeletonTop},s.createElement(W.Z,{animation:"wave",width:"30%",height:30})),s.createElement(Q.Z,{m:1},s.createElement(N.Z,null,s.createElement(T.Z,null,s.createElement(O.Z,{container:!0,spacing:3},s.createElement(O.Z,{item:!0,xs:12},s.createElement(O.Z,{container:!0,spacing:3},s.createElement(O.Z,{item:!0,xs:12,sm:6,md:6},s.createElement(W.Z,{animation:"wave",width:"30%"}),s.createElement(W.Z,{animation:"wave",variant:"text",height:60})),s.createElement(O.Z,{item:!0,xs:12,sm:3,md:3},s.createElement(W.Z,{animation:"wave",width:"30%"}),s.createElement(W.Z,{animation:"wave",variant:"text",height:60})))),s.createElement(O.Z,{item:!0,xs:12},s.createElement(O.Z,{container:!0,spacing:3},s.createElement(O.Z,{item:!0,xs:12,sm:3,md:3},s.createElement(W.Z,{animation:"wave",width:"30%"}),s.createElement(W.Z,{animation:"wave",variant:"text",height:60})),s.createElement(O.Z,{item:!0,xs:12,sm:6,md:6},s.createElement(W.Z,{animation:"wave",width:"30%"}),s.createElement(W.Z,{animation:"wave",variant:"text",height:60})))),s.createElement(O.Z,{item:!0,xs:12},s.createElement(O.Z,{container:!0,spacing:3},s.createElement(O.Z,{item:!0,xs:12,sm:3,md:3},s.createElement(W.Z,{animation:"wave",width:"30%"}),s.createElement(W.Z,{animation:"wave",variant:"text",height:60})))),s.createElement(O.Z,{item:!0,xs:12},s.createElement(O.Z,{container:!0,spacing:3,direction:"row",justifyContent:"flex-end",alignItems:"flex-start"},s.createElement(W.Z,{variant:"circle",animation:"wave",height:40,width:40}),s.createElement(W.Z,{width:40,height:40,animation:"wave",variant:"circle",className:m.skeletonLeft}),s.createElement(W.Z,{width:40,height:40,variant:"circle",animation:"wave",className:m.skeletonLeft})))))))):s.createElement(s.Fragment,null,s.createElement(P.J9,{initialValues:S,onSubmit:_,enableReinitialize:!0},(function(e){e.errors;var n,u,o,p=e.values,h=(e.touched,e.setValues,e.handleChange),y=e.setFieldValue,Z=function(){var e=(0,r.Z)(l().mark((function e(t){var n,u,r,o,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t||null===(n=t.questionStructure)||void 0===n||!n.questionId){e.next=3;break}return e.next=3,(0,B.Km)({id:null==t||null===(o=t.questionStructure)||void 0===o?void 0:o.questionId}).then((function(e){g(null==e?void 0:e.resultDescription)})).catch((function(e){g(null==e?void 0:e.resultMessage)}));case 3:a=null===(u=p)||void 0===u||null===(r=u.questions)||void 0===r?void 0:r.filter((function(e){var n,i;return(null==e||null===(n=e.questionStructure)||void 0===n?void 0:n.id)!==(null==t||null===(i=t.questionStructure)||void 0===i?void 0:i.id)})),y("questions",(0,i.Z)(a));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s.createElement(P.l0,null,s.createElement(O.Z,{container:!0,spacing:3,className:m.rowSpacing},s.createElement(O.Z,{item:!0,xs:12,sm:3,md:4},s.createElement(v.SeamlessInput,{required:!0,fullWidth:!0,disabled:!t,name:"categoryName",onChange:h,label:f("Category name"),value:(null===(n=p)||void 0===n||null===(u=n.categoryName)||void 0===u?void 0:u.trimLeft())||""}))),s.createElement(O.Z,{container:!0,spacing:3,className:m.rowSpacing},s.createElement(O.Z,{item:!0,xs:12},s.createElement(C.Z,{color:"primary",className:m.heading},"Questions"))),s.createElement(O.Z,{container:!0,spacing:3,className:m.rowSpacing},s.createElement(O.Z,{item:!0,xs:12},s.createElement(j,{edit:t,addOption:function(e){p.questions[e].questionStructure.options=[].concat((0,i.Z)(p.questions[e].questionStructure.options||[]),[{key:"",value:""}]),y("questions".concat([e],".questionStructure.options"),(0,i.Z)(p.questions[e].questionStructure.options))},deleteOption:function(e,t){var n;p.questions[e].questionStructure.options=null===(n=p.questions[e].questionStructure.options)||void 0===n?void 0:n.filter((function(e,n){return n!=t})),y("questions".concat([e],".questionStructure.options"),(0,i.Z)(p.questions[e].questionStructure.options))},handleChange:h,questionType:c,questions:null===(o=p)||void 0===o?void 0:o.questions,setFieldNature:function(e,t,n){p.questions[t].questionStructure.name=e,p.questions[t].questionStructure.fieldNature=n,p.questions[t].questionStructure.id=e,y("questions",(0,i.Z)(p.questions))},autopickColletion:d,deleteQuestion:Z,questionTypeHandler:function(e,t){var n,u=null==a?void 0:a.find((function(t){return e==t.questionTypeId}));p.questions[t].questionTypeId=null==u?void 0:u.questionTypeId,p.questions[t].questionTypeName=null==u?void 0:u.questionTypeName,p.questions[t].questionStructure.type=e,p.questions[t].questionMetadata=null==u?void 0:u.questionMetadata,p.questions[t].questionStructure.extraInfo=null==u||null===(n=u.questionStructure)||void 0===n?void 0:n.extraInfo,p.questions[t].questionStructure.options=null==u?void 0:u.questionStructure.options,y("questions",(0,i.Z)(p.questions))}}))),t?s.createElement(O.Z,{container:!0,spacing:3,className:m.rowSpacing},s.createElement(O.Z,{item:!0,xs:12},s.createElement(b.Z,{type:"button",variant:"outlined",onClick:function(){var e,t,n=new Date,u={questionTypeId:"",questionTypeName:"",questionStructure:{id:Date.parse(null==n?void 0:n.toString()),name:"",type:"",required:!1,helperText:"",errorMessage:"",options:null,scorable:!1,validation:"",extraInfo:{maxLength:10},fieldNature:""},questionMetadata:{required:{mutable:!1},options:{mutable:!1},scorable:{mutable:!1},extraInfo:{mutable:!1}}};p=G(G({},p),{},{questions:[].concat((0,i.Z)((null===(e=p)||void 0===e?void 0:e.questions)||[]),[u])}),y("questions",(0,i.Z)((null===(t=p)||void 0===t?void 0:t.questions)||[]))},startIcon:s.createElement(z.Z,null)},f("addQuestion","Add question")))):null,t?s.createElement(O.Z,{container:!0,spacing:3,className:m.submit},s.createElement(O.Z,{item:!0,xs:12},s.createElement(b.Z,{variant:"contained",color:"primary",type:"submit"},"create"!=(null==q?void 0:q.questionCategoryId)?f("update","Update"):f("save","Save")))):null)})))}}}]);