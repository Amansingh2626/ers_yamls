(self.webpackChunk_unified_survey=self.webpackChunk_unified_survey||[]).push([[4911],{5865:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var l=n(4315),a=n(2411),i=n.n(a),r=n(8049),o=n(3664),u=n(5072);const s=function(e){var t=e.children,n=(0,r.useHistory)(),a=(0,r.useParams)(),s=i().useState(),d=(0,l.Z)(s,2),c=d[0],m=d[1],v=i().useState(),p=(0,l.Z)(v,2),y=p[0],f=p[1],g=i().useState(),h=(0,l.Z)(g,2),b=h[0],Z=h[1],E=i().useState(),q=(0,l.Z)(E,2),x=q[0],D=q[1],S=i().useState(!0),I=(0,l.Z)(S,2),T=I[0],w=I[1],k=i().useState([]),C=(0,l.Z)(k,2),N=C[0],M=C[1],O=i().useState(),W=(0,l.Z)(O,2),P=W[0],j=W[1],A=(0,o.Z)(),B=A.showErrorMessage,L=(A.showSuccessMessage,i().useState([])),V=(0,l.Z)(L,2),_=V[0],F=V[1],R=function(){(0,u.AT)({categoryPerPage:999999999,categoryPageNo:0,questionPerPage:999999999,questionPageNo:0}).then((function(e){Z(null==e?void 0:e.surveyCategoryList),(0,u.Av)().then((function(e){var t,l=null==e||null===(t=e.questionTypes)||void 0===t?void 0:t.map((function(e){return{name:null==e?void 0:e.questionTypeName,value:null==e?void 0:e.questionTypeId}}));M(l),(0,u.dv)().then((function(e){var t,n=null==e||null===(t=e.options)||void 0===t?void 0:t.map((function(e){return{key:e.name,value:e.id}}));F(n),"create"!=(null==a?void 0:a.surveyId)&&z()})).catch((function(e){B(null==e?void 0:e.resultDescription),n.push("/home/survey/survey/list")})).finally((function(){"create"==(null==a?void 0:a.surveyId)&&w(!1)}))})).catch((function(e){B(null==e?void 0:e.resultDescription),n.push("/home/survey/survey/list")}))})).catch((function(e){B(null==e?void 0:e.resultDescription),n.push("/home/survey/survey/list")}))},z=function(){(0,u.if)(a).then((function(e){m(null==e?void 0:e.surveyDetails)})).catch((function(e){B(null==e?void 0:e.resultDescription),n.push("/home/survey/survey/list")})).finally((function(){w(!1)}))};return i().useEffect((function(){(0,u.Tz)({surveyTypePageNo:0,surveyTypePerPage:214748364}).then((function(e){var t,l=null==e||null===(t=e.surveyTypes)||void 0===t?void 0:t.map((function(e){return{value:null==e?void 0:e.id,key:null==e?void 0:e.surveyTypeName,surveyCategories:null==e?void 0:e.surveyCategories}}));f(l),(0,u.Ds)().then((function(e){var t=Object.keys(null==e?void 0:e.groupedAttributes).map((function(e){return{key:e,value:e}}));D({parentAttribute:t,data:null==e?void 0:e.groupedAttributes}),(0,u.jN)().then((function(e){j(null==e?void 0:e.data),R()})).catch((function(e){B(null==e?void 0:e.resultDescription),n.push("/home/survey/survey/list")}))})).catch((function(e){B(null==e?void 0:e.resultMessage),n.push("/home/survey/survey/list")}))})).catch((function(e){B(null==e?void 0:e.resultDescription),n.push("/home/survey/survey/list")}))}),[]),i().createElement(i().Fragment,null,t({data:c,types:y,loading:T,category:b,attributes:x,questionType:N,surveyeesTypes:P,applicationTypes:_}))}},4818:(e,t,n)=>{"use strict";n.d(t,{Z:()=>J});var l=n(929),a=n(1119),i=n(1746),r=n(4315),o=n(2411),u=n.n(o),s=n(327),d=n(2598),c=n(9609),m=n(5167),v=n(553),p=n(1749),y=n(9570),f=n(1120),g=n(5117),h=n(773),b=n(9688),Z=(0,f.Z)((function(e){return(0,g.Z)({mainGrid:{marginBottom:e.spacing(1)},cardSpace:{marginBottom:e.spacing(3)},footer:{borderTop:"2px solid #f5f5f5"},delete:{marginTop:18},heading:{fontWeight:600,fontSize:16},info:{marginTop:e.spacing(1)},borderColors:{borderColor:"#f5f5f5",marginBottom:"10px"}})}));const E=function(e){var t=Z(),n=(0,c.useTranslation)().t,l=e.questions,a=e.category,r=e.questionType,o=e.handleChange,s=e.isView,d=n("checkboxScoresMsg"),f=n("scoreErrorMsg"),g=n("scoreCheckMsg"),E=function(e,t,n){if(""===n)return!1;if(0===t.filter((function(e){return""===e.score})).length){if("checkbox"===e)return t.map((function(e){return e.score})).reduce((function(e,t){return e+t}),0)!==n;var l=t.filter((function(e){return e.score===n})),a=t.filter((function(e){return e.score<=n}));if(l.length>0&&a.length===t.length)return!1;if(a.length!==t.length)return g;if(l.length<=0)return f}};return u().createElement(u().Fragment,null,null==l?void 0:l.map((function(e,l){var c,g,Z,q,x,D,S,I,T,w,k,C,N,M,O,W,P,j,A,B,L,V,_,F,R,z,H,G,Q,J,U,X,K,Y;return u().createElement("div",{key:"sp_"+e.questionId+"_"+l},(null==e?void 0:e.surveyCategoryId)===(null==a?void 0:a.id)?u().createElement(m.Z,{borderRadius:8,border:2,p:2,className:t.borderColors},u().createElement(p.Z,{container:!0,spacing:3},u().createElement(p.Z,{item:!0,xs:12,className:t.mainGrid},u().createElement(p.Z,{container:!0,spacing:3},u().createElement(p.Z,{item:!0,xs:12,sm:6,md:6},u().createElement(h.SeamlessInput,{required:!0,fullWidth:!0,disabled:!0,label:n("Add question"),value:null==e?void 0:e.questionData.name,name:"questions.".concat(l,".questionData.name")})),u().createElement(p.Z,{item:!0,xs:12,sm:3,md:3},u().createElement(h.SeamlessDropDown,{fullWidth:!0,disabled:!0,label:n("Select question type"),options:[{name:"Select",value:null}].concat((0,i.Z)(r||[])).map((function(e){return{value:e.value,key:e.name}})),value:null==e?void 0:e.questionData.type,name:"questions.".concat(l,".questionData.type")})),"autopick"!=(null==e?void 0:e.questionData.type)?u().createElement(p.Z,{item:!0,xs:12,sm:3,md:3},u().createElement(h.SeamlessInput,{required:!0,fullWidth:!0,disabled:!0,label:"Helper text",value:null==e?void 0:e.questionData.helperText,name:"questions.".concat(l,".questionData.helperText")})):null)),u().createElement(p.Z,{item:!0,xs:12,className:t.mainGrid},u().createElement(p.Z,{container:!0,spacing:3},"autopick"!=(null==e?void 0:e.questionData.type)?u().createElement(p.Z,{item:!0,xs:12,sm:3,md:3},u().createElement(h.SeamlessInput,{fullWidth:!0,disabled:!0,label:n("validation"),value:null==e?void 0:e.questionData.validation,name:"questions.".concat(l,".questionData.validation")})):null,null!=e&&null!==(c=e.questionData)&&void 0!==c&&c.required?u().createElement(p.Z,{item:!0,xs:12,sm:6,md:6},u().createElement(h.SeamlessInput,{required:!0,fullWidth:!0,disabled:!0,label:n("errorMessage","Error message"),value:null==e?void 0:e.questionData.errorMessage,name:"questions.".concat(l,".questionData.errorMessage")})):null,null!=e&&null!==(g=e.questionData)&&void 0!==g&&g.scorable?u().createElement(p.Z,{item:!0,xs:12,sm:3,md:3},u().createElement(h.SeamlessInput,{required:!0,fullWidth:!0,disabled:s,onChange:o,type:"number",label:n("maxScore","Max Score"),value:null==e||null===(Z=e.questionData)||void 0===Z||null===(q=Z.scoreData)||void 0===q?void 0:q.maxScore,name:"questions.".concat(l,".questionData.scoreData.maxScore")})):null,null!=e&&null!==(x=e.questionData)&&void 0!==x&&null!==(D=x.extraInfo)&&void 0!==D&&D.maxLength?u().createElement(p.Z,{item:!0,xs:12,sm:3,md:3},u().createElement(h.SeamlessInput,{required:!0,fullWidth:!0,disabled:!0,onChange:o,label:n("maxLength","Max-length"),value:null==e||null===(S=e.questionData)||void 0===S||null===(I=S.extraInfo)||void 0===I?void 0:I.maxLength,name:"questions.".concat(l,".questionData.extraInfo.maxLength")})):null,null!=e&&null!==(T=e.questionData)&&void 0!==T&&null!==(w=T.extraInfo)&&void 0!==w&&w.maxSizeMB?u().createElement(p.Z,{item:!0,xs:12,sm:3,md:3},u().createElement(h.SeamlessInput,{required:!0,fullWidth:!0,disabled:!0,onChange:o,label:n("maxSizeMB","Max-size (MB)"),value:null==e||null===(k=e.questionData)||void 0===k||null===(C=k.extraInfo)||void 0===C?void 0:C.maxSizeMB,name:"questions.".concat(l,".questionData.extraInfo.maxSizeMB")})):null,null!=e&&null!==(N=e.questionData)&&void 0!==N&&null!==(M=N.extraInfo)&&void 0!==M&&M.noOfImage?u().createElement(p.Z,{item:!0,xs:12,sm:3,md:3},u().createElement(h.SeamlessInput,{required:!0,fullWidth:!0,disabled:!0,onChange:o,label:n("noOfImage","No. of image"),value:null==e||null===(O=e.questionData)||void 0===O||null===(W=O.extraInfo)||void 0===W?void 0:W.noOfImage,name:"questions.".concat(l,".questionData.extraInfo.noOfImage")})):null)),"​",null!=e&&null!==(P=e.questionData.options)&&void 0!==P&&P.length?u().createElement(p.Z,{item:!0,xs:12,className:t.mainGrid,key:null===(j=e.questionData.options)||void 0===j?void 0:j.length},null==e||null===(A=e.questionData)||void 0===A||null===(B=A.options)||void 0===B?void 0:B.map((function(t,a){var i,r,d,c,m;return u().createElement(p.Z,{container:!0,spacing:3,key:l+"-"+a},u().createElement(p.Z,{item:!0,xs:12,sm:3,md:3},u().createElement(h.SeamlessInput,{required:!0,fullWidth:!0,label:"Option "+(a+1),disabled:!0,value:t.value,name:"questions.".concat(l,".questionData.options.").concat(a,".value")})),null!=e&&null!==(i=e.questionData)&&void 0!==i&&i.scorable?u().createElement(p.Z,{item:!0,xs:12,sm:3,md:3},u().createElement(h.SeamlessInput,{required:!0,fullWidth:!0,type:"number",disabled:s,label:n("score","Score"),value:null==e||null===(r=e.questionData)||void 0===r||null===(d=r.scoreData)||void 0===d||null===(c=d.scoreMatrixList)||void 0===c||null===(m=c[a])||void 0===m?void 0:m.score,onChange:o,name:"questions.".concat(l,".questionData.scoreData.scoreMatrixList.").concat(a,".score")})):null)})),u().createElement(p.Z,{item:!0,xs:12,sm:8,lg:6,className:t.info,key:null===(L=e.questionData.options)||void 0===L?void 0:L.length},null!=e&&null!==(V=e.questionData)&&void 0!==V&&V.scorable?E(null==e?void 0:e.questionData.type,null==e||null===(_=e.questionData)||void 0===_||null===(F=_.scoreData)||void 0===F?void 0:F.scoreMatrixList,null==e||null===(R=e.questionData)||void 0===R||null===(z=R.scoreData)||void 0===z?void 0:z.maxScore)?u().createElement(b.Z,{severity:"error"},"checkbox"===(null==e?void 0:e.questionData.type)?d:E(null==e?void 0:e.questionData.type,null==e||null===(H=e.questionData)||void 0===H||null===(G=H.scoreData)||void 0===G?void 0:G.scoreMatrixList,null==e||null===(Q=e.questionData)||void 0===Q||null===(J=Q.scoreData)||void 0===J?void 0:J.maxScore)):u().createElement(b.Z,{severity:"info"},"checkbox"===(null==e?void 0:e.questionData.type)?d:f):null)):null,"​",u().createElement(p.Z,{container:!0,direction:"row",alignItems:"center",justifyContent:"flex-end",className:t.footer},u().createElement(v.Z,{control:u().createElement(y.Z,{disabled:!0,color:"primary",value:null===(U=e.questionData)||void 0===U?void 0:U.scorable,checked:null===(X=e.questionData)||void 0===X?void 0:X.scorable,name:"questions.".concat(l,".questionData.scorable")}),disabled:!0,label:n("scorable","Scorable")}),u().createElement(v.Z,{control:u().createElement(y.Z,{color:"primary",disabled:!0,value:null===(K=e.questionData)||void 0===K?void 0:K.required,checked:null===(Y=e.questionData)||void 0===Y?void 0:Y.required,name:"questions.".concat(l,".questionData.required")}),label:"Required"})))):null)})))};var q=n(3258),x=n(8016),D=n(1267),S=n(110),I=n(5639),T=n(6939),w=n(2318),k=n(4436),C=n(5757),N=n(743),M=n(1201);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}var W=(0,f.Z)((function(e){var t,n,l,a;return(0,g.Z)({rowSpacing:{marginBottom:e.spacing(.5)},selectBox:{"& .MuiAutocomplete-endAdornment":{top:"2px"}},desc:{color:"#B4B4B4",fontSize:13},subHeading:{fontWeight:600,marginRight:20},dropdownStyle:{"& .MuiInputBase-root":{backgroundColor:null==e||null===(t=e.palette)||void 0===t||null===(n=t.background)||void 0===n?void 0:n.default,padding:"7px 8px 2px 8px",borderRadius:"5px"},"& .MuiSelect-root":{backgroundColor:null==e||null===(l=e.palette)||void 0===l||null===(a=l.background)||void 0===a?void 0:a.default},"& .MuiInput-underline:before":{borderBottom:"2px solid rgba(0, 0, 0, 0.42)",margin:"0 8px"},"& .MuiInput-underline:after":{borderBottom:"0"}}})}));const P=function(e){var t=W(),n=(0,c.useTranslation)().t,l=e.categoryData,r=e.questions,o=e.setFieldValue,s=e.questionType,d=e.handleChange,v=e.isView,y=(e.data,function(e){if(null==r?void 0:r.some((function(t){return(null==t?void 0:t.questionId)==(null==e?void 0:e.questionId)}))){var t=null==r?void 0:r.filter((function(t){return(null==t?void 0:t.questionId)!=(null==e?void 0:e.questionId)}));o("questions",(0,i.Z)(t))}else{var n,l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);if(null!=e&&null!==(n=e.questionData)&&void 0!==n&&n.scorable){var u,s,d,c,m=null;null!=e&&null!==(u=e.questionData)&&void 0!==u&&null!==(s=u.options)&&void 0!==s&&s.length&&(m=null==e||null===(d=e.questionData)||void 0===d||null===(c=d.options)||void 0===c?void 0:c.map((function(e,t){return{fieldId:e.key,score:""}}))),l.questionData.scoreData={maxScore:"",scoreMatrixList:m}}else l.questionData.scoreData=null;o("questions",[].concat((0,i.Z)(r),[l]))}});return u().createElement(u().Fragment,null,null==l?void 0:l.map((function(e,l){var a,i;return u().createElement(T.Z,{disabled:!(null!=e&&null!==(a=e.questionList)&&void 0!==a&&a.length),key:(null==e?void 0:e.surveyCategoryName)+"_"+(null==e?void 0:e.id)},u().createElement(N.Z,{id:"panel-".concat(l,"-header"),expandIcon:u().createElement(x.Z,null),"aria-controls":"panel-".concat(l,"-content")},u().createElement(w.Z,{className:t.subHeading},l+1,". ",null==e?void 0:e.surveyCategoryName),u().createElement(w.Z,{className:t.desc},"(",null==e?void 0:e.questionCount," Questions, "),u().createElement(w.Z,{className:t.desc},"  "+r.filter((function(t){return t.surveyCategoryId===e.id})).length,n(" Selected"),")")),u().createElement(M.Z,null,u().createElement(p.Z,{container:!0,spacing:3},u().createElement(p.Z,{item:!0,xs:6},u().createElement(k.Z,{fullWidth:!0},u().createElement(S.Z,{multiple:!0,fullWidth:!0,autoWidth:!0,disabled:v,value:r,key:"q_s"+(null==e?void 0:e.id),input:u().createElement(h.SeamlessInput,{label:"Select Questions",fullWidth:!0,placeholder:"Questions"}),className:t.dropdownStyle,renderValue:function(t){var n=null==t?void 0:t.filter((function(t){return(null==t?void 0:t.surveyCategoryId)==(null==e?void 0:e.id)}));return u().createElement(m.Z,{sx:{display:"flex",flexWrap:"wrap"}},null==n?void 0:n.map((function(e){return u().createElement(D.Z,{style:{marginRight:3},color:"primary",key:"q_c"+(null==e?void 0:e.questionId),label:null==e?void 0:e.questionName})})))}},null==e||null===(i=e.questionList)||void 0===i?void 0:i.map((function(e){return u().createElement(I.Z,{value:null==e?void 0:e.questionId,style:{minWidth:"250px"},key:"m_i"+(null==e?void 0:e.questionId),onClick:function(){return y(e)}},u().createElement(q.Z,{checked:r.some((function(t){return(null==t?void 0:t.questionId)==(null==e?void 0:e.questionId)}))}),u().createElement(C.Z,{primary:null==e?void 0:e.questionName}))}))))),u().createElement(p.Z,{item:!0,xs:12},u().createElement(E,{isView:v,category:e,questions:r,questionType:s,handleChange:d})))))})))};var j=n(8069),A=n(282),B=n(8049),L=n(6837),V=n(3664),_=n(5072),F=n(5505),R=n(9996),z=n(6394);function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}F.Z,R.Z;var Q=(0,f.Z)((function(e){var t,n,l,a;return(0,g.Z)({rowSpacing:{marginBottom:e.spacing(.5)},heading:{fontWeight:600,fontSize:18,marginTop:20},submit:{marginTop:40},subHeading:{fontWeight:600},dropdownStyle:{"& .MuiInputBase-root":{backgroundColor:null==e||null===(t=e.palette)||void 0===t||null===(n=t.background)||void 0===n?void 0:n.default,padding:"7px 8px 2px 8px",borderRadius:"5px"},"& .MuiSelect-root":{backgroundColor:null==e||null===(l=e.palette)||void 0===l||null===(a=l.background)||void 0===a?void 0:a.default},"& .MuiInput-underline:before":{borderBottom:"2px solid rgba(0, 0, 0, 0.42)",margin:"0 8px"},"& .MuiInput-underline:after":{borderBottom:"0"}}})}));const J=function(e){var t=e.data,n=e.types,a=e.isView,u=e.loading,v=e.category,y=e.attributes,f=(e.surveyeesTypes,e.questionType),g=e.applicationTypes,b=Q(),Z=(0,B.useHistory)(),E=(0,B.useParams)(),x=(0,c.useTranslation)().t,T=(0,V.Z)(),N=T.showErrorMessage,M=T.showSuccessMessage,O=o.useState(),W=(0,r.Z)(O,2),F=W[0],R=W[1],H=o.useState({surveyee:"",surveyor:"",questions:[],surveyName:"",surveyTypeId:"",surveyeeTypeId:"",resellerType:[],resellerAttribute:[],surveyorTypeId:"",selectedCategories:[],startTimestamp:"",endTimestamp:""}),J=(0,r.Z)(H,2),U=J[0],X=J[1],K=function(e){var t,l=null==n?void 0:n.find((function(t){var n;return t.value==(null==e||null===(n=e.target)||void 0===n?void 0:n.value)})),a=[];return null==l||null===(t=l.surveyCategories)||void 0===t||t.forEach((function(e){var t=null==v?void 0:v.find((function(t){return(null==e?void 0:e.id)===(null==t?void 0:t.id)}));t&&(a=[].concat((0,i.Z)(a),[t]))})),a},Y=function(e){var t=[];e.forEach((function(e){var n,l=null==y?void 0:y.data[null==e?void 0:e.value];t=null===(n=Object.keys(l))||void 0===n?void 0:n.map((function(t){return{parent:null==e?void 0:e.value,key:t,value:null==l?void 0:l[t]}}))})),R(t)};o.useEffect((function(){var e,n,l,a,r,o,u,s,d;if(t){var c=K({target:{value:null==t||null===(e=t.surveyType)||void 0===e?void 0:e.id}}),m=null==t||null===(n=t.template)||void 0===n||null===(l=n.value)||void 0===l||null===(a=l.reduce((function(e,t){var n,l=null==t||null===(n=t.questions)||void 0===n?void 0:n.map((function(e){return G(G({},e),{},{surveyCategoryId:null==t?void 0:t.categoryId})}));return[].concat((0,i.Z)(e),(0,i.Z)(l||[]))}),[]))||void 0===a?void 0:a.map((function(e){var n,l,a=null==t||null===(n=t.scoreDetails)||void 0===n?void 0:n.find((function(t){return(null==t?void 0:t.questionId)==(null==e?void 0:e.id)}));return{questionData:G(G({},null==e?void 0:e.data),{},{scoreData:a?null==a?void 0:a.scoreMatrix:null}),id:null==e?void 0:e.id,questionId:null==e?void 0:e.id,surveyCategoryId:null==e?void 0:e.surveyCategoryId,questionName:null==e||null===(l=e.data)||void 0===l?void 0:l.name}})),v=null==t||null===(r=t.resellerAttribute)||void 0===r||null===(o=r.attributes)||void 0===o?void 0:o.map((function(e){return{key:e.key,value:e.key}}));Y(v);var p=null==t||null===(u=t.resellerAttribute)||void 0===u||null===(s=u.attributes)||void 0===s?void 0:s.reduce((function(e,t){var n,l=null==t||null===(n=t.values)||void 0===n?void 0:n.map((function(e){return{key:e,value:e,parent:t.key}}));return[].concat((0,i.Z)(e),(0,i.Z)(l))}),[]),y={surveyee:null==t?void 0:t.surveyee,surveyor:null==t?void 0:t.surveyor,questions:m||[],surveyName:null==t?void 0:t.surveyName,surveyTypeId:null==t||null===(d=t.surveyType)||void 0===d?void 0:d.id,surveyeeTypeId:null==t?void 0:t.surveyeeTypeId,resellerType:v,resellerAttribute:p,surveyorTypeId:null==t?void 0:t.surveyorTypeId,selectedCategories:(0,i.Z)(c||[]),startTimestamp:null==t?void 0:t.startTimestamp,endTimestamp:null==t?void 0:t.endTimestamp};X(y)}}),[t]);return u?o.createElement(o.Fragment,null,o.createElement(p.Z,{container:!0,spacing:3,className:b.rowSpacing},o.createElement(p.Z,{item:!0,xs:12,sm:3,md:3},o.createElement(j.Z,{animation:"wave",height:60})),o.createElement(p.Z,{item:!0,xs:12,sm:3,md:3},o.createElement(j.Z,{animation:"wave",height:60}))),o.createElement(p.Z,{container:!0,spacing:3,className:b.rowSpacing},o.createElement(p.Z,{item:!0,xs:12,sm:3,md:3},o.createElement(j.Z,{animation:"wave",height:60})),o.createElement(p.Z,{item:!0,xs:12,sm:3,md:3},o.createElement(j.Z,{animation:"wave",height:60}))),o.createElement(p.Z,{container:!0,spacing:3,className:b.rowSpacing},o.createElement(p.Z,{item:!0,xs:12,sm:3,md:3},o.createElement(j.Z,{animation:"wave",height:60})),o.createElement(p.Z,{item:!0,xs:12,sm:3,md:3},o.createElement(j.Z,{animation:"wave",height:60}))),o.createElement(p.Z,{container:!0,spacing:3,className:b.rowSpacing},o.createElement(p.Z,{item:!0,xs:12,sm:3,md:3},o.createElement(j.Z,{animation:"wave",height:60})),o.createElement(p.Z,{item:!0,xs:12,sm:3,md:3},o.createElement(j.Z,{animation:"wave",height:60}))),o.createElement(p.Z,{container:!0,className:b.rowSpacing},o.createElement(p.Z,{item:!0,xs:12,sm:12,md:12},o.createElement(j.Z,{variant:"text",animation:"wave",height:80})),o.createElement(p.Z,{item:!0,xs:12,sm:12,md:12},o.createElement(j.Z,{variant:"text",animation:"wave",height:80})),o.createElement(p.Z,{item:!0,xs:12,sm:12,md:12},o.createElement(j.Z,{variant:"text",animation:"wave",height:80}))),o.createElement(p.Z,{container:!0,spacing:3,className:b.rowSpacing},o.createElement(p.Z,{item:!0,xs:12,sm:3,md:3},o.createElement(j.Z,{animation:"wave",height:60,width:"30%"})))):o.createElement(o.Fragment,null,o.createElement(d.J9,{initialValues:U,onSubmit:function(e){var t,n;if(function(e){for(var t=0;t<(null==e||null===(n=e.questions)||void 0===n?void 0:n.length);t++){var n,a,i;if(null!==(a=e.questions[t].questionData)&&void 0!==a&&a.scorable)if("checkbox"!==(null===(i=e.questions[t].questionData)||void 0===i?void 0:i.type)){var r=function(){var n,l=null===(n=e.questions[t].questionData)||void 0===n?void 0:n.scoreData,a=l.scoreMatrixList.filter((function(e){return e.score===(null==l?void 0:l.maxScore)})),i=null==l?void 0:l.scoreMatrixList.filter((function(e){return e.score<=(null==l?void 0:l.maxScore)}));if(0===a.length||i.length!==(null==l?void 0:l.scoreMatrixList.length))return{v:!0}}();if("object"===(0,l.Z)(r))return r.v}else{var o,u,s,d;if((null===(o=e.questions[t].questionData)||void 0===o||null===(u=o.scoreData)||void 0===u?void 0:u.scoreMatrixList.map((function(e){return e.score})).reduce((function(e,t){return e+t}),0))!==(null===(s=e.questions[t].questionData)||void 0===s||null===(d=s.scoreData)||void 0===d?void 0:d.maxScore))return!0}}return!1}(e))N(x("checkScoresOfQuestions"));else{var a=null==e||null===(t=e.questions)||void 0===t?void 0:t.reduce((function(e,t){var n,l=null===(n=e)||void 0===n?void 0:n.find((function(e){return(null==e?void 0:e.categoryId)===(null==t?void 0:t.surveyCategoryId)}));if(l){var a,r;l.questionData=[].concat((0,i.Z)(l.questionData),[{id:String(null==t||null===(a=t.questionData)||void 0===a?void 0:a.id),questionId:null==t?void 0:t.questionId,scoreData:null==t||null===(r=t.questionData)||void 0===r?void 0:r.scoreData}])}else{var o,u,s={categoryId:String(null==t?void 0:t.surveyCategoryId),questionData:[{id:String(null==t||null===(o=t.questionData)||void 0===o?void 0:o.id),questionId:null==t?void 0:t.questionId,scoreData:null==t||null===(u=t.questionData)||void 0===u?void 0:u.scoreData}]};e=[].concat((0,i.Z)(e),[s])}return e}),[]),r=null==e||null===(n=e.resellerAttribute)||void 0===n?void 0:n.reduce((function(e,t){var n,l=null===(n=e)||void 0===n?void 0:n.find((function(e){return e.key==t.parent}));if(l)l.values=[].concat((0,i.Z)(l.values),[t.value]);else{var a={key:t.parent,values:[t.value]};e=[].concat((0,i.Z)(e),[a])}return e}),[]),o=G(G({},e),{},{surveyDataList:a,startTimestamp:(0,s.Z)(new Date(null==e?void 0:e.startTimestamp),"yyyy-MM-dd'T'HH:mm:ssxxx"),endTimestamp:(0,s.Z)(new Date(null==e?void 0:e.endTimestamp),"yyyy-MM-dd'T'HH:mm:ssxxx"),resellerAttribute:{attributes:r}});delete o.questions,delete o.selectedCategories,delete o.resellerType;var u=function(e){for(var t=[],n=0;n<e.length;n++)t.indexOf(e[n].categoryId)<0&&t.push(e[n].categoryId);for(var l=[],a=function(n){var a=e.filter((function(e){return e.categoryId===t[n]})).map((function(e){return e.questionData[0]}));l.push({categoryId:t[n],questionData:a})},i=0;i<t.length;i++)a(i);return l}(o.surveyDataList);o.surveyDataList=u,"create"!=(null==E?void 0:E.surveyId)?(o.surveyId=null==E?void 0:E.surveyId,function(e){(0,_.jX)(e).then((function(e){M(null==e?void 0:e.resultDescription),Z.push("/home/survey/survey/list")})).catch((function(e){N(null==e?void 0:e.resultMessage)}))}(o)):function(e){(0,_.Vb)(e).then((function(e){M(null==e?void 0:e.resultDescription),Z.push("/home/survey/survey/list")})).catch((function(e){N(null==e?void 0:e.resultMessage)}))}(o)}},enableReinitialize:!0},(function(e){e.errors;var l,r,u=e.values,s=(e.touched,e.setValues,e.handleChange),c=e.setFieldValue;return o.createElement(d.l0,null,o.createElement(p.Z,{container:!0,spacing:3,className:b.rowSpacing},o.createElement(p.Z,{item:!0,xs:12,sm:3,md:4},o.createElement(h.SeamlessInput,{required:!0,fullWidth:!0,name:"surveyName",disabled:a,onChange:s,label:x("Survey name"),value:u.surveyName.trimLeft()})),o.createElement(p.Z,{item:!0,xs:12,sm:3,md:4},o.createElement(z.Z,{shrink:!0,htmlFor:"surveyTypeId"},x("SelectSurveyType*")),o.createElement(h.SeamlessDropDown,{id:"surveyTypeId",required:!0,fullWidth:!0,disabled:a,name:"surveyTypeId",onChange:function(e){var t;s(e),t=K(e),c("questions",[]),c("selectedCategories",(0,i.Z)(t||[]))},value:u.surveyTypeId,className:b.dropdownStyle,options:[{key:"Select Survey Type",value:""}].concat((0,i.Z)(n||[]))}))),o.createElement(p.Z,{container:!0,spacing:3,className:b.rowSpacing},o.createElement(p.Z,{item:!0,xs:12,sm:3,md:4},o.createElement(z.Z,{shrink:!0,htmlFor:"surveyeeTypeId"},x("ShowSurveyeeTypeby*")),o.createElement(h.SeamlessDropDown,{id:"surveyeeTypeId",required:!0,fullWidth:!0,disabled:a,name:"surveyeeTypeId",onChange:s,value:u.surveyeeTypeId,className:b.dropdownStyle,options:[{key:"Select Surveyee Type by",value:""}].concat((0,i.Z)(g||[]))})),o.createElement(p.Z,{item:!0,xs:12,sm:3,md:4},o.createElement(h.SeamlessInput,{required:!0,fullWidth:!0,name:"surveyee",disabled:a,label:x("Surveyee"),onChange:s,value:u.surveyee.trimLeft()}))),o.createElement(p.Z,{container:!0,spacing:3,className:b.rowSpacing},o.createElement(p.Z,{item:!0,xs:12,sm:3,md:4},o.createElement(z.Z,{shrink:!0,htmlFor:"surveyorTypeId"},x("ShowSurveyorTypeby*")),o.createElement(h.SeamlessDropDown,{id:"surveyorTypeId",required:!0,fullWidth:!0,disabled:a,name:"surveyorTypeId",onChange:s,value:u.surveyorTypeId,className:b.dropdownStyle,options:[{key:"Select Surveyor Type by",value:""}].concat((0,i.Z)(g||[]))})),o.createElement(p.Z,{item:!0,xs:12,sm:3,md:4},o.createElement(h.SeamlessInput,{required:!0,fullWidth:!0,name:"surveyor",disabled:a,label:x("Surveyor"),onChange:s,value:u.surveyor.trimLeft()}))),o.createElement(p.Z,{container:!0,spacing:3,className:b.rowSpacing},o.createElement(p.Z,{item:!0,xs:12,sm:3,md:4},o.createElement(h.SeamlessInput,{required:!0,fullWidth:!0,disabled:a,type:"datetime-local",inputProps:{max:u.endTimestamp},name:"startTimestamp",onChange:s,value:u.startTimestamp,label:x("startTimestamp","Start Time")})),o.createElement(p.Z,{item:!0,xs:12,sm:3,md:4},o.createElement(h.SeamlessInput,{required:!0,fullWidth:!0,disabled:a,name:"endTimestamp",type:"datetime-local",inputProps:{min:u.startTimestamp},onChange:s,value:u.endTimestamp,label:x("endTimestamp","End Time")})),a&&o.createElement(p.Z,{item:!0,xs:12,sm:3,md:3},o.createElement(h.SeamlessInput,{required:!0,fullWidth:!0,disabled:a,name:"state",value:t.status.currentState.status,label:x("state","State")}))),o.createElement(p.Z,{container:!0,spacing:3,className:b.rowSpacing},o.createElement(p.Z,{item:!0,xs:12,sm:3,md:4},o.createElement(k.Z,{fullWidth:!0},o.createElement(S.Z,{multiple:!0,fullWidth:!0,autoWidth:!0,disabled:a,value:null==u?void 0:u.resellerType,input:o.createElement(h.SeamlessInput,{fullWidth:!0,placeholder:"Select attribute",label:x("Reseller attribute by")}),className:b.dropdownStyle,renderValue:function(e){return o.createElement(m.Z,{sx:{display:"flex",flexWrap:"wrap"}},null==e?void 0:e.map((function(e){return o.createElement(D.Z,{style:{marginRight:3,marginBottom:2},color:"primary",key:"q_c"+(null==e?void 0:e.value),label:null==e?void 0:e.key})})))}},null==y||null===(l=y.parentAttribute)||void 0===l?void 0:l.map((function(e){return o.createElement(I.Z,{value:null==e?void 0:e.value,style:{minWidth:"250px"},key:"m_i"+(null==e?void 0:e.value),onClick:function(){return function(e){var t;if(null==u||null===(t=u.resellerType)||void 0===t?void 0:t.find((function(t){return(null==t?void 0:t.value)==(null==e?void 0:e.value)}))){var n,l=null==u||null===(n=u.resellerType)||void 0===n?void 0:n.filter((function(t){return(null==t?void 0:t.value)!=(null==e?void 0:e.value)}));c("resellerType",(0,i.Z)(l||[])),Y(l)}else c("resellerType",[].concat((0,i.Z)(null==u?void 0:u.resellerType),[e])),Y([].concat((0,i.Z)(null==u?void 0:u.resellerType),[e]))}(e)}},o.createElement(q.Z,{checked:((null==u?void 0:u.resellerType)||[]).some((function(t){return(null==t?void 0:t.value)==(null==e?void 0:e.value)}))}),o.createElement(C.Z,{primary:null==e?void 0:e.key}))}))))),o.createElement(p.Z,{item:!0,xs:12,sm:3,md:4},o.createElement(k.Z,{fullWidth:!0},o.createElement(S.Z,{multiple:!0,fullWidth:!0,autoWidth:!0,disabled:a,value:null==u?void 0:u.resellerAttribute,placeholder:"Select reseller attribute",input:o.createElement(h.SeamlessInput,{fullWidth:!0,placeholder:"Select reseller attribute",label:x("Reseller attribute")}),className:b.dropdownStyle,renderValue:function(e){return o.createElement(m.Z,{sx:{display:"flex",flexWrap:"wrap"}},null==e?void 0:e.map((function(e){return o.createElement(D.Z,{style:{marginRight:3,marginBottom:2},color:"primary",key:"q_c"+(null==e?void 0:e.value),label:null==e?void 0:e.key})})))}},null==F?void 0:F.map((function(e,t){return o.createElement("div",{key:t},0==t?o.createElement(L.Z,null,null==e?void 0:e.parent):null,t>=1&&(null==e?void 0:e.parent)!=(null==F?void 0:F[t-1].parent)?o.createElement(L.Z,null,null==e?void 0:e.parent):null,o.createElement(I.Z,{value:null==e?void 0:e.value,style:{minWidth:"250px"},key:"m_i"+(null==e?void 0:e.value),onClick:function(){return function(e){var t;if(null==u||null===(t=u.resellerAttribute)||void 0===t?void 0:t.find((function(t){return(null==t?void 0:t.value)==(null==e?void 0:e.value)}))){var n,l=null==u||null===(n=u.resellerAttribute)||void 0===n?void 0:n.filter((function(t){return(null==t?void 0:t.value)!=(null==e?void 0:e.value)}));c("resellerAttribute",(0,i.Z)(l||[]))}else c("resellerAttribute",[].concat((0,i.Z)(null==u?void 0:u.resellerAttribute),[e]))}(e)}},o.createElement(q.Z,{checked:((null==u?void 0:u.resellerAttribute)||[]).some((function(t){return(null==t?void 0:t.value)==(null==e?void 0:e.value)}))}),o.createElement(C.Z,{primary:null==e?void 0:e.key})))})))))),null!=u&&null!==(r=u.selectedCategories)&&void 0!==r&&r.length?o.createElement(p.Z,{container:!0,spacing:3,className:b.rowSpacing},o.createElement(p.Z,{item:!0,xs:12},o.createElement(w.Z,{color:"primary",className:b.heading},"Category"))):null,o.createElement(p.Z,{container:!0,spacing:3,className:b.rowSpacing},o.createElement(p.Z,{item:!0,xs:12},o.createElement(P,{isView:a,handleChange:s,questionType:f,questions:u.questions,setFieldValue:c,categoryData:null==u?void 0:u.selectedCategories,data:t}))),a?null:o.createElement(p.Z,{container:!0,spacing:3,className:b.submit},o.createElement(p.Z,{item:!0,xs:12},o.createElement(A.Z,{variant:"contained",color:"primary",type:"submit"},"create"!=(null==E?void 0:E.surveyId)?x("update","Update"):x("save","Save")))))})))}}}]);