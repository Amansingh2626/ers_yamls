(self.webpackChunk_unified_survey=self.webpackChunk_unified_survey||[]).push([[5511],{5511:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>T});var a=n(2411),l=n.n(a),r=n(9609),s=n(773),o=n(1746),u=n(4315),i=n(8463),c=n(9912),m=n(1749),p=n(2318),d=n(1120),v=n(5117),f=n(5072),y=n(8049),g=n(5167),E=n(3258),h=n(4436),Z=n(553),w=n(6562),S=n(6019),x=n(8662),b=n(2541),I=(0,d.Z)((function(e){return(0,v.Z)({testStyle:{"& textarea":{padding:"auto!important",height:"100px !important",resize:"both"}},text:{marginBottom:e.spacing(1)},image:{marginTop:e.spacing(2),marginLeft:e.spacing(1)}})}));const k=function(e){var t=e.type,n=e.options,a=e.answers,r=e.scores,o=e.scorable,i=I(),c="dropdown"===t?n.map((function(e){return{key:e.value,value:e.key}})):[],d=l().useState([]),v=(0,u.Z)(d,2),y=v[0],k=v[1];switch(l().useEffect((function(){"image"===t&&""!==e.textAnswer&&function(){for(var t=e.textAnswer.split("|"),n=[],a=0;a<t.length;a++){var l="".concat((0,f.dk)("survey",t[a]));fetch(l).then((function(e){return e.blob()})).then((function(e){var t=URL.createObjectURL(e);n.push(t),k([].concat(n))}))}}()}),[]),t){case"short_answer":case"autopick":return l().createElement(s.SeamlessInput,{fullWidth:!0,label:"Answer",value:null==e.textAnswer?e.defaultAnswer:e.textAnswer,inputProps:{readOnly:!0}});case"paragraph":return l().createElement(s.SeamlessInput,{fullWidth:!0,label:"Answer",multiline:!0,inputClassName:i.testStyle,value:null==e.textAnswer?e.defaultAnswer:e.textAnswer,inputProps:{readOnly:!0}});case"checkbox":return l().createElement(h.Z,{component:"fieldset"},l().createElement(S.Z,{component:"legend"},"Answer"),l().createElement(w.Z,null,null==n?void 0:n.map((function(e,t){var n;return l().createElement(Z.Z,{label:(null==e?void 0:e.value)+" "+(o?"[Score:"+(null==r||null===(n=r.filter((function(t){return"".concat(t.fieldId)===(null==e?void 0:e.key)}))[0])||void 0===n?void 0:n.score)+"]":""),key:"checkboxs_"+t,control:l().createElement(E.Z,{name:null==e?void 0:e.key,value:null==e?void 0:e.value,checked:!!a&&(null==a?void 0:a.filter((function(t){return e.key==t})).length)>0})})}))));case"dropdown":return l().createElement(s.SeamlessDropDown,{fullWidth:!0,label:"Answer",value:a?a[0]:"",options:c});case"radio_button":return l().createElement(h.Z,{component:"fieldset"},l().createElement(S.Z,{component:"legend"},"Answer"),l().createElement(b.Z,null,null==n?void 0:n.map((function(e,t){return l().createElement(Z.Z,{key:"radio_"+t,value:null==e?void 0:e.value,control:l().createElement(x.Z,null),label:null==e?void 0:e.value,checked:e.key==a[0]})}))));case"decimal":return l().createElement(s.SeamlessInput,{fullWidth:!0,label:"Answer",type:"number",value:null==e.textAnswer?e.defaultAnswer:e.textAnswer,inputProps:{readOnly:!0}});case"image":return l().createElement(l().Fragment,null,l().createElement(g.Z,{mt:2,className:i.image},l().createElement(p.Z,{variant:"subtitle2",className:i.text},"Answer"),e.textAnswer?l().createElement(m.Z,{container:!0,spacing:2},y.map((function(e){return l().createElement(m.Z,{item:!0,key:e,className:i.image},l().createElement(m.Z,{container:!0},l().createElement("img",{src:e,alt:"image",height:"150px",width:"200px"})))}))):null));default:return null}};var A=n(9721),D=(0,d.Z)((function(e){return(0,v.Z)({rowSpacing:{marginBottom:e.spacing(.5)},mainGrid:{marginBottom:e.spacing(1)},cardSpace:{marginBottom:e.spacing(3)},skeletonTop:{marginTop:"30px"},skeletonLeft:{marginLeft:"10px"},heading:{fontWeight:600,fontSize:18,marginTop:20},submit:{marginTop:40}})}));const N=function(){var e,t,n=(0,r.useTranslation)().t,l=D(),d=(0,y.useHistory)(),v=(0,A.useSnackbar)().enqueueSnackbar,g=(0,y.useParams)().documentId,E=a.useState(!1),h=(0,u.Z)(E,2),Z=(h[0],h[1]),w=a.useState({surveyName:"",surveyId:"",surveyType:""}),S=(0,u.Z)(w,2),x=S[0],b=S[1],I=a.useState([]),N=(0,u.Z)(I,2),T=N[0],W=N[1];a.useEffect((function(){Z(!0),(0,f.W4)(g).then((function(e){0===e.resultCode?(b(e.surveyDocumentResponseInfo),W(e.surveyDocumentResponseInfo.answers)):(v(e.resultDescription,{variant:"error"}),d.push("/home/survey/report/list"))})).catch((function(e){v(e.resultMessage,{variant:"error"}),d.push("/home/survey/report/list")})).finally((function(){return Z(!1)}))}),[g]);var q=T.map((function(e,t){return{key:null==e?void 0:e.categoryName,value:t}})),O=a.useState(-1),P=(0,u.Z)(O,2),C=P[0],L=P[1],_=a.useState(-1),R=(0,u.Z)(_,2),B=R[0],M=R[1],Q=function(e){if(null!==(null==e?void 0:e.scoreData)){var t,n,a,l,r,s=null==e?void 0:e.answerKeys;return null===s?0:"checkbox"===e.questionInfoDto.type?function(e){for(var t=0,n=0;n<e.length;n++)t+=parseInt(e[n].score);return t}(null==e||null===(l=e.scoreData)||void 0===l||null===(r=l.scoreMatrixList)||void 0===r?void 0:r.filter((function(e){return s.includes("".concat(null==e?void 0:e.fieldId))}))):null===(a=(null==e||null===(t=e.scoreData)||void 0===t||null===(n=t.scoreMatrixList)||void 0===n?void 0:n.filter((function(e){return(null==e?void 0:e.fieldId)==s[0]})))[0])||void 0===a?void 0:a.score}};return a.createElement(m.Z,null,a.createElement(m.Z,{container:!0,spacing:3,className:l.rowSpacing},a.createElement(m.Z,{item:!0,xs:12,sm:3,md:3},a.createElement(s.SeamlessInput,{fullWidth:!0,inputProps:{readOnly:!0},name:"surveyName",label:n("Survey Name"),value:null==x?void 0:x.surveyName})),a.createElement(m.Z,{item:!0,xs:12,sm:3,md:3},a.createElement(s.SeamlessInput,{fullWidth:!0,inputProps:{readOnly:!0},name:"Survey ID",label:n("Survey ID"),value:null==x?void 0:x.surveyId}))),a.createElement(m.Z,{container:!0,spacing:3,className:l.rowSpacing},a.createElement(m.Z,{item:!0,xs:12,sm:3,md:3},a.createElement(s.SeamlessInput,{fullWidth:!0,inputProps:{readOnly:!0},name:"surveyType",label:n("Type"),value:null==x?void 0:x.surveyType}))),a.createElement(m.Z,{container:!0,spacing:3,className:l.rowSpacing},a.createElement(m.Z,{item:!0,xs:12},a.createElement(p.Z,{color:"primary",className:l.heading},"Answers"))),a.createElement(m.Z,{container:!0,spacing:3,className:l.rowSpacing},a.createElement(m.Z,{item:!0,xs:12,sm:3,md:3},a.createElement(s.SeamlessDropDown,{fullWidth:!0,options:[{key:"Select Category",value:null}].concat((0,o.Z)(q||[])),name:"category",label:n("Select Category"),value:C,onChange:function(e){L(e.target.value),M(e.target.value)}}))),B>-1?null===(e=T[B])||void 0===e||null===(t=e.categoryQuestionsData)||void 0===t?void 0:t.map((function(e,t){var r,o,u;return a.createElement(i.Z,{className:l.cardSpace,key:"".concat(t)},a.createElement(c.Z,null,a.createElement(m.Z,{container:!0,spacing:3},a.createElement(m.Z,{item:!0,xs:12,className:l.mainGrid},a.createElement(m.Z,{container:!0,spacing:3},a.createElement(m.Z,{item:!0,xs:12,sm:6,md:6},a.createElement(s.SeamlessInput,{fullWidth:!0,inputProps:{readOnly:!0},label:n("Question"),value:null==e?void 0:e.questionName})),a.createElement(m.Z,{item:!0,xs:12,sm:3,md:3},a.createElement(s.SeamlessInput,{fullWidth:!0,inputProps:{readOnly:!0},label:n("Question Score"),value:e.questionInfoDto.scorable?null==e||null===(r=e.scoreData)||void 0===r?void 0:r.maxScore:"N/A"})),a.createElement(m.Z,{item:!0,xs:12,sm:3,md:3},a.createElement(s.SeamlessInput,{fullWidth:!0,inputProps:{readOnly:!0},label:"Answer Score",value:null!=e&&null!==(o=e.questionInfoDto)&&void 0!==o&&o.scorable?Q(e):"N/A"}))),a.createElement(m.Z,{container:!0,spacing:3,className:l.rowSpacing},a.createElement(m.Z,{item:!0,xs:12,sm:3,md:3},a.createElement(k,{scorable:e.questionInfoDto.required,type:e.questionInfoDto.type,helperText:e.questionInfoDto.helperText,options:e.questionInfoDto.options,answers:e.answerKeys,textAnswer:null==e?void 0:e.textAnswer,defaultAnswer:e.questionInfoDto.defaultAnswer,scores:(null==e||null===(u=e.scoreData)||void 0===u?void 0:u.scoreMatrixList)||[]})))))))})):null)},T=function(){var e=(0,r.useTranslation)().t;return l().createElement(s.SeamlessContainer,{title:e("report","Report"),description:e("reportDescription","")},l().createElement(N,null))}}}]);