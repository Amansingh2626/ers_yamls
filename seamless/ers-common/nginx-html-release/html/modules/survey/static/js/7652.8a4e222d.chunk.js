(self.webpackChunk_unified_survey=self.webpackChunk_unified_survey||[]).push([[7652],{7652:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>A});var a=n(2411),r=n.n(a),l=n(5167),o=n(8049),i=n(8896),s=n(9609),u=n(7560),c=n(5238),d=n(4315),m=n(1744),p=n.n(m),g=n(5072),f=n(3664);const y=function(e){var t=e.children,n=((0,s.useTranslation)().t,(0,o.useHistory)()),r=a.useState([]),l=(0,d.Z)(r,2),i=l[0],u=l[1],c=a.useState(),p=(0,d.Z)(c,2),y=(p[0],p[1]),v=a.useState(!1),E=(0,d.Z)(v,2),Z=E[0],h=E[1],C=a.useState(),S=(0,d.Z)(C,2),T=S[0],k=S[1],w=a.useState({key:"",value:"",operator:""}),N=(0,d.Z)(w,2),P=N[0],b=N[1],M=(0,f.Z)(),x=M.showErrorMessage,z=(M.showSuccessMessage,(0,m.useServerTable)({page:0,perPage:20,order:"asc",orderBy:"",filter:{}})),B=z.page,O=z.perPage,R=z.order,_=z.orderBy,D=z.onPageSizeChange,H=z.onPageChange,F=z.onOrderByChange,V=z.onOrderChange,Y=z.onFilterChange,W=a.useCallback((function(){h(!0),(0,g.Tz)({surveyTypePerPage:O,surveyTypePageNo:B,filter:JSON.stringify([{key:P.key,operator:P.operator,value:P.value}]),sort:"".concat(_,"_").concat(null==R?void 0:R.toLowerCase())}).then((function(e){var t;0==e.resultCode?(y(e),u(null==e?void 0:e.surveyTypes),k(null==e||null===(t=e.metadata)||void 0===t?void 0:t.totalCount)):(x(null==e?void 0:e.resultDescription),n.push("/home/survey/survey/list"))})).catch((function(e){x(null==e?void 0:e.resultMessage),n.push("/home/survey/survey/list")})).finally((function(){h(!1)}))}),[B,O,P,R,_]);return a.useEffect((function(){W()}),[W]),a.createElement(a.Fragment,null,t({typeResponse:i,loading:Z,totalCount:T,page:B,perPage:O,order:R,orderBy:_,filter:P,onPageSizeChange:D,onPageChange:H,onOrderByChange:F,onOrderChange:V,onFilterChange:Y,setFilter:b}))};var v=n(9721),E=n(484),Z=n(552),h=n(327),C=n(3855),S=n(282),T=n(4837),k=n(2663),w=n(6856),N=n(9525),P=n(6083),b=n(1749),M=n(2318),x=n(1267),z=n(868),B=n(773),O=n(3659),R=n(1033),_=n(1120),D=n(5117),H=n(6277),F=n(4104),V=n.n(F),Y=n(7801),W=(n(3297),(0,_.Z)((function(e){document.documentElement.style.setProperty("--theme-primary-color",e.palette.primary.main),(0,D.Z)({})}))),I=(0,_.Z)((function(e){var t,n;return(0,D.Z)({root:{marginTop:e.spacing(5),width:"100%",padding:e.spacing(2)},formWrapper:{padding:"".concat(e.spacing(1.5)," 0")},dialogHeader:{fontSize:18,fontWeight:"bold",align:"left",backgroundColor:e.palette.primary.main,color:null==e||null===(t=e.palette)||void 0===t||null===(n=t.common)||void 0===n?void 0:n.white},dialogContent:{fontSize:14},blurBackDrop:{backdropFilter:"blur(2px)",backgroundColor:"rgba(0, 0, 0, 0.2)"},fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldContent:{fontSize:13},row:{marginBottom:e.spacing(1)},top:{marginRight:e.spacing(1),marginTop:e.spacing(.5)}})}));const L=function(e){var t=e.loading,n=e.typeResponse,r=e.page,l=e.perPage,i=(e.filter,e.setFilter),u=e.onPageChange,c=e.onPageSizeChange,m=e.onOrderByChange,f=e.onOrderChange,y=e.totalCount,_=I(),D=(W(),V()().checkPermission),F=a.useState(),L=(0,d.Z)(F,2),U=L[0],A=L[1],q=a.useState(!1),J=(0,d.Z)(q,2),j=J[0],G=J[1],K=a.useState(),Q=(0,d.Z)(K,2),X=Q[0],$=Q[1],ee=a.useState(!1),te=(0,d.Z)(ee,2),ne=te[0],ae=te[1],re=a.useState(!1),le=(0,d.Z)(re,2),oe=le[0],ie=le[1],se=(0,v.useSnackbar)().enqueueSnackbar,ue=(0,s.useTranslation)().t,ce=(0,o.useHistory)(),de=a.useState(!1),me=(0,d.Z)(de,2),pe=me[0],ge=me[1],fe=a.useCallback((function(e){e.filterModel.items[0].columnField&&e.filterModel.items[0].value&&e.filterModel.items[0].operatorValue?i({key:e.filterModel.items[0].columnField,value:e.filterModel.items[0].value,operator:e.filterModel.items[0].operatorValue}):i({key:"",value:"",operator:""})}),[]),ye=a.useCallback((function(e){e.sortModel[0].sort&&(m(e.sortModel[0].field),f(e.sortModel[0].sort))}),[]),ve=[{field:"surveyTypeName",headerName:ue("surveyTypeName","Survey type"),flex:1,filterable:!0,sortable:!0},{field:"totalCategoriesCount",headerName:ue("noOfCategories","No of categories"),flex:1,filterable:!1,sortable:!1},{field:"actions",headerName:ue("actions"),flex:1,filterable:!1,renderCell:function(e){var t;return a.createElement("div",null,a.createElement(T.Z,{size:"small",color:"primary",variant:"text"},D(Y.Z.EDIT_SURVEY_TYPE)&&a.createElement(z.ZP,{title:"Edit"},a.createElement(S.Z,{component:o.Link,to:"/home/survey/type/".concat(null==e||null===(t=e.row)||void 0===t?void 0:t.id)},a.createElement(O.Z,{fontSize:"small"}))),D(Y.Z.VIEW_SURVEY_TYPE)&&a.createElement(z.ZP,{title:"View"},a.createElement(S.Z,{onClick:function(){var t;G(!0),t=null==e?void 0:e.row,ae(!0),G(!0),(0,g.ru)(null==t?void 0:t.id).then((function(e){$(e.surveyType)})).catch((function(e){se(e.resultMessage,{variant:"error"}),ce.push("/home/survey/type/list")})).finally((function(){return ae(!1)}))}},a.createElement(Z.Z,{fontSize:"small"}))),D(Y.Z.DELETE_SURVEY_TYPE)&&a.createElement(z.ZP,{title:"Delete"},a.createElement(S.Z,{onClick:function(){A(null==e?void 0:e.row),ie(!0)}},a.createElement(E.Z,{fontSize:"small"})))))}}];return a.createElement(a.Fragment,null,a.createElement(p(),{onPageSizeChange:function(e){c(e.pageSize)},onPageChange:function(e){u(e.page)},pagination:!0,paginationMode:"server",page:r,pageSize:l,rowCount:y,rows:n,loading:t,columns:ve,getRowId:function(e){return e.id},columnBuffer:3,sortingMode:"server",filterMode:"server",onFilterModelChange:fe,onSortModelChange:ye}),a.createElement(R.Z,{setOpen:ie,name:null==U?void 0:U.surveyTypeName,open:oe,currentRow:U,deleteHandler:function(e){ge(!0),(0,g.FE)(null==e?void 0:e.id).then((function(e){0===(null==e?void 0:e.resultCode)?(se("Survey Type deleted successfully",{variant:"success"}),ce.push("/home/survey/type/list")):se("".concat(null==e?void 0:e.resultDescription),{variant:"error"})})).catch((function(e){return se(e.resultDescription,{variant:"error"})})).finally((function(){return ge(!1)})),ie(!1)},disabled:pe,deleteText:"Are you sure you want to delete survey type"}),a.createElement(k.Z,{open:j,maxWidth:"md",fullWidth:!0,keepMounted:!0,onClose:function(){return G(!1)},BackdropProps:{classes:{root:_.blurBackDrop}}},a.createElement(P.Z,{className:_.dialogHeader,disableTypography:!0},ne?"Loading Survey Tupe Details...":"Survey Type Details"),a.createElement(N.Z,null,a.createElement(b.Z,{container:!0,spacing:2,className:_.row},a.createElement(b.Z,{item:!0,xs:3},a.createElement(M.Z,{className:_.fieldHeading},"Survey Type Name")),a.createElement(b.Z,{item:!0,xs:9},a.createElement(M.Z,{className:_.fieldContent},null==X?void 0:X.surveyTypeName))),a.createElement(b.Z,{container:!0,spacing:2,className:_.row},a.createElement(b.Z,{item:!0,xs:3},a.createElement(M.Z,{className:_.fieldHeading},"Created On")),a.createElement(b.Z,{item:!0,xs:9},a.createElement(M.Z,{className:_.fieldContent},null!=X&&X.createdOn?(0,h.Z)((0,C.Z)(new Date(null==X?void 0:X.createdOn).toISOString()),"dd-MM-yyyy HH:mm:ss"):""))),a.createElement(b.Z,{container:!0,spacing:2,className:_.row},a.createElement(b.Z,{item:!0,xs:3},a.createElement(M.Z,{className:_.fieldHeading},"Created By")),a.createElement(b.Z,{item:!0,xs:9},a.createElement(M.Z,{className:_.fieldContent},null==X?void 0:X.createdBy))),a.createElement(b.Z,{container:!0,spacing:2,className:(0,H.default)(_.row)},a.createElement(b.Z,{item:!0,xs:3},a.createElement(M.Z,{className:(0,H.default)(_.top,_.fieldHeading)},"Categories")),a.createElement(b.Z,{item:!0,xs:9},null==X?void 0:X.surveyCategories.map((function(e){return a.createElement(x.Z,{label:e.surveyCategoryName,key:e.id,variant:"outlined",className:_.top})}))))),a.createElement(w.Z,null,a.createElement(B.SeamlessButton,{variant:"outlined",color:"primary",onClick:function(){return G(!1)}},"Close"))))},U=function(){return r().createElement(y,null,(function(e){var t=e.typeResponse,n=e.loading,a=e.totalCount,l=(0,c.Z)(e,["typeResponse","loading","totalCount"]);return r().createElement("div",{style:{height:500,width:"100%"}},r().createElement(L,(0,u.Z)({},l,{loading:n,typeResponse:t,totalCount:a})))}))},A=function(){var e=(0,s.useTranslation)().t,t=V()().checkPermission;return a.createElement(B.SeamlessContainer,{title:e("surveyType","Survey type"),description:e("","")},t(Y.Z.CREATE_SURVEY_TYPE)&&a.createElement(l.Z,{display:"flex",flexDirection:"row"},a.createElement(B.SeamlessButton,{component:o.Link,to:"/home/survey/type/create",variant:"contained",color:"primary",startIcon:a.createElement(i.Z,null)},e("createNew","Create new"))),a.createElement("div",{style:{height:"500px",marginTop:"10px"}},a.createElement(U,null)))}}}]);