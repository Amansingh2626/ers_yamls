(self.webpackChunk_unified_survey=self.webpackChunk_unified_survey||[]).push([[8214],{8214:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>N});var o=n(5167),r=n(8896),a=n(773),l=n(2411),i=n.n(l),u=n(9609),s=n(8049),c=n(7560),d=n(5238),g=n(4315),m=n(1744),f=n.n(m),y=n(5072),v=n(9721);const C=function(e){var t=e.children,n=l.useState(!1),o=(0,g.Z)(n,2),r=o[0],a=o[1],i=l.useState(0),u=(0,g.Z)(i,2),c=u[0],d=u[1],f=l.useState([]),C=(0,g.Z)(f,2),h=C[0],p=C[1],E=l.useState({key:"",value:"",operator:""}),S=(0,g.Z)(E,2),Z=S[0],P=S[1],w=(0,s.useHistory)(),k=(0,v.useSnackbar)().enqueueSnackbar,M=(0,m.useServerTable)({page:0,perPage:20,order:"asc",orderBy:"",filter:{}}),b=M.page,O=M.perPage,R=M.order,T=M.orderBy,_=M.onPageSizeChange,q=M.onPageChange,z=M.onOrderByChange,N=M.onOrderChange,F=M.onReset,B=M.onFilterChange,D=l.useCallback((function(){a(!0),(0,y.AT)({categoryPerPage:O,categoryPageNo:b,questionPerPage:0,questionPageNo:0,filter:JSON.stringify([{key:Z.key,operator:Z.operator,value:Z.value}]),sort:"".concat(T,"_").concat(null==R?void 0:R.toLowerCase())}).then((function(e){var t;p(null==e?void 0:e.surveyCategoryList),d(null==e||null===(t=e.metadata)||void 0===t?void 0:t.totalCount)})).catch((function(e){k(e.resultDescription,{variant:"error"}),w.push("/home/survey")})).finally((function(){a(!1)}))}),[b,O,Z,R,T]);return l.useEffect((function(){D()}),[D]),l.createElement(l.Fragment,null,t({categoryList:h,loading:r,totalCount:c,page:b,perPage:O,order:R,orderBy:T,filter:Z,onPageSizeChange:_,onPageChange:q,onOrderByChange:z,onOrderChange:N,onReset:F,onFilterChange:B,setFilter:P}))};var h=n(282),p=n(4837),E=n(868),S=n(484),Z=n(552),P=n(1120),w=n(5117),k=n(3659),M=n(3664),b=n(1033),O=n(4104),R=n.n(O),T=n(7801),_=(n(3297),(0,P.Z)((function(e){document.documentElement.style.setProperty("--theme-primary-color",e.palette.primary.main),(0,w.Z)({})})));const q=function(e){var t=e.loading,n=e.categoryList,o=e.page,r=e.perPage,a=e.onPageSizeChange,i=e.onPageChange,c=e.onOrderByChange,d=e.onOrderChange,m=e.setFilter,v=e.totalCount,C=(0,s.useHistory)(),P=R()().checkPermission,w=(0,u.useTranslation)().t,O=(_(),l.useState()),q=(0,g.Z)(O,2),z=q[0],N=q[1],F=l.useState(!1),B=(0,g.Z)(F,2),D=B[0],V=B[1],Y=(0,M.Z)(),x=Y.showErrorMessage,A=Y.showSuccessMessage,L=l.useCallback((function(e){e.filterModel.items[0].columnField&&e.filterModel.items[0].value&&e.filterModel.items[0].operatorValue?m({key:e.filterModel.items[0].columnField,value:e.filterModel.items[0].value,operator:e.filterModel.items[0].operatorValue}):m({key:"",value:"",operator:""})}),[]),G=l.useCallback((function(e){e.sortModel[0].sort&&(c(e.sortModel[0].field),d(e.sortModel[0].sort))}),[]),I=[{field:"surveyCategoryName",headerName:w("questionCategory","Question Category"),width:400,filterable:!0,sortable:!0},{field:"questionCount",headerName:w("noOfQuestions","No Of Questions"),width:400,filterable:!1,sortable:!1},{field:"actions",headerName:w("actions"),sortable:!1,filterable:!1,renderCell:function(e){return l.createElement("div",null,l.createElement(p.Z,{size:"small",color:"primary",variant:"text"},P(T.Z.EDIT_SURVEY_CATEGORY)&&l.createElement(E.ZP,{title:"Edit"},l.createElement(h.Z,{onClick:function(){var t;C.push("/home/survey/question-category/".concat(null==e||null===(t=e.row)||void 0===t?void 0:t.id))}},l.createElement(k.Z,{fontSize:"small"}))),P(T.Z.VIEW_SURVEY_CATEGORY)&&l.createElement(E.ZP,{title:"View"},l.createElement(h.Z,{onClick:function(){var t;C.push("/home/survey/question-category/view/".concat(null==e||null===(t=e.row)||void 0===t?void 0:t.id))}},l.createElement(Z.Z,{fontSize:"small"}))),P(T.Z.DELETE_SURVEY_CATEGORY)&&l.createElement(E.ZP,{title:"Delete"},l.createElement(h.Z,{onClick:function(){N(null==e?void 0:e.row),V(!0)}},l.createElement(S.Z,{fontSize:"small"})))))},flex:1}];return l.createElement(l.Fragment,null,l.createElement(f(),{onPageSizeChange:function(e){a(e.pageSize)},onPageChange:function(e){i(e.page)},pagination:!0,paginationMode:"server",page:o,pageSize:r,rowCount:v,rows:n,loading:t,columns:I,getRowId:function(e){return e.id},columnBuffer:3,sortingMode:"server",filterMode:"server",onFilterModelChange:L,onSortModelChange:G}),l.createElement(b.Z,{setOpen:V,name:null==z?void 0:z.surveyCategoryName,open:D,currentRow:z,deleteHandler:function(e){(0,y.uu)({id:e.id}).then((function(e){A(null==e?void 0:e.resultDescription),C.push("/home/survey/question-category/list")})).catch((function(e){x(null==e?void 0:e.resultDescription)})).finally((function(){V(!1)}))},deleteText:"Are you sure you want to delete survey category"}))},z=function(){return i().createElement(C,null,(function(e){var t=e.questionCategory,n=e.loading,o=e.totalCount,r=(0,d.Z)(e,["questionCategory","loading","totalCount"]);return i().createElement("div",{style:{height:500,width:"100%"}},i().createElement(q,(0,c.Z)({},r,{loading:n,questionCategory:t,totalCount:o})))}))},N=function(){var e=(0,u.useTranslation)().t,t=R()().checkPermission;return l.createElement(a.SeamlessContainer,{title:e("surveyManagement","Survey Management"),description:e("surveyManagementDescription","")},t(T.Z.CREATE_SURVEY_CATEGORY)&&l.createElement(o.Z,{display:"flex",flexDirection:"row"},l.createElement(a.SeamlessButton,{component:s.Link,to:"/home/survey/question-category/create",variant:"contained",color:"primary",startIcon:l.createElement(r.Z,null)},e("newCategory","New category"))),l.createElement("div",{style:{height:"500px",marginTop:"10px"}},l.createElement(z,null)))}}}]);