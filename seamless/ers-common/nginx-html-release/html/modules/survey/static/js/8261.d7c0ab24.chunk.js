(self.webpackChunk_unified_survey=self.webpackChunk_unified_survey||[]).push([[8261],{8261:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>M});var n=r(773),a=r(2411),o=r.n(a),l=r(9609),i=r(7560),u=r(5238),s=r(1119),c=r(4315),d=r(1744),m=r.n(d),f=r(5072),p=r(8049),g=r(9721);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const y=function(e){var t=e.children,r=a.useState(!1),n=(0,c.Z)(r,2),o=n[0],l=n[1],i=a.useState({}),u=(0,c.Z)(i,2),m=(u[0],u[1]),y=a.useState(0),b=(0,c.Z)(y,2),h=b[0],O=b[1],S=a.useState([]),w=(0,c.Z)(S,2),E=w[0],C=w[1],P=(0,p.useHistory)(),Z=(0,g.useSnackbar)().enqueueSnackbar,j=(0,d.useServerTable)({page:0,perPage:20,order:"desc",orderBy:"startTime",filter:{}}),N=a.useCallback((function(){l(!0),(0,f._8)({page:j.page,perPage:j.perPage}).then((function(e){var t;0===e.resultCode?(C(null==e?void 0:e.reportList),m(null==e?void 0:e.metadata),O(null==e||null===(t=e.metadata)||void 0===t?void 0:t.totalCount)):(Z(e.resultDescription,{variant:"error"}),P.push("/home/survey/survey/list"))})).catch((function(e){Z(e.resultMessage,{variant:"error"}),P.push("/home/survey/survey/list")})).finally((function(){l(!1)}))}),[j.page,j.perPage]);return a.useEffect((function(){N()}),[N]),a.createElement(a.Fragment,null,t(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({reports:E,loading:o,totalCount:h},j)))};var b=r(282),h=r(4837),O=r(868),S=r(552),w=r(327),E=r(3855),C=r(4104),P=r.n(C),Z=r(7801),j=r(1120),N=r(5117);r(3297),(0,j.Z)((function(e){document.documentElement.style.setProperty("--theme-primary-color",e.palette.primary.main),(0,N.Z)({})}));const k=function(e){var t=e.loading,r=e.reports,n=e.page,o=e.perPage,i=e.onPageChange,u=e.onPageSizeChange,s=e.totalCount,c=(0,l.useTranslation)().t,d=P()().checkPermission,f=[{field:"surveyeeId",headerName:c("surveyee","Surveyee"),width:150,filterable:!1,sortable:!1},{field:"surveyorId",headerName:c("surveyor","Surveyor"),width:150,filterable:!1,sortable:!1},{field:"surveyName",headerName:c("surveyName","Survey Name"),width:200,filterable:!1,sortable:!1},{field:"submittedOn",headerName:c("submittedOn","Submitted On"),width:200,filterable:!1,sortable:!1,renderCell:function(e){return a.createElement("div",null,e.getValue("submittedOn")?(0,w.Z)((0,E.Z)(new Date(e.getValue("submittedOn")).toISOString()),"dd-MM-yyyy HH:mm:ss"):"")}},{field:"totalScore",headerName:c("totalScore","Total Score"),width:120,filterable:!1,sortable:!1},{field:"maxScore",headerName:c("outOfMax","Out of Max"),width:120,filterable:!1,sortable:!1},{field:"actions",headerName:c("actions"),sortable:!1,filterable:!1,renderCell:function(e){var t;return a.createElement("div",null,a.createElement(h.Z,{size:"small",color:"primary",variant:"text"},d(Z.Z.VIEW_DOCUMENT_OF_SURVEY)&&a.createElement(O.ZP,{title:"View"},a.createElement(b.Z,{component:p.Link,to:"/home/survey/report/view/".concat(null==e||null===(t=e.row)||void 0===t?void 0:t.id)},a.createElement(S.Z,{fontSize:"small"})))))},flex:1}];return a.createElement(a.Fragment,null,a.createElement(m(),{onPageSizeChange:function(e){u(e.pageSize)},onPageChange:function(e){i(e.page)},pagination:!0,paginationMode:"server",page:n,pageSize:o,rowCount:s,rows:r,loading:t,columns:f,getRowId:function(e){return e.surveyDocumentId},columnBuffer:3,sortingMode:"server",disableColumnFilter:!0}))},D=function(){return o().createElement(y,null,(function(e){var t=e.reports,r=e.loading,n=e.totalCount,a=(0,u.Z)(e,["reports","loading","totalCount"]);return o().createElement("div",{style:{height:500,width:"100%"}},o().createElement(k,(0,i.Z)({},a,{loading:r,reports:t,totalCount:n})))}))},M=function(){var e=(0,l.useTranslation)().t;return a.createElement(n.SeamlessContainer,{title:e("reports"),description:e("reportsDescription")},a.createElement("div",{style:{height:"500px",marginTop:"10px"}},a.createElement(D,null)))}}}]);