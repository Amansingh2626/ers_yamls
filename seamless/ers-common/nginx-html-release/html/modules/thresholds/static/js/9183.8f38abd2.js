(self.webpackChunk_unified_thresholds=self.webpackChunk_unified_thresholds||[]).push([[9183],{84857:(e,t,n)=>{"use strict";n.d(t,{T_:()=>i,GI:()=>g,Ur:()=>o,xp:()=>d,cq:()=>h,k5:()=>m,if:()=>p,zQ:()=>s,Yg:()=>u,FX:()=>l,wL:()=>f,g8:()=>c});var r=n(61416);const a=n.n(r)();var l=function(e,t){return a("/alertapp/threshold?pageNumber=".concat(e,"&pageSize=").concat(t))},o=function(e){return a("/alertapp/threshold/".concat(e),{method:"DELETE"})},i=function(e){return a("/alertapp/threshold",{method:"POST",body:e})},s=function(e,t,n){return a("/alertapp/thresholds/".concat(e,"?pageNumber=").concat(t,"&pageSize=").concat(n))},c=function(e){return a("/alertapp/threshold",{method:"PUT",body:e})},u=function(e){return a("/alertapp/threshold/".concat(e))},m=function(e){return a("/pms/v1/product?categoryName=".concat(e))},p=function(e,t,n){return a("/dms/auth/searchResellerBasicInfoByAttribute?limit=".concat(t,"&offSet=").concat(n),{method:"POST",body:e})},d=function(e){return a("/alertapp/low-stock-conf/".concat(e))},g=function(e){return a("/alertapp/low-stock-conf/".concat(e),{method:"DELETE"})},h=function(e){return a("/alertapp/low-stock-conf/get-config",{method:"POST",body:e})},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"POST";return a("/alertapp/low-stock-conf/",{method:t,body:e})}},10615:(e,t,n)=>{"use strict";n.d(t,{xA:()=>be,xE:()=>Se,Xi:()=>qe,VK:()=>xe,Kr:()=>tt,yR:()=>z,MM:()=>Qe});var r=n(2411),a=n.n(r),l=n(23664),o=n(41744),i=n.n(o),s=n(84857),c=n(74315),u=n(63135),m=n(48049),p=n(77277),d=n(38592),g=n(90436),h=n(75696),f=n(64874),E=n(89058),y=n(66054),v=n(70773),T=(0,h.makeStyles)((function(e){return(0,h.createStyles)({dialogWrapper:{textAlign:"center","& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginBottom:e.spacing(3)},btnSpace:{marginRight:e.spacing(2)},element:{width:300},button:{width:80,marginRight:e.spacing(1)}})}));const Z=function(e){var t=e.loading,n=e.thresholds,a=void 0===n?[]:n,o=e.page,h=e.perPage,Z=e.count,b=e.onPageChange,S=e.onPageSizeChange,w=(0,u.useTranslation)().t,I=T(),O=r.useState(0),C=(0,c.Z)(O,2),P=C[0],x=C[1],D=r.useState(!1),R=(0,c.Z)(D,2),N=R[0],k=R[1],B=(0,l.Z)(),A=B.showErrorMessage,j=B.showSuccessMessage,M=function(){k(!1)},L=[{field:"resourceType",headerName:w("resourceType"),sortable:!0,width:200},{field:"resourceId",headerName:w("resourceId"),sortable:!0,width:200},{field:"resourceOwnerType",headerName:w("resourceOwnerType"),sortable:!0,width:200},{field:"resourceOwnerId",headerName:w("resourceOwnerId"),sortable:!0,width:200},{field:"threshold",headerName:w("threshold"),sortable:!0,width:200},{field:"actions",headerName:w("actions"),sortable:!1,renderCell:function(e){return r.createElement("div",null,r.createElement(d.Z,{size:"small",color:"primary","aria-label":"group action buttons"},r.createElement(p.Z,{component:m.Link,to:"/home/thresholds/inventory/edit/"+e.getValue("id")},r.createElement(f.Z,{fontSize:"small"})),r.createElement(p.Z,{onClick:function(){k(!0),x(e.getValue("id"))}},r.createElement(E.Z,{fontSize:"small",style:{color:y.Z[400]}}))))},flex:1}];return r.createElement(r.Fragment,null,r.createElement(i(),{loading:t,onPageSizeChange:function(e){S(e.pageSize)},onPageChange:function(e){b(e.page)},columnBuffer:2,disableColumnFilter:!0,pagination:!0,paginationMode:"server",page:o,rows:a,pageSize:h,getRowId:function(e){return e.id},columns:L,rowCount:Z,autoHeight:!0}),r.createElement(v.SeamlessDialog,{open:N,onClose:M,className:I.dialogWrapper,maxWidth:"sm"},r.createElement(r.Fragment,null,r.createElement("div",{className:I.modalContentSpacing},r.createElement(g.Z,{gutterBottom:!0,id:"transition-modal-title",variant:"h6",className:I.fontHeavy},w("deleteThresholdsConfirmationTitle")),r.createElement(g.Z,{id:"transition-modal-description",variant:"body1"},w("deleteThresholdsConfirmationText"))),r.createElement("div",{className:I.modalContentSpacing},r.createElement(v.SeamlessButton,{type:"button",variant:"outlined",color:"primary",className:I.btnSpace,onClick:M},w("noConfirmationButton")),r.createElement(v.SeamlessButton,{type:"button",variant:"contained",color:"primary",onClick:function(){(0,s.Ur)(P).then((function(e){var t;k(!1),0===e.resultCode?j(e.resultDescription):A(e.resultDescription),null===(t=document.querySelector("[data-id='"+P+"']"))||void 0===t||t.remove()})).catch((function(e){return A(e)}))}},w("yesConfirmationButton"))))))};var b,S=n(7560),w=n(51119),I=n(11746),O=n(60905),C=n(67358),P=n(4614),x=n(86619),D=n(79692),R=n(12420),N=n(6277),k=n(77114),B=n(8526),A=n(77954),j=n(81930),M=n.n(j),L=n(43618),q=n.n(L);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V=(0,D.Z)((function(e){return(0,R.Z)({button:{marginTop:e.spacing(2)},element:{marginRight:e.spacing(1),marginBottom:e.spacing(1)},dateField:{margin:e.spacing(1),width:"100%"},elementField:{marginRight:e.spacing(1),marginBottom:e.spacing(1),width:550},dropDown:{marginTop:e.spacing(2),"& .MuiInputBase-input":{backgroundColor:"transparent",padding:e.spacing(1)}}})})),W=(null===(b=window.config)||void 0===b?void 0:b.resellerAdditionalConfig.dropdownLimit)||50;const z=function(e){var t=e.data,n=(e.edit,e.onFormSubmit),a=V(),o=(0,u.useTranslation)().t,i=r.useState(!1),m=(0,c.Z)(i,2),d=m[0],g=m[1],h=r.useState([]),f=(0,c.Z)(h,2),E=f[0],y=f[1],T=r.useState([]),Z=(0,c.Z)(T,2),b=Z[0],w=Z[1],D=r.useState(""),R=(0,c.Z)(D,2),j=R[0],L=R[1],_=r.useState(""),z=(0,c.Z)(_,2),H=z[0],U=z[1],K=r.useState(!1),X=(0,c.Z)(K,2),G=X[0],$=X[1],Q=r.useState(0),Y=(0,c.Z)(Q,2),J=Y[0],ee=Y[1],te=r.useState(0),ne=(0,c.Z)(te,2),re=ne[0],ae=ne[1],le=r.useRef(null),oe=(0,l.Z)().showErrorMessage,ie=B.Ry().shape({resourceOwnerId:B.Z_().nullable(),resourceOwnerType:B.Z_().required(o("valueIsRequired")).trim().test("len",o("valueIsRequired"),(function(e){return" "!==e})),resourceType:B.Z_().required(o("valueIsRequired")).trim().test("len",o("valueIsRequired"),(function(e){return" "!==e})),resourceId:B.Z_().nullable().required(o("valueIsRequired")).trim().test("len",o("valueIsRequired"),(function(e){return" "!==e})),threshold:B.Z_().matches(/^[0-9]+$/,o("mustBeNumber")).required(o("valueIsRequired"))}),se=(0,k.TA)({initialValues:t,onSubmit:function(e){return n&&n(e)},validationSchema:ie,enableReinitialize:!0,validateOnBlur:!1}),ce={additionalFields:[],resellerData:{resellerTypeId:j,contractId:"",resellerId:"",countryCode:"",resellerMSISDN:"",resellerName:""},lifecycleAttributes:{}};r.useEffect((function(){H&&(g(!0),(0,s.k5)(H).then((function(e){0===e.resultCode?y(e.products):oe(e.resultDescription)})).catch((function(e){oe(e)})).finally((function(){return g(!1)})))}),[H]),r.useEffect((function(){j&&(g(!0),(0,s.if)(ce,W,re).then((function(e){if(0===e.resultCode){var t=e.resellers;w(t),ee(e.totalCount)}else oe(e.resultDescription)})).catch((function(e){oe(e)})).finally((function(){return g(!1)})))}),[j,re]);var ue=se.values,me=se.errors,pe=se.handleChange,de=se.handleBlur,ge=se.handleSubmit,he=se.handleReset,fe=E.map((function(e){return e.variants.map((function(e){return e.productSKU}))})),Ee=Array.prototype.concat.apply([],fe),ye=b.map((function(e){return e.resellerData.resellerId}));return r.createElement(r.Fragment,null,r.createElement(O.Z,{container:!0,spacing:3},r.createElement(q(),null,(function(e){var t=e.categories,n=e.loading;return r.createElement(r.Fragment,null,r.createElement(O.Z,{item:!0,xs:12,sm:3},r.createElement(v.SeamlessDropDown,{fullWidth:!0,label:o("ProductCategory","Product Category"),options:[{key:o("pleaseChoose","Please Choose"),value:" "}].concat((0,I.Z)(t.map((function(e){return{value:e.name,key:e.name}})))),error:G&&!!me.resourceType,helperText:G?me.resourceType:"",name:"resourceType",value:ue.resourceType,onChange:pe,required:!0,className:a.dropDown}),n?r.createElement(C.Z,null):null),U(ue.resourceType))})),r.createElement(O.Z,{item:!0,xs:12,sm:3},r.createElement(v.SeamlessDropDown,{fullWidth:!0,label:o("ProductSKU","Product SKU"),options:[{key:o("pleaseChoose","Please Choose"),value:" "}].concat((0,I.Z)(Ee.map((function(e){return{value:e,key:e}})))),name:"resourceId",required:!0,error:G&&!!me.resourceId,helperText:G?me.resourceId:"",value:ue.resourceId,onChange:pe,disabled:" "===ue.resourceType,className:a.dropDown}))),r.createElement(O.Z,{container:!0,spacing:3},r.createElement(M(),null,(function(e){var t=e.resellerTypes,n=e.loading;return r.createElement(r.Fragment,null,n?r.createElement(C.Z,null):null,r.createElement(O.Z,{item:!0,xs:12,sm:3},r.createElement(v.SeamlessDropDown,{fullWidth:!0,label:o("selectResellerType","Select Reseller Type"),error:G&&!!me.resourceOwnerType,helperText:G&&me.resourceOwnerType,options:[{key:o("pleaseChoose","Please Choose"),value:" "}].concat((0,I.Z)(t.map((function(e){return{value:e.id,key:e.id}})))),name:"resourceOwnerType",value:ue.resourceOwnerType,onChange:pe,required:!0,className:a.dropDown})),L(ue.resourceOwnerType))})),r.createElement(O.Z,{item:!0,xs:12,sm:3},r.createElement(A.ZP,{id:"reseller-id",disabled:" "===ue.resourceOwnerType,fullWidth:!0,className:a.dropDown,options:[{key:o("pleaseChoose","Please Choose"),value:""}].concat((0,I.Z)(ye.map((function(e){return{key:e,value:e}})))),getOptionLabel:function(e){return e.key},getOptionSelected:function(e,t){return e.key===t.key},size:"small",value:{key:ue.resourceOwnerId,value:ue.resourceOwnerId},onChange:function(e,t){pe({target:{value:t.value,name:"resourceOwnerId"}})},ref:le,disableClearable:d,ListboxProps:{onScroll:function(e){if(Math.abs(e.target.scrollHeight-e.target.clientHeight-e.target.scrollTop)<1&&le.current&&!d&&W<=J&&re<=J){var t=new IntersectionObserver((function(e){e[0].isIntersecting&&(t.unobserve(e[0].target),ae((function(e){return e+W})))}),{threshold:1});le.current&&t.observe(le.current)}}},renderInput:function(e){return r.createElement(x.Z,(0,S.Z)({},e,{name:"resourceOwnerId",variant:"filled",label:o("selectResellerId","Select Reseller Id"),InputProps:F(F({},e.InputProps),{},{endAdornment:r.createElement(r.Fragment,null,d?r.createElement(P.Z,{color:"primary",size:20}):null,e.InputProps.endAdornment)})}))}}))),r.createElement(O.Z,{container:!0,spacing:3}," "!=ue.resourceType&&" "!=ue.resourceOwnerType?r.createElement(O.Z,{item:!0,xs:12,sm:3},r.createElement(v.SeamlessInput,{className:(0,N.default)(a.element),fullWidth:!0,required:!0,name:"threshold",error:G&&!!me.threshold,helperText:G&&me.threshold,value:ue.threshold,onChange:pe,label:o("threshold"),onBlur:de})):null),r.createElement(O.Z,{container:!0,spacing:3},r.createElement(O.Z,{item:!0,xs:12},r.createElement(p.Z,{type:"button",onClick:function(e){ge(),$(!0)},className:(0,N.default)(a.element,a.button),color:"primary",variant:"contained"},o("submitButton")),r.createElement(p.Z,{type:"button",onClick:he,className:(0,N.default)(a.element,a.button),color:"primary",variant:"outlined"},o("resetButton")))))};var H=n(33553),U=n(5806),K=n(27556),X=n(82938),G=n(37390),$=n(15584),Q=n(91256),Y=n(58987),J=n(89571),ee=n(97767),te=n(66455),ne=n.n(te),re=n(94478),ae=n.n(re),le=n(18896),oe=n(39886),ie=n(19952),se=n.n(ie),ce=n(21324),ue=n(80030);function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var de=(0,D.Z)((function(e){return(0,R.Z)({mainSection:{fontSize:e.typography.fontSize},element:{marginTop:e.spacing(.5)},spacing:{marginTop:e.spacing(1),padding:e.spacing(.5)},progress:{marginLeft:"8px"},contentRight:{textAlign:"right",marginTop:e.spacing(1),marginBottom:e.spacing(1)}})}));const ge=function(e){var t,n,r=e.data,o=e.comparisonType,i=e.loading,s=e.handleData,c=de(),m=(0,u.useTranslation)().t,d=(0,l.Z)().showErrorMessage,g=B.Ry().shape({alertActionType:B.Z_(),salesInDays:"RELATIVE"===o?B.Rx().min(1).required(m("requiredFieldText")):B.Rx().nullable(),thresholdValue:"RELATIVE"===o?B.Rx().required(m("requiredFieldText")).min(0).max(1).typeError(m("thresholdInvalidRangeError")):B.Rx().min(1).test("len",m("noOfDigitsCannotExceed8"),(function(e){return e.toString().length<=8})).required(m("requiredFieldText")),moreSmsRecipient:B.IX().of(B.Z_()),moreEmailRecipient:B.IX().of(B.Z_()),message:B.Z_().required(m("requiredFieldText")).max(250),parentMessage:B.Z_().when("notifyParent",{is:!0,then:B.Z_().required("requiredFieldText").max(250)})}),h=(0,k.TA)({initialValues:r.data,validationSchema:g,onSubmit:function(e){b().then((function(t){var n=Object.values(t);n.length<=0?(s({data:e,open:!0}),S(e)):d(n[0])}))},enableReinitialize:!0}),f=h.values,E=h.handleChange,y=h.errors,T=h.handleSubmit,Z=h.setFieldValue,b=h.validateForm,S=h.handleReset,w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sms";"email"===e?(f.moreEmailRecipient.push(""),Z("moreEmailRecipient",f.moreEmailRecipient)):(f.moreSmsRecipient.push(""),Z("moreSmsRecipient",f.moreSmsRecipient))},I=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sms";"email"===r?(null===(t=f.moreEmailRecipient)||void 0===t||t.splice(e,1),Z("moreEmailRecipient",f.moreEmailRecipient)):(null===(n=f.moreSmsRecipient)||void 0===n||n.splice(e,1),Z("moreSmsRecipient",f.moreSmsRecipient))},C=function(e,t,n){"email"===t?(f.moreEmailRecipient[n]=e,Z("moreEmailRecipient",f.moreEmailRecipient)):(f.moreSmsRecipient[n]=e,Z("moreSmsRecipient",f.moreSmsRecipient))};return a().createElement(se(),{open:r.open,onClose:function(){return s(pe(pe({},r),{},{open:!1}))},onOk:T,loading:i,maxWidth:"lg",okButtonText:m("saveChanges"),dialogTitle:m("lowBalanceLevelConfigTitle"),dialogDescription:m("lowBalanceLevelConfigDescription")},a().createElement(O.Z,{container:!0},a().createElement(O.Z,{item:!0,xs:12,sm:6,style:{paddingTop:"1rem"},className:c.spacing},a().createElement(v.SeamlessDropDown,{label:m("alertActionType"),fullWidth:!0,options:[{value:"BOTH",key:m("notifyLabelBoth")},{value:"SMS",key:m("notifyLabelSMS")},{value:"EMAIL",key:m("notifyLabelEmail")}],name:"alertActionType",value:f.alertActionType,onChange:E})),a().createElement(O.Z,{item:!0,xs:12,sm:6,className:c.spacing},a().createElement(v.SeamlessInput,{fullWidth:!0,className:(0,N.default)(c.element),required:"RELATIVE"===o,error:!!y.salesInDays,helperText:"".concat((null==y?void 0:y.salesInDays)||m("pleaseEnterValue")),name:"salesInDays",type:"number",value:f.salesInDays,onChange:E,label:m("salesInDays")})),a().createElement(O.Z,{item:!0,xs:12,sm:6,className:c.spacing},a().createElement(v.SeamlessInput,{fullWidth:!0,className:(0,N.default)(c.element),error:!!y.thresholdValue,helperText:"".concat((null==y?void 0:y.thresholdValue)||m("pleaseEnterValue")),name:"thresholdValue",required:!0,type:"number",value:f.thresholdValue,onChange:E,label:m("thresholdValue")}))),["BOTH","SMS"].includes(f.alertActionType)&&a().createElement(O.Z,{container:!0},a().createElement(O.Z,{item:!0,sm:12,className:c.contentRight},a().createElement(v.SeamlessButton,{variant:"contained",onClick:function(e){return w()},color:"primary",startIcon:a().createElement(le.Z,null)},m("addNewParam","Add New Phone"))),null===(t=f.moreSmsRecipient)||void 0===t?void 0:t.map((function(e,t){return a().createElement(O.Z,{item:!0,key:t,sm:6,className:c.spacing},a().createElement(H.Z,{display:"flex"},a().createElement(O.Z,{item:!0,sm:10},a().createElement(v.SeamlessInput,{fullWidth:!0,className:(0,N.default)(c.element),helperText:"".concat(m("pleaseEnterPhone")),name:e,value:e,onChange:function(e){return C(e.target.value,"sms",t)},placeholder:m("phone")})),a().createElement(O.Z,{item:!0,sm:2},a().createElement(p.Z,{className:c.element,onClick:function(){return I(t)},variant:"text"},a().createElement(oe.Z,null)))))}))),["BOTH","EMAIL"].includes(f.alertActionType)&&a().createElement(O.Z,{container:!0},a().createElement(O.Z,{item:!0,sm:12,className:c.contentRight},a().createElement(v.SeamlessButton,{variant:"contained",onClick:function(e){return w("email")},color:"primary",startIcon:a().createElement(le.Z,null)},m("addNewParam","Add New Email"))),null===(n=f.moreEmailRecipient)||void 0===n?void 0:n.map((function(e,t){return a().createElement(O.Z,{item:!0,key:t,sm:6,className:c.spacing},a().createElement(H.Z,{display:"flex",className:c.spacing},a().createElement(O.Z,{item:!0,sm:10},a().createElement(v.SeamlessInput,{fullWidth:!0,className:(0,N.default)(c.element),helperText:"".concat(m("pleaseEnterEmail")),name:e,value:e,onChange:function(e){return C(e.target.value,"email",t)},placeholder:m("email")})),a().createElement(O.Z,{item:!0,sm:2},a().createElement(p.Z,{className:c.element,onClick:function(){return I(t,"email")},variant:"text"},a().createElement(oe.Z,null)))))}))),a().createElement(O.Z,{container:!0},a().createElement(O.Z,{item:!0,xs:12,sm:6,md:3,lg:3,className:c.spacing},a().createElement(U.Z,{style:{marginTop:"2rem",marginLeft:8},control:a().createElement(ce.Z,{checked:f.notifyParent,onChange:function(e,t){Z("notifyParent",t)},name:"checkedB",color:"primary"}),label:m("notifyParent")})),f.notifyParent&&a().createElement(O.Z,{container:!0},a().createElement(O.Z,{sm:12,md:8,lg:6,className:c.spacing},a().createElement(ue.ZP,{title:m("parentMessage"),arrow:!0},a().createElement(v.SeamlessInput,{fullWidth:!0,inputProps:{maxLength:250},className:c.element,name:"parentMessage",error:!!y.parentMessage,helperText:"".concat((null==y?void 0:y.message)||m("pleaseEnterValue")),required:!0,multiline:!0,rows:4,rowsMax:5,value:f.parentMessage,onChange:E,label:m("parentMessage")})))),a().createElement(O.Z,{container:!0},a().createElement(O.Z,{item:!0,sm:12,md:8,lg:6,className:c.spacing},a().createElement(ue.ZP,{title:m("resellerMessage"),arrow:!0},a().createElement(v.SeamlessInput,{fullWidth:!0,className:c.element,inputProps:{maxLength:250},name:"message",error:!!y.message,helperText:"".concat((null==y?void 0:y.message)||m("pleaseEnterValue")),required:!0,multiline:!0,rows:4,rowsMax:5,value:f.message,onChange:E,label:m("resellerMessage")}))))))};var he;function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye=(null===(he=window.config)||void 0===he?void 0:he.resellerAdditionalConfig)||{};function ve(e,t){return e.sequence>t.sequence?1:e.sequence<t.sequence?-1:0}var Te=(0,D.Z)((function(e){return(0,R.Z)({button:{marginTop:10},element1:{marginRight:e.spacing(1),marginBottom:e.spacing(1)},element:{marginTop:e.spacing(1)},dateField:{margin:e.spacing(1),width:"100%"},elementField:{marginRight:e.spacing(1),marginBottom:e.spacing(1),width:550},topSpacing:{marginTop:e.spacing(2.5)},spacing:{margin:e.spacing(1)},table:{minWidth:650}})})),Ze={sequence:0,alertActionType:"BOTH",salesInDays:0,thresholdValue:0,notifyParent:!1,moreSmsRecipient:[],moreEmailRecipient:[],message:"",parentMessage:""};const be=function(e){var t=e.data,n=(e.edit,e.loading),a=void 0!==n&&n,o=e.onFormSubmit,i=Te(),s=(0,u.useTranslation)().t,m=r.useState({open:!1,data:Ze}),g=(0,c.Z)(m,2),h=g[0],T=g[1],Z=(0,l.Z)().showErrorMessage,b=B.Ry().shape({resellerTypeId:B.Z_().required("Reseller type ".concat(s("isRequiredField"))),resellerAccountTypeId:B.Z_().required("Account type ".concat(s("isRequiredField"))),groupName:B.Z_().required("Group name ".concat(s("isRequiredField"))),enabled:B.O7(),params:B.IX().of(B.Ry().shape({paramType:B.Z_(),resellerId:B.Z_(),paramId:B.Z_(),paramValue:B.Z_()}))}),I=(0,k.TA)({initialValues:t,onSubmit:function(e){j().then((function(t){var n=Object.values(t);if(n.length<=0){if(0===e.levels.length)return Z("Please define at least 1 level of threshold");o(e)}else Z(n[0])}))},validationSchema:b,enableReinitialize:!0,validateOnBlur:!1}),C=I.values,P=I.errors,x=I.handleChange,D=I.handleSubmit,R=I.handleReset,A=I.setFieldValue,j=I.validateForm,M=function(e,t,n){C.params[n]=Ee(Ee({},C.params[n]),{},(0,w.Z)({},t,e)),A("params",C.params)};return r.createElement(r.Fragment,null,r.createElement(O.Z,{container:!0,spacing:3},r.createElement(O.Z,{item:!0,xs:12,sm:3,style:{paddingTop:C.resellerTypeId?"1rem":"2rem"}},r.createElement(ne(),{name:"resellerTypeId",value:C.resellerTypeId,handleChange:x,onlyAllowedTypes:ye.onlyAllowedTypesForSearch||!1,label:C.resellerTypeId?s("resellerType"):"",classes:i,errors:P,helperText:(null==P?void 0:P.resellerTypeId)||s("selectResellerType"),required:!0})),r.createElement(O.Z,{item:!0,xs:12,sm:3,style:{paddingTop:C.resellerTypeId?"1rem":"2rem"}},r.createElement(ae(),{name:"resellerAccountTypeId",value:C.resellerAccountTypeId,errors:P,classes:i,handleChange:x,label:C.resellerAccountTypeId?s("selectResellerType","Please select reseller type"):"",helperText:(null==P?void 0:P.resellerAccountTypeId)||s("selectResellerAccountTypeId"),required:!0})),r.createElement(O.Z,{item:!0,xs:12,sm:3},r.createElement(v.SeamlessInput,{className:(0,N.default)(i.element),fullWidth:!0,required:!0,name:"groupName",error:!!P.groupName,helperText:P.groupName||s("pleaseEnter_",{fieldName:s("groupName")}),value:C.groupName,onChange:x,label:s("groupName")}))),r.createElement(O.Z,{container:!0,spacing:3},r.createElement(O.Z,{item:!0,xs:12,sm:4},r.createElement(v.SeamlessDropDown,{id:"admin-support-report-drop-down",fullWidth:!0,className:(0,N.default)(i.element),label:s("adminSupportReport"),helperText:s("selectReportGroup"),options:[{value:"ABSOLUTE",key:"ABSOLUTE"},{value:"RELATIVE",key:"RELATIVE"}],name:"comparisonType",value:C.comparisonType,onChange:x})),r.createElement(O.Z,{item:!0,xs:12,sm:4},r.createElement(H.Z,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},r.createElement(U.Z,{style:{marginTop:"1rem"},control:r.createElement(X.Z,{checked:C.enabled,onChange:function(e,t){return A("enabled",t)}}),label:s("Enabled")})))),r.createElement(O.Z,{container:!0},r.createElement(O.Z,{item:!0,xs:11,sm:11},r.createElement(H.Z,{display:"flex",flexDirection:"row-reverse",alignItems:"center"},r.createElement(v.SeamlessButton,{variant:"contained",onClick:function(e){return(t=C.params).push({paramType:"ADDITIONAL_FIELD",paramId:"",paramValue:""}),void A("params",t);var t},color:"primary",startIcon:r.createElement(le.Z,null)},s("addNewParam","Add new params"))))),C.params.map((function(e,t){return r.createElement(O.Z,{container:!0,key:t,spacing:3},r.createElement(O.Z,{item:!0,xs:12,style:{paddingTop:"2rem"},sm:3},r.createElement(v.SeamlessDropDown,{label:s("paramType","Select paramType"),fullWidth:!0,options:[{value:"ADDITIONAL_FIELD",key:"Additional Field"},{value:"RESELLER_ID",key:"Reseller Id"}],name:e.paramType,value:e.paramType,onChange:function(e){return M(e.target.value,"paramType",t)}})),"ADDITIONAL_FIELD"===e.paramType?r.createElement(r.Fragment,null,r.createElement(O.Z,{item:!0,xs:12,sm:3},r.createElement(v.SeamlessInput,{className:(0,N.default)(i.element),fullWidth:!0,required:!0,name:e.paramId,helperText:s("pleaseEnter_",{fieldName:s("paramId")}),value:e.paramId,onChange:function(e){return M(e.target.value,"paramId",t)},label:s("paramId")})),r.createElement(O.Z,{item:!0,xs:12,sm:3},r.createElement(v.SeamlessInput,{className:(0,N.default)(i.element),fullWidth:!0,required:!0,name:e.paramValue,helperText:s("pleaseEnter_",{fieldName:s("paramValue")}),value:e.paramValue,onChange:function(e){return M(e.target.value,"paramValue",t)},label:s("paramValue")}))):r.createElement(O.Z,{item:!0,xs:12,sm:3},r.createElement(v.SeamlessInput,{className:(0,N.default)(i.element),fullWidth:!0,required:!0,name:e.resellerId,helperText:s("pleaseEnter_",{fieldName:s("resellerId")}),value:e.resellerId,onChange:function(e){return M(e.target.value,"resellerId",t)},label:s("resellerId")})),r.createElement(O.Z,{item:!0,sm:2},r.createElement(p.Z,{className:i.topSpacing,onClick:function(){return e=t,null===(n=C.params)||void 0===n||n.splice(e,1),void A("params",C.params);var e,n},variant:"text"},r.createElement(oe.Z,null))))})),r.createElement(O.Z,{container:!0},r.createElement(O.Z,{className:i.topSpacing,item:!0,xs:11,sm:11},r.createElement(H.Z,{display:"flex",flexDirection:"row-reverse",alignItems:"center"},r.createElement(v.SeamlessButton,{variant:"contained",onClick:function(e){T({data:h.data,open:!0})},color:"primary",startIcon:r.createElement(le.Z,null)},s("addNewLevel","Add new level")))),r.createElement(ge,{data:h,comparisonType:C.comparisonType,loading:a,handleData:function(e){var t=e.data;if(e.open){if(t.sequence){var n=C.levels.findIndex((function(e){return e.sequence===t.sequence}));C.levels[n]=t}else t.sequence=C.levels.length+1,C.levels.push(t);C.levels=C.levels.filter((function(e){return!!e.message})),A("levels",C.levels)}Ze.moreSmsRecipient=[],Ze.moreEmailRecipient=[],T({data:Ze,open:!1})}})),r.createElement(O.Z,{container:!0,className:i.topSpacing},r.createElement(ee.Z5,{onDragEnd:function(e){if(e.destination){var t=Array.from(C.levels),n=t.splice(e.source.index,1),r=(0,c.Z)(n,1)[0];t.splice(e.destination.index,0,r),t.forEach((function(e,n){return t[n].sequence=n+1})),A("levels",t)}}},r.createElement(Q.Z,{component:K.Z},r.createElement(G.Z,{className:i.table,"aria-label":"simple table"},r.createElement(Y.Z,null,r.createElement(J.Z,null,r.createElement($.Z,{width:50},r.createElement("strong",null,"Rearrange")),r.createElement($.Z,{width:50},r.createElement("strong",null,"Sequence")),r.createElement($.Z,null,r.createElement("strong",null,s("alertActionType"))),r.createElement($.Z,null,r.createElement("strong",null,s("salesInDays"))),r.createElement($.Z,null,r.createElement("strong",null,s("thresholdValue"))),r.createElement($.Z,null,r.createElement("strong",null,s("resellerMessage"))),r.createElement($.Z,null,r.createElement("strong",null,s("parentMessage"))),r.createElement($.Z,null,r.createElement("strong",null,s("actions"))))),r.createElement(ee.bK,{droppableId:"droppable-1"},(function(e){var t;return r.createElement("tbody",(0,S.Z)({className:"text-capitalize",ref:e.innerRef},e.droppableProps),null===(t=C.levels)||void 0===t?void 0:t.sort(ve).map((function(e,t){return r.createElement(ee._l,{key:e.message,draggableId:e.message,index:t},(function(n){return r.createElement(J.Z,(0,S.Z)({},n.draggableProps,{ref:n.innerRef}),r.createElement($.Z,(0,S.Z)({scope:"row"},n.dragHandleProps),"="),r.createElement($.Z,null,e.sequence),r.createElement($.Z,{scope:"row"},e.alertActionType),r.createElement($.Z,null,e.salesInDays),r.createElement($.Z,null,e.thresholdValue),r.createElement($.Z,null,e.message),r.createElement($.Z,null,e.parentMessage||"-"),r.createElement($.Z,null,r.createElement("div",null,r.createElement(d.Z,{size:"small",color:"primary","aria-label":"group action buttons"},r.createElement(p.Z,{onClick:function(){T({data:e,open:!0})}},r.createElement(f.Z,{fontSize:"small"})),r.createElement(p.Z,{onClick:function(){var e=C.levels.filter((function(e,n){return n!==t})).map((function(e,t){return Ee(Ee({},e),{},{sequence:t+1})}));A("levels",e)}},r.createElement(E.Z,{fontSize:"small",style:{color:y.Z[400]}}))))))}))})),e.placeholder)})))))),r.createElement(O.Z,{container:!0,className:i.topSpacing,spacing:3},r.createElement(O.Z,{item:!0,xs:12},r.createElement(p.Z,{type:"button",onClick:function(e){return D()},className:i.spacing,color:"primary",variant:"contained"},s("submitButton")),r.createElement(p.Z,{type:"button",onClick:R,className:i.spacing,color:"primary",variant:"outlined"},s("resetButton")))))},Se=function(e){var t=e.disable,n=void 0!==t&&t,a=e.url,l=void 0===a?"/home/thresholds/inventory/create":a,o=(0,u.useTranslation)().t;return r.createElement(v.SeamlessButton,{component:m.Link,to:l,variant:"contained",color:"primary",disabled:n,endIcon:r.createElement(le.Z,null)},o("createButton"))};var we,Ie=n(21853),Oe=(null===(we=window.config)||void 0===we?void 0:we.resellerAdditionalConfig)||{},Ce=(0,D.Z)((function(e){return(0,R.Z)({button:{marginTop:e.spacing(3)},element:{marginTop:e.spacing(1)},tbSpacing:{marginTop:e.spacing(2),marginBottom:e.spacing(2),"& .MuiInputBase-input":{backgroundColor:"#eeeeee",padding:e.spacing(1)}}})})),Pe={resellerAccountTypeId:"",resellerTypeId:""};const xe=function(e){var t=e.onFormSubmit,n=e.loading,a=Ce(),o=(0,u.useTranslation)().t,i=(0,l.Z)(),s=(i.showErrorMessage,i.showSuccessMessage,i.showWarningMessage,B.Ry().shape({resellerAccountTypeId:B.Z_(),resellerTypeId:B.Z_().required("Reseller type is required")})),c=(0,k.TA)({initialValues:Pe,validationSchema:s,onSubmit:function(e){return t(e)},enableReinitialize:!0}),m=c.values,p=c.handleChange,d=c.handleSubmit,g=c.errors;return r.createElement(O.Z,{container:!0,className:a.tbSpacing,spacing:2},r.createElement(O.Z,{item:!0,xs:12,style:{paddingTop:m.resellerTypeId?"1rem":"2rem"},sm:4},r.createElement(ne(),{name:"resellerTypeId",value:m.resellerTypeId,handleChange:p,onlyAllowedTypes:Oe.onlyAllowedTypesForSearch||!1,label:m.resellerTypeId?o("resellerType"):"",errors:g,helperText:(null==g?void 0:g.resellerTypeId)||o("selectResellerType"),required:!0})),r.createElement(O.Z,{item:!0,xs:12,sm:4,style:{paddingTop:m.resellerTypeId?"1rem":"2rem"}},r.createElement(ae(),{name:"resellerAccountTypeId",value:m.resellerAccountTypeId,errors:g,handleChange:p,label:m.resellerAccountTypeId?o("selectResellerType","Please select reseller type"):"",helperText:(null==g?void 0:g.resellerAccountTypeId)||o("selectResellerAccountTypeId"),required:!0})),r.createElement(O.Z,{item:!0,xs:12,sm:2},r.createElement(v.SeamlessButton,{variant:"contained",className:a.button,onClick:function(e){return d()},disabled:n,color:"primary",endIcon:n?r.createElement(P.Z,{color:"inherit",size:14,thickness:6}):r.createElement(Ie.Z,null)},o("search"))))};var De=n(55238);function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const Ne=function(e){var t=e.children,n=e.data,a=r.useState([]),i=(0,c.Z)(a,2),u=i[0],m=i[1],p=r.useState(!1),d=(0,c.Z)(p,2),g=d[0],h=d[1],f=r.useState(0),E=(0,c.Z)(f,2),y=E[0],v=E[1],T=(0,o.useServerTable)({page:0,perPage:20,order:"asc",orderBy:"",filter:{}}),Z=(0,l.Z)().showErrorMessage;return r.useEffect((function(){h(!0),(0,s.cq)(n).then((function(e){var t;0===e.resultCode?(v(null===(t=e.lowStockConfList)||void 0===t?void 0:t.length),m(e.lowStockConfList)):Z(e)})).catch((function(e){Z(e)})).finally((function(){return h(!1)}))}),[n]),r.createElement(r.Fragment,null,t(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({thresholds:u,loading:g,count:y},T)))};var ke=n(60552),Be=n(44104),Ae=n.n(Be),je=n(67801),Me=(0,h.makeStyles)((function(e){return(0,h.createStyles)({dialogWrapper:{textAlign:"center","& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginBottom:e.spacing(3)},btnSpace:{marginRight:e.spacing(2)},element:{width:300},button:{width:80,marginRight:e.spacing(1)}})}));const Le=function(e){var t=e.loading,n=e.thresholds,a=void 0===n?[]:n,o=e.page,h=e.perPage,T=e.count,Z=e.onPageChange,b=e.onPageSizeChange,S=(0,u.useTranslation)().t,w=Ae()().checkPermission,I=Me(),O=r.useState(0),C=(0,c.Z)(O,2),P=C[0],x=C[1],D=r.useState(!1),R=(0,c.Z)(D,2),N=R[0],k=R[1],B=(0,l.Z)(),A=B.showErrorMessage,j=B.showSuccessMessage,M=function(){k(!1)},L=[{field:"resellerTypeId",headerName:S("resellerTypeId"),sortable:!0,width:200},{field:"resellerAccountTypeId",headerName:S("resellerAccountTypeId"),sortable:!0,width:200},{field:"groupName",headerName:S("groupName"),sortable:!0,width:200},{field:"enabled",headerName:S("enabled"),sortable:!0,width:100},{field:"comparisonType",headerName:S("comparisonType"),sortable:!0,width:200},{field:"actions",headerName:S("actions"),sortable:!1,renderCell:function(e){return r.createElement("div",null,r.createElement(d.Z,{size:"small",color:"primary","aria-label":"group action buttons"},w(je.Z.updateBalanceThresholds)&&r.createElement(p.Z,{component:m.Link,to:"/home/thresholds/balance/edit/"+e.getValue("id")},r.createElement(f.Z,{fontSize:"small"})),w(je.Z.getSingleBalanceThreshold)&&r.createElement(p.Z,{component:m.Link,to:"/home/thresholds/balance/view/"+e.getValue("id")},r.createElement(ke.Z,{fontSize:"small"})),w(je.Z.deleteBalanceThresholds)&&r.createElement(p.Z,{onClick:function(){k(!0),x(e.getValue("id"))}},r.createElement(E.Z,{fontSize:"small",style:{color:y.Z[400]}}))))},width:250}];return r.createElement(r.Fragment,null,r.createElement(i(),{loading:t,onPageSizeChange:function(e){b(e.pageSize)},onPageChange:function(e){Z(e.page)},columnBuffer:2,disableColumnFilter:!0,pagination:!0,paginationMode:"server",page:o,rows:a,pageSize:h,getRowId:function(e){return e.id},columns:L,rowCount:T,autoHeight:!0}),r.createElement(v.SeamlessDialog,{open:N,onClose:M,className:I.dialogWrapper,maxWidth:"sm"},r.createElement(r.Fragment,null,r.createElement("div",{className:I.modalContentSpacing},r.createElement(g.Z,{gutterBottom:!0,id:"transition-modal-title",variant:"h6",className:I.fontHeavy},S("deleteThresholdsConfirmationTitle")),r.createElement(g.Z,{id:"transition-modal-description",variant:"body1"},S("deleteThresholdsConfirmationText"))),r.createElement("div",{className:I.modalContentSpacing},r.createElement(v.SeamlessButton,{type:"button",variant:"outlined",color:"primary",className:I.btnSpace,onClick:M},S("noConfirmationButton")),r.createElement(v.SeamlessButton,{type:"button",variant:"contained",color:"primary",onClick:function(){(0,s.GI)(P).then((function(e){var t;k(!1),0===e.resultCode?j(e.resultDescription):A(e.resultDescription),null===(t=document.querySelector("[data-id='"+P+"']"))||void 0===t||t.remove()})).catch((function(e){return A(e)}))}},S("yesConfirmationButton"))))))},qe=function(e){var t=e.data;return r.createElement(r.Fragment,null,r.createElement(Ne,{data:t},(function(e){var t=e.thresholds,n=e.loading,a=e.count,l=(0,De.Z)(e,["thresholds","loading","count"]);return r.createElement(Le,(0,S.Z)({thresholds:t,loading:n,count:a},l))})))};var _e=n(15459),Fe=n(27616),Ve=n(8284),We=n(70660),ze=n(38016),He=n(40902),Ue=n(38973),Ke=n.n(Ue);function Xe(e,t){return e.sequence>t.sequence?1:e.sequence<t.sequence?-1:0}var Ge=(0,D.Z)((function(e){return(0,R.Z)({btnSpacing:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},spacingTop:{marginTop:e.spacing(3)},spacingBottom:{marginBottom:e.spacing(3)},colHead:{textTransform:"capitalize",fontWeight:"bold"},rowSpacing:{marginBottom:e.spacing(2)},row:{marginBottom:e.spacing(2),marginTop:e.spacing(2),marginLeft:e.spacing(1),marginRight:e.spacing(1)},row1:{marginBottom:e.spacing(2),marginTop:e.spacing(-1),marginLeft:e.spacing(1),marginRight:e.spacing(1)},fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{textTransform:"capitalize",fontSize:14,wordBreak:"break-all","& .import-file-name":{textTransform:"none !important"}},flexBox:{display:"flex",alignItems:"center"},fullWidth:{width:"100%"}})})),$e=(0,_e.Z)((function(e){return(0,R.Z)({root:{backgroundColor:e.palette.background.default,borderBottom:"1px solid rgba(0, 0, 0, .125)",marginBottom:-1,minHeight:56,"&$expanded":{minHeight:56}},content:{"&$expanded":{margin:0}},expanded:{}})}))(Ve.Z);const Qe=function(e){var t,n,a,l,o,i=e.id,s=e.data,p=Ge(),d=(0,u.useTranslation)().t,h=r.useState("panel1"),E=(0,c.Z)(h,2),y=E[0],v=E[1],T=function(e,t){return function(t,n){v(!!n&&e)}};return r.createElement(H.Z,{display:"flex",flexDirection:"column"},r.createElement(H.Z,{display:"flex",flexDirection:"row",style:{marginBottom:"2rem"},alignItems:"center",justifyContent:"space-between"},r.createElement(m.Link,{to:"/home/thresholds/balance",style:{fontSize:24}},r.createElement(He.Z,{fontSize:"small"})),r.createElement("div",null,r.createElement(m.Link,{to:"/home/thresholds/balance/edit/".concat(i),style:{textAlign:"right"}},r.createElement(f.Z,{fontSize:"small"})))),r.createElement(Fe.Z,{square:!0,expanded:"panel1"===y,onChange:T("panel1"),className:p.fullWidth},r.createElement($e,{"aria-controls":"panel2d-content",id:"panel2d-header",expandIcon:r.createElement(ze.Z,null)},r.createElement(g.Z,{variant:"subtitle1",color:"primary"},d("basicBalanceConfig"))),r.createElement(We.Z,null,r.createElement(O.Z,{container:!0,spacing:3,className:p.row,alignItems:"center"},r.createElement(Ke(),{title:d("groupName"),value:s.groupName}),r.createElement(Ke(),{title:d("comparisonType"),value:s.comparisonType}),r.createElement(Ke(),{title:d("resellerTypeId"),value:s.resellerTypeId}),r.createElement(Ke(),{title:d("resellerAccountTypeId"),value:s.resellerAccountTypeId}),r.createElement(Ke(),{title:d("enabled"),value:s.enabled?d("yes"):d("no")})))),(null===(t=s.params)||void 0===t?void 0:t.length)>0&&r.createElement(Fe.Z,{square:!0,expanded:"panel2"===y,onChange:T("panel2"),className:p.fullWidth},r.createElement($e,{"aria-controls":"panel2d-content",id:"panel2d-header",expandIcon:r.createElement(ze.Z,null)},r.createElement(g.Z,{variant:"subtitle1",color:"primary"},d("paramsBalanceConfig"))),r.createElement(We.Z,null,r.createElement(O.Z,{container:!0,spacing:3,className:p.row,alignItems:"center"},null===(n=s.params)||void 0===n?void 0:n.map((function(e){return r.createElement(O.Z,{container:!0,spacing:3,className:p.row,alignItems:"center"},r.createElement(Ke(),{title:d("ID"),value:e.id}),r.createElement(Ke(),{title:d("lowStockConfId"),value:e.lowStockConfId}),r.createElement(Ke(),{title:d("paramType"),value:e.paramType}),r.createElement(Ke(),{title:d("resellerId"),value:e.resellerId}),r.createElement(Ke(),{title:d("paramId"),value:e.paramId}),r.createElement(Ke(),{title:d("paramValue"),value:e.paramValue}))}))))),(null===(a=s.levels)||void 0===a?void 0:a.length)>0&&r.createElement(Fe.Z,{square:!0,expanded:"panel3"===y,onChange:T("panel3"),className:p.fullWidth},r.createElement($e,{"aria-controls":"panel3d-content",id:"panel3d-header",expandIcon:r.createElement(ze.Z,null)},r.createElement(g.Z,{variant:"subtitle1",color:"primary"},d("levelsBalanceConfig"))),r.createElement(We.Z,null,r.createElement(O.Z,{container:!0,spacing:3,className:p.row,alignItems:"center"},null===(l=s.levels)||void 0===l||null===(o=l.sort(Xe))||void 0===o?void 0:o.map((function(e){return r.createElement(O.Z,{container:!0,spacing:3,className:p.row,alignItems:"center"},r.createElement(O.Z,{container:!0,spacing:3,className:p.row,alignItems:"center"},r.createElement(Ke(),{title:d("sequence"),value:e.sequence}),r.createElement(Ke(),{title:d("ID"),value:e.id}),r.createElement(Ke(),{title:d("lowStockConfId"),value:e.lowStockConfId}),r.createElement(Ke(),{title:d("notifyParent"),value:e.notifyParent?d("yes"):d("no")}),r.createElement(Ke(),{title:d("salesInDays"),value:e.salesInDays}),r.createElement(Ke(),{title:d("thresholdValue"),value:e.thresholdValue})),r.createElement(O.Z,{container:!0,spacing:3,className:p.row1,alignItems:"center"},r.createElement(Ke(),{title:d("emails"),valueProps:{xs:12,sm:9},value:e.moreEmailRecipient.join(", ")}),r.createElement(Ke(),{title:d("phone"),valueProps:{xs:12,sm:9},value:e.moreSmsRecipient.join(", ")})))}))))))};var Ye=n(50581),Je=n(74603),et=(0,D.Z)((function(e){return(0,R.Z)({button:{marginRight:e.spacing(1),marginTop:e.spacing(3.75)},element:{marginTop:e.spacing(1),marginBottom:e.spacing(1),marginRight:e.spacing(1)},check:{marginTop:e.spacing(2.7),marginRight:e.spacing(1)},root:{padding:"".concat(e.spacing(.5),"px ").concat(e.spacing(1),"px"),display:"flex",alignItems:"center",width:250,marginBottom:e.spacing(1.5)},icon:{fontSize:15}})}));const tt=function(){var e=et(),t=(0,u.useTranslation)().t,n=r.useState([]),a=(0,c.Z)(n,2),i=a[0],m=a[1],p=r.useState(""),d=(0,c.Z)(p,2),g=d[0],h=d[1],f=r.useState(0),E=(0,c.Z)(f,2),y=E[0],v=E[1],T=(0,l.Z)(),b=T.showErrorMessage,w=(T.showSuccessMessage,T.showWarningMessage,(0,o.useServerTable)({page:0,perPage:20,order:"asc",orderBy:"",filter:{}}));return r.useEffect((function(){g?(0,s.zQ)(g,w.page,w.perPage).then((function(e){0===e.resultCode?(m(e.ownerResourceThresholdList),v(e.totalCount)):b(e.resultDescription)})).catch((function(e){return b(e)})):(0,s.FX)(w.page,w.perPage).then((function(e){v(e.totalCount),0===e.resultCode?m(e.ownerResourceThresholdList):b(e.resultDescription)})).catch((function(e){b(e)}))}),[g]),r.createElement(r.Fragment,null,r.createElement("section",null,r.createElement(K.Z,{className:e.root},r.createElement(Je.Z,{name:"ownerId",onChange:function(e){return h(e.target.value)},placeholder:t("searchOwnerId"),startAdornment:r.createElement(Ye.Z,{position:"start"},r.createElement(Ie.Z,{className:e.icon}))}))),r.createElement(Z,(0,S.Z)({thresholds:i,count:y},w)))}},34579:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(74315),a=n(2411),l=n.n(a),o=n(29971);const i=function(e){var t=l().useState(null),n=(0,r.Z)(t,2),a=n[0],i=n[1],s=(0,o.useSelector)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.rbac}),o.shallowEqual);return l().useEffect((function(){var t,n=(null===(t=s.features.find((function(t){return t.module===e})))||void 0===t?void 0:t.features)||[];i(n)}),[s]),a}},11833:(e,t,n)=>{"use strict";n.d(t,{Z:()=>N});var r=n(2411),a=n(48049),l=n(51119),o=n(74315),i=n(70773),s=n(63135),c=n(10615),u=n(23664),m=n(84857);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g={resellerTypeId:"",resellerAccountTypeId:"",groupName:"",comparisonType:"ABSOLUTE",enabled:!0,params:[{paramType:"ADDITIONAL_FIELD",paramId:"",paramValue:""}],levels:[]};const h=function(){var e=(0,s.useTranslation)().t,t=r.useState(!1),n=(0,o.Z)(t,2),l=n[0],p=n[1],h=(0,u.Z)(),f=h.showErrorMessage,E=h.showSuccessMessage,y=(0,a.useHistory)();r.useEffect((function(){g.levels=[]}),[]);var v=r.useCallback((function(e){p(!0);var t=e.levels,n=[];e.levels=null==e?void 0:e.levels.map((function(e){if(null!=e&&e.notifyParent){var t=null==e?void 0:e.parentMessage;return n.push(null==e?void 0:e.parentMessage),null==e||delete e.parentMessage,d(d({},e),{},{message:(null==e?void 0:e.message)+"|"+t})}return n.push(null==e?void 0:e.parentMessage),null==e||delete e.parentMessage,e})),(0,m.wL)(e).then((function(e){0===e.resultCode?(E(e),y.push("/home/thresholds/balance")):f(e)})).catch((function(e){return f(e)})).finally((function(){e.levels=t.map((function(e,t){return d(d({},e),{},{parentMessage:n[t]})})),p(!1)}))}),[]);return r.createElement(i.SeamlessContainer,{title:e("createThresholdBalancePageTitle"),description:e("createThresholdPageDescription")},r.createElement(c.xA,{data:g,loading:l,onFormSubmit:function(e){return v(e)}}))};var f=n(67358);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v={resellerTypeId:"",resellerAccountTypeId:"",groupName:"",comparisonType:"ABSOLUTE",enabled:!0,params:[{paramType:"ADDITIONAL_FIELD",paramId:"",paramValue:""}],levels:[]};const T=function(){var e=(0,s.useTranslation)().t,t=(0,a.useParams)().id,n=r.useState(!1),l=(0,o.Z)(n,2),p=l[0],d=l[1],g=(0,u.Z)(),h=g.showErrorMessage,E=g.showSuccessMessage,T=(0,a.useHistory)(),Z=r.useState(v),b=(0,o.Z)(Z,2),S=b[0],w=b[1];r.useEffect((function(){d(!0),(0,m.xp)(t).then((function(e){var t;e.lowStockConf.levels=null==e||null===(t=e.lowStockConf)||void 0===t?void 0:t.levels.map((function(e){if(null!=e&&e.notifyParent){var t=e.message.split("|")[1]||"",n=e.message.split("|")[0]||"";return y(y({},e),{},{message:n,parentMessage:t})}return e})),w(e.lowStockConf)})).catch((function(e){return h(e)})).finally((function(){return d(!1)}))}),[]);var I=r.useCallback((function(e){d(!0);var t=e.levels,n=[];e.levels=null==e?void 0:e.levels.map((function(e){if(null!=e&&e.notifyParent){var t=null==e?void 0:e.parentMessage;return n.push(null==e?void 0:e.parentMessage),null==e||delete e.parentMessage,y(y({},e),{},{message:(null==e?void 0:e.message)+"|"+t})}return n.push(null==e?void 0:e.parentMessage),null==e||delete e.parentMessage,e})),(0,m.wL)(e,"PUT").then((function(e){0===e.resultCode?(E(e),T.push("/home/thresholds/balance")):h(e)})).catch((function(e){return h(e)})).finally((function(){e.levels=t.map((function(e,t){return y(y({},e),{},{parentMessage:n[t]})})),d(!1)}))}),[]);return r.createElement(i.SeamlessContainer,{title:e("editThresholdsBalancePageTitle"),description:e("editThresholdsBalancePageDescription")},r.createElement("div",{style:{height:600,width:"100%"}},r.createElement(c.xA,{data:S,loading:p,onFormSubmit:function(e){return I(e)}}),p?r.createElement(f.Z,null):null))};var Z=n(39213),b=n.n(Z);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const I=function(){var e=(0,s.useTranslation)().t,t=(0,a.useParams)().id,n=r.useState(!1),l=(0,o.Z)(n,2),p=l[0],d=l[1],g=(0,u.Z)().showErrorMessage,h=r.useState(null),f=(0,o.Z)(h,2),E=f[0],y=f[1];return r.useEffect((function(){d(!0),(0,m.xp)(t).then((function(e){var t;e.lowStockConf.levels=null==e||null===(t=e.lowStockConf)||void 0===t?void 0:t.levels.map((function(e){if(null!=e&&e.notifyParent){var t=e.message.split("|")[1]||"",n=e.message.split("|")[0]||"";return w(w({},e),{},{message:n,parentMessage:t})}return e})),y(e.lowStockConf)})).catch((function(e){return g(e)})).finally((function(){return d(!1)}))}),[]),r.createElement(i.SeamlessContainer,{title:e("viewThresholdsBalancePageTitle"),description:e("viewThresholdsBalancePageDescription")},r.createElement(b(),{loading:p}),!p&&E?r.createElement(c.MM,{id:t,loading:p,data:E}):null)};var O=n(33553),C=n(60905),P=n(44104),x=n.n(P),D=n(67801);const R=function(){var e=(0,s.useTranslation)().t,t=x()().checkPermission,n=r.useState(!1),a=(0,o.Z)(n,2),l=a[0],u=(a[1],r.useState()),m=(0,o.Z)(u,2),p=m[0],d=m[1];return r.createElement(i.SeamlessContainer,{title:e("viewLowBalanceStockTitle"),description:e("viewLowBalanceStockDescription")},r.createElement(C.Z,{container:!0,spacing:3},r.createElement(C.Z,{item:!0,xs:12,sm:12},r.createElement(O.Z,{display:"flex",flexDirection:"row-reverse",alignItems:"center"},t(D.Z.createBalanceThresholds)&&r.createElement(c.xE,{url:"/home/thresholds/balance/create"})))),r.createElement(c.VK,{loading:l,onFormSubmit:function(e){d(e)}}),p&&r.createElement(c.Xi,{data:p}))},N=function(){var e=(0,a.useRouteMatch)().path,t=x()().AccessControlled;return r.createElement(a.Switch,null,r.createElement(a.Route,{path:e+"/create"},r.createElement(t,{feature:D.Z.createBalanceThresholds},r.createElement(h,null))),r.createElement(a.Route,{path:e+"/edit/:id"},r.createElement(t,{feature:D.Z.updateBalanceThresholds},r.createElement(T,null))),r.createElement(a.Route,{path:e+"/view/:id"},r.createElement(t,{feature:D.Z.getSingleBalanceThreshold},r.createElement(I,null))),r.createElement(a.Route,{path:e},r.createElement(t,{feature:D.Z.getAllBalanceThresholds},r.createElement(R,null))))}},51423:(e,t,n)=>{"use strict";n.d(t,{Z:()=>y});var r=n(2411),a=n(48049),l=n(74315),o=n(70773),i=n(63135),s=n(10615),c=n(23664),u=n(84857),m={resourceId:" ",resourceOwnerId:" ",resourceOwnerType:" ",resourceType:" ",threshold:""};const p=function(){var e=(0,i.useTranslation)().t,t=r.useState(!1),n=(0,l.Z)(t,2),p=(n[0],n[1]),d=(0,c.Z)(),g=d.showErrorMessage,h=d.showSuccessMessage,f=(d.showWarningMessage,(0,a.useHistory)()),E=r.useCallback((function(e){" "===e.resourceId&&(e.resourceId="")," "===e.resourceOwnerId&&(e.resourceOwnerId="");var t={};Object.keys(e).forEach((function(n){e["".concat(n)]&&(t["".concat(n)]=e["".concat(n)])})),p(!0),(0,u.T_)(t).then((function(e){0===e.resultCode?(h(e.resultDescription),f.push("/home/thresholds/inventory")):g(e.resultDescription)})).catch((function(e){return g(e)})).finally((function(){return p(!1)}))}),[]);return r.createElement(o.SeamlessContainer,{title:e("createThresholdPageTitle"),description:e("createThresholdPageDescription")},r.createElement(s.yR,{data:m,edit:!1,onFormSubmit:function(e){return E(e)}}))};var d=n(67358),g={resourceId:" ",resourceOwnerId:" ",resourceOwnerType:" ",resourceType:" ",threshold:""};const h=function(){var e=(0,i.useTranslation)().t,t=(0,a.useParams)().id,n=r.useState(!1),m=(0,l.Z)(n,2),p=m[0],h=m[1],f=(0,c.Z)(),E=f.showErrorMessage,y=f.showSuccessMessage,v=(0,a.useHistory)(),T=r.useState(g),Z=(0,l.Z)(T,2),b=Z[0],S=Z[1];r.useEffect((function(){h(!0),(0,u.Yg)(t).then((function(e){var n,r;return S({id:t,resourceId:null!==(n=e.thresholdInfo.resourceId)&&void 0!==n?n:" ",resourceOwnerId:null!==(r=e.thresholdInfo.resourceOwnerId)&&void 0!==r?r:" ",resourceOwnerType:e.thresholdInfo.resourceOwnerType,resourceType:e.thresholdInfo.resourceType,threshold:e.thresholdInfo.threshold})})).catch((function(e){return E(e)})).finally((function(){return h(!1)}))}),[]);var w=r.useCallback((function(n){var r={id:t,resourceId:n.resourceId,resourceOwnerId:n.resourceOwnerId,resourceOwnerType:n.resourceOwnerType,resourceType:n.resourceType,threshold:n.threshold};h(!0)," "===r.resourceId&&(r.resourceId="")," "===r.resourceOwnerId&&(r.resourceOwnerId="");var a={};Object.keys(r).forEach((function(e){r["".concat(e)]&&(a["".concat(e)]=r["".concat(e)])})),(0,u.g8)(a).then((function(t){0===t.resultCode?(y(t.resultDescription||e("thresholdUpdatedSuccessfully")),v.push("/home/thresholds/inventory")):E(t.resultDescription)})).catch((function(e){return E(e)})).finally((function(){return h(!1)}))}),[]);return r.createElement(o.SeamlessContainer,{title:e("editThresholdsPageTitle"),description:e("editThresholdsPageDescription")},r.createElement("div",{style:{height:600,width:"100%"}},b?r.createElement(s.yR,{data:b,onFormSubmit:function(e){return w(e)},edit:!0}):r.createElement("h2",null,e("noDataFound",{itemName:t})),p?r.createElement(d.Z,null):null))};var f=n(33553);const E=function(){var e=(0,i.useTranslation)().t;return r.createElement(o.SeamlessContainer,{title:e("viewThresholdPageTitle"),description:e("viewThresholdPageDescription")},r.createElement(f.Z,{display:"flex",flexDirection:"row",justifyContent:"flex-end"},r.createElement(s.xE,null)),r.createElement(s.Kr,null))},y=function(){var e=(0,a.useRouteMatch)().path;return r.createElement(a.Switch,null,r.createElement(a.Route,{path:e+"/create"},r.createElement(p,null)),r.createElement(a.Route,{path:e+"/edit/:id"},r.createElement(h,null)),r.createElement(a.Route,{path:e},r.createElement(E,null)))}},67801:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={getAllBalanceThresholds:"GET_LOW_BALANCE_THRESHOLDS",getSingleBalanceThreshold:"GET_DETAIL_LOW_BALANCE_THRESHOLDS",createBalanceThresholds:"CREATE_LOW_BALANCE_THRESHOLDS",updateBalanceThresholds:"UPDATE_LOW_BALANCE_THRESHOLDS",deleteBalanceThresholds:"DELETE_LOW_BALANCE_THRESHOLDS"}},23664:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(13248),a=n(63135);const l=function(){var e=(0,r.useSnackbar)().enqueueSnackbar,t=(0,a.useTranslation)().t;function n(e){var n=t("anErrorOccurred");return["resultMessage","message","resultDescription"].forEach((function(t){e.hasOwnProperty(t)&&(n=e[t])})),n}return{showSuccessMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"success"})},showErrorMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"error"})},showInfoMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"info"})},showWarningMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"warning"})}}}}}]);