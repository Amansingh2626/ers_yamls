(self.webpackChunk_unified_transaction=self.webpackChunk_unified_transaction||[]).push([[2961,9944,8950],{96545:(e,t,n)=>{"use strict";n.d(t,{HS:()=>r.HS,Jz:()=>r.Jz,hr:()=>r.hr,t5:()=>r.t5,JN:()=>r.JN,Kd:()=>r.Kd,gc:()=>r.gc,Fg:()=>r.Fg,Nk:()=>r.Nk,zm:()=>r.zm,JH:()=>r.JH,dE:()=>r.dE,lg:()=>r.lg,oH:()=>r.oH,ih:()=>r.ih,Z6:()=>r.Z6,N_:()=>r.N_,WD:()=>r.WD,Tk:()=>r.Tk,MP:()=>r.MP,gD:()=>r.gD,uB:()=>r.uB,Su:()=>r.Su,tL:()=>r.tL,gs:()=>r.gs,O5:()=>r.O5,EZ:()=>r.EZ});var r=n(99652)},99652:(e,t,n)=>{"use strict";n.d(t,{HS:()=>L,Jz:()=>v,hr:()=>h,t5:()=>C,JN:()=>c,Kd:()=>S,gc:()=>y,Fg:()=>I,Nk:()=>A,zm:()=>g,JH:()=>_,dE:()=>O,lg:()=>b,oH:()=>m,ih:()=>w,Z6:()=>d,N_:()=>E,WD:()=>T,Tk:()=>u,MP:()=>l,gD:()=>o,uB:()=>s,Su:()=>i,tL:()=>N,gs:()=>f,O5:()=>p,EZ:()=>R});var r=n(61416);const a=n.n(r)();var l=function(e){return a("/txe/v1/requestTransfer",{method:"POST",body:e})},o=function(e,t){var n={method:"POST",body:e};return n.headers=new Headers,n.headers.append("Content-Type","application/json"),n.headers.append("ref-prefix",t),n.headers.append("validateOnly","false"),a("/txe/v1/requestTransfer",n)},i=function(e,t){var n={method:"POST",body:e};return n.headers=new Headers,n.headers.append("Content-Type","application/json"),n.headers.append("ref-prefix",t),n.headers.append("validateOnly","false"),a("/txe/v1/requestTopup",n)},s=function(e){return a("/txe/v1/requestTopup",{method:"POST",body:e})},u=function(e){return a("/txe/v1/requestTransactionReversal",{method:"POST",body:e})},c=function(e){return a("/bi-engine/fetch",{method:"POST",body:e})},d=function(){return a("/pms/v1/product/supplier/1",{method:"GET"})},m=function(e){return a("/txe/v1/searchArchivedTransaction/".concat(e),{method:"POST"})},p=function(e,t){var n={method:"POST",body:e};return n.headers=new Headers,n.headers.append("Content-Type","application/json"),n.headers.append("ref-prefix",t),n.headers.append("validateOnly","false"),a("/txe/v1/requestTransactionReversal",n)},f=function(e){return a("/txe/v1/requestTransactionReversal",{method:"POST",body:e})},v=function(e){return a("/txe/v1/approveTransaction",{method:"POST",body:e})},E=function(e){return a("/txe/v1/cancelTransaction",{method:"POST",body:e})},h=function(e,t){var n={method:"POST",body:e};return n.headers=new Headers,n.headers.append("Content-Type","application/json"),n.headers.append("ref-prefix",t),n.headers.append("validateOnly","false"),a("/txe/v1/approveTransaction",n)},T=function(e,t){var n={method:"POST",body:e};return n.headers=new Headers,n.headers.append("Content-Type","application/json"),n.headers.append("ref-prefix",t),n.headers.append("validateOnly","false"),a("/txe/v1/cancelTransaction",n)},g=function(){return a("/pms/v1/productCategory")},R=function(e,t){return a("/dms/auth/getResellerInfo",{method:"POST",body:{dealerID:{id:t,type:"RESELLERMSISDN"===e?"RESELLERMSISDN":"resellerId"},fetchAccountBalanceInformation:!1}})},S=function(e){return a("/acms/v2/calculate-pricing",{method:"POST",body:e})},y=function(e){return a("/acms/v2/contracts/".concat(e))},C=function(e){return a("/txe/subscribers/v1/updateSubscriberServiceStatus",{method:"POST",body:e})},N=function(e){return a("/txe/subscribers/v1/resetSubscriberPassword",{method:"POST",body:e})},b=function(){return a("/dms/v1/resellers/types/all")},A=function(){return a("/groupmanagementsystem/v1/group?status=active")},I=function(e){return a("/groupmanagementsystem/v1/group/name/".concat(e))},O=function(e){return a("/txe/subscribers/v1/getProductsByMSISDN",{method:"POST",body:e})},w=function(e){return a("/acms/v2/fetch-product-range/".concat(e))},_=function(e){return a("/pms/v1/product/variant/search",{method:"POST",body:e})},L=function(e){return a("/txe/v1/requestTopup",{method:"POST",body:e})}},19157:(e,t,n)=>{"use strict";n.d(t,{Z:()=>R});var r=n(90929),a=n(2411),l=n(77277),o=n(38592),i=n(80030),s=n(29609),u=n(60552),c=n(41744),d=n.n(c),m=n(53770),p=n(30922),f=n(48049),v=n(81463),E=n(66054),h=n(44104),T=n.n(h),g=n(27490);const R=function(e){var t,n,c,h,R=e.loading,S=e.isHierarchy,y=e.totalCount,C=e.transactionList,N=(e.timeOrder,e.setTimeOrder),b=e.page,A=e.perPage,I=e.onPageChange,O=e.onPageSizeChange,w=e.pending,_=void 0!==w&&w,L=e.onApproveOrReject,Z=e.customerCare,P=void 0!==Z&&Z,D=(0,s.useTranslation)().t,x=T()().checkPermission,M=null!==(t=null===(n=window)||void 0===n||null===(c=n.config)||void 0===c||null===(h=c.transaction)||void 0===h?void 0:h.hideTransactionInfoFromList)&&void 0!==t?t:[],k=[{field:"actions",headerName:D("actions"),sortable:!1,filterable:!1,renderCell:function(e){var t,n,r;return a.createElement("div",null,a.createElement(o.Z,{size:"small",color:"primary",variant:"text"},_?null:a.createElement(i.ZP,{title:"View"},a.createElement(l.Z,{component:f.Link,to:S?"/home/transaction/hierarchy/".concat(null==e||null===(t=e.row)||void 0===t?void 0:t.ersReference):P?"/home/customercare/transaction/search/".concat(null==e||null===(n=e.row)||void 0===n?void 0:n.ersReference):"/home/transaction/search/".concat(null==e||null===(r=e.row)||void 0===r?void 0:r.ersReference)},a.createElement(u.Z,{fontSize:"small"}))),x(g.R.APPROVE_TRANSACTION)&&_?a.createElement(i.ZP,{title:"Approve"},a.createElement(l.Z,{onClick:function(){var t;return L("approve",null==e||null===(t=e.row)||void 0===t?void 0:t.ersReference)}},a.createElement(m.Z,{fontSize:"small",style:{color:v.Z[400]}}))):null,x(g.R.REJECT_TRANSACTION)&&_?a.createElement(i.ZP,{title:"Reject"},a.createElement(l.Z,{onClick:function(){var t;return L("reject",null==e||null===(t=e.row)||void 0===t?void 0:t.ersReference)}},a.createElement(p.Z,{fontSize:"small",style:{color:E.Z[400]}}))):null))},flex:1},{field:"ersReference",headerName:D("transactionReference"),width:200,filterable:!1,sortable:!1},{field:"OriginalErsReference",headerName:D("OriginalErsReference"),width:200,filterable:!1,sortable:!1,valueFormatter:function(e){var t,n,r,a,l;return void 0===(null==e||null===(t=e.row)||void 0===t?void 0:t.originalErsReference)?"null"===(null==e||null===(r=e.row)||void 0===r?void 0:r.OriginalErsReference)||""===(null==e||null===(a=e.row)||void 0===a?void 0:a.OriginalErsReference)?"-":null==e||null===(l=e.row)||void 0===l?void 0:l.OriginalErsReference:(null==e||null===(n=e.row)||void 0===n?void 0:n.originalErsReference)||"-"}},{field:"batchId",headerName:D("batchId"),width:200,filterable:!1,sortable:!1,valueFormatter:function(e){return"NA"===e.row.batchId?"-":e.row.batchId}},{field:"SENDER_FIELD_externalCode",headerName:D("SENDER_FIELD_externalCode"),width:200,filterable:!1,sortable:!1,hide:M.includes("SENDER_FIELD_externalCode"),valueFormatter:function(e){return void 0===e.row.SENDER_FIELD_externalCode||"null"===e.row.SENDER_FIELD_externalCode?"-":e.row.SENDER_FIELD_externalCode}},{field:"RECEIVER_FIELD_externalCode",headerName:D("RECEIVER_FIELD_externalCode"),width:200,filterable:!1,sortable:!1,hide:M.includes("RECEIVER_FIELD_externalCode"),valueFormatter:function(e){return void 0===e.row.RECEIVER_FIELD_externalCode||null===e.row.RECEIVER_FIELD_externalCode?"-":e.row.RECEIVER_FIELD_externalCode}},{field:"SENDER_FIELD_regionPath",headerName:D("SENDER_FIELD_regionPath"),width:200,filterable:!1,sortable:!1,hide:M.includes("SENDER_FIELD_regionPath"),valueFormatter:function(e){return void 0===e.row.SENDER_FIELD_regionPath||"null"===e.row.SENDER_FIELD_regionPath?"-":e.row.SENDER_FIELD_regionPath}},{field:"senderResellerTypeName",headerName:D("senderResellerType"),width:200,filterable:!1,sortable:!1,valueFormatter:function(e){return void 0===(0,r.Z)(e.row.senderResellerTypeName)||"null"===e.row.senderResellerTypeName||""===e.row.senderResellerTypeName||void 0===(0,r.Z)(e.row.senderResellerType)||"null"===e.row.senderResellerType||""===e.row.senderResellerType?"-":e.row.senderResellerType?e.row.senderResellerType:e.row.senderResellerTypeName}},{field:"receiverResellerTypeName",headerName:D("receiverResellerType"),width:200,filterable:!1,sortable:!1,valueFormatter:function(e){return void 0===(0,r.Z)(e.row.receiverResellerTypeName)||"null"===e.row.receiverResellerTypeName||""===e.row.receiverResellerTypeName||void 0===(0,r.Z)(e.row.receiverResellerType)||"null"===e.row.receiverResellerType||""===e.row.receiverResellerType?"-":e.row.receiverResellerType?e.row.receiverResellerType:e.row.receiverResellerTypeName}},{field:"timestamp",headerName:D("timestamp"),width:200,filterable:!1,sortable:!_,valueFormatter:function(e){var t=e.row.timestamp;return t.split("T")[0]+" "+t.split("T")[1].slice(0,8)}},{field:"senderResellerId",headerName:D("senderResellerId"),width:200,filterable:!1,sortable:!1},{field:"senderMSISDN",headerName:D("senderMsisdn"),width:200,filterable:!1,sortable:!1},{field:"receiverResellerId",headerName:D("receiverResellerId"),width:200,filterable:!1,sortable:!1},{field:"receiverMSISDN",headerName:D("receiverMsisdn"),width:200,filterable:!1,sortable:!1},{field:"transactionProfile",headerName:D("transactionType"),width:200,filterable:!1,sortable:!1},{field:"productSKU",headerName:D("product"),width:200,filterable:!1,sortable:!1},{field:"transactionAmount",headerName:D("amount"),width:200,filterable:!1,sortable:!1},{field:"resultMessage",headerName:D("status"),width:200,filterable:!1,sortable:!1}],F=a.useCallback((function(e){var t=e.sortModel[0].sort;N(t)}),[]);return a.createElement(d(),{onPageSizeChange:function(e){O(e.pageSize)},onPageChange:function(e){I(e.page)},pagination:!0,paginationMode:"server",page:b,pageSize:A,rowCount:y,rows:C,loading:R,columns:k,getRowId:function(e){return null==e?void 0:e.id},columnBuffer:3,sortingMode:"server",onSortModelChange:F,disableColumnFilter:!0})}},76787:(e,t,n)=>{"use strict";n.d(t,{Z:()=>U});var r=n(56470),a=n(7560),l=n(11746),o=n(74315),i=n(77162),s=n.n(i),u=n(2411),c=n(8526),d=n(79692),m=n(12420),p=n(77114),f=n(37603),v=n(4614),E=n(60905),h=n(86619),T=n(6277),g=n(27616),R=n(70660),S=n(8284),y=n(90436),C=n(38016),N=n(29609),b=n(48049),A=n(61564),I=n(39590),O=n(19258),w=n(96545),_=n(23664),L=n(77954),Z=n(38670),P=n(21324),D=n(7089),x=n(24276),M=n(95549);const k=function(e){var t=e.options,n=e.selectedOptions,r=e.title,o=e.setSelectedOptions,i=e.view,s=void 0!==i&&i,c=e.required,d=void 0!==c&&c,m=e.className,p=(0,N.useTranslation)().t,f=t.length===n.length,v=function(){o([])},E=function(e){e?o(t):v()},T=(0,M.D)(),g=function(e){o(e)};return u.createElement(u.Fragment,null,u.createElement(L.ZP,{className:m,multiple:!0,size:"small",options:t,value:n,disableCloseOnSelect:!0,getOptionLabel:function(e){return"".concat(e.key)},getOptionSelected:function(e,t){return e.value===t.value},filterOptions:function(e,t){var n=T(e,t);return e.length>1?[{key:"Select all",value:"select-all"}].concat((0,l.Z)(n)):n},onChange:t.length>1?function(e,n,r){"select-option"===r||"remove-option"===r?n.find((function(e){return"select-all"===e.value}))?(E&&E(!f),null==t||t.filter((function(e){return"select-all"!==e.value}))):g&&g(n):"clear"===r&&v&&v()}:function(){return null},renderOption:function(e,t){var n=t.selected,r="select-all"===e.value?{checked:f}:{};return u.createElement(u.Fragment,null,u.createElement(P.Z,(0,a.Z)({color:"primary",icon:u.createElement(x.Z,{color:"primary"},"check_box_outline_blank"),checkedIcon:u.createElement(x.Z,{color:"secondary"},"check_box"),style:{marginRight:8},checked:n,readOnly:s},r)),"".concat(e.key))},renderInput:function(e){return u.createElement(h.Z,(0,a.Z)({},e,{required:d,readOnly:s,disabled:s,label:p(r)}))},disableClearable:!0,renderTags:function(e,t){return e.map((function(e,n){return u.createElement(D.Z,(0,a.Z)({label:e.key},t({index:n})))}))},limitTags:2}))};window.config;var F=window.config.transaction,H=(null==F?void 0:F.transactionTypes)||[],W=(null==F?void 0:F.hideSearchFields)||[],V=window.config.transaction.customerCareTransactionTypes||[],z=window.config.transaction.status||[],B=(0,d.Z)((function(e){return(0,m.Z)({form:{display:"flex",flexDirection:"column",flexWrap:"wrap"},element:{margin:e.spacing(1)},input:{},button:{},label:{margin:e.spacing(1)},root:{width:"100%",marginBottom:e.spacing(2)},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},progress:{marginLeft:"8px"},rowSpacing:{marginBottom:e.spacing(.5)},fullWidth:{width:"100%"},multiSelect:{marginTop:e.spacing(2)},dateField:{marginTop:e.spacing(2),"& .MuiInput-underline:before":{borderBottomWidth:"2px"}},dropdownFilter:{}})}));const U=function(e){var t,n,i,d,m,P,D=e.data,x=e.loading,M=e.onFormSubmit,F=e.productOptions,U=void 0===F?[]:F,j=(e.setTransactionList,e.selectedRegionOptions),J=void 0===j?[]:j,q=e.setSelectedRegionOptions,K=void 0===q?function(){}:q,G=e.customerCare,Y=void 0!==G&&G,X=B(),Q=(0,N.useTranslation)().t,$=((0,b.useHistory)(),u.useState("panel1")),ee=(0,o.Z)($,2),te=ee[0],ne=ee[1],re=u.useState(D),ae=(0,o.Z)(re,2),le=ae[0],oe=ae[1],ie=u.useState([]),se=(0,o.Z)(ie,2),ue=se[0],ce=se[1],de=u.useState([]),me=(0,o.Z)(de,2),pe=me[0],fe=me[1],ve=u.useState(!1),Ee=(0,o.Z)(ve,2),he=Ee[0],Te=Ee[1],ge=u.useState([]),Re=(0,o.Z)(ge,2),Se=Re[0],ye=Re[1],Ce=(0,Z.useSelector)((function(e){return e.auth})).user,Ne=window.config.report.resellerTypesForDefaultDomain||[],be=c.Ry().shape({transactionReference:c.Z_(),senderResellerId:c.Z_(),receiverResellerId:c.Z_(),initiatorResellerId:c.Z_(),senderMsisdn:c.Z_(),receiverMsisdn:c.Z_(),transactionTypeOrProfile:c.Z_(),transactionStatus:c.Z_(),productType:c.Z_(),amount:c.Rx(),from:c.hT(),to:c.hT()}),Ae=(0,p.TA)({initialValues:le,validationSchema:be,onSubmit:function(e){return M&&M(e,20,0)},enableReinitialize:!0}),Ie=Ae.values,Oe=Ae.handleChange,we=Ae.handleSubmit,_e=Ae.handleReset,Le=Ae.setFieldValue,Ze=window.config.openCalendarWith||"year",Pe=(0,_.Z)(),De=Pe.showErrorMessage,xe=(Pe.showSuccessMessage,Pe.showInfoMessage,Pe.showWarningMessage,null===(t=window.config)||void 0===t?void 0:t.resellerAdditionalConfig),Me=(null==xe?void 0:xe.resellerSearchDomainBasedDropdowns)||!1;u.useEffect((function(){if((0,w.lg)().then((function(e){ce(e.types)})).catch((function(e){De(e)})),Me){var e,t,n,r,a=[],l=null==Ce||null===(e=Ce.info)||void 0===e||null===(t=e.additionalFields)||void 0===t?void 0:t.filter((function(e){return"domainName"===(null==e?void 0:e.name)})),o=null==Ce||null===(n=Ce.info)||void 0===n||null===(r=n.additionalFields)||void 0===r?void 0:r.filter((function(e){return"domainCode"===(null==e?void 0:e.name)}));Ne.includes(Ce.resellerType)&&l.length>0&&o.length>0?(a.push({key:l[0].value,value:o[0].value}),fe(a),Oe({target:{value:o[0].value,name:"domainName"}})):(0,w.Nk)().then((function(e){0!==e.resultCode&&De(e.resultMessage),(null==e?void 0:e.groups)&&(null==e||e.groups.map((function(e){null!=e&&e.description&&a.push({key:e.description,value:e.name})}))),a.unshift({key:"ALL",value:"ALL"}),fe(a)})).catch((function(e){De(e.message),fe([])}))}}),[]),u.useEffect((function(){Ie.domainName&&(0,w.Fg)(Ie.domainName).then((function(e){var t,n;0!==e.resultCode&&De(e.resultMessage);var r=[];(null==e||null===(t=e.group)||void 0===t?void 0:t.members)&&(null==e||null===(n=e.group)||void 0===n||n.members.map((function(e){r.push({key:e.name,value:e.userId})}))),r.length>1&&r.unshift({key:"ALL",value:r.map((function(e){return e.value})).toString()}),ye(r)})).catch((function(e){De(e.message),Te(!1)})).finally((function(){return Te(!0)}))}),[Ie.domainName]);var ke=(0,u.useRef)(null),Fe=(null===(d=(null==Ce||null===(n=Ce.info)||void 0===n||null===(i=n.additionalFields)||void 0===i?void 0:i.filter((function(e){return"accessibleRegionNames"===(null==e?void 0:e.name)})))[0])||void 0===d||null===(m=d.value)||void 0===m||null===(P=m.split(","))||void 0===P?void 0:P.map((function(e){return{key:e,value:e}})))||[];return u.useEffect((function(){1===Fe.length&&K(Fe)}),[]),u.createElement("div",{className:X.root},u.createElement(g.Z,{expanded:"panel1"===te,onChange:("panel1",function(e,t){ne(!!t&&"panel1")})},u.createElement(S.Z,{expandIcon:u.createElement(C.Z,null),"aria-controls":"panel1bh-content",id:"panel1bh-header"},u.createElement(y.Z,{className:X.heading},u.createElement("strong",null,Q("search")))),u.createElement(R.Z,null,u.createElement(E.Z,{className:X.fullWidth},u.createElement(E.Z,{container:!0,spacing:3,className:X.rowSpacing},u.createElement(E.Z,{item:!0,sm:4},u.createElement(f.SeamlessInput,{fullWidth:!0,className:(0,T.default)(X.element,X.input),name:"transactionReference",value:Ie.transactionReference,onChange:Oe,label:Q("transactionReference")})),!Y&&u.createElement(E.Z,{item:!0,sm:4},u.createElement(f.SeamlessInput,{fullWidth:!0,className:(0,T.default)(X.element,X.input),name:"senderResellerId",value:Ie.senderResellerId,onChange:Oe,label:Q("senderResellerId")})),!Y&&u.createElement(E.Z,{item:!0,sm:4},u.createElement(f.SeamlessInput,{fullWidth:!0,className:(0,T.default)(X.element,X.input),name:"receiverResellerId",value:Ie.receiverResellerId,onChange:Oe,label:Q("receiverResellerId")})),u.createElement(E.Z,{item:!0,sm:4},u.createElement(f.SeamlessInput,{fullWidth:!0,className:(0,T.default)(X.element,X.input),name:"senderMsisdn",value:Ie.senderMsisdn,onChange:Oe,label:Q("senderMsisdn")})),u.createElement(E.Z,{item:!0,sm:4},u.createElement(f.SeamlessInput,{fullWidth:!0,className:(0,T.default)(X.element,X.input),name:"receiverMsisdn",value:Ie.receiverMsisdn,onChange:Oe,label:Q("receiverMsisdn")})),!Y&&u.createElement(E.Z,{item:!0,sm:4},u.createElement(f.SeamlessDropDown,{fullWidth:!0,className:(0,T.default)(X.element,X.input),label:Q("senderResellerType"),options:[{value:"ALL",key:"ALL"}].concat((0,l.Z)(null==ue?void 0:ue.map((function(e){return{key:e.name,value:e.id}})))),name:"SenderResellerType",value:Ie.SenderResellerType,onChange:Oe})),!Y&&u.createElement(E.Z,{item:!0,sm:4},u.createElement(f.SeamlessDropDown,{fullWidth:!0,className:(0,T.default)(X.element,X.input),label:Q("receiverResellerType"),options:[{value:"ALL",key:"ALL"}].concat((0,l.Z)(null==ue?void 0:ue.map((function(e){return{key:e.name,value:e.id}})))),name:"ReceiverResellerType",value:Ie.ReceiverResellerType,onChange:Oe})),!Y&&!W.includes("senderExternalCode")&&u.createElement(E.Z,{item:!0,sm:4},u.createElement(f.SeamlessInput,{fullWidth:!0,className:(0,T.default)(X.element,X.input),name:"SenderExternalCode",value:Ie.SenderExternalCode,onChange:Oe,label:Q("SENDER_FIELD_externalCode")})),!Y&&!W.includes("receiverExternalCode")&&u.createElement(E.Z,{item:!0,sm:4},u.createElement(f.SeamlessInput,{fullWidth:!0,className:(0,T.default)(X.element,X.input),name:"ReceiverExternalCode",value:Ie.ReceiverExternalCode,onChange:Oe,label:Q("RECEIVER_FIELD_externalCode")})),!Y&&u.createElement(E.Z,{item:!0,sm:4},u.createElement(f.SeamlessInput,{fullWidth:!0,className:(0,T.default)(X.element,X.input),name:"amount",type:"number",value:Ie.amount,onChange:Oe,label:Q("amount")})),u.createElement(E.Z,{item:!0,sm:4},u.createElement(f.SeamlessDropDown,{fullWidth:!0,className:(0,T.default)(X.element,X.input),label:Q("transactionTypeOrProfile"),options:[{key:"All",value:"ALL"}].concat((0,l.Z)(Y?V:H)),name:"transactionTypeOrProfile",value:Ie.transactionTypeOrProfile,onChange:Oe})),!Y&&u.createElement(E.Z,{item:!0,sm:4},u.createElement(L.ZP,{className:(0,T.default)(X.element,X.input),id:"product-types",value:Ie.productType,options:[{key:"All",value:"ALL"}].concat((0,l.Z)(U)),getOptionLabel:function(e){return e.key||e},getOptionSelected:function(e,t){return e.value===Ie.productType},onChange:function(e,t){Oe({target:{value:t.value,name:"productType"}})},renderInput:function(e){return u.createElement(h.Z,(0,a.Z)({},e,{label:Q("productType"),placeholder:Q("productTypeHelper")}))}})),!Y&&u.createElement(E.Z,{item:!0,sm:4},u.createElement(f.SeamlessDropDown,{fullWidth:!0,className:(0,T.default)(X.element,X.input),label:Q("transactionStatus"),options:[{key:"All",value:"ALL"}].concat((0,l.Z)(z)),name:"transactionStatus",value:Ie.transactionStatus,onChange:Oe})),!Y&&!W.includes("batchId")&&u.createElement(E.Z,{item:!0,sm:4},u.createElement(f.SeamlessInput,{fullWidth:!0,className:(0,T.default)(X.element,X.input),name:"batchId",value:Ie.batchId,onChange:Oe,label:Q("batchId")})),!Y&&(null==Fe?void 0:Fe.length)>0&&u.createElement(E.Z,{item:!0,sm:4},u.createElement(k,{options:Fe||[],className:(0,T.default)(X.multiSelect),selectedOptions:J,title:Q("region"),setSelectedOptions:K})),Me&&!Y&&u.createElement(E.Z,{item:!0,sm:4},u.createElement(f.SeamlessDropDown,{id:"domain-name-dropdown",fullWidth:!0,className:(0,T.default)(X.element),label:Q("domainName"),helperText:Q("domainNameHelper"),options:pe,name:"domainName",value:Ie.domainName,onChange:function(e){Oe(e);var t=ke.current.getElementsByClassName("MuiAutocomplete-clearIndicator")[0];t&&t.click()}})),Me&&!Y&&u.createElement(E.Z,{item:!0,sm:4},he&&u.createElement(L.ZP,{multiple:!0,limitTags:2,id:"domain-associates-dropdown",className:(0,T.default)(X.element),options:Se,disableCloseOnSelect:!0,getOptionLabel:function(e){return e.key},getOptionSelected:function(e,t){return e.value===t.value},onChange:function(e,t){var n=[];t.map((function(e){n.push(e.value)})),Oe({target:{value:n.toString(),name:"domainType"}})},renderInput:function(e){return u.createElement(h.Z,(0,a.Z)({},e,{label:Q("domainType"),placeholder:Q("domainTypeHelper")}))},ref:ke}))),u.createElement(E.Z,{container:!0,spacing:3,className:X.rowSpacing},u.createElement(E.Z,{item:!0,sm:4},u.createElement(A.M,{utils:O.Z},u.createElement(I.e,{className:(0,T.default)(X.element,X.dateField),fullWidth:!0,disableFuture:!0,views:["year","month","date"],openTo:Ze,format:"yyyy-MM-dd",placeholder:"yyyy-mm-dd",autoOk:!0,id:"from",label:Q("from"),value:Ie.from||null,error:!1,onChange:function(e){return Oe({target:{value:e,name:"from"}})},KeyboardButtonProps:{"aria-label":"change date"}}))),u.createElement(E.Z,{item:!0,sm:4},u.createElement(A.M,{utils:O.Z},u.createElement(I.e,{className:(0,T.default)(X.element,X.dateField),fullWidth:!0,autoOk:!0,disableFuture:!0,views:["year","month","date"],openTo:Ze,format:"yyyy-MM-dd",placeholder:"yyyy-mm-dd",maxDate:new Date,id:"to",label:Q("to"),value:Ie.to||null,error:!1,onChange:function(e){return Oe({target:{value:e,name:"to"}})},KeyboardButtonProps:{"aria-label":"change date"}})))),u.createElement(E.Z,{container:!0,spacing:3,className:X.rowSpacing},u.createElement(E.Z,{item:!0,sm:12},u.createElement(f.SeamlessButton,{onClick:(0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:K([]),Te(!1),Le("domainName",""),Le("productType","ALL"),Le("domainType","ALL"),oe(D),_e(Ie),we();case 8:case"end":return e.stop()}}),e)}))),className:(0,T.default)(X.element,X.button),color:"primary",variant:"outlined"},Q("resetSearch")),u.createElement(f.SeamlessButton,{onClick:function(){oe(Ie),we()},className:(0,T.default)(X.element,X.button),disabled:x,color:"primary",variant:"contained"},Q("search"),x&&u.createElement(v.Z,{color:"inherit",size:14,thickness:6,className:X.progress}))))))))}},20310:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>h});var r=n(7560),a=n(51119),l=n(74315),o=n(2411),i=n(29609),s=n(76787),u=n(41744),c=n(96545),d=n(23664),m=n(31807),p=n(19157),f=n(38670);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const h=function(e){var t=e.isHierarchy,n=void 0!==t&&t,a=e.customerCare,v=void 0!==a&&a,h=((0,i.useTranslation)().t,o.useState(!1)),T=(0,l.Z)(h,2),g=T[0],R=T[1],S=o.useState(0),y=(0,l.Z)(S,2),C=y[0],N=y[1],b=o.useState([]),A=(0,l.Z)(b,2),I=A[0],O=A[1],w=(0,d.Z)(),_=w.showErrorMessage,L=w.showWarningMessage,Z=o.useState("desc"),P=(0,l.Z)(Z,2),D=P[0],x=P[1],M=o.useState([]),k=(0,l.Z)(M,2),F=k[0],H=k[1],W=o.useState([]),V=(0,l.Z)(W,2),z=V[0],B=V[1],U=(0,u.useServerTable)({page:0,perPage:20,order:"asc",orderBy:"timestamp",filter:{}}),j={transactionReference:"",senderResellerId:"",receiverResellerId:"",initiatorResellerId:"",senderMsisdn:"",receiverMsisdn:"",transactionTypeOrProfile:"ALL",transactionStatus:"ALL",productType:"ALL",amount:"",from:new Date(Date.now()-6048e5),to:new Date,batchId:"",SenderExternalCode:"",ReceiverExternalCode:"",SenderResellerType:"",ReceiverResellerType:"",domainName:"",domainType:"ALL"},J=o.useState(j),q=(0,l.Z)(J,2),K=q[0],G=q[1],Y=(0,f.useSelector)((function(e){return e.auth})).user,X=function(e,t,r){var a,l,o,i,s,u;G(e);var d=new Date(Date.now()-6048e5),p=new Date(e.to-6048e5),f=new Date(e.from),v=new Date(f.getTime()-6e4*f.getTimezoneOffset()).toISOString(),h=new Date,T=new Date(e.to),g=new Date(T.getTime()-6e4*T.getTimezoneOffset()).toISOString();d.setUTCHours(0,0,0,0),p.setUTCHours(0,0,0,0),h.setUTCHours(23,59,59,0);var S,y,C,b={request:{size:t,page:r,ErsReference:e.transactionReference||"ALL",SenderResellerId:e.senderResellerId||"ALL",ReceiverResellerId:e.receiverResellerId||"ALL",SenderMSISDN:e.senderMsisdn||"ALL",ReceiverMSISDN:e.receiverMsisdn||"ALL",TransactionProfile:e.transactionTypeOrProfile||"ALL",ResultStatus:e.transactionStatus||"ALL",ProductSKU:e.productType||"ALL",fromDate:""===e.from?e.to?(0,m.Z)(p.toISOString()):(0,m.Z)(d.toISOString()):v.slice(0,10)+"T00:00:00.000Z",toDate:""===e.to?(0,m.Z)(h.toISOString()):g.slice(0,10)+"T23:59:59.000Z",batchId:e.batchId||"ALL",SenderExternalCode:e.SenderExternalCode||"ALL",ReceiverExternalCode:e.ReceiverExternalCode||"ALL",ReceiverResellerType:e.ReceiverResellerType||"ALL",SenderResellerType:e.SenderResellerType||"ALL",sort:D,fromAmount:e.amount?"".concat(e.amount):"0",toAmount:e.amount?"".concat(e.amount):"".concat(Number.MAX_SAFE_INTEGER),reportName:n?"Hierarchy Transaction Search":"All Transactions Report",resellerPath:Y.resellerPath,userId:Y.userId,domainName:e.domainName||"ALL",domainType:e.domainType||"ALL"}},A=null==Y||null===(a=Y.info)||void 0===a||null===(l=a.additionalFields)||void 0===l?void 0:l.filter((function(e){return"accessibleRegionNames"===(null==e?void 0:e.name)})),I=(null===(o=A[0])||void 0===o?void 0:o.value)&&(null===(i=A[0])||void 0===i||null===(s=i.value)||void 0===s||null===(u=s.split(","))||void 0===u?void 0:u.map((function(e){return{key:e,value:e}})))||[];(null==I?void 0:I.length)>0?Object.assign(b.request,{zone:(null==z?void 0:z.map((function(e){return e.value})).join(","))||(null==Y||null===(S=Y.info)||void 0===S||null===(y=S.additionalFields)||void 0===y||null===(C=y.filter((function(e){return"accessibleRegionNames"===(null==e?void 0:e.name)}))[0])||void 0===C?void 0:C.value)}):Object.assign(b.request,{zone:"ALL"}),R(!0),(0,c.JN)(b).then((function(e){if(0==(null==e?void 0:e.resultCode))if(null!=e&&e.list){N(null==e?void 0:e.totalRecordCount);var t=null==e?void 0:e.list.map((function(e,t){return E(E({},e),{},{id:t})}));O(t)}else O([]),N(0);else O([]),N(0),L(null==e?void 0:e.resultDescription)})).catch((function(e){O([]),N(0),_(null==e?void 0:e.resultDescription)})).finally((function(){U.perPage!==t&&U.onPageSizeChange(t),U.page!==r&&U.onPageChange(r)})),R(!1)};return o.useEffect((function(){X(K,U.perPage,U.page)}),[U.page,U.perPage,D]),o.useEffect((function(){(0,c.Z6)().then((function(e){var t=[];e.products.forEach((function(e){var n;return null==e||null===(n=e.variants)||void 0===n?void 0:n.forEach((function(e){var n={key:null==e?void 0:e.productSKU,value:null==e?void 0:e.productSKU};t.push(n)}))})),H(t)}))}),[]),o.createElement(o.Fragment,null,o.createElement(s.Z,{setTransactionList:O,data:j,loading:!1,onFormSubmit:X,productOptions:F,selectedRegionOptions:z,setSelectedRegionOptions:B,customerCare:v}),o.createElement("div",{style:{height:700,width:"100%"}},o.createElement(p.Z,(0,r.Z)({isHierarchy:n,loading:g,totalCount:C,transactionList:I,timeOrder:D,setTimeOrder:x,customerCare:v},U))))}},27490:(e,t,n)=>{"use strict";n.d(t,{R:()=>r});var r={TOPUP:"TOPUP",BUNDLE:"CREATE_BUNDLE",AIRTIMESTOCK:"AIRTIMESTOCK",AIRTIME_POSTPAID:"AIRTIME_POSTPAID",SEARCH:"SEARCH",VIEW_TRANSACTION:"SEARCH_ARCHIVED_TRANSACTION",REVERSE_TRANSACTION:"TRANSATION_REVERSAL",O2C:"O2C",CREATE_O2C:"CREATE_O2C",O2C_WITHDRAWAL:"O2C_WITHDRAWAL",O2C_APPROVAL_LIST:"O2C_APPROVAL_LIST",C2C:"C2C",P2P:"P2P",P2P_PIN_RESET:"P2P_PIN_RESET",CREATE_C2C:"CREATE_C2C",C2C_WITHDRAWAL:"C2C_WITHDRAWAL",C2C_APPROVAL_LIST:"C2C_APPROVAL_LIST",APPROVE_C2C_TRANSACTION:"APPROVE_C2C_TRANSACTION",REJECT_C2C_TRANSACTION:"REJECT_C2C_TRANSACTION",PENDING_TRANSACTIONS:"PENDING_TRANSACTIONS",APPROVE_TRANSACTION:"APPROVE_TRANSACTION",REJECT_TRANSACTION:"CANCEL_TRANSACTION",RETURN:"RETURN",CREATE_RETURN:"CREATE_RETURN",HIERARCHY_SEARCH:"SEARCH_HIERARCHY",APPROVE_O2C_TRANSACTION:"APPROVE_O2C_TRANSACTION",REJECT_O2C_TRANSACTION:"REJECT_O2C_TRANSACTION",ACTIVATE_BUNDLE:"ACTIVATE_BUNDLE",MANUAL_ADJUSTMENT:"MANUAL_ADJUSTMENT",STANDARD_BUNDLE_LIST:"STANDARD_BUNDLE_LIST"}},23664:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(13248),a=n(29609);const l=function(){var e=(0,r.useSnackbar)().enqueueSnackbar,t=(0,a.useTranslation)().t;function n(e){var n=t("anErrorOccurred");return["resultMessage","message","resultDescription"].forEach((function(t){e.hasOwnProperty(t)&&(n=e[t])})),n}return{showSuccessMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"success"})},showErrorMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"error"})},showInfoMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"info"})},showWarningMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"warning"})}}}}}]);