(self.webpackChunk_unified_transaction=self.webpackChunk_unified_transaction||[]).push([[5395],{78429:(e,t,n)=>{"use strict";n.d(t,{Z:()=>A});var a=n(7560),l=n(11746),r=n(55238),i=n(74315),o=n(2411),u=n.n(o),c=n(6277),s=n(29609),m=n(79692),d=n(12420),p=n(60905),E=n(33553),g=n(61837),f=n(24276),b=n(90436),S=n(82938),C=n(80030),v=n(37603),h=n(94106),T=(0,m.Z)((function(e){return(0,d.Z)({switchContainer:{marginTop:"25px",float:"right"},ammountDesc:{marginLeft:"5px",marginTop:"25px"},button:{margin:e.spacing(1)},element:{margin:e.spacing(1)},spacingBottom:{marginBottom:e.spacing(2)},btnSpacing:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},input:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},selectBox:{paddingLeft:"10px"},fieldArrayWrapper:{border:"1px solid #EDEDED",marginLeft:"0",marginTop:"10px",width:"100%",borderRadius:"10px",padding:"10px",background:"#F7F7F7"},textRight:{textAlign:"right"}})}));const A=function(e){var t,n,o,m,d,A,R,N,I,y=e.data,_=e.index,B=e.control,Z=e.errors,k=e.register,P=e.removeIndex,O=e.isBulk,D=e.getValues,M=e.setValue,w=e.watch,x=T(),L=(0,s.useTranslation)().t,U=u().useState(["+","-"]),W=(0,i.Z)(U,1)[0],V=[{key:L("cash"),value:"cash"}];return u().createElement(p.Z,{container:!0,key:y.id,spacing:2,className:(0,c.default)(x.spacingBottom,x.fieldArrayWrapper)},u().createElement(p.Z,{item:!0,xs:12},u().createElement("div",null,u().createElement(b.Z,{variant:"caption",style:{marginBottom:"0"}},L("resellerId")),u().createElement(S.Z,{color:"primary",checked:!!D("airtimeSellBulk[".concat(_,"].isMobile")),name:"airtimeSellBulk[".concat(_,"].isMobile"),onChange:function(e){M("airtimeSellBulk[".concat(_,"].resellerId"),""),M("airtimeSellBulk[".concat(_,"].recipientMobileNo"),""),M("airtimeSellBulk[".concat(_,"].isMobile"),null==e?void 0:e.target.checked)},inputRef:k()}),u().createElement(b.Z,{variant:"caption"},L("msisdn")))),u().createElement(p.Z,{item:!0,xs:4},w("airtimeSellBulk[".concat(_,"].isMobile"))?null:u().createElement(v.SeamlessInput,{required:!0,className:(0,c.default)(x.element),fullWidth:!0,label:L("resellerId"),error:!(null==Z||!Z.airtimeSellBulk||null==Z||null===(t=Z.airtimeSellBulk[_])||void 0===t||!t.resellerId),name:"airtimeSellBulk[".concat(_,"].resellerId"),helperText:null!=Z&&Z.airtimeSellBulk?null==Z||null===(n=Z.airtimeSellBulk[_])||void 0===n||null===(o=n.resellerId)||void 0===o?void 0:o.message:"",inputRef:k({required:!0})}),w("airtimeSellBulk[".concat(_,"].isMobile"))?u().createElement(v.SeamlessInput,{required:!0,className:(0,c.default)(x.element),fullWidth:!0,error:!(null==Z||!Z.airtimeSellBulk||null==Z||null===(m=Z.airtimeSellBulk[_])||void 0===m||!m.recipientMobileNo),helperText:null!=Z&&Z.airtimeSellBulk?null==Z||null===(d=Z.airtimeSellBulk[_])||void 0===d||null===(A=d.recipientMobileNo)||void 0===A?void 0:A.message:"",label:L("resellerMSISDN"),name:"airtimeSellBulk[".concat(_,"].recipientMobileNo"),inputRef:k({required:!0})}):null),u().createElement(p.Z,{item:!0,xs:4},u().createElement(v.SeamlessInput,{required:!0,className:(0,c.default)(x.element),fullWidth:!0,type:"number",error:!(null==Z||!Z.airtimeSellBulk||null==Z||null===(R=Z.airtimeSellBulk[_])||void 0===R||!R.amount),label:L("amount"),helperText:null!=Z&&Z.airtimeSellBulk?null==Z||null===(N=Z.airtimeSellBulk[_])||void 0===N||null===(I=N.amount)||void 0===I?void 0:I.message:"",name:"airtimeSellBulk[".concat(_,"].amount"),inputRef:k({required:!0}),onKeyDown:function(e){return W.includes(e.key)&&e.preventDefault()}})),u().createElement(p.Z,{item:!0,xs:4},u().createElement(E.Z,{className:(0,c.default)(x.selectBox)},u().createElement(h.Qr,{control:B,defaultValue:V[0].value?V[0].value:"",name:"airtimeSellBulk[".concat(_,"].paymentMethod"),render:function(e){var t=e.onChange,n=e.ref,i=(0,r.Z)(e,["onChange","ref"]);return u().createElement(v.SeamlessDropDown,(0,a.Z)({fullWidth:!0,className:(0,c.default)(x.input),label:L("paymentMethodTitle"),options:(0,l.Z)(V.map((function(e){return{value:e.value,key:e.key}}))),onChange:function(e){var n=e.target.value;t("Choose"===n?null:n)},inputRef:n},i))}}))),u().createElement(p.Z,{item:!0,xs:4},u().createElement(v.SeamlessInput,{className:(0,c.default)(x.element),fullWidth:!0,label:L("comments"),name:"airtimeSellBulk[".concat(_,"].comment"),inputRef:k({required:!1})})),O&&_>0&&u().createElement(p.Z,{item:!0,xs:4,className:(0,c.default)(x.textRight)},u().createElement(C.ZP,{title:L("delete")},u().createElement(g.Z,{onClick:function(){P(_)},size:"small",color:"primary"},u().createElement(f.Z,null,"delete")))))}},59850:(e,t,n)=>{"use strict";n.d(t,{Z:()=>P});var a=n(51119),l=n(74315),r=n(2411),i=n.n(r),o=n(38670),u=n(96545),c=n(23664),s=n(41744),m=n.n(s),d=n(29609),p=n(77277),E=n(38592),g=n(8629),f=n(49429),b=n(38724),S=n(79249),C=n(60905),v=n(80030),h=n(90436),T=n(36288),A=n(37603),R=n(79692),N=n(12420),I=n(44104),y=n.n(I),_=n(27490);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=(0,R.Z)((function(e){var t,n;return(0,N.Z)({blurBackDrop:{backdropFilter:"blur(2px)",backgroundColor:"rgba(0, 0, 0, 0.2)"},dialogHeader:{fontSize:18,fontWeight:"bold",align:"left",backgroundColor:e.palette.primary.main,color:null==e||null===(t=e.palette)||void 0===t||null===(n=t.common)||void 0===n?void 0:n.white},inputGrid:{marginTop:"15px"},numberElement:{"& input::-webkit-outer-spin-button, input::-webkit-inner-spin-button":{"-webkit-appearance":"none",margin:0},"input[type=number]":{"-moz-appearance":"textfield"},margin:e.spacing(1)},element:{margin:e.spacing(1)},gridSpacing:{marginLeft:"10px"}})}));const P=function(){var e,t,n,r=i().useState(!1),s=(0,l.Z)(r,2),R=s[0],N=s[1],I=i().useState([]),B=(0,l.Z)(I,2),P=B[0],O=B[1],D=i().useState(!1),M=(0,l.Z)(D,2),w=M[0],x=M[1],L=i().useState(),U=(0,l.Z)(L,2),W=U[0],V=U[1],H=i().useState({}),j=(0,l.Z)(H,2),q=j[0],F=j[1],J=(0,o.useSelector)((function(e){return e.auth})).user,K=(0,c.Z)(),z=K.showErrorMessage,G=K.showSuccessMessage,Y=(0,d.useTranslation)().t,$=y()().checkPermission,Q=window.config,X=(null===(e=Q.transaction)||void 0===e?void 0:e.bundleProductTypes)||[],ee=(null===(t=Q.transaction)||void 0===t?void 0:t.bundlePaymentMethods)||["cash"],te=(null===(n=Q.transaction)||void 0===n?void 0:n.bundleAccountTypeId)||"DATA_BUNDLE",ne=k();i().useEffect((function(){N(!0),(0,u.ih)(J.userId).then((function(e){0===(null==e?void 0:e.resultCode)&&null!=e&&e.products?(0,u.JH)({variantIds:null==e?void 0:e.products}).then((function(e){var t=[];0===(null==e?void 0:e.resultCode)&&(null==e?void 0:e.productVariants.length)>0?(null==e||e.productVariants.map((function(e){var n;if(X.includes(null==e||null===(n=e.product)||void 0===n?void 0:n.productType)){var a,l=Z(Z({},null==e?void 0:e.variant),{},{productName:null==e||null===(a=e.product)||void 0===a?void 0:a.name});t.push(l)}})),O(t)):z(null==e?void 0:e.resultDescription)})).catch((function(e){z(e)})):z(null==e?void 0:e.resultDescription)})).catch((function(e){return z(e)})).finally((function(){F(Z(Z({},q),{},{paymentMethod:null==ee?void 0:ee[0]})),N(!1)}))}),[]);var ae=function(){x(!1)},le=function(e){F(Z(Z({},q),{},(0,a.Z)({},e.target.name,e.target.value)))},re=[{field:"productName",headerName:Y("productName"),width:200},{field:"productSKU",headerName:Y("productSKU"),width:200},{field:"status",headerName:Y("status"),width:200},{field:"unitPrice",headerName:Y("unitPrice"),width:200,valueGetter:function(e){var t,n;return null==e||null===(t=e.row)||void 0===t||null===(n=t.unitPrice)||void 0===n?void 0:n.price}},{field:"unitCurrency",headerName:Y("unitCurrency"),width:200,valueGetter:function(e){var t,n;return null==e||null===(t=e.row)||void 0===t||null===(n=t.unitPrice)||void 0===n?void 0:n.currency}},{field:"action",headerName:Y("action"),width:200,renderCell:function(e){return i().createElement("div",null,i().createElement(E.Z,{size:"small",color:"primary",variant:"text","aria-label":"action buttons"},$(_.R.ACTIVATE_BUNDLE)&&i().createElement(v.ZP,{title:"Activate"},i().createElement(p.Z,{onClick:function(){x(!0)}},i().createElement(T.Z,{fontSize:"small"})))))}}];return i().createElement(i().Fragment,null,i().createElement(g.Z,{open:w,fullWidth:!0,keepMounted:!0,maxWidth:"md",onClose:ae,"aria-labelledby":"standard-bundle-dialog",BackdropProps:{classes:{root:ne.blurBackDrop}}},i().createElement(S.Z,{className:ne.dialogHeader,color:"primary",disableTypography:!0},Y("standardBundlePopupTitle")),i().createElement(b.Z,null,i().createElement(h.Z,null,Y("standardBundleConfirmationMessage",{name:null==W?void 0:W.productName})),i().createElement(C.Z,{container:!0,className:ne.inputGrid},i().createElement(C.Z,{item:!0,xs:12,sm:3,className:ne.gridSpacing},i().createElement(A.SeamlessInput,{label:Y("subscriberMsisdn"),required:!0,fullWidth:!0,onKeyDown:function(e){return["e","E","+","-","ArrowUp","ArrowDown"].includes(e.key)&&e.preventDefault()},name:"subscriberMsisdn",onChange:le,id:"subscriberMsisdn",type:"number",className:ne.numberElement,value:q.subscriberMsisdn})),i().createElement(C.Z,{item:!0,xs:12,sm:4,className:ne.gridSpacing},i().createElement(A.SeamlessDropDown,{options:ee.map((function(e){return{key:Y(e),value:e}})),label:Y("selectPaymentMethod"),name:"paymentMethod",id:"paymentMethod",fullWidth:!0,className:ne.element,onChange:le,disabled:1===ee.length,value:q.paymentMethod})),i().createElement(C.Z,{item:!0,xs:12,sm:4,className:ne.gridSpacing},i().createElement(A.SeamlessInput,{label:Y("comments"),multiline:!0,rows:2,rowsMax:5,fullWidth:!0,name:"comments",onChange:le,id:"comments",className:ne.element,value:q.comments})))),i().createElement(f.Z,null,i().createElement(A.SeamlessButton,{variant:"contained",onClick:function(){if(q.subscriberMsisdn){var e,t,n={seller:{type:"RESELLERID",id:J.userId,accountTypeId:"RESELLER"},topUpPrincipalId:{type:"SUBSCRIBERMSISDN",id:q.subscriberMsisdn,accountTypeId:te},product:{productSKU:null==W?void 0:W.productSKU,amount:{value:null==W||null===(e=W.unitPrice)||void 0===e?void 0:e.price,currency:null==W||null===(t=W.unitPrice)||void 0===t?void 0:t.currency}},transactionProperties:{map:{preferredLanguage:"en",paymentMethod:q.paymentMethod,comments:q.comments,batchId:""}}};(0,u.HS)(n).then((function(e){0===e.resultCode?(G(null==e?void 0:e.resultMessage),F(Z(Z({},q),{},{subscriberMsisdn:"",comments:""})),x(!1)):z(null==e?void 0:e.resultMessage)})).catch((function(e){return z(e)}))}else z(Y("subscriberMsisdnValidationMsg"))},color:"primary"},Y("submit")),i().createElement(A.SeamlessButton,{variant:"outlined",onClick:ae},Y("close")))),i().createElement("div",{style:{height:600}},i().createElement(m(),{loading:R,columnBuffer:2,rows:P,columns:re,getRowId:function(e){return e.variantId},onRowSelected:function(e){var t=e.data;return V(t)}})))}},94818:(e,t,n)=>{"use strict";n.d(t,{bT:()=>R,dj:()=>N.default,m6:()=>r.Z,yT:()=>a.Z,j3:()=>i.Z,$T:()=>l.Z});var a=n(47246),l=n(56562),r=(n(78429),n(24950)),i=n(10174),o=n(74315),u=n(33553),c=n(77277),s=n(60905),m=n(90436),d=n(37603),p=n(2411),E=n(79692),g=n(12420),f=n(29609),b=n(6277),S=n(77114),C=n(8526),v=n(48049),h=n(23664),T=n(96545),A=(0,E.Z)((function(e){return(0,g.Z)({button:{marginTop:10,"& .MuiButton-label":{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit",textTransform:"none"}},element:{marginRight:e.spacing(1),marginBottom:e.spacing(1)},dateField:{margin:e.spacing(1),width:"100%"},elementField:{marginRight:e.spacing(1),marginBottom:e.spacing(1),width:550},dialogWrapper:{textAlign:"center","& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginBottom:e.spacing(3)},btnSpace:{marginRight:e.spacing(2)}})}));const R=function(e){var t=e.data,n=(e.onFormSubmit,A()),a=(0,f.useTranslation)().t,l=((0,v.useHistory)(),p.useState(!0)),r=(0,o.Z)(l,2),i=(r[0],r[1]),E=p.useState(!1),g=(0,o.Z)(E,2),R=g[0],N=g[1],I=p.useState(!1),y=(0,o.Z)(I,2),_=y[0],B=y[1],Z=(0,h.Z)(),k=Z.showErrorMessage,P=Z.showSuccessMessage,O=C.Ry().shape({subscriberId:C.Z_().typeError(a("mustBeNumber")).matches(/^[0-9]+$/,a("mustBeNumber")).required(a("valueIsRequired")),operationId:C.Z_().required(a("valueIsRequired"))}),D=function(){N(!0)},M=(0,S.TA)({initialValues:t,onSubmit:function(e){return D&&D()},validationSchema:O,validateOnChange:!1,enableReinitialize:!0}),w=M.values,x=M.errors,L=M.handleChange,U=(M.handleBlur,M.handleSubmit),W=M.handleReset,V=function(){N(!1)},H=p.useCallback((function(e,t){B(!0),(0,T.t5)(e).then((function(e){N(!1),P(e)})).catch((function(e){N(!1),k(e)})).finally((function(){B(!1),W(t)}))}),[]);return p.createElement(u.Z,null,p.createElement(s.Z,{container:!0,spacing:3},p.createElement(s.Z,{item:!0,xs:12,sm:6,md:3},p.createElement(d.SeamlessInput,{fullWidth:!0,error:!!x.subscriberId,helperText:x.subscriberId,className:(0,b.default)(n.element),name:"subscriberId",value:w.subscriberId,onChange:function(e){return L(e)},label:a("subscriberMsisdn"),required:!0})),p.createElement(s.Z,{item:!0,xs:12,sm:6,md:3},p.createElement(d.SeamlessDropDown,{fullWidth:!0,className:(0,b.default)(n.element),label:a("operationId"),helperText:x.operationId,options:[{value:"lock",key:"BAR"},{value:"unlock",key:"UNBAR"}],name:"operationId",value:w.operationId,onChange:function(e){L(e),"BAR"===e.target.value?i(!1):i(!0)},error:!!x.operationId,required:!0}))),p.createElement(s.Z,{item:!0,xs:12,spacing:3},p.createElement(c.Z,{type:"submit",onClick:function(e){U()},className:(0,b.default)(n.element,n.button),color:"primary",variant:"contained",disabled:_},a("submitButton")),p.createElement(c.Z,{type:"button",onClick:function(e){W(e)},className:(0,b.default)(n.element,n.button),color:"secondary",variant:"contained"},a("cancel"))),p.createElement(d.SeamlessDialog,{open:R,onClose:V,className:n.dialogWrapper,maxWidth:"sm"},p.createElement(p.Fragment,null,p.createElement("div",{className:n.modalContentSpacing},p.createElement(m.Z,{gutterBottom:!0,id:"transition-modal-title",variant:"h6",className:n.fontHeavy},a("barUnbarPageTitle")),p.createElement(m.Z,{id:"transition-modal-description",variant:"body1"},a("barUnbarConfirmationText")," ","lock"===w.operationId?"Bar":"Unbar"," ",a("subscriber"))),p.createElement("div",{className:n.modalContentSpacing},p.createElement(d.SeamlessButton,{type:"button",variant:"outlined",color:"primary",className:n.btnSpace,onClick:V},a("noConfirmationButton")),p.createElement(d.SeamlessButton,{type:"button",variant:"contained",color:"primary",onClick:function(e){H(w,e)}},a("yesConfirmationButton"))))))};var N=n(11903);n(59850)},27490:(e,t,n)=>{"use strict";n.d(t,{R:()=>a});var a={TOPUP:"TOPUP",BUNDLE:"CREATE_BUNDLE",AIRTIMESTOCK:"AIRTIMESTOCK",AIRTIME_POSTPAID:"AIRTIME_POSTPAID",SEARCH:"SEARCH",VIEW_TRANSACTION:"SEARCH_ARCHIVED_TRANSACTION",REVERSE_TRANSACTION:"TRANSATION_REVERSAL",O2C:"O2C",CREATE_O2C:"CREATE_O2C",O2C_WITHDRAWAL:"O2C_WITHDRAWAL",O2C_APPROVAL_LIST:"O2C_APPROVAL_LIST",C2C:"C2C",P2P:"P2P",P2P_PIN_RESET:"P2P_PIN_RESET",CREATE_C2C:"CREATE_C2C",C2C_WITHDRAWAL:"C2C_WITHDRAWAL",C2C_APPROVAL_LIST:"C2C_APPROVAL_LIST",APPROVE_C2C_TRANSACTION:"APPROVE_C2C_TRANSACTION",REJECT_C2C_TRANSACTION:"REJECT_C2C_TRANSACTION",PENDING_TRANSACTIONS:"PENDING_TRANSACTIONS",APPROVE_TRANSACTION:"APPROVE_TRANSACTION",REJECT_TRANSACTION:"CANCEL_TRANSACTION",RETURN:"RETURN",CREATE_RETURN:"CREATE_RETURN",HIERARCHY_SEARCH:"SEARCH_HIERARCHY",APPROVE_O2C_TRANSACTION:"APPROVE_O2C_TRANSACTION",REJECT_O2C_TRANSACTION:"REJECT_O2C_TRANSACTION",ACTIVATE_BUNDLE:"ACTIVATE_BUNDLE",MANUAL_ADJUSTMENT:"MANUAL_ADJUSTMENT",STANDARD_BUNDLE_LIST:"STANDARD_BUNDLE_LIST"}}}]);