(self.webpackChunk_unified_transaction=self.webpackChunk_unified_transaction||[]).push([[6744,5395],{78429:(e,t,n)=>{"use strict";n.d(t,{Z:()=>T});var a=n(7560),l=n(11746),r=n(55238),i=n(74315),o=n(2411),c=n.n(o),s=n(6277),u=n(29609),m=n(79692),d=n(12420),p=n(60905),f=n(33553),g=n(61837),E=n(24276),v=n(90436),h=n(82938),Z=n(80030),S=n(37603),y=n(94106),b=(0,m.Z)((function(e){return(0,d.Z)({switchContainer:{marginTop:"25px",float:"right"},ammountDesc:{marginLeft:"5px",marginTop:"25px"},button:{margin:e.spacing(1)},element:{margin:e.spacing(1)},spacingBottom:{marginBottom:e.spacing(2)},btnSpacing:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},input:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},selectBox:{paddingLeft:"10px"},fieldArrayWrapper:{border:"1px solid #EDEDED",marginLeft:"0",marginTop:"10px",width:"100%",borderRadius:"10px",padding:"10px",background:"#F7F7F7"},textRight:{textAlign:"right"}})}));const T=function(e){var t,n,o,m,d,T,w,R,N,C=e.data,I=e.index,x=e.control,P=e.errors,k=e.register,D=e.removeIndex,M=e.isBulk,A=e.getValues,L=e.setValue,B=e.watch,_=b(),O=(0,u.useTranslation)().t,W=c().useState(["+","-"]),H=(0,i.Z)(W,1)[0],V=[{key:O("cash"),value:"cash"}];return c().createElement(p.Z,{container:!0,key:C.id,spacing:2,className:(0,s.default)(_.spacingBottom,_.fieldArrayWrapper)},c().createElement(p.Z,{item:!0,xs:12},c().createElement("div",null,c().createElement(v.Z,{variant:"caption",style:{marginBottom:"0"}},O("resellerId")),c().createElement(h.Z,{color:"primary",checked:!!A("airtimeSellBulk[".concat(I,"].isMobile")),name:"airtimeSellBulk[".concat(I,"].isMobile"),onChange:function(e){L("airtimeSellBulk[".concat(I,"].resellerId"),""),L("airtimeSellBulk[".concat(I,"].recipientMobileNo"),""),L("airtimeSellBulk[".concat(I,"].isMobile"),null==e?void 0:e.target.checked)},inputRef:k()}),c().createElement(v.Z,{variant:"caption"},O("msisdn")))),c().createElement(p.Z,{item:!0,xs:4},B("airtimeSellBulk[".concat(I,"].isMobile"))?null:c().createElement(S.SeamlessInput,{required:!0,className:(0,s.default)(_.element),fullWidth:!0,label:O("resellerId"),error:!(null==P||!P.airtimeSellBulk||null==P||null===(t=P.airtimeSellBulk[I])||void 0===t||!t.resellerId),name:"airtimeSellBulk[".concat(I,"].resellerId"),helperText:null!=P&&P.airtimeSellBulk?null==P||null===(n=P.airtimeSellBulk[I])||void 0===n||null===(o=n.resellerId)||void 0===o?void 0:o.message:"",inputRef:k({required:!0})}),B("airtimeSellBulk[".concat(I,"].isMobile"))?c().createElement(S.SeamlessInput,{required:!0,className:(0,s.default)(_.element),fullWidth:!0,error:!(null==P||!P.airtimeSellBulk||null==P||null===(m=P.airtimeSellBulk[I])||void 0===m||!m.recipientMobileNo),helperText:null!=P&&P.airtimeSellBulk?null==P||null===(d=P.airtimeSellBulk[I])||void 0===d||null===(T=d.recipientMobileNo)||void 0===T?void 0:T.message:"",label:O("resellerMSISDN"),name:"airtimeSellBulk[".concat(I,"].recipientMobileNo"),inputRef:k({required:!0})}):null),c().createElement(p.Z,{item:!0,xs:4},c().createElement(S.SeamlessInput,{required:!0,className:(0,s.default)(_.element),fullWidth:!0,type:"number",error:!(null==P||!P.airtimeSellBulk||null==P||null===(w=P.airtimeSellBulk[I])||void 0===w||!w.amount),label:O("amount"),helperText:null!=P&&P.airtimeSellBulk?null==P||null===(R=P.airtimeSellBulk[I])||void 0===R||null===(N=R.amount)||void 0===N?void 0:N.message:"",name:"airtimeSellBulk[".concat(I,"].amount"),inputRef:k({required:!0}),onKeyDown:function(e){return H.includes(e.key)&&e.preventDefault()}})),c().createElement(p.Z,{item:!0,xs:4},c().createElement(f.Z,{className:(0,s.default)(_.selectBox)},c().createElement(y.Qr,{control:x,defaultValue:V[0].value?V[0].value:"",name:"airtimeSellBulk[".concat(I,"].paymentMethod"),render:function(e){var t=e.onChange,n=e.ref,i=(0,r.Z)(e,["onChange","ref"]);return c().createElement(S.SeamlessDropDown,(0,a.Z)({fullWidth:!0,className:(0,s.default)(_.input),label:O("paymentMethodTitle"),options:(0,l.Z)(V.map((function(e){return{value:e.value,key:e.key}}))),onChange:function(e){var n=e.target.value;t("Choose"===n?null:n)},inputRef:n},i))}}))),c().createElement(p.Z,{item:!0,xs:4},c().createElement(S.SeamlessInput,{className:(0,s.default)(_.element),fullWidth:!0,label:O("comments"),name:"airtimeSellBulk[".concat(I,"].comment"),inputRef:k({required:!1})})),M&&I>0&&c().createElement(p.Z,{item:!0,xs:4,className:(0,s.default)(_.textRight)},c().createElement(Z.ZP,{title:O("delete")},c().createElement(g.Z,{onClick:function(){D(I)},size:"small",color:"primary"},c().createElement(E.Z,null,"delete")))))}},54328:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var a=n(2411),l=n(19653),r=n(29609),i=n(41744),o=n.n(i);const c=function(e){var t=e.accounts,n=e.loading,i=(e.type,(0,r.useTranslation)().t),c=[{field:"accountId",headerName:i("accountId"),width:150,filterable:!1,sortable:!1},{field:"accountTypeId",headerName:i("accountTypeId"),width:160,filterable:!1,sortable:!1},{field:"amount",headerName:i("amount"),width:150,filterable:!1,sortable:!1},{field:"balanceBefore",headerName:i("balanceBefore"),width:150,filterable:!1,sortable:!1,valueGetter:function(e){return e.row.balanceBefore.includes("undefined")?"-":e.row.balanceBefore}},{field:"balanceAfter",headerName:i("balanceAfter"),width:150,filterable:!1,sortable:!1,valueGetter:function(e){return e.row.balanceAfter.includes("undefined")?"-":e.row.balanceAfter}},{field:"comment",headerName:i("comment"),width:150,filterable:!1,sortable:!1},{field:"tag",headerName:i("tag"),width:140,filterable:!1,sortable:!1}],s={Toolbar:function(){return a.createElement(l.GridToolbarContainer,null)}};return a.createElement(o(),{autoHeight:!0,components:s,rows:t.sort((function(e,t){return e.marginRuleId-t.marginRuleId})),loading:n,columns:c,getRowId:function(e){return null==e?void 0:e.id},columnBuffer:3,disableMultipleColumnsSorting:!0,disableColumnFilter:!0,hideFooterPagination:!0})}},19157:(e,t,n)=>{"use strict";n.d(t,{Z:()=>S});var a=n(90929),l=n(2411),r=n(77277),i=n(38592),o=n(80030),c=n(29609),s=n(60552),u=n(41744),m=n.n(u),d=n(53770),p=n(30922),f=n(48049),g=n(81463),E=n(66054),v=n(44104),h=n.n(v),Z=n(27490);const S=function(e){var t,n,u,v,S=e.loading,y=e.isHierarchy,b=e.totalCount,T=e.transactionList,w=(e.timeOrder,e.setTimeOrder),R=e.page,N=e.perPage,C=e.onPageChange,I=e.onPageSizeChange,x=e.pending,P=void 0!==x&&x,k=e.onApproveOrReject,D=e.customerCare,M=void 0!==D&&D,A=(0,c.useTranslation)().t,L=h()().checkPermission,B=null!==(t=null===(n=window)||void 0===n||null===(u=n.config)||void 0===u||null===(v=u.transaction)||void 0===v?void 0:v.hideTransactionInfoFromList)&&void 0!==t?t:[],_=[{field:"actions",headerName:A("actions"),sortable:!1,filterable:!1,renderCell:function(e){var t,n,a;return l.createElement("div",null,l.createElement(i.Z,{size:"small",color:"primary",variant:"text"},P?null:l.createElement(o.ZP,{title:"View"},l.createElement(r.Z,{component:f.Link,to:y?"/home/transaction/hierarchy/".concat(null==e||null===(t=e.row)||void 0===t?void 0:t.ersReference):M?"/home/customercare/transaction/search/".concat(null==e||null===(n=e.row)||void 0===n?void 0:n.ersReference):"/home/transaction/search/".concat(null==e||null===(a=e.row)||void 0===a?void 0:a.ersReference)},l.createElement(s.Z,{fontSize:"small"}))),L(Z.R.APPROVE_TRANSACTION)&&P?l.createElement(o.ZP,{title:"Approve"},l.createElement(r.Z,{onClick:function(){var t;return k("approve",null==e||null===(t=e.row)||void 0===t?void 0:t.ersReference)}},l.createElement(d.Z,{fontSize:"small",style:{color:g.Z[400]}}))):null,L(Z.R.REJECT_TRANSACTION)&&P?l.createElement(o.ZP,{title:"Reject"},l.createElement(r.Z,{onClick:function(){var t;return k("reject",null==e||null===(t=e.row)||void 0===t?void 0:t.ersReference)}},l.createElement(p.Z,{fontSize:"small",style:{color:E.Z[400]}}))):null))},flex:1},{field:"ersReference",headerName:A("transactionReference"),width:200,filterable:!1,sortable:!1},{field:"OriginalErsReference",headerName:A("OriginalErsReference"),width:200,filterable:!1,sortable:!1,valueFormatter:function(e){var t,n,a,l,r;return void 0===(null==e||null===(t=e.row)||void 0===t?void 0:t.originalErsReference)?"null"===(null==e||null===(a=e.row)||void 0===a?void 0:a.OriginalErsReference)||""===(null==e||null===(l=e.row)||void 0===l?void 0:l.OriginalErsReference)?"-":null==e||null===(r=e.row)||void 0===r?void 0:r.OriginalErsReference:(null==e||null===(n=e.row)||void 0===n?void 0:n.originalErsReference)||"-"}},{field:"batchId",headerName:A("batchId"),width:200,filterable:!1,sortable:!1,valueFormatter:function(e){return"NA"===e.row.batchId?"-":e.row.batchId}},{field:"SENDER_FIELD_externalCode",headerName:A("SENDER_FIELD_externalCode"),width:200,filterable:!1,sortable:!1,hide:B.includes("SENDER_FIELD_externalCode"),valueFormatter:function(e){return void 0===e.row.SENDER_FIELD_externalCode||"null"===e.row.SENDER_FIELD_externalCode?"-":e.row.SENDER_FIELD_externalCode}},{field:"RECEIVER_FIELD_externalCode",headerName:A("RECEIVER_FIELD_externalCode"),width:200,filterable:!1,sortable:!1,hide:B.includes("RECEIVER_FIELD_externalCode"),valueFormatter:function(e){return void 0===e.row.RECEIVER_FIELD_externalCode||null===e.row.RECEIVER_FIELD_externalCode?"-":e.row.RECEIVER_FIELD_externalCode}},{field:"SENDER_FIELD_regionPath",headerName:A("SENDER_FIELD_regionPath"),width:200,filterable:!1,sortable:!1,hide:B.includes("SENDER_FIELD_regionPath"),valueFormatter:function(e){return void 0===e.row.SENDER_FIELD_regionPath||"null"===e.row.SENDER_FIELD_regionPath?"-":e.row.SENDER_FIELD_regionPath}},{field:"senderResellerTypeName",headerName:A("senderResellerType"),width:200,filterable:!1,sortable:!1,valueFormatter:function(e){return void 0===(0,a.Z)(e.row.senderResellerTypeName)||"null"===e.row.senderResellerTypeName||""===e.row.senderResellerTypeName||void 0===(0,a.Z)(e.row.senderResellerType)||"null"===e.row.senderResellerType||""===e.row.senderResellerType?"-":e.row.senderResellerType?e.row.senderResellerType:e.row.senderResellerTypeName}},{field:"receiverResellerTypeName",headerName:A("receiverResellerType"),width:200,filterable:!1,sortable:!1,valueFormatter:function(e){return void 0===(0,a.Z)(e.row.receiverResellerTypeName)||"null"===e.row.receiverResellerTypeName||""===e.row.receiverResellerTypeName||void 0===(0,a.Z)(e.row.receiverResellerType)||"null"===e.row.receiverResellerType||""===e.row.receiverResellerType?"-":e.row.receiverResellerType?e.row.receiverResellerType:e.row.receiverResellerTypeName}},{field:"timestamp",headerName:A("timestamp"),width:200,filterable:!1,sortable:!P,valueFormatter:function(e){var t=e.row.timestamp;return t.split("T")[0]+" "+t.split("T")[1].slice(0,8)}},{field:"senderResellerId",headerName:A("senderResellerId"),width:200,filterable:!1,sortable:!1},{field:"senderMSISDN",headerName:A("senderMsisdn"),width:200,filterable:!1,sortable:!1},{field:"receiverResellerId",headerName:A("receiverResellerId"),width:200,filterable:!1,sortable:!1},{field:"receiverMSISDN",headerName:A("receiverMsisdn"),width:200,filterable:!1,sortable:!1},{field:"transactionProfile",headerName:A("transactionType"),width:200,filterable:!1,sortable:!1},{field:"productSKU",headerName:A("product"),width:200,filterable:!1,sortable:!1},{field:"transactionAmount",headerName:A("amount"),width:200,filterable:!1,sortable:!1},{field:"resultMessage",headerName:A("status"),width:200,filterable:!1,sortable:!1}],O=l.useCallback((function(e){var t=e.sortModel[0].sort;w(t)}),[]);return l.createElement(m(),{onPageSizeChange:function(e){I(e.pageSize)},onPageChange:function(e){C(e.page)},pagination:!0,paginationMode:"server",page:R,pageSize:N,rowCount:b,rows:T,loading:S,columns:_,getRowId:function(e){return null==e?void 0:e.id},columnBuffer:3,sortingMode:"server",onSortModelChange:O,disableColumnFilter:!0})}},76787:(e,t,n)=>{"use strict";n.d(t,{Z:()=>z});var a=n(56470),l=n(7560),r=n(11746),i=n(74315),o=n(77162),c=n.n(o),s=n(2411),u=n(8526),m=n(79692),d=n(12420),p=n(77114),f=n(37603),g=n(4614),E=n(60905),v=n(86619),h=n(6277),Z=n(27616),S=n(70660),y=n(8284),b=n(90436),T=n(38016),w=n(29609),R=n(48049),N=n(61564),C=n(39590),I=n(19258),x=n(96545),P=n(23664),k=n(77954),D=n(38670),M=n(21324),A=n(7089),L=n(24276),B=n(95549);const _=function(e){var t=e.options,n=e.selectedOptions,a=e.title,i=e.setSelectedOptions,o=e.view,c=void 0!==o&&o,u=e.required,m=void 0!==u&&u,d=e.className,p=(0,w.useTranslation)().t,f=t.length===n.length,g=function(){i([])},E=function(e){e?i(t):g()},h=(0,B.D)(),Z=function(e){i(e)};return s.createElement(s.Fragment,null,s.createElement(k.ZP,{className:d,multiple:!0,size:"small",options:t,value:n,disableCloseOnSelect:!0,getOptionLabel:function(e){return"".concat(e.key)},getOptionSelected:function(e,t){return e.value===t.value},filterOptions:function(e,t){var n=h(e,t);return e.length>1?[{key:"Select all",value:"select-all"}].concat((0,r.Z)(n)):n},onChange:t.length>1?function(e,n,a){"select-option"===a||"remove-option"===a?n.find((function(e){return"select-all"===e.value}))?(E&&E(!f),null==t||t.filter((function(e){return"select-all"!==e.value}))):Z&&Z(n):"clear"===a&&g&&g()}:function(){return null},renderOption:function(e,t){var n=t.selected,a="select-all"===e.value?{checked:f}:{};return s.createElement(s.Fragment,null,s.createElement(M.Z,(0,l.Z)({color:"primary",icon:s.createElement(L.Z,{color:"primary"},"check_box_outline_blank"),checkedIcon:s.createElement(L.Z,{color:"secondary"},"check_box"),style:{marginRight:8},checked:n,readOnly:c},a)),"".concat(e.key))},renderInput:function(e){return s.createElement(v.Z,(0,l.Z)({},e,{required:m,readOnly:c,disabled:c,label:p(a)}))},disableClearable:!0,renderTags:function(e,t){return e.map((function(e,n){return s.createElement(A.Z,(0,l.Z)({label:e.key},t({index:n})))}))},limitTags:2}))};window.config;var O=window.config.transaction,W=(null==O?void 0:O.transactionTypes)||[],H=(null==O?void 0:O.hideSearchFields)||[],V=window.config.transaction.customerCareTransactionTypes||[],F=window.config.transaction.status||[],q=(0,m.Z)((function(e){return(0,d.Z)({form:{display:"flex",flexDirection:"column",flexWrap:"wrap"},element:{margin:e.spacing(1)},input:{},button:{},label:{margin:e.spacing(1)},root:{width:"100%",marginBottom:e.spacing(2)},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},progress:{marginLeft:"8px"},rowSpacing:{marginBottom:e.spacing(.5)},fullWidth:{width:"100%"},multiSelect:{marginTop:e.spacing(2)},dateField:{marginTop:e.spacing(2),"& .MuiInput-underline:before":{borderBottomWidth:"2px"}},dropdownFilter:{}})}));const z=function(e){var t,n,o,m,d,M,A=e.data,L=e.loading,B=e.onFormSubmit,O=e.productOptions,z=void 0===O?[]:O,U=(e.setTransactionList,e.selectedRegionOptions),j=void 0===U?[]:U,K=e.setSelectedRegionOptions,G=void 0===K?function(){}:K,J=e.customerCare,X=void 0!==J&&J,Q=q(),Y=(0,w.useTranslation)().t,$=((0,R.useHistory)(),s.useState("panel1")),ee=(0,i.Z)($,2),te=ee[0],ne=ee[1],ae=s.useState(A),le=(0,i.Z)(ae,2),re=le[0],ie=le[1],oe=s.useState([]),ce=(0,i.Z)(oe,2),se=ce[0],ue=ce[1],me=s.useState([]),de=(0,i.Z)(me,2),pe=de[0],fe=de[1],ge=s.useState(!1),Ee=(0,i.Z)(ge,2),ve=Ee[0],he=Ee[1],Ze=s.useState([]),Se=(0,i.Z)(Ze,2),ye=Se[0],be=Se[1],Te=(0,D.useSelector)((function(e){return e.auth})).user,we=window.config.report.resellerTypesForDefaultDomain||[],Re=u.Ry().shape({transactionReference:u.Z_(),senderResellerId:u.Z_(),receiverResellerId:u.Z_(),initiatorResellerId:u.Z_(),senderMsisdn:u.Z_(),receiverMsisdn:u.Z_(),transactionTypeOrProfile:u.Z_(),transactionStatus:u.Z_(),productType:u.Z_(),amount:u.Rx(),from:u.hT(),to:u.hT()}),Ne=(0,p.TA)({initialValues:re,validationSchema:Re,onSubmit:function(e){return B&&B(e,20,0)},enableReinitialize:!0}),Ce=Ne.values,Ie=Ne.handleChange,xe=Ne.handleSubmit,Pe=Ne.handleReset,ke=Ne.setFieldValue,De=window.config.openCalendarWith||"year",Me=(0,P.Z)(),Ae=Me.showErrorMessage,Le=(Me.showSuccessMessage,Me.showInfoMessage,Me.showWarningMessage,null===(t=window.config)||void 0===t?void 0:t.resellerAdditionalConfig),Be=(null==Le?void 0:Le.resellerSearchDomainBasedDropdowns)||!1;s.useEffect((function(){if((0,x.lg)().then((function(e){ue(e.types)})).catch((function(e){Ae(e)})),Be){var e,t,n,a,l=[],r=null==Te||null===(e=Te.info)||void 0===e||null===(t=e.additionalFields)||void 0===t?void 0:t.filter((function(e){return"domainName"===(null==e?void 0:e.name)})),i=null==Te||null===(n=Te.info)||void 0===n||null===(a=n.additionalFields)||void 0===a?void 0:a.filter((function(e){return"domainCode"===(null==e?void 0:e.name)}));we.includes(Te.resellerType)&&r.length>0&&i.length>0?(l.push({key:r[0].value,value:i[0].value}),fe(l),Ie({target:{value:i[0].value,name:"domainName"}})):(0,x.Nk)().then((function(e){0!==e.resultCode&&Ae(e.resultMessage),(null==e?void 0:e.groups)&&(null==e||e.groups.map((function(e){null!=e&&e.description&&l.push({key:e.description,value:e.name})}))),l.unshift({key:"ALL",value:"ALL"}),fe(l)})).catch((function(e){Ae(e.message),fe([])}))}}),[]),s.useEffect((function(){Ce.domainName&&(0,x.Fg)(Ce.domainName).then((function(e){var t,n;0!==e.resultCode&&Ae(e.resultMessage);var a=[];(null==e||null===(t=e.group)||void 0===t?void 0:t.members)&&(null==e||null===(n=e.group)||void 0===n||n.members.map((function(e){a.push({key:e.name,value:e.userId})}))),a.length>1&&a.unshift({key:"ALL",value:a.map((function(e){return e.value})).toString()}),be(a)})).catch((function(e){Ae(e.message),he(!1)})).finally((function(){return he(!0)}))}),[Ce.domainName]);var _e=(0,s.useRef)(null),Oe=(null===(m=(null==Te||null===(n=Te.info)||void 0===n||null===(o=n.additionalFields)||void 0===o?void 0:o.filter((function(e){return"accessibleRegionNames"===(null==e?void 0:e.name)})))[0])||void 0===m||null===(d=m.value)||void 0===d||null===(M=d.split(","))||void 0===M?void 0:M.map((function(e){return{key:e,value:e}})))||[];return s.useEffect((function(){1===Oe.length&&G(Oe)}),[]),s.createElement("div",{className:Q.root},s.createElement(Z.Z,{expanded:"panel1"===te,onChange:("panel1",function(e,t){ne(!!t&&"panel1")})},s.createElement(y.Z,{expandIcon:s.createElement(T.Z,null),"aria-controls":"panel1bh-content",id:"panel1bh-header"},s.createElement(b.Z,{className:Q.heading},s.createElement("strong",null,Y("search")))),s.createElement(S.Z,null,s.createElement(E.Z,{className:Q.fullWidth},s.createElement(E.Z,{container:!0,spacing:3,className:Q.rowSpacing},s.createElement(E.Z,{item:!0,sm:4},s.createElement(f.SeamlessInput,{fullWidth:!0,className:(0,h.default)(Q.element,Q.input),name:"transactionReference",value:Ce.transactionReference,onChange:Ie,label:Y("transactionReference")})),!X&&s.createElement(E.Z,{item:!0,sm:4},s.createElement(f.SeamlessInput,{fullWidth:!0,className:(0,h.default)(Q.element,Q.input),name:"senderResellerId",value:Ce.senderResellerId,onChange:Ie,label:Y("senderResellerId")})),!X&&s.createElement(E.Z,{item:!0,sm:4},s.createElement(f.SeamlessInput,{fullWidth:!0,className:(0,h.default)(Q.element,Q.input),name:"receiverResellerId",value:Ce.receiverResellerId,onChange:Ie,label:Y("receiverResellerId")})),s.createElement(E.Z,{item:!0,sm:4},s.createElement(f.SeamlessInput,{fullWidth:!0,className:(0,h.default)(Q.element,Q.input),name:"senderMsisdn",value:Ce.senderMsisdn,onChange:Ie,label:Y("senderMsisdn")})),s.createElement(E.Z,{item:!0,sm:4},s.createElement(f.SeamlessInput,{fullWidth:!0,className:(0,h.default)(Q.element,Q.input),name:"receiverMsisdn",value:Ce.receiverMsisdn,onChange:Ie,label:Y("receiverMsisdn")})),!X&&s.createElement(E.Z,{item:!0,sm:4},s.createElement(f.SeamlessDropDown,{fullWidth:!0,className:(0,h.default)(Q.element,Q.input),label:Y("senderResellerType"),options:[{value:"ALL",key:"ALL"}].concat((0,r.Z)(null==se?void 0:se.map((function(e){return{key:e.name,value:e.id}})))),name:"SenderResellerType",value:Ce.SenderResellerType,onChange:Ie})),!X&&s.createElement(E.Z,{item:!0,sm:4},s.createElement(f.SeamlessDropDown,{fullWidth:!0,className:(0,h.default)(Q.element,Q.input),label:Y("receiverResellerType"),options:[{value:"ALL",key:"ALL"}].concat((0,r.Z)(null==se?void 0:se.map((function(e){return{key:e.name,value:e.id}})))),name:"ReceiverResellerType",value:Ce.ReceiverResellerType,onChange:Ie})),!X&&!H.includes("senderExternalCode")&&s.createElement(E.Z,{item:!0,sm:4},s.createElement(f.SeamlessInput,{fullWidth:!0,className:(0,h.default)(Q.element,Q.input),name:"SenderExternalCode",value:Ce.SenderExternalCode,onChange:Ie,label:Y("SENDER_FIELD_externalCode")})),!X&&!H.includes("receiverExternalCode")&&s.createElement(E.Z,{item:!0,sm:4},s.createElement(f.SeamlessInput,{fullWidth:!0,className:(0,h.default)(Q.element,Q.input),name:"ReceiverExternalCode",value:Ce.ReceiverExternalCode,onChange:Ie,label:Y("RECEIVER_FIELD_externalCode")})),!X&&s.createElement(E.Z,{item:!0,sm:4},s.createElement(f.SeamlessInput,{fullWidth:!0,className:(0,h.default)(Q.element,Q.input),name:"amount",type:"number",value:Ce.amount,onChange:Ie,label:Y("amount")})),s.createElement(E.Z,{item:!0,sm:4},s.createElement(f.SeamlessDropDown,{fullWidth:!0,className:(0,h.default)(Q.element,Q.input),label:Y("transactionTypeOrProfile"),options:[{key:"All",value:"ALL"}].concat((0,r.Z)(X?V:W)),name:"transactionTypeOrProfile",value:Ce.transactionTypeOrProfile,onChange:Ie})),!X&&s.createElement(E.Z,{item:!0,sm:4},s.createElement(k.ZP,{className:(0,h.default)(Q.element,Q.input),id:"product-types",value:Ce.productType,options:[{key:"All",value:"ALL"}].concat((0,r.Z)(z)),getOptionLabel:function(e){return e.key||e},getOptionSelected:function(e,t){return e.value===Ce.productType},onChange:function(e,t){Ie({target:{value:t.value,name:"productType"}})},renderInput:function(e){return s.createElement(v.Z,(0,l.Z)({},e,{label:Y("productType"),placeholder:Y("productTypeHelper")}))}})),!X&&s.createElement(E.Z,{item:!0,sm:4},s.createElement(f.SeamlessDropDown,{fullWidth:!0,className:(0,h.default)(Q.element,Q.input),label:Y("transactionStatus"),options:[{key:"All",value:"ALL"}].concat((0,r.Z)(F)),name:"transactionStatus",value:Ce.transactionStatus,onChange:Ie})),!X&&!H.includes("batchId")&&s.createElement(E.Z,{item:!0,sm:4},s.createElement(f.SeamlessInput,{fullWidth:!0,className:(0,h.default)(Q.element,Q.input),name:"batchId",value:Ce.batchId,onChange:Ie,label:Y("batchId")})),!X&&(null==Oe?void 0:Oe.length)>0&&s.createElement(E.Z,{item:!0,sm:4},s.createElement(_,{options:Oe||[],className:(0,h.default)(Q.multiSelect),selectedOptions:j,title:Y("region"),setSelectedOptions:G})),Be&&!X&&s.createElement(E.Z,{item:!0,sm:4},s.createElement(f.SeamlessDropDown,{id:"domain-name-dropdown",fullWidth:!0,className:(0,h.default)(Q.element),label:Y("domainName"),helperText:Y("domainNameHelper"),options:pe,name:"domainName",value:Ce.domainName,onChange:function(e){Ie(e);var t=_e.current.getElementsByClassName("MuiAutocomplete-clearIndicator")[0];t&&t.click()}})),Be&&!X&&s.createElement(E.Z,{item:!0,sm:4},ve&&s.createElement(k.ZP,{multiple:!0,limitTags:2,id:"domain-associates-dropdown",className:(0,h.default)(Q.element),options:ye,disableCloseOnSelect:!0,getOptionLabel:function(e){return e.key},getOptionSelected:function(e,t){return e.value===t.value},onChange:function(e,t){var n=[];t.map((function(e){n.push(e.value)})),Ie({target:{value:n.toString(),name:"domainType"}})},renderInput:function(e){return s.createElement(v.Z,(0,l.Z)({},e,{label:Y("domainType"),placeholder:Y("domainTypeHelper")}))},ref:_e}))),s.createElement(E.Z,{container:!0,spacing:3,className:Q.rowSpacing},s.createElement(E.Z,{item:!0,sm:4},s.createElement(N.M,{utils:I.Z},s.createElement(C.e,{className:(0,h.default)(Q.element,Q.dateField),fullWidth:!0,disableFuture:!0,views:["year","month","date"],openTo:De,format:"yyyy-MM-dd",placeholder:"yyyy-mm-dd",autoOk:!0,id:"from",label:Y("from"),value:Ce.from||null,error:!1,onChange:function(e){return Ie({target:{value:e,name:"from"}})},KeyboardButtonProps:{"aria-label":"change date"}}))),s.createElement(E.Z,{item:!0,sm:4},s.createElement(N.M,{utils:I.Z},s.createElement(C.e,{className:(0,h.default)(Q.element,Q.dateField),fullWidth:!0,autoOk:!0,disableFuture:!0,views:["year","month","date"],openTo:De,format:"yyyy-MM-dd",placeholder:"yyyy-mm-dd",maxDate:new Date,id:"to",label:Y("to"),value:Ce.to||null,error:!1,onChange:function(e){return Ie({target:{value:e,name:"to"}})},KeyboardButtonProps:{"aria-label":"change date"}})))),s.createElement(E.Z,{container:!0,spacing:3,className:Q.rowSpacing},s.createElement(E.Z,{item:!0,sm:12},s.createElement(f.SeamlessButton,{onClick:(0,a.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:G([]),he(!1),ke("domainName",""),ke("productType","ALL"),ke("domainType","ALL"),ie(A),Pe(Ce),xe();case 8:case"end":return e.stop()}}),e)}))),className:(0,h.default)(Q.element,Q.button),color:"primary",variant:"outlined"},Y("resetSearch")),s.createElement(f.SeamlessButton,{onClick:function(){ie(Ce),xe()},className:(0,h.default)(Q.element,Q.button),disabled:L,color:"primary",variant:"contained"},Y("search"),L&&s.createElement(g.Z,{color:"inherit",size:14,thickness:6,className:Q.progress}))))))))}},59850:(e,t,n)=>{"use strict";n.d(t,{Z:()=>D});var a=n(51119),l=n(74315),r=n(2411),i=n.n(r),o=n(38670),c=n(96545),s=n(23664),u=n(41744),m=n.n(u),d=n(29609),p=n(77277),f=n(38592),g=n(8629),E=n(49429),v=n(38724),h=n(79249),Z=n(60905),S=n(80030),y=n(90436),b=n(36288),T=n(37603),w=n(79692),R=n(12420),N=n(44104),C=n.n(N),I=n(27490);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=(0,w.Z)((function(e){var t,n;return(0,R.Z)({blurBackDrop:{backdropFilter:"blur(2px)",backgroundColor:"rgba(0, 0, 0, 0.2)"},dialogHeader:{fontSize:18,fontWeight:"bold",align:"left",backgroundColor:e.palette.primary.main,color:null==e||null===(t=e.palette)||void 0===t||null===(n=t.common)||void 0===n?void 0:n.white},inputGrid:{marginTop:"15px"},numberElement:{"& input::-webkit-outer-spin-button, input::-webkit-inner-spin-button":{"-webkit-appearance":"none",margin:0},"input[type=number]":{"-moz-appearance":"textfield"},margin:e.spacing(1)},element:{margin:e.spacing(1)},gridSpacing:{marginLeft:"10px"}})}));const D=function(){var e,t,n,r=i().useState(!1),u=(0,l.Z)(r,2),w=u[0],R=u[1],N=i().useState([]),x=(0,l.Z)(N,2),D=x[0],M=x[1],A=i().useState(!1),L=(0,l.Z)(A,2),B=L[0],_=L[1],O=i().useState(),W=(0,l.Z)(O,2),H=W[0],V=W[1],F=i().useState({}),q=(0,l.Z)(F,2),z=q[0],U=q[1],j=(0,o.useSelector)((function(e){return e.auth})).user,K=(0,s.Z)(),G=K.showErrorMessage,J=K.showSuccessMessage,X=(0,d.useTranslation)().t,Q=C()().checkPermission,Y=window.config,$=(null===(e=Y.transaction)||void 0===e?void 0:e.bundleProductTypes)||[],ee=(null===(t=Y.transaction)||void 0===t?void 0:t.bundlePaymentMethods)||["cash"],te=(null===(n=Y.transaction)||void 0===n?void 0:n.bundleAccountTypeId)||"DATA_BUNDLE",ne=k();i().useEffect((function(){R(!0),(0,c.ih)(j.userId).then((function(e){0===(null==e?void 0:e.resultCode)&&null!=e&&e.products?(0,c.JH)({variantIds:null==e?void 0:e.products}).then((function(e){var t=[];0===(null==e?void 0:e.resultCode)&&(null==e?void 0:e.productVariants.length)>0?(null==e||e.productVariants.map((function(e){var n;if($.includes(null==e||null===(n=e.product)||void 0===n?void 0:n.productType)){var a,l=P(P({},null==e?void 0:e.variant),{},{productName:null==e||null===(a=e.product)||void 0===a?void 0:a.name});t.push(l)}})),M(t)):G(null==e?void 0:e.resultDescription)})).catch((function(e){G(e)})):G(null==e?void 0:e.resultDescription)})).catch((function(e){return G(e)})).finally((function(){U(P(P({},z),{},{paymentMethod:null==ee?void 0:ee[0]})),R(!1)}))}),[]);var ae=function(){_(!1)},le=function(e){U(P(P({},z),{},(0,a.Z)({},e.target.name,e.target.value)))},re=[{field:"productName",headerName:X("productName"),width:200},{field:"productSKU",headerName:X("productSKU"),width:200},{field:"status",headerName:X("status"),width:200},{field:"unitPrice",headerName:X("unitPrice"),width:200,valueGetter:function(e){var t,n;return null==e||null===(t=e.row)||void 0===t||null===(n=t.unitPrice)||void 0===n?void 0:n.price}},{field:"unitCurrency",headerName:X("unitCurrency"),width:200,valueGetter:function(e){var t,n;return null==e||null===(t=e.row)||void 0===t||null===(n=t.unitPrice)||void 0===n?void 0:n.currency}},{field:"action",headerName:X("action"),width:200,renderCell:function(e){return i().createElement("div",null,i().createElement(f.Z,{size:"small",color:"primary",variant:"text","aria-label":"action buttons"},Q(I.R.ACTIVATE_BUNDLE)&&i().createElement(S.ZP,{title:"Activate"},i().createElement(p.Z,{onClick:function(){_(!0)}},i().createElement(b.Z,{fontSize:"small"})))))}}];return i().createElement(i().Fragment,null,i().createElement(g.Z,{open:B,fullWidth:!0,keepMounted:!0,maxWidth:"md",onClose:ae,"aria-labelledby":"standard-bundle-dialog",BackdropProps:{classes:{root:ne.blurBackDrop}}},i().createElement(h.Z,{className:ne.dialogHeader,color:"primary",disableTypography:!0},X("standardBundlePopupTitle")),i().createElement(v.Z,null,i().createElement(y.Z,null,X("standardBundleConfirmationMessage",{name:null==H?void 0:H.productName})),i().createElement(Z.Z,{container:!0,className:ne.inputGrid},i().createElement(Z.Z,{item:!0,xs:12,sm:3,className:ne.gridSpacing},i().createElement(T.SeamlessInput,{label:X("subscriberMsisdn"),required:!0,fullWidth:!0,onKeyDown:function(e){return["e","E","+","-","ArrowUp","ArrowDown"].includes(e.key)&&e.preventDefault()},name:"subscriberMsisdn",onChange:le,id:"subscriberMsisdn",type:"number",className:ne.numberElement,value:z.subscriberMsisdn})),i().createElement(Z.Z,{item:!0,xs:12,sm:4,className:ne.gridSpacing},i().createElement(T.SeamlessDropDown,{options:ee.map((function(e){return{key:X(e),value:e}})),label:X("selectPaymentMethod"),name:"paymentMethod",id:"paymentMethod",fullWidth:!0,className:ne.element,onChange:le,disabled:1===ee.length,value:z.paymentMethod})),i().createElement(Z.Z,{item:!0,xs:12,sm:4,className:ne.gridSpacing},i().createElement(T.SeamlessInput,{label:X("comments"),multiline:!0,rows:2,rowsMax:5,fullWidth:!0,name:"comments",onChange:le,id:"comments",className:ne.element,value:z.comments})))),i().createElement(E.Z,null,i().createElement(T.SeamlessButton,{variant:"contained",onClick:function(){if(z.subscriberMsisdn){var e,t,n={seller:{type:"RESELLERID",id:j.userId,accountTypeId:"RESELLER"},topUpPrincipalId:{type:"SUBSCRIBERMSISDN",id:z.subscriberMsisdn,accountTypeId:te},product:{productSKU:null==H?void 0:H.productSKU,amount:{value:null==H||null===(e=H.unitPrice)||void 0===e?void 0:e.price,currency:null==H||null===(t=H.unitPrice)||void 0===t?void 0:t.currency}},transactionProperties:{map:{preferredLanguage:"en",paymentMethod:z.paymentMethod,comments:z.comments,batchId:""}}};(0,c.HS)(n).then((function(e){0===e.resultCode?(J(null==e?void 0:e.resultMessage),U(P(P({},z),{},{subscriberMsisdn:"",comments:""})),_(!1)):G(null==e?void 0:e.resultMessage)})).catch((function(e){return G(e)}))}else G(X("subscriberMsisdnValidationMsg"))},color:"primary"},X("submit")),i().createElement(T.SeamlessButton,{variant:"outlined",onClick:ae},X("close")))),i().createElement("div",{style:{height:600}},i().createElement(m(),{loading:w,columnBuffer:2,rows:D,columns:re,getRowId:function(e){return e.variantId},onRowSelected:function(e){var t=e.data;return V(t)}})))}},17410:(e,t,n)=>{"use strict";n.d(t,{Z:()=>N});var a=n(2411),l=n(74315),r=n(8526),i=n(79692),o=n(12420),c=n(94106),s=n(46491),u=n(37603),m=n(29609),d=n(33553),p=n(60905),f=n(77277),g=n(4614),E=n(6277),v=n(38670),h=n(48049),Z=n(23664),S=n(96545),y=(0,i.Z)((function(e){return(0,o.Z)({elements:{marginRight:e.spacing(2)},keyboardpicker:{width:"100%"},input:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},btnSpacing:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}})}));const b=function(){var e=y(),t=(0,m.useTranslation)().t,n=(0,h.useHistory)(),i=a.useState(!1),o=(0,l.Z)(i,2),b=o[0],T=o[1],w=(0,v.useSelector)((function(e){return null==e?void 0:e.auth}),v.shallowEqual),R=window.config.currency,N=window.config.language,C=(0,Z.Z)(),I=C.showErrorMessage,x=C.showSuccessMessage,P=r.Ry({amount:r.Rx().required(t("c2cAmountError")).positive(t("amountPositive")).typeError(t("c2cAmountError"))}),k=(0,c.cI)({mode:"onSubmit",resolver:(0,s.X)(P),reValidateMode:"onChange"}),D=k.register,M=(k.getValues,k.errors),A=(k.control,k.handleSubmit);return k.reset,k.setError,k.clearErrors,a.createElement(d.Z,null,a.createElement(f.Z,{style:{visibility:"hidden"}}),a.createElement(d.Z,{display:"flex",flexDirection:"column",width:"50%"},a.createElement(d.Z,{mb:3,display:"flex",flexDirection:"row",justifyContent:"space-between"},a.createElement(u.SeamlessInput,{type:"number",required:!0,fullWidth:!0,onKeyDown:function(e){return["e","E","+","-"].includes(e.key)&&e.preventDefault()},name:"amount",error:!!M.amount,helperText:M.amount?M.amount.message:t("c2cAmountHelperText"),className:(0,E.default)(e.elements),label:t("returnAmount"),inputRef:D({required:!0})})),a.createElement(d.Z,{mb:3,display:"flex",flexDirection:"row",justifyContent:"space-between"},a.createElement(u.SeamlessInput,{fullWidth:!0,error:!!M.remarks,helperText:M.remarks?t("c2cWithdrawalReasonErrorText"):t("c2cWithdrawalReasonHelperText"),className:(0,E.default)(e.elements),name:"remarks",multiline:!0,rows:4,rowsMax:4,label:t("c2cWithdrawalReason"),inputRef:D({required:!0})})),a.createElement(p.Z,{item:!0,className:(0,E.default)(e.input)},a.createElement(u.SeamlessButton,{className:(0,E.default)(e.btnSpacing),onClick:A((function(e){Object.keys(M).length||function(e){T(!0);var t=window.config.transaction.c2cReturn||"",a={sender:{type:"RESELLERID",id:w.user.requestedPrincipalId,accountTypeId:"RESELLER"},receiver:{type:"RESELLERID",id:w.user.info.resellerData.parentResellerId,accountTypeId:"RESELLER"},product:{productSKU:window.config.transaction.returnProductSku||"",amount:{value:e.amount,currency:R}},transactionProperties:{map:{preferredLanguage:N,remarks:e.remarks}}};(0,S.gD)(a,t).then((function(e){if(0===e.resultCode)return x(e.resultMessage),n.push("/home/transaction/return");I(e.resultMessage)})).catch((function(e){return I(e)})).finally((function(){return T(!1)}))}(e)})),color:"primary",variant:"contained"},t("submitButton"),b&&a.createElement(g.Z,{color:"inherit",size:14,thickness:6,style:{marginLeft:"8px"}})),a.createElement(u.SeamlessButton,{onClick:function(){return n.push("/home/transaction/return")},className:(0,E.default)(e.btnSpacing),color:"primary",variant:"outlined"},t("resetButton")))))};var T=n(44104),w=n.n(T),R=n(27490);const N=function(){var e=w()().AccessControlled;return a.createElement(e,{feature:R.R.CREATE_RETURN},a.createElement(b,null))}},69440:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ke,u:()=>ye});var a=n(2411),l=n(74315),r=n(31168),i=n(13737),o=n(7560),c=n(55238),s=n(8526),u=n(79692),m=n(12420),d=n(94106),p=n(46491),f=n(37603),g=n(29609),E=n(33553),v=n(60905),h=n(77277),Z=n(4614),S=n(6277),y=n(38670),b=n(48049),T=n(96545),w=n(23664),R=n(61564),N=n(39590),C=n(19258),I=n(84278),x=n(27556),P=n(37390),k=n(97485),D=n(15584),M=n(91256),A=n(58987),L=n(89571),B=n(80030),_=n(90436),O=n(11312),W=n(98069),H=n(99144),V=n(21602),F=(0,u.Z)((function(e){return(0,m.Z)({spacingTop:{marginTop:e.spacing(3)},element:{margin:e.spacing(1),padding:"".concat(e.spacing(1),"px ").concat(e.spacing(1.5),"px"),borderRadius:e.shape.borderRadius},rowSpacing:{marginBottom:e.spacing(1.5)},colHead:{fontWeight:"bolder",fontSize:"14px",borderBottom:"1px solid"}})}));const q=function(e){var t,n,r,i,o,c,s,u,m,d=e.receiverType,p=e.receiverData,f=(e.formSubmit,e.formData),E=(0,g.useTranslation)().t,h=a.useState(!1),Z=(0,l.Z)(h,2),S=Z[0],y=Z[1],R=a.useState({}),N=(0,l.Z)(R,2),C=N[0],q=N[1],z=a.useState({}),U=(0,l.Z)(z,2),j=U[0],K=U[1],G=a.useState({}),J=(0,l.Z)(G,2),X=J[0],Q=J[1],Y=a.useState({}),$=(0,l.Z)(Y,2),ee=$[0],te=$[1],ne=a.useState({}),ae=(0,l.Z)(ne,2),le=ae[0],re=ae[1],ie=((0,b.useHistory)(),(0,V.Z)()),oe=(0,w.Z)().showErrorMessage,ce=F();return a.useEffect((function(){y(!0),(0,T.EZ)(d,p).then((function(e){var t,n,a,l,r,i,o,c,s,u;q(null==e?void 0:e.resellerInfo),te(null==e||null===(t=e.resellerInfo)||void 0===t||null===(n=t.additionalFields)||void 0===n?void 0:n.filter((function(e){return"geographyCode"===e.name}))),re(null==e||null===(a=e.resellerInfo)||void 0===a||null===(l=a.additionalFields)||void 0===l?void 0:l.filter((function(e){return"domainName"===e.name}))),(null==e||null===(r=e.resellerInfo)||void 0===r||null===(i=r.resellerData)||void 0===i?void 0:i.contractId)&&(0,T.gc)(null==e||null===(o=e.resellerInfo)||void 0===o||null===(c=o.resellerData)||void 0===c?void 0:c.contractId).then((function(e){K(e)})).catch((function(e){return oe(e)}));var m;m="FOC"===f.trfCategory?window.config.transaction.o2cFOCValidationProductSku||"":window.config.transaction.o2cSaleProductSku||"";var d={referenceNumber:"",profileId:f.trfCategory,products:[{productSku:m,itemCount:1,amount:f.amount,sender:ie.requestedPrincipalId,senderWallet:"RESELLER",receiver:null==e||null===(s=e.resellerInfo)||void 0===s||null===(u=s.resellerData)||void 0===u?void 0:u.resellerId,receiverWallet:"RESELLER",applicableContract:1,offerPrice:0}]};(0,T.Kd)(d).then((function(e){Q(null==e?void 0:e.products)})).catch((function(e){return oe(e)}))})).catch((function(e){return oe(e)})).finally((function(){return y(!1)}))}),[]),a.createElement(a.Fragment,null,S?a.createElement(W.Z,null):a.createElement(a.Fragment,null,a.createElement(v.Z,{container:!0,className:ce.spacingTop},a.createElement(v.Z,{container:!0},a.createElement(v.Z,{container:!0,spacing:2,className:ce.rowSpacing},a.createElement(O.Z,{title:E("channelDomain"),value:le?null===(t=le[0])||void 0===t?void 0:t.value:E("emptyValueMark"),headingProps:{xs:6,sm:6,lg:2,md:3},valueProps:{xs:6,sm:6,lg:3,md:3}}),a.createElement(O.Z,{title:E("name"),value:null!=C&&null!==(n=C.resellerData)&&void 0!==n&&n.resellerName?null==C||null===(r=C.resellerData)||void 0===r?void 0:r.resellerName:E("emptyValueMark"),headingProps:{xs:6,sm:6,lg:2,md:3},valueProps:{xs:6,sm:6,lg:3,md:3}})),a.createElement(v.Z,{container:!0,spacing:2,className:ce.rowSpacing},a.createElement(O.Z,{title:E("commissionProfile"),value:null==j?void 0:j.importId,headingProps:{xs:6,sm:6,lg:2,md:3},valueProps:{xs:6,sm:6,lg:3,md:3}}),a.createElement(O.Z,{title:E("geographicalDomain"),value:ee?null===(i=ee[0])||void 0===i?void 0:i.value:E("emptyValueMark"),headingProps:{xs:6,sm:6,lg:2,md:3},valueProps:{xs:6,sm:6,lg:3,md:3}})),a.createElement(v.Z,{container:!0,spacing:2,className:ce.rowSpacing},a.createElement(O.Z,{title:E("resellerType"),value:null!=C&&null!==(o=C.resellerData)&&void 0!==o&&o.resellerTypeName?null==C||null===(c=C.resellerData)||void 0===c?void 0:c.resellerTypeName:E("emptyValueMark"),headingProps:{xs:6,sm:6,lg:2,md:3},valueProps:{xs:6,sm:6,lg:3,md:3}}),a.createElement(O.Z,{title:E("msisdn"),value:null!=C&&null!==(s=C.resellerData)&&void 0!==s&&s.resellerMSISDN?null==C||null===(u=C.resellerData)||void 0===u?void 0:u.resellerMSISDN:E("emptyValueMark"),headingProps:{xs:6,sm:6,lg:2,md:3},valueProps:{xs:6,sm:6,lg:3,md:3}})),a.createElement(v.Z,{container:!0,spacing:2,className:ce.rowSpacing},a.createElement(O.Z,{title:E("transactionDate"),value:(0,I.Z)(new Date,"yyyy-MM-dd"),headingProps:{xs:6,sm:6,lg:2,md:3},valueProps:{xs:6,sm:6,lg:3,md:3}})))),a.createElement("div",{style:{height:"auto",width:"100%"},className:ce.spacingTop},a.createElement(M.Z,{component:x.Z},a.createElement(P.Z,null,a.createElement(A.Z,{style:{borderBottom:1}},a.createElement(L.Z,null,a.createElement(D.Z,{className:ce.colHead},E("productName")),a.createElement(D.Z,{className:ce.colHead},E("o2cSaleProductQtyTitle")),a.createElement(D.Z,{className:ce.colHead},a.createElement("span",null,E("o2cSaleTax1RateTitle"),a.createElement(B.ZP,{title:E("o2cSalePopupRateText")},a.createElement(H.Z,{fontSize:"inherit"})))),a.createElement(D.Z,{className:ce.colHead},a.createElement("span",null,E("o2cSaleTax1AmountTitle"),a.createElement(B.ZP,{title:E("o2cSalePopupAmountText")},a.createElement(H.Z,{fontSize:"inherit"})))),a.createElement(D.Z,{className:ce.colHead},a.createElement("span",null,E("o2cSaleTax2RateTitle"),a.createElement(B.ZP,{title:E("o2cSalePopupRateText")},a.createElement(H.Z,{fontSize:"inherit"})))),a.createElement(D.Z,{className:ce.colHead},a.createElement("span",null,E("o2cSaleTax2AmountTitle"),a.createElement(B.ZP,{title:E("o2cSalePopupAmountText")},a.createElement(H.Z,{fontSize:"inherit"})))),a.createElement(D.Z,{className:ce.colHead},a.createElement("span",null,E("o2cSaleCommissionRateTitle"),a.createElement(B.ZP,{title:E("o2cSalePopupRateText")},a.createElement(H.Z,{fontSize:"inherit"})))),a.createElement(D.Z,{className:ce.colHead},a.createElement("span",null,E("o2cSaleCommissionAmountTitle"),a.createElement(B.ZP,{title:E("o2cSalePopupAmountText")},a.createElement(H.Z,{fontSize:"inherit"})))),a.createElement(D.Z,{className:ce.colHead},a.createElement("span",null,E("o2cSaleTDSRateTitle"),a.createElement(B.ZP,{title:E("o2cSalePopupRateText")},a.createElement(H.Z,{fontSize:"inherit"})))),a.createElement(D.Z,{className:ce.colHead},a.createElement("span",null,E("o2cSaleTDSAmountTitle"),a.createElement(B.ZP,{title:E("o2cSalePopupAmountText")},a.createElement(H.Z,{fontSize:"inherit"})))),a.createElement(D.Z,{className:ce.colHead},E("o2cSalePayableTitle")),a.createElement(D.Z,{className:ce.colHead},E("o2cSaleNetPayableTitle")))),a.createElement(k.Z,null,X&&(null===(m=X[0])||void 0===m?void 0:m.transactionRows.map((function(e,t){var n,l,r,i,o,c,s,u,m,d,p,g,v,h,Z,S,y,b,T,w,R,N,C,I,x,P,k,M,A,B,_,O,W,H,V;if(window.config.transaction.o2cSalePopupEligibleTags.includes(null==e?void 0:e.accountId))return H="percentage"===(null==e||null===(n=e.fields)||void 0===n?void 0:n.commissionValueType).toLowerCase()?"PCT":"absolute"===(null==e||null===(l=e.fields)||void 0===l?void 0:l.commissionValueType).toLowerCase()?"AMT":"",V="percentage"===(null==e||null===(r=e.fields)||void 0===r?void 0:r.commissionValueType).toLowerCase()?parseInt(null==e||null===(i=e.fields)||void 0===i?void 0:i.commissionValueExpression)/100:null==e||null===(o=e.fields)||void 0===o?void 0:o.commissionValueExpression,null===(c=window)||void 0===c||null===(s=c.config)||void 0===s||null===(u=s.transaction)||void 0===u||u.o2cPopUpTags,a.createElement(L.Z,{key:t},a.createElement(D.Z,null,null===(m=X[0])||void 0===m?void 0:m.eanCode),a.createElement(D.Z,null,null==f?void 0:f.amount),a.createElement(D.Z,null,(null==e?void 0:e.tag)===(null===(d=window)||void 0===d||null===(p=d.config)||void 0===p||null===(g=p.transaction)||void 0===g?void 0:g.o2cPopUpTAXTagName)?V+" "+H:E("emptyValueMark")),a.createElement(D.Z,null,(null==e?void 0:e.tag)===(null===(v=window)||void 0===v||null===(h=v.config)||void 0===h||null===(Z=h.transaction)||void 0===Z?void 0:Z.o2cPopUpTAXTagName)?null==e?void 0:e.amount:E("emptyValueMark")),a.createElement(D.Z,null,(null==e?void 0:e.tag)===(null===(S=window)||void 0===S||null===(y=S.config)||void 0===y||null===(b=y.transaction)||void 0===b?void 0:b.o2cPopUpTAX2TagName)?V+" "+H:E("emptyValueMark")),a.createElement(D.Z,null,(null==e?void 0:e.tag)===(null===(T=window)||void 0===T||null===(w=T.config)||void 0===w||null===(R=w.transaction)||void 0===R?void 0:R.o2cPopUpTAX2TagName)?null==e?void 0:e.amount:E("emptyValueMark")),a.createElement(D.Z,null,(null==e?void 0:e.tag)===(null===(N=window)||void 0===N||null===(C=N.config)||void 0===C||null===(I=C.transaction)||void 0===I?void 0:I.o2cPopUpCOMISSIONTagName)?V+" "+H:E("emptyValueMark")),a.createElement(D.Z,null,(null==e?void 0:e.tag)===(null===(x=window)||void 0===x||null===(P=x.config)||void 0===P||null===(k=P.transaction)||void 0===k?void 0:k.o2cPopUpCOMISSIONTagName)?null==e?void 0:e.amount:E("emptyValueMark")),a.createElement(D.Z,null,(null==e?void 0:e.tag)===(null===(M=window)||void 0===M||null===(A=M.config)||void 0===A||null===(B=A.transaction)||void 0===B?void 0:B.o2cPopUpTDSTagName)?V+" "+H:E("emptyValueMark")),a.createElement(D.Z,null,(null==e?void 0:e.tag)===(null===(_=window)||void 0===_||null===(O=_.config)||void 0===O||null===(W=O.transaction)||void 0===W?void 0:W.o2cPopUpTDSTagName)?null==e?void 0:e.amount:E("emptyValueMark")),a.createElement(D.Z,null,((null==f?void 0:f.amount)+(null==e?void 0:e.amount)).toFixed(2)),a.createElement(D.Z,null,((null==f?void 0:f.amount)+(null==e?void 0:e.amount)).toFixed(2)))}))))))),a.createElement("div",{className:ce.spacingTop},a.createElement(v.Z,{container:!0,spacing:2,className:ce.rowSpacing},a.createElement(O.Z,{title:E("remarks"),value:null==f?void 0:f.remarks,headingProps:{xs:6,sm:6,lg:2,md:3},valueProps:{xs:6,sm:6,lg:3,md:3}}))),a.createElement("div",{style:{height:"auto",width:"100%"},className:ce.spacingTop},a.createElement(_.Z,{variant:"h6"},E("paymentDetails")),a.createElement(M.Z,{component:x.Z},a.createElement(P.Z,null,a.createElement(A.Z,{style:{borderBottom:1}},a.createElement(L.Z,null,a.createElement(D.Z,{className:ce.colHead},E("o2cInstrumentType")),a.createElement(D.Z,{className:ce.colHead},E("o2cPaymentInstrumentNumber")),a.createElement(D.Z,{className:ce.colHead},E("o2cPaymentInstrumentDate")),a.createElement(D.Z,{className:ce.colHead},E("o2cAmount")))),a.createElement(k.Z,null,a.createElement(L.Z,null,a.createElement(D.Z,null,null!=f&&f.instrumentType?null==f?void 0:f.instrumentType:E("emptyValueMark")),a.createElement(D.Z,null,null!=f&&f.paymentInstrumentNumber?null==f?void 0:f.paymentInstrumentNumber:E("emptyValueMark")),a.createElement(D.Z,null,null!=f&&f.paymentInstrumentDate?null==f?void 0:f.paymentInstrumentDate:E("emptyValueMark")),a.createElement(D.Z,null,null!=f&&f.amount?(null==f?void 0:f.amount).toFixed(2):E("emptyValueMark")))))))))};var z=(0,u.Z)((function(e){return(0,m.Z)({elements:{marginRight:e.spacing(2)},keyboardpicker:{width:"100%"},input:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},btnSpacing:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},dialogWrapper:{"& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}}})}));const U=function(){var e,t,n,r=z(),i=(0,g.useTranslation)().t,u=(0,b.useHistory)(),m=a.useState(!1),x=(0,l.Z)(m,2),P=x[0],k=x[1],D=a.useState(!1),M=(0,l.Z)(D,2),A=M[0],L=M[1],B=a.useState(!1),_=(0,l.Z)(B,2),O=_[0],W=_[1],H=a.useState(""),V=(0,l.Z)(H,2),F=V[0],U=V[1],j=a.useState(),K=(0,l.Z)(j,2),G=K[0],J=K[1],X=a.useState("RESELLERMSISDN"),Q=(0,l.Z)(X,2),Y=Q[0],$=Q[1],ee=((0,y.useSelector)((function(e){return null==e?void 0:e.auth}),y.shallowEqual),window.config.currency),te=window.config.language,ne=(null===(e=window)||void 0===e||null===(t=e.config)||void 0===t||null===(n=t.transaction)||void 0===n?void 0:n.instrumentType)||"Cash",ae=(0,w.Z)(),le=ae.showErrorMessage,re=ae.showSuccessMessage,ie=s.Ry({receiverId:s.Z_().required(i("o2cReceiverIdError")),trfCategory:s.Z_().required(i("o2cTrfCategoryError")),paymentInstrumentDate:O?s.Z_():s.Z_().required(i("o2cpaymentInstrumentDateError")),externalReferenceNumber:O?s.Z_():s.Z_().required(i("o2cexternalReferenceNumberError")),paymentInstrumentNumber:O?s.Z_():s.Z_().required(i("o2cpaymentInstrumentNumberError")),amount:s.Rx().required(i("o2cAmountError")).positive(i("amountPositive")).typeError(i("o2cAmountError"))}),oe=(0,d.cI)({mode:"onSubmit",resolver:(0,p.X)(ie),reValidateMode:"onChange"}),ce=oe.register,se=(oe.getValues,oe.errors),ue=oe.control,me=oe.handleSubmit,de=(oe.reset,oe.setError),pe=oe.clearErrors,fe=function(e){k(!0);var t="",n="",a=window.config.transaction.focO2CApplicableContract||"1",l=window.config.transaction.saleO2CApplicableContract||"1",r=window.config.transaction.o2c||"";"Sale"===e.trfCategory?(t=window.config.transaction.o2cSaleProductSku||"",n=l||"1"):(t=window.config.transaction.o2cFocProductSku||"",n=a||"1");var i={sender:{type:"RESELLERID",id:"operator",accountTypeId:"RESELLER"},receiver:{type:Y,id:e.receiverId,accountTypeId:"RESELLER"},product:{productSKU:t,amount:{value:e.amount,currency:ee}},transactionProperties:{map:{preferredLanguage:te,clientReference:e.externalReferenceNumber,applicableContract:n,instrumentType:e.instrumentType||"",paymentInstrumentDate:(null==e?void 0:e.paymentInstrumentDate)||"",paymentInstrumentNumber:e.paymentInstrumentNumber,remarks:e.remarks}}};(0,T.gD)(i,r).then((function(e){if(0===e.resultCode||203===e.resultCode)return re(e.resultMessage),u.push("/home/transaction/o2c");le(e.resultMessage)})).catch((function(e){return le(e)})).finally((function(){return k(!1)}))},ge=function(){L(!1)},Ee=window.config.openCalendarWith||"year";return a.createElement(a.Fragment,null,a.createElement(E.Z,null,a.createElement(h.Z,{style:{visibility:"hidden"}}),a.createElement(E.Z,{display:"flex",flexDirection:"column"},a.createElement(E.Z,{mb:3,display:"flex",flexDirection:"row",justifyContent:"space-between"},a.createElement(d.Qr,{control:ue,name:"inputDropdown",render:function(e){e.onChange,e.ref;var t=(0,c.Z)(e,["onChange","ref"]);return a.createElement(f.SeamlessDropDown,(0,o.Z)({fullWidth:!0,className:(0,S.default)(r.elements),id:"inputDropdown",label:i("requestType","Request Type"),options:[{key:i("resellerMSISDN"),value:"RESELLERMSISDN"},{key:i("resellerId"),value:"RESELLERID"}],onChange:function(e){var t=e.target.value;$(t)}},t))}}),a.createElement(f.SeamlessInput,{required:!0,fullWidth:!0,name:"receiverId",error:!!se.receiverId,helperText:se.receiverId?i("RESELLERID"===Y?"o2cReceiverIdError":"o2cReceiverMsisdnError"):i("RESELLERID"===Y?"o2cReceiverIdHelperText":"o2cReceiverMsisdnHelperText"),className:(0,S.default)(r.elements),label:i("RESELLERID"===Y?"o2cReceiverId":"o2cReceiverMsisdn"),inputRef:ce({required:!0})}),a.createElement(d.Qr,{control:ue,name:"trfCategory",render:function(e){var t=e.onChange,n=e.ref,l=(0,c.Z)(e,["onChange","ref"]);return a.createElement(f.SeamlessDropDown,(0,o.Z)({fullWidth:!0,className:(0,S.default)(r.elements),id:"trfCategory",label:i("o2cTrfCategory"),error:!!se.trfCategory,helperText:se.trfCategory?i("o2cTrfCategoryError"):i("o2cTrfCategoryHelperText"),options:[{key:"Choose",value:""},{key:i("sale"),value:"Sale"},{key:i("foc"),value:"FOC"}],onChange:function(e){var n=e.target.value,a="Choose"===n?null:n;"FOC"===n?W(!0):"Sale"===n&&W(!1),t(a)},inputRef:n},l))}}),!O&&a.createElement(f.SeamlessInput,{fullWidth:!0,required:!0,name:"instrumentType",error:!!se.instrumentType,helperText:se.instrumentType?i("o2cInstrumentTypeError"):i("o2cInstrumentTypeHelperText"),className:(0,S.default)(r.elements),label:i("o2cInstrumentType"),inputRef:ce({required:!0}),value:ne,disabled:!0}))),!O&&a.createElement(E.Z,{display:"flex",flexDirection:"column"},a.createElement(E.Z,{mb:3,display:"flex",flexDirection:"row",justifyContent:"space-between"},a.createElement(R.M,{utils:C.Z},a.createElement(d.Qr,{control:ue,name:"paymentInstrumentDate",defaultValue:null,render:function(e){var t=e.onChange,n=e.ref,l=(0,c.Z)(e,["onChange","ref"]);return a.createElement(N.e,(0,o.Z)({autoOk:!0,required:!0,className:(0,S.default)(r.keyboardpicker,r.elements),variant:"dialog",format:"dd/MM/yyyy",placeholder:"yyyy-mm-dd",views:["year","month","date"],error:!!se.paymentInstrumentDate,openTo:Ee,margin:"normal",id:"paymentInstrumentDate",label:i("o2cPaymentInstrumentDate"),helperText:se.paymentInstrumentDate?i("o2cPaymentInstrumentDateError"):i("o2cPaymentInstrumentDateHelperText"),onChange:function(e){null!=e&&e.getDate()?(se.paymentInstrumentDate&&pe("paymentInstrumentDate"),t((0,I.Z)(e,"yyyy-MM-dd"))):(de("paymentInstrumentDate",{type:"manual",message:null==e?void 0:e.toString()}),t(e))},maxDate:new Date,KeyboardButtonProps:{"aria-label":"change date"},inputRef:n},l))}})),a.createElement(f.SeamlessInput,{fullWidth:!0,required:!0,name:"paymentInstrumentNumber",error:!!se.paymentInstrumentNumber,helperText:se.paymentInstrumentNumber?i("o2cpaymentInstrumentNumberError"):i("o2cPaymentInstrumentNumberHelperText"),className:(0,S.default)(r.elements),label:i("o2cPaymentInstrumentNumber"),inputRef:ce({required:!0})}),a.createElement(f.SeamlessInput,{required:!0,fullWidth:!0,name:"externalReferenceNumber",error:!!se.externalReferenceNumber,helperText:se.externalReferenceNumber?i("o2cexternalReferenceNumberError"):i("o2cexternalReferenceNumberHelperText"),className:(0,S.default)(r.elements),label:i("o2cexternalReferenceNumber"),inputRef:ce({required:!0})}))),a.createElement(E.Z,{display:"flex",flexDirection:"column"},a.createElement(E.Z,{mb:3,display:"flex",flexDirection:"row",justifyContent:"space-between"},a.createElement(f.SeamlessInput,{type:"number",required:!0,fullWidth:!0,onKeyDown:function(e){return["e","E","+","-"].includes(e.key)&&e.preventDefault()},name:"amount",error:!!se.amount,helperText:se.amount?se.amount.message:i("o2cAmountHelperText"),className:(0,S.default)(r.elements),label:i("o2cAmount"),inputRef:ce({required:!0})}),a.createElement(f.SeamlessInput,{fullWidth:!0,helperText:i("o2cRemarksHelperText"),className:(0,S.default)(r.elements),name:"remarks",multiline:!0,rows:4,rowsMax:4,label:i("o2cRemarks"),inputRef:ce()}))),a.createElement(v.Z,{item:!0,className:(0,S.default)(r.input)},a.createElement(f.SeamlessButton,{className:(0,S.default)(r.btnSpacing),onClick:me((function(e){O||(e.instrumentType=ne),Object.keys(se).length||(U(e.receiverId),J(e),L(!0))})),color:"primary",variant:"contained"},i("validateButton"),P&&a.createElement(Z.Z,{color:"inherit",size:14,thickness:6,style:{marginLeft:"8px"}})),a.createElement(f.SeamlessButton,{onClick:function(){return u.push("/home/transaction/o2c")},className:(0,S.default)(r.btnSpacing),color:"primary",variant:"outlined"},i("resetButton")))),a.createElement(f.SeamlessDialog,{open:A,onClose:ge,className:r.dialogWrapper,maxWidth:"lg",fullWidth:!0},a.createElement(f.SeamlessContainer,{title:i("o2cSaleConfirmationPopupHeading"),description:""},a.createElement(q,{receiverType:Y,receiverData:F,formSubmit:fe,formData:G}),a.createElement(v.Z,{className:r.input},a.createElement(f.SeamlessButton,{variant:"outlined",color:"primary",className:r.btnSpacing,onClick:function(){fe(G)}},i("confirmButton"),P&&a.createElement(Z.Z,{color:"inherit",size:14,thickness:6,style:{marginLeft:"8px"}})),a.createElement(f.SeamlessButton,{variant:"contained",color:"primary",className:r.btnSpacing,onClick:function(){ge()}},i("cancel"))))))};var j=(0,u.Z)((function(e){return(0,m.Z)({elements:{marginRight:e.spacing(2)},keyboardpicker:{width:"100%"},input:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},btnSpacing:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}})}));const K=function(){var e=j(),t=(0,g.useTranslation)().t,n=(0,b.useHistory)(),r=a.useState(!1),i=(0,l.Z)(r,2),u=i[0],m=i[1],R=a.useState("RESELLERMSISDN"),N=(0,l.Z)(R,2),C=N[0],I=N[1],x=(0,y.useSelector)((function(e){return null==e?void 0:e.auth}),y.shallowEqual),P=window.config.currency,k=window.config.language,D=(0,w.Z)(),M=D.showErrorMessage,A=D.showSuccessMessage,L=s.Ry({receiverId:s.Z_().required(t("o2cReceiverIdError")),amount:s.Rx().required(t("o2cAmountError")).positive(t("amountPositive")).typeError(t("o2cAmountError")),remarks:s.Z_().required(t("o2cWithdrawalReasonErrorText"))}),B=(0,d.cI)({mode:"onSubmit",resolver:(0,p.X)(L),reValidateMode:"onChange"}),_=B.register,O=(B.getValues,B.errors),W=B.control,H=B.handleSubmit;return B.reset,B.setError,B.clearErrors,a.createElement(E.Z,null,a.createElement(h.Z,{style:{visibility:"hidden"}}),a.createElement(E.Z,{display:"flex",flexDirection:"column",width:"70%"},a.createElement(E.Z,{mb:3,display:"flex",flexDirection:"row",justifyContent:"space-between"},a.createElement(d.Qr,{control:W,name:"inputDropdown",render:function(n){n.onChange,n.ref;var l=(0,c.Z)(n,["onChange","ref"]);return a.createElement(f.SeamlessDropDown,(0,o.Z)({fullWidth:!0,className:(0,S.default)(e.elements),id:"inputDropdown",label:t("requestType","Request Type"),options:[{key:t("resellerMSISDN"),value:"RESELLERMSISDN"},{key:t("resellerId"),value:"RESELLERID"}],onChange:function(e){var t=e.target.value;I(t)}},l))}}),a.createElement(f.SeamlessInput,{required:!0,fullWidth:!0,name:"receiverId",error:!!O.receiverId,helperText:O.receiverId?t("RESELLERID"===C?"o2cReceiverIdError":"o2cReceiverMsisdnError"):t("RESELLERID"===C?"o2cReceiverIdHelperText":"o2cReceiverMsisdnHelperText"),className:(0,S.default)(e.elements),label:t("RESELLERID"===C?"o2cReceiverId":"o2cReceiverMsisdn"),inputRef:_({required:!0})}),a.createElement(f.SeamlessInput,{type:"number",required:!0,fullWidth:!0,onKeyDown:function(e){return["e","E","+","-"].includes(e.key)&&e.preventDefault()},name:"amount",error:!!O.amount,helperText:O.amount?O.amount.message:t("o2cAmountHelperText"),className:(0,S.default)(e.elements),label:t("o2cWithdrawalAmount"),inputRef:_({required:!0})})),a.createElement(E.Z,{mb:3,display:"flex",flexDirection:"row",justifyContent:"space-between"},a.createElement(f.SeamlessInput,{fullWidth:!0,required:!0,error:!!O.remarks,helperText:O.remarks?t("o2cWithdrawalReasonErrorText"):t("o2cWithdrawalReasonHelperText"),className:(0,S.default)(e.elements),name:"remarks",multiline:!0,rows:4,rowsMax:4,label:t("o2cWithdrawalReason"),inputRef:_({required:!0})})),a.createElement(v.Z,{item:!0,className:(0,S.default)(e.input)},a.createElement(f.SeamlessButton,{className:(0,S.default)(e.btnSpacing),onClick:H((function(e){Object.keys(O).length||function(e){m(!0);var t=window.config.transaction.o2cWithdrawal||"";"Sale"===e.trfCategory?window.config.transaction.o2cSaleProductSku:window.config.transaction.o2cFocProductSku;var a={sender:{type:C,id:e.receiverId,accountTypeId:"RESELLER"},receiver:{type:"RESELLERID",id:x.user.requestedPrincipalId,accountTypeId:"RESELLER"},product:{productSKU:window.config.transaction.o2cWithdrawalProductSku||"",amount:{value:e.amount,currency:P}},transactionProperties:{map:{preferredLanguage:k,applicableContract:"1",PULL_BACK:"0",remarks:e.remarks}}};(0,T.gD)(a,t).then((function(e){if(0===e.resultCode||203===e.resultCode)return A(e.resultMessage),n.push("/home/transaction/o2c");M(e.resultMessage)})).catch((function(e){return M(e)})).finally((function(){return m(!1)}))}(e)})),color:"primary",variant:"contained"},t("submitButton"),u&&a.createElement(Z.Z,{color:"inherit",size:14,thickness:6,style:{marginLeft:"8px"}})),a.createElement(f.SeamlessButton,{onClick:function(){return n.push("/home/transaction/o2c")},className:(0,S.default)(e.btnSpacing),color:"primary",variant:"outlined"},t("resetButton")))))};var G=n(44104),J=n.n(G),X=n(27490),Q=n(56470),Y=n(77162),$=n.n(Y),ee=n(21324),te=n(8629),ne=n(49429),ae=n(38724),le=n(79249),re=n(5806),ie=n(67358),oe=n(41744),ce=n.n(oe),se=n(99688),ue=n(38592),me=n(60552),de=n(73507),pe=n(99781),fe=n(81463),ge=n(66054),Ee=function(e){var t=e.loading,n=e.totalCount,l=e.transactionList,r=(e.timeOrder,e.setTimeOrder),i=e.page,o=e.perPage,c=e.onPageChange,s=e.onPageSizeChange,u=e.pending,m=void 0!==u&&u,d=e.onApproveOrReject,p=e.approveTransaction,f=e.rejectTransaction,E=(0,g.useTranslation)().t,v=J()().checkPermission,Z=[{field:"ersReference",headerName:E("transactionReference"),width:200,filterable:!0,sortable:!1},{field:"senderResellerId",headerName:E("senderResellerId"),width:200,filterable:!1,sortable:!1},{field:"receiverResellerId",headerName:E("receiverResellerId"),width:200,filterable:!1,sortable:!1},{field:"transactionProfile",headerName:E("transactionType"),width:200,filterable:!1,sortable:!1},{field:"transactionAmount",headerName:E("amount"),width:200,filterable:!1,sortable:!1},{field:"state",headerName:E("status"),width:200,filterable:!1,sortable:!1,valueGetter:function(e){return e.row.state?e.row.state:"-"}},{field:"NetPaybleAmount",headerName:E("NetPaybleAmount"),width:200,filterable:!1,sortable:!1,valueGetter:function(e){return e.row.NetPaybleAmount?e.row.NetPaybleAmount:"-"}},{field:"ReceiverResellerName",headerName:E("ReceiverResellerName"),width:200,filterable:!1,sortable:!1,valueGetter:function(e){return e.row.ReceiverResellerName?e.row.ReceiverResellerName:"-"}},{field:"actionDoneBy",headerName:E("approvedAndRejectedBy"),width:200,filterable:!1,sortable:!1,valueGetter:function(e){return e.row.actionDoneBy?e.row.actionDoneBy:"-"}},{field:"timestamp",headerName:E("approvedAndRejectedDate"),width:200,filterable:!1,sortable:!1,valueGetter:function(e){var t=e.row.timestamp;return e.row.actionDoneBy?t.split("T")[0]+" "+t.split("T")[1].slice(0,8):"-"}},{field:"actions",headerName:E("actions"),sortable:!1,filterable:!1,width:200,renderCell:function(e){var t,n,l,r,i;return a.createElement("div",null,a.createElement(ue.Z,{size:"small",color:"primary",variant:"text"},a.createElement(B.ZP,{title:"View"},a.createElement(h.Z,{component:b.Link,to:"/home/transaction/search/".concat(null==e||null===(t=e.row)||void 0===t?void 0:t.ersReference)},a.createElement(me.Z,{fontSize:"small"}))),v(p)&&"Failed"!==(null==e||null===(n=e.row)||void 0===n?void 0:n.state)&&"Completed"!==(null==e||null===(l=e.row)||void 0===l?void 0:l.state)&&!m&&a.createElement(B.ZP,{title:"Approve"},a.createElement(h.Z,{onClick:function(){var t;return d("approve",null==e||null===(t=e.row)||void 0===t?void 0:t.ersReference)}},a.createElement(de.Z,{fontSize:"small",style:{color:fe.Z[400]}}))),v(f)&&"Failed"!==(null==e||null===(r=e.row)||void 0===r?void 0:r.state)&&"Completed"!==(null==e||null===(i=e.row)||void 0===i?void 0:i.state)&&!m&&a.createElement(B.ZP,{title:"Reject"},a.createElement(h.Z,{onClick:function(){var t;return d("reject",null==e||null===(t=e.row)||void 0===t?void 0:t.ersReference)}},a.createElement(pe.Z,{fontSize:"small",style:{color:ge.Z[400]}})))))}}],S=a.useCallback((function(e){var t=e.sortModel[0].sort;r(t)}),[]);return a.createElement(ce(),{onPageSizeChange:function(e){s(e.pageSize)},onPageChange:function(e){c(e.page)},pagination:!0,paginationMode:"server",page:i,pageSize:o,rowCount:n,rows:l,loading:t,columns:Z,getRowId:function(e){return null==e?void 0:e.ersReference},columnBuffer:3,sortingMode:"server",onSortModelChange:S})};const ve=a.memo(Ee,(function(e,t){return e.transactionList===t.transactionList}));var he=(0,u.Z)((function(e){var t,n;return(0,m.Z)({root:{width:"100%",marginBottom:e.spacing(2),marginLeft:e.spacing(2)},rowSpacing2:{marginTop:e.spacing(3)},rowSpacing:{marginBottom:e.spacing(.5)},fullWidth:{width:"100%"},progress:{marginLeft:"8px"},dateField:{marginTop:e.spacing(2),"& .MuiInput-underline:before":{borderBottomWidth:"2px"}},blurBackDrop:{backdropFilter:"blur(2px)",backgroundColor:"rgba(0, 0, 0, 0.2)"},dialogHeader:{fontSize:18,fontWeight:"bold",align:"left",backgroundColor:e.palette.primary.main,color:null==e||null===(t=e.palette)||void 0===t||null===(n=t.common)||void 0===n?void 0:n.white},btnSpacing:{marginLeft:e.spacing(1),marginRight:e.spacing(2),marginTop:e.spacing(2)}})}));const Ze=function(){var e,t,n=he(),r=(0,g.useTranslation)().t,i=new Date,c=a.useState(null),s=(0,l.Z)(c,2),u=s[0],m=s[1],d=a.useState(null),p=(0,l.Z)(d,2),E=p[0],h=p[1],Z=a.useState(!1),y=(0,l.Z)(Z,2),b=y[0],I=y[1],x=a.useState(!1),P=(0,l.Z)(x,2),k=P[0],D=P[1],M=a.useState(0),A=(0,l.Z)(M,2),L=A[0],B=A[1],_=a.useState("desc"),O=(0,l.Z)(_,2),W=O[0],H=O[1],F=a.useState([]),q=(0,l.Z)(F,2),z=q[0],U=q[1],j=a.useState(""),K=(0,l.Z)(j,2),G=K[0],J=K[1],Y=a.useState(""),ce=(0,l.Z)(Y,2),ue=ce[0],me=ce[1],de=a.useState(""),pe=(0,l.Z)(de,2),fe=pe[0],ge=pe[1],Ee=a.useState(!1),Ze=(0,l.Z)(Ee,2),Se=Ze[0],ye=Ze[1],be=(0,w.Z)(),Te=be.showErrorMessage,we=be.showSuccessMessage,Re=(be.showInfoMessage,be.showWarningMessage,a.useState(!1)),Ne=(0,l.Z)(Re,2),Ce=Ne[0],Ie=Ne[1],xe=(0,V.Z)(),Pe=xe.userId,ke=xe.resellerPath,De=null==xe||null===(e=xe.info)||void 0===e||null===(t=e.users)||void 0===t?void 0:t.filter((function(e){return e.userId.toLowerCase()===Pe.toLowerCase()}))[0].roleId,Me=window.config.transaction.approvalTimeout,Ae=(0,oe.useServerTable)({page:0,perPage:20,order:"asc",orderBy:"timestamp",filter:{}}),Le=function(){var e={request:{size:Ae.perPage,page:Ae.page,role:b?"":De,userId:b?Pe:"",reportName:b?"fetch_processed_transactions":"fetch_pending_transactions",resellerPath:b?ke:"",fromDate:u?(null==u?void 0:u.toISOString().slice(0,10))+"T00:00:00.000Z":(null==i?void 0:i.toISOString().slice(0,10))+"T00:00:00.000Z",toDate:E?(null==E?void 0:E.toISOString().slice(0,10))+"T23:59:59.000Z":(null==i?void 0:i.toISOString().slice(0,10))+"T23:59:59.000Z",productSKU:window.config.transaction.o2cPendingTransaction}};D(!0),(0,T.JN)(e).then((function(e){0==(null==e?void 0:e.resultCode)?null!=e&&e.list?(B(null==e?void 0:e.totalRecordCount),U(null==e?void 0:e.list),0==(null==e?void 0:e.list.length)?Ie(!0):Ie(!1)):(U([]),Ie(!0)):(Te(null==e?void 0:e.resultDescription),Ie(!0))})).catch((function(e){return Te(null==e?void 0:e.resultDescription)})),D(!1)};a.useEffect((function(){Le()}),[Ae.page,Ae.perPage]);var Be=window.config.openCalendarWith||"year";return a.createElement("div",{className:n.root},a.createElement(v.Z,{container:!0,spacing:2},a.createElement(v.Z,{item:!0,sm:3},a.createElement(R.M,{utils:C.Z},a.createElement(N.e,{className:(0,S.default)(n.dateField),fullWidth:!0,disableFuture:!0,views:["year","month","date"],openTo:Be,format:"yyyy-MM-dd",placeholder:"yyyy-mm-dd",autoOk:!0,id:"from",label:r("from"),value:u,error:!1,onChange:function(e){m(e)},KeyboardButtonProps:{"aria-label":"change date"}}))),a.createElement(v.Z,{item:!0,sm:3},a.createElement(R.M,{utils:C.Z},a.createElement(N.e,{className:(0,S.default)(n.dateField),fullWidth:!0,disableFuture:!0,views:["year","month","date"],openTo:Be,format:"yyyy-MM-dd",placeholder:"yyyy-mm-dd",autoOk:!0,id:"to",label:r("to"),value:E,error:!1,onChange:function(e){h(e)},KeyboardButtonProps:{"aria-label":"change date"}}))),a.createElement(v.Z,{item:!0,sm:3,className:n.rowSpacing2},a.createElement(re.Z,{control:a.createElement(ee.Z,{checked:b,onChange:function(e){return I(e.target.checked)},inputProps:{"aria-label":"primary checkbox"}}),label:r("showProcessedTransactions")}))),a.createElement(v.Z,{container:!0,spacing:2},a.createElement(f.SeamlessButton,{className:(0,S.default)(n.btnSpacing),disabled:k,onClick:function(){Le()},color:"primary",variant:"contained"},r("submit")),a.createElement(f.SeamlessButton,{className:(0,S.default)(n.btnSpacing),onClick:function(){m(null),h(null),Ie(!1),U([]),I(!1)},color:"primary",variant:"outlined"},r("resetSearch"))),k?a.createElement(ie.Z,{style:{marginTop:30}}):a.createElement(v.Z,{container:!0,spacing:3,className:n.rowSpacing2},Ce?a.createElement(se.Z,{severity:"info"},r("noTransactionsFoundWithinTheseSearchParameters")):a.createElement("div",{style:{height:700,width:"100%"}},a.createElement(ve,(0,o.Z)({approveTransaction:X.R.APPROVE_O2C_TRANSACTION,rejectTransaction:X.R.REJECT_O2C_TRANSACTION,loading:k,totalCount:L,transactionList:z,timeOrder:W,setTimeOrder:H},Ae,{pending:b,onApproveOrReject:function(e,t){J(e),me(t),ye(!0)}})))),a.createElement(te.Z,{open:Se,keepMounted:!0,maxWidth:"sm",fullWidth:!0,onClose:function(){ye(!1)},disableBackdropClick:!0,BackdropProps:{classes:{root:n.blurBackDrop}}},a.createElement(le.Z,{className:n.dialogHeader,color:"primary",disableTypography:!0},r("approve"===G?"approveTransaction":"rejectTransaction")),a.createElement(ae.Z,null,a.createElement(v.Z,{item:!0,xs:12},a.createElement(f.SeamlessInput,{multiline:!0,rows:4,required:!0,fullWidth:!0,value:fe,onChange:function(e){var t;return ge(null==e||null===(t=e.target)||void 0===t?void 0:t.value)},label:r("comment")}))),a.createElement(ne.Z,null,a.createElement(f.SeamlessButton,{variant:"outlined",color:"primary",onClick:function(){ye(!1),ge("")}},r("cancel")),a.createElement(f.SeamlessButton,{variant:"contained",color:"primary",onClick:function(){var e,t;e={ersReference:ue,comment:fe},t=window.config.transaction.o2c||"",D(!0),"approve"===G?(0,T.hr)(e,t).then((function(e){0==(null==e?void 0:e.resultCode)||203===(null==e?void 0:e.resultCode)?we((null==e?void 0:e.ersReference)+": APPROVED "):Te(null==e?void 0:e.resultMessage)})).catch((function(e){return Te(null==e?void 0:e.resultMessage)})).finally((function(){ye(!1),ge("")})):"reject"===G&&(0,T.WD)(e,t).then((function(e){100==(null==e?void 0:e.resultCode)?we(null==e?void 0:e.resultMessage):Te(null==e?void 0:e.resultMessage)})).catch((function(e){return Te(null==e?void 0:e.resultMessage)})).finally((function(){ye(!1),ge("")})),setTimeout((0,Q.Z)($().mark((function e(){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le();case 2:D(!1);case 3:case"end":return e.stop()}}),e)}))),Me)},disabled:""===fe||k},r("approve"===G?"approve":"reject")))))},Se=function(){var e=a.useState("o2c"),t=(0,l.Z)(e,2),n=t[0],o=t[1],c=J()().AccessControlled,s=(0,g.useTranslation)().t,d=(0,u.Z)((function(e){return(0,m.Z)({toggle:{"& .Mui-selected":{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},"& .Mui-selected:hover":{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText}}})}))();return a.createElement(a.Fragment,null,a.createElement(r.Z,{color:"primary",value:n,exclusive:!0,onChange:function(e,t){null!==t&&o(t)},className:d.toggle},a.createElement(i.Z,{value:"o2c"},s("o2c")),a.createElement(i.Z,{value:"o2c_withdrawal"},s("o2cWithdrawal")),a.createElement(i.Z,{value:"o2c_approval"},s("o2cApprovalTab"))),"o2c"===n&&a.createElement(c,{feature:X.R.CREATE_O2C},a.createElement(U,null)),"o2c_withdrawal"===n&&a.createElement(c,{feature:X.R.O2C_WITHDRAWAL},a.createElement(K,null)),"o2c_approval"===n&&a.createElement(c,{feature:X.R.O2C_APPROVAL_LIST},a.createElement(Ze,null)))},ye=function(){var e=J()().AccessControlled;return a.createElement(e,{feature:X.R.O2C},a.createElement(Se,null))};var be=(0,u.Z)((function(e){return(0,m.Z)({spacingTop:{marginTop:e.spacing(3)},element:{margin:e.spacing(1),padding:"".concat(e.spacing(1),"px ").concat(e.spacing(1.5),"px"),borderRadius:e.shape.borderRadius},rowSpacing:{marginBottom:e.spacing(1.5)},colHead:{fontWeight:"bolder",fontSize:"14px",borderBottom:"1px solid"}})}));const Te=function(e){var t,n,r,i,o,c,s,u,m,d=e.receiverType,p=e.receiverData,f=(e.formSubmit,e.formData),E=(0,g.useTranslation)().t,h=a.useState(!1),Z=(0,l.Z)(h,2),S=Z[0],y=Z[1],R=a.useState({}),N=(0,l.Z)(R,2),C=N[0],F=N[1],q=a.useState({}),z=(0,l.Z)(q,2),U=z[0],j=z[1],K=a.useState({}),G=(0,l.Z)(K,2),J=G[0],X=G[1],Q=a.useState({}),Y=(0,l.Z)(Q,2),$=Y[0],ee=Y[1],te=a.useState({}),ne=(0,l.Z)(te,2),ae=ne[0],le=ne[1],re=((0,b.useHistory)(),(0,V.Z)()),ie=(0,w.Z)().showErrorMessage,oe=be();return a.useEffect((function(){y(!0),(0,T.EZ)(d,p).then((function(e){var t,n,a,l,r,i,o,c,s,u;F(null==e?void 0:e.resellerInfo),ee(null==e||null===(t=e.resellerInfo)||void 0===t||null===(n=t.additionalFields)||void 0===n?void 0:n.filter((function(e){return"geographyCode"===e.name}))),le(null==e||null===(a=e.resellerInfo)||void 0===a||null===(l=a.additionalFields)||void 0===l?void 0:l.filter((function(e){return"domainName"===e.name}))),(null==e||null===(r=e.resellerInfo)||void 0===r||null===(i=r.resellerData)||void 0===i?void 0:i.contractId)&&(0,T.gc)(null==e||null===(o=e.resellerInfo)||void 0===o||null===(c=o.resellerData)||void 0===c?void 0:c.contractId).then((function(e){j(e)})).catch((function(e){return ie(e)}));var m;m="FOC"===f.trfCategory?window.config.transaction.c2cFOCValidationProductSku||"":window.config.transaction.c2cSaleProductSku||"";var d={referenceNumber:"",profileId:f.trfCategory,products:[{productSku:m,itemCount:1,amount:f.amount,sender:re.requestedPrincipalId,senderWallet:"RESELLER",receiver:null==e||null===(s=e.resellerInfo)||void 0===s||null===(u=s.resellerData)||void 0===u?void 0:u.resellerId,receiverWallet:"RESELLER",applicableContract:1,offerPrice:0}]};(0,T.Kd)(d).then((function(e){X(null==e?void 0:e.products)})).catch((function(e){return ie(e)}))})).catch((function(e){return ie(e)})).finally((function(){return y(!1)}))}),[]),a.createElement(a.Fragment,null,S?a.createElement(W.Z,null):a.createElement(a.Fragment,null,a.createElement(v.Z,{container:!0,className:oe.spacingTop},a.createElement(v.Z,{container:!0},a.createElement(v.Z,{container:!0,spacing:2,className:oe.rowSpacing},a.createElement(O.Z,{title:E("channelDomain"),value:ae?null===(t=ae[0])||void 0===t?void 0:t.value:E("emptyValueMark"),headingProps:{xs:6,sm:6,lg:2,md:3},valueProps:{xs:6,sm:6,lg:3,md:3}}),a.createElement(O.Z,{title:E("name"),value:null!=C&&null!==(n=C.resellerData)&&void 0!==n&&n.resellerName?null==C||null===(r=C.resellerData)||void 0===r?void 0:r.resellerName:E("emptyValueMark"),headingProps:{xs:6,sm:6,lg:2,md:3},valueProps:{xs:6,sm:6,lg:3,md:3}})),a.createElement(v.Z,{container:!0,spacing:2,className:oe.rowSpacing},a.createElement(O.Z,{title:E("commissionProfile"),value:null==U?void 0:U.importId,headingProps:{xs:6,sm:6,lg:2,md:3},valueProps:{xs:6,sm:6,lg:3,md:3}}),a.createElement(O.Z,{title:E("geographicalDomain"),value:$?null===(i=$[0])||void 0===i?void 0:i.value:E("emptyValueMark"),headingProps:{xs:6,sm:6,lg:2,md:3},valueProps:{xs:6,sm:6,lg:3,md:3}})),a.createElement(v.Z,{container:!0,spacing:2,className:oe.rowSpacing},a.createElement(O.Z,{title:E("resellerType"),value:null!=C&&null!==(o=C.resellerData)&&void 0!==o&&o.resellerTypeName?null==C||null===(c=C.resellerData)||void 0===c?void 0:c.resellerTypeName:E("emptyValueMark"),headingProps:{xs:6,sm:6,lg:2,md:3},valueProps:{xs:6,sm:6,lg:3,md:3}}),a.createElement(O.Z,{title:E("msisdn"),value:null!=C&&null!==(s=C.resellerData)&&void 0!==s&&s.resellerMSISDN?null==C||null===(u=C.resellerData)||void 0===u?void 0:u.resellerMSISDN:E("emptyValueMark"),headingProps:{xs:6,sm:6,lg:2,md:3},valueProps:{xs:6,sm:6,lg:3,md:3}})),a.createElement(v.Z,{container:!0,spacing:2,className:oe.rowSpacing},a.createElement(O.Z,{title:E("transactionDate"),value:(0,I.Z)(new Date,"yyyy-MM-dd"),headingProps:{xs:6,sm:6,lg:2,md:3},valueProps:{xs:6,sm:6,lg:3,md:3}})))),a.createElement("div",{style:{height:"auto",width:"100%"},className:oe.spacingTop},a.createElement(M.Z,{component:x.Z},a.createElement(P.Z,null,a.createElement(A.Z,{style:{borderBottom:1}},a.createElement(L.Z,null,a.createElement(D.Z,{className:oe.colHead},E("productName")),a.createElement(D.Z,{className:oe.colHead},E("c2cSaleProductQtyTitle")),a.createElement(D.Z,{className:oe.colHead},a.createElement("span",null,E("c2cSaleTax1RateTitle"),a.createElement(B.ZP,{title:E("c2cSalePopupRateText")},a.createElement(H.Z,{fontSize:"inherit"})))),a.createElement(D.Z,{className:oe.colHead},a.createElement("span",null,E("c2cSaleTax1AmountTitle"),a.createElement(B.ZP,{title:E("c2cSalePopupAmountText")},a.createElement(H.Z,{fontSize:"inherit"})))),a.createElement(D.Z,{className:oe.colHead},a.createElement("span",null,E("c2cSaleTax2RateTitle"),a.createElement(B.ZP,{title:E("c2cSalePopupRateText")},a.createElement(H.Z,{fontSize:"inherit"})))),a.createElement(D.Z,{className:oe.colHead},a.createElement("span",null,E("c2cSaleTax2AmountTitle"),a.createElement(B.ZP,{title:E("c2cSalePopupAmountText")},a.createElement(H.Z,{fontSize:"inherit"})))),a.createElement(D.Z,{className:oe.colHead},a.createElement("span",null,E("c2cSaleCommissionRateTitle"),a.createElement(B.ZP,{title:E("c2cSalePopupRateText")},a.createElement(H.Z,{fontSize:"inherit"})))),a.createElement(D.Z,{className:oe.colHead},a.createElement("span",null,E("c2cSaleCommissionAmountTitle"),a.createElement(B.ZP,{title:E("c2cSalePopupAmountText")},a.createElement(H.Z,{fontSize:"inherit"})))),a.createElement(D.Z,{className:oe.colHead},a.createElement("span",null,E("c2cSaleTDSRateTitle"),a.createElement(B.ZP,{title:E("c2cSalePopupRateText")},a.createElement(H.Z,{fontSize:"inherit"})))),a.createElement(D.Z,{className:oe.colHead},a.createElement("span",null,E("c2cSaleTDSAmountTitle"),a.createElement(B.ZP,{title:E("c2cSalePopupAmountText")},a.createElement(H.Z,{fontSize:"inherit"})))),a.createElement(D.Z,{className:oe.colHead},E("c2cSalePayableTitle")),a.createElement(D.Z,{className:oe.colHead},E("c2cSaleNetPayableTitle")))),a.createElement(k.Z,null,J&&(null===(m=J[0])||void 0===m?void 0:m.transactionRows.map((function(e,t){var n,l,r,i,o,c,s,u,m,d,p,g,v,h,Z,S,y,b,T,w,R,N,C,I,x,P,k,M,A,B,_,O;if(window.config.transaction.c2cSalePopupEligibleTags.includes(null==e?void 0:e.accountId))return _="percentage"===(null==e||null===(n=e.fields)||void 0===n?void 0:n.commissionValueType).toLowerCase()?"PCT":"absolute"===(null==e||null===(l=e.fields)||void 0===l?void 0:l.commissionValueType).toLowerCase()?"AMT":"",O="percentage"===(null==e||null===(r=e.fields)||void 0===r?void 0:r.commissionValueType).toLowerCase()?parseInt(null==e||null===(i=e.fields)||void 0===i?void 0:i.commissionValueExpression)/100:null==e||null===(o=e.fields)||void 0===o?void 0:o.commissionValueExpression,a.createElement(L.Z,{key:t},a.createElement(D.Z,null,null===(c=J[0])||void 0===c?void 0:c.eanCode),a.createElement(D.Z,null,null==f?void 0:f.amount),a.createElement(D.Z,null,(null==e?void 0:e.tag)===(null===(s=window)||void 0===s||null===(u=s.config)||void 0===u||null===(m=u.transaction)||void 0===m?void 0:m.c2cPopUpTAXTagName)?O+" "+_:E("emptyValueMark")),a.createElement(D.Z,null,(null==e?void 0:e.tag)===(null===(d=window)||void 0===d||null===(p=d.config)||void 0===p||null===(g=p.transaction)||void 0===g?void 0:g.c2cPopUpTAXTagName)?null==e?void 0:e.amount:E("emptyValueMark")),a.createElement(D.Z,null,(null==e?void 0:e.tag)===(null===(v=window)||void 0===v||null===(h=v.config)||void 0===h||null===(Z=h.transaction)||void 0===Z?void 0:Z.c2cPopUpTAX2TagName)?O+" "+_:E("emptyValueMark")),a.createElement(D.Z,null,(null==e?void 0:e.tag)===(null===(S=window)||void 0===S||null===(y=S.config)||void 0===y||null===(b=y.transaction)||void 0===b?void 0:b.c2cPopUpTAX2TagName)?null==e?void 0:e.amount:E("emptyValueMark")),a.createElement(D.Z,null,(null==e?void 0:e.tag)===(null===(T=window)||void 0===T||null===(w=T.config)||void 0===w||null===(R=w.transaction)||void 0===R?void 0:R.c2cPopUpCOMISSIONTagName)?O+" "+_:E("emptyValueMark")),a.createElement(D.Z,null,(null==e?void 0:e.tag)===(null===(N=window)||void 0===N||null===(C=N.config)||void 0===C||null===(I=C.transaction)||void 0===I?void 0:I.c2cPopUpCOMISSIONTagName)?null==e?void 0:e.amount:E("emptyValueMark")),a.createElement(D.Z,null,(null==e?void 0:e.tag)===(null===(x=window)||void 0===x||null===(P=x.config)||void 0===P||null===(k=P.transaction)||void 0===k?void 0:k.c2cPopUpTDSTagName)?O+" "+_:E("emptyValueMark")),a.createElement(D.Z,null,(null==e?void 0:e.tag)===(null===(M=window)||void 0===M||null===(A=M.config)||void 0===A||null===(B=A.transaction)||void 0===B?void 0:B.c2cPopUpTDSTagName)?null==e?void 0:e.amount:E("emptyValueMark")),a.createElement(D.Z,null,((null==f?void 0:f.amount)+(null==e?void 0:e.amount)).toFixed(2)),a.createElement(D.Z,null,((null==f?void 0:f.amount)+(null==e?void 0:e.amount)).toFixed(2)))}))))))),a.createElement("div",{className:oe.spacingTop},a.createElement(v.Z,{container:!0,spacing:2,className:oe.rowSpacing},a.createElement(O.Z,{title:E("remarks"),value:null==f?void 0:f.remarks,headingProps:{xs:6,sm:6,lg:2,md:3},valueProps:{xs:6,sm:6,lg:3,md:3}}))),a.createElement("div",{style:{height:"auto",width:"100%"},className:oe.spacingTop},a.createElement(_.Z,{variant:"h6"},E("paymentDetails")),a.createElement(M.Z,{component:x.Z},a.createElement(P.Z,null,a.createElement(A.Z,{style:{borderBottom:1}},a.createElement(L.Z,null,a.createElement(D.Z,{className:oe.colHead},E("c2cInstrumentType")),a.createElement(D.Z,{className:oe.colHead},E("c2cPaymentInstrumentNumber")),a.createElement(D.Z,{className:oe.colHead},E("c2cPaymentInstrumentDate")),a.createElement(D.Z,{className:oe.colHead},E("c2cAmount")))),a.createElement(k.Z,null,a.createElement(L.Z,null,a.createElement(D.Z,null,null!=f&&f.instrumentType?null==f?void 0:f.instrumentType:E("emptyValueMark")),a.createElement(D.Z,null,null!=f&&f.paymentInstrumentNumber?null==f?void 0:f.paymentInstrumentNumber:E("emptyValueMark")),a.createElement(D.Z,null,null!=f&&f.paymentInstrumentDate?null==f?void 0:f.paymentInstrumentDate:E("emptyValueMark")),a.createElement(D.Z,null,null!=f&&f.amount?(null==f?void 0:f.amount).toFixed(2):E("emptyValueMark")))))))))};var we=(0,u.Z)((function(e){return(0,m.Z)({elements:{marginRight:e.spacing(2)},keyboardpicker:{width:"100%"},input:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},btnSpacing:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},dialogWrapper:{"& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}}})}));const Re=function(){var e,t,n,r=we(),i=(0,g.useTranslation)().t,u=(0,b.useHistory)(),m=a.useState(!1),x=(0,l.Z)(m,2),P=x[0],k=x[1],D=a.useState(!1),M=(0,l.Z)(D,2),A=M[0],L=M[1],B=a.useState("RESELLERMSISDN"),_=(0,l.Z)(B,2),O=_[0],W=_[1],H=a.useState(""),V=(0,l.Z)(H,2),F=V[0],q=V[1],z=a.useState(),U=(0,l.Z)(z,2),j=U[0],K=U[1],G=(0,y.useSelector)((function(e){return null==e?void 0:e.auth}),y.shallowEqual),J=window.config.currency,X=window.config.language,Q=(null===(e=window)||void 0===e||null===(t=e.config)||void 0===t||null===(n=t.transaction)||void 0===n?void 0:n.instrumentType)||"Cash",Y=(0,w.Z)(),$=Y.showErrorMessage,ee=Y.showSuccessMessage,te=s.Ry({receiverId:s.Z_().required(i("c2cReceiverIdError")),amount:s.Rx().required(i("c2cAmountError")).positive(i("amountPositive")).typeError(i("c2cAmountError"))}),ne=(0,d.cI)({mode:"onSubmit",resolver:(0,p.X)(te),reValidateMode:"onChange"}),ae=ne.register,le=(ne.getValues,ne.errors),re=ne.control,ie=ne.handleSubmit,oe=(ne.reset,ne.setError),ce=ne.clearErrors,se=function(e){k(!0);var t=window.config.transaction.c2cApplicableContract,n=window.config.transaction.c2c||"",a={sender:{type:"RESELLERID",id:G.user.requestedPrincipalId,accountTypeId:"RESELLER"},receiver:{type:O,id:e.receiverId,accountTypeId:"RESELLER"},product:{productSKU:window.config.transaction.c2cRequestProductSku||"",amount:{value:e.amount,currency:J}},transactionProperties:{map:{preferredLanguage:X,clientReference:e.externalReferenceNumber,applicableContract:t,instrumentType:e.instrumentType,paymentInstrumentDate:(null==e?void 0:e.paymentInstrumentDate)||"",paymentInstrumentNumber:e.paymentInstrumentNumber,remarks:e.remarks}}};(0,T.gD)(a,n).then((function(e){if(0===e.resultCode||203===e.resultCode)return ee(e.resultMessage),u.push("/home/transaction/c2c");$(e.resultMessage)})).catch((function(e){return $(e)})).finally((function(){return k(!1)}))},ue=function(){L(!1)},me=window.config.openCalendarWith||"year";return a.createElement(a.Fragment,null,a.createElement(E.Z,null,a.createElement(h.Z,{style:{visibility:"hidden"}}),a.createElement(E.Z,{display:"flex",flexDirection:"column"},a.createElement(E.Z,{mb:3,display:"flex",flexDirection:"row",justifyContent:"space-between"},a.createElement(d.Qr,{control:re,name:"inputDropdown",render:function(e){e.onChange,e.ref;var t=(0,c.Z)(e,["onChange","ref"]);return a.createElement(f.SeamlessDropDown,(0,o.Z)({fullWidth:!0,className:(0,S.default)(r.elements),id:"inputDropdown",label:i("requestType","Request Type"),options:[{key:i("resellerMSISDN"),value:"RESELLERMSISDN"},{key:i("resellerId"),value:"RESELLERID"}],onChange:function(e){var t=e.target.value;W(t)}},t))}}),a.createElement(f.SeamlessInput,{required:!0,fullWidth:!0,name:"receiverId",error:!!le.receiverId,helperText:le.receiverId?i("RESELLERID"===O?"c2cReceiverIdError":"c2cReceiverMsisdnError"):i("RESELLERID"===O?"c2cReceiverIdHelperText":"c2cReceiverMsisdnHelperText"),className:(0,S.default)(r.elements),label:i("RESELLERID"===O?"c2cReceiverId":"c2cReceiverMsisdn"),inputRef:ae({required:!0})}),a.createElement(f.SeamlessInput,{type:"number",required:!0,fullWidth:!0,onKeyDown:function(e){return["e","E","+","-"].includes(e.key)&&e.preventDefault()},name:"amount",error:!!le.amount,helperText:le.amount?le.amount.message:i("c2cAmountHelperText"),className:(0,S.default)(r.elements),label:i("c2cAmount"),inputRef:ae({required:!0})}),a.createElement(f.SeamlessInput,{fullWidth:!0,name:"instrumentType",helperText:i("c2cInstrumentTypeHelperText"),className:(0,S.default)(r.elements),label:i("c2cInstrumentType"),inputRef:ae(),value:Q,disabled:!0}))),a.createElement(E.Z,{display:"flex",flexDirection:"column"},a.createElement(E.Z,{mb:3,display:"flex",flexDirection:"row",justifyContent:"space-between"},a.createElement(R.M,{utils:C.Z},a.createElement(d.Qr,{control:re,name:"paymentInstrumentDate",defaultValue:null,render:function(e){var t=e.onChange,n=e.ref,l=(0,c.Z)(e,["onChange","ref"]);return a.createElement(N.e,(0,o.Z)({autoOk:!0,className:(0,S.default)(r.keyboardpicker,r.elements),views:["year","month","date"],openTo:me,variant:"dialog",format:"dd/MM/yyyy",placeholder:"yyyy-mm-dd",error:!1,margin:"normal",id:"paymentInstrumentDate",label:i("c2cPaymentInstrumentDate"),helperText:i("c2cPaymentInstrumentDateHelperText"),onChange:function(e){null!=e&&e.getDate()?(le.paymentInstrumentDate&&ce("paymentInstrumentDate"),t((0,I.Z)(e,"yyyy-MM-dd"))):(oe("paymentInstrumentDate",{type:"manual",message:null==e?void 0:e.toString()}),t(e))},maxDate:new Date,KeyboardButtonProps:{"aria-label":"change date"},inputRef:n},l))}})),a.createElement(f.SeamlessInput,{fullWidth:!0,name:"paymentInstrumentNumber",helperText:i("c2cPaymentInstrumentNumberHelperText"),className:(0,S.default)(r.elements),label:i("c2cPaymentInstrumentNumber"),inputRef:ae()}),a.createElement(f.SeamlessInput,{fullWidth:!0,name:"externalReferenceNumber",helperText:i("c2cexternalReferenceNumberHelperText"),className:(0,S.default)(r.elements),label:i("c2cexternalReferenceNumber"),inputRef:ae()}))),a.createElement(E.Z,{display:"flex",flexDirection:"column"},a.createElement(E.Z,{mb:3,display:"flex",flexDirection:"row",width:"50%",justifyContent:"space-between"},a.createElement(f.SeamlessInput,{fullWidth:!0,helperText:i("c2cRemarksHelperText"),className:(0,S.default)(r.elements),name:"remarks",multiline:!0,rows:4,rowsMax:4,label:i("c2cRemarks"),inputRef:ae()}))),a.createElement(v.Z,{item:!0,className:(0,S.default)(r.input)},a.createElement(f.SeamlessButton,{className:(0,S.default)(r.btnSpacing),onClick:ie((function(e){e.instrumentType=Q,Object.keys(le).length||(q(e.receiverId),K(e),L(!0))})),color:"primary",variant:"contained"},i("validate"),P&&a.createElement(Z.Z,{color:"inherit",size:14,thickness:6,style:{marginLeft:"8px"}})),a.createElement(f.SeamlessButton,{onClick:function(){return u.push("/home/transaction/c2c")},className:(0,S.default)(r.btnSpacing),color:"primary",variant:"outlined"},i("resetButton")))),a.createElement(f.SeamlessDialog,{open:A,onClose:ue,className:r.dialogWrapper,maxWidth:"lg",fullWidth:!0},a.createElement(f.SeamlessContainer,{title:i("c2cSaleConfirmationPopupHeading"),description:""},a.createElement(Te,{receiverType:O,receiverData:F,formSubmit:se,formData:j}),a.createElement(v.Z,{className:r.input},a.createElement(f.SeamlessButton,{variant:"outlined",color:"primary",className:r.btnSpacing,onClick:function(){se(j)}},i("confirm"),P&&a.createElement(Z.Z,{color:"inherit",size:14,thickness:6,style:{marginLeft:"8px"}})),a.createElement(f.SeamlessButton,{variant:"contained",color:"primary",className:r.btnSpacing,onClick:function(){ue()}},i("cancel"))))))};var Ne=(0,u.Z)((function(e){return(0,m.Z)({elements:{marginRight:e.spacing(2)},keyboardpicker:{width:"100%"},input:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},btnSpacing:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}})}));const Ce=function(){var e=Ne(),t=(0,g.useTranslation)().t,n=(0,b.useHistory)(),r=a.useState(!1),i=(0,l.Z)(r,2),u=i[0],m=i[1],R=a.useState("RESELLERMSISDN"),N=(0,l.Z)(R,2),C=N[0],I=N[1],x=(0,y.useSelector)((function(e){return null==e?void 0:e.auth}),y.shallowEqual),P=window.config.currency,k=window.config.language,D=(0,w.Z)(),M=D.showErrorMessage,A=D.showSuccessMessage,L=s.Ry({receiverId:s.Z_().required(t("c2cReceiverIdError")),amount:s.Rx().required(t("c2cAmountError")).positive(t("amountPositive")).typeError(t("c2cAmountError"))}),B=(0,d.cI)({mode:"onSubmit",resolver:(0,p.X)(L),reValidateMode:"onChange"}),_=B.register,O=(B.getValues,B.errors),W=B.control,H=B.handleSubmit;return B.reset,B.setError,B.clearErrors,a.createElement(E.Z,null,a.createElement(h.Z,{style:{visibility:"hidden"}}),a.createElement(E.Z,{display:"flex",flexDirection:"column",width:"70%"},a.createElement(E.Z,{mb:3,display:"flex",flexDirection:"row",justifyContent:"space-between"},a.createElement(d.Qr,{control:W,name:"inputDropdown",render:function(n){n.onChange,n.ref;var l=(0,c.Z)(n,["onChange","ref"]);return a.createElement(f.SeamlessDropDown,(0,o.Z)({fullWidth:!0,className:(0,S.default)(e.elements),id:"inputDropdown",label:t("requestType","Request Type"),options:[{key:t("resellerMSISDN"),value:"RESELLERMSISDN"},{key:t("resellerId"),value:"RESELLERID"}],onChange:function(e){var t=e.target.value;I(t)}},l))}}),a.createElement(f.SeamlessInput,{required:!0,fullWidth:!0,name:"receiverId",error:!!O.receiverId,helperText:O.receiverId?t("RESELLERID"===C?"o2cReceiverIdError":"o2cReceiverMsisdnError"):t("RESELLERID"===C?"o2cReceiverIdHelperText":"o2cReceiverMsisdnHelperText"),className:(0,S.default)(e.elements),label:t("RESELLERID"===C?"o2cReceiverId":"o2cReceiverMsisdn"),inputRef:_({required:!0})}),a.createElement(f.SeamlessInput,{type:"number",required:!0,fullWidth:!0,onKeyDown:function(e){return["e","E","+","-"].includes(e.key)&&e.preventDefault()},name:"amount",error:!!O.amount,helperText:O.amount?O.amount.message:t("c2cAmountHelperText"),className:(0,S.default)(e.elements),label:t("c2cWithdrawalAmount"),inputRef:_({required:!0})})),a.createElement(E.Z,{mb:3,display:"flex",flexDirection:"row",justifyContent:"space-between"},a.createElement(f.SeamlessInput,{fullWidth:!0,error:!!O.remarks,helperText:O.remarks?t("c2cWithdrawalReasonErrorText"):t("c2cWithdrawalReasonHelperText"),className:(0,S.default)(e.elements),name:"remarks",multiline:!0,rows:4,rowsMax:4,label:t("c2cWithdrawalReason"),inputRef:_({required:!0})})),a.createElement(v.Z,{item:!0,className:(0,S.default)(e.input)},a.createElement(f.SeamlessButton,{className:(0,S.default)(e.btnSpacing),onClick:H((function(e){Object.keys(O).length||function(e){m(!0);var t=window.config.transaction.c2cWithdrawal||"",a={sender:{type:C,id:e.receiverId,accountTypeId:"RESELLER"},receiver:{type:"RESELLERID",id:x.user.requestedPrincipalId,accountTypeId:"RESELLER"},product:{productSKU:window.config.transaction.c2cWithdrawalRequestProductSku||"",amount:{value:e.amount,currency:P}},transactionProperties:{map:{preferredLanguage:k,applicableContract:"1",PULL_BACK:"0",remarks:e.remarks}}};(0,T.gD)(a,t).then((function(e){if(0===e.resultCode||203===e.resultCode)return A(e.resultMessage),n.push("/home/transaction/c2c");M(e.resultMessage)})).catch((function(e){return M(e)})).finally((function(){return m(!1)}))}(e)})),color:"primary",variant:"contained"},t("submitButton"),u&&a.createElement(Z.Z,{color:"inherit",size:14,thickness:6,style:{marginLeft:"8px"}})),a.createElement(f.SeamlessButton,{onClick:function(){return n.push("/home/transaction/c2c")},className:(0,S.default)(e.btnSpacing),color:"primary",variant:"outlined"},t("resetButton")))))};var Ie=(0,u.Z)((function(e){var t,n;return(0,m.Z)({root:{width:"100%",marginBottom:e.spacing(2),marginLeft:e.spacing(2)},rowSpacing2:{marginTop:e.spacing(3)},rowSpacing:{marginBottom:e.spacing(.5)},fullWidth:{width:"100%"},progress:{marginLeft:"8px"},dateField:{marginTop:e.spacing(2),"& .MuiInput-underline:before":{borderBottomWidth:"2px"}},blurBackDrop:{backdropFilter:"blur(2px)",backgroundColor:"rgba(0, 0, 0, 0.2)"},dialogHeader:{fontSize:18,fontWeight:"bold",align:"left",backgroundColor:e.palette.primary.main,color:null==e||null===(t=e.palette)||void 0===t||null===(n=t.common)||void 0===n?void 0:n.white},btnSpacing:{marginLeft:e.spacing(1),marginRight:e.spacing(2)}})}));const xe=function(){var e,t,n=Ie(),r=(0,g.useTranslation)().t,i=a.useState(null),c=(0,l.Z)(i,2),s=c[0],u=c[1],m=a.useState(!1),d=(0,l.Z)(m,2),p=d[0],E=d[1],h=a.useState(!1),y=(0,l.Z)(h,2),b=y[0],I=y[1],x=a.useState(0),P=(0,l.Z)(x,2),k=P[0],D=P[1],M=a.useState("desc"),A=(0,l.Z)(M,2),L=A[0],B=A[1],_=a.useState([]),O=(0,l.Z)(_,2),W=O[0],H=O[1],F=a.useState(""),q=(0,l.Z)(F,2),z=q[0],U=q[1],j=a.useState(""),K=(0,l.Z)(j,2),G=K[0],J=K[1],Y=a.useState(""),ie=(0,l.Z)(Y,2),ce=ie[0],ue=ie[1],me=a.useState(!1),de=(0,l.Z)(me,2),pe=de[0],fe=de[1],ge=(0,w.Z)(),Ee=ge.showErrorMessage,he=ge.showSuccessMessage,Ze=(ge.showInfoMessage,ge.showWarningMessage,a.useState(!1)),Se=(0,l.Z)(Ze,2),ye=Se[0],be=Se[1],Te=(0,V.Z)(),we=Te.userId,Re=null==Te||null===(e=Te.info)||void 0===e||null===(t=e.users)||void 0===t?void 0:t.filter((function(e){return e.userId.toLowerCase()===we.toLowerCase()}))[0].roleId,Ne=window.config.transaction.approvalTimeout,Ce=(0,oe.useServerTable)({page:0,perPage:20,order:"asc",orderBy:"timestamp",filter:{}}),xe=function(){if(s){var e={request:{size:Ce.perPage,page:Ce.page,role:p?"":Re,userId:p?we:"",reportName:p?"fetch_processed_transactions":"fetch_pending_transactions",fromDate:s,productSKU:window.config.transaction.c2cPendingTransaction}};I(!0),(0,T.JN)(e).then((function(e){0==(null==e?void 0:e.resultCode)?null!=e&&e.list?(D(null==e?void 0:e.totalRecordCount),H(null==e?void 0:e.list),0==(null==e?void 0:e.list.length)?be(!0):be(!1)):(H([]),be(!0)):(Ee(null==e?void 0:e.resultDescription),be(!0))})).catch((function(e){return Ee(null==e?void 0:e.resultDescription)})),I(!1)}};a.useEffect((function(){xe()}),[Ce.page,Ce.perPage]);var Pe=window.config.openCalendarWith||"year";return a.createElement("div",{className:n.root},a.createElement(v.Z,{container:!0,spacing:6,className:n.rowSpacing},a.createElement(v.Z,{item:!0,sm:4},a.createElement(R.M,{utils:C.Z},a.createElement(N.e,{className:(0,S.default)(n.dateField),fullWidth:!0,disableFuture:!0,views:["year","month","date"],openTo:Pe,format:"yyyy-MM-dd",placeholder:"yyyy-mm-dd",autoOk:!0,id:"from",label:r("from"),value:s,error:!1,onChange:function(e){u(e)},KeyboardButtonProps:{"aria-label":"change date"}}))),a.createElement(v.Z,{item:!0,sm:4,className:n.rowSpacing2},a.createElement(re.Z,{control:a.createElement(ee.Z,{checked:p,onChange:function(e){return E(e.target.checked)},inputProps:{"aria-label":"primary checkbox"}}),label:r("showProcessedTransactions")})),a.createElement(v.Z,{item:!0,sm:4,className:n.rowSpacing2},a.createElement(f.SeamlessButton,{className:(0,S.default)(n.btnSpacing),onClick:function(){s?xe():Ee(r("selectFromDate"))},color:"primary",variant:"contained"},r("submit")),a.createElement(f.SeamlessButton,{onClick:function(){u(null),be(!1),H([]),E(!1)},color:"primary",variant:"outlined"},r("resetSearch")))),b?a.createElement(Z.Z,null):a.createElement(v.Z,{container:!0,spacing:3,className:n.rowSpacing2},ye?a.createElement(se.Z,{severity:"info"},r("noTransactionsFoundWithinTheseSearchParameters")):a.createElement("div",{style:{height:700,width:"100%"}},a.createElement(ve,(0,o.Z)({approveTransaction:X.R.APPROVE_C2C_TRANSACTION,rejectTransaction:X.R.REJECT_C2C_TRANSACTION,loading:b,totalCount:k,transactionList:W,timeOrder:L,setTimeOrder:B},Ce,{pending:p,onApproveOrReject:function(e,t){U(e),J(t),fe(!0)}})))),a.createElement(te.Z,{open:pe,keepMounted:!0,maxWidth:"sm",fullWidth:!0,onClose:function(){fe(!1)},disableBackdropClick:!0,BackdropProps:{classes:{root:n.blurBackDrop}}},a.createElement(le.Z,{className:n.dialogHeader,color:"primary",disableTypography:!0},r("approve"===z?"approveTransaction":"rejectTransaction")),a.createElement(ae.Z,null,a.createElement(v.Z,{item:!0,xs:12},a.createElement(f.SeamlessInput,{multiline:!0,rows:4,required:!0,fullWidth:!0,value:ce,onChange:function(e){var t;return ue(null==e||null===(t=e.target)||void 0===t?void 0:t.value)},label:r("comment")}))),a.createElement(ne.Z,null,a.createElement(f.SeamlessButton,{variant:"outlined",color:"primary",onClick:function(){fe(!1),ue("")}},r("cancel")),a.createElement(f.SeamlessButton,{variant:"contained",color:"primary",onClick:function(){var e,t;e={ersReference:G,comment:ce},t=window.config.transaction.c2c||"","approve"===z?(0,T.hr)(e,t).then((function(e){0==(null==e?void 0:e.resultCode)||203===(null==e?void 0:e.resultCode)?(he(null==e?void 0:e.resultMessage),xe()):Ee(null==e?void 0:e.resultMessage)})).catch((function(e){return Ee(null==e?void 0:e.resultMessage)})).finally((function(){fe(!1),ue("")})):"reject"===z&&(0,T.WD)(e,t).then((function(e){100==(null==e?void 0:e.resultCode)?he(null==e?void 0:e.resultMessage):Ee(null==e?void 0:e.resultMessage)})).catch((function(e){return Ee(null==e?void 0:e.resultMessage)})).finally((function(){fe(!1),ue("")})),setTimeout((0,Q.Z)($().mark((function e(){return $().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe();case 2:I(!1);case 3:case"end":return e.stop()}}),e)}))),Ne)},disabled:""===ce},r("approve"===z?"approve":"reject")))))},Pe=function(){var e=a.useState("c2c"),t=(0,l.Z)(e,2),n=t[0],o=t[1],c=J()().AccessControlled,s=(0,g.useTranslation)().t,d=(0,u.Z)((function(e){return(0,m.Z)({toggle:{"& .Mui-selected":{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},"& .Mui-selected:hover":{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText}}})}))();return a.createElement(a.Fragment,null,a.createElement(r.Z,{color:"primary",value:n,exclusive:!0,onChange:function(e,t){null!==t&&o(t)},className:d.toggle},a.createElement(i.Z,{value:"c2c"},s("c2c")),a.createElement(i.Z,{value:"c2c_withdrawal"},s("c2cWithdrawal")),a.createElement(i.Z,{value:"c2c_approval"},s("c2cApprovalTab"))),"c2c"===n&&a.createElement(c,{feature:X.R.CREATE_C2C},a.createElement(Re,null)),"c2c_withdrawal"===n&&a.createElement(c,{feature:X.R.C2C_WITHDRAWAL},a.createElement(Ce,null)),"c2c_approval"===n&&a.createElement(c,{feature:X.R.C2C_APPROVAL_LIST},a.createElement(xe,null)))},ke=function(){var e=J()().AccessControlled;return a.createElement(e,{feature:X.R.C2C},a.createElement(Pe,null))}},94818:(e,t,n)=>{"use strict";n.d(t,{bT:()=>w,dj:()=>R.default,m6:()=>r.Z,yT:()=>a.Z,j3:()=>i.Z,$T:()=>l.Z});var a=n(47246),l=n(56562),r=(n(78429),n(24950)),i=n(10174),o=n(74315),c=n(33553),s=n(77277),u=n(60905),m=n(90436),d=n(37603),p=n(2411),f=n(79692),g=n(12420),E=n(29609),v=n(6277),h=n(77114),Z=n(8526),S=n(48049),y=n(23664),b=n(96545),T=(0,f.Z)((function(e){return(0,g.Z)({button:{marginTop:10,"& .MuiButton-label":{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit",textTransform:"none"}},element:{marginRight:e.spacing(1),marginBottom:e.spacing(1)},dateField:{margin:e.spacing(1),width:"100%"},elementField:{marginRight:e.spacing(1),marginBottom:e.spacing(1),width:550},dialogWrapper:{textAlign:"center","& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginBottom:e.spacing(3)},btnSpace:{marginRight:e.spacing(2)}})}));const w=function(e){var t=e.data,n=(e.onFormSubmit,T()),a=(0,E.useTranslation)().t,l=((0,S.useHistory)(),p.useState(!0)),r=(0,o.Z)(l,2),i=(r[0],r[1]),f=p.useState(!1),g=(0,o.Z)(f,2),w=g[0],R=g[1],N=p.useState(!1),C=(0,o.Z)(N,2),I=C[0],x=C[1],P=(0,y.Z)(),k=P.showErrorMessage,D=P.showSuccessMessage,M=Z.Ry().shape({subscriberId:Z.Z_().typeError(a("mustBeNumber")).matches(/^[0-9]+$/,a("mustBeNumber")).required(a("valueIsRequired")),operationId:Z.Z_().required(a("valueIsRequired"))}),A=function(){R(!0)},L=(0,h.TA)({initialValues:t,onSubmit:function(e){return A&&A()},validationSchema:M,validateOnChange:!1,enableReinitialize:!0}),B=L.values,_=L.errors,O=L.handleChange,W=(L.handleBlur,L.handleSubmit),H=L.handleReset,V=function(){R(!1)},F=p.useCallback((function(e,t){x(!0),(0,b.t5)(e).then((function(e){R(!1),D(e)})).catch((function(e){R(!1),k(e)})).finally((function(){x(!1),H(t)}))}),[]);return p.createElement(c.Z,null,p.createElement(u.Z,{container:!0,spacing:3},p.createElement(u.Z,{item:!0,xs:12,sm:6,md:3},p.createElement(d.SeamlessInput,{fullWidth:!0,error:!!_.subscriberId,helperText:_.subscriberId,className:(0,v.default)(n.element),name:"subscriberId",value:B.subscriberId,onChange:function(e){return O(e)},label:a("subscriberMsisdn"),required:!0})),p.createElement(u.Z,{item:!0,xs:12,sm:6,md:3},p.createElement(d.SeamlessDropDown,{fullWidth:!0,className:(0,v.default)(n.element),label:a("operationId"),helperText:_.operationId,options:[{value:"lock",key:"BAR"},{value:"unlock",key:"UNBAR"}],name:"operationId",value:B.operationId,onChange:function(e){O(e),"BAR"===e.target.value?i(!1):i(!0)},error:!!_.operationId,required:!0}))),p.createElement(u.Z,{item:!0,xs:12,spacing:3},p.createElement(s.Z,{type:"submit",onClick:function(e){W()},className:(0,v.default)(n.element,n.button),color:"primary",variant:"contained",disabled:I},a("submitButton")),p.createElement(s.Z,{type:"button",onClick:function(e){H(e)},className:(0,v.default)(n.element,n.button),color:"secondary",variant:"contained"},a("cancel"))),p.createElement(d.SeamlessDialog,{open:w,onClose:V,className:n.dialogWrapper,maxWidth:"sm"},p.createElement(p.Fragment,null,p.createElement("div",{className:n.modalContentSpacing},p.createElement(m.Z,{gutterBottom:!0,id:"transition-modal-title",variant:"h6",className:n.fontHeavy},a("barUnbarPageTitle")),p.createElement(m.Z,{id:"transition-modal-description",variant:"body1"},a("barUnbarConfirmationText")," ","lock"===B.operationId?"Bar":"Unbar"," ",a("subscriber"))),p.createElement("div",{className:n.modalContentSpacing},p.createElement(d.SeamlessButton,{type:"button",variant:"outlined",color:"primary",className:n.btnSpace,onClick:V},a("noConfirmationButton")),p.createElement(d.SeamlessButton,{type:"button",variant:"contained",color:"primary",onClick:function(e){F(B,e)}},a("yesConfirmationButton"))))))};var R=n(11903);n(59850)},34579:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var a=n(74315),l=n(2411),r=n.n(l),i=n(38670);const o=function(e){var t=r().useState(null),n=(0,a.Z)(t,2),l=n[0],o=n[1],c=(0,i.useSelector)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.rbac}),i.shallowEqual);return r().useEffect((function(){var t,n=(null===(t=c.features.find((function(t){return t.module===e})))||void 0===t?void 0:t.features)||[];o(n)}),[c]),l}},72533:(e,t,n)=>{"use strict";n.d(t,{Z:()=>G});var a=n(2411),l=n(29609),r=n(37603),i=n(11746),o=n(74315),c=n(79692),s=n(12420),u=n(38670),m=n(41262),d=n(33553),p=n(4614),f=n(6277),g=n(96545),E=n(23664),v=n(56470),h=n(77162),Z=n.n(h),S=n(41744),y=n.n(S),b=n(77277),T=n(38592),w=n(80030),R=n(84498),N=n(8629),C=n(49429),I=n(38724),x=n(79249),P=n(60905),k=n(24276),D=n(61837),M=n(15223),A=n(11312),L=(0,c.Z)((function(e){var t,n;return(0,s.Z)({dialog:{"&. MuiDialog-paperWidthSm":{maxWidth:"300px"}},closeIcon:{float:"right","@media print":{display:"none"}},rowSpacing:{marginBottom:e.spacing(.5),marginTop:e.spacing(1)},rowSpacing2:{marginBottom:e.spacing(.5),marginTop:e.spacing(1),textAlign:"center"},dialogHeader:{fontSize:18,fontWeight:"bold",align:"left",backgroundColor:e.palette.primary.main,color:null==e||null===(t=e.palette)||void 0===t||null===(n=t.common)||void 0===n?void 0:n.white},fieldHeading:{fontWeight:1500,textTransform:"capitalize",fontSize:20},title:{marginTop:e.spacing(2)},divider:{width:"100%",marginTop:e.spacing(.5)},cancelAction:{textAlign:"right"},updateAction:{textAlign:"left"},progress:{marginLeft:"8px"}})}));const B=function(e){var t,n,i,o,c,s=e.data,u=e.open,m=e.title,d=e.onClose,p=e.onSubmit,f=e.comment,g=e.setComment,E=L(),v=(0,l.useTranslation)().t;return a.createElement(N.Z,{open:u,maxWidth:"sm",fullWidth:!0,scroll:"paper",onClose:d,"aria-labelledby":"product-variant-dialog",className:E.dialog},a.createElement(x.Z,{className:E.dialogHeader,color:"primary",disableTypography:!0},a.createElement(P.Z,{container:!0},a.createElement(P.Z,{item:!0,lg:6,xs:6,className:E.title},m||v("preview")),a.createElement(P.Z,{item:!0,lg:6,xs:6},a.createElement(M.Z,{style:{justifyContent:"flex-end"}},a.createElement(D.Z,{edge:"end",className:E.closeIcon,color:"inherit",onClick:d,"aria-label":"close"},a.createElement(k.Z,null,"close")))))),a.createElement(I.Z,null,a.createElement(P.Z,{container:!0,className:E.title,spacing:2},a.createElement(A.Z,{title:v("code"),value:null==s?void 0:s.code,headingProps:{xs:6,sm:6,lg:4,md:4},valueProps:{xs:6,sm:6,lg:6,md:6}}),a.createElement(A.Z,{title:v("name"),value:null==s?void 0:s.name,headingProps:{xs:6,sm:6,lg:4,md:4},valueProps:{xs:6,sm:6,lg:6,md:6}}),a.createElement(A.Z,{title:v("productType"),value:null==s?void 0:s.productType,headingProps:{xs:6,sm:6,lg:4,md:4},valueProps:{xs:6,sm:6,lg:6,md:6}}),a.createElement(A.Z,{title:v("availableFrom"),value:null==s?void 0:s.availableFrom,headingProps:{xs:6,sm:6,lg:4,md:4},valueProps:{xs:6,sm:6,lg:6,md:6}}),a.createElement(A.Z,{title:v("availableUntil"),value:null==s?void 0:s.availableUntil,headingProps:{xs:6,sm:6,lg:4,md:4},valueProps:{xs:6,sm:6,lg:6,md:6}}),a.createElement(A.Z,{title:v("createdAt"),value:(null==s?void 0:s.createdAt)&&(null==s||null===(t=s.createdAt)||void 0===t?void 0:t.split("T")[0])+" "+(null==s||null===(n=s.createdAt)||void 0===n?void 0:n.split("T")[1]).slice(0,8),headingProps:{xs:6,sm:6,lg:4,md:4},valueProps:{xs:6,sm:6,lg:6,md:6}}),a.createElement(A.Z,{title:v("updatedAt"),value:(null==s?void 0:s.updatedAt)&&(null==s||null===(i=s.updatedAt)||void 0===i?void 0:i.split("T")[0])+" "+(null==s||null===(o=s.updatedAt)||void 0===o?void 0:o.split("T")[1]).slice(0,8),headingProps:{xs:6,sm:6,lg:4,md:4},valueProps:{xs:6,sm:6,lg:6,md:6}}),a.createElement(A.Z,{title:v("description"),value:(null==s?void 0:s.description)||v("emptyValueMark"),headingProps:{xs:6,sm:6,lg:4,md:4},valueProps:{xs:6,sm:6,lg:6,md:6}}),null==s||null===(c=s.data)||void 0===c?void 0:c.map((function(e,t){return a.createElement(A.Z,{title:null==e?void 0:e.dataName,value:null==e?void 0:e.dataValue,headingProps:{xs:6,sm:6,lg:4,md:4},valueProps:{xs:6,sm:6,lg:6,md:6}})})),a.createElement(P.Z,{item:!0,xs:6},a.createElement(r.SeamlessInput,{rows:1,fullWidth:!0,value:f,onChange:function(e){var t;return g(null==e||null===(t=e.target)||void 0===t?void 0:t.value)},label:v("comment")})))),a.createElement(C.Z,null,a.createElement(P.Z,{container:!0,spacing:4,style:{margin:"10px"}},a.createElement(P.Z,{item:!0,xs:12,sm:6,md:6,className:E.cancelAction},a.createElement(b.Z,{color:"primary",variant:"outlined",onClick:d},v("cancel"))),a.createElement(P.Z,{item:!0,xs:12,sm:6,md:6,className:E.updateAction},a.createElement(b.Z,{color:"primary",variant:"contained",onClick:function(){p(s)}},v("activate"))))))};var _=n(44104),O=n.n(_),W=n(81463);const H=function(e){var t=e.loading,n=e.products,r=e.totalCount,i=e.onSubmit,c=(0,l.useTranslation)().t,s=(O()().checkPermission,a.useState(!1)),u=(0,o.Z)(s,2),m=u[0],d=u[1],p=a.useState(""),f=(0,o.Z)(p,2),g=f[0],E=f[1],h=a.useState(""),S=(0,o.Z)(h,2),N=S[0],C=S[1],I=function(){var e=(0,v.Z)(Z().mark((function e(t){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.comment=N,e.next=3,i(t);case 3:d(!1),C("");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=[{field:"code",headerName:c("code","Code"),width:150,filterable:!1,sortable:!1},{field:"name",headerName:c("name","Name"),width:150,filterable:!1,sortable:!1},{field:"productType",headerName:c("productType"),width:150,filterable:!1,sortable:!1},{field:"availableFrom",headerName:c("availableFrom"),sortable:!0,width:200},{field:"availableUntil",headerName:c("availableUntil"),sortable:!0,width:200},{field:"actions",headerName:c("actions"),flex:1,filterable:!1,sortable:!1,renderCell:function(e){return a.createElement(T.Z,{size:"small",color:"primary",variant:"text"},a.createElement(w.ZP,{title:"Activate"},a.createElement(b.Z,{onClick:function(){E(e.row),d(!0)}},a.createElement(R.Z,{fontSize:"small",style:{color:W.Z[400]}}))))}}];return a.createElement(a.Fragment,null,a.createElement(y(),{pagination:!0,rowCount:r,rows:n,loading:t,columns:x,getRowId:function(e){return e.id},columnBuffer:3}),a.createElement(B,{data:g,open:m,onSubmit:I,title:c("preview"),onClose:function(){d(!1),E(""),C("")},comment:N,setComment:C}))};var V=n(90436),F=n(70224),q=n(94669),z=(0,c.Z)((function(e){return(0,s.Z)({box:{"& .MuiIconButton-label":{color:e.palette.primary.main},marginRight:"15px"},button:{margin:e.spacing(1),border:"1px solid ".concat(e.palette.primary.main)},fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},heading:{fontWeight:"bold",textTransform:"capitalize",fontSize:16},fieldValue:{textTransform:"capitalize",fontSize:14,wordBreak:"break-all",color:"#0dc50a"},rowSpacing:{marginBottom:e.spacing(.5)},successIcon:{"& .MuiSvgIcon-root":{width:"2em",height:"2em"},display:"flex",justifyContent:"center",color:"#0dc50a"},icon:{"& .MuiSvgIcon-root":{width:"2em",height:"2em"},display:"flex",justifyContent:"center"},errorColor:{color:"#FF0000"},successHeader:{display:"flex",justifyContent:"center"},dialog:{"&. MuiDialog-paperWidthSm":{maxWidth:"300px"}},btnSpacing:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},dialogAction:{justifyContent:"center"},printButton:{"@media print":{display:"none"}},closeIcon:{float:"right","@media print":{display:"none"}},circularProgress:{position:"absolute",top:"50%",left:"55%"}})}));const U=function(e){var t,n,r,i,o,c,s=e.open,u=e.handleClose,m=e.response,p=z(),g=(0,l.useTranslation)().t;return a.createElement(N.Z,{open:s,onClose:u,"aria-labelledby":"bundle-dialog",className:p.dialog},a.createElement(M.Z,{style:{justifyContent:"flex-end"}},a.createElement(D.Z,{edge:"end",className:p.closeIcon,color:"inherit",onClick:u,"aria-label":"close"},a.createElement(k.Z,null,"close"))),a.createElement(I.Z,null,a.createElement(P.Z,{container:!0,className:p.rowSpacing,spacing:3},a.createElement(P.Z,{item:!0,xs:12,className:(0,f.default)(p.successIcon,null!=m&&m.isSuccess?"":p.errorColor)},a.createElement(q.Z,null)),a.createElement(P.Z,{item:!0,xs:12,className:p.successHeader},a.createElement(V.Z,{className:p.heading},g("bundleReceipt"))),a.createElement(P.Z,{item:!0,xs:12,className:p.successHeader},a.createElement(V.Z,{className:p.heading},m.isSuccess?g("bundleTransactionSuccess"):g("bundleTransactionFailed"))),a.createElement(P.Z,{item:!0,xs:12},a.createElement(V.Z,{className:(0,f.default)(p.fieldValue,null!=m&&m.isSuccess?"":p.errorColor)},g("msisdn")),a.createElement(V.Z,{className:p.fieldHeading},(null==m?void 0:m.receiverId)||g("emptyValueMark"))),a.createElement(P.Z,{item:!0,xs:12},a.createElement(V.Z,{className:(0,f.default)(p.fieldValue,null!=m&&m.isSuccess?"":p.errorColor)},g("initiatorId")||g("emptyValueMark")),a.createElement(V.Z,{className:p.fieldHeading},(null==m||null===(t=m.transactionProperties)||void 0===t?void 0:t.map["initiator-reseller-id"])||g("emptyValueMark"))),a.createElement(P.Z,{item:!0,xs:12},a.createElement(V.Z,{className:(0,f.default)(p.fieldValue,null!=m&&m.isSuccess?"":p.errorColor)},g("Date")),a.createElement(V.Z,{className:p.fieldHeading},((null==m||null===(n=m.endTime)||void 0===n?void 0:n.split("T")[0])||"")+" "+(null==m||null===(r=m.endTime)||void 0===r||null===(i=r.split("T")[1])||void 0===i?void 0:i.slice(0,8))||"")),a.createElement(P.Z,{item:!0,xs:12},a.createElement(V.Z,{className:(0,f.default)(p.fieldValue,null!=m&&m.isSuccess?"":p.errorColor)},g("productSku")),a.createElement(V.Z,{className:p.fieldHeading},(null==m||null===(o=m.transactionProperties)||void 0===o||null===(c=o.map)||void 0===c?void 0:c.productSKU)||g("emptyValueMark"))),a.createElement(P.Z,{item:!0,xs:12},a.createElement(V.Z,{className:(0,f.default)(p.fieldValue,null!=m&&m.isSuccess?"":p.errorColor)},g("amount")),a.createElement(V.Z,{className:p.fieldHeading},(null==m?void 0:m.amount)||g("emptyValueMark"))),a.createElement(P.Z,{item:!0,xs:12},a.createElement(V.Z,{className:(0,f.default)(p.fieldValue,null!=m&&m.isSuccess?"":p.errorColor)},g("referenceNumber")),a.createElement(V.Z,{className:p.fieldHeading},(null==m?void 0:m.ersReference)||g("emptyValueMark"))),a.createElement(P.Z,{item:!0,xs:12},a.createElement(V.Z,{className:(0,f.default)(p.fieldValue,null!=m&&m.isSuccess?"":p.errorColor)},g("resultMessageForTransaction")),a.createElement(V.Z,{className:p.fieldHeading},(null==m?void 0:m.resultMessage)||g("emptyValueMark"))))),a.createElement(C.Z,null,a.createElement(d.Z,{className:(0,f.default)(p.box,p.printButton)},a.createElement(w.ZP,{title:g("print")},a.createElement(D.Z,{edge:"end",className:p.button,color:"inherit",onClick:function(){window.focus(),window.print()},"aria-label":"Print"},a.createElement(F.Z,null))))))};var j=(0,c.Z)((function(e){return(0,s.Z)({button:{marginTop:e.spacing(3)},element:{marginTop:e.spacing(1),marginBottom:e.spacing(1),marginRight:e.spacing(1),width:"270px"},backDrop:{color:"#fff",zIndex:1},circularProgress:{position:"absolute",top:"50%",left:"55%"}})}));const K=function(){var e=(0,l.useTranslation)().t,t=j(),n=a.useState([]),c=(0,o.Z)(n,2),s=c[0],v=c[1],h=a.useState(" "),Z=(0,o.Z)(h,2),S=Z[0],y=Z[1],b=a.useState(""),T=(0,o.Z)(b,2),w=T[0],R=T[1],N=a.useState(!1),C=(0,o.Z)(N,2),I=C[0],x=C[1],P=a.useState(0),k=(0,o.Z)(P,2),D=k[0],M=k[1],A=a.useState([]),L=(0,o.Z)(A,2),B=L[0],_=L[1],O=(0,E.Z)(),W=O.showErrorMessage,V=(O.showSuccessMessage,a.useState({})),F=(0,o.Z)(V,2),q=F[0],z=F[1],K=a.useState(!1),G=(0,o.Z)(K,2),J=G[0],X=G[1],Q=a.useState(!1),Y=(0,o.Z)(Q,2),$=Y[0],ee=Y[1],te=(0,u.useSelector)((function(e){return null==e?void 0:e.auth}),u.shallowEqual);return a.useEffect((function(){(0,g.zm)().then((function(e){if(0==e.resultCode){var t=e.productCategories.map((function(e){return{key:null==e?void 0:e.name,value:null==e?void 0:e.name}}));v(t)}else v([]),W(null==e?void 0:e.resultDescription)})).catch((function(e){v([]),W(e.resultDescription)}))}),[]),a.createElement(a.Fragment,null,a.createElement(d.Z,{flexDirection:"row"},a.createElement(r.SeamlessDropDown,{className:t.element,label:e("selectProductType"),name:e("productType"),value:S,options:[{key:e("selectProductCategory"),value:" "}].concat((0,i.Z)(s)),onChange:function(e){return y(e.target.value)}}),a.createElement(r.SeamlessInput,{className:t.element,label:e("msisdn"),value:w,onChange:function(e){R(e.target.value)}}),a.createElement(r.SeamlessButton,{variant:"contained",color:"primary",type:"button",className:t.button,disabled:" "===S||""===w,onClick:function(){x(!0),(0,g.dE)({productType:S,msisdn:w,fetchExternalProducts:!1}).then((function(e){var t;0==e.resultCode?(_(null==e?void 0:e.products),M(null==e||null===(t=e.metaData)||void 0===t?void 0:t.totalCount)):(_([]),M(0),W(null==e?void 0:e.resultDescription))})).catch((function(e){_([]),M(0),W(null==e?void 0:e.resultDescription)})).finally((function(){x(!1)}))}},e("searchBundles"))),a.createElement("div",{style:{height:"500px",marginTop:"10px"}},a.createElement(H,{products:B,totalCount:D,loading:I,onSubmit:function(t){var n,a,l,r,i,o,c,s,u,m;X(!0);var d={comment:null!==(n=null==t?void 0:t.comment)&&void 0!==n?n:"",seller:{type:"RESELLERID",id:null==te||null===(a=te.user)||void 0===a?void 0:a.requestedPrincipalId,accountTypeId:"RESELLER"},topUpPrincipalId:{type:"SUBSCRIBERMSISDN",id:w,accountTypeId:"DATA_BUNDLE"},product:{productSKU:null!==(l=null==t||null===(r=t.variants[0])||void 0===r?void 0:r.productSKU)&&void 0!==l?l:"",amount:{value:null!==(i="".concat(null==t||null===(o=t.variants[0])||void 0===o||null===(c=o.unitPrice)||void 0===c?void 0:c.price))&&void 0!==i?i:"",currency:null!==(s=null==t||null===(u=t.variants[0])||void 0===u||null===(m=u.unitPrice)||void 0===m?void 0:m.currency)&&void 0!==s?s:""}},transactionProperties:{map:{preferredLanguage:"en",paymentMethod:"cash",comments:"test",batchId:""}}};(0,g.uB)(d).then((function(n){var a,l,r,i,o=n;0===n.resultCode?(console.log("success"),o.isSuccess=!0):o.isSuccess=!1,o.amount="".concat((null==t||null===(a=t.variants[0])||void 0===a||null===(l=a.unitPrice)||void 0===l?void 0:l.price)||e("emptyValueMark")," ").concat((null==t||null===(r=t.variants[0])||void 0===r||null===(i=r.unitPrice)||void 0===i?void 0:i.currency)||e("emptyValueMark")),o.receiverId=w,z(o),ee(!0)})).catch((function(e){W(null==e?void 0:e.resultMessage)})).finally((function(){X(!1)}))}})),a.createElement(m.Z,{className:(0,f.default)(t.backDrop),open:J},a.createElement(p.Z,{color:"primary",className:(0,f.default)(t.circularProgress)})),a.createElement(U,{open:$,handleClose:function(){ee(!1),z({})},response:q}))},G=function(){var e=(0,l.useTranslation)().t;return a.createElement(a.Fragment,null,a.createElement(r.SeamlessContainer,{title:e("bundles"),description:e("bundlesDescription")},a.createElement(K,null)))}},93281:(e,t,n)=>{"use strict";n.d(t,{wB:()=>Q,Ul:()=>$,HG:()=>te,W6:()=>K});var a=n(2411),l=n(48049),r=n(44104),i=n.n(r),o=n(27490),c=n(56470),s=n(74315),u=n(77162),m=n.n(u),d=n(29609),p=n(13248),f=n(23664),g=n(94818),E=n(37603),v=n(38670),h=n(96545),Z=n(6277),S=n(79692),y=n(12420),b=n(70224),T=n(9217),w=n(94669),R=n(80976),N=n(8629),C=n(38724),I=n(49429),x=n(15223),P=n(24276),k=n(61837),D=n(90436),M=n(33553),A=n(60905),L=n(80030),B=n(4614),_=n(41262),O=n(85256);function W(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))}var H=n(11312),V=n(79249),F=(0,S.Z)((function(e){var t,n;return(0,y.Z)({dialog:{"&. MuiDialog-paperWidthSm":{maxWidth:"300px"}},blurBackDrop:{backdropFilter:"blur(2px)",backgroundColor:"rgba(0, 0, 0, 0.2)"},closeIcon:{float:"right","@media print":{display:"none"}},rowSpacing:{marginBottom:e.spacing(.5),marginTop:e.spacing(1)},dialogHeader:{fontSize:18,fontWeight:"bold",align:"left",backgroundColor:e.palette.primary.main,color:null==e||null===(t=e.palette)||void 0===t||null===(n=t.common)||void 0===n?void 0:n.white},fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},title:{marginTop:e.spacing(2)},divider:{width:"100%",marginTop:e.spacing(.5)},cancelAction:{textAlign:"right"},updateAction:{textAlign:"left"}})}));const q=function(e){var t=e.comment,n=e.open,l=e.setComment,r=e.onClose,i=e.onSubmit,o=F(),c=(0,d.useTranslation)().t;return a.createElement(N.Z,{open:n,keepMounted:!0,maxWidth:"sm",fullWidth:!0,onClose:r,BackdropProps:{classes:{root:o.blurBackDrop}}},a.createElement(V.Z,{className:o.dialogHeader,color:"primary",disableTypography:!0},c("reverseTransaction")),a.createElement(C.Z,null,a.createElement(A.Z,{item:!0,xs:12,sm:9,md:8,lg:8},a.createElement(E.SeamlessInput,{multiline:!0,rows:4,required:!0,fullWidth:!0,value:t,onChange:function(e){var t;return l(null==e||null===(t=e.target)||void 0===t?void 0:t.value)},label:c("comment")}))),a.createElement(I.Z,null,a.createElement(E.SeamlessButton,{variant:"outlined",color:"primary",onClick:r},c("cancel")),a.createElement(E.SeamlessButton,{variant:"contained",color:"primary",onClick:i,disabled:""===t},c("confirm"))))};var z={recipientMobileNo:"",amount:"",paymentMethod:"cash",comment:"",batchId:"",anonymousId:"",isAnonymous:!1},U=(0,S.Z)((function(e){return(0,y.Z)({appBar:{position:"relative"},box:{"& .MuiIconButton-label":{color:e.palette.primary.main},marginRight:"15px"},title:{marginLeft:e.spacing(2),flex:1},alert:{marginLeft:e.spacing(3)},button:{margin:e.spacing(1),border:"1px solid ".concat(e.palette.primary.main)},progress:{marginLeft:"8px"},fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},heading:{fontWeight:"bold",textTransform:"capitalize",fontSize:16},fieldValue:{textTransform:"capitalize",fontSize:14,wordBreak:"break-all",color:"#0dc50a"},rowSpacing:{marginBottom:e.spacing(.5)},successIcon:{"& .MuiSvgIcon-root":{width:"2em",height:"2em"},display:"flex",justifyContent:"center",color:"#0dc50a"},icon:{"& .MuiSvgIcon-root":{width:"2em",height:"2em"},display:"flex",justifyContent:"center"},errorColor:{color:"#FF0000"},reversalColor:{color:"".concat(e.palette.primary.main)},successHeader:{display:"flex",justifyContent:"center"},dialog:{"&. MuiDialog-paperWidthSm":{maxWidth:"300px"}},element:{margin:e.spacing(1)},spacingBottom:{marginBottom:e.spacing(2)},btnSpacing:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},dialogAction:{justifyContent:"center"},printButton:{"@media print":{display:"none"}},closeIcon:{float:"right","@media print":{display:"none"}},backDrop:{color:"#fff",zIndex:1},circularProgress:{position:"absolute",top:"50%",left:"55%"},btnPrimary:{background:e.palette.primary.main,color:e.palette.primary.contrastText},circularProgressClose:{position:"absolute",top:"50%",left:"55%",display:"none"},desc:{marginLeft:e.spacing(1)},divider:{width:"100%",marginTop:e.spacing(.5)},rowSpacing2:{marginBottom:e.spacing(.5),marginTop:e.spacing(1),justifyContent:"center"}})}));const j=function(e){var t,n,l,r,u,S,y,V,F=e.isPostpaid,j=void 0!==F&&F,K=(0,d.useTranslation)().t,G=i()().checkPermission,J=U(),X=a.useState(!1),Q=(0,s.Z)(X,2),Y=(Q[0],Q[1]),$=((0,p.useSnackbar)().enqueueSnackbar,(0,f.Z)()),ee=$.showErrorMessage,te=$.showSuccessMessage,ne=a.useState(z),ae=(0,s.Z)(ne,2),le=ae[0],re=ae[1],ie=a.useState(""),oe=(0,s.Z)(ie,2),ce=oe[0],se=oe[1],ue=a.useState(!1),me=(0,s.Z)(ue,2),de=me[0],pe=me[1],fe=a.useState(!1),ge=(0,s.Z)(fe,2),Ee=ge[0],ve=ge[1],he=a.useState(!1),Ze=(0,s.Z)(he,2),Se=Ze[0],ye=Ze[1],be=a.useState(!1),Te=(0,s.Z)(be,2),we=Te[0],Re=Te[1],Ne=a.useState(0),Ce=(0,s.Z)(Ne,2),Ie=Ce[0],xe=Ce[1],Pe=a.useState(0),ke=(0,s.Z)(Pe,2),De=ke[0],Me=ke[1],Ae=a.useState(!1),Le=(0,s.Z)(Ae,2),Be=Le[0],_e=Le[1],Oe=a.useState(!1),We=(0,s.Z)(Oe,2),He=We[0],Ve=We[1],Fe=a.useState([]),qe=(0,s.Z)(Fe,2),ze=qe[0],Ue=qe[1],je=a.useState(!1),Ke=(0,s.Z)(je,2),Ge=Ke[0],Je=Ke[1],Xe=a.useState(""),Qe=(0,s.Z)(Xe,2),Ye=Qe[0],$e=Qe[1],et=a.useState(!1),tt=(0,s.Z)(et,2),nt=tt[0],at=(tt[1],a.useState("")),lt=(0,s.Z)(at,2),rt=lt[0],it=lt[1],ot=(0,v.useSelector)((function(e){return null==e?void 0:e.auth}),v.shallowEqual),ct=window.config.language,st=function(){de&&ye(!1),Ve(!1),ve(!1),Ue([])},ut=0,mt=0,dt=function(){var e=(0,c.Z)(m().mark((function e(t,n,a,l){var r,i,o,s,u,d;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=n[t]).hasOwnProperty("paymentMethod")){e.next=11;break}return i=window.config.currency,o=r.isAnonymous?"SUBSCRIBERANONYMOUSID":"SUBSCRIBERMSISDN",s=r.isAnonymous?r.anonymousId:r.recipientMobileNo,u=r.isAnonymous?K("recipientMSISDN"):K("recipientMobileNo"),d={seller:{type:"RESELLERID",id:ot.user.requestedPrincipalId,accountTypeId:"RESELLER"},topUpPrincipalId:{type:o,id:s,accountTypeId:j?"AIRTIME_POSTPAID":"AIRTIME"},product:{productSKU:j?"AIRTIME_POSTPAID":"topup",amount:{value:r.amount,currency:i}},transactionProperties:{map:{preferredLanguage:ct,paymentMethod:r.paymentMethod,comments:r.comment,batchId:l}}},e.next=9,Y(!0);case 9:return e.next=11,(0,h.uB)(d).then(function(){var e=(0,c.Z)(m().mark((function e(i){var o,c;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o={endTime:i.endTime,ersReference:i.ersReference,resultMessage:i.resultMessage,receiverIdType:u,receiverId:s,initiatorId:i.transactionProperties.map["initiator-user-id"],state:i.state,amount:r.amount},a.push(o),Ue(a),se(i.ersReference),c=n.length-1,n.length>=1&&(0===i.resultCode?(xe(mt+=1),pe(!0)):(Me(ut+=1),pe(!1)),c===t&&(ve(!0),ye(!0),_e(!1),Ve(!1)),c!==mt+ut-1&&dt(t+1,n,a,l)),1===n.length&&(0===i.resultCode?(xe(mt),pe(!0)):(Me(ut),pe(!1)),ye(!0),ve(!0),Ve(!1),_e(!1));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).finally((function(){return Y(!1)}));case 11:case"end":return e.stop()}}),e)})));return function(t,n,a,l){return e.apply(this,arguments)}}(),pt=a.useCallback(function(){var e=(0,c.Z)(m().mark((function e(t){var n,a,l;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ue([]),n=[],_e(!0),re(null!=t&&t.isTopUpBulkData?null==t?void 0:t.isTopUpBulkData[0]:z),a=we?(new Date).getTime()+W().split("-")[0]:"",l=t.isTopUpBulkData.filter((function(e){return e.hasOwnProperty("paymentMethod")})),it(a),ut=0,mt=0,Me(0),xe(0),dt(0,l,n,a);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[we]);return B.Z,J.progress,a.createElement(E.SeamlessContainer,{title:K(j?"postpaidTitle":"TopupTitle"),description:K(j?"postpaidDescription":"TopupDescription")},a.createElement(g.$T,{checkIsTopUp:function(e){Re(e)},isPostpaid:j,data:z,onFormSubmit:function(e){_e(!0),pt(e),Ve(!He),ye(!1),Ve(!0)},isReset:Se,disableTopUpButton:Be}),Be?a.createElement(_.Z,{className:(0,Z.default)(J.backDrop),open:He,onClick:function(){return Ve(!1)}},a.createElement(B.Z,{color:"primary",className:(0,Z.default)(J.circularProgress)})):a.createElement(B.Z,{className:(0,Z.default)(J.circularProgressClose)}),a.createElement(N.Z,{open:Ee,onClose:st,"aria-labelledby":"product-variant-dialog",className:J.dialog},a.createElement(x.Z,{style:{justifyContent:"flex-end"}},a.createElement(k.Z,{edge:"end",className:J.closeIcon,color:"inherit",onClick:st,"aria-label":"close"},a.createElement(P.Z,null,"close"))),we?a.createElement(C.Z,null,a.createElement(a.Fragment,null,a.createElement(A.Z,{container:!0,className:J.rowSpacing,spacing:3},nt?null:a.createElement(A.Z,{item:!0,xs:12,className:(0,Z.default)(J.icon)},a.createElement(w.Z,null)),a.createElement(A.Z,{item:!0,xs:12,className:J.successHeader},a.createElement(D.Z,{className:J.heading},K(j?"airtimePostpaidReceipt":"topupReceipt"))),a.createElement(A.Z,{item:!0,xs:12,className:J.successHeader},a.createElement(D.Z,{className:J.heading},"".concat(K("batchIdLabel"))),a.createElement(D.Z,null,null!=rt?rt:K("emptyValueMark")))),a.createElement(A.Z,{container:!0,className:J.rowSpacing,spacing:3},a.createElement(A.Z,{item:!0,xs:12},a.createElement(D.Z,{className:(0,Z.default)(J.fieldValue)},K("successfulTransactions")),a.createElement(D.Z,{className:J.fieldHeading},Ie)),a.createElement(A.Z,{item:!0,xs:12},a.createElement(D.Z,{className:(0,Z.default)(J.fieldValue,J.errorColor)},K("failedTransactions")),a.createElement(D.Z,{className:J.fieldHeading},De))),a.createElement(A.Z,{container:!0,className:J.rowSpacing,spacing:3},ze.map((function(e,t){return a.createElement(a.Fragment,{key:t},a.createElement(A.Z,{container:!0,className:J.rowSpacing2},a.createElement(A.Z,{item:!0},a.createElement(A.Z,{key:t},a.createElement(D.Z,{className:J.fieldHeading},K("transactionNo")+" ".concat(t+1))))),a.createElement(H.Z,{title:null==e?void 0:e.receiverIdType,value:null==e?void 0:e.receiverId,headingProps:{xs:6,sm:6,lg:4,md:4},valueProps:{xs:6,sm:6,lg:6,md:6}}),a.createElement(H.Z,{title:K("initiatorId"),value:null==e?void 0:e.initiatorId,headingProps:{xs:6,sm:6,lg:4,md:4},valueProps:{xs:6,sm:6,lg:6,md:6}}),a.createElement(H.Z,{title:K("Date"),value:(null==e?void 0:e.endTime.split("T")[0])+" "+(null==e?void 0:e.endTime.split("T")[1]).slice(0,8),headingProps:{xs:6,sm:6,lg:4,md:4},valueProps:{xs:6,sm:6,lg:6,md:6}}),a.createElement(H.Z,{title:K("amount"),value:null==e?void 0:e.amount,headingProps:{xs:6,sm:6,lg:4,md:4},valueProps:{xs:6,sm:6,lg:6,md:6}}),a.createElement(H.Z,{title:K("ersReference"),value:null==e?void 0:e.ersReference,headingProps:{xs:6,sm:6,lg:4,md:4},valueProps:{xs:6,sm:6,lg:6,md:6}}),a.createElement(H.Z,{title:K("status"),value:null==e?void 0:e.state,headingProps:{xs:6,sm:6,lg:4,md:4},valueProps:{xs:6,sm:6,lg:6,md:6}}),a.createElement(H.Z,{title:K("resultMessageForTransaction"),value:null==e?void 0:e.resultMessage,headingProps:{xs:6,sm:6,lg:4,md:4},valueProps:{xs:6,sm:6,lg:6,md:6}}),a.createElement(O.Z,{className:J.divider}))}))))):a.createElement(C.Z,null,a.createElement(A.Z,{container:!0,className:J.rowSpacing,spacing:3},a.createElement(A.Z,{item:!0,xs:12,className:J.successIcon+" "+(de?"":J.errorColor)},a.createElement(w.Z,null)),a.createElement(A.Z,{item:!0,xs:12,className:J.successHeader},a.createElement(D.Z,{className:J.heading},K(j?"airtimePostpaidReceipt":"topupReceipt"))),a.createElement(A.Z,{item:!0,xs:12,className:J.successHeader},a.createElement(D.Z,{className:J.heading},K(de?"successulTransaction":"transactionFailed"))),a.createElement(A.Z,{item:!0,xs:12},a.createElement(D.Z,{className:(0,Z.default)(J.fieldValue,de?"":J.errorColor)},K(null===(t=ze[0])||void 0===t?void 0:t.receiverIdType)),a.createElement(D.Z,{className:J.fieldHeading},null===(n=ze[0])||void 0===n?void 0:n.receiverId)),a.createElement(A.Z,{item:!0,xs:12},a.createElement(D.Z,{className:(0,Z.default)(J.fieldValue,de?"":J.errorColor)},K("amount")),a.createElement(D.Z,{className:J.fieldHeading},null===(l=ze[0])||void 0===l?void 0:l.amount)),a.createElement(A.Z,{item:!0,xs:12},a.createElement(D.Z,{className:(0,Z.default)(J.fieldValue,de?"":J.errorColor)},K("Date")),a.createElement(D.Z,{className:J.fieldHeading},(null===(r=ze[0])||void 0===r?void 0:r.endTime.split("T")[0])+" "+(null===(u=ze[0])||void 0===u||null===(S=u.endTime.split("T")[1])||void 0===S?void 0:S.slice(0,8)))),a.createElement(A.Z,{item:!0,xs:12},a.createElement(D.Z,{className:(0,Z.default)(J.fieldValue,de?"":J.errorColor)},K("initiatorId")),a.createElement(D.Z,{className:J.fieldHeading},null===(y=ze[0])||void 0===y?void 0:y.initiatorId)),a.createElement(A.Z,{item:!0,xs:12},a.createElement(D.Z,{className:(0,Z.default)(J.fieldValue,de?"":J.errorColor)},K("referenceNumber")),a.createElement(D.Z,{className:J.fieldHeading},ce)),a.createElement(A.Z,{item:!0,xs:12},a.createElement(D.Z,{className:(0,Z.default)(J.fieldValue,de?"":J.errorColor)},K("resultMessageForTransaction")),a.createElement(D.Z,{className:J.fieldHeading},null===(V=ze[0])||void 0===V?void 0:V.resultMessage)))),we?a.createElement(I.Z,null,a.createElement(M.Z,{className:(0,Z.default)(J.box,J.printButton)},a.createElement(L.ZP,{color:"primary",title:K("print")},a.createElement(k.Z,{edge:"end",className:J.button,color:"inherit",onClick:function(){window.focus(),window.print()},"aria-label":"Print"},a.createElement(b.Z,null))))):a.createElement(I.Z,null,a.createElement(M.Z,{className:(0,Z.default)(J.box,J.printButton)},a.createElement(L.ZP,{color:"primary",title:K("print")},a.createElement(k.Z,{edge:"end",className:J.button,color:"inherit",onClick:function(){window.focus(),window.print()},"aria-label":"Print"},a.createElement(b.Z,null))),!de&&a.createElement(L.ZP,{title:K("retry")},a.createElement(k.Z,{edge:"end",className:J.button,color:"inherit",onClick:function(){var e={};e.isTopUpBulkData=[le],pt(e),Ve(!0),ve(!1),e.topupSellBulk=[le]},"aria-label":"Transfer"},a.createElement(R.Z,null))),de&&!j&&G(o.R.REVERSE_TRANSACTION)&&a.createElement(L.ZP,{title:K("requestReversal")},a.createElement(k.Z,{edge:"end",className:J.button,color:"inherit",onClick:function(){Je(!0),ve(!1)},"aria-label":"Transfer"},a.createElement(T.Z,null)))))),a.createElement(q,{open:Ge,comment:Ye,setComment:$e,onSubmit:function(){(0,h.gs)({ersReference:ce,reasonCode:"reversal",comment:Ye}).then((function(e){0==(null==e?void 0:e.resultCode)?(te(e.resultMessage),$e("")):ee(e.resultMessage)})).catch((function(e){ee(e.resultMessage)})).finally((function(){return Je(!1)}))},onClose:function(){Je(!1),$e("")}}))},K=function(e){var t=e.isPostpaid,n=void 0!==t&&t,r=((0,l.useRouteMatch)().path,i()().AccessControlled);return a.createElement(a.Fragment,null,a.createElement(l.Switch,null,a.createElement(l.Route,null,n?a.createElement(r,{feature:o.R.AIRTIME_POSTPAID},a.createElement(j,{isPostpaid:n})):a.createElement(r,{feature:o.R.TOPUP},a.createElement(j,{isPostpaid:n})))))};var G=(0,S.Z)((function(e){return(0,y.Z)({appBar:{position:"relative"},box:{"& .MuiIconButton-label":{color:e.palette.primary.main},marginRight:"15px"},title:{marginLeft:e.spacing(2),flex:1},alert:{marginLeft:e.spacing(3)},button:{margin:e.spacing(1),border:"1px solid ".concat(e.palette.primary.main)},fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},heading:{fontWeight:"bold",textTransform:"capitalize",fontSize:16},fieldValue:{textTransform:"capitalize",fontSize:14,wordBreak:"break-all",color:"#0dc50a"},fieldValue1:{textTransform:"capitalize",fontSize:14,wordBreak:"break-all",textAlign:"center",fontWeight:"normal",color:"#000"},rowSpacing:{marginBottom:e.spacing(.5)},successIcon:{"& .MuiSvgIcon-root":{width:"2em",height:"2em"},display:"flex",justifyContent:"center",color:"#0dc50a"},icon:{"& .MuiSvgIcon-root":{width:"2em",height:"2em"},display:"flex",justifyContent:"center"},errorColor:{color:"#FF0000"},reversalColor:{color:"".concat(e.palette.primary.main)},successHeader:{display:"flex",justifyContent:"center"},dialog:{"&. MuiDialog-paperWidthSm":{maxWidth:"300px"}},element:{margin:e.spacing(1)},spacingBottom:{marginBottom:e.spacing(2)},btnSpacing:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},dialogAction:{justifyContent:"center"},printButton:{"@media print":{display:"none"}},closeIcon:{float:"right","@media print":{display:"none"}},backDrop:{color:"#fff",zIndex:1},circularProgress:{position:"absolute",top:"50%",left:"55%"},circularProgressClose:{position:"absolute",top:"50%",left:"55%",display:"none"},divider:{width:"100%",marginTop:e.spacing(.5)},rowSpacing2:{marginBottom:e.spacing(.5),marginTop:e.spacing(1),justifyContent:"center"}})})),J={resellerId:"",recipientMobileNo:"",amount:"",paymentMethod:"cash",comment:"",batchId:"",isMobile:!1};const X=function(){var e,t,n,l,r,i,o,c=(0,d.useTranslation)().t,u=G(),m=a.useState(!1),p=(0,s.Z)(m,2),S=(p[0],p[1]),y=(0,f.Z)(),V=y.showErrorMessage,F=y.showSuccessMessage,z=a.useState(!1),U=(0,s.Z)(z,2),j=U[0],K=U[1],X=a.useState(!1),Q=(0,s.Z)(X,2),Y=Q[0],$=Q[1],ee=a.useState(!1),te=(0,s.Z)(ee,2),ne=te[0],ae=te[1],le=a.useState(!1),re=(0,s.Z)(le,2),ie=(re[0],re[1]),oe=a.useState(J),ce=(0,s.Z)(oe,2),se=ce[0],ue=ce[1],me=a.useState(""),de=(0,s.Z)(me,2),pe=de[0],fe=de[1],ge=a.useState([]),Ee=(0,s.Z)(ge,2),ve=(Ee[0],Ee[1],a.useState(!1)),he=(0,s.Z)(ve,2),Ze=he[0],Se=he[1],ye=a.useState(0),be=(0,s.Z)(ye,2),Te=be[0],we=be[1],Re=a.useState(0),Ne=(0,s.Z)(Re,2),Ce=Ne[0],Ie=Ne[1],xe=a.useState(!1),Pe=(0,s.Z)(xe,2),ke=Pe[0],De=(Pe[1],a.useState(!1)),Me=(0,s.Z)(De,2),Ae=Me[0],Le=Me[1],Be=a.useState(!1),_e=(0,s.Z)(Be,2),Oe=_e[0],We=_e[1],He=a.useState(""),Ve=(0,s.Z)(He,2),Fe=Ve[0],qe=Ve[1],ze=a.useState(!1),Ue=(0,s.Z)(ze,2),je=Ue[0],Ke=Ue[1],Ge=(0,v.useSelector)((function(e){return null==e?void 0:e.auth}),v.shallowEqual),Je=window.config.language,Xe=a.useState([]),Qe=(0,s.Z)(Xe,2),Ye=Qe[0],$e=Qe[1],et=a.useState(!1),tt=(0,s.Z)(et,2),nt=(tt[0],tt[1],a.useState("")),at=(0,s.Z)(nt,2),lt=at[0],rt=at[1],it=function(){ke&&Se(!1),ie(!1),K(!1),Ke(!1)},ot=0,ct=0,st=function e(t,n,a,l){n.length;var r=n[t];if(r.hasOwnProperty("paymentMethod")){var i=window.config.currency,o=null!=r&&r.isMobile?"RESELLERMSISDN":"RESELLERID",s=null!=r&&r.isMobile?c("recipientMSISDN"):c("resellerId"),u=null!=r&&r.isMobile?r.recipientMobileNo:r.resellerId,m={sender:{type:"RESELLERID",id:Ge.user.requestedPrincipalId,accountTypeId:"RESELLER"},receiver:{type:o,id:u,accountTypeId:"RESELLER"},product:{productSKU:"transfer",amount:{value:r.amount,currency:i}},transactionProperties:{map:{preferredLanguage:Je,paymentMethod:null==r?void 0:r.paymentMethod,comments:null==r?void 0:r.comment,batchId:l}}};S(!0),(0,h.MP)(m).then((function(i){var o={endTime:null==i?void 0:i.endTime,ersReference:null==i?void 0:i.ersReference,resultMessage:null==i?void 0:i.resultMessage,receiverIdType:s,receiverId:u,initiatorId:null==i?void 0:i.transactionProperties.map["initiator-user-id"],state:null==i?void 0:i.state,amount:null==r?void 0:r.amount};a.push(o),$e(a),fe(i.ersReference);var c=n.length-1;n.length>=1&&(0===i.resultCode?(we(ct+=1),ae(!0)):(Ie(ot+=1),ae(!1)),c===t&&(K(!0),Se(!0),We(!1),Ke(!1)),c!==ct+ot-1&&e(t+1,n,a,l)),1===n.length&&(0===(null==i?void 0:i.resultCode)?(we(ct),ae(!0)):(Ie(ot),ae(!1)),Se(!0),We(!1),K(!0),Ke(!1))})).finally((function(){return S(!1)}))}},ut=a.useCallback((function(e){We(!0),ue(null!=e&&e.airtimeSellBulk?null==e?void 0:e.airtimeSellBulk[0]:J);var t=Ae?(new Date).getTime()+W().split("-")[0]:"",n=e.airtimeSellBulk.filter((function(e){return e.hasOwnProperty("paymentMethod")}));qe(t),ot=0,ct=0,we(0),Ie(0),st(0,n,[],t)}),[Ae]);return a.useEffect((function(){}),[Ae]),a.createElement(E.SeamlessContainer,{title:c("sellAirtimeStockPageTitle"),description:c("sellAirtimeStockPageDescription")},a.createElement(g.yT,{checkIsBulk:function(e){Le(e)},data:J,onFormSubmit:function(e){Ke(!je),We(!0),ut(e),Se(!1)},isReset:Ze,disableButton:Oe}),Oe?a.createElement(_.Z,{className:(0,Z.default)(u.backDrop),open:je,onClick:function(){return Ke(!1)}},a.createElement(B.Z,{color:"primary",className:(0,Z.default)(u.circularProgress)})):a.createElement(B.Z,{className:(0,Z.default)(u.circularProgressClose)}),a.createElement(N.Z,{open:j,onClose:it,"aria-labelledby":"product-variant-dialog",className:u.dialog},a.createElement(x.Z,{style:{justifyContent:"flex-end"}},a.createElement(k.Z,{edge:"end",className:u.closeIcon,color:"inherit",onClick:it,"aria-label":"close"},a.createElement(P.Z,null,"close"))),Ae?a.createElement(C.Z,null,a.createElement(A.Z,{container:!0,className:u.rowSpacing,spacing:3},a.createElement(A.Z,{item:!0,xs:12,className:(0,Z.default)(u.icon)},a.createElement(w.Z,null)),a.createElement(A.Z,{item:!0,xs:12,className:u.successHeader},a.createElement(D.Z,{className:u.heading},c("airtimeStockReceipt"))),a.createElement(A.Z,{item:!0,xs:12,className:u.successHeader},a.createElement(D.Z,{className:u.heading},"".concat(c("batchIdLabel"))),a.createElement(D.Z,null,null!=Fe?Fe:c("emptyValueMark"))),a.createElement(A.Z,{item:!0,xs:12},a.createElement(D.Z,{className:(0,Z.default)(u.fieldValue)},c("successfulTransactions")),a.createElement(D.Z,{className:u.fieldHeading},Te)),a.createElement(A.Z,{item:!0,xs:12},a.createElement(D.Z,{className:(0,Z.default)(u.fieldValue,u.errorColor)},c("failedTransactions")),a.createElement(D.Z,{className:u.fieldHeading},Ce))),a.createElement(A.Z,{container:!0,className:u.rowSpacing,spacing:3},Ye.map((function(e,t){return a.createElement(a.Fragment,{key:t},a.createElement(A.Z,{container:!0,className:u.rowSpacing2},a.createElement(A.Z,{item:!0},a.createElement(A.Z,{key:t},a.createElement(D.Z,{className:u.fieldHeading},c("transactionNo")+" ".concat(t+1))))),a.createElement(H.Z,{title:null==e?void 0:e.receiverIdType,value:null==e?void 0:e.receiverId,headingProps:{xs:6,sm:6,lg:4,md:4},valueProps:{xs:6,sm:6,lg:6,md:6}}),a.createElement(H.Z,{title:c("initiatorId"),value:null==e?void 0:e.initiatorId,headingProps:{xs:6,sm:6,lg:4,md:4},valueProps:{xs:6,sm:6,lg:6,md:6}}),a.createElement(H.Z,{title:c("Date"),value:(null==e?void 0:e.endTime.split("T")[0])+" "+(null==e?void 0:e.endTime.split("T")[1]).slice(0,8),headingProps:{xs:6,sm:6,lg:4,md:4},valueProps:{xs:6,sm:6,lg:6,md:6}}),a.createElement(H.Z,{title:c("amount"),value:null==e?void 0:e.amount,headingProps:{xs:6,sm:6,lg:4,md:4},valueProps:{xs:6,sm:6,lg:6,md:6}}),a.createElement(H.Z,{title:c("ersReference"),value:null==e?void 0:e.ersReference,headingProps:{xs:6,sm:6,lg:4,md:4},valueProps:{xs:6,sm:6,lg:6,md:6}}),a.createElement(H.Z,{title:c("status"),value:null==e?void 0:e.state,headingProps:{xs:6,sm:6,lg:4,md:4},valueProps:{xs:6,sm:6,lg:6,md:6}}),a.createElement(H.Z,{title:c("resultMessageForTransaction"),value:null==e?void 0:e.resultMessage,headingProps:{xs:6,sm:6,lg:4,md:4},valueProps:{xs:6,sm:6,lg:6,md:6}}),a.createElement(O.Z,{className:u.divider}))})))):a.createElement(C.Z,null,a.createElement(A.Z,{container:!0,className:u.rowSpacing,spacing:3},a.createElement(A.Z,{item:!0,xs:12,className:(0,Z.default)(u.successIcon,ne?"":u.errorColor)},a.createElement(w.Z,null)),a.createElement(A.Z,{item:!0,xs:12,className:u.successHeader},a.createElement(D.Z,{className:u.heading},c("airtimeStockReceipt"))),a.createElement(A.Z,{item:!0,xs:12,className:u.successHeader},a.createElement(D.Z,{className:u.heading},c(ne?"stockSellSuccess":"stockSellFailed"))),a.createElement(A.Z,{item:!0,xs:12},a.createElement(D.Z,{className:(0,Z.default)(u.fieldValue,ne?"":u.errorColor)},c(null===(e=Ye[0])||void 0===e?void 0:e.receiverIdType)),a.createElement(D.Z,{className:u.fieldHeading},null===(t=Ye[0])||void 0===t?void 0:t.receiverId)),a.createElement(A.Z,{item:!0,xs:12},a.createElement(D.Z,{className:(0,Z.default)(u.fieldValue,ne?"":u.errorColor)},c("initiatorId")),a.createElement(D.Z,{className:u.fieldHeading},null===(n=Ye[0])||void 0===n?void 0:n.initiatorId)),a.createElement(A.Z,{item:!0,xs:12},a.createElement(D.Z,{className:(0,Z.default)(u.fieldValue,ne?"":u.errorColor)},c("Date")),a.createElement(D.Z,{className:u.fieldHeading},(null===(l=Ye[0])||void 0===l?void 0:l.endTime.split("T")[0])+" "+(null===(r=Ye[0])||void 0===r||null===(i=r.endTime.split("T")[1])||void 0===i?void 0:i.slice(0,8)))),a.createElement(A.Z,{item:!0,xs:12},a.createElement(D.Z,{className:(0,Z.default)(u.fieldValue,ne?"":u.errorColor)},c("amount").toUpperCase()),a.createElement(D.Z,{className:u.fieldHeading},se.amount)),a.createElement(A.Z,{item:!0,xs:12},a.createElement(D.Z,{className:(0,Z.default)(u.fieldValue,ne?"":u.errorColor)},c("referenceNumber")),a.createElement(D.Z,{className:u.fieldHeading},pe)),a.createElement(A.Z,{item:!0,xs:12},a.createElement(D.Z,{className:(0,Z.default)(u.fieldValue,ne?"":u.errorColor)},c("resultMessageForTransaction")),a.createElement(D.Z,{className:u.fieldHeading},null===(o=Ye[0])||void 0===o?void 0:o.resultMessage)))),Ae?a.createElement(I.Z,null,a.createElement(M.Z,{className:(0,Z.default)(u.box,u.printButton)},a.createElement(L.ZP,{title:c("print")},a.createElement(k.Z,{edge:"end",className:u.button,color:"inherit",onClick:function(){window.focus(),window.print()},"aria-label":"Print"},a.createElement(b.Z,null))))):a.createElement(I.Z,null,a.createElement(M.Z,{className:(0,Z.default)(u.box,u.printButton)},a.createElement(L.ZP,{title:c("print")},a.createElement(k.Z,{edge:"end",className:u.button,color:"inherit",onClick:function(){window.focus(),window.print()},"aria-label":"Print"},a.createElement(b.Z,null))),ne&&a.createElement(L.ZP,{title:c("requestReversal")},a.createElement(k.Z,{edge:"end",className:u.button,color:"inherit",onClick:function(){$(!0),K(!1)},"aria-label":"Transfer"},a.createElement(T.Z,null))),!ne&&a.createElement(L.ZP,{title:c("retry")},a.createElement(k.Z,{edge:"end",className:u.button,color:"inherit",onClick:function(){var e={};Ke(!0),e.airtimeSellBulk=[se],ut(e),K(!1)},"aria-label":"Transfer"},a.createElement(R.Z,null)))))),a.createElement(q,{open:Y,onClose:function(){$(!1),ie(!1),Ke(!1),rt("")},comment:lt,setComment:rt,onSubmit:function(){We(!0),function(){Se(!1),S(!0);var e={ersReference:pe,comment:lt,reasonCode:"reversal"};(0,h.Tk)(e).then((function(e){ie(!0),We(!1),0===e.resultCode?(F(e.resultMessage||c("requestReversalSuccess")),$(!1),ie(!1),Ke(!1)):V(e.resultMessage||c("requestReversalFailed"))})).catch((function(e){ie(!0),V(e.message)})).finally((function(){return S(!1)}))}()}}))},Q=function(){(0,l.useRouteMatch)().path;var e=i()().AccessControlled;return a.createElement(a.Fragment,null,a.createElement(l.Switch,null,a.createElement(l.Route,null,a.createElement(e,{feature:o.R.AIRTIMESTOCK},a.createElement(X,null)))))};n(72533),n(3651),n(53822);var Y=n(64423);const $=function(){(0,l.useRouteMatch)().path;var e=i()().AccessControlled;return a.createElement(a.Fragment,null,a.createElement(l.Switch,null,a.createElement(l.Route,null,a.createElement(e,{feature:o.R.P2P},a.createElement(Y.default,null)))))},ee=function(){var e=(0,d.useTranslation)().t;return a.createElement(E.SeamlessContainer,{title:e("p2pPinResetTitle"),description:e("p2pPinResetDescription")},a.createElement(g.dj,null))},te=function(){var e=i()().AccessControlled;return a.createElement(a.Fragment,null,a.createElement(l.Switch,null,a.createElement(l.Route,null,a.createElement(e,{feature:o.R.P2P_PIN_RESET},a.createElement(ee,null)))))}},90204:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var a=n(2411),l=n(48049),r=n(44104),i=n.n(r),o=n(27490),c=n(14459),s=n.n(c);const u=function(){(0,l.useRouteMatch)().path;var e=i()().AccessControlled;return a.createElement(a.Fragment,null,a.createElement(l.Switch,null,a.createElement(l.Route,null,a.createElement(e,{feature:o.R.MANUAL_ADJUSTMENT},a.createElement(s(),{module_name:"transaction"})))))}},99054:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var a=n(2411),l=n(48049),r=n(44104),i=n.n(r),o=n(27490),c=n(37603),s=n(29609),u=n(94818);const m=function(){var e=(0,s.useTranslation)().t;return a.createElement(c.SeamlessContainer,{title:e("pendingTransaction"),description:e("pendingTransactionDescription")},a.createElement(u.m6,null))},d=function(){(0,l.useRouteMatch)().path;var e=i()().AccessControlled;return a.createElement(a.Fragment,null,a.createElement(l.Switch,null,a.createElement(l.Route,null,a.createElement(e,{feature:o.R.PENDING_TRANSACTIONS},a.createElement(m,null)))))}},53822:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var a=n(2411),l=n(37603),r=n(29609),i=n(44781),o=n(48049);const c=function(){var e=(0,r.useTranslation)().t,t=(0,o.useParams)().id;return a.createElement(l.SeamlessContainer,{title:e("transactionReference")+" - ".concat(t),description:e("ViewTransactionDesc")},a.createElement(i.default,null))}},3651:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var a=n(2411),l=n(48049),r=n(44104),i=n.n(r),o=n(27490),c=n(37603),s=n(29609),u=n(20310);const m=function(e){var t=e.isHierarchy,n=void 0!==t&&t,l=e.customerCare,r=void 0!==l&&l,i=(0,s.useTranslation)().t;return a.createElement(c.SeamlessContainer,{title:i("searchTransaction"),description:i("searchTransactionDescription","")},a.createElement(u.default,{isHierarchy:n,customerCare:r}))};var d=n(53822);const p=function(e){var t=e.isHierarchy,n=void 0!==t&&t,r=e.customerCare,c=void 0!==r&&r,s=((0,l.useRouteMatch)().path,i()().AccessControlled);return a.createElement(a.Fragment,null,a.createElement(l.Switch,null,a.createElement(l.Route,null,n?a.createElement(s,{feature:o.R.HIERARCHY_SEARCH},a.createElement(m,{isHierarchy:n,customerCare:c})):a.createElement(s,{feature:o.R.SEARCH},a.createElement(m,{customerCare:c}))),a.createElement(l.Route,null,a.createElement(s,{feature:o.R.VIEW_TRANSACTION},a.createElement(d.Z,null)))))}},74920:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var a=n(2411),l=n(37603),r=n(29609),i=n(48049),o=n(59850),c=n(44104),s=n.n(c),u=n(27490);const m=function(){var e=(0,r.useTranslation)().t,t=((0,i.useParams)().id,s()().AccessControlled);return a.createElement(t,{feature:u.R.STANDARD_BUNDLE_LIST},a.createElement(l.SeamlessContainer,{title:e("standardBundlePageTitle"),description:e("standardBundlePageDescription")},a.createElement(o.Z,null)))}},44106:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var a=n(2411),l=n(48049),r=n(74315),i=n(37603),o=n(29609),c=n(23664),s=n(94818),u={amount:"",productCategory:"",topUpPrincipalId:"",paymentMethod:"CASH",comments:""};const m=function(){var e=(0,o.useTranslation)().t,t=a.useState(!1),n=(0,r.Z)(t,2),m=(n[0],n[1],(0,c.Z)());return m.showErrorMessage,m.showSuccessMessage,m.showWarningMessage,(0,l.useHistory)(),a.createElement(i.SeamlessContainer,{title:e(""),description:e("")},a.createElement(s.j3,{data:u}))},d=function(){return(0,l.useRouteMatch)().path,a.createElement(a.Fragment,null,a.createElement(l.Switch,null,a.createElement(l.Route,null,a.createElement(m,null))))}},27490:(e,t,n)=>{"use strict";n.d(t,{R:()=>a});var a={TOPUP:"TOPUP",BUNDLE:"CREATE_BUNDLE",AIRTIMESTOCK:"AIRTIMESTOCK",AIRTIME_POSTPAID:"AIRTIME_POSTPAID",SEARCH:"SEARCH",VIEW_TRANSACTION:"SEARCH_ARCHIVED_TRANSACTION",REVERSE_TRANSACTION:"TRANSATION_REVERSAL",O2C:"O2C",CREATE_O2C:"CREATE_O2C",O2C_WITHDRAWAL:"O2C_WITHDRAWAL",O2C_APPROVAL_LIST:"O2C_APPROVAL_LIST",C2C:"C2C",P2P:"P2P",P2P_PIN_RESET:"P2P_PIN_RESET",CREATE_C2C:"CREATE_C2C",C2C_WITHDRAWAL:"C2C_WITHDRAWAL",C2C_APPROVAL_LIST:"C2C_APPROVAL_LIST",APPROVE_C2C_TRANSACTION:"APPROVE_C2C_TRANSACTION",REJECT_C2C_TRANSACTION:"REJECT_C2C_TRANSACTION",PENDING_TRANSACTIONS:"PENDING_TRANSACTIONS",APPROVE_TRANSACTION:"APPROVE_TRANSACTION",REJECT_TRANSACTION:"CANCEL_TRANSACTION",RETURN:"RETURN",CREATE_RETURN:"CREATE_RETURN",HIERARCHY_SEARCH:"SEARCH_HIERARCHY",APPROVE_O2C_TRANSACTION:"APPROVE_O2C_TRANSACTION",REJECT_O2C_TRANSACTION:"REJECT_O2C_TRANSACTION",ACTIVATE_BUNDLE:"ACTIVATE_BUNDLE",MANUAL_ADJUSTMENT:"MANUAL_ADJUSTMENT",STANDARD_BUNDLE_LIST:"STANDARD_BUNDLE_LIST"}}}]);