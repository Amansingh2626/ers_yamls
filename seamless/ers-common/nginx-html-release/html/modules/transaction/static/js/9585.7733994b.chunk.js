(self.webpackChunk_unified_transaction=self.webpackChunk_unified_transaction||[]).push([[9585,2916,5015],{46491:(e,t,n)=>{"use strict";n.d(t,{X:()=>a});var r=n(94106);const a=(e,t={abortEarly:!1})=>async(n,a,s=!1)=>{try{return t.context,{values:await e.validate(n,Object.assign(Object.assign({},t),{context:a})),errors:{}}}catch(e){const t=((e,t)=>Array.isArray(e.inner)&&e.inner.length?e.inner.reduce(((e,{path:n,message:r,type:a})=>{const s=e[n]&&e[n].types||{},l=n||a;return Object.assign(Object.assign({},e),l?{[l]:Object.assign(Object.assign({},e[l]||{message:r,type:a}),t?{types:Object.assign(Object.assign({},s),{[a]:s[a]?[...[].concat(s[a]),r]:r})}:{})}:{})}),{}):{[e.path]:{message:e.message,type:e.type}})(e,s);return{values:{},errors:(0,r.T8)(t)}}}},63415:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>b});var r=n(2411),a=n(79692),s=n(12420),l=n(67358),o=n(27556),i=n(48049),c=n(93281),u=n(44104),d=n.n(u),m=n(34579),p=n(3651),f=n(53822),v=n(72533),g=n(69440),E=n(99054),h=n(44106),R=n(17410),L=n(90204),y=n(74920),S=(0,a.Z)((function(e){return(0,s.Z)({root:{padding:e.spacing(1)}})}));const b=function(){var e=S(),t=(0,i.useRouteMatch)().path,n=d()().AccessControllProvider,a=(0,m.Z)("TRANSACTION");return a?r.createElement(n,{featureList:a},r.createElement(o.Z,{elevation:0,className:e.root},r.createElement(i.Switch,null,r.createElement(i.Route,{path:t+"/:type/:id"},r.createElement(f.Z,null)),r.createElement(i.Route,{path:t+"/topup"},r.createElement(c.W6,null)),r.createElement(i.Route,{path:t+"/airtime-postpaid"},r.createElement(c.W6,{isPostpaid:!0})),r.createElement(i.Route,{path:t+"/bundle"},r.createElement(v.Z,null)),r.createElement(i.Route,{path:t+"/airtime-stock"},r.createElement(c.wB,null)),r.createElement(i.Route,{path:t+"/subscriberTopup"},r.createElement(h.Z,null)),r.createElement(i.Route,{path:t+"/o2c"},r.createElement(g.u,null)),r.createElement(i.Route,{path:t+"/c2c"},r.createElement(g.Z,null)),r.createElement(i.Route,{path:t+"/p2p"},r.createElement(c.Ul,null)),r.createElement(i.Route,{path:t+"/p2p-pin-reset"},r.createElement(c.HG,null)),r.createElement(i.Route,{path:t+"/return"},r.createElement(R.Z,null)),r.createElement(i.Route,{path:t+"/search"},r.createElement(p.Z,null)),r.createElement(i.Route,{path:t+"/hierarchy"},r.createElement(p.Z,{isHierarchy:!0})),r.createElement(i.Route,{path:t+"/pending"},r.createElement(E.Z,null)),r.createElement(i.Route,{path:t+"/manual-adjustment"},r.createElement(L.Z,null)),r.createElement(i.Route,{path:t+"/standard-bundle"},r.createElement(y.Z,null)),r.createElement(i.Route,{path:t},r.createElement(i.Redirect,{to:"/home"}))))):r.createElement(l.Z,null)}},20310:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>E});var r=n(7560),a=n(51119),s=n(74315),l=n(2411),o=n(29609),i=n(76787),c=n(41744),u=n(96545),d=n(23664),m=n(31807),p=n(19157),f=n(38670);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const E=function(e){var t=e.isHierarchy,n=void 0!==t&&t,a=e.customerCare,v=void 0!==a&&a,E=((0,o.useTranslation)().t,l.useState(!1)),h=(0,s.Z)(E,2),R=h[0],L=h[1],y=l.useState(0),S=(0,s.Z)(y,2),b=S[0],O=S[1],Z=l.useState([]),T=(0,s.Z)(Z,2),A=T[0],w=T[1],N=(0,d.Z)(),j=N.showErrorMessage,P=N.showWarningMessage,C=l.useState("desc"),D=(0,s.Z)(C,2),I=D[0],x=D[1],M=l.useState([]),k=(0,s.Z)(M,2),H=k[0],U=k[1],z=l.useState([]),_=(0,s.Z)(z,2),F=_[0],q=_[1],K=(0,c.useServerTable)({page:0,perPage:20,order:"asc",orderBy:"timestamp",filter:{}}),V={transactionReference:"",senderResellerId:"",receiverResellerId:"",initiatorResellerId:"",senderMsisdn:"",receiverMsisdn:"",transactionTypeOrProfile:"ALL",transactionStatus:"ALL",productType:"ALL",amount:"",from:new Date(Date.now()-6048e5),to:new Date,batchId:"",SenderExternalCode:"",ReceiverExternalCode:"",SenderResellerType:"",ReceiverResellerType:"",domainName:"",domainType:"ALL"},W=l.useState(V),$=(0,s.Z)(W,2),B=$[0],G=$[1],X=(0,f.useSelector)((function(e){return e.auth})).user,J=function(e,t,r){var a,s,l,o,i,c;G(e);var d=new Date(Date.now()-6048e5),p=new Date(e.to-6048e5),f=new Date(e.from),v=new Date(f.getTime()-6e4*f.getTimezoneOffset()).toISOString(),E=new Date,h=new Date(e.to),R=new Date(h.getTime()-6e4*h.getTimezoneOffset()).toISOString();d.setUTCHours(0,0,0,0),p.setUTCHours(0,0,0,0),E.setUTCHours(23,59,59,0);var y,S,b,Z={request:{size:t,page:r,ErsReference:e.transactionReference||"ALL",SenderResellerId:e.senderResellerId||"ALL",ReceiverResellerId:e.receiverResellerId||"ALL",SenderMSISDN:e.senderMsisdn||"ALL",ReceiverMSISDN:e.receiverMsisdn||"ALL",TransactionProfile:e.transactionTypeOrProfile||"ALL",ResultStatus:e.transactionStatus||"ALL",ProductSKU:e.productType||"ALL",fromDate:""===e.from?e.to?(0,m.Z)(p.toISOString()):(0,m.Z)(d.toISOString()):v.slice(0,10)+"T00:00:00.000Z",toDate:""===e.to?(0,m.Z)(E.toISOString()):R.slice(0,10)+"T23:59:59.000Z",batchId:e.batchId||"ALL",SenderExternalCode:e.SenderExternalCode||"ALL",ReceiverExternalCode:e.ReceiverExternalCode||"ALL",ReceiverResellerType:e.ReceiverResellerType||"ALL",SenderResellerType:e.SenderResellerType||"ALL",sort:I,fromAmount:e.amount?"".concat(e.amount):"0",toAmount:e.amount?"".concat(e.amount):"".concat(Number.MAX_SAFE_INTEGER),reportName:n?"Hierarchy Transaction Search":"All Transactions Report",resellerPath:X.resellerPath,userId:X.userId,domainName:e.domainName||"ALL",domainType:e.domainType||"ALL"}},T=null==X||null===(a=X.info)||void 0===a||null===(s=a.additionalFields)||void 0===s?void 0:s.filter((function(e){return"accessibleRegionNames"===(null==e?void 0:e.name)})),A=(null===(l=T[0])||void 0===l?void 0:l.value)&&(null===(o=T[0])||void 0===o||null===(i=o.value)||void 0===i||null===(c=i.split(","))||void 0===c?void 0:c.map((function(e){return{key:e,value:e}})))||[];(null==A?void 0:A.length)>0?Object.assign(Z.request,{zone:(null==F?void 0:F.map((function(e){return e.value})).join(","))||(null==X||null===(y=X.info)||void 0===y||null===(S=y.additionalFields)||void 0===S||null===(b=S.filter((function(e){return"accessibleRegionNames"===(null==e?void 0:e.name)}))[0])||void 0===b?void 0:b.value)}):Object.assign(Z.request,{zone:"ALL"}),L(!0),(0,u.JN)(Z).then((function(e){if(0==(null==e?void 0:e.resultCode))if(null!=e&&e.list){O(null==e?void 0:e.totalRecordCount);var t=null==e?void 0:e.list.map((function(e,t){return g(g({},e),{},{id:t})}));w(t)}else w([]),O(0);else w([]),O(0),P(null==e?void 0:e.resultDescription)})).catch((function(e){w([]),O(0),j(null==e?void 0:e.resultDescription)})).finally((function(){K.perPage!==t&&K.onPageSizeChange(t),K.page!==r&&K.onPageChange(r)})),L(!1)};return l.useEffect((function(){J(B,K.perPage,K.page)}),[K.page,K.perPage,I]),l.useEffect((function(){(0,u.Z6)().then((function(e){var t=[];e.products.forEach((function(e){var n;return null==e||null===(n=e.variants)||void 0===n?void 0:n.forEach((function(e){var n={key:null==e?void 0:e.productSKU,value:null==e?void 0:e.productSKU};t.push(n)}))})),U(t)}))}),[]),l.createElement(l.Fragment,null,l.createElement(i.Z,{setTransactionList:w,data:V,loading:!1,onFormSubmit:J,productOptions:H,selectedRegionOptions:F,setSelectedRegionOptions:q,customerCare:v}),l.createElement("div",{style:{height:700,width:"100%"}},l.createElement(p.Z,(0,r.Z)({isHierarchy:n,loading:R,totalCount:b,transactionList:A,timeOrder:I,setTimeOrder:x,customerCare:v},K))))}},74042:(e,t,n)=>{"use strict";function r(e,t){e.classList?e.classList.add(t):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}n.d(t,{Z:()=>r})},94693:(e,t,n)=>{"use strict";function r(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function a(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=r(e.className,t):e.setAttribute("class",r(e.className&&e.className.baseVal||"",t))}n.d(t,{Z:()=>a})}}]);