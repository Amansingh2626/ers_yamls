(self.webpackChunk_unified_trip=self.webpackChunk_unified_trip||[]).push([[2308],{5927:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s,E:()=>c});var a=n(11746),l=n(51119),r=n(76635);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c={disableOrderType:!1,orderType:"",selectedCat:null,selectedProducts:[],selectedVariants:[],serialRangeList:{},selectedSerials:[],selectedStock:[],selectedByRange:[],stockRows:[],recoverFrom:null,buyer:null,returnOrder:null,serials:{},returnTo:null,seller:null,products:[],paymentAgreement:"",paymentMode:"",stockQuantity:[],taxes:[],dropLocation:[],pickupLocation:[],deliveryOptions:{},services:{topups:[]},potentialReceivers:[],groups:[],routeInfo:[],subscriberAdditionalFields:null,additionalFields:[]};const s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"category_select":var n=o(o({},e),{},{selectedCat:t.payload,selectedProducts:c.selectedProducts,selectedVariants:c.selectedVariants});return n;case"product_select":return o(o({},e),{},{selectedProducts:t.payload,selectedVariants:c.selectedVariants});case"variant_select":return o(o({},e),{},{selectedVariants:t.payload});case"disable_ordertype":return o(o({},e),{},{disableOrderType:t.payload});case"stock_select":return o(o({},e),{},{selectedStock:t.payload.ids,stockRows:t.payload.rows});case"stock_range_select":return o(o({},e),{},{serialRangeList:t.payload.value,selectedByRange:e.selectedByRange.concat(t.payload.data),selectedSerials:e.selectedSerials.concat(t.payload.serial)});case"remove_range_select":return o(o({},e),{},{serialRangeList:t.payload.value,selectedByRange:t.payload.data,selectedSerials:t.payload.serial});case"recover_from":return o(o({},e),{},{recoverFrom:t.payload});case"buyer_select":return o(o({},e),{},{buyer:t.payload});case"order_select":return o(o({},e),{},{returnOrder:t.payload});case"order_select_reset":return o(o({},e),{},{returnOrder:c.returnOrder});case"box_item_selected":var i=t.payload,s=i.items,u=i.productSKU,d=i.boxId,m=(0,r.cloneDeep)(e.serials);return Object.getOwnPropertyNames(m).includes(u)?m[u][d]=s:m[u]=(0,l.Z)({},d,s),o(o({},e),{},{serials:m});case"set_serials":return o(o({},e),{},{serials:t.payload});case"return_to_select":return o(o({},e),{},{returnTo:t.payload});case"return_to_reset":return o(o({},e),{},{returnTo:c.returnTo});case"seller_select":return o(o({},e),{},{seller:t.payload});case"product_loaded":return o(o({},e),{},{products:t.payload});case"payment_mode_selected":return o(o({},e),{},{paymentMode:t.payload});case"payment_agreement_selected":return o(o({},e),{},{paymentAgreement:t.payload});case"stock_quantity_select":return o(o({},e),{},{stockQuantity:t.payload});case"tax_loaded":return o(o({},e),{},{taxes:t.payload});case"drop_location_select":return o(o({},e),{},{dropLocation:t.payload});case"pickup_location_select":return o(o({},e),{},{pickupLocation:t.payload});case"delivery_option_select":return o(o({},e),{},{deliveryOptions:t.payload});case"topup_selected":var p=o(o({},e.services),{},{topups:t.payload});return o(o({},e),{},{services:p});case"group_selected":return o(o({},e),{},{groups:t.payload});case"route_info_selected":return o(o({},e),{},{routeInfo:t.payload});case"subscriber_additional_fields":return o(o({},e),{},{subscriberAdditionalFields:t.payload});case"set_addtional_info":return o(o({},e),{},{additionalFields:t.payload});case"total_amount":var v=(0,a.Z)(e.additionalFields),g=v.findIndex((function(e){return e.key===t.payload.key}));return-1===g?v=v.concat(t.payload):v[g]=t.payload,o(o({},e),{},{additionalFields:v});case"reset":var f=e.orderType;return o(o({},c),{},{orderType:f});default:return e}}},87516:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var a=n(74315),l=n(2411),r=n.n(l),i=n(38670);const o=function(e){var t=r().useState(null),n=(0,a.Z)(t,2),l=n[0],o=n[1],c=(0,i.useSelector)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.rbac}),i.shallowEqual);return r().useEffect((function(){var t,n=(null===(t=c.features.find((function(t){return t.module===e})))||void 0===t?void 0:t.features)||[];o(n)}),[c]),l}},77188:(e,t,n)=>{"use strict";n.d(t,{HN:()=>ti,jH:()=>Ei,bB:()=>si,Jd:()=>vi,Lo:()=>di,eV:()=>Br,F_:()=>Jr});var a=n(44104),l=n.n(a),r=n(2411),i=n.n(r),o=n(48049);const c="VIEW_AGENTS_LIST",s="VIEW_AGENT_LIST",u="EDIT_AGENT",d="VIEW_TASKS_LIST",m="VIEW_TASK_LIST",p="VIEW_TRIPS_LIST",v="VIEW_TRIP_LIST",g="VIEW_MANUALTRIPS_LIST",f="VIEW_MANUALTRIP_LIST",E="VIEW_RATECARDS_LIST",y="VIEW_REQUESTEDTRIPS_LIST",h="VIEW_REQUESTEDTRIP_DETAILS",Z="VIEW_BILLING_FREQUENCY_LIST",b="VIEW_BILLING_FREQUENCY_DETAILS",S="VIEW_VENDOR_PROPOSED",I="ROUTE_OPTIMIZATION_BTN",N="MERGE_ORDER_BTN";var x=n(11746),w=n(74315),C=n(34126),O=n(61416);const T=n.n(O)();var k="/aas/v1/delivery",P=function(e){return T("".concat(k,"/action/external-trip"),{method:"POST",body:e})},D=function(e){return T("".concat(k,"/mergeHistory/").concat(e))},B=n(33553),L=n(77277),R=n(60905),F=n(67358),M=n(90436),j=n(79692),W=n(12420),A=n(70773),q=n(19721),U=n(29609);const z=function(){var e=(0,q.useSnackbar)().enqueueSnackbar,t=(0,U.useTranslation)().t;function n(e){var n=t("anErrorOccurred");return["resultMessage","message","resultDescription"].forEach((function(t){e.hasOwnProperty(t)&&(n=e[t])})),n}return{showSuccessMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"success"})},showErrorMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"error"})},showInfoMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"info"})},showWarningMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"warning"})}}};var _=n(6277),V=n(15459),K=n(85256),H=n(7560),J=(0,j.Z)((function(e){return(0,W.Z)({fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{textTransform:"capitalize",fontSize:14}})}));const Q=function(e){var t=e.headingProps,n=void 0===t?{xs:12,sm:3}:t,a=e.valueProps,l=void 0===a?{xs:12,sm:3}:a,i=e.title,o=e.value,c=((0,U.useTranslation)().t,J());return o&&"NULL"!=o&&"Null"!=o?r.createElement(r.Fragment,null,r.createElement(R.Z,(0,H.Z)({item:!0},n),r.createElement(M.Z,{className:c.fieldHeading},i)),r.createElement(R.Z,(0,H.Z)({item:!0},l),r.createElement(M.Z,{className:c.fieldValue},o))):null};var Y,G,$,X=n(27616),ee=n(8284),te=n(70660),ne=n(64566),ae=(0,j.Z)((function(e){return(0,W.Z)({spacingTop:{marginTop:e.spacing(3)},spacingBottom:{marginBottom:e.spacing(1)},wrapper:{padding:e.spacing(2)},titleSpacing:{marginBottom:e.spacing(1)},subTitleSpacing:{marginBottom:e.spacing(1)},dividerSpacing:{marginBottom:e.spacing(3)},fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{textTransform:"capitalize",fontSize:14},rowSpacing:{marginBottom:e.spacing(.5)},stats:{margin:e.spacing(1)},fullWidth:{width:"100%"},innerTitle:{color:e.palette.secondary.light},displayBlock:{display:"block"},orderBox:{border:"1px solid #EDEDED",margin:"10px",width:"100%",borderRadius:"10px",padding:"10px",background:"#F7F7F7"}})})),le=(0,V.Z)((function(e){return(0,W.Z)({root:{backgroundColor:e.palette.background.default,borderBottom:"1px solid rgba(0, 0, 0, .125)",marginBottom:-1,minHeight:56,"&$expanded":{minHeight:56}},content:{"&$expanded":{margin:"12px 0"}},expanded:{}})}))(ee.Z),re=(null===(Y=window)||void 0===Y||null===(G=Y.config)||void 0===G||null===($=G.trip)||void 0===$?void 0:$.hideKeysInViewPage)||["motte_de_passe","motte_de_passe_flag"];const ie=function(e){var t,n,a,l,i,o,c,s,u,d,m,p,v,g,f,E,y,h,Z,b,S,I,N,x,C,O,T,k,P,D,B,L,F,j,W,A,q,z,V,H,J,Y,G,$,ee,ie,oe,ce,se,ue,de,me,pe,ve,ge,fe,Ee,ye,he,Ze,be,Se,Ie,Ne,xe,we,Ce,Oe,Te,ke,Pe,De,Be,Le,Re,Fe,Me,je,We,Ae,qe,Ue,ze,_e,Ve,Ke,He,Je,Qe,Ye,Ge,$e,Xe,et,tt,nt,at,lt,rt,it,ot,ct,st,ut,dt,mt,pt,vt,gt,ft,Et,yt,ht,Zt,bt,St,It,Nt,xt,wt,Ct,Ot,Tt,kt,Pt,Dt,Bt,Lt,Rt,Ft,Mt,jt=e.taskData,Wt=(e.loading,ae()),At=jt.agentId,qt=void 0===At?"":At,Ut=jt.createdDate,zt=void 0===Ut?"":Ut,_t=jt.data,Vt=void 0===_t?"":_t,Kt=jt.destinationId,Ht=void 0===Kt?"":Kt,Jt=jt.documentId,Qt=void 0===Jt?"":Jt,Yt=jt.externalId,Gt=void 0===Yt?"":Yt,$t=jt.id,Xt=void 0===$t?0:$t,en=jt.lastModifiedDate,tn=void 0===en?"":en,nn=jt.parentAgentId,an=void 0===nn?"":nn,ln=jt.status,rn=void 0===ln?"":ln,on=jt.taskType,cn=void 0===on?"":on,sn=(0,U.useTranslation)().t,un=r.useState("panel1"),dn=(0,w.Z)(un,2),mn=dn[0],pn=dn[1],vn=Vt&&JSON.parse(Vt),gn=function(e,t){return t=t||"","".concat(e=e||0," ").concat(t)},fn=function(e){var t=e.replace(/([a-z])([A-Z])/g,"$1 $2");return(t=t.split("_").join(" "))&&t[0].toUpperCase()+t.slice(1)};return r.createElement(R.Z,{container:!0},r.createElement(X.Z,{square:!0,expanded:"panel1"===mn,onChange:("panel1",function(e,t){pn(!!t&&"panel1")}),className:Wt.fullWidth},r.createElement(le,{"aria-controls":"panel1d-content",id:"panel1d-header",expandIcon:r.createElement(ne.Z,null)},r.createElement(M.Z,{variant:"subtitle1",color:"primary"},sn("taskDetails"))),r.createElement(te.Z,{className:Wt.displayBlock},r.createElement(R.Z,{container:!0,spacing:3,className:Wt.rowSpacing},r.createElement(Q,{title:sn("id"),value:Xt}),r.createElement(Q,{title:sn("agentId"),value:qt}),r.createElement(Q,{title:sn("parentAgentId"),value:an}),r.createElement(Q,{title:sn("createdDate"),value:zt}),r.createElement(Q,{title:sn("destinationId"),value:Ht}),r.createElement(Q,{title:sn("lastModifiedDate"),value:tn}),r.createElement(Q,{title:sn("status"),value:rn}),r.createElement(Q,{title:sn("taskType"),value:cn})),r.createElement(R.Z,{container:!0,spacing:3,className:Wt.rowSpacing},r.createElement(Q,{title:sn("documentId"),value:Qt,valueProps:{xs:12,sm:9}}),r.createElement(Q,{title:sn("externalId"),value:Gt,valueProps:{xs:12,sm:9}})))),vn&&r.createElement(X.Z,{square:!0,className:Wt.fullWidth},r.createElement(le,{"aria-controls":"panel2d-content",id:"panel2d-header",expandIcon:r.createElement(ne.Z,null)},r.createElement(M.Z,{variant:"subtitle1",color:"primary"},sn("orderInfo"))),r.createElement(te.Z,{className:Wt.displayBlock},r.createElement(R.Z,{container:!0,spacing:3,className:Wt.rowSpacing},r.createElement(Q,{title:sn("orderId"),value:null==vn?void 0:vn.orderId,valueProps:{xs:12,sm:9}}),r.createElement(Q,{title:sn("internalOrderId"),value:null==vn?void 0:vn.internalOrderId,valueProps:{xs:12,sm:9}}),r.createElement(Q,{title:sn("deliveryOption"),value:null==vn?void 0:vn.deliveryOption}),r.createElement(Q,{title:sn("orderDate"),value:null==vn?void 0:vn.orderDate}),r.createElement(Q,{title:sn("orderInternalType"),value:null==vn?void 0:vn.orderInternalType}),r.createElement(Q,{title:sn("orderType"),value:null==vn?void 0:vn.orderType}),r.createElement(Q,{title:sn("paymentAggrement"),value:null==vn?void 0:vn.paymentAggrement}),r.createElement(Q,{title:sn("paymentMode"),value:null==vn?void 0:vn.paymentMode}),r.createElement(Q,{title:sn("sequence"),value:null==vn?void 0:vn.sequence}),r.createElement(Q,{title:sn("volume"),value:gn(null==vn||null===(t=vn.orderVolume)||void 0===t?void 0:t.value,null==vn||null===(n=vn.orderVolume)||void 0===n?void 0:n.unit)}),r.createElement(Q,{title:sn("weight"),value:gn(null==vn||null===(a=vn.orderWeight)||void 0===a?void 0:a.value,null==vn||null===(l=vn.orderWeight)||void 0===l?void 0:l.unit)})))),vn.orderRows&&r.createElement(X.Z,{square:!0,className:Wt.fullWidth},r.createElement(le,{"aria-controls":"panel3d-content",id:"panel3d-header",expandIcon:r.createElement(ne.Z,null)},r.createElement(M.Z,{variant:"subtitle1",color:"primary"},sn("orderDetails"))),r.createElement(te.Z,{className:Wt.displayBlock},r.createElement(r.Fragment,null,r.createElement(R.Z,{container:!0,spacing:3,className:Wt.rowSpacing},vn.orderRows&&vn.orderRows.length>0&&r.createElement(R.Z,{item:!0,xs:12,className:Wt.spacingTop},r.createElement(M.Z,{variant:"subtitle2",className:Wt.innerTitle},sn("deliveryOrders"))),null===(i=vn.orderRows)||void 0===i?void 0:i.map((function(e,t){var n,a,l,i,o,c,s,u,d,m,p,v,g,f,E,y,h,Z,b,S,I,N,x,w,C,O,T,k;return r.createElement(R.Z,{container:!0,spacing:3,key:t,className:(Wt.rowSpacing,Wt.orderBox)},r.createElement(r.Fragment,{key:t},e.inventoryList&&e.inventoryList.length>0&&r.createElement(R.Z,{item:!0,xs:12},r.createElement(M.Z,{variant:"subtitle2",className:Wt.innerTitle},sn("inventoryList"))),e.inventoryList.map((function(e,t){return r.createElement(R.Z,{item:!0,xs:12,className:Wt.spacingTop,key:t},r.createElement(R.Z,{container:!0,spacing:3,className:Wt.rowSpacing},r.createElement(Q,{title:sn("batchId"),value:null==e?void 0:e.batchId}),r.createElement(Q,{title:sn("inventoryId"),value:null==e?void 0:e.inventoryId}),r.createElement(Q,{title:sn("ownerHistory"),value:null==e?void 0:e.ownerHistory}),r.createElement(Q,{title:sn("ownerId"),value:null==e?void 0:e.ownerId}),r.createElement(Q,{title:sn("productSKU"),value:null==e?void 0:e.productSKU}),r.createElement(Q,{title:sn("serialNo"),value:null==e?void 0:e.serialNo})),r.createElement(R.Z,{container:!0,spacing:3,className:Wt.rowSpacing},r.createElement(Q,{title:sn("refNo"),value:null==e?void 0:e.refNo,valueProps:{xs:12,sm:9}})),r.createElement(R.Z,{container:!0,spacing:3,className:Wt.spacingTop},r.createElement(K.Z,{className:Wt.spacingBottom})))})),e.product&&r.createElement(r.Fragment,null,r.createElement(R.Z,{item:!0,xs:12,className:Wt.spacingTop},r.createElement(M.Z,{variant:"subtitle2",color:"primary",className:(0,_.default)(Wt.innerTitle,Wt.spacingBottom)},sn("product"))),r.createElement(R.Z,{item:!0,xs:12},r.createElement(R.Z,{container:!0,spacing:3,className:Wt.rowSpacing},r.createElement(Q,{title:sn("calculatedTax"),value:gn(null===(n=e.product)||void 0===n||null===(a=n.calculatedTax)||void 0===a?void 0:a.amount,null===(l=e.product)||void 0===l||null===(i=l.calculatedTax)||void 0===i?void 0:i.currency)}),r.createElement(Q,{title:sn("categoryPath"),value:null===(o=e.product)||void 0===o?void 0:o.categoryPath}),r.createElement(Q,{title:sn("productCode"),value:null===(c=e.product)||void 0===c?void 0:c.productCode})),r.createElement(R.Z,{container:!0,spacing:3,className:Wt.rowSpacing},r.createElement(Q,{valueProps:{xs:12,sm:9},title:sn("productDescription"),value:null===(s=e.product)||void 0===s?void 0:s.productDescription})),r.createElement(R.Z,{container:!0,spacing:3,className:Wt.rowSpacing},r.createElement(Q,{title:sn("productId"),value:null===(u=e.product)||void 0===u?void 0:u.productId}),r.createElement(Q,{title:sn("productName"),value:null===(d=e.product)||void 0===d?void 0:d.productName}),r.createElement(Q,{title:sn("productSKU"),value:null===(m=e.product)||void 0===m?void 0:m.productSKU}),r.createElement(Q,{title:sn("productType"),value:null===(p=e.product)||void 0===p?void 0:p.productType}),r.createElement(Q,{title:sn("variablePrice"),value:null===(v=e.product)||void 0===v?void 0:v.variablePrice}),r.createElement(Q,{title:sn("unitPrice"),value:gn(null===(g=e.product)||void 0===g||null===(f=g.unitPrice)||void 0===f?void 0:f.amount,null===(E=e.product)||void 0===E||null===(y=E.unitPrice)||void 0===y?void 0:y.currency)}),r.createElement(Q,{title:sn("volume"),value:gn(null===(h=e.product)||void 0===h||null===(Z=h.volume)||void 0===Z?void 0:Z.value,null===(b=e.product)||void 0===b||null===(S=b.volume)||void 0===S?void 0:S.unit)}),r.createElement(Q,{title:sn("weight"),value:gn(null===(I=e.product)||void 0===I||null===(N=I.weight)||void 0===N?void 0:N.value,null===(x=e.product)||void 0===x||null===(w=x.weight)||void 0===w?void 0:w.unit)}),r.createElement(Q,{valueProps:{xs:12,sm:9},title:sn("tax"),value:null===(C=e.product)||void 0===C||null===(O=C.taxes)||void 0===O?void 0:O.join(", ")}),e.quantity&&r.createElement(Q,{title:sn("quantity"),value:gn(null===(T=e.quantity)||void 0===T?void 0:T.quantity,null===(k=e.quantity)||void 0===k?void 0:k.unit)}))))))})))))),vn.buyer&&r.createElement(X.Z,{square:!0,className:Wt.fullWidth},r.createElement(le,{"aria-controls":"panel3d-content",id:"panel3d-header",expandIcon:r.createElement(ne.Z,null)},r.createElement(M.Z,{variant:"subtitle1",color:"primary"},sn("buyerDetails"))),r.createElement(te.Z,{className:Wt.displayBlock},r.createElement(r.Fragment,null,r.createElement(R.Z,{container:!0,spacing:3,className:Wt.rowSpacing},r.createElement(Q,{title:sn("parentResellerId"),value:null===(o=vn.buyer)||void 0===o?void 0:o.parentResellerId}),r.createElement(Q,{title:sn("parentResellerName"),value:null===(c=vn.buyer)||void 0===c?void 0:c.parentResellerName}),r.createElement(Q,{title:sn("resellerId"),value:null===(s=vn.buyer)||void 0===s?void 0:s.resellerId}),r.createElement(Q,{title:sn("resellerName"),value:null===(u=vn.buyer)||void 0===u?void 0:u.resellerName}),r.createElement(Q,{title:sn("resellerMSISDN"),value:null===(d=vn.buyer)||void 0===d?void 0:d.resellerMSISDN}),r.createElement(Q,{title:sn("status"),value:null===(m=vn.buyer)||void 0===m?void 0:m.status}),r.createElement(Q,{title:sn("resellerTypeId"),value:null===(p=vn.buyer)||void 0===p?void 0:p.resellerTypeId}),r.createElement(Q,{title:sn("resellerTypeName"),value:null===(v=vn.buyer)||void 0===v?void 0:v.resellerTypeName}),r.createElement(Q,{title:sn("resellerPath"),value:null===(g=vn.buyer)||void 0===g?void 0:g.resellerPath,valueProps:{xs:12,sm:9}}),vn.buyer.additionalFields&&vn.buyer.additionalFields.map((function(e,t){return re.includes(e.name)?null:r.createElement(Q,{key:t,title:sn(e.name,fn(e.name)),value:e.value})})),vn.buyer.additionalKYCFields&&vn.buyer.additionalKYCFields.map((function(e,t){return r.createElement(Q,{key:t,title:sn(e.name,fn(e.name)),value:e.value})}))),(null===(f=vn.buyer)||void 0===f?void 0:f.address)&&r.createElement(r.Fragment,null,r.createElement(R.Z,{container:!0,spacing:3,className:Wt.spacingBottom},r.createElement(R.Z,{item:!0,xs:4},r.createElement(M.Z,{variant:"subtitle2",className:Wt.innerTitle},sn("address")))),r.createElement(R.Z,{container:!0,spacing:3,className:Wt.rowSpacing},r.createElement(Q,{title:sn("street"),value:null===(E=vn.buyer.address)||void 0===E?void 0:E.street}),r.createElement(Q,{title:sn("zip"),value:null===(y=vn.buyer.address)||void 0===y?void 0:y.zip}),r.createElement(Q,{title:sn("city"),value:null===(h=vn.buyer.address)||void 0===h?void 0:h.city}),r.createElement(Q,{title:sn("country"),value:null===(Z=vn.buyer.address)||void 0===Z?void 0:Z.country}),r.createElement(Q,{title:sn("phone"),value:null===(b=vn.buyer.address)||void 0===b?void 0:b.phone}),r.createElement(Q,{title:sn("fax"),value:null===(S=vn.buyer.address)||void 0===S?void 0:S.fax}),r.createElement(Q,{title:sn("homepage"),value:null===(I=vn.buyer.address)||void 0===I?void 0:I.homepage}),r.createElement(Q,{title:sn("email"),value:null===(N=vn.buyer.address)||void 0===N?void 0:N.email})))))),vn.dropPoint&&r.createElement(X.Z,{square:!0,className:Wt.fullWidth},r.createElement(le,{"aria-controls":"panel4d-content",id:"panel4d-header",expandIcon:r.createElement(ne.Z,null)},r.createElement(M.Z,{variant:"subtitle1",color:"primary"},sn("dropPointDetails"))),r.createElement(te.Z,{className:Wt.displayBlock},r.createElement(r.Fragment,null,r.createElement(R.Z,{container:!0,spacing:3,className:Wt.rowSpacing},r.createElement(Q,{title:sn("parentResellerId"),value:null===(x=vn.dropPoint)||void 0===x?void 0:x.parentResellerId}),r.createElement(Q,{title:sn("parentResellerName"),value:null===(C=vn.dropPoint)||void 0===C?void 0:C.parentResellerName}),r.createElement(Q,{title:sn("resellerId"),value:null===(O=vn.dropPoint)||void 0===O?void 0:O.resellerId}),r.createElement(Q,{title:sn("resellerName"),value:null===(T=vn.dropPoint)||void 0===T?void 0:T.resellerName}),r.createElement(Q,{title:sn("resellerMSISDN"),value:null===(k=vn.dropPoint)||void 0===k?void 0:k.resellerMSISDN}),r.createElement(Q,{title:sn("status"),value:null===(P=vn.dropPoint)||void 0===P?void 0:P.status}),r.createElement(Q,{title:sn("resellerTypeId"),value:null===(D=vn.dropPoint)||void 0===D?void 0:D.resellerTypeId}),r.createElement(Q,{title:sn("resellerTypeName"),value:null===(B=vn.dropPoint)||void 0===B?void 0:B.resellerTypeName}),r.createElement(Q,{title:sn("resellerPath"),value:null===(L=vn.dropPoint)||void 0===L?void 0:L.resellerPath,valueProps:{xs:12,sm:9}}),vn.dropPoint.additionalFields&&vn.dropPoint.additionalFields.map((function(e,t){return re.includes(e.name)?null:r.createElement(Q,{key:t,title:sn(e.name,fn(e.name)),value:e.value})})),vn.dropPoint.additionalKYCFields&&vn.dropPoint.additionalKYCFields.map((function(e,t){return r.createElement(Q,{key:t,title:sn(e.name,fn(e.name)),value:e.value})}))),(null===(F=vn.dropPoint)||void 0===F?void 0:F.address)&&r.createElement(r.Fragment,null,r.createElement(R.Z,{container:!0,spacing:3,className:Wt.spacingBottom},r.createElement(R.Z,{item:!0,xs:4},r.createElement(M.Z,{variant:"subtitle2",className:Wt.innerTitle},sn("address")))),r.createElement(R.Z,{container:!0,spacing:3,className:Wt.rowSpacing},r.createElement(Q,{title:sn("street"),value:null===(j=vn.dropPoint.address)||void 0===j?void 0:j.street}),r.createElement(Q,{title:sn("zip"),value:null===(W=vn.dropPoint.address)||void 0===W?void 0:W.zip}),r.createElement(Q,{title:sn("city"),value:null===(A=vn.dropPoint.address)||void 0===A?void 0:A.city}),r.createElement(Q,{title:sn("country"),value:null===(q=vn.dropPoint.address)||void 0===q?void 0:q.country}),r.createElement(Q,{title:sn("phone"),value:null===(z=vn.dropPoint.address)||void 0===z?void 0:z.phone}),r.createElement(Q,{title:sn("fax"),value:null===(V=vn.dropPoint.address)||void 0===V?void 0:V.fax}),r.createElement(Q,{title:sn("homepage"),value:null===(H=vn.dropPoint.address)||void 0===H?void 0:H.homepage}),r.createElement(Q,{title:sn("email"),value:null===(J=vn.dropPoint.address)||void 0===J?void 0:J.email})))))),vn.pickupPoint&&r.createElement(X.Z,{square:!0,className:Wt.fullWidth},r.createElement(le,{"aria-controls":"panel4d-content",id:"panel4d-header",expandIcon:r.createElement(ne.Z,null)},r.createElement(M.Z,{variant:"subtitle1",color:"primary"},sn("pickupPointDetails"))),r.createElement(te.Z,{className:Wt.displayBlock},r.createElement(r.Fragment,null,r.createElement(R.Z,{container:!0,spacing:3,className:Wt.rowSpacing},r.createElement(Q,{title:sn("parentResellerId"),value:null===(Y=vn.pickupPoint)||void 0===Y?void 0:Y.parentResellerId}),r.createElement(Q,{title:sn("parentResellerName"),value:null===(G=vn.pickupPoint)||void 0===G?void 0:G.parentResellerName}),r.createElement(Q,{title:sn("resellerId"),value:null===($=vn.pickupPoint)||void 0===$?void 0:$.resellerId}),r.createElement(Q,{title:sn("resellerName"),value:null===(ee=vn.pickupPoint)||void 0===ee?void 0:ee.resellerName}),r.createElement(Q,{title:sn("resellerMSISDN"),value:null===(ie=vn.pickupPoint)||void 0===ie?void 0:ie.resellerMSISDN}),r.createElement(Q,{title:sn("status"),value:null===(oe=vn.pickupPoint)||void 0===oe?void 0:oe.status}),r.createElement(Q,{title:sn("resellerTypeId"),value:null===(ce=vn.pickupPoint)||void 0===ce?void 0:ce.resellerTypeId}),r.createElement(Q,{title:sn("resellerTypeName"),value:null===(se=vn.pickupPoint)||void 0===se?void 0:se.resellerTypeName}),r.createElement(Q,{title:sn("resellerPath"),value:null===(ue=vn.pickupPoint)||void 0===ue?void 0:ue.resellerPath,valueProps:{xs:12,sm:9}}),vn.pickupPoint.additionalFields&&vn.pickupPoint.additionalFields.map((function(e,t){return re.includes(e.name)?null:r.createElement(Q,{key:t,title:sn(e.name,fn(e.name)),value:e.value})})),vn.pickupPoint.additionalKYCFields&&vn.pickupPoint.additionalKYCFields.map((function(e,t){return r.createElement(Q,{key:t,title:sn(e.name,fn(e.name)),value:e.value})}))),(null===(de=vn.pickupPoint)||void 0===de?void 0:de.address)&&r.createElement(r.Fragment,null,r.createElement(R.Z,{container:!0,spacing:3,className:Wt.spacingBottom},r.createElement(R.Z,{item:!0,xs:4},r.createElement(M.Z,{variant:"subtitle2",className:Wt.innerTitle},sn("address")))),r.createElement(R.Z,{container:!0,spacing:3,className:Wt.rowSpacing},r.createElement(Q,{title:sn("street"),value:null===(me=vn.pickupPoint.address)||void 0===me?void 0:me.street}),r.createElement(Q,{title:sn("zip"),value:null===(pe=vn.pickupPoint.address)||void 0===pe?void 0:pe.zip}),r.createElement(Q,{title:sn("city"),value:null===(ve=vn.pickupPoint.address)||void 0===ve?void 0:ve.city}),r.createElement(Q,{title:sn("country"),value:null===(ge=vn.pickupPoint.address)||void 0===ge?void 0:ge.country}),r.createElement(Q,{title:sn("phone"),value:null===(fe=vn.pickupPoint.address)||void 0===fe?void 0:fe.phone}),r.createElement(Q,{title:sn("fax"),value:null===(Ee=vn.pickupPoint.address)||void 0===Ee?void 0:Ee.fax}),r.createElement(Q,{title:sn("homepage"),value:null===(ye=vn.pickupPoint.address)||void 0===ye?void 0:ye.homepage}),r.createElement(Q,{title:sn("email"),value:null===(he=vn.pickupPoint.address)||void 0===he?void 0:he.email})))))),vn.receiver&&r.createElement(X.Z,{square:!0,className:Wt.fullWidth},r.createElement(le,{"aria-controls":"panel7d-content",id:"panel7d-header",expandIcon:r.createElement(ne.Z,null)},r.createElement(M.Z,{variant:"subtitle1",color:"primary"},sn("receiverDetails"))),r.createElement(te.Z,{className:Wt.displayBlock},r.createElement(r.Fragment,null,r.createElement(R.Z,{container:!0,spacing:3,className:Wt.rowSpacing},r.createElement(Q,{title:sn("parentResellerId"),value:null===(Ze=vn.receiver)||void 0===Ze?void 0:Ze.parentResellerId}),r.createElement(Q,{title:sn("parentResellerName"),value:null===(be=vn.receiver)||void 0===be?void 0:be.parentResellerName}),r.createElement(Q,{title:sn("resellerId"),value:null===(Se=vn.receiver)||void 0===Se?void 0:Se.resellerId}),r.createElement(Q,{title:sn("resellerName"),value:null===(Ie=vn.receiver)||void 0===Ie?void 0:Ie.resellerName}),r.createElement(Q,{title:sn("resellerMSISDN"),value:null===(Ne=vn.receiver)||void 0===Ne?void 0:Ne.resellerMSISDN}),r.createElement(Q,{title:sn("status"),value:null===(xe=vn.receiver)||void 0===xe?void 0:xe.status}),r.createElement(Q,{title:sn("resellerTypeId"),value:null===(we=vn.receiver)||void 0===we?void 0:we.resellerTypeId}),r.createElement(Q,{title:sn("resellerTypeName"),value:null===(Ce=vn.receiver)||void 0===Ce?void 0:Ce.resellerTypeName}),r.createElement(Q,{title:sn("resellerPath"),value:null===(Oe=vn.receiver)||void 0===Oe?void 0:Oe.resellerPath,valueProps:{xs:12,sm:9}}),vn.receiver.additionalFields&&vn.receiver.additionalFields.map((function(e,t){return re.includes(e.name)?null:r.createElement(Q,{key:t,title:sn(e.name,fn(e.name)),value:e.value})})),vn.receiver.additionalKYCFields&&vn.receiver.additionalKYCFields.map((function(e,t){return r.createElement(Q,{key:t,title:sn(e.name,fn(e.name)),value:e.value})}))),(null===(Te=vn.receiver)||void 0===Te?void 0:Te.address)&&r.createElement(r.Fragment,null,r.createElement(R.Z,{container:!0,spacing:3,className:Wt.spacingBottom},r.createElement(R.Z,{item:!0,xs:4},r.createElement(M.Z,{variant:"subtitle2",className:Wt.innerTitle},sn("address")))),r.createElement(R.Z,{container:!0,spacing:3,className:Wt.rowSpacing},r.createElement(Q,{title:sn("street"),value:null===(ke=vn.receiver.address)||void 0===ke?void 0:ke.street}),r.createElement(Q,{title:sn("zip"),value:null===(Pe=vn.receiver.address)||void 0===Pe?void 0:Pe.zip}),r.createElement(Q,{title:sn("city"),value:null===(De=vn.receiver.address)||void 0===De?void 0:De.city}),r.createElement(Q,{title:sn("country"),value:null===(Be=vn.receiver.address)||void 0===Be?void 0:Be.country}),r.createElement(Q,{title:sn("phone"),value:null===(Le=vn.receiver.address)||void 0===Le?void 0:Le.phone}),r.createElement(Q,{title:sn("fax"),value:null===(Re=vn.receiver.address)||void 0===Re?void 0:Re.fax}),r.createElement(Q,{title:sn("homepage"),value:null===(Fe=vn.receiver.address)||void 0===Fe?void 0:Fe.homepage}),r.createElement(Q,{title:sn("email"),value:null===(Me=vn.receiver.address)||void 0===Me?void 0:Me.email})))))),vn.reconciliationPoint&&r.createElement(X.Z,{square:!0,className:Wt.fullWidth},r.createElement(le,{"aria-controls":"panel5d-content",id:"panel5d-header",expandIcon:r.createElement(ne.Z,null)},r.createElement(M.Z,{variant:"subtitle1",color:"primary"},sn("reconciliationPointDetails"))),r.createElement(te.Z,{className:Wt.displayBlock},r.createElement(r.Fragment,null,r.createElement(R.Z,{container:!0,spacing:3,className:Wt.rowSpacing},r.createElement(Q,{title:sn("parentResellerId"),value:null===(je=vn.reconciliationPoint)||void 0===je?void 0:je.parentResellerId}),r.createElement(Q,{title:sn("parentResellerName"),value:null===(We=vn.reconciliationPoint)||void 0===We?void 0:We.parentResellerName}),r.createElement(Q,{title:sn("resellerId"),value:null===(Ae=vn.reconciliationPoint)||void 0===Ae?void 0:Ae.resellerId}),r.createElement(Q,{title:sn("resellerName"),value:null===(qe=vn.reconciliationPoint)||void 0===qe?void 0:qe.resellerName}),r.createElement(Q,{title:sn("resellerMSISDN"),value:null===(Ue=vn.reconciliationPoint)||void 0===Ue?void 0:Ue.resellerMSISDN}),r.createElement(Q,{title:sn("status"),value:null===(ze=vn.reconciliationPoint)||void 0===ze?void 0:ze.status}),r.createElement(Q,{title:sn("resellerTypeId"),value:null===(_e=vn.reconciliationPoint)||void 0===_e?void 0:_e.resellerTypeId}),r.createElement(Q,{title:sn("resellerTypeName"),value:null===(Ve=vn.reconciliationPoint)||void 0===Ve?void 0:Ve.resellerTypeName}),r.createElement(Q,{title:sn("resellerPath"),value:null===(Ke=vn.reconciliationPoint)||void 0===Ke?void 0:Ke.resellerPath,valueProps:{xs:12,sm:9}}),vn.reconciliationPoint.additionalFields&&vn.reconciliationPoint.additionalFields.map((function(e,t){return re.includes(e.name)?null:r.createElement(Q,{key:t,title:sn(e.name,fn(e.name)),value:e.value})})),vn.reconciliationPoint.additionalKYCFields&&vn.reconciliationPoint.additionalKYCFields.map((function(e,t){return r.createElement(Q,{key:t,title:sn(e.name,fn(e.name)),value:e.value})}))),(null===(He=vn.reconciliationPoint)||void 0===He?void 0:He.address)&&r.createElement(r.Fragment,null,r.createElement(R.Z,{container:!0,spacing:3,className:Wt.spacingBottom},r.createElement(R.Z,{item:!0,xs:4},r.createElement(M.Z,{variant:"subtitle2",className:Wt.innerTitle},sn("address")))),r.createElement(R.Z,{container:!0,spacing:3,className:Wt.rowSpacing},r.createElement(Q,{title:sn("street"),value:null===(Je=vn.reconciliationPoint.address)||void 0===Je?void 0:Je.street}),r.createElement(Q,{title:sn("zip"),value:null===(Qe=vn.reconciliationPoint.address)||void 0===Qe?void 0:Qe.zip}),r.createElement(Q,{title:sn("city"),value:null===(Ye=vn.reconciliationPoint.address)||void 0===Ye?void 0:Ye.city}),r.createElement(Q,{title:sn("country"),value:null===(Ge=vn.reconciliationPoint.address)||void 0===Ge?void 0:Ge.country}),r.createElement(Q,{title:sn("phone"),value:null===($e=vn.reconciliationPoint.address)||void 0===$e?void 0:$e.phone}),r.createElement(Q,{title:sn("fax"),value:null===(Xe=vn.reconciliationPoint.address)||void 0===Xe?void 0:Xe.fax}),r.createElement(Q,{title:sn("homepage"),value:null===(et=vn.reconciliationPoint.address)||void 0===et?void 0:et.homepage}),r.createElement(Q,{title:sn("email"),value:null===(tt=vn.reconciliationPoint.address)||void 0===tt?void 0:tt.email})))))),vn.seller&&r.createElement(X.Z,{square:!0,className:Wt.fullWidth},r.createElement(le,{"aria-controls":"panel5d-content",id:"panel5d-header",expandIcon:r.createElement(ne.Z,null)},r.createElement(M.Z,{variant:"subtitle1",color:"primary"},sn("sellerDetails"))),r.createElement(te.Z,{className:Wt.displayBlock},r.createElement(r.Fragment,null,r.createElement(R.Z,{container:!0,spacing:3,className:Wt.rowSpacing},r.createElement(Q,{title:sn("parentResellerId"),value:null===(nt=vn.seller)||void 0===nt?void 0:nt.parentResellerId}),r.createElement(Q,{title:sn("parentResellerName"),value:null===(at=vn.seller)||void 0===at?void 0:at.parentResellerName}),r.createElement(Q,{title:sn("resellerId"),value:null===(lt=vn.seller)||void 0===lt?void 0:lt.resellerId}),r.createElement(Q,{title:sn("resellerName"),value:null===(rt=vn.seller)||void 0===rt?void 0:rt.resellerName}),r.createElement(Q,{title:sn("resellerMSISDN"),value:null===(it=vn.seller)||void 0===it?void 0:it.resellerMSISDN}),r.createElement(Q,{title:sn("status"),value:null===(ot=vn.seller)||void 0===ot?void 0:ot.status}),r.createElement(Q,{title:sn("resellerTypeId"),value:null===(ct=vn.seller)||void 0===ct?void 0:ct.resellerTypeId}),r.createElement(Q,{title:sn("resellerTypeName"),value:null===(st=vn.seller)||void 0===st?void 0:st.resellerTypeName}),r.createElement(Q,{title:sn("resellerPath"),value:null===(ut=vn.seller)||void 0===ut?void 0:ut.resellerPath,valueProps:{xs:12,sm:9}}),vn.seller.additionalFields&&vn.seller.additionalFields.map((function(e,t){return re.includes(e.name)?null:r.createElement(Q,{key:t,title:sn(e.name,fn(e.name)),value:e.value})})),vn.seller.additionalKYCFields&&vn.seller.additionalKYCFields.map((function(e,t){return r.createElement(Q,{key:t,title:sn(e.name,fn(e.name)),value:e.value})}))),(null===(dt=vn.seller)||void 0===dt?void 0:dt.address)&&r.createElement(r.Fragment,null,r.createElement(R.Z,{container:!0,spacing:3,className:Wt.spacingBottom},r.createElement(R.Z,{item:!0,xs:4},r.createElement(M.Z,{variant:"subtitle2",className:Wt.innerTitle},sn("address")))),r.createElement(R.Z,{container:!0,spacing:3,className:Wt.rowSpacing},r.createElement(Q,{title:sn("street"),value:null===(mt=vn.seller.address)||void 0===mt?void 0:mt.street}),r.createElement(Q,{title:sn("zip"),value:null===(pt=vn.seller.address)||void 0===pt?void 0:pt.zip}),r.createElement(Q,{title:sn("city"),value:null===(vt=vn.seller.address)||void 0===vt?void 0:vt.city}),r.createElement(Q,{title:sn("country"),value:null===(gt=vn.seller.address)||void 0===gt?void 0:gt.country}),r.createElement(Q,{title:sn("phone"),value:null===(ft=vn.seller.address)||void 0===ft?void 0:ft.phone}),r.createElement(Q,{title:sn("fax"),value:null===(Et=vn.seller.address)||void 0===Et?void 0:Et.fax}),r.createElement(Q,{title:sn("homepage"),value:null===(yt=vn.seller.address)||void 0===yt?void 0:yt.homepage}),r.createElement(Q,{title:sn("email"),value:null===(ht=vn.seller.address)||void 0===ht?void 0:ht.email})))))),vn.sender&&r.createElement(X.Z,{square:!0,className:Wt.fullWidth},r.createElement(le,{"aria-controls":"panel5d-content",id:"panel5d-header",expandIcon:r.createElement(ne.Z,null)},r.createElement(M.Z,{variant:"subtitle1",color:"primary"},sn("senderDetails"))),r.createElement(te.Z,{className:Wt.displayBlock},r.createElement(r.Fragment,null,r.createElement(R.Z,{container:!0,spacing:3,className:Wt.rowSpacing},r.createElement(Q,{title:sn("parentResellerId"),value:null===(Zt=vn.sender)||void 0===Zt?void 0:Zt.parentResellerId}),r.createElement(Q,{title:sn("parentResellerName"),value:null===(bt=vn.sender)||void 0===bt?void 0:bt.parentResellerName}),r.createElement(Q,{title:sn("resellerId"),value:null===(St=vn.sender)||void 0===St?void 0:St.resellerId}),r.createElement(Q,{title:sn("resellerName"),value:null===(It=vn.sender)||void 0===It?void 0:It.resellerName}),r.createElement(Q,{title:sn("resellerMSISDN"),value:null===(Nt=vn.sender)||void 0===Nt?void 0:Nt.resellerMSISDN}),r.createElement(Q,{title:sn("status"),value:null===(xt=vn.sender)||void 0===xt?void 0:xt.status}),r.createElement(Q,{title:sn("resellerTypeId"),value:null===(wt=vn.sender)||void 0===wt?void 0:wt.resellerTypeId}),r.createElement(Q,{title:sn("resellerTypeName"),value:null===(Ct=vn.sender)||void 0===Ct?void 0:Ct.resellerTypeName}),r.createElement(Q,{title:sn("resellerPath"),value:null===(Ot=vn.sender)||void 0===Ot?void 0:Ot.resellerPath,valueProps:{xs:12,sm:9}}),vn.sender.additionalFields&&vn.sender.additionalFields.map((function(e,t){return re.includes(e.name)?null:r.createElement(Q,{key:t,title:sn(e.name,fn(e.name)),value:e.value})})),vn.sender.additionalKYCFields&&vn.sender.additionalKYCFields.map((function(e,t){return r.createElement(Q,{key:t,title:sn(e.name,fn(e.name)),value:e.value})}))),(null===(Tt=vn.sender)||void 0===Tt?void 0:Tt.address)&&r.createElement(r.Fragment,null,r.createElement(R.Z,{container:!0,spacing:3,className:Wt.spacingBottom},r.createElement(R.Z,{item:!0,xs:4},r.createElement(M.Z,{variant:"subtitle2",className:Wt.innerTitle},sn("address")))),r.createElement(R.Z,{container:!0,spacing:3,className:Wt.rowSpacing},r.createElement(Q,{title:sn("street"),value:null===(kt=vn.sender.address)||void 0===kt?void 0:kt.street}),r.createElement(Q,{title:sn("zip"),value:null===(Pt=vn.sender.address)||void 0===Pt?void 0:Pt.zip}),r.createElement(Q,{title:sn("city"),value:null===(Dt=vn.sender.address)||void 0===Dt?void 0:Dt.city}),r.createElement(Q,{title:sn("country"),value:null===(Bt=vn.sender.address)||void 0===Bt?void 0:Bt.country}),r.createElement(Q,{title:sn("phone"),value:null===(Lt=vn.sender.address)||void 0===Lt?void 0:Lt.phone}),r.createElement(Q,{title:sn("fax"),value:null===(Rt=vn.sender.address)||void 0===Rt?void 0:Rt.fax}),r.createElement(Q,{title:sn("homepage"),value:null===(Ft=vn.sender.address)||void 0===Ft?void 0:Ft.homepage}),r.createElement(Q,{title:sn("email"),value:null===(Mt=vn.sender.address)||void 0===Mt?void 0:Mt.email})))))))};var oe=function(e){return T("/aas/v1/delivery/agent/".concat(e))},ce="/tms/v1/trip",se=function(e){return T("".concat(ce,"/getAllReasonByType?reasonType=").concat(e))};const ue=function(e,t){return T("/ims/v1"+e,t)},de=function(e,t){return T("/acms"+e,t)},me=function(e,t){return T("/pms/v1"+e,t)};n(77162);var pe="/els/v1",ve=function(e){return T("".concat(pe,"/vendor/fare-analytics").concat(e))},ge="/billing/v1";const fe=function(e){var t=e.children,n=e.taskId,a=e.resellerId,l=e.mergeId,i=e.mergeOrders,o=r.useState([]),c=(0,w.Z)(o,2),s=c[0],u=c[1],d=r.useState(!1),m=(0,w.Z)(d,2),p=m[0],v=m[1],g=z().showErrorMessage,f=i||"",E={taskId:n||"",resellerId:a||"",mergeId:f?"":l||"",taskIds:f};return r.useEffect((function(){v(!0),function(e){return T("".concat(k,"/task/eligible-agents?").concat(C.stringify(e)),{method:"POST"})}(E).then((function(e){return u(e.eligibleAgents||[])})).catch((function(e){return g(e)})).finally((function(){return v(!1)}))}),[a,l,i]),r.createElement(r.Fragment,null,t({eligibleAgents:s,loading:p}))},Ee=function(e){var t=e.taskId,n=e.handleChange,a=e.resellerId,l=e.mergedTaskIds,i=e.mergeId,o=e.value,c=e.setIsEligibleAgent,s=(0,U.useTranslation)().t;return r.createElement(fe,{taskId:t,resellerId:a,mergeId:i,mergeOrders:l},(function(e){var t=e.eligibleAgents,a=e.loading;return t.length>0?r.createElement(A.SeamlessDropDown,{id:"eligible-agents-drop-down",required:!0,label:s("eligibleAgents"),helperText:s("selectEligibleAgents"),value:o,options:[{agentId:"",agentName:s("dropdownSelectPlaceholder")}].concat((0,x.Z)(t)).map((function(e){return{value:e.agentId,key:"".concat(e.agentName," ").concat(e.agentId&&"("+e.agentId+")")}})),onChange:function(e){return n(e.target.value)},fullWidth:!0}):!a&&r.createElement(A.SeamlessDropDown,{id:"eligible-agents-drop-down",required:!0,label:s("noEligibleAgents"),helperText:s("selectEligibleAgents"),value:c?c(!0):o,options:[{value:"Choose",key:s("noEligibleAgentsFound")}],onChange:function(e){return n(e.target.value)},fullWidth:!0})}))};var ye=n(7089),he=n(27556),Ze=n(80030),be=n(18621),Se=(0,j.Z)((function(e){return(0,W.Z)({root:{padding:e.spacing(2),width:300,display:"flex",alignItems:"center",flexDirection:"row",justifyContent:"space-between",borderRadius:"5"},typo:{marginTop:e.spacing(5)}})})),Ie=(0,be.animated)(M.Z);const Ne=function(e){var t=e.children,n=(e.color,e.style,e.label),a=e.value,l=e.labelColor,i=e.className,o=e.tooltip,c=Se();return r.createElement(he.Z,{className:(0,_.default)(c.root,i)},r.createElement(R.Z,{container:!0},r.createElement(R.Z,{container:!0,spacing:3},r.createElement(R.Z,{item:!0,xs:t?8:12},r.createElement(R.Z,{item:!0,xs:8},r.createElement(ye.Z,{size:"medium",color:"primary",style:{backgroundColor:l,color:"white"},label:r.createElement(M.Z,{variant:"h6"},n)})),r.createElement(R.Z,{className:c.typo},o?r.createElement(Ze.ZP,{title:a},r.createElement(Ie,{variant:"h4"},a)):r.createElement(Ie,{variant:"h4"},a))),t&&r.createElement(R.Z,{item:!0,xs:4},t)))," ")};var xe=n(71980),we=n(12964),Ce=(0,j.Z)((function(e){return(0,W.Z)({stats:{margin:e.spacing(1)},icon:{marginTop:e.spacing(8),marginLeft:e.spacing(2)}})}));const Oe=function(e){var t,n,a=e.TaskDeshBoard,l=(e.loading,(0,U.useTranslation)().t),i=Ce(),o=null==a||null===(t=a.pickupPoint)||void 0===t?void 0:t.additionalFields.find((function(e){return"logisticLocation"===e.name})),c=null==a||null===(n=a.dropPoint)||void 0===n?void 0:n.additionalFields.find((function(e){return"logisticLocation"===e.name})),s=null==a?void 0:a.orderWeight;return a||o||c?r.createElement(r.Fragment,null,r.createElement(M.Z,{variant:"subtitle1",color:"primary",style:{marginBottom:15}},r.createElement("strong",null,l("orderId")," : ",a.orderId)),r.createElement(B.Z,{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-evenly",bgcolor:"#F7F7F7",padding:"10px"},r.createElement(Ne,{className:i.stats,label:l("pickUpLocation"),value:o?o.value:"-",labelColor:"#006ae5"},r.createElement(xe.Z,{style:{color:"#006ae5",fontSize:60},className:i.icon})),r.createElement(Ne,{className:i.stats,label:l("dropLocation"),value:c?c.value:"-",labelColor:"#088F8F"},r.createElement(xe.Z,{style:{color:"#088F8F",fontSize:60},className:i.icon})),r.createElement(Ne,{className:i.stats,label:l("capacity"),value:"".concat(s.value.toFixed(4)," ").concat(s.unit),labelColor:"#ff0081"},r.createElement(we.Z,{style:{color:"#ff0081",fontSize:60},className:i.icon})))):null};var Te=n(38670);const ke=function(){return(0,Te.useSelector)((function(e){return e.auth}),Te.shallowEqual).user};var Pe=n(76635),De=n.n(Pe),Be=(0,j.Z)((function(e){return(0,W.Z)({dialogWrapper:{textAlign:"center","& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},buttonWraper:{display:"flex",flexDirection:"column",marginTop:"24px"},element:{margin:e.spacing(1)},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginBottom:e.spacing(3)},btnSpace:{marginBottom:e.spacing(2)}})}));const Le=function(){var e,t=(0,o.useParams)().taskId,n=(0,U.useTranslation)().t,a=z(),l=a.showErrorMessage,i=a.showSuccessMessage,c=a.showWarningMessage,s=Be(),u=(0,o.useHistory)(),d=ke(),m=r.useState(!1),p=(0,w.Z)(m,2),v=p[0],g=p[1],f=r.useState({}),E=(0,w.Z)(f,2),y=E[0],h=E[1],Z=r.useState(""),b=(0,w.Z)(Z,2),S=b[0],I=b[1],N=r.useState(!1),C=(0,w.Z)(N,2),O=C[0],P=C[1],D=r.useState([]),j=(0,w.Z)(D,2),W=j[0],q=j[1],V=r.useState([]),K=(0,w.Z)(V,2),H=K[0],J=K[1],Q=r.useState(""),Y=(0,w.Z)(Q,2),G=Y[0],$=Y[1],X=r.useState(""),ee=(0,w.Z)(X,2),te=ee[0],ne=ee[1],ae=r.useState(!1),le=(0,w.Z)(ae,2),re=le[0],oe=le[1],ce=function(){"external"===te?u.push({pathname:"/home/trip/tasks/view/".concat(t,"/tripfair"),state:{data:[y]}}):function(e,t,n){return T("".concat(k,"/task/").concat(t,"?agentId=").concat(e,"&resellerId=").concat(n),{method:"PUT"})}(S,t,G).then((function(e){P(!1),0==e.resultCode?(i(e.resultMessage),u.push("/home/trip/tasks/view/".concat(t))):c(e)})).catch((function(e){return l(e)}))},se=function(){P(!1),ne(""),$(""),I("")},ue=[],de=[];r.useEffect((function(){g(!0),function(e){return T("".concat(k,"/task/").concat(e))}(t).then((function(e){if(0==e.resultCode){var t;h(e.taskEntity);var n=(null==e?void 0:e.deliveryType)||{internal:"INTERNAL",external:"EXTERNAL"};n&&!De().isEmpty(n)&&(ue=Object.keys(n).map((function(e){return{value:e,key:n[e]}})),q(ue));var a=JSON.parse(null==e||null===(t=e.taskEntity)||void 0===t?void 0:t.data);if(a.deliveryInfo){var l,r=null===(l=a.deliveryInfo)||void 0===l?void 0:l.deliveryOptions;r?(de=Object.keys(r).map((function(e){return{key:e.charAt(0).toUpperCase()+e.slice(1),value:r[e]}})),J(de)):c(e)}else{var i;I(null===(i=e.taskEntity)||void 0===i?void 0:i.agentId)}}})).catch((function(e){return l(e.message||e.resultMessage||n("anErrorOccurred"))})).finally((function(){return g(!1)}))}),[]),r.useEffect((function(){re&&I(""),oe(!1)}),[re]);var me=null;try{me=y.data&&JSON.parse(y.data)}catch(e){}return r.createElement(A.SeamlessContainer,{title:n("viewDeliveryTaskPageTitle"),description:n("viewDeliveryTaskPageDescription")},r.createElement(Oe,{TaskDeshBoard:me,loading:v}),y.data&&r.createElement(B.Z,null,r.createElement(B.Z,{display:"flex",flexDirection:"row",justifyContent:"flex-end"},y.deliveryAgentOf==="/".concat(d.resellerPath,"/")&&r.createElement(L.Z,{variant:"contained",color:"primary",type:"button",className:s.element,onClick:function(){P(!0)},disabled:"OPEN"!=(null==y||null===(e=y.status)||void 0===e?void 0:e.trim())},n("assignAgent"))),r.createElement(A.SeamlessDialog,{open:O,onClose:se,className:s.dialogWrapper,maxWidth:"md",fullWidth:!0},r.createElement(r.Fragment,null,r.createElement("div",{className:s.modalContentSpacing},r.createElement(R.Z,{container:!0,spacing:2,alignItems:"center",justify:"space-between"},r.createElement(R.Z,{item:!0,md:12},r.createElement(M.Z,{gutterBottom:!0,id:"transition-modal-title",variant:"h6",className:s.fontHeavy},n("external"==te?"assignVendor":"assignAgent")),me.deliveryInfo?null:r.createElement(Ee,{value:S,taskId:t,handleChange:I})),me.deliveryInfo?r.createElement(R.Z,{item:!0,md:"internal"!=te?6:3},r.createElement(A.SeamlessDropDown,{id:"delivery-type-drop-down",className:s.element,label:n("deliveryType"),helperText:"Select Delivery Type",fullWidth:!0,options:[{value:"",key:n("choose")}].concat((0,x.Z)(W)),name:"deliveryType",onChange:function(e){return function(e){var t;ne(null===(t=e.target)||void 0===t?void 0:t.value),$(""),I("")}(e)}})):null,"internal"==te&&r.createElement(r.Fragment,null,r.createElement(R.Z,{item:!0,md:3},r.createElement(A.SeamlessDropDown,{id:"delivery-option-drop-down",fullWidth:!0,className:s.element,label:n("deliveryOption"),helperText:"Select Delivery Option",options:[{value:"Choose",key:n("choose")}].concat((0,x.Z)(H)),name:"deliveryOptions",onChange:function(e){return $(e.target.value)}})),G&&r.createElement(R.Z,{item:!0,md:3},r.createElement(Ee,{resellerId:G,taskId:t,handleChange:I,setIsEligibleAgent:oe}))),me.deliveryInfo?r.createElement(R.Z,{item:!0,md:"internal"!=te?4:3},r.createElement("div",{className:(0,_.default)(s.modalContentSpacing,s.buttonWraper)},r.createElement(L.Z,{type:"button",variant:"outlined",color:"primary",className:s.btnSpace,onClick:se},n("close")),"internal"==te?r.createElement(L.Z,{type:"button",variant:"contained",color:"primary",disabled:!S||!G,onClick:ce},n("assign")):r.createElement(L.Z,{type:"button",variant:"contained",disabled:!te,color:"primary",onClick:ce},n("assign")))):r.createElement("div",{className:s.modalContentSpacing},r.createElement(L.Z,{type:"button",variant:"outlined",color:"primary",style:{marginLeft:10},className:s.btnSpace,onClick:se},n("close")),r.createElement(L.Z,{type:"button",style:{marginLeft:10},variant:"contained",color:"primary",className:s.btnSpace,onClick:ce},n("assign")))))))),r.createElement(ie,{"data-testid":"view-delvery-task",loading:v,taskData:y}),v?r.createElement(F.Z,null):null)};var Re=n(55238),Fe=n(51119),Me=n(41744),je=n.n(Me),We=n(38592),Ae=n(86619),qe=n(21270),Ue=n(3646),ze=n(63085),_e=n(95919);function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){(0,Fe.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var He=(0,j.Z)((function(e){return(0,W.Z)({dialogWrapper:{textAlign:"center","& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},root:{paddingLeft:12,marginTop:8},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginBottom:e.spacing(3)},btnSpace:{marginRight:e.spacing(2)}})})),Je=(0,V.Z)((function(e){return{tooltip:{backgroundColor:e.palette.background.default,color:e.palette.grey[800],border:"1px solid ".concat(e.palette.primary.main),paddingBottom:e.spacing(1),paddingRight:e.spacing(1),paddingLeft:e.spacing(1),paddingTop:0},arrow:{color:e.palette.primary.main}}}))(Ze.ZP);function Qe(e){var t=He(),n=e.item,a=e.applyValue;return r.createElement("div",{className:t.root},r.createElement(Ae.Z,{className:t.root,name:n.field,value:n.value,onChange:function(e){a(Ke(Ke({},n),{},{value:e.target.value}))}}))}const Ye=function(e){var t=e.trips,n=e.loading,a=e.totalCount,i=e.page,c=e.perPage,s=(e.orderBy,e.order,e.onSort),u=e.setParentPage,d=e.setParentPerPage,m=e.onFilterChange,p=((0,Re.Z)(e,["trips","loading","totalCount","page","perPage","orderBy","order","onSort","setParentPage","setParentPerPage","onFilterChange"]),r.useMemo((function(){return t.map((function(e){var t=e.tripId,n=e.agentInfo,a=e.mergedOrderInfo,l=e.tripCreated,r=e.tripUpdated,i=e.status;return{tripId:t,agentId:n.agentId,agentName:n.agentName,agentEmail:n.email,agentPhone:n.phone,totalTasks:null==a?void 0:a.mergedOrderCount,tripCapacity:null==a?void 0:a.tripCapacity,tripFair:null==a?void 0:a.tripFare,tripCreated:l,tripUpdated:r,status:i}}))}),[t])),v=(0,U.useTranslation)().t,g=l()().checkPermission,f=i>=1?i-1:1,E=[{label:"Equal",value:"equal",getApplyFilterFn:function(e){return e.columnField&&e.value&&e.operatorValue?function(t){return t.value==e.value}:null},InputComponent:Qe}],y=[{field:"tripId",headerName:v("tripId"),sortable:!0,width:200,filterOperators:E},{field:"agentId",headerName:v("agentId"),sortable:!1,width:150,filterOperators:E},{field:"totalTasks",headerName:v("totalOrders"),sortable:!1,filterable:!1,width:130},{field:"tripCapacity",headerName:v("tripCapacity"),sortable:!1,width:130,filterable:!1},{field:"tripFair",headerName:v("tripFair"),sortable:!1,width:120,filterable:!1},{field:"tripCreated",headerName:v("tripCreated"),sortable:!0,width:150,filterable:!1},{field:"tripUpdated",headerName:v("tripUpdated"),sortable:!0,width:150,filterable:!1},{field:"status",headerName:v("status"),sortable:!0,width:120,filterOperators:E},{field:"actions",headerName:v("actions"),sortable:!1,filterable:!1,renderCell:function(e){var t=e.getValue("status");return r.createElement("div",null,r.createElement(We.Z,{size:"small",color:"primary",variant:"text","aria-label":"trip action buttons"},r.createElement(Je,{arrow:!0,leaveDelay:500,title:r.createElement(r.Fragment,null,r.createElement(M.Z,{variant:"caption"},r.createElement("b",null,v("agentId"),": ")," ",e.getValue("agentId"))," ",r.createElement("br",null),r.createElement(M.Z,{variant:"caption"},r.createElement("b",null,v("agentName"),": ")," ",e.getValue("agentName"))," ",r.createElement("br",null),r.createElement(M.Z,{variant:"caption"},r.createElement("b",null,v("email"),": ")," ",e.getValue("agentEmail"))," ",r.createElement("br",null),r.createElement(M.Z,{variant:"caption"},r.createElement("b",null,v("phone"),": ")," ",e.getValue("agentPhone")))},r.createElement(L.Z,null,r.createElement(Ue.Z,{fontSize:"small"}))),r.createElement(Ze.ZP,{title:v("view")},r.createElement(L.Z,{color:"primary",component:o.Link,to:"/home/trip/trips/view/"+e.getValue("tripId")},r.createElement(qe.Z,{fontSize:"small"}))),g(I)&&r.createElement(Ze.ZP,{title:v("routeOptimization")},r.createElement(L.Z,{color:"primary",component:o.Link,to:"/home/trip/trips/"+e.getValue("tripId")+"/route-Optimization",disabled:"OPEN"!==t},r.createElement(ze.Z,{fontSize:"small"}))),r.createElement(Ze.ZP,{title:v("tripreconciliation")},r.createElement(L.Z,{color:"primary",component:o.Link,to:"/home/trip/trips/tripreconciliation/"+e.getValue("tripId")+"/".concat(e.getValue("agentId")),disabled:"COMPLETED"!==t},r.createElement(_e.Z,{fontSize:"small"})))))},width:200}];return r.createElement(je(),{loading:n,columnBuffer:2,rows:p,onPageChange:function(e){u(e.page+1)},onPageSizeChange:function(e){u(1),d(e.pageSize)},pagination:!0,paginationMode:"server",filterMode:"server",sortingMode:"server",page:f,pageSize:c,rowCount:a,onFilterModelChange:m,onSortModelChange:s,getRowId:function(e){return e.tripId},columns:y,checkboxSelection:!0})};n(49434),n(34027),n(44697),n(91101);var Ge,$e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e);return t.reduce((function(){var t,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",l=arguments.length>1?arguments[1]:void 0;return e[l]?"status"===l?"".concat(l,"#").concat(null===(n=e[l])||void 0===n?void 0:n.trim()):"".concat(a?"".concat(a.trim(),","):"").concat(l,":").concat(null===(t=e[l])||void 0===t?void 0:t.trim()):a.trim()}),"")};function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(n),!0).forEach((function(t){(0,Fe.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tt="",nt=null;null===(Ge=document.querySelector(".MuiDataGridPanelContent-root"))||void 0===Ge||Ge.querySelector(".MuiIconButton-sizeSmall");const at=function(e){var t=e.children,n=r.useState([]),a=(0,w.Z)(n,2),l=a[0],i=a[1],c=r.useState(!1),s=(0,w.Z)(c,2),u=s[0],d=s[1],m=r.useState(0),p=(0,w.Z)(m,2),v=p[0],g=p[1],f=r.useState(20),E=(0,w.Z)(f,2),y=E[0],h=E[1],Z=r.useState(1),b=(0,w.Z)(Z,2),S=b[0],I=b[1],N=r.useState("desc"),x=(0,w.Z)(N,2),O=x[0],k=x[1],P=r.useState("tripCreated"),D=(0,w.Z)(P,2),B=D[0],L=D[1],R=r.useState({}),F=(0,w.Z)(R,2),M=F[0],j=F[1],W=r.useState(""),A=(0,w.Z)(W,2),q=A[0],U=A[1],_=(0,o.useHistory)(),V=r.useCallback((function(e){var t=e.sortModel[0].field,n=e.sortModel[0].sort;L(t),k(n)}),[]),K=r.useCallback((function(e){var t,n;null===(n=null===(t=document.querySelector(".MuiDataGridPanelContent-root"))||void 0===t?void 0:t.querySelector(".MuiIconButton-sizeSmall"))||void 0===n||n.addEventListener("click",(function(){if(tt)return _.push("/home/trip/trips")}));var a=e.filterModel.items[0].value,l=e.filterModel.items[0].columnField;void 0!==a&&(nt&&clearTimeout(nt),nt=setTimeout((function(){j(et(et({},M),{},(0,Fe.Z)({},l,a))),I(1)}),800))}),[]),H=r.useCallback((function(e){I(e)}),[]),J=r.useCallback((function(e){h(e)}),[]),Q=r.useCallback((function(e){U(e)}),[]),Y=z(),G=Y.showErrorMessage,$=Y.showWarningMessage;return r.useEffect((function(){d(!0),q&&(M.mergeOrderInfo=q);var e,t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1?arguments[1]:void 0;return e[a]?"".concat(n?"".concat(n.trim(),","):"").concat(a,":").concat(null===(t=e[a])||void 0===t?void 0:t.trim()):n.trim()}),"")}(M);(e={sort:"".concat(B,"_").concat(null==O?void 0:O.toLowerCase()),page:t===tt?S:1,perPage:y,filter:t},T("/tms/v1/trip?".concat(C.stringify(e)))).then((function(e){var n;0==e.resultCode?(i(e.trips),g(null==e||null===(n=e.metaData)||void 0===n?void 0:n.totalCount),tt=t):($(e.resultMessage),i([]))})).catch((function(e){return G(e)})).finally((function(){return d(!1)}))}),[B,O,S,y,M,q]),r.createElement(r.Fragment,null,t({trips:l,loading:u,totalCount:v,page:S,perPage:y,orderBy:B,order:O,filter:M,onSort:V,setParentPage:H,setParentPerPage:J,onFilterChange:K,setParentSelectedType:Q}))};var lt=n(77954),rt=(0,j.Z)((function(e){return(0,W.Z)({element:{marginTop:e.spacing(2),marginBottom:e.spacing(2)}})})),it=[{key:"All",value:"all"},{key:"External",value:"external"},{key:"Internal",value:"internal"}];const ot=function(e){var t=rt(),n=(0,U.useTranslation)().t;return r.createElement(at,null,(function(a){var l=a.trips,i=a.loading,o=a.totalCount,c=a.setParentSelectedType,s=(0,Re.Z)(a,["trips","loading","totalCount","setParentSelectedType"]);return r.createElement(r.Fragment,null,r.createElement("div",null,r.createElement(B.Z,{display:"flex",flexDirection:"row",justifyContent:"flex-end"},r.createElement(lt.ZP,{style:{width:250},id:"internal-external-logistics-drop-down",options:it.map((function(e){return{key:e.key,value:e.value}})),onChange:function(e,t){c(t.value)},getOptionLabel:function(e){return e.key},renderInput:function(e){return r.createElement(Ae.Z,(0,H.Z)({},e,{variant:"outlined",label:n("selectOrderType")}))},className:t.element}))),r.createElement(Ye,(0,H.Z)({},e,{trips:l,loading:i,totalCount:o},s)))}))};var ct=n(90929),st=(0,j.Z)((function(e){return(0,W.Z)({fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{textTransform:"capitalize",fontSize:14},fieldEmail:{fontSize:14}})}));const ut=function(e){var t=e.headingProps,n=void 0===t?{xs:12,sm:3}:t,a=e.valueProps,l=void 0===a?{xs:12,sm:3}:a,i=e.title,o=e.value,c=st();return o?r.createElement(r.Fragment,null,r.createElement(R.Z,(0,H.Z)({item:!0},n),r.createElement(M.Z,{className:c.fieldHeading},i)),r.createElement(R.Z,(0,H.Z)({item:!0},l),r.createElement(M.Z,{className:"string"==typeof o&&o.includes("@")&&o.includes(".")?c.fieldEmail:c.fieldValue},o))):null};var dt,mt,pt,vt=(0,j.Z)((function(e){return(0,W.Z)({spacingTop:{marginTop:e.spacing(3)},spacingBottom:{marginBottom:e.spacing(1)},wrapper:{padding:e.spacing(2)},titleSpacing:{marginBottom:e.spacing(1)},subTitleSpacing:{marginBottom:e.spacing(1)},dividerSpacing:{marginBottom:e.spacing(3)},fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{textTransform:"capitalize",fontSize:14},rowSpacing:{marginBottom:e.spacing(.5)},stats:{margin:e.spacing(1)},fullWidth:{width:"100%"},innerTitle:{color:e.palette.secondary.light},displayBlock:{display:"block"},orderBox:{border:"1px solid #EDEDED",margin:"10px",width:"100%",borderRadius:"10px",padding:"10px",background:"#F7F7F7"}})})),gt=(0,V.Z)((function(e){return(0,W.Z)({root:{backgroundColor:e.palette.background.default,borderBottom:"1px solid rgba(0, 0, 0, .125)",marginBottom:-1,minHeight:56,"&$expanded":{minHeight:56}},content:{"&$expanded":{margin:"12px 0"}},expanded:{}})}))(ee.Z),ft=(null===(dt=window)||void 0===dt||null===(mt=dt.config)||void 0===mt||null===(pt=mt.trip)||void 0===pt?void 0:pt.hideKeysInViewPage)||["motte_de_passe","motte_de_passe_flag"];const Et=function(e){var t=e.data,n=(e.loading,vt()),a=t.agentInfo,l=t.posList,i=(t.newOrdersTaken,t.completedSurveys,t.warehouseList),o=t.collectorList,c=t.taskList,s=(0,U.useTranslation)().t,u=r.useState("panel1"),d=(0,w.Z)(u,2),m=d[0],p=d[1],v=function(e){return function(t,n){p(!!n&&e)}},g=function(e,t){return t=t||"","".concat(e=e||0," ").concat(t)},f=function(e){var t=e.replace(/([a-z])([A-Z])/g,"$1 $2");return(t=t.split("_").join(" "))&&t[0].toUpperCase()+t.slice(1)};return r.createElement(R.Z,{container:!0},a&&r.createElement(X.Z,{square:!0,expanded:"panel1"===m,onChange:v("panel1"),className:n.fullWidth},r.createElement(gt,{"aria-controls":"panel1d-content",id:"panel1d-header",expandIcon:r.createElement(ne.Z,null)},r.createElement(M.Z,{variant:"subtitle1",color:"primary"},s("agentInfo"))),r.createElement(te.Z,null,r.createElement(R.Z,{container:!0,spacing:3,className:(0,_.default)(n.rowSpacing,n.spacingTop)},r.createElement(ut,{title:s("agentName"),value:a.agentName}),r.createElement(ut,{title:s("agentId"),value:a.agentId}),r.createElement(ut,{title:s("phone"),value:a.phone}),r.createElement(ut,{title:s("email"),value:a.email})))),o&&r.createElement(X.Z,{square:!0,expanded:"panel2"===m,onChange:v("panel2"),className:n.fullWidth},r.createElement(gt,{"aria-controls":"panel2d-content",id:"panel2d-header",expandIcon:r.createElement(ne.Z,null)},r.createElement(M.Z,{variant:"subtitle1",color:"primary"},s("collectorInfo"))),r.createElement(te.Z,{className:n.displayBlock},o.map((function(e){var t,a,l,i,o,c,u,d,m,p,v,g,E,y,h,Z,b,S;return r.createElement("div",{key:e.collectorId},r.createElement(R.Z,{container:!0,spacing:3,className:n.spacingBottom},r.createElement(R.Z,{item:!0,xs:4,className:n.spacingTop},r.createElement(M.Z,{variant:"subtitle2",className:n.innerTitle},s("collectorId"),": (",e.collectorId,")")),r.createElement(R.Z,{item:!0,xs:4,className:n.spacingTop},r.createElement(M.Z,{variant:"subtitle2",className:n.innerTitle},s("createdAt"),": (",e.createdAt,")")),r.createElement(R.Z,{item:!0,xs:4,className:n.spacingTop},r.createElement(M.Z,{variant:"subtitle2",className:n.innerTitle},s("status"),": (",e.status,")"))),e.collectorInfo&&r.createElement(r.Fragment,null,r.createElement(R.Z,{container:!0,spacing:3,className:n.rowSpacing},r.createElement(ut,{title:s("parentResellerId"),value:null===(t=e.collectorInfo)||void 0===t?void 0:t.parentResellerId}),r.createElement(ut,{title:s("parentResellerName"),value:null===(a=e.collectorInfo)||void 0===a?void 0:a.parentResellerName}),r.createElement(ut,{title:s("resellerId"),value:null===(l=e.collectorInfo)||void 0===l?void 0:l.resellerId}),r.createElement(ut,{title:s("resellerName"),value:null===(i=e.collectorInfo)||void 0===i?void 0:i.resellerName}),r.createElement(ut,{title:s("resellerMSISDN"),value:null===(o=e.collectorInfo)||void 0===o?void 0:o.resellerMSISDN}),r.createElement(ut,{title:s("status"),value:null===(c=e.collectorInfo)||void 0===c?void 0:c.status}),r.createElement(ut,{title:s("resellerTypeId"),value:null===(u=e.collectorInfo)||void 0===u?void 0:u.resellerTypeId}),r.createElement(ut,{title:s("resellerTypeName"),value:null===(d=e.collectorInfo)||void 0===d?void 0:d.resellerTypeName}),r.createElement(ut,{title:s("resellerPath"),value:null===(m=e.collectorInfo)||void 0===m?void 0:m.resellerPath,valueProps:{xs:12,sm:9}}),e.collectorInfo.additionalFields&&e.collectorInfo.additionalFields.map((function(e,t){return ft.includes(e.name)?null:("dbmDob"==e.name&&(e.value=e.value.split("T")[0]),r.createElement(ut,{key:t,title:s(e.name,f(e.name)),value:e.value}))})),e.collectorInfo.additionalKYCFields&&e.collectorInfo.additionalKYCFields.map((function(e,t){return r.createElement(ut,{key:t,title:s(e.name,f(e.name)),value:e.value})}))),(null===(p=e.collectorInfo)||void 0===p?void 0:p.address)&&r.createElement(r.Fragment,null,r.createElement(R.Z,{container:!0,spacing:3,className:n.spacingBottom},r.createElement(R.Z,{item:!0,xs:4},r.createElement(M.Z,{variant:"subtitle2",className:n.innerTitle},s("address")))),r.createElement(R.Z,{container:!0,spacing:3,className:n.rowSpacing},r.createElement(ut,{title:s("street"),value:null===(v=e.collectorInfo.address)||void 0===v?void 0:v.street}),r.createElement(ut,{title:s("zip"),value:null===(g=e.collectorInfo.address)||void 0===g?void 0:g.zip}),r.createElement(ut,{title:s("city"),value:null===(E=e.collectorInfo.address)||void 0===E?void 0:E.city}),r.createElement(ut,{title:s("country"),value:null===(y=e.collectorInfo.address)||void 0===y?void 0:y.country}),r.createElement(ut,{title:s("phone"),value:null===(h=e.collectorInfo.address)||void 0===h?void 0:h.phone}),r.createElement(ut,{title:s("fax"),value:null===(Z=e.collectorInfo.address)||void 0===Z?void 0:Z.fax}),r.createElement(ut,{title:s("homepage"),value:null===(b=e.collectorInfo.address)||void 0===b?void 0:b.homepage}),r.createElement(ut,{title:s("email"),value:null===(S=e.collectorInfo.address)||void 0===S?void 0:S.email})))),r.createElement(K.Z,null))})))),l&&r.createElement(X.Z,{square:!0,expanded:"panel3"===m,onChange:v("panel3"),className:n.fullWidth},r.createElement(gt,{"aria-controls":"panel3d-content",id:"panel3d-header",expandIcon:r.createElement(ne.Z,null)},r.createElement(M.Z,{variant:"subtitle1",color:"primary"},s("posInfo"))),r.createElement(te.Z,{className:n.displayBlock},l.map((function(e){var t,a,l,i,o,c,u,d,m,p,v,E,y,h,Z,b,S,I,N,x,w,C,O,T,k,P,D,B,L,F,j,W;return r.createElement("div",{key:e.posId},r.createElement(R.Z,{container:!0,spacing:3,className:n.spacingBottom},r.createElement(R.Z,{item:!0,xs:12,className:n.spacingTop},r.createElement(M.Z,{variant:"subtitle1",className:n.innerTitle},s("posId"),": (",e.posId,")"))),e.posInfo&&r.createElement(r.Fragment,null,r.createElement(R.Z,{container:!0,spacing:3,className:n.rowSpacing},r.createElement(ut,{title:s("parentResellerId"),value:null===(t=e.posInfo)||void 0===t?void 0:t.parentResellerId}),r.createElement(ut,{title:s("parentResellerName"),value:null===(a=e.posInfo)||void 0===a?void 0:a.parentResellerName}),r.createElement(ut,{title:s("resellerId"),value:null===(l=e.posInfo)||void 0===l?void 0:l.resellerId}),r.createElement(ut,{title:s("resellerName"),value:null===(i=e.posInfo)||void 0===i?void 0:i.resellerName}),r.createElement(ut,{title:s("resellerMSISDN"),value:null===(o=e.posInfo)||void 0===o?void 0:o.resellerMSISDN}),r.createElement(ut,{title:s("status"),value:null===(c=e.posInfo)||void 0===c?void 0:c.status}),r.createElement(ut,{title:s("resellerTypeId"),value:null===(u=e.posInfo)||void 0===u?void 0:u.resellerTypeId}),r.createElement(ut,{title:s("resellerTypeName"),value:null===(d=e.posInfo)||void 0===d?void 0:d.resellerTypeName}),r.createElement(ut,{title:s("resellerPath"),value:null===(m=e.posInfo)||void 0===m?void 0:m.resellerPath,valueProps:{xs:12,sm:9}}),e.posInfo.additionalFields&&e.posInfo.additionalFields.map((function(e,t){return ft.includes(e.name)?null:("dbmDob"==e.name&&(e.value=e.value.split("T")[0]),r.createElement(ut,{key:t,title:s(e.name,f(e.name)),value:e.value}))})),e.posInfo.additionalKYCFields&&e.posInfo.additionalKYCFields.map((function(e,t){return(0,ct.Z)("object"===e.value)?null:r.createElement(ut,{key:t,title:s(e.name,f(e.name)),value:e.value})}))),r.createElement(R.Z,{container:!0,spacing:3,className:n.rowSpacing},r.createElement(ut,{title:s("street"),value:null===(p=e.posInfo.address)||void 0===p?void 0:p.street}),r.createElement(ut,{title:s("zip"),value:null===(v=e.posInfo.address)||void 0===v?void 0:v.zip}),r.createElement(ut,{title:s("city"),value:null===(E=e.posInfo.address)||void 0===E?void 0:E.city}),r.createElement(ut,{title:s("country"),value:null===(y=e.posInfo.address)||void 0===y?void 0:y.country}),r.createElement(ut,{title:s("phone"),value:null===(h=e.posInfo.address)||void 0===h?void 0:h.phone}),r.createElement(ut,{title:s("fax"),value:null===(Z=e.posInfo.address)||void 0===Z?void 0:Z.fax}),r.createElement(ut,{title:s("homepage"),value:null===(b=e.posInfo.address)||void 0===b?void 0:b.homepage}),r.createElement(ut,{title:s("email"),value:null===(S=e.posInfo.address)||void 0===S?void 0:S.email}))),r.createElement(R.Z,{container:!0,spacing:3,className:n.rowSpacing},r.createElement(ut,{title:s("status"),value:e.status}),r.createElement(ut,{title:s("createdAt"),value:e.createdAt})),e&&e.data&&e.data.deliveryOrderData&&r.createElement(R.Z,{container:!0,spacing:3,className:n.rowSpacing},r.createElement(R.Z,{item:!0,xs:12,className:n.spacingTop},r.createElement(M.Z,{variant:"subtitle1",className:n.innerTitle},s("orderDetail"))),r.createElement(ut,{title:s("surveyMandatory"),value:null!==(I=e.data)&&void 0!==I&&null!==(N=I.surveyData)&&void 0!==N&&N.isSurveyMandatory?"Yes":"No"}),r.createElement(R.Z,{item:!0,xs:12,className:n.spacingTop},r.createElement(M.Z,{variant:"subtitle2",className:n.innerTitle},s("grandTotal"))),r.createElement(R.Z,{container:!0,spacing:3,className:(n.rowSpacing,n.orderBox)},r.createElement(ut,{title:s("amount"),value:(null===(x=e.data.deliveryOrderData.grandTotal)||void 0===x?void 0:x.amount)&&"".concat(null===(w=e.data.deliveryOrderData.grandTotal)||void 0===w?void 0:w.amount," ").concat(null===(C=e.data.deliveryOrderData.grandTotal)||void 0===C?void 0:C.currency)}),r.createElement(ut,{title:s("netAmount"),value:null===(O=e.data.deliveryOrderData.grandTotal)||void 0===O?void 0:O.netAmount}),(null===(T=e.data.deliveryOrderData)||void 0===T||null===(k=T.grandTotal)||void 0===k?void 0:k.taxes)&&(null===(P=e.data.deliveryOrderData)||void 0===P||null===(D=P.grandTotal)||void 0===D?void 0:D.taxes.length)>0&&r.createElement(R.Z,{item:!0,xs:12,className:n.spacingTop},r.createElement(M.Z,{variant:"subtitle2",className:n.innerTitle},s("tax"))),null===(B=e.data.deliveryOrderData)||void 0===B||null===(L=B.grandTotal)||void 0===L||null===(F=L.taxes)||void 0===F?void 0:F.map((function(e,t){return r.createElement(R.Z,{container:!0,spacing:3,className:(n.rowSpacing,n.orderBox),key:t},r.createElement(ut,{title:s("fixedValue"),value:null==e?void 0:e.fixedValue}),r.createElement(ut,{title:s("percentValue"),value:null==e?void 0:e.percentValue}),r.createElement(ut,{title:s("taxType"),value:null==e?void 0:e.taxType}))}))),e.data.deliveryOrderData.itemSummaryList&&e.data.deliveryOrderData.itemSummaryList.length>0&&r.createElement(R.Z,{item:!0,xs:12,className:n.spacingTop},r.createElement(M.Z,{variant:"subtitle2",className:n.innerTitle},s("itemSummaryList"))),null===(j=e.data.deliveryOrderData.itemSummaryList)||void 0===j?void 0:j.map((function(e,t){return r.createElement(R.Z,{container:!0,spacing:3,className:(n.rowSpacing,n.orderBox),key:t},r.createElement(ut,{title:s("name"),value:null==e?void 0:e.name}),r.createElement(ut,{title:s("netAmount"),value:null==e?void 0:e.netAmount}),r.createElement(ut,{title:s("quantity"),value:null==e?void 0:e.quantity}),r.createElement(ut,{title:s("sku"),value:null==e?void 0:e.sku}))})),e.data.deliveryOrderData.deliveryOrders&&e.data.deliveryOrderData.deliveryOrders.length>0&&r.createElement(R.Z,{item:!0,xs:12,className:n.spacingTop},r.createElement(M.Z,{variant:"subtitle2",className:n.innerTitle},s("deliveryOrders"))),null===(W=e.data.deliveryOrderData.deliveryOrders)||void 0===W?void 0:W.map((function(e){var t;return r.createElement(R.Z,{container:!0,spacing:3,className:(n.rowSpacing,n.orderBox),key:e.orderId},r.createElement(r.Fragment,null,r.createElement(ut,{valueProps:{xs:12,sm:9},title:s("orderId"),value:e.orderId}),r.createElement(ut,{valueProps:{xs:12,sm:9},title:s("internalOrderId"),value:e.internalOrderId}),null===(t=e.orderRows)||void 0===t?void 0:t.map((function(e,t){var a,l,i,o,c,u,d,m,p,v,f,E,y,h,Z,b,S,I,N,x,w,C,O,T,k,P,D,B;return r.createElement(r.Fragment,{key:t},e.inventoryList&&e.inventoryList.length>0&&r.createElement(R.Z,{item:!0,xs:12,className:n.spacingTop},r.createElement(M.Z,{variant:"subtitle2",className:n.innerTitle},s("inventoryList"))),e.inventoryList.map((function(e,t){return r.createElement(R.Z,{item:!0,xs:12,className:n.spacingTop,key:t},r.createElement(R.Z,{container:!0,spacing:3,className:n.rowSpacing},r.createElement(ut,{title:s("batchId"),value:null==e?void 0:e.batchId}),r.createElement(ut,{title:s("inventoryId"),value:null==e?void 0:e.inventoryId}),r.createElement(ut,{title:s("ownerHistory"),value:null==e?void 0:e.ownerHistory}),r.createElement(ut,{title:s("ownerId"),value:null==e?void 0:e.ownerId}),r.createElement(ut,{title:s("productSKU"),value:null==e?void 0:e.productSKU}),r.createElement(ut,{title:s("serialNo"),value:null==e?void 0:e.serialNo})),r.createElement(R.Z,{container:!0,spacing:3,className:n.rowSpacing},r.createElement(ut,{valueProps:{xs:12,sm:9},title:s("refNo"),value:null==e?void 0:e.refNo})),r.createElement(R.Z,{container:!0,spacing:3,className:n.spacingTop},r.createElement(K.Z,{className:n.spacingBottom})))})),e.product&&r.createElement(r.Fragment,null,r.createElement(R.Z,{item:!0,xs:12,className:n.spacingTop},r.createElement(M.Z,{variant:"subtitle2",color:"primary",className:(0,_.default)(n.innerTitle,n.spacingBottom)},s("product"))),r.createElement(R.Z,{item:!0,xs:12},r.createElement(R.Z,{container:!0,spacing:3,className:n.rowSpacing},r.createElement(ut,{title:s("calculatedTax"),value:g(null===(a=e.product)||void 0===a||null===(l=a.calculatedTax)||void 0===l?void 0:l.amount,null===(i=e.product)||void 0===i||null===(o=i.calculatedTax)||void 0===o?void 0:o.currency)}),r.createElement(ut,{title:s("categoryPath"),value:null===(c=e.product)||void 0===c?void 0:c.categoryPath}),r.createElement(ut,{title:s("productCode"),value:null===(u=e.product)||void 0===u?void 0:u.productCode})),r.createElement(R.Z,{container:!0,spacing:3,className:n.rowSpacing},r.createElement(ut,{valueProps:{xs:12,sm:9},title:s("productDescription"),value:null===(d=e.product)||void 0===d?void 0:d.productDescription})),r.createElement(R.Z,{container:!0,spacing:3,className:n.rowSpacing},r.createElement(ut,{title:s("productId"),value:null===(m=e.product)||void 0===m?void 0:m.productId}),r.createElement(ut,{title:s("productName"),value:null===(p=e.product)||void 0===p?void 0:p.productName}),r.createElement(ut,{title:s("productSKU"),value:null===(v=e.product)||void 0===v?void 0:v.productSKU}),r.createElement(ut,{title:s("productType"),value:null===(f=e.product)||void 0===f?void 0:f.productType}),r.createElement(ut,{title:s("variablePrice"),value:null===(E=e.product)||void 0===E?void 0:E.variablePrice}),r.createElement(ut,{title:s("unitPrice"),value:g(null===(y=e.product)||void 0===y||null===(h=y.unitPrice)||void 0===h?void 0:h.amount,null===(Z=e.product)||void 0===Z||null===(b=Z.unitPrice)||void 0===b?void 0:b.currency)}),r.createElement(ut,{title:s("volume"),value:g(null===(S=e.product)||void 0===S||null===(I=S.volume)||void 0===I?void 0:I.value,null===(N=e.product)||void 0===N||null===(x=N.volume)||void 0===x?void 0:x.unit)}),r.createElement(ut,{title:s("weight"),value:g(null===(w=e.product)||void 0===w||null===(C=w.weight)||void 0===C?void 0:C.value,null===(O=e.product)||void 0===O||null===(T=O.weight)||void 0===T?void 0:T.unit)}),r.createElement(ut,{title:s("tax"),value:null===(k=e.product)||void 0===k||null===(P=k.taxes)||void 0===P?void 0:P.join(", ")}),e.quantity&&r.createElement(ut,{title:s("quantity"),value:g(null===(D=e.quantity)||void 0===D?void 0:D.quantity,null===(B=e.quantity)||void 0===B?void 0:B.unit)})))))}))))}))),r.createElement(K.Z,null))})))),i&&r.createElement(X.Z,{square:!0,expanded:"panel4"===m,onChange:v("panel4"),className:n.fullWidth},r.createElement(gt,{"aria-controls":"panel4d-content",id:"panel4d-header",expandIcon:r.createElement(ne.Z,null)},r.createElement(M.Z,{variant:"subtitle1",color:"primary"},s("wareHouseInfo"))),r.createElement(te.Z,{className:n.displayBlock},i.map((function(e,t){var a,l,i,o,c,u,d,m,p,v,E,y,h,Z,b,S,I,N,x,w,C,O,T,k,P,D,B,L,F,j,W,A,q,U,z,V,H,J,Q,Y,G,$,X,ee,te,ne,ae;return r.createElement("div",{key:t},r.createElement(R.Z,{container:!0,spacing:3,className:n.spacingBottom},r.createElement(R.Z,{item:!0,xs:12,className:n.spacingTop},r.createElement(M.Z,{variant:"subtitle1",className:n.innerTitle},s("wareHouseId"),": (",e.warehouseId,")"))),r.createElement(R.Z,{container:!0,spacing:3,className:n.rowSpacing},r.createElement(ut,{title:s("priority"),value:e.priority}),r.createElement(ut,{title:s("status"),value:e.status}),r.createElement(ut,{title:s("createdAt"),value:e.createdAt})),e&&(null==e?void 0:e.warehouseInfo)&&r.createElement(r.Fragment,null,r.createElement(R.Z,{item:!0,xs:12,className:(0,_.default)(n.spacingTop,n.spacingBottom)},r.createElement(M.Z,{variant:"subtitle1",className:n.innerTitle},s("wareHouseInfo"))),r.createElement(R.Z,{container:!0,spacing:3,className:n.rowSpacing},r.createElement(ut,{title:s("parentResellerId"),value:null==e||null===(a=e.warehouseInfo)||void 0===a?void 0:a.parentResellerId}),r.createElement(ut,{title:s("parentResellerName"),value:null==e||null===(l=e.warehouseInfo)||void 0===l?void 0:l.parentResellerName}),r.createElement(ut,{title:s("resellerId"),value:null==e||null===(i=e.warehouseInfo)||void 0===i?void 0:i.resellerId}),r.createElement(ut,{title:s("resellerName"),value:null==e||null===(o=e.warehouseInfo)||void 0===o?void 0:o.resellerName}),r.createElement(ut,{title:s("resellerMSISDN"),value:null==e||null===(c=e.warehouseInfo)||void 0===c?void 0:c.resellerMSISDN}),r.createElement(ut,{title:s("status"),value:null==e||null===(u=e.warehouseInfo)||void 0===u?void 0:u.status}),r.createElement(ut,{title:s("resellerTypeId"),value:null==e||null===(d=e.warehouseInfo)||void 0===d?void 0:d.resellerTypeId}),r.createElement(ut,{title:s("resellerTypeName"),value:null==e||null===(m=e.warehouseInfo)||void 0===m?void 0:m.resellerTypeName}),r.createElement(ut,{title:s("resellerPath"),value:null==e||null===(p=e.warehouseInfo)||void 0===p?void 0:p.resellerPath,valueProps:{xs:12,sm:9}}),(null==e?void 0:e.warehouseInfo.additionalFields)&&(null==e?void 0:e.warehouseInfo.additionalFields.map((function(e,t){return ft.includes(e.name)?null:("dbmDob"==e.name&&(e.value=e.value.split("T")[0]),r.createElement(ut,{key:t,title:s(e.name,f(e.name)),value:e.value}))}))),(null==e?void 0:e.warehouseInfo.additionalKYCFields)&&(null==e?void 0:e.warehouseInfo.additionalKYCFields.map((function(e,t){return r.createElement(ut,{key:t,title:s(e.name,f(e.name)),value:e.value})})))),r.createElement(R.Z,{container:!0,spacing:3,className:n.rowSpacing},r.createElement(ut,{title:s("street"),value:null==e||null===(v=e.warehouseInfo)||void 0===v||null===(E=v.address)||void 0===E?void 0:E.street}),r.createElement(ut,{title:s("zip"),value:null==e||null===(y=e.warehouseInfo)||void 0===y||null===(h=y.address)||void 0===h?void 0:h.zip}),r.createElement(ut,{title:s("city"),value:null==e||null===(Z=e.warehouseInfo)||void 0===Z||null===(b=Z.address)||void 0===b?void 0:b.city}),r.createElement(ut,{title:s("country"),value:null==e||null===(S=e.warehouseInfo)||void 0===S||null===(I=S.address)||void 0===I?void 0:I.country}),r.createElement(ut,{title:s("phone"),value:null==e||null===(N=e.warehouseInfo)||void 0===N||null===(x=N.address)||void 0===x?void 0:x.phone}),r.createElement(ut,{title:s("fax"),value:null==e||null===(w=e.warehouseInfo)||void 0===w||null===(C=w.address)||void 0===C?void 0:C.fax}),r.createElement(ut,{title:s("homepage"),value:null==e||null===(O=e.warehouseInfo)||void 0===O||null===(T=O.address)||void 0===T?void 0:T.homepage}),r.createElement(ut,{title:s("email"),value:null==e||null===(k=e.warehouseInfo)||void 0===k||null===(P=k.address)||void 0===P?void 0:P.email}))),e&&(null==e?void 0:e.data)&&(null==e||null===(D=e.data)||void 0===D?void 0:D.deliveryOrderData)&&r.createElement(R.Z,{container:!0,spacing:3,className:n.rowSpacing},r.createElement(R.Z,{item:!0,xs:12,className:n.spacingTop},r.createElement(M.Z,{variant:"subtitle1",className:n.innerTitle},s("orderDetail"))),(null==e||null===(B=e.data)||void 0===B||null===(L=B.deliveryOrderData)||void 0===L?void 0:L.grandTotal)&&r.createElement("div",{className:n.spacingBottom},r.createElement(R.Z,{item:!0,xs:12},r.createElement(M.Z,{variant:"subtitle2",className:n.innerTitle},s("grandTotal"))),r.createElement(R.Z,{container:!0,spacing:3,className:(n.rowSpacing,n.orderBox)},r.createElement(ut,{title:s("amount"),value:(null===(F=e.data.deliveryOrderData.grandTotal)||void 0===F?void 0:F.amount)&&"".concat(null===(j=e.data.deliveryOrderData.grandTotal)||void 0===j?void 0:j.amount," ").concat(null===(W=e.data.deliveryOrderData.grandTotal)||void 0===W?void 0:W.currency)}),r.createElement(ut,{title:s("netAmount"),value:null===(A=e.data.deliveryOrderData.grandTotal)||void 0===A?void 0:A.netAmount}),(null===(q=e.data.deliveryOrderData)||void 0===q||null===(U=q.grandTotal)||void 0===U?void 0:U.taxes)&&(null===(z=e.data.deliveryOrderData)||void 0===z||null===(V=z.grandTotal)||void 0===V?void 0:V.taxes.length)>0&&r.createElement(R.Z,{item:!0,xs:12,className:n.spacingTop},r.createElement(M.Z,{variant:"subtitle2",className:n.innerTitle},s("tax"))),null===(H=e.data.deliveryOrderData)||void 0===H||null===(J=H.grandTotal)||void 0===J||null===(Q=J.taxes)||void 0===Q?void 0:Q.map((function(e,t){return r.createElement(R.Z,{container:!0,spacing:3,className:(n.rowSpacing,n.orderBox),key:t},r.createElement(ut,{title:s("fixedValue"),value:null==e?void 0:e.fixedValue}),r.createElement(ut,{title:s("percentValue"),value:null==e?void 0:e.percentValue}),r.createElement(ut,{title:s("taxType"),value:null==e?void 0:e.taxType}))})))),(null==e||null===(Y=e.data)||void 0===Y||null===(G=Y.deliveryOrderData)||void 0===G?void 0:G.itemSummaryList)&&(null==e||null===($=e.data)||void 0===$||null===(X=$.deliveryOrderData)||void 0===X?void 0:X.itemSummaryList.length)>0&&r.createElement(R.Z,{item:!0,xs:12},r.createElement(M.Z,{variant:"subtitle2",className:n.innerTitle},s("itemSummaryList"))),null==e||null===(ee=e.data)||void 0===ee||null===(te=ee.deliveryOrderData)||void 0===te||null===(ne=te.itemSummaryList)||void 0===ne?void 0:ne.map((function(e,t){return r.createElement(R.Z,{container:!0,spacing:3,className:(n.rowSpacing,n.orderBox),key:t},r.createElement(ut,{title:s("name"),value:null==e?void 0:e.name}),r.createElement(ut,{title:s("netAmount"),value:null==e?void 0:e.netAmount}),r.createElement(ut,{title:s("quantity"),value:null==e?void 0:e.quantity}),r.createElement(ut,{title:s("sku"),value:null==e?void 0:e.sku}))})),e.data.deliveryOrderData.deliveryOrders&&e.data.deliveryOrderData.deliveryOrders.length>0&&r.createElement(R.Z,{item:!0,xs:12,className:n.spacingTop},r.createElement(M.Z,{variant:"subtitle2",className:n.innerTitle},s("deliveryOrders"))),null===(ae=e.data.deliveryOrderData.deliveryOrders)||void 0===ae?void 0:ae.map((function(e){var t;return r.createElement(R.Z,{container:!0,spacing:3,className:(n.rowSpacing,n.orderBox),key:e.orderId},r.createElement(r.Fragment,null,r.createElement(ut,{valueProps:{xs:12,sm:9},title:s("orderId"),value:e.orderId}),r.createElement(ut,{valueProps:{xs:12,sm:9},title:s("internalOrderId"),value:e.internalOrderId}),null===(t=e.orderRows)||void 0===t?void 0:t.map((function(e,t){var a,l,i,o,c,u,d,m,p,v,f,E,y,h,Z,b,S,I,N,x,w,C,O,T,k,P,D,B;return r.createElement(r.Fragment,{key:t},e.inventoryList&&e.inventoryList.length>0&&r.createElement(R.Z,{item:!0,xs:12,className:n.spacingTop},r.createElement(M.Z,{variant:"subtitle2",className:n.innerTitle},s("inventoryList"))),e.inventoryList.map((function(e,t){return r.createElement(R.Z,{item:!0,xs:12,className:n.spacingTop,key:t},r.createElement(R.Z,{container:!0,spacing:3,className:n.rowSpacing},r.createElement(ut,{title:s("batchId"),value:null==e?void 0:e.batchId}),r.createElement(ut,{title:s("inventoryId"),value:null==e?void 0:e.inventoryId}),r.createElement(ut,{title:s("ownerHistory"),value:null==e?void 0:e.ownerHistory}),r.createElement(ut,{title:s("ownerId"),value:null==e?void 0:e.ownerId}),r.createElement(ut,{title:s("productSKU"),value:null==e?void 0:e.productSKU}),r.createElement(ut,{title:s("serialNo"),value:null==e?void 0:e.serialNo})),r.createElement(R.Z,{container:!0,spacing:3,className:n.rowSpacing},r.createElement(ut,{valueProps:{xs:12,sm:9},title:s("refNo"),value:null==e?void 0:e.refNo})),r.createElement(R.Z,{container:!0,spacing:3,className:n.spacingTop},r.createElement(K.Z,{className:n.spacingBottom})))})),e.product&&r.createElement(r.Fragment,null,r.createElement(R.Z,{item:!0,xs:12,className:n.spacingTop},r.createElement(M.Z,{variant:"subtitle2",color:"primary",className:(0,_.default)(n.innerTitle,n.spacingBottom)},s("product"))),r.createElement(R.Z,{item:!0,xs:12},r.createElement(R.Z,{container:!0,spacing:3,className:n.rowSpacing},r.createElement(ut,{title:s("calculatedTax"),value:g(null===(a=e.product)||void 0===a||null===(l=a.calculatedTax)||void 0===l?void 0:l.amount,null===(i=e.product)||void 0===i||null===(o=i.calculatedTax)||void 0===o?void 0:o.currency)}),r.createElement(ut,{title:s("categoryPath"),value:null===(c=e.product)||void 0===c?void 0:c.categoryPath}),r.createElement(ut,{title:s("productCode"),value:null===(u=e.product)||void 0===u?void 0:u.productCode})),r.createElement(R.Z,{container:!0,spacing:3,className:n.rowSpacing},r.createElement(ut,{valueProps:{xs:12,sm:9},title:s("productDescription"),value:null===(d=e.product)||void 0===d?void 0:d.productDescription})),r.createElement(R.Z,{container:!0,spacing:3,className:n.rowSpacing},r.createElement(ut,{title:s("productId"),value:null===(m=e.product)||void 0===m?void 0:m.productId}),r.createElement(ut,{title:s("productName"),value:null===(p=e.product)||void 0===p?void 0:p.productName}),r.createElement(ut,{title:s("productSKU"),value:null===(v=e.product)||void 0===v?void 0:v.productSKU}),r.createElement(ut,{title:s("productType"),value:null===(f=e.product)||void 0===f?void 0:f.productType}),r.createElement(ut,{title:s("variablePrice"),value:null===(E=e.product)||void 0===E?void 0:E.variablePrice}),r.createElement(ut,{title:s("unitPrice"),value:g(null===(y=e.product)||void 0===y||null===(h=y.unitPrice)||void 0===h?void 0:h.amount,null===(Z=e.product)||void 0===Z||null===(b=Z.unitPrice)||void 0===b?void 0:b.currency)}),r.createElement(ut,{title:s("volume"),value:g(null===(S=e.product)||void 0===S||null===(I=S.volume)||void 0===I?void 0:I.value,null===(N=e.product)||void 0===N||null===(x=N.volume)||void 0===x?void 0:x.unit)}),r.createElement(ut,{title:s("weight"),value:g(null===(w=e.product)||void 0===w||null===(C=w.weight)||void 0===C?void 0:C.value,null===(O=e.product)||void 0===O||null===(T=O.weight)||void 0===T?void 0:T.unit)}),r.createElement(ut,{title:s("tax"),value:null===(k=e.product)||void 0===k||null===(P=k.taxes)||void 0===P?void 0:P.join(", ")}),e.quantity&&r.createElement(ut,{title:s("quantity"),value:g(null===(D=e.quantity)||void 0===D?void 0:D.quantity,null===(B=e.quantity)||void 0===B?void 0:B.unit)})))))}))))}))),r.createElement(K.Z,null))})))),c&&r.createElement(X.Z,{square:!0,expanded:"panel5"===m,onChange:v("panel5"),className:n.fullWidth},r.createElement(gt,{"aria-controls":"panel45-content",id:"panel45-header",expandIcon:r.createElement(ne.Z,null)},r.createElement(M.Z,{variant:"subtitle1",color:"primary"},s("taskList"))),r.createElement(te.Z,{className:n.displayBlock},c.map((function(e){var t,a,l,i,o,c,u,d,m,p,v,E,y,h,Z,b;return r.createElement("div",{key:e.taskId},r.createElement(R.Z,{item:!0,xs:12,className:n.spacingTop},r.createElement(M.Z,{variant:"subtitle2",className:n.innerTitle,style:{margin:10}},s("taskId"),": ",e.taskId)),r.createElement(R.Z,{container:!0,spacing:3,className:(n.rowSpacing,n.orderBox)},r.createElement(ut,{title:s("externalTaskId"),value:e.externalTaskId,valueProps:{xs:12,sm:9}}),r.createElement(ut,{title:s("type"),value:null==e?void 0:e.taskType}),r.createElement(ut,{title:s("status"),value:null==e?void 0:e.taskStatus}),r.createElement(ut,{title:s("createdAt"),value:null==e?void 0:e.createdAt}),r.createElement(ut,{title:s("lastUpdated"),value:null==e?void 0:e.lastUpdated})),e&&e.orderData&&(null===(t=e.orderData)||void 0===t?void 0:t.deliveryOrder)&&r.createElement(r.Fragment,null,r.createElement(R.Z,{item:!0,xs:12,className:n.spacingTop},r.createElement(M.Z,{variant:"subtitle2",className:n.innerTitle,style:{margin:10}},s("deliveryOrders"))),r.createElement(R.Z,{container:!0,spacing:3,className:(n.rowSpacing,n.orderBox)},r.createElement(r.Fragment,null,r.createElement(ut,{valueProps:{xs:12,sm:9},title:s("sellerId"),value:null===(a=e.orderData)||void 0===a?void 0:a.sellerId}),r.createElement(ut,{valueProps:{xs:12,sm:9},title:s("orderId"),value:null===(l=e.orderData)||void 0===l||null===(i=l.deliveryOrder)||void 0===i?void 0:i.orderId}),r.createElement(ut,{valueProps:{xs:12,sm:9},title:s("internalOrderId"),value:null===(o=e.orderData)||void 0===o||null===(c=o.deliveryOrder)||void 0===c?void 0:c.internalOrderId}),(null===(u=e.orderData)||void 0===u||null===(d=u.deliveryOrder)||void 0===d?void 0:d.orderRows)&&(null===(m=e.orderData)||void 0===m||null===(p=m.deliveryOrder)||void 0===p?void 0:p.orderRows.length)>0&&r.createElement(r.Fragment,null,null===(v=e.orderData)||void 0===v||null===(E=v.deliveryOrder)||void 0===E||null===(y=E.orderRows)||void 0===y?void 0:y.map((function(e,t){var a,l,i,o,c,u,d,m,p,v,f,E,y,h,Z,b,S,I,N,x,w,C,O,T,k,P,D,B;return r.createElement(r.Fragment,{key:t},e.inventoryList&&e.inventoryList.length>0&&r.createElement(R.Z,{item:!0,xs:12,className:n.spacingTop},r.createElement(M.Z,{variant:"subtitle2",className:n.innerTitle},s("inventoryList"))),e.inventoryList.map((function(e,t){return r.createElement(R.Z,{item:!0,xs:12,className:n.spacingTop,key:t},r.createElement(R.Z,{container:!0,spacing:3,className:n.rowSpacing},r.createElement(ut,{title:s("batchId"),value:null==e?void 0:e.batchId}),r.createElement(ut,{title:s("inventoryId"),value:null==e?void 0:e.inventoryId}),r.createElement(ut,{title:s("ownerHistory"),value:null==e?void 0:e.ownerHistory}),r.createElement(ut,{title:s("ownerId"),value:null==e?void 0:e.ownerId}),r.createElement(ut,{title:s("productSKU"),value:null==e?void 0:e.productSKU}),r.createElement(ut,{title:s("serialNo"),value:null==e?void 0:e.serialNo})),r.createElement(R.Z,{container:!0,spacing:3,className:n.rowSpacing},r.createElement(ut,{valueProps:{xs:12,sm:9},title:s("refNo"),value:null==e?void 0:e.refNo})),r.createElement(R.Z,{container:!0,spacing:3,className:n.spacingTop},r.createElement(K.Z,{className:n.spacingBottom})))})),e.product&&r.createElement(r.Fragment,null,r.createElement(R.Z,{item:!0,xs:12,className:n.spacingTop},r.createElement(M.Z,{variant:"subtitle2",color:"primary",className:(0,_.default)(n.innerTitle,n.spacingBottom)},s("product"))),r.createElement(R.Z,{item:!0,xs:12},r.createElement(R.Z,{container:!0,spacing:3,className:n.rowSpacing},r.createElement(ut,{title:s("calculatedTax"),value:g(null===(a=e.product)||void 0===a||null===(l=a.calculatedTax)||void 0===l?void 0:l.amount,null===(i=e.product)||void 0===i||null===(o=i.calculatedTax)||void 0===o?void 0:o.currency)}),r.createElement(ut,{title:s("categoryPath"),value:null===(c=e.product)||void 0===c?void 0:c.categoryPath}),r.createElement(ut,{title:s("productCode"),value:null===(u=e.product)||void 0===u?void 0:u.productCode})),r.createElement(R.Z,{container:!0,spacing:3,className:n.rowSpacing},r.createElement(ut,{valueProps:{xs:12,sm:9},title:s("productDescription"),value:null===(d=e.product)||void 0===d?void 0:d.productDescription})),r.createElement(R.Z,{container:!0,spacing:3,className:n.rowSpacing},r.createElement(ut,{title:s("productId"),value:null===(m=e.product)||void 0===m?void 0:m.productId}),r.createElement(ut,{title:s("productName"),value:null===(p=e.product)||void 0===p?void 0:p.productName}),r.createElement(ut,{title:s("productSKU"),value:null===(v=e.product)||void 0===v?void 0:v.productSKU}),r.createElement(ut,{title:s("productType"),value:null===(f=e.product)||void 0===f?void 0:f.productType}),r.createElement(ut,{title:s("variablePrice"),value:null===(E=e.product)||void 0===E?void 0:E.variablePrice}),r.createElement(ut,{title:s("unitPrice"),value:g(null===(y=e.product)||void 0===y||null===(h=y.unitPrice)||void 0===h?void 0:h.amount,null===(Z=e.product)||void 0===Z||null===(b=Z.unitPrice)||void 0===b?void 0:b.currency)}),r.createElement(ut,{title:s("volume"),value:g(null===(S=e.product)||void 0===S||null===(I=S.volume)||void 0===I?void 0:I.value,null===(N=e.product)||void 0===N||null===(x=N.volume)||void 0===x?void 0:x.unit)}),r.createElement(ut,{title:s("weight"),value:g(null===(w=e.product)||void 0===w||null===(C=w.weight)||void 0===C?void 0:C.value,null===(O=e.product)||void 0===O||null===(T=O.weight)||void 0===T?void 0:T.unit)}),r.createElement(ut,{title:s("tax"),value:null===(k=e.product)||void 0===k||null===(P=k.taxes)||void 0===P?void 0:P.join(", ")}),e.quantity&&r.createElement(ut,{title:s("quantity"),value:g(null===(D=e.quantity)||void 0===D?void 0:D.quantity,null===(B=e.quantity)||void 0===B?void 0:B.unit)})))))})))))),e&&e.orderData&&(null===(h=e.orderData)||void 0===h?void 0:h.posInfo)&&r.createElement(r.Fragment,null,r.createElement(R.Z,{item:!0,xs:12,className:(0,_.default)(n.spacingTop,n.rowSpacing)},r.createElement(M.Z,{variant:"subtitle2",className:n.innerTitle,style:{margin:10}},s("posInfo"))),r.createElement(R.Z,{container:!0,spacing:3,className:(n.rowSpacing,n.orderBox)},e&&e.orderData&&(null===(Z=e.orderData)||void 0===Z?void 0:Z.posInfo)&&e.orderData.posInfo.map((function(e,t){var a,l,i,o,c,u,d,m;return r.createElement(r.Fragment,{key:t},r.createElement(R.Z,{container:!0,spacing:3,className:(0,_.default)(n.rowSpacing,n.spacingTop)},r.createElement(ut,{title:s("parentResellerId"),value:null==e?void 0:e.parentResellerId}),r.createElement(ut,{title:s("parentResellerName"),value:null==e?void 0:e.parentResellerName}),r.createElement(ut,{title:s("resellerId"),value:null==e?void 0:e.resellerId}),r.createElement(ut,{title:s("resellerName"),value:null==e?void 0:e.resellerName}),r.createElement(ut,{title:s("resellerMSISDN"),value:null==e?void 0:e.resellerMSISDN}),r.createElement(ut,{title:s("status"),value:null==e?void 0:e.status}),r.createElement(ut,{title:s("resellerTypeId"),value:null==e?void 0:e.resellerTypeId}),r.createElement(ut,{title:s("resellerTypeName"),value:null==e?void 0:e.resellerTypeName}),r.createElement(ut,{title:s("resellerPath"),value:null==e?void 0:e.resellerPath,valueProps:{xs:12,sm:9}}),e.additionalFields&&e.additionalFields.map((function(e,t){return ft.includes(e.name)?null:("dbmDob"==e.name&&(e.value=e.value.split("T")[0]),r.createElement(ut,{key:t,title:s(e.name,f(e.name)),value:e.value}))})),e.additionalKYCFields&&e.additionalKYCFields.map((function(e,t){return r.createElement(ut,{key:t,title:s(e.name,f(e.name)),value:e.value})}))),r.createElement(R.Z,{container:!0,spacing:3,className:n.rowSpacing},r.createElement(ut,{title:s("street"),value:null===(a=e.address)||void 0===a?void 0:a.street}),r.createElement(ut,{title:s("zip"),value:null===(l=e.address)||void 0===l?void 0:l.zip}),r.createElement(ut,{title:s("city"),value:null===(i=e.address)||void 0===i?void 0:i.city}),r.createElement(ut,{title:s("country"),value:null===(o=e.address)||void 0===o?void 0:o.country}),r.createElement(ut,{title:s("phone"),value:null===(c=e.address)||void 0===c?void 0:c.phone}),r.createElement(ut,{title:s("fax"),value:null===(u=e.address)||void 0===u?void 0:u.fax}),r.createElement(ut,{title:s("homepage"),value:null===(d=e.address)||void 0===d?void 0:d.homepage}),r.createElement(ut,{title:s("email"),value:null===(m=e.address)||void 0===m?void 0:m.email})),r.createElement(R.Z,{container:!0,spacing:3,className:n.spacingTop},r.createElement(K.Z,{className:n.spacingBottom})))})))),e&&e.orderData&&(null===(b=e.orderData)||void 0===b?void 0:b.warehouseInfo)&&r.createElement(r.Fragment,null,r.createElement(R.Z,{item:!0,xs:12,className:(0,_.default)(n.spacingTop,n.rowSpacing)},r.createElement(M.Z,{variant:"subtitle2",className:n.innerTitle,style:{margin:10}},s("warehouseInfo"))),r.createElement(R.Z,{container:!0,spacing:3,className:(n.rowSpacing,n.orderBox)},e&&e.orderData&&e.orderData.warehouseInfo&&e.orderData.warehouseInfo.map((function(e,t){var a,l,i,o,c,u,d,m;return r.createElement(r.Fragment,{key:t},r.createElement(R.Z,{container:!0,spacing:3,className:(0,_.default)(n.rowSpacing,n.spacingTop)},r.createElement(ut,{title:s("parentResellerId"),value:null==e?void 0:e.parentResellerId}),r.createElement(ut,{title:s("parentResellerName"),value:null==e?void 0:e.parentResellerName}),r.createElement(ut,{title:s("resellerId"),value:null==e?void 0:e.resellerId}),r.createElement(ut,{title:s("resellerName"),value:null==e?void 0:e.resellerName}),r.createElement(ut,{title:s("resellerMSISDN"),value:null==e?void 0:e.resellerMSISDN}),r.createElement(ut,{title:s("status"),value:null==e?void 0:e.status}),r.createElement(ut,{title:s("resellerTypeId"),value:null==e?void 0:e.resellerTypeId}),r.createElement(ut,{title:s("resellerTypeName"),value:null==e?void 0:e.resellerTypeName}),r.createElement(ut,{title:s("resellerPath"),value:null==e?void 0:e.resellerPath,valueProps:{xs:12,sm:9}}),e.additionalFields&&e.additionalFields.map((function(e,t){return ft.includes(e.name)?null:("dbmDob"==e.name&&(e.value=e.value.split("T")[0]),r.createElement(ut,{key:t,title:s(e.name,f(e.name)),value:e.value}))})),e.additionalKYCFields&&e.additionalKYCFields.map((function(e,t){return r.createElement(ut,{key:t,title:s(e.name,f(e.name)),value:e.value})}))),r.createElement(R.Z,{container:!0,spacing:3,className:n.rowSpacing},r.createElement(ut,{title:s("street"),value:null===(a=e.address)||void 0===a?void 0:a.street}),r.createElement(ut,{title:s("zip"),value:null===(l=e.address)||void 0===l?void 0:l.zip}),r.createElement(ut,{title:s("city"),value:null===(i=e.address)||void 0===i?void 0:i.city}),r.createElement(ut,{title:s("country"),value:null===(o=e.address)||void 0===o?void 0:o.country}),r.createElement(ut,{title:s("phone"),value:null===(c=e.address)||void 0===c?void 0:c.phone}),r.createElement(ut,{title:s("fax"),value:null===(u=e.address)||void 0===u?void 0:u.fax}),r.createElement(ut,{title:s("homepage"),value:null===(d=e.address)||void 0===d?void 0:d.homepage}),r.createElement(ut,{title:s("email"),value:null===(m=e.address)||void 0===m?void 0:m.email})),r.createElement(R.Z,{container:!0,spacing:3,className:n.spacingTop},r.createElement(K.Z,{className:n.spacingBottom})))})))),r.createElement(K.Z,null))})))))};var yt,ht,Zt=n(17871);function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function St(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach((function(t){(0,Fe.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var It=(0,j.Z)((function(e){return(0,W.Z)({dialogWrapper:{textAlign:"center","& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},root:{display:"inline-flex",flexDirection:"row",alignItems:"center",height:48,paddingLeft:20},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginBottom:e.spacing(3)},btnSpace:{marginRight:e.spacing(2)},labelHeader:{display:"flex",flexDirection:"row",justifyContent:"space-between",width:"60%",marginTop:"1%",marginBottom:"3%"},label:{width:"30%",height:"50px",borderRadius:"0px",display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center",border:"none",boxShadow:"0px 0px 1px 0px",fontWeight:"bold",fontSize:"18px"},labelIcon:{color:"red"},element:{margin:e.spacing(1),"& .MuiSelect-select.MuiSelect-select":{height:"36px"},"& .MuiInput-underline:before":{borderBottom:"none"}},infoWindow:{"& .gm-style .gm-style-iw-c":{top:"-40px"}},optionContainer:{paddingTop:"10px"},optionSelectContainer:{marginLeft:"60%",display:"flex",flexDirection:"row",alignItems:"center"},editContainer:{marginLeft:"91%"},optimizedButton:{marginRight:"2%",marginLeft:"2%",borderRadius:"5px",marginTop:"5%",height:"40px"}})}));function Nt(e){var t=It(),n=e.item,a=e.applyValue;return r.createElement("div",{className:t.root},r.createElement(Ae.Z,{className:t.root,name:n.field,value:n.value,onChange:function(e){a(St(St({},n),{},{value:e.target.value}))}}))}var xt=(null===(yt=window.config)||void 0===yt||null===(ht=yt.livemap)||void 0===ht?void 0:ht.center)||{lat:-2.31234,lng:45};const wt=function(e){var t,n,a=e.routeOptimaization,l=e.loading,i=e.totalCount,o=e.setPriorityChange,c=e.setOptionData,s=(e.page,e.perPage),u=(e.selectedValue,e.onCancel),d=e.onSave,m=(e.orderBy,r.useMemo((function(){return null==(e=a)||null===(t=e.posTripList)||void 0===t?void 0:t.map((function(e,t){var n,a,l,r,i="",o=e.posId,c=e.priority,s=e.tripETA,u=e.posInfo,d=e.unplannedTaskDetailList,m=null==u||null===(n=u.additionalFields)||void 0===n?void 0:n.filter((function(e){return"latitude"===e.name})),p=null==u||null===(a=u.additionalFields)||void 0===a?void 0:a.filter((function(e){return"longitude"===e.name}));d&&(i=d.map((function(e){return e.taskType})).join("-"));return{id:t,posId:o,priority:c,tripETA:s,latitutde:parseFloat(null===(l=m[0])||void 0===l?void 0:l.value)+1,longitude:parseFloat(null===(r=p[0])||void 0===r?void 0:r.value)+1,task:i,isInfocardVisible:!0}}));var e,t}),[a])||[]),p=(0,U.useTranslation)().t,v=It(),g=r.useState(null),f=(0,w.Z)(g,2),E=(f[0],f[1]),y=r.useState(xt),h=(0,w.Z)(y,2),Z=h[0],b=(h[1],r.useState(null)),S=(0,w.Z)(b,2),I=(S[0],S[1]),N=r.useState(null==a?void 0:a.optimizationMethod),C=(0,w.Z)(N,2),O=C[0],T=C[1],k=r.useState(m),P=(0,w.Z)(k,2),D=P[0],B=P[1],L=r.useState(!1),F=(0,w.Z)(L,2),M=F[0],j=F[1],W=r.useState(2),q=(0,w.Z)(W,2),z=q[0],V=(q[1],(null===(t=window.config)||void 0===t||null===(n=t.livemap)||void 0===n?void 0:n.apiKey)||""),K=(0,Zt.Db)({googleMapsApiKey:V}).isLoaded,H=[{label:"Equal",value:"equal",getApplyFilterFn:function(e){return e.columnField&&e.value&&e.operatorValue?function(t){return t.value==e.value}:null},InputComponent:Nt}],J=function(e,t){var n=D;n[e].priority=parseInt(t.target.value);var a,l,r,i,c=(l=e,r=t.target.value-1,i=(a=n).splice(l,1)[0],a.splice(r,0,i),a);B([]),c.forEach((function(e,t){e.priority=t+1,B([].concat((0,x.Z)(D),[e]))})),o(c)},Q=(r.useCallback((function(e,t){J(e,t)}),[D]),function(e){return E(e)});r.useEffect((function(){m.sort((function(e,t){return(null==e?void 0:e.priority)-(null==t?void 0:t.priority)})),B(m)}));var Y=[{field:"posId",headerName:p("resellerId"),sortable:!0,flex:1,filterOperators:H},{field:"task",headerName:p("Tasks"),sortable:!0,flex:1,filterOperators:H},{field:"priority",headerName:p("priority"),sortable:!0,flex:1,filterOperators:H,renderCell:function(e){return"Manual"===O?r.createElement(A.SeamlessDropDown,{className:(0,_.default)(v.element),fullWidth:!0,options:[{value:"Choose",key:"Choose"}].concat((0,x.Z)(D.map((function(e,t){return{value:(t+1).toString(),key:(t+1).toString()}})))),name:"senderAccountType",value:e.getValue("priority"),onChange:function(t){J(e.rowIndex,t)}}):r.createElement("div",null,e.getValue("priority"))},width:140}];return r.createElement(r.Fragment,null,K?r.createElement(Zt.b6,{onLoad:Q,zoom:z,center:Z,options:{fullscreenControl:!1,mapTypeControl:!1,streetViewControl:!1},mapContainerStyle:{height:"100%",width:"100%"}},r.createElement(r.Fragment,null,D.map((function(e,t){return r.createElement(Zt.Jx,{key:t,position:{lat:e.latitutde,lng:e.longitude},clickable:!0,onClick:function(){return function(e,t){var n=D,a=e;a.isInfocardVisible=!0,n[t]=a,B([]),n.forEach((function(e){B([].concat((0,x.Z)(D),[e]))}))}(e,t)}},e.isInfocardVisible&&r.createElement(Zt.nx,{position:{lat:e.latitutde,lng:e.longitude},onCloseClick:function(){return function(e,t){var n=D,a=e;a.isInfocardVisible=!1,n[t]=a,B([]),n.forEach((function(e){B([].concat((0,x.Z)(D),[e]))}))}(e,t)},options:{pixelOffset:new google.maps.Size(0,-40)}},r.createElement("div",null,r.createElement("p",null,e.posId))))})))):null,M?r.createElement(R.Z,{item:!0,xs:3,sm:12,className:v.optionContainer},r.createElement(R.Z,{item:!0,xs:3,sm:6,className:v.optionSelectContainer},r.createElement(A.SeamlessDropDown,{className:(0,_.default)(v.element),fullWidth:!0,label:p("optimizeOrderType"),options:[{value:"Choose",key:p("choose")}].concat((0,x.Z)(null==a?void 0:a.optimizeBy.map((function(e){return{value:e,key:e}})))),name:"optimizeOrderType",value:O,onChange:function(e){c(e.target.value),e.target.value&&T(e.target.value)}}),r.createElement(A.SeamlessButton,{onClick:function(){return function(){var e=[];D.map((function(t,n){e.push({posId:t.posId,priority:t.priority})}));var t={listOfPrioritiesByPOS:e,optimizationMethod:O,tripId:null==a?void 0:a.tripId};I(t),d(t),j(!1)}()},className:v.optimizedButton,variant:"contained",color:"primary"},p("saveButton")),r.createElement(A.SeamlessButton,{onClick:function(){u(!0),j(!1)},className:v.optimizedButton,variant:"contained",color:"primary"},p("cancel")))):r.createElement(R.Z,{item:!0,xs:3,sm:12,className:v.optionContainer},r.createElement(R.Z,{item:!0,xs:3,sm:3,className:v.editContainer},D.length>0&&r.createElement(A.SeamlessButton,{onClick:function(){j(!0),T(null==a?void 0:a.optimizationMethod)},className:v.optimizedButton,variant:"contained",color:"primary"},p("edit")))),r.createElement(je(),{loading:l,columnBuffer:2,rows:D,pagination:!0,pageSize:s,rowCount:i,getRowId:function(e){return null==e?void 0:e.id},columns:Y}))};function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(n),!0).forEach((function(t){(0,Fe.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Tt=function(e){var t=e.children,n=r.useState(!1),a=(0,w.Z)(n,2),l=a[0],i=a[1],c=r.useState(0),s=(0,w.Z)(c,2),u=s[0],d=s[1],m=r.useState(30),p=(0,w.Z)(m,2),v=p[0],g=(p[1],r.useState(1)),f=(0,w.Z)(g,2),E=f[0],y=f[1],h=r.useState("desc"),Z=(0,w.Z)(h,2),b=Z[0],S=Z[1],I=r.useState("tripCreated"),N=(0,w.Z)(I,2),x=N[0],C=N[1],O=r.useState({}),k=(0,w.Z)(O,2),P=k[0],D=k[1],B=r.useState(""),L=(0,w.Z)(B,2),R=L[0],F=L[1],M=r.useState(""),j=(0,w.Z)(M,2),W=j[0],A=j[1],q=z(),_=q.showErrorMessage,V=q.showWarningMessage,K=q.showSuccessMessage,H=r.useState(""),J=(0,w.Z)(H,2),Q=J[0],Y=J[1],G=(0,o.useParams)().tripId,$=r.useState(null),X=(0,w.Z)($,2),ee=X[0],te=X[1],ne=(0,U.useTranslation)().t,ae="",le=r.useCallback((function(e){var t=e.sortModel[0].field,n=e.sortModel[0].sort;C(t),S(n)}),[]),re=r.useCallback((function(e){var t=e.filterModel.items[0].value,n=e.filterModel.items[0].columnField;D(Ot(Ot({},P),{},(0,Fe.Z)({},n,t)))}),[]),ie=r.useCallback((function(e){y(e)}),[]),oe=r.useCallback((function(e){F(e)}),[]),ce=r.useCallback((function(e){pe()}),[]),se=r.useCallback((function(e){de(e)}),[]),ue=r.useCallback((function(e){var t=[];e.map((function(e,n){t.push({posId:e.posId,priority:e.priority})})),te({listOfPrioritiesByPOS:t,tripId:G,optimizationMethod:ae})}),[ee]),de=function(e){var t;(t=e,T("/tms/v1/trip/savePriority",{method:"POST",body:t})).then((function(e){0===e.resultCode?K(e.resultMessage):_(e.resultMessage)})).then((function(e){pe()})).catch((function(e){return _(e)})).finally((function(){return i(!1)}))},me=r.useCallback((function(e){var t={trip_id:G,optimization_method:ae=e};Y(e),function(e){return T("/tms/v1/trip/assignPriority",{method:"POST",body:e})}(t).then((function(t){0==t.resultCode?K((null==t?void 0:t.resultMessage)||ne("msgOptimizeSuccess",{omisedby:e})):V(t.resultMessage)})).catch((function(e){return _(e)})).finally((function(){return i(!1)}))}),[Q]);r.useEffect((function(){i(!0),pe()}),[x,b,E,v,P,R,ae]);var pe=function(){(function(e){return T("/tms/v1/trip/route-optimization-info?tripId=".concat(e))})(G).then((function(e){if(0===e.resultCode){A(e),d(null==e?void 0:e.posTripList.length),Y(e.optimizationMethod),ae=e.optimizationMethod;var t=[];null==e||e.posTripList.map((function(e,n){t.push({posId:e.posId,priority:e.priority})})),te({listOfPrioritiesByPOS:t,tripId:G,optimizationMethod:ae})}else V(e.resultMessage)})).catch((function(e){return _(e)})).finally((function(){return i(!1)}))};return r.createElement(r.Fragment,null,t({routeOptimaization:W,loading:l,totalCount:u,page:E,perPage:v,orderBy:x,order:b,filter:P,onSort:le,setParentPage:ie,selectedValue:Q,onFilterChange:re,setOptionData:me,setPriorityChange:ue,setParentSelectedType:oe,onCancel:ce,onSave:se}))};var kt=n(94339),Pt=n(11688),Dt=n(52809),Bt=n(56475),Lt=(0,j.Z)((function(e){return(0,W.Z)({element:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},dropDown:{display:"flex",flexDirection:"row",justifyContent:"flex-end"},labelHeader:{display:"flex",flexDirection:"row",justifyContent:"space-between",width:"60%",marginTop:"1%",marginBottom:"3%"},label:{width:"98%",height:"50px",borderRadius:"0px",display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center",border:"none",boxShadow:"0px 0px 1px 0px",fontWeight:"bold",fontSize:"18px"},labelIcon:{color:"red"},containerDiv:{marginBottom:"8px"}})}));const Rt=function(){var e=Lt(),t=(0,U.useTranslation)().t,n=(0,o.useParams)().tripId;return r.createElement(Tt,null,(function(a){var l=a.routeOptimaization,i=a.loading,o=a.totalCount,c=(a.setParentSelectedType,a.setOptionData),s=a.setPriorityChange,u=a.selectedValue,d=a.onCancel,m=a.onSave,p=(0,Re.Z)(a,["routeOptimaization","loading","totalCount","setParentSelectedType","setOptionData","setPriorityChange","selectedValue","onCancel","onSave"]);return r.createElement(r.Fragment,null,r.createElement(R.Z,{container:!0,spacing:2,className:e.containerDiv},r.createElement(R.Z,{item:!0,xs:3,sm:3},r.createElement(kt.Z,{className:e.label},r.createElement("label",null,t("tripId"),": ",n))),r.createElement(R.Z,{item:!0,xs:3,sm:3},r.createElement(kt.Z,{className:e.label},r.createElement("label",null,t("optimizeLocation")," "," "," ",u?u.toUpperCase():""),"Manual"===u&&r.createElement(Dt.Z,{className:e.labelIcon}),"Inventory"===u&&r.createElement(Pt.Z,{className:e.labelIcon}),"Location"===u&&r.createElement(xe.Z,{className:e.labelIcon}),"Hybrid"===u&&r.createElement(Bt.Z,{className:e.labelIcon})))),r.createElement(wt,(0,H.Z)({routeOptimaization:l,loading:i,setPriorityChange:s,setOptionData:c,totalCount:o,onCancel:d,onSave:m,selectedValue:u},p)))}))};var Ft=n(7706),Mt=n(22074);function jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(n),!0).forEach((function(t){(0,Fe.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var At={tripStatus:"",deliveryOrders:[],grandTotal:{},itemSummaryList:[],selectedOrder:{},totalCashCollected:{},cashCollected:{},isCollection:!1,orderRecon:!1,rowData:[],collectionSummary:[],missingStockData:{},missingCashData:{}};const qt=function(){var e,t,n,a,l,r,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At,c=arguments.length>1?arguments[1]:void 0;switch(c.type){case"undeliveredOrderData_selected":var s=Wt(Wt({},o),{},{tripStatus:c.payload.tripStatus,deliveryOrders:null===(e=c.payload.depositStockData)||void 0===e?void 0:e.undeliveredOrderData.deliveryOrders,grandTotal:null===(t=c.payload.depositStockData)||void 0===t?void 0:t.undeliveredOrderData.grandTotal,itemSummaryList:null===(n=c.payload.depositStockData)||void 0===n?void 0:n.undeliveredOrderData.itemSummaryList,totalCashCollected:c.payload.totalCashCollected});return s;case"order_info_selected":var u=Wt(Wt({},o),{},{selectedOrder:c.payload,orderRecon:!1});return u;case"Proudctselect":var d=Wt(Wt({},o),{},{rowData:c.payload});return d;case"collection_selected":return Wt(Wt({},o),{},{isCollection:c.payload,orderRecon:!1});case"collection_submited":var m=c.payload,p=Wt(Wt({},o.totalCashCollected),{},{amount:c.payload.amountFilter});return Wt(Wt({},o),{},{totalCashCollected:p,collectionSummary:[].concat((0,x.Z)(o.collectionSummary),[m])});case"inventory_splitted":var v=c.payload[0].productSKU,g=o.selectedOrder.orderRows;return g.map((function(e){e.product.productSKU===v&&(e.inventoryList=c.payload)})),Wt(Wt({},o),{},{selectedOrder:Wt(Wt({},o.selectedOrder),{},{orderRows:g})});case"mark_collection_as_done":var f=c.payload,E=f.missingCash,y=f.totalCash;return Wt(Wt({},o),{},{isCollection:!c.payload.markAsDone,orderRecon:c.payload.markAsDone,missingCashData:Wt(Wt({},o.missingCashData),{},{missingCash:E,totalCash:y})});case"mark_order_as_done":var h=c.payload,Z=h.receivedStockDetails,b=h.missingStockDetails,S=o.selectedOrder;S.orderReconDone=c.payload.markAsDone;var I=o.deliveryOrders.findIndex((function(e){var t=e.orderId,n=e.internalOrderId;return t===S.orderId&&n===S.internalOrderId}));return-1===I?o.deliveryOrders.push(S):o.deliveryOrders[I]=S,Wt(Wt({},o),{},{orderRecon:c.payload.markAsDone,missingStockData:Wt(Wt({},o.missingStockData),{},{missingDeliveryOrder:null!==(a=o.missingStockData)&&void 0!==a&&a.missingDeliveryOrder?[].concat((0,x.Z)(null===(l=o.missingStockData)||void 0===l?void 0:l.missingDeliveryOrder),[b[0]]):b,receivedDeliveryOrder:null!==(r=o.missingStockData)&&void 0!==r&&r.receivedDeliveryOrder?[].concat((0,x.Z)(null===(i=o.missingStockData)||void 0===i?void 0:i.receivedDeliveryOrder),[Z[0]]):Z})});default:return o}};var Ut=(0,j.Z)((function(e){return(0,W.Z)({icon:{marginLeft:e.spacing(2)},stat:{margin:e.spacing(1)},spacingTop:{marginTop:e.spacing(3),display:"flex",justifyContent:"center"},reconWrapper:{marginTop:e.spacing(4),display:"flex",justifyContent:"end"},orderWrapper:{border:"1px solid #c1c1c1",padding:10,marginTop:e.spacing(3)},fieldValue:{textTransform:"capitalize",textAlign:"center",fontSize:25,color:"black",textDecoration:"none"},rowSpacing:{marginBottom:e.spacing(.5)}})}));const zt=function(e){var t=(0,H.Z)({},e).location.state,n=(0,o.useParams)(),a=n.tripId,l=n.agentId,i=t||{},c=i.missingStockData,s=i.missingCashData,u=Ut(),d=(0,U.useTranslation)().t,m=(0,o.useHistory)(),p=z(),v=p.showErrorMessage,g=p.showWarningMessage,f=p.showSuccessMessage,E=r.useState(!1),y=(0,w.Z)(E,2),h=y[0],Z=y[1],b=r.useReducer(qt,t||At),S=(0,w.Z)(b,2),I=S[0],N=S[1],x=r.useState(!1),C=(0,w.Z)(x,2),O=C[0],k=C[1],P=r.useState([]),D=(0,w.Z)(P,2),F=(D[0],D[1]),M=r.useState(!0),j=(0,w.Z)(M,2),W=j[0],A=j[1];r.useEffect((function(){!function(e,n){Z(!0),function(e,t){return T("/tms/v1/trip/deposit-stock/collector?agentId=".concat(t,"&tripId=").concat(e))}(e,n).then((function(e){var n,a;0==e.resultCode?(F(null===(n=e.depositStockData)||void 0===n||null===(a=n.undeliveredOrderData)||void 0===a?void 0:a.deliveryOrders),t||N({type:"undeliveredOrderData_selected",payload:e})):g(e)})).catch((function(e){return v(e.message||e.resultMessage||d("anErrorOccurred"))})).finally((function(){return Z(!1)}))}(a,l)}),[]),r.useEffect((function(){O&&q(),V()}),[O,W]);var q=function(){m.push("/home/trip/trips/tripreconciliation/".concat(a,"/").concat(l,"/order"),I)},_=function(){var e=I.deliveryOrders.map((function(e){return!0===e.orderReconDone}));if(e)return e.every((function(e){return!0===e}))},V=function(){I.deliveryOrders.length>0&&(De().isEmpty(I.totalCashCollected)||0===I.totalCashCollected.amount)?!De().isEmpty(I.missingStockData)&&_()&&A(!1):0!==I.deliveryOrders.length||De().isEmpty(I.totalCashCollected)&&0===I.totalCashCollected.amount?I.deliveryOrders.length>0&&(!De().isEmpty(I.totalCashCollected)||0!==I.totalCashCollected.amount)&&(De().isEmpty(I.missingCashData)||De().isEmpty(I.missingStockData)||!_()||A(!1)):De().isEmpty(I.missingCashData)||A(!1)};return r.createElement(r.Fragment,null,r.createElement("div",{style:{height:"100%",width:"100%"}},r.createElement(R.Z,{container:!0},r.createElement(R.Z,{container:!0},r.createElement(B.Z,{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-evenly",padding:"10px"},r.createElement(Ne,{className:u.stat,label:"TRIP ID",value:a},r.createElement(Mt.Z,{color:"primary",style:{fontSize:60},className:u.icon})),r.createElement(Ne,{className:u.stat,label:"AGENT ID",value:l,labelColor:"#ff5722"},r.createElement(Ue.Z,{style:{color:"#ff5722",fontSize:60},className:u.icon})),r.createElement(Ne,{className:u.stat,label:"STATUS",value:I.tripStatus,labelColor:"#7caf01"},r.createElement(Ft.Z,{style:{color:"#7caf01",fontSize:60},className:u.icon}))))),r.createElement(R.Z,{container:!0,className:u.spacingTop},!h&&I.deliveryOrders&&I.deliveryOrders.map((function(e,t){return r.createElement(R.Z,{item:!0,sm:8,key:t,className:u.orderWrapper},r.createElement(L.Z,{className:u.fieldValue,onClick:function(){return function(e){N({type:"order_info_selected",payload:e}),k(!0)}(e)},disabled:!!e.orderReconDone&&e.orderReconDone},e.orderId))}))),r.createElement(R.Z,{container:!0,className:u.spacingTop},r.createElement(L.Z,{color:"primary",variant:"contained",onClick:function(){N({type:"collection_selected",payload:!0}),k(!0)},disabled:!(!De().isEmpty(I.totalCashCollected)&&0!==I.totalCashCollected.amount)},d("depositCollection"))),r.createElement(R.Z,{container:!0,className:u.reconWrapper},r.createElement(L.Z,{style:{margin:20},color:"primary",variant:"contained",type:"submit",onClick:function(){return function(){if(s&&c){var e;c.length>0&&void 0===c.missingDeliveryOrder[0]&&(c.missingDeliveryOrder=[]),c.length>0&&void 0===c.receivedDeliveryOrder[0]&&(c.receivedDeliveryOrder=[]),(e=De().isEmpty(s)?{tripId:a,agentId:l,missingStockData:c}:De().isEmpty(c)?{tripId:a,agentId:l,missingCashData:s}:{tripId:a,agentId:l,missingStockData:c,missingCashData:s},T("/tms/v1/trip/report/missing-items",{method:"PUT",body:e})).then((function(e){0===e.resultCode?f(e.resultMessage):v(e.resultMessage),m.push("/home/trip/trips")})).catch((function(e){return v(e)})).finally((function(){return Z(!1)}))}}()},disabled:W},d("reconcilation")))))};function _t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_t(Object(n),!0).forEach((function(t){(0,Fe.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kt="",Ht=null;const Jt=function(e){var t=e.children,n=e.searchQuery,a=void 0===n?"":n,l=r.useState([]),i=(0,w.Z)(l,2),o=i[0],c=i[1],s=r.useState(!1),u=(0,w.Z)(s,2),d=u[0],m=u[1],p=r.useState(1),v=(0,w.Z)(p,2),g=v[0],f=v[1],E=r.useState(20),y=(0,w.Z)(E,2),h=y[0],Z=y[1],b=r.useState(0),S=(0,w.Z)(b,2),I=S[0],N=S[1],x=r.useState("desc"),O=(0,w.Z)(x,2),P=O[0],D=O[1],B=r.useState("createdDate"),L=(0,w.Z)(B,2),R=L[0],F=L[1],M=r.useState({}),j=(0,w.Z)(M,2),W=j[0],A=j[1],q=z(),U=q.showErrorMessage,_=q.showWarningMessage,V=r.useCallback((function(e){var t=e.sortModel[0].field,n=e.sortModel[0].sort;F(t),D(n)}),[]),K=r.useCallback((function(e){var t=e.filterModel.items[0].value,n=e.filterModel.items[0].columnField;Ht&&clearTimeout(Ht),Ht=setTimeout((function(){A(Vt(Vt({},W),{},(0,Fe.Z)({},n,t))),f(1)}),1e3)}),[]),H=r.useCallback((function(e){f(e)}),[]),J=r.useCallback((function(e){Z(e)}),[]);return r.useEffect((function(){m(!0);var e,t=$e(W);(e={order:null==P?void 0:P.toLowerCase(),orderBy:R,page:(t||a)===Kt?g:1,perPage:h,filter:a||t},T("".concat(k,"/task?").concat(C.stringify(e)))).then((function(e){var n;0==e.resultCode?(c(e.taskEntityList),N(null==e||null===(n=e.metaData)||void 0===n?void 0:n.totalCount),Kt=""!==a?a:t):(_(e.resultMessage),c([]))})).catch((function(e){return U(e)})).finally((function(){return m(!1)}))}),[R,P,g,h,W,a]),r.createElement(r.Fragment,null,t({tasks:o,loading:d,totalCount:I,page:g,perPage:h,orderBy:R,order:P,filter:W,onSort:V,setParentPage:H,onFilterChange:K,setParentPerPage:J}))};function Qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qt(Object(n),!0).forEach((function(t){(0,Fe.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gt=(0,j.Z)((function(e){return(0,W.Z)({fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginTop:e.spacing(3),marginBottom:e.spacing(3)},root:{display:"inline-flex",flexDirection:"row",alignItems:"center",height:48,paddingLeft:20},btnSpace:{marginRight:e.spacing(2)}})}));function $t(e){var t=Gt(),n=e.item,a=e.applyValue;return r.createElement("div",{className:t.root},r.createElement(Ae.Z,{className:t.root,name:n.field,value:n.value,onChange:function(e){a(Yt(Yt({},n),{},{value:e.target.value}))}}))}const Xt=function(e){var t=e.tasks,n=e.loading,a=e.page,l=e.perPage,i=(e.orderBy,e.order,e.totalCount),c=e.onSort,s=e.setParentPage,u=e.setParentPerPage,d=e.onFilterChange,m=e.onRowSelect,p=((0,Re.Z)(e,["tasks","loading","page","perPage","orderBy","order","totalCount","onSort","setParentPage","setParentPerPage","onFilterChange","onRowSelect"]),z().showWarningMessage),v=(0,U.useTranslation)().t,g=(0,Te.useSelector)((function(e){return e.auth})).user,f=a>=1?a-1:1,E=r.useMemo((function(){return t.map((function(e){var t=e.id,n=e.agentId,a=e.destinationId,l=e.taskType,r=e.createdDate,i=e.status,o=e.pickUpLogisticLocation,c=e.dropLogisticLocation,s=e.orderDate,u=e.volume,d=e.capacity,m=e.data&&JSON.parse(e.data);return{id:t,orderId:(null==m?void 0:m.orderId)||"",agentId:n,destinationId:a,taskType:l,createdDate:r,status:i,pickUpLogisticLocation:o,dropLogisticLocation:c,orderDate:s,volume:u,capacity:d}}))}),[t]),y=r.useState([]),h=(0,w.Z)(y,2),Z=h[0],b=h[1],S=[{label:"Equal",value:"equal",getApplyFilterFn:function(e){return e.columnField&&e.value&&e.operatorValue?function(t){return t.value==e.value}:null},InputComponent:$t}],I=[{field:"orderId",headerName:v("orderId"),sortable:!1,width:330,filterOperators:S},{field:"agentId",headerName:v("agentId"),sortable:!0,width:150,filterOperators:S},{field:"pickUpLogisticLocation",headerName:v("pickUpLocation"),sortable:!1,width:220,filterOperators:S},{field:"dropLogisticLocation",headerName:v("dropLocation"),sortable:!1,width:200,filterOperators:S},{field:"orderDate",headerName:v("orderDate"),sortable:!1,width:130,filterable:!1},{field:"volume",headerName:v("volume"),sortable:!1,width:100,filterable:!1},{field:"capacity",headerName:v("capacity"),sortable:!1,width:120,filterOperators:S},{field:"destinationId",headerName:v("destinationId"),sortable:!0,width:130,filterable:!1},{field:"taskType",headerName:v("taskType"),sortable:!0,width:130,filterOperators:S},{field:"createdDate",headerName:v("createdDate"),sortable:!0,width:110,filterable:!1},{field:"status",headerName:v("status"),sortable:!0,width:100,filterable:!0,filterOperators:S},{field:"actions",headerName:v("actions"),sortable:!1,filterable:!1,renderCell:function(e){return r.createElement("div",null,r.createElement(We.Z,{size:"small",color:"primary",variant:"text","aria-label":"tasks action buttons"},r.createElement(Ze.ZP,{title:v("view")},r.createElement(L.Z,{color:"primary",component:o.Link,to:"/home/trip/tasks/view/"+e.getValue("id")},r.createElement(qe.Z,{fontSize:"small"})))))},width:100}];return r.createElement(je(),{loading:n,onPageChange:function(e){s(e.page+1),m([],!1)},onPageSizeChange:function(e){s(1),u(e.pageSize),m([],!1)},pagination:!0,paginationMode:"server",filterMode:"server",sortingMode:"server",onFilterModelChange:d,onSortModelChange:c,page:f,pageSize:l,rowCount:i,columnBuffer:2,rows:E,getRowId:function(e){return e.id},columns:I,checkboxSelection:!0,selectionModel:Z,onSelectionModelChange:function(e){!function(e){var n=(0,x.Z)(e.selectionModel),a=[],l=!0;n.forEach((function(e){a.push(t.find((function(t){return t.id.toString()===e})))}));for(var r=[],i=function(){var e=c[o];if(e&&null!=e&&e.deliveryAgentOf&&(null==e?void 0:e.deliveryAgentOf)==="/".concat(g.resellerPath,"/")&&e.status&&"OPEN"===e.status.trim())if(e.pickUpLogisticLocation)r.push(e);else{p(v("selectCorrectTask"));var t=n.findIndex((function(t){return t===e.id.toString()}));n.splice(t,1)}},o=0,c=a;o<c.length;o++)i();r.forEach((function(e,t){if(0!==t&&e.pickUpLogisticLocation&&e.pickUpLogisticLocation!==r[0].pickUpLogisticLocation){p(v("selectCorrectTask")),l=!1,r.splice(t,1);var a=n.findIndex((function(t){return t===e.id.toString()}));n.splice(a,1)}n.length!==r.length&&(l=!1)})),b(n),m(r,l)}(e)}})};var en=n(73430);const tn=function(e){var t=e.disable,n=void 0!==t&&t,a=e.onClick,i=l()().checkPermission,o=(0,U.useTranslation)().t;return i(N)&&r.createElement(A.SeamlessButton,{variant:"contained",color:"primary",disabled:n,endIcon:r.createElement(en.Z,null),onClick:a},o("Merge"))};var nn=n(8526),an=n(4614),ln=n(77114),rn=(0,j.Z)((function(e){return(0,W.Z)({form:{display:"flex",flexDirection:"column",flexWrap:"wrap"},element:{margin:e.spacing(1)},input:{},button:{},label:{margin:e.spacing(1)},root:{width:"100%",margin:e.spacing(1)},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary,fontWeight:"bold"},progress:{marginLeft:"8px"}})}));const on=function(e){var t=e.data,n=e.loading,a=e.onFormSubmit,l=(e.tasks,rn()),i=(0,U.useTranslation)().t,c=(0,o.useHistory)(),s=r.useState(""),u=(0,w.Z)(s,2),d=u[0],m=u[1],p=nn.Ry().shape({taskData:nn.Ry({pickUpLogisticLocation:nn.Z_(),dropLogisticLocation:nn.Z_(),volume:nn.Rx(),capacity:nn.Rx()})}),v=(0,ln.TA)({initialValues:t,validationSchema:p,onSubmit:function(e){return a&&a(e)},enableReinitialize:!0}),g=v.values,f=v.handleChange,E=v.handleSubmit,y=v.handleReset;return r.createElement("div",{className:l.root},r.createElement(X.Z,{expanded:"panel1"===d,onChange:("panel1",function(e,t){m(!!t&&"panel1")})},r.createElement(ee.Z,{expandIcon:r.createElement(ne.Z,null),"aria-controls":"panel1bh-content",id:"panel1bh-header"},r.createElement(M.Z,{className:l.heading},r.createElement("strong",null,i("advancedSearch")))),r.createElement(te.Z,null,r.createElement(B.Z,{display:"flex",className:l.root,flexDirection:"column"},r.createElement(B.Z,{display:"flex",flexDirection:"row",alignItems:"center"},r.createElement(A.SeamlessInput,{fullWidth:!0,className:(0,_.default)(l.element,l.input),name:"pickUpLogisticLocation",value:g.pickUpLogisticLocation,onChange:f,label:i("pickUpLocation")}),r.createElement(A.SeamlessInput,{fullWidth:!0,className:(0,_.default)(l.element,l.input),name:"dropLogisticLocation",value:g.dropLogisticLocation,onChange:f,label:i("dropLocation")})),r.createElement(B.Z,{display:"flex",flexDirection:"row",alignItems:"center"},r.createElement(A.SeamlessInput,{className:(0,_.default)(l.element,l.input),name:"capacity",type:"number",value:g.capacity||"",onChange:f,label:i("capacity")}),r.createElement(A.SeamlessInput,{className:(0,_.default)(l.element,l.input),name:"status",type:"text",value:g.status,onChange:f,label:i("status")})),r.createElement(B.Z,null,r.createElement(A.SeamlessButton,{onClick:function(){y(g),c.push("/home/trip/tasks")},className:(0,_.default)(l.element,l.button),color:"secondary",variant:"outlined"},i("resetSearch","Reset Search")),r.createElement(A.SeamlessButton,{onClick:function(e){return E()},className:(0,_.default)(l.element,l.button),disabled:n,color:"primary",variant:"contained"},i("search","Search"),n&&r.createElement(an.Z,{color:"inherit",size:14,thickness:6,className:l.progress})))))))};var cn={pickUpLogisticLocation:"",dropLogisticLocation:"",status:"",capacity:null};const sn=function(e){var t=(0,U.useTranslation)().t,n=(0,o.useHistory)(),a=r.useState(""),l=(0,w.Z)(a,2),i=l[0],c=l[1],s=r.useState(!0),u=(0,w.Z)(s,2),d=u[0],m=u[1],p=r.useState([]),v=(0,w.Z)(p,2),g=v[0],f=v[1],E=function(e){if(e){var t="";for(var n in e)e[n]&&(t+="status"===n?"".concat(n,"#").concat(e[n].replace(" ","").split(",").join("_"),","):"".concat(n,":").concat(e[n],","));c(t)}},y=function(e,t){m(!(e.length>1&&t)),f(e)},h=function(){n.replace({pathname:"/home/trip/tasks/merged-tasks",state:{data:g}})};return r.createElement(Jt,{searchQuery:i},(function(n){var a=n.tasks,l=n.loading,i=n.totalCount,o=(0,Re.Z)(n,["tasks","loading","totalCount"]);return r.createElement(r.Fragment,null,r.createElement(B.Z,{display:"flex",flexDirection:"row",justifyContent:"flex-end"},r.createElement(Ze.ZP,{title:"".concat(t("mergeBtnInfo"))},r.createElement("div",null,r.createElement(tn,{disable:d,onClick:h})))),r.createElement(on,{loading:l,data:cn,tasks:a,onFormSubmit:E}),r.createElement(Xt,(0,H.Z)({},e,{tasks:a,loading:l,totalCount:i,onRowSelect:y},o)))}))},un=function(e){var t=e.children,n=r.useState([]),a=(0,w.Z)(n,2),l=a[0],i=a[1],o=r.useState(!1),c=(0,w.Z)(o,2),s=c[0],u=c[1],d=z(),m=d.showErrorMessage,p=d.showWarningMessage;return r.useEffect((function(){u(!0),T("/aas/v1/delivery/agentBySystemToken").then((function(e){0==e.resultCode?i(e.agentsList):p(e)})).catch((function(e){return m(e)})).finally((function(){return u(!1)}))}),[]),r.createElement(r.Fragment,null,t({agents:l,loading:s}))};var dn=n(42375),mn=(0,j.Z)((function(e){return(0,W.Z)({dialogWrapper:{textAlign:"center","& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginBottom:e.spacing(3)},btnSpace:{marginRight:e.spacing(2)}})}));const pn=function(e){var t=e.agents,n=e.loading,a=((0,Re.Z)(e,["agents","loading"]),(0,U.useTranslation)().t),l=z(),i=(l.showErrorMessage,l.showSuccessMessage,l.showWarningMessage,(0,o.useHistory)(),mn(),r.useState(!1)),c=(0,w.Z)(i,2),s=(c[0],c[1],r.useState(0)),u=(0,w.Z)(s,2),d=(u[0],u[1],[{field:"agentId",headerName:a("agentId"),sortable:!0,flex:1},{field:"agentName",headerName:a("agentName"),sortable:!0,flex:1},{field:"maxCount",headerName:a("maxCount"),sortable:!0,flex:1},{field:"reserveCount",headerName:a("reserveCount"),sortable:!0,flex:1},{field:"weightCapacity",headerName:a("weightCapacity"),sortable:!0,flex:1},{field:"volumeCapacity",headerName:a("volumeCapacity"),sortable:!0,flex:1},{field:"actions",headerName:a("actions"),sortable:!1,renderCell:function(e){return r.createElement(We.Z,{size:"small",color:"primary",variant:"text","aria-label":"agents action buttons"},r.createElement(Ze.ZP,{title:a("view")},r.createElement(L.Z,{color:"primary",component:o.Link,to:"/home/trip/agents/view/"+e.getValue("agentId")},r.createElement(qe.Z,{fontSize:"small"}))),r.createElement(Ze.ZP,{title:a("edit")},r.createElement(L.Z,{color:"primary",component:o.Link,to:"/home/trip/agents/edit/"+e.getValue("agentId")},r.createElement(dn.Z,{fontSize:"small"}))))},flex:1}]);return r.createElement(je(),{loading:n,columnBuffer:2,rows:t,getRowId:function(e){return e.agentId},columns:d,checkboxSelection:!0})},vn=function(e){var t=e.searchAgents;return t.length>0?r.createElement(pn,(0,H.Z)({},e,{agents:t,loading:!1})):r.createElement(un,null,(function(t){var n=t.agents,a=t.loading;return r.createElement(pn,(0,H.Z)({},e,{agents:n,loading:a}))}))};var gn=(0,j.Z)((function(e){return(0,W.Z)({spacingTop:{marginTop:e.spacing(3)},form:{display:"flex",flexDirection:"column",flexWrap:"wrap"},element:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},input:{},description:{width:419},button:{},btnSpacing:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},sectionSeparator:{marginTop:e.spacing(3),marginBottom:e.spacing(2),marginLeft:e.spacing(1)},wrapper:{padding:e.spacing(2)},titleSpacing:{marginBottom:e.spacing(1)},subTitleSpacing:{marginBottom:e.spacing(1)},dividerSpacing:{marginBottom:e.spacing(3)},fullWidth:{width:"100%"},minListViewHeight:{minHeight:600},fieldLabel:{marginTop:e.spacing(1.5)}})}));const fn=function(e){var t=e.data,n=e.onFormSubmit,a=e.edit,l=gn(),i=nn.Ry().shape({agentName:nn.Z_().required(),description:nn.Z_().nullable(),maxCount:nn.Rx().required(),volumeCapacity:nn.Rx().required(),volumeCapacityUnit:nn.Z_(),weightCapacity:nn.Rx().required(),weightCapacityUnit:nn.Z_()}),o=(0,ln.TA)({initialValues:t,validationSchema:i,onSubmit:function(e){return n&&n(e,(function(t){t||d(e)}))},enableReinitialize:!0}),c=o.values,s=o.handleChange,u=o.handleSubmit,d=o.handleReset,m=o.validateForm,p=o.errors,v=z().showWarningMessage,g=(0,U.useTranslation)().t;return r.createElement(R.Z,{container:!0,className:l.spacingTop},r.createElement(R.Z,{container:!0,spacing:3},r.createElement(R.Z,{item:!0,xs:12},r.createElement(M.Z,{variant:"subtitle1",color:"primary"},g("agentInformation")))),r.createElement(R.Z,{container:!0,spacing:3},r.createElement(R.Z,{item:!0,xs:12,sm:4},r.createElement(A.SeamlessInput,{required:!0,error:!!p.agentName,className:(0,_.default)(l.element,l.input),name:"agentName",value:c.agentName,onChange:s,label:g("agentName"),fullWidth:!0})),r.createElement(R.Z,{item:!0,xs:12,sm:4},r.createElement(A.SeamlessInput,{required:!0,error:!!p.maxCount,className:(0,_.default)(l.element,l.input),name:"maxCount",type:"number",value:c.maxCount,onChange:s,label:g("maxCount"),fullWidth:!0}))),r.createElement(R.Z,{container:!0,spacing:3},r.createElement(R.Z,{item:!0,xs:12,sm:8},r.createElement(A.SeamlessInput,{error:!!p.description,className:(0,_.default)(l.element,l.input),name:"description",value:c.description,onChange:s,label:g("description"),multiline:!0,rows:4,rowsMax:4,fullWidth:!0}))),r.createElement(R.Z,{container:!0,spacing:3},r.createElement(R.Z,{item:!0,xs:12,className:l.spacingTop},r.createElement(M.Z,{variant:"subtitle1",color:"primary"},g("volumnCapacityInformation")))),r.createElement(R.Z,{container:!0,spacing:3},r.createElement(R.Z,{item:!0,xs:12,sm:4},r.createElement(A.SeamlessInput,{required:!0,error:!!p.volumeCapacity,className:(0,_.default)(l.element,l.input),name:"volumeCapacity",value:c.volumeCapacity,onChange:s,type:"number",label:g("volumeCapacity"),fullWidth:!0})),r.createElement(R.Z,{item:!0,xs:12,sm:4},r.createElement(M.Z,{variant:"body2",className:l.fieldLabel},g("volumeCapacityUnit")),r.createElement(M.Z,{variant:"body1",className:l.fieldLabel},c.volumeCapacityUnit))),r.createElement(R.Z,{container:!0,spacing:3},r.createElement(R.Z,{item:!0,xs:12,className:l.spacingTop},r.createElement(M.Z,{variant:"subtitle1",color:"primary"},g("weightCapacityInformation")))),r.createElement(R.Z,{container:!0,spacing:3},r.createElement(R.Z,{item:!0,xs:12,sm:4},r.createElement(A.SeamlessInput,{required:!0,error:!!p.weightCapacity,className:(0,_.default)(l.element,l.input),name:"weightCapacity",type:"number",value:c.weightCapacity,onChange:s,label:g("weightCapacity"),fullWidth:!0})),r.createElement(R.Z,{item:!0,xs:12,sm:4},r.createElement(M.Z,{variant:"body2",className:l.fieldLabel},g("weightCapacityUnit")),r.createElement(M.Z,{variant:"body1",className:l.fieldLabel},c.weightCapacityUnit))),r.createElement(R.Z,{container:!0,spacing:3},r.createElement(R.Z,{item:!0,xs:12,className:l.spacingTop},r.createElement(M.Z,{variant:"subtitle1",color:"primary"},g("reserveCapacityInformation")))),r.createElement(R.Z,{container:!0,spacing:3,className:l.dividerSpacing},r.createElement(R.Z,{item:!0,xs:12,sm:4},r.createElement(M.Z,{variant:"body2",className:l.fieldLabel},g("reserveVolumeCapacity")),r.createElement(M.Z,{variant:"body1",className:l.fieldLabel},null==c.reserveVolumeCapacity?0:c.reserveVolumeCapacity)),r.createElement(R.Z,{item:!0,xs:12,sm:4},r.createElement(M.Z,{variant:"body2",className:l.fieldLabel},g("reserveWeightCapacity")),r.createElement(M.Z,{variant:"body1",className:l.fieldLabel},null==c.reserveWeightCapacity?0:c.reserveWeightCapacity)),r.createElement(R.Z,{item:!0,xs:12,sm:4},r.createElement(M.Z,{variant:"body2",className:l.fieldLabel},g("reserveCount")),r.createElement(M.Z,{variant:"body1",className:l.fieldLabel},null==c.reserveCount?0:c.reserveCount))),r.createElement(R.Z,{container:!0,spacing:3},r.createElement(R.Z,{item:!0,xs:12,sm:8},r.createElement(A.SeamlessButton,{onClick:function(){m().then((function(e){var t=Object.values(e);t.length>0?v(t[0]):u()}))},className:(0,_.default)(l.element,l.button),color:"primary",variant:"contained"},g(a?"updateButton":"submitButton")),r.createElement(A.SeamlessButton,{onClick:d,className:(0,_.default)(l.element,l.btnSpacing,l.button),color:"primary",variant:"outlined"},g("resetButton")))))};var En=(0,j.Z)((function(e){return(0,W.Z)({spacingTop:{marginTop:e.spacing(3)},spacingBottom:{marginBottom:e.spacing(1)},wrapper:{padding:e.spacing(2)},titleSpacing:{marginBottom:e.spacing(1)},subTitleSpacing:{marginBottom:e.spacing(1)},dividerSpacing:{marginBottom:e.spacing(3)},fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{textTransform:"capitalize",fontSize:14},rowSpacing:{marginBottom:e.spacing(.5)},stats:{margin:e.spacing(1)},fullWidth:{width:"100%"},innerTitle:{color:e.palette.secondary.light},displayBlock:{display:"block"}})}));const yn=function(e){var t=e.agentData,n=e.loading,a=void 0!==n&&n,l=En(),i=(0,U.useTranslation)().t;return r.createElement(R.Z,{container:!0},t&&r.createElement(R.Z,{container:!0},r.createElement(R.Z,{container:!0,spacing:3,className:l.spacingBottom},r.createElement(R.Z,{item:!0,xs:12},r.createElement(M.Z,{variant:"subtitle1",color:"primary"},i("agentInformation")))),r.createElement(R.Z,{container:!0,spacing:3,className:l.rowSpacing},r.createElement(R.Z,{item:!0,xs:12,sm:4},r.createElement(M.Z,{className:l.fieldHeading},i("agentName"))),r.createElement(R.Z,{item:!0,xs:12,sm:4},r.createElement(M.Z,{className:l.fieldValue},t.agentName))),r.createElement(R.Z,{container:!0,spacing:3,className:l.rowSpacing},r.createElement(R.Z,{item:!0,xs:12,sm:4},r.createElement(M.Z,{className:l.fieldHeading},i("maxCount"))),r.createElement(R.Z,{item:!0,xs:12,sm:4},r.createElement(M.Z,{className:l.fieldValue},t.maxCount))),r.createElement(R.Z,{container:!0,spacing:3,className:l.rowSpacing},r.createElement(R.Z,{item:!0,xs:12,sm:4},r.createElement(M.Z,{className:l.fieldHeading},i("description"))),r.createElement(R.Z,{item:!0,xs:12,sm:4},r.createElement(M.Z,{className:l.fieldValue},t.description))),r.createElement(R.Z,{container:!0,spacing:3,className:l.spacingBottom},r.createElement(R.Z,{item:!0,xs:12},r.createElement(M.Z,{variant:"subtitle1",color:"primary"},i("volumnCapacityInformation")))),r.createElement(R.Z,{container:!0,spacing:3,className:l.rowSpacing},r.createElement(R.Z,{item:!0,xs:12,sm:4},r.createElement(M.Z,{className:l.fieldHeading},i("volumeCapacity"))),r.createElement(R.Z,{item:!0,xs:12,sm:4},r.createElement(M.Z,{className:l.fieldValue},t.volumeCapacity))),r.createElement(R.Z,{container:!0,spacing:3,className:l.rowSpacing},r.createElement(R.Z,{item:!0,xs:12,sm:4},r.createElement(M.Z,{className:l.fieldHeading},i("volumeCapacityUnit"))),r.createElement(R.Z,{item:!0,xs:12,sm:4},r.createElement(M.Z,{className:l.fieldValue},t.volumeCapacityUnit))),r.createElement(R.Z,{container:!0,spacing:3,className:l.spacingBottom},r.createElement(R.Z,{item:!0,xs:12},r.createElement(M.Z,{variant:"subtitle1",color:"primary"},i("weightCapacityInformation")))),r.createElement(R.Z,{container:!0,spacing:3,className:l.rowSpacing},r.createElement(R.Z,{item:!0,xs:12,sm:4},r.createElement(M.Z,{className:l.fieldHeading},i("weightCapacity"))),r.createElement(R.Z,{item:!0,xs:12,sm:4},r.createElement(M.Z,{className:l.fieldValue},t.weightCapacity))),r.createElement(R.Z,{container:!0,spacing:3,className:l.rowSpacing},r.createElement(R.Z,{item:!0,xs:12,sm:4},r.createElement(M.Z,{className:l.fieldHeading},i("weightCapacityUnit"))),r.createElement(R.Z,{item:!0,xs:12,sm:4},r.createElement(M.Z,{className:l.fieldValue},t.weightCapacityUnit))),r.createElement(R.Z,{container:!0,spacing:3,className:l.spacingBottom},r.createElement(R.Z,{item:!0,xs:12},r.createElement(M.Z,{variant:"subtitle1",color:"primary"},i("reserveCapacityInformation")))),r.createElement(R.Z,{container:!0,spacing:3,className:l.rowSpacing},r.createElement(R.Z,{item:!0,xs:12,sm:4},r.createElement(M.Z,{className:l.fieldHeading},i("reserveVolumeCapacity"))),r.createElement(R.Z,{item:!0,xs:12,sm:4},r.createElement(M.Z,{className:l.fieldValue},null==t.reserveVolumeCapacity?0:t.reserveVolumeCapacity))),r.createElement(R.Z,{container:!0,spacing:3,className:l.rowSpacing},r.createElement(R.Z,{item:!0,xs:12,sm:4},r.createElement(M.Z,{className:l.fieldHeading},i("reserveWeightCapacity"))),r.createElement(R.Z,{item:!0,xs:12,sm:4},r.createElement(M.Z,{className:l.fieldValue},null==t.reserveWeightCapacity?0:t.reserveWeightCapacity))),r.createElement(R.Z,{container:!0,spacing:3,className:l.rowSpacing},r.createElement(R.Z,{item:!0,xs:12,sm:4},r.createElement(M.Z,{className:l.fieldHeading},i("reserveCount"))),r.createElement(R.Z,{item:!0,xs:12,sm:4},r.createElement(M.Z,{className:l.fieldValue},null==t.reserveCount?0:t.reserveCount)))),a&&r.createElement(F.Z,null))};var hn=n(24276),Zn=(0,j.Z)((function(e){return(0,W.Z)({dialogWrapper:{textAlign:"center","& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginBottom:e.spacing(3)},btnSpace:{marginRight:e.spacing(2)}})}));const bn=function(e){var t=e.trips,n=e.loading,a=((0,Re.Z)(e,["trips","loading"]),(0,U.useTranslation)().t),l=Zn(),i=z(),c=i.showErrorMessage,s=i.showSuccessMessage,u=(0,o.useHistory)(),d=r.useState(!1),m=(0,w.Z)(d,2),p=m[0],v=m[1],g=r.useState(!1),f=(0,w.Z)(g,2),E=f[0],y=f[1],h=r.useState(0),Z=(0,w.Z)(h,2),b=Z[0],S=Z[1],I=r.useState([]),N=(0,w.Z)(I,2),x=N[0],C=N[1],O=r.useState([]),k=(0,w.Z)(O,2),P=k[0],D=k[1],B=r.useState("MANUAL_TASK_APPROVED"),R=(0,w.Z)(B,2),F=R[0],j=(R[1],r.useState("MANUAL_TASK_REJECTED")),W=(0,w.Z)(j,2),q=W[0],_=(W[1],r.useState("")),V=(0,w.Z)(_,2),K=V[0],H=V[1],J=r.useState(""),Q=(0,w.Z)(J,2),Y=Q[0],G=Q[1];r.useEffect((function(){se(q).then((function(e){C(e.tripIncompleteReason)})).catch((function(e){return c("error loading reject reasons")})),se(F).then((function(e){D(e.tripIncompleteReason)})).catch((function(e){return c("error loading approve reasons")}))}),[]);var $=function(e){var n=t.find((function(e){return e.tripId===b}));(n&&e===a("tripApproved")||n&&e===a("tripRejected"))&&(n.actionStatus=e,n.reasonId=K),n.comments=Y,function(e){return T("".concat(ce,"/approve-reject-entire-trip"),{method:"PUT",body:e})}(n).then((function(e){s(e),v(!1),u.push("/home/trip/manualtrips/")})).catch((function(e){return c(e)}))},X=P.map((function(e){return{key:e.reasonText,value:e.reasonId}}));X.unshift({key:"Choose",value:null});var ee=x.map((function(e){return{key:e.reasonText,value:e.reasonId}}));ee.unshift({key:"Choose",value:null});var te=function(e){e.target.value.length>=400||G(e.target.value)},ne=function(){v(!1)},ae=[{field:"tripId",headerName:a("tripId"),sortable:!0,width:280},{field:"agentId",headerName:a("agentId"),sortable:!0,flex:1},{field:"triggerDate",headerName:a("triggerDate"),sortable:!0,flex:1},{field:"taskCount",headerName:a("totalTask"),sortable:!0,flex:1},{field:"actionStatus",headerName:a("status"),sortable:!0,flex:1},{field:"actions",headerName:a("actions"),sortable:!1,renderCell:function(e){var t=e.getValue("actionStatus");return r.createElement("div",null,r.createElement(We.Z,{size:"small",color:"primary",variant:"text","aria-label":"trip action buttons"},r.createElement(Ze.ZP,{title:a("view")},r.createElement(L.Z,{color:"primary",component:o.Link,to:"/home/trip/manualtrips/"+e.getValue("tripId")+"/task/"},r.createElement(qe.Z,{fontSize:"small"}))),r.createElement(Ze.ZP,{title:a("approve")},r.createElement(L.Z,{onClick:function(){G(""),v(!0),S(e.getValue("tripId"))},disabled:"PENDING"!=t},r.createElement(hn.Z,{fontSize:"small"},"thumb_up"))),r.createElement(Ze.ZP,{title:a("reject")},r.createElement(L.Z,{onClick:function(){G(""),y(!0),S(e.getValue("tripId"))},disabled:"PENDING"!=t},r.createElement(hn.Z,{fontSize:"small"},"thumb_down")))))},flex:1}];return r.createElement(r.Fragment,null,r.createElement(A.SeamlessDialog,{open:p,onClose:ne,className:l.dialogWrapper,maxWidth:"md",fullWidth:!0},r.createElement(r.Fragment,null,r.createElement("div",{className:l.modalContentSpacing},r.createElement(M.Z,{gutterBottom:!0,id:"transition-modal-title",variant:"h6",className:l.fontHeavy},a("approveTripConfirmationTitle")),r.createElement(M.Z,{id:"transition-modal-description",variant:"body1"},a("approveTripConfirmationText")," ",b),r.createElement(A.SeamlessDropDown,{style:{marginTop:15,marginBottom:15},fullWidth:!0,options:X,name:"approveReason",onChange:function(e){var t;H(null==e||null===(t=e.target)||void 0===t?void 0:t.value)}}),r.createElement(A.SeamlessInput,{fullWidth:!0,name:"rejectReason",value:Y,style:{marginTop:20},placeholder:"You can add comments",onChange:te})),r.createElement(A.SeamlessButton,{type:"button",variant:"outlined",color:"primary",className:l.btnSpace,onClick:ne},a("noConfirmationButton")),r.createElement(A.SeamlessButton,{type:"button",variant:"contained",color:"primary",onClick:function(){return $(a("tripApproved"))}},a("yesConfirmationButton")))),r.createElement(A.SeamlessDialog,{open:E,onClose:ne,className:l.dialogWrapper,maxWidth:"md",fullWidth:!0},r.createElement(r.Fragment,null,r.createElement("div",{className:l.modalContentSpacing},r.createElement(M.Z,{gutterBottom:!0,id:"transition-modal-title",variant:"h6",className:l.fontHeavy},a("rejectTripConfirmationTitle")),r.createElement(M.Z,{id:"transition-modal-description",variant:"body1"},a("rejectTripConfirmationText")," ",b),r.createElement(A.SeamlessDropDown,{style:{marginTop:15,marginBottom:15},fullWidth:!0,options:ee,name:"approveReason",onChange:function(e){var t=e.target.value;G(""),H(t)}}),r.createElement(A.SeamlessInput,{fullWidth:!0,name:"rejectReason",value:Y,style:{marginTop:20},placeholder:"Specify other reasons",onChange:te})),r.createElement(A.SeamlessButton,{type:"button",variant:"outlined",color:"primary",className:l.btnSpace,onClick:function(){return y(!1)}},a("noConfirmationButton")),r.createElement(A.SeamlessButton,{type:"button",variant:"contained",color:"primary",onClick:function(){return $(a("tripRejected"))}},a("yesConfirmationButton")))),r.createElement(je(),{loading:n,columnBuffer:2,rows:t,getRowId:function(e){return e.tripId},columns:ae,checkboxSelection:!0}))},Sn=function(e){var t=e.children,n=r.useState([]),a=(0,w.Z)(n,2),l=a[0],i=a[1],o=r.useState(!1),c=(0,w.Z)(o,2),s=c[0],u=c[1],d=z().showErrorMessage;return r.useEffect((function(){u(!0),T("".concat(ce,"/schedule-trip-list/")).then((function(e){return i(e.manualTripDataResponses)})).catch((function(e){return d(e)})).finally((function(){return u(!1)}))}),[]),r.createElement(r.Fragment,null,t({trips:l,loading:s}))},In=function(e){return r.createElement(Sn,null,(function(t){var n=t.trips,a=t.loading;return r.createElement(bn,(0,H.Z)({},e,{trips:n,loading:a}))}))},Nn=function(e){var t=e.children,n=e.tripId,a=r.useState([]),l=(0,w.Z)(a,2),i=l[0],o=l[1],c=r.useState(""),s=(0,w.Z)(c,2),u=(s[0],s[1]),d=r.useState(!1),m=(0,w.Z)(d,2),p=m[0],v=m[1],g=z().showErrorMessage;return r.useEffect((function(){v(!0),function(e){return T("".concat(ce,"/manual-task/").concat(e))}(n).then((function(e){var t;o(e.unplannedTaskDataResponses||[]),u((null===(t=e.unplannedTaskDataResponses[0])||void 0===t?void 0:t.agentId)||"")})).catch((function(e){return g(e)})).finally((function(){return v(!1)}))}),[]),r.createElement(r.Fragment,null,t({trips:i,loading:p}))};var xn=(0,j.Z)((function(e){return(0,W.Z)({dialogWrapper:{textAlign:"center","& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginBottom:e.spacing(3)},btnSpace:{marginRight:e.spacing(2)}})}));const wn=function(e){var t=e.trips,n=e.loading,a=e.tripId,l=((0,Re.Z)(e,["trips","loading","tripId"]),(0,U.useTranslation)().t),i=xn(),c=z(),s=c.showErrorMessage,u=c.showSuccessMessage,d=(0,o.useHistory)(),m=r.useState(!1),p=(0,w.Z)(m,2),v=p[0],g=p[1],f=r.useState(!1),E=(0,w.Z)(f,2),y=E[0],h=E[1],Z=r.useState(0),b=(0,w.Z)(Z,2),S=b[0],I=b[1],N=r.useState([]),x=(0,w.Z)(N,2),C=x[0],O=x[1],k=r.useState("MANUAL_TASK_APPROVED"),P=(0,w.Z)(k,2),D=P[0],B=(P[1],r.useState([])),R=(0,w.Z)(B,2),F=R[0],j=R[1],W=r.useState("MANUAL_TASK_REJECTED"),q=(0,w.Z)(W,2),_=q[0],V=(q[1],r.useState("")),K=(0,w.Z)(V,2),H=K[0],J=K[1],Q=r.useState(""),Y=(0,w.Z)(Q,2),G=Y[0],$=Y[1];r.useEffect((function(){se(D).then((function(e){O(e.tripIncompleteReason)})).catch((function(e){return s("error loading approve reasons")})),se(_).then((function(e){j(e.tripIncompleteReason)})).catch((function(e){return s("error loading reject reasons")}))}),[]);var X=function(e){var n={},a=t.find((function(e){return e.taskId===S}));Object.assign(n,a),(n&&e===l("tripApproved")||n&&e===l("tripRejected"))&&(n.actionStatus=e,n.reasonId=H),n.comments=G,function(e){return T("".concat(ce,"/approveUnplannedTask"),{method:"PUT",body:e})}(n).then((function(e){u(e),g(!1),d.push("/home/trip/manualtrips/")})).catch((function(e){return s(e)}))},ee=C.map((function(e){return{key:e.reasonText,value:e.reasonId}}));ee.unshift({key:"Choose",value:null});var te=F.map((function(e){return{key:e.reasonText,value:e.reasonId}}));te.unshift({key:"Choose",value:null});var ne=function(e){e.target.value.length>=400||$(e.target.value)},ae=function(){g(!1)},le=[{field:"taskId",headerName:l("taskId"),sortable:!0,width:100},{field:"agentId",headerName:l("agentId"),sortable:!0,flex:1},{field:"taskType",headerName:l("taskType"),sortable:!0,flex:1},{field:"posId",headerName:l("posId"),sortable:!0,flex:1},{field:"actionStatus",headerName:l("approvalStatus"),sortable:!0,flex:1},{field:"actions",headerName:l("actions"),sortable:!1,renderCell:function(e){var t=e.getValue("actionStatus");return r.createElement("div",null,r.createElement(We.Z,{size:"small",color:"primary",variant:"text","aria-label":"trip action buttons"},r.createElement(Ze.ZP,{title:l("view")},r.createElement(L.Z,{color:"primary",component:o.Link,to:"/home/trip/manualtrips/".concat(a,"/task/")+e.getValue("taskId")},r.createElement(qe.Z,{fontSize:"small"}))),r.createElement(Ze.ZP,{title:l("approve")},r.createElement(L.Z,{onClick:function(){$(""),g(!0),I(e.getValue("taskId"))},disabled:"PENDING"!=t},r.createElement(hn.Z,{fontSize:"small"},"thumb_up"))),r.createElement(Ze.ZP,{title:l("reject")},r.createElement(L.Z,{onClick:function(){$(""),h(!0),I(e.getValue("taskId"))},disabled:"PENDING"!=t},r.createElement(hn.Z,{fontSize:"small"},"thumb_down")))))},flex:1}];return r.createElement(r.Fragment,null,r.createElement(A.SeamlessDialog,{open:v,onClose:ae,className:i.dialogWrapper,maxWidth:"md",fullWidth:!0},r.createElement(r.Fragment,null,r.createElement("div",{className:i.modalContentSpacing},r.createElement(M.Z,{gutterBottom:!0,id:"transition-modal-title",variant:"h6",className:i.fontHeavy},l("approveTripTaskConfirmationTitle")),r.createElement(M.Z,{id:"transition-modal-description",variant:"body1"},l("approveTripTaskConfirmationText"),": ",S),r.createElement(A.SeamlessDropDown,{style:{marginTop:15,marginBottom:15},fullWidth:!0,options:ee,name:"approveReason",onChange:function(e){var t;J(null==e||null===(t=e.target)||void 0===t?void 0:t.value)}}),r.createElement(A.SeamlessInput,{fullWidth:!0,name:"rejectReason",value:G,style:{marginTop:20},placeholder:"You can add comments",onChange:ne})),r.createElement(A.SeamlessButton,{type:"button",variant:"outlined",color:"primary",className:i.btnSpace,onClick:ae},l("noConfirmationButton")),r.createElement(A.SeamlessButton,{type:"button",variant:"contained",color:"primary",onClick:function(){return X(l("tripApproved"))}},l("yesConfirmationButton")))),r.createElement(A.SeamlessDialog,{open:y,onClose:ae,className:i.dialogWrapper,maxWidth:"md",fullWidth:!0},r.createElement(r.Fragment,null,r.createElement("div",{className:i.modalContentSpacing},r.createElement(M.Z,{gutterBottom:!0,id:"transition-modal-title",variant:"h6",className:i.fontHeavy},l("rejectTripConfirmationTitle")),r.createElement(M.Z,{id:"transition-modal-description",variant:"body1"},l("rejectTripConfirmationText")," ",S),r.createElement(A.SeamlessDropDown,{style:{marginTop:15,marginBottom:15},fullWidth:!0,options:te,name:"approveReason",onChange:function(e){var t=e.target.value;$(""),J(t)}}),r.createElement(A.SeamlessInput,{fullWidth:!0,name:"rejectReason",value:G,style:{marginTop:20},placeholder:"Specify other reasons",onChange:ne})),r.createElement(A.SeamlessButton,{type:"button",variant:"outlined",color:"primary",className:i.btnSpace,onClick:function(){return h(!1)}},l("noConfirmationButton")),r.createElement(A.SeamlessButton,{type:"button",variant:"contained",color:"primary",onClick:function(){return X(l("tripRejected"))}},l("yesConfirmationButton")))),r.createElement(je(),{loading:n,columnBuffer:2,rows:t,getRowId:function(e){return e.taskId},columns:le,checkboxSelection:!0}))},Cn=function(e){var t=(0,o.useParams)().id;return r.createElement(Nn,{tripId:t},(function(n){var a,l,i=n.trips,o=n.loading;return r.createElement(r.Fragment,null,r.createElement(B.Z,{display:"flex",flexDirection:"row",justifyContent:"flex-end"},r.createElement(On,{agentId:null===(a=i[0])||void 0===a?void 0:a.agentId,triggerDate:null===(l=i[0])||void 0===l?void 0:l.triggerDate})),r.createElement(wn,(0,H.Z)({},e,{trips:i,tripId:t,loading:o})))}))},On=function(e){var t=e.disable,n=void 0!==t&&t,a=e.agentId,l=e.triggerDate,i=(0,o.useParams)().id;return r.createElement(A.SeamlessButton,{component:o.Link,to:"/home/trip/manualtrips/".concat(i,"/").concat(a,"/").concat(l,"/tasks/create"),variant:"contained",color:"primary",disabled:n,endIcon:r.createElement(en.Z,null)},"Create Trip Task")};var Tn=n(21324),kn=n(94106);const Pn=function(e){var t=e.children,n=r.useState([]),a=(0,w.Z)(n,2),l=a[0],i=a[1],c=r.useState(!1),s=(0,w.Z)(c,2),u=s[0],d=s[1],m=(0,U.useTranslation)().t,p=(0,o.useParams)().id,v=(0,q.useSnackbar)().enqueueSnackbar;return r.useEffect((function(){var e;(e=p,T("".concat(ce,"/getAllTaskTypes?tripId=").concat(e))).then((function(e){0===e.resultCode?i(e.taskTypeList):v(e.resultDescription||m("anErrorOccurred"),{variant:"error",persist:!0})})).catch((function(e){return v(e.message||m("anErrorOccurred"),{variant:"error"})})).finally((function(){return d(!1)}))}),[]),r.createElement(r.Fragment,null,t({taskTypes:l,loading:u}))},Dn=function(e){var t=e.children,n=e.agentId,a=r.useState([]),l=(0,w.Z)(a,2),i=l[0],o=l[1],c=r.useState(!1),s=(0,w.Z)(c,2),u=s[0],d=s[1],m=(0,U.useTranslation)().t,p=(0,q.useSnackbar)().enqueueSnackbar;return r.useEffect((function(){(function(e){return T("/groupmanagementsystem/v1/group/admin/".concat(e,"/groups"))})(n).then((function(e){if(0===e.resultCode){var t=e.groups,n=[];t.forEach((function(e){e.members.forEach((function(e){n.push({id:e.id,userId:e.userId})}))})),o(n)}else p(e.resultDescription||m("anErrorOccurred"),{variant:"error",persist:!0})})).catch((function(e){return p(e.message||m("anErrorOccurred"),{variant:"error"})})).finally((function(){return d(!1)}))}),[]),r.createElement(r.Fragment,null,t({posList:i,loading:u}))};(0,j.Z)((function(e){return(0,W.Z)({selectInput:{width:"100%",lineHeight:"2em"}})}));const Bn=function(e){var t=e.children,n=e.agentId,a=e.resellerIds,l=r.useState(!1),i=(0,w.Z)(l,2),o=i[0],c=i[1],s=r.useState([]),u=(0,w.Z)(s,2),d=u[0],m=u[1],p=(0,U.useTranslation)().t,v=(0,q.useSnackbar)().enqueueSnackbar,g="",f=(a.map((function(e,t){g+=0==t?"resellerIds=".concat(e):"&resellerIds=".concat(e)})),function(){(function(e,t){return T("/surveymanagement/v1/survey/applicable-surveys/".concat(e,"?").concat(t))})(n,g).then((function(e){0===e.resultCode?m(e.surveyInfo||[]):v(e.resultDescription||p("anErrorOccurred"),{variant:"error",persist:!0})})).catch((function(e){return v(e.message||p("anErrorOccurred"),{variant:"error"})})).finally((function(){return c(!1)}))});return r.useEffect((function(){f()}),[a]),r.createElement(r.Fragment,null,t({surveyDatas:d,loading:o}))},Ln=function(e){var t=e.children,n=e.seller,a=e.resellerIds,l=r.useState(!1),i=(0,w.Z)(l,2),o=i[0],c=i[1],s=r.useState([]),u=(0,w.Z)(s,2),d=u[0],m=u[1],p=(0,U.useTranslation)().t,v=(0,q.useSnackbar)().enqueueSnackbar,g=[],f=(a.map((function(e){g.push(e)})),{buyers:g,seller:n});return r.useEffect((function(){(function(e){return T("/oms/v2/due-unused-payments",{method:"POST",body:e})})(f).then((function(e){0===e.resultCode?m(e.dueAndUnusedList||[]):v(e.resultDescription||p("anErrorOccurred"),{variant:"error",persist:!0})})).catch((function(e){return v(e.message||p("selectPosFirst"),{variant:"error"})})).finally((function(){return c(!1)}))}),[a]),r.createElement(r.Fragment,null,t({collectionDatas:d,loading:o}))};var Rn=n(98069),Fn=n(13737),Mn=n(31168),jn=(0,j.Z)((function(e){return(0,W.Z)({paper:{display:"flex",border:"1px solid ".concat(e.palette.divider),flexWrap:"wrap"},divider:{margin:e.spacing(1,.5)},active:{border:"1px solid"+e.palette.primary.main},selected:{color:"".concat(e.palette.primary.main," !important"),BackgroundColor:"".concat(e.palette.primary.main," !important")}})})),Wn=(0,V.Z)((function(e){return{grouped:{margin:e.spacing(.5),border:"none","&:not(:first-child)":{borderRadius:e.shape.borderRadius},"&:first-child":{borderRadius:e.shape.borderRadius}}}}))(Mn.Z);const An=function(e){var t=e.options,n=e.onSelect,a=e.value,l=jn();return i().createElement("div",null,i().createElement(he.Z,{elevation:0,className:l.paper},i().createElement(Wn,{size:"small",value:a,exclusive:!0,onChange:function(e,t){n(t)}},t.map((function(e){return i().createElement(Fn.Z,{key:e.value,classes:{selected:l.selected},value:e.value},e.label)})))))},qn=function(e){var t,n=e.dispatch,a=e.state,l=r.useState([]),i=(0,w.Z)(l,2),o=i[0],c=i[1],s=r.useState(!1),u=(0,w.Z)(s,2),d=u[0],m=u[1],p=(null==a||null===(t=a.pickupLocation)||void 0===t?void 0:t.map((function(e){return e.resellerId})))||[],v=r.useState("seller"),g=(0,w.Z)(v,2),f=g[0],E=g[1],y=r.useState([]),h=(0,w.Z)(y,2),Z=h[0],b=h[1],S=(0,U.useTranslation)().t,I=z().showErrorMessage;r.useEffect((function(){var e;(null==a||null===(e=a.seller)||void 0===e?void 0:e.resellerId)&&c([null==a?void 0:a.seller])}),[null==a?void 0:a.seller]);var N=[{field:"checkbox",renderHeader:function(){return r.createElement(Tn.Z,{disabled:!0,indeterminate:(null==p?void 0:p.length)>0})},width:80,hideSortIcons:!0,disableColumnMenu:!0,renderCell:function(e){return r.createElement(Tn.Z,{onChange:function(){return t=e.row,void n({type:"pickup_location_select",payload:[t]});var t},checked:p.includes(e.row.id)})}},{field:"resellerId",headerName:"Reseller ID",flex:1,filterable:!0,sortable:!0,valueGetter:function(e){return e.row.resellerId}},{field:"name",headerName:"Reseller Name",flex:1,filterable:!0,sortable:!0,valueGetter:function(e){return e.row.resellerName}},{field:"resellerPath",headerName:"Reseller Path",flex:1,filterable:!0,sortable:!0,valueGetter:function(e){return e.row.resellerPath}},{field:"resellerMSISDN",headerName:"Reseller MSISDN",flex:1,filterable:!0,sortable:!0,valueGetter:function(e){return e.row.resellerMSISDN}}];return r.createElement(r.Fragment,null,r.createElement(B.Z,{style:{display:"flex",justifyContent:"center"}},r.createElement(An,{options:[{label:S("sellerLocation","Seller Location"),value:"seller"},{label:S("sellerWarehouses","Seller warehouses"),value:"all"}],value:f,onSelect:function(e){var t;E(e),"all"===e&&(m(!0),(t=null==a?void 0:a.seller.resellerId,new Promise((function(e,n){T("/dms/v1/resellers/resellerChildren/".concat(t,"?resellerType=warehouse")).then((function(t){0!=(null==t?void 0:t.resellers.filter((function(e,t){var n;return"Active"==(null==e||null===(n=e.resellerData)||void 0===n?void 0:n.status)}))).length?e(t):n("Reseller not found")}))}))).then((function(e){e.resellers&&e.resellers.length>0&&b(e.resellers.map((function(e){return e.resellerData})))})).catch((function(e){I(e)})).finally((function(){return m(!1)})))}})),r.createElement("br",null),r.createElement("div",{style:{height:400}},r.createElement(je(),{loading:d,rows:"all"===f?Z:o,columns:N,getRowId:function(e){return e.resellerId},disableColumnSelector:!0,disableDensitySelector:!0,disableSelectionOnClick:!0})))};var Un=n(26739),zn=n(61837),_n=n(19653),Vn=n(28346),Kn=n(24960),Hn=n(8263),Jn=n(8629),Qn=n(49429),Yn=n(38724),Gn=n(79249),$n=n(37390),Xn=n(97485),ea=n(15584),ta=n(91256),na=n(58987),aa=n(89571),la=n(35758),ra=(0,j.Z)((function(e){var t,n;return(0,W.Z)({dialogContent:{backgroundColor:e.palette.primary.main,color:null==e||null===(t=e.palette)||void 0===t||null===(n=t.common)||void 0===n?void 0:n.white}})}));const ia=function(e){var t,n,a,l,r=e.state,o=e.onClose,c=e.removeItem,s=ra();return i().createElement(Jn.Z,{open:!0,maxWidth:"lg",fullWidth:!0,disableBackdropClick:!0,disableEscapeKeyDown:!0,disablePortal:!0},i().createElement(Gn.Z,{className:s.dialogContent,id:"alert-dialog-title"},"Selected Items"),i().createElement(Yn.Z,null,i().createElement(ta.Z,null,i().createElement($n.Z,{"aria-label":"a dense table"},i().createElement(na.Z,null,i().createElement(aa.Z,null,i().createElement(ea.Z,null,"Product SKU"),i().createElement(ea.Z,null,"Reserve Type"),i().createElement(ea.Z,null,"Batch ID"),i().createElement(ea.Z,null,"Quantity"))),i().createElement(Xn.Z,null,(t=r.selectedByRange.map((function(e){return{productSKU:e.productSKU,quantity:e.quantity,boxId:e.boxId,startSerial:e.startSerial,endSerial:e.endSerial,reserverType:"RANGE"}})),n=r.stockRows.map((function(e){return{productSKU:e.productSKU,quantity:e.quantity,boxId:e.boxId,reserverType:"BATCH",startSerial:e.startSerial,endSerial:e.endSerial}})),a=function(){var e=r.serials;try{return Object.keys(e).map((function(t){return Object.keys(e[t]).map((function(n){return{productSKU:t,boxId:n,quantity:e[t][n].length,reserverType:"SERIAL"}}))})).flat()}catch(e){return[]}}(),l=function(){var e=r.services.topups,t=(0,Pe.groupBy)(e,"productSKU");return Object.keys(t).map((function(e){return{productSKU:e,quantity:t[e].length,boxId:"-",reserverType:"TOPUP"}}))}(),[].concat((0,x.Z)(t),(0,x.Z)(n),(0,x.Z)(a),(0,x.Z)(l))).map((function(e,t){return i().createElement(aa.Z,{key:t},i().createElement(ea.Z,{component:"th",scope:"row"},e.productSKU),i().createElement(ea.Z,null,e.reserverType),i().createElement(ea.Z,null,e.boxId),i().createElement(ea.Z,null,e.quantity),i().createElement(ea.Z,null,i().createElement(zn.Z,{size:"small",disableRipple:!0,onClick:function(){return c(e)}},i().createElement(la.Z,{fontSize:"small"}))))})))))),i().createElement(Qn.Z,null,i().createElement(L.Z,{onClick:o,color:"primary"},"Close")))};var oa=(0,j.Z)((function(e){return(0,W.Z)({groupLabel:{fontWeight:"bolder"}})}));const ca=function(e){var t=e.resellerId,n=e.onSelect,a=e.dispatch,l=e.disabled,o=void 0!==l&&l,c=(0,r.useState)(),s=(0,w.Z)(c,2),u=s[0],d=s[1],m=oa();return(0,r.useEffect)((function(){(function(e){return function(e){return de("/v2/fetch-product-range/".concat(e))}(e).then((function(e){return e.products})).then((function(e){return function(e){return me("/product?".concat(C.stringify(e)))}({variantIds:e})})).then((function(e){return e.products}))})(t).then((function(e){return function(e){return e.filter((function(e){return"services"!==e.productType}))}(e)})).then((function(e){return a({type:"product_loaded",payload:e}),e.map((function(e){return null==e?void 0:e.variants})).flat()})).then((function(e){d(e)}))}),[t]),i().createElement(lt.ZP,{id:"combo-box-demo",options:u||[],disableClearable:!0,disabled:o,onChange:function(e,t){n(t)},getOptionLabel:function(e){return e.productSKU},style:{width:350},classes:{groupLabel:m.groupLabel},renderInput:function(e){return i().createElement(Ae.Z,(0,H.Z)({},e,{disabled:o,label:"Select Product SKU",variant:"outlined"}))}})},sa=function(e){var t=e.state,n=e.dispatch,a=e.productSKU,l=e.boxId,o=e.handleClose,c=(0,r.useState)(!1),s=(0,w.Z)(c,2),u=s[0],d=s[1],m=(0,r.useState)([]),p=(0,w.Z)(m,2),v=p[0],g=p[1],f=(0,r.useCallback)((function(){d(!0),function(e,t){return ue("/box/".concat(t,"?states=Available"))}(0,l).then((function(e){return g(e.items)})).catch(console.error).finally((function(){return d(!1)}))}),[]);function E(){try{return t.serials[a][l]}catch(e){return[]}}return(0,r.useEffect)((function(){f()}),[]),i().createElement(Jn.Z,{open:!0,onClose:o,"aria-labelledby":"form-dialog-title",disableBackdropClick:!0,disableEscapeKeyDown:!0,fullWidth:!0,maxWidth:"md"},i().createElement(Gn.Z,{id:"form-dialog-title"},"Select Items from BOX #".concat(l)),i().createElement(Yn.Z,null,i().createElement("section",{style:{height:450,minWidth:500}},i().createElement(je(),{loading:u,rows:v,columns:[{field:"serial",flex:1,headerName:"Serial"},{field:"productSku",flex:1,headerName:"Product SKU"}],checkboxSelection:!0,onSelectionModelChange:function(e){(0,Pe.isEqual)(e.selectionModel,E())||n({type:"box_item_selected",payload:{items:e.selectionModel,boxId:l,productSKU:a}})},selectionModel:E(),getRowId:function(e){return e.serial}}))),i().createElement(Qn.Z,null,i().createElement(L.Z,{onClick:o,color:"primary"},"Close")))};function ua(e){var t,n,a,l,r=e&&(null==e||null===(t=e.selectedStock)||void 0===t?void 0:t.length)+(null==e||null===(n=e.selectedByRange)||void 0===n?void 0:n.length),i=0;Object.keys(null==e?void 0:e.serials).map((function(t){return i+=Object.keys(e.serials[t]).length}));var o=null==e||null===(a=e.services)||void 0===a||null===(l=a.topups)||void 0===l?void 0:l.length;return r+i+o}var da=n(42494),ma=n(50581),pa=n(65166),va=(0,j.Z)((function(e){return(0,W.Z)({root:{display:"flex",height:400},detailsPane:{display:"flex",flexWrap:"wrap",flexDirection:"column",paddingLeft:20,paddingTop:20,paddingRight:20,alignContent:"space-around"},input:{width:450},mssidn_box:{width:450,margin:e.spacing(1)},amount_box:{width:450,margin:e.spacing(1),paddingTop:5},amount:{width:450},button:{height:40,alignSelf:"flex-end",marginBottom:2}})}));const ga=function(e){var t,n,a,l,i,o,c=e.state,s=e.dispatch,u=e.product,d=e.isFixed,m=void 0!==d&&d,p=r.useState(),v=(0,w.Z)(p,2),g=v[0],f=v[1],E=r.useState(),y=(0,w.Z)(E,2),h=y[0],Z=y[1],b=r.useState(),S=(0,w.Z)(b,2),I=S[0],N=S[1],C=function(){!m&&f(""),Z(""),N(null)};r.useEffect((function(){C(),m&&f(u.price.price)}),[u.productSKU,m,null==u?void 0:u.price.price]);var O=va(),T=(0,U.useTranslation)().t,k=window.config,P=(null==k||null===(t=k.order)||void 0===t||null===(n=t.topup)||void 0===n?void 0:n.enabled)||!1,D=(null==k||null===(a=k.order)||void 0===a||null===(l=a.topup)||void 0===l||null===(i=l.orderTypes)||void 0===i?void 0:i.includes(c.orderType))||!1;if(!P||!D)return r.createElement(B.Z,{style:{display:"flex",justifyContent:"center",marginTop:50}},r.createElement(M.Z,{color:"error",variant:"body1"},T("topupDisabledMsg","Not allowed")));var R,F=[{field:"SUBSCRIBERMSISDN",flex:1,hideSortIcons:!0,disableColumnMenu:!0},{field:"accountTypeId",flex:1,hideSortIcons:!0,disableColumnMenu:!0},{field:"amount",flex:1,hideSortIcons:!0,disableColumnMenu:!0},{field:"actions",width:110,hideSortIcons:!0,disableColumnMenu:!0,renderCell:function(e){return r.createElement(We.Z,{size:"small",variant:"outlined"},!m&&r.createElement(zn.Z,{size:"small",disableRipple:!0,onClick:function(){return t=e.row,void((a=null==c||null===(n=c.services)||void 0===n?void 0:n.topups.find((function(e){return e.productSKU===u.productSKU&&e.SUBSCRIBERMSISDN===t.SUBSCRIBERMSISDN})))&&(N(a),f(a.amount),Z(a.SUBSCRIBERMSISDN)));var t,n,a}},r.createElement(pa.Z,{fontSize:"small"})),r.createElement(zn.Z,{size:"small",disableRipple:!0,onClick:function(){return t=e.row,n=(0,x.Z)(c.services.topups),(0,Pe.remove)(n,{productSKU:u.productSKU,SUBSCRIBERMSISDN:t.SUBSCRIBERMSISDN}),void s({type:"topup_selected",payload:n});var t,n}},r.createElement(la.Z,{fontSize:"small"})))}}];return r.createElement(he.Z,{className:O.root},r.createElement("section",{className:O.detailsPane},r.createElement("section",{className:O.mssidn_box},r.createElement(M.Z,{style:{marginBottom:30},color:"textSecondary",variant:"body1",align:"center"},T("subcriberDetails","Subscriber's details")),r.createElement(da.Z,{className:O.input},r.createElement(A.SeamlessInput,{onChange:function(e){return Z(e.target.value)},value:h,label:T("subscriberMSSIDN","Subscriber MSISDN")}))),r.createElement(B.Z,{className:O.amount_box},r.createElement(da.Z,{className:O.amount},r.createElement(A.SeamlessInput,{id:"amount",disabled:m,label:T("topupAmount","Topup amount"),value:g,onChange:function(e){var t=e.target.value;t||f(""),!m&&function(e){return new RegExp(/^\d*[1-9]\d*$/).test(e)}(t)&&f(parseInt(t,10))},endAdornment:r.createElement(ma.Z,{position:"start"},(null==u||null===(o=u.price)||void 0===o?void 0:o.currency)||"")}))),r.createElement(B.Z,{style:{width:450,display:"flex",justifyContent:"flex-end"}},r.createElement(L.Z,{onClick:C,className:O.button,variant:"text",color:"primary",size:"small",disabled:!(h&&g)},T("reset","Reset")),r.createElement(L.Z,{onClick:function(){return I?(t=null==c||null===(e=c.services)||void 0===e?void 0:e.topups.findIndex((function(e){return e.productSKU===u.productSKU&&e.SUBSCRIBERMSISDN===I.SUBSCRIBERMSISDN})),n={SUBSCRIBERMSISDN:h,accountTypeId:"AIRTIME",productSKU:u.productSKU,amount:g},(a=(0,x.Z)(c.services.topups))[t]=n,s({type:"topup_selected",payload:a}),void C()):function(){var e,t,n={SUBSCRIBERMSISDN:h,accountTypeId:"AIRTIME",productSKU:u.productSKU,amount:g};if(null!=c&&null!==(e=c.services)&&void 0!==e&&e.topups){var a=(0,x.Z)(null==c||null===(t=c.services)||void 0===t?void 0:t.topups),l=a.findIndex((function(e){return e.productSKU===u.productSKU&&e.SUBSCRIBERMSISDN===n.SUBSCRIBERMSISDN}));-1!==l?a[l]=n:a=a.concat(n),s({type:"topup_selected",payload:a}),C()}else s({type:"topup_selected",payload:[n]})}();var e,t,n,a},className:O.button,variant:"contained",color:"primary",size:"small",disabled:!(h&&g)},I?T("update","Update"):T("addToCart","Add to cart")))),r.createElement("section",{style:{height:400,flex:1}},r.createElement(je(),{rows:null==c||null===(R=c.services)||void 0===R?void 0:R.topups.filter((function(e){return e.productSKU===u.productSKU})),getRowId:function(e){return e.SUBSCRIBERMSISDN},columns:F,disableDensitySelector:!0,disableSelectionOnClick:!0})))};var fa=n(99688),Ea=n(46062),ya=n.n(Ea),ha=n(65163);function Za(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ba(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Za(Object(n),!0).forEach((function(t){(0,Fe.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Za(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}ya()(ha.Z,{attributes:{nonce:"c2VhbWxlc3M="},insert:"head",singleton:!1}),ha.Z.locals;var Sa=(0,j.Z)((function(e){var t,n;return(0,W.Z)({root:{backgroundColor:e.palette.primary.main,color:null==e||null===(t=e.palette)||void 0===t||null===(n=t.common)||void 0===n?void 0:n.white},grid:{width:271},formControl:{marginLeft:e.spacing(1)}})}));const Ia=function(e){var t=e.handleClose,n=e.handleSubmit,a=e.product,l=e.state,o=Sa(),c=ba({},l.serialRangeList),s=Object.keys(c).includes("".concat(a.boxId))&&Object.keys(c["".concat(a.boxId)]).includes("".concat(a.startSerial)),u=s?c[a.boxId][a.startSerial].startSerial:"",d=s?c[a.boxId][a.startSerial].endSerial:"",m=s?"".concat(BigInt(d)-BigInt(u)+BigInt("1")):"",p=(0,r.useState)({startSerial:u,endSerial:d,quantity:m}),v=(0,w.Z)(p,2),g=v[0],f=v[1],E=(0,r.useState)(!0),y=(0,w.Z)(E,2),h=y[0],Z=y[1],b=(0,r.useState)(!1),S=(0,w.Z)(b,2),I=S[0],N=S[1],x=(0,r.useState)(!1),C=(0,w.Z)(x,2),O=C[0],T=C[1],k=(0,r.useState)(!1),P=(0,w.Z)(k,2),D=P[0],B=P[1];function F(e,t){var n=e.target.name,l=BigInt(t.startSerial),r=BigInt(a.startSerial),i=t.endSerial?BigInt(t.endSerial):BigInt("0"),o=BigInt(t.quantity),c=BigInt(a.quantity),s=BigInt("1");B("quantity"===n&&(o<0||o>c)),"startSerial"===n&&(i!==BigInt("0")&&l>i||l<r||l>BigInt(a.endSerial))?N(!0):N(!1),"endSerial"===n&&(i<l||i<r||i>BigInt(a.endSerial))?T(!0):T(!1),""!==t.startSerial&&""!==t.endSerial?Z(l<r||l>i||l>r+c-s||i>r+c-s||i<r):Z(!0)}return i().createElement(Jn.Z,{open:!0,maxWidth:"sm",fullWidth:!0,onClose:t,disableBackdropClick:!1},i().createElement(Gn.Z,{className:o.root,id:"alert-dialog-title"},"Select Range"),i().createElement(Yn.Z,null,i().createElement(fa.Z,{severity:"info",variant:"standard"},"Start and End Serial should be in between ".concat(a.startSerial," and ").concat(a.endSerial),i().createElement("br",null),"Qunatity should be in between 1 and ".concat(a.quantity)),i().createElement(R.Z,{container:!0,spacing:1},i().createElement(R.Z,{item:!0,xs:12,sm:6},i().createElement(Ae.Z,{error:I,className:o.grid,variant:"outlined",label:"Start Serial",name:"startSerial",type:"number",autoComplete:"off",onChange:function(e){F(e,function(e){var t=BigInt(g.endSerial),n=BigInt(e.target.value),l=BigInt("1"),r=BigInt(a.quantity),i=BigInt(a.startSerial),o=t-n+l,c=o>0&&o<=r&&n>=i?"".concat(o):"0",s=ba(ba({},g),{},{startSerial:e.target.value,quantity:c});return f(s),s}(e))},value:g.startSerial,helperText:I?"Invalid Start Serial":""})),i().createElement(R.Z,{item:!0,xs:12,sm:6},i().createElement(Ae.Z,{error:O,className:o.grid,variant:"outlined",label:"End Serial",name:"endSerial",type:"number",autoComplete:"off",onChange:function(e){F(e,function(e){var t=""===g.startSerial?"".concat(a.startSerial):"".concat(g.startSerial),n=BigInt(g.startSerial),l=BigInt(e.target.value),r=BigInt("1"),i=l>=BigInt(a.startSerial)&&l<=BigInt(a.endSerial)?l-n+r:0,o=BigInt(a.quantity),c=BigInt(a.endSerial),s=i>0&&i<=o&&l<=c?"".concat(i):"0",u=ba(ba({},g),{},{endSerial:e.target.value,quantity:s,startSerial:t});return f(u),u}(e))},helperText:O?"Invaid End Serial":"",value:g.endSerial})),i().createElement(R.Z,{className:o.formControl},i().createElement(Ae.Z,{error:D,className:o.grid,variant:"outlined",label:"Quantity",name:"quantity",type:"number",autoComplete:"off",onChange:function(e){F(e,function(e){var t=""===g.startSerial?"".concat(a.startSerial):"".concat(g.startSerial),n=BigInt(t),l=BigInt(e.target.value),r=BigInt("1"),i=BigInt(a.endSerial),o=BigInt(a.startSerial),c=n+l-r,s=c<=i&&c>=o&&""!==e.target.value?"".concat(c):"",u={quantity:e.target.value,endSerial:s,startSerial:t};return f(u),u}(e))},helperText:D?"Invalid Quantity":"",value:g.quantity})))),i().createElement(Qn.Z,null,i().createElement(L.Z,{onClick:function(){t(),Z(!1)},autoFocus:!0},"Close"),i().createElement(L.Z,{disabled:h,onClick:function(){h||n(ba(ba({},g),{},{productSKU:a.productSKU}),a.boxId,a.startSerial,a)},color:"primary",autoFocus:!0},"Submit")))};function Na(e,t){return e.find((function(e){return e.variants.find((function(e){return e.productSKU===t}))}))}function xa(e,t){var n={currency:"",price:0,variablePrice:!1};return e.forEach((function(e){var a=e.variants.find((function(e){return e.productSKU===t}));a&&(n=a.unitPrice)})),n}function wa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ca(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wa(Object(n),!0).forEach((function(t){(0,Fe.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oa(){return i().createElement(_n.GridOverlay,null,i().createElement("div",{style:{position:"absolute",top:0,width:"100%"}},i().createElement(F.Z,null)))}const Ta=function(e){var t=e.state,n=e.dispatch,a=e.resellerId,l=(0,r.useState)([]),o=(0,w.Z)(l,2),c=o[0],s=o[1],u=(0,r.useState)(),d=(0,w.Z)(u,2),m=d[0],p=d[1],v=(0,r.useState)(),g=(0,w.Z)(v,2),f=g[0],E=g[1],y=(0,r.useState)(!1),h=(0,w.Z)(y,2),Z=h[0],b=h[1],S=(0,r.useState)(),I=(0,w.Z)(S,2),N=I[0],C=I[1],O=(0,r.useState)(!1),T=(0,w.Z)(O,2),k=T[0],P=T[1],D=(0,r.useState)(!1),B=(0,w.Z)(D,2),R=B[0],F=B[1],M=(0,r.useState)(!1),j=(0,w.Z)(M,2),W=j[0],A=j[1],q=(0,r.useState)(),_=(0,w.Z)(q,2),V=_[0],K=_[1],H=((0,U.useTranslation)().t,z()),J=(H.showSuccessMessage,H.showErrorMessage,H.showInfoMessage),Q=(H.showWarningMessage,ke().requestedPrincipalId!==a?a.toString():null),Y=(0,r.useCallback)((function(){m&&(b(!0),function(e,t){var n="/products/".concat(e,"/inventories/boxes?states=Available");return ue(n,{method:"POST",body:{fetchChildStock:!!t,childResellerIds:t?[t]:[],stateNames:["Available"],fetchOwnStock:!t}})}(m,Q).then((function(e){var n=e.data.map((function(e){var n=BigInt(e.endSerial)-BigInt(e.startSerial)+BigInt(1);return e.continuesRange=n===BigInt(e.quantity),e.price=xa(t.products,m),e}));s(n)})).finally((function(){return b(!1)})))}),[m,Q]);function G(e){var a=Ca({},t.serialRangeList);if(a[e.boxId]){delete a[e.boxId][e.startSerial],0===Object.keys(a[e.boxId]).length&&delete a[e.boxId];var l=t.selectedSerials.filter((function(t){return t!==e.startSerial})),r=t.selectedByRange.filter((function(t){return t.startSerial!==e.startSerial}));n({type:"remove_range_select",payload:{value:a,data:r,serial:l}});var i=c.map((function(t){return t.startSerial===e.startSerial&&(t.tableMeta={},t.quantSelected&&(t.quantSelected=null)),t}));s(i),J("Range removed")}}function $(e){return!(!Object.keys(t.serialRangeList).includes("".concat(e.boxId))||!Object.keys(t.serialRangeList[e.boxId]).includes("".concat(e.startSerial)))||!(!Object.keys(t.serials).includes(m)||!Object.keys(t.serials[m]).includes(e.boxId))}function X(e){if(e.productSKU=m,!t.selectedSerials.includes(e.boxId)){var a=(0,x.Z)(t.stockRows),l=[],r=a.find((function(t){return t.boxId===e.boxId})),i=(l=r?a.filter((function(t){return t.boxId!==e.boxId})):a.concat(e)).map((function(e){return e.boxId}));r||J("Item added"),n({type:"stock_select",payload:{ids:i,rows:l}})}}function ee(e){var a=(0,Pe.cloneDeep)(t.serials);Object.keys(a).map((function(t){Object.getOwnPropertyNames(a[t]).includes(e)&&delete a[t][e]})),n({type:"set_serials",payload:a}),J("Serials removed")}(0,r.useEffect)((function(){Y()}),[Y]);var te,ne,ae,le=[{field:"checkbox",renderHeader:function(){return i().createElement(Tn.Z,{disabled:!0,indeterminate:t.selectedStock.length>0})},width:80,hideSortIcons:!0,disableColumnMenu:!0,renderCell:function(e){var n,a;return i().createElement(Tn.Z,{onChange:function(){return X(e.row)},disabled:null===(n=e.row)||void 0===n||null===(a=n.tableMeta)||void 0===a?void 0:a.selectionDisabled,checked:t.selectedStock.includes(e.row.boxId)})}},{field:"boxId",flex:1,headerName:"Box ID"},{field:"startSerial",flex:1,headerName:"Start Serial",valueGetter:function(e){var t;return null===(t=e.row.startSerial)||void 0===t?void 0:t.toString()}},{field:"endSerial",flex:1,headerName:"End Serial",valueGetter:function(e){var t;return null===(t=e.row.endSerial)||void 0===t?void 0:t.toString()}},{field:"quantity",width:150,sortable:!0,headerName:"Quantity"},{field:"",headerName:"Action",flex:1,renderCell:function(e){return e.row.continuesRange?i().createElement(We.Z,null,i().createElement(Ze.ZP,{title:"Select Range","aria-label":"add"},i().createElement(L.Z,{disabled:t.selectedStock.includes(e.row.boxId),onClick:function(){return t=e.row,C(t),void P(!0);var t},color:$(e.row)?"secondary":"primary",variant:"outlined",startIcon:i().createElement(Hn.Z,{fontSize:"small"})},e.row.quantSelected?"".concat(e.row.quantSelected,"\n(Edit)"):"Select Range")),i().createElement(Ze.ZP,{title:"Remove Range","aria-label":"remove"},i().createElement(L.Z,{disabled:!$(e.row),onClick:function(){return G(e.row)},color:$(e.row)?"secondary":"primary",variant:"outlined"},"Remove Range"))):i().createElement(We.Z,null,i().createElement(Ze.ZP,{title:"Select Range","aria-label":"add"},i().createElement(L.Z,{disabled:t.selectedStock.includes(e.row.boxId),onClick:function(){return t=e.row,K(t),void A(!0);var t},color:$(e.row)?"secondary":"primary",variant:"outlined",startIcon:i().createElement(Kn.Z,{fontSize:"small"})},e.row.quantSelected?"".concat(e.row.quantSelected,"\n(Edit) Selection"):"Select Items")),i().createElement(Ze.ZP,{title:"Remove Range","aria-label":"remove"},i().createElement(L.Z,{disabled:!$(e.row),onClick:function(){return ee(e.row.boxId)},color:$(e.row)?"secondary":"primary",variant:"outlined"},"Remove Items")))}}];return i().createElement("div",{style:{height:500}},i().createElement("section",{style:{display:"flex",justifyContent:"space-between",paddingRight:5,paddingLeft:5}},a&&i().createElement(ca,{resellerId:null==a?void 0:a.toString(),onSelect:function(e){"services"===e.productType?E(e):(E(null),p(e.productSKU))},dispatch:n}),i().createElement("section",null,i().createElement(zn.Z,{"aria-label":"cart",onClick:function(){return F(!0)}},i().createElement(Un.Z,{badgeContent:ua(t),color:"primary"},i().createElement(Vn.Z,{fontSize:"large"}))))),f?i().createElement(ga,{isFixed:!f.price.variablePrice,state:t,dispatch:n,product:f}):i().createElement(je(),{loading:Z,rows:(te=t.serialRangeList,ne=(0,x.Z)(c),ae=(0,x.Z)(t.selectedSerials),ne.length>0&&ne.forEach((function(e){var n,a,l,r,i;e.tableMeta={},ae.includes(e.startSerial)&&(e.quantSelected=null==te||null===(n=te[e.boxId])||void 0===n||null===(a=n[e.startSerial])||void 0===a?void 0:a.quantity,e.tableMeta={selectionDisabled:!0,bgColor:"lightgrey"}),!1===e.continuesRange&&(e.quantSelected=null===(l=t.serials)||void 0===l||null===(r=l[m])||void 0===r||null===(i=r[e.boxId])||void 0===i?void 0:i.length,e.tableMeta={selectionDisabled:!0,bgColor:"lightgrey"})})),ne),getRowId:function(e){return e.boxId},columns:le,columnBuffer:2,onSelectionModelChange:function(e){},onRowSelected:X,disableDensitySelector:!0,disableSelectionOnClick:!0,components:{LoadingOverlay:Oa}}),k?i().createElement(Ia,{handleClose:function(){P(!1)},handleSubmit:function(e,a,l,r){e.boxId=r.boxId;var i=Ca({},t.serialRangeList),o=Object.keys(i);t.selectedByRange=t.selectedByRange.filter((function(e){return e.startSerial!==l})),t.selectedSerials=t.selectedSerials.filter((function(e){return e!==l}));var c=Ca(Ca({},r),{},{startSerialSelected:"".concat(e.startSerial),endSerialSelected:"".concat(e.endSerial),productSKU:m,quantity:"".concat(BigInt(e.endSerial)-BigInt(e.startSerial)+BigInt("1"))});o.includes("".concat(a))||(i[a]={}),i[a][l]=e,n({type:"stock_range_select",payload:{value:i,data:c,serial:l}}),J("Item added"),P(!1)},product:Ca(Ca({},N),{},{productSKU:m}),state:t}):null,R&&i().createElement(ia,{state:t,dispatch:n,onClose:function(){return F(!1)},removeItem:function(e){switch(e.reserverType){case"RANGE":G(e);break;case"BATCH":X(e);break;case"SERIAL":ee(e.boxId);break;case"TOPUP":var a=t.services.topups.filter((function(t){return t.productSKU!==e.productSKU}));n({type:"topup_selected",payload:a})}}}),W&&i().createElement(sa,{state:t,productSKU:m,boxId:null==V?void 0:V.boxId,dispatch:n,handleClose:function(){K(null),A(!1)}}))};var ka=n(41262),Pa=n(24579),Da=(0,j.Z)((function(e){return(0,W.Z)({space:{paddingRight:10,fontWeight:600},table:{minWidth:500},stepper:{minWidth:500,height:500,marginTop:10},border:{borderBottom:"1px solid grey"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}})})),Ba=function(e){var t=e.source,n=Da();return i().createElement(kt.Z,{variant:"outlined",style:{flex:1,padding:5,marginRight:10}},i().createElement(Pa.Z,null,i().createElement(M.Z,{style:{marginBottom:10,fontWeight:"bold"}}," Stock From "),i().createElement(M.Z,{title:"Name"},i().createElement("span",{className:n.space},"Name:"),t.resellerName),i().createElement(M.Z,{title:"Reseller ID"},i().createElement("span",{className:n.space},"Reseller ID:"),t.resellerId),i().createElement(M.Z,{title:"MSISDN"},i().createElement("span",{className:n.space},"Reseller MSISDN:"),t.resellerMSISDN)))},La=function(e){var t=e.destination,n=Da();return i().createElement(kt.Z,{variant:"outlined",style:{flex:1,padding:5,marginLeft:10}},i().createElement(Pa.Z,null,i().createElement(M.Z,{style:{marginBottom:10,fontWeight:"bold"}}," Stock To "),i().createElement(M.Z,{title:"Name"},i().createElement("span",{className:n.space},"Name:"),t.resellerName),i().createElement(M.Z,{title:"Reseller ID"},i().createElement("span",{className:n.space},"Reseller ID:"),t.resellerId),i().createElement(M.Z,{title:"Reseller MSISDN"},i().createElement("span",{className:n.space},"Reseller MSISDN:"),t.resellerMSISDN)))},Ra=n(44808),Fa=n(64659),Ma=n(4730);function ja(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Wa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ja(Object(n),!0).forEach((function(t){(0,Fe.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ja(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Aa=function(){function e(t,n,a,l){(0,Fa.Z)(this,e),(0,Fe.Z)(this,"lineItems",void 0),(0,Fe.Z)(this,"taxList",void 0),(0,Fe.Z)(this,"products",[]),(0,Fe.Z)(this,"discount",null),this.lineItems=t,this.taxList=n,this.products=a,this.discount=l}return(0,Ma.Z)(e,[{key:"getTax",value:function(e){return this.taxList.find((function(t){return t.id===e}))}},{key:"getNetAmount",value:function(e){return e.amount?e.amount:e.price?e.price*e.quantity:xa(this.products,e.productSKU).price*e.quantity}},{key:"getTaxes",value:function(e){var t=this,n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Na(e,arguments.length>2?arguments[2]:void 0);return t.filter((function(e){return null==n?void 0:n.taxIds.includes(e.id)}))}(this.products,this.taxList,e.productSKU);return 0===n.length?[{name:"N/A",amount:0,description:"Not applicable"}]:n.map((function(n){var a=0===n.percentValue?"".concat(n.fixedValue," "):"".concat(n.percentValue," %");return{name:"".concat(n.taxType," ").concat(a),amount:t.calculateTax(e,n),description:n.description}}))}},{key:"calculateTax",value:function(e,t){var n=this.getNetAmount(e);return 0!==t.percentValue?n*t.percentValue/100:t.fixedValue}},{key:"getPostTaxAmount",value:function(e){var t=this.getTaxes(e).reduce((function(e,t){return e+t.amount}),0);return this.getNetAmount(e)+t}},{key:"totalCalucaltion",get:function(){var e=this.rows,t=e.reduce((function(e,t){return e+t.taxes.reduce((function(e,t){return e+t.amount}),0)}),0),n=e.reduce((function(e,t){return e+t.netAmount}),0),a=e.reduce((function(e,t){return e+t.quantity}),0);return{totalAmount:e.reduce((function(e,t){return e+t.postTaxAmount}),0)+this.discount,totalTax:t,subTotal:n,totalQuantity:a,totalDiscount:this.discount}}},{key:"rows",get:function(){var e=this;return this.lineItems.map((function(t){return Wa(Wa({},t),{},{taxes:e.getTaxes(t),netAmount:e.getNetAmount(t),postTaxAmount:e.getPostTaxAmount(t)})}))}}]),e}(),qa=(0,Ra.makeStyles)((function(e){return(0,Ra.createStyles)({container:{},table:{minWidth:650},tableBody:{"& td":{border:".8px solid #d3d3d369"}},tableHead:{backgroundColor:"#607d8b;","& th":{color:"white","text-align":"center",border:".8px solid #d3d3d369"}},tableHeadRowCell:{color:"white"},totalTitles:{fontWeight:"bold"}})}));const Ua=function(e){var t=e.paymentInfo,n=void 0!==t&&t,a=e.taxes,l=void 0===a?[]:a,i=e.itemRows,o=void 0===i?[]:i,c=e.products,s=void 0===c?[]:c,u=e.discount,d=void 0===u?0:u,m=e.dispatch,p=qa(),v=new Aa(o,l,s,d),g=v.totalCalucaltion;return r.useEffect((function(){n&&m&&m({type:"total_amount",payload:{key:"invoiceAmount",value:g.totalAmount}})}),[]),r.createElement(ta.Z,{component:B.Z,className:p.container},r.createElement($n.Z,{className:p.table,size:"medium","aria-label":"a dense table"},r.createElement(na.Z,{className:p.tableHead},r.createElement(aa.Z,null,r.createElement(ea.Z,null,"S.No"),r.createElement(ea.Z,null,"Product SKU"),r.createElement(ea.Z,null,"Box id"),n&&r.createElement(ea.Z,null,"Price"),r.createElement(ea.Z,null,"Quantity"),n?r.createElement(r.Fragment,null,r.createElement(ea.Z,null,"Net amount"),r.createElement(ea.Z,null,"Tax"),r.createElement(ea.Z,null,"Tax amount"),r.createElement(ea.Z,null," Post tax amount")):null)),r.createElement(Xn.Z,{className:p.tableBody},v.rows.map((function(e,t){return r.createElement(aa.Z,{key:t},r.createElement(ea.Z,{width:30}," ",t+1),r.createElement(ea.Z,{width:230},e.productSKU),r.createElement(ea.Z,{width:230}," ",e.boxId||"-"),n&&r.createElement(ea.Z,{width:100,align:"right"},e.price),r.createElement(ea.Z,{width:100,align:"right"},e.quantity),n?r.createElement(r.Fragment,null,r.createElement(ea.Z,{width:250,align:"right"},e.netAmount),r.createElement(ea.Z,{width:130,align:"center"},r.createElement("section",null,e.taxes.map((function(t,n){return r.createElement("div",{key:n,title:t.description,style:{padding:5,borderBottom:1===e.taxes.length?"unset":".2px solid lightgrey"}},r.createElement(Ze.ZP,{title:null==t?void 0:t.description},r.createElement("span",null,t.name)))})))),r.createElement(ea.Z,{width:130,align:"right"},r.createElement("section",null,e.taxes.map((function(t){return r.createElement("section",{style:{padding:5,borderBottom:1===e.taxes.length?"unset":".2px solid lightgrey",verticalAlign:"bottom"}},t.amount)})))),r.createElement(ea.Z,{align:"right",width:250,style:{verticalAlign:1===e.taxes.length?"bottom":"center"}},e.postTaxAmount)):null)})),n?r.createElement(r.Fragment,null,r.createElement(aa.Z,null,r.createElement(ea.Z,{rowSpan:4}),r.createElement(ea.Z,{rowSpan:4}),r.createElement(ea.Z,{rowSpan:4}),r.createElement(ea.Z,{rowSpan:4}),r.createElement(ea.Z,{rowSpan:4}),r.createElement(ea.Z,{rowSpan:4}),r.createElement(ea.Z,{colSpan:2,className:p.totalTitles},"Subtotal"),r.createElement(ea.Z,{align:"right",className:p.totalTitles},g.subTotal)),r.createElement(aa.Z,null,r.createElement(ea.Z,{colSpan:2,className:p.totalTitles},"Tax"),r.createElement(ea.Z,{align:"right",className:p.totalTitles},g.totalTax)),g.totalDiscount?r.createElement(aa.Z,null,r.createElement(ea.Z,{colSpan:2,className:p.totalTitles},"Discount"),r.createElement(ea.Z,{style:{backgroundColor:"rgb(33 178 39 / 26%)"},align:"right",className:p.totalTitles},g.totalDiscount)):null,r.createElement(aa.Z,null,r.createElement(ea.Z,{colSpan:2,className:p.totalTitles},"Total"),r.createElement(ea.Z,{align:"right",className:p.totalTitles},g.totalAmount))):r.createElement(r.Fragment,null,r.createElement(aa.Z,null,r.createElement(ea.Z,{rowSpan:3}),r.createElement(ea.Z,{rowSpan:3}),n&&r.createElement(ea.Z,{rowSpan:3}),r.createElement(ea.Z,{colSpan:1,className:p.totalTitles},"Total Quantity"),r.createElement(ea.Z,{align:"right",className:p.totalTitles},g.totalQuantity))))))};var za=n(74603),_a=n(26688),Va=n(8666),Ka=n(73698),Ha=n(12231),Ja=(0,j.Z)((function(e){return(0,W.Z)({root:{padding:"2px 4px",display:"flex",alignItems:"center",borderRadius:2,borderBottom:"1px solid #cac3c3"},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:10},divider:{height:28,margin:4}})}));function Qa(e){var t=e.data,n=e.onRemove,a=e.onEdit;return r.createElement($n.Z,null,r.createElement(Xn.Z,null,t&&t.map((function(e){return r.createElement(aa.Z,{hover:!0,key:e.key,style:{cursor:"pointer"}},r.createElement(ea.Z,{component:"th",scope:"row",style:{width:"35%"}},e.key),r.createElement(ea.Z,null,r.createElement(ye.Z,{size:"small",color:"text"===e.kind?"default":"primary",label:e.kind.toUpperCase()})),r.createElement(ea.Z,null,e.value),r.createElement(ea.Z,{size:"small",style:{width:50,padding:0}},e.required?r.createElement(L.Z,{onClick:function(){return a(e.key)},size:"small"},r.createElement(pa.Z,{fontSize:"small"})):r.createElement(L.Z,{onClick:function(){return n(e.key)},size:"small"},r.createElement(_a.Z,{fontSize:"small"}))))}))))}const Ya=function(e){var t=e.data,n=e.setData,a=Ja(),l=r.useState(),i=(0,w.Z)(l,2),o=i[0],c=i[1],s=r.useState(),u=(0,w.Z)(s,2),d=u[0],m=u[1],p=r.useState("text"),v=(0,w.Z)(p,2),g=v[0],f=v[1],E=r.useState(!1),y=(0,w.Z)(E,2),h=y[0],Z=y[1],b=r.useState(),S=(0,w.Z)(b,2),I=S[0],N=S[1],C=z().showErrorMessage,O=ke(),k=function(e,t,a,l){var r=e.findIndex((function(e){return e.key===t}));-1!==r?e[r]={key:t,value:a,required:e[r].required||!1,kind:l}:e=e.concat({key:t,value:a,required:!1,kind:l}),n(e),c(""),m(""),f("text"),N(null)};return r.createElement("section",{style:{width:"auto"}},h&&r.createElement(F.Z,{style:{width:"100%"}}),r.createElement(B.Z,{className:a.root},r.createElement(za.Z,{className:a.input,placeholder:"Key",value:o,onChange:function(e){return c(e.target.value)}}),r.createElement(K.Z,{className:a.divider,orientation:"vertical"}),r.createElement(Ka.Z,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:g,onChange:function(e){return f(e.target.value)},label:"Age"},r.createElement(Ha.Z,{value:"text"},"Text"),r.createElement(Ha.Z,{value:"file"},"File")),"text"===g?r.createElement(za.Z,{className:a.input,placeholder:"Value",value:d,onChange:function(e){return m(e.target.value)}}):r.createElement(za.Z,{className:a.input,placeholder:"choose file",type:"file",onChange:function(e){return N(e.target.files[0])}}),r.createElement(L.Z,{color:"primary",className:a.iconButton,"aria-label":"directions",endIcon:r.createElement(Va.Z,null),onClick:function(){o&&("file"===g?(Z(!0),function(e,t){var n,a="inventory",l=new FormData;return l.append("files",e,e.name),l.append("uploadedBy",t),l.append("uploadedFor",t),l.append("resourceOwner",t),l.append("data","{}"),(n=l,T("/osm/v1/resource/".concat("inventory"),{method:"POST",body:n})).then((function(e){return e.resourceData[0].resourceId})).then((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"v1",a=window.config,l="".concat(a.protocol,"://").concat(a.server,":").concat(a.port,"/api"),r="".concat(l,"/osm/").concat(n,"/resource/").concat(e,"/").concat(t);return new URL(r).toString()}(a,e)})).catch((function(e){return C(e)})).finally((function(){return Z(!1)}))}(I,O.requestedPrincipalId).then((function(e){return k((0,x.Z)(t),o,e,g)})).then((function(){return Z(!1)}))):k((0,x.Z)(t),o,d,g))},disabled:!o||!(d||I)})),r.createElement(Qa,{data:t,onRemove:function(e){var a=t.filter((function(t){return t.key!==e}));n(a)},onEdit:function(e){var n=t.find((function(t){return t.key===e}));c(e),f(n.kind),"text"===n.kind&&m(n.value)}}))},Ga=function(e){var t=e.state,n=e.from,a=e.to,l=e.paymentInfo,i=void 0!==l&&l,o=e.itemList,c=e.dispatch,s=Da(),u=r.useState(!1),d=(0,w.Z)(u,2),m=d[0],p=d[1],v=r.useState(null),g=(0,w.Z)(v,2),f=g[0],E=g[1],y=r.useState(!1),h=(0,w.Z)(y,2),Z=h[0],b=h[1],S=(0,U.useTranslation)().t,I=r.useState(!1),N=(0,w.Z)(I,2),C=N[0],O=N[1],T=r.useState([]),k=(0,w.Z)(T,2),P=k[0],D=k[1];function B(e){var n;return null===(n=function(e,t){var n={currency:"",price:0,variablePrice:!1};return e.forEach((function(e){var a=e.variants.find((function(e){return e.productSKU===t}));a&&(n=a.unitPrice)})),n}(t.products,e))||void 0===n?void 0:n.price}function F(){if(o&&o.length>0)return o;var e,n,a=t.selectedByRange,l=t.stockRows,r=t.serials,i=a.concat(l).map((function(e){var t;return{productSKU:e.productSKU,quantity:parseInt(e.quantity,10),boxId:e.boxId,price:null===(t=e.unitPrice)||void 0===t?void 0:t.price}})),c=Object.keys(r).map((function(e){return Object.keys(r[e]).map((function(t){return{productSKU:e,quantity:r[e][t].length,boxId:t,price:B(e)}}))})).flat(),s=(e=t.services.topups,n=(0,Pe.groupBy)(e,"productSKU"),Object.keys(n).map((function(e){return{productSKU:e,quantity:n[e].length,boxId:"-",reserverType:"TOPUP",amount:n[e].reduce((function(e,t){return e+parseInt(t.amount)}),0)}})));return[].concat((0,x.Z)(i),(0,x.Z)(c),(0,x.Z)(s))}function M(e){if(e.amount)return e.amount;var t=B(e.productSKU);return Number(t)*Number(e.quantity)}return r.useEffect((function(){var e,n,a,l=null===(e=window)||void 0===e||null===(n=e.config)||void 0===n||null===(a=n.order)||void 0===a?void 0:a.addtionalInformation;l&&(b(l.enabled&&l.fields.map((function(e){return e.orderType})).flat().includes(t.orderType)),D(l.fields.filter((function(e){var n;return null===(n=e.orderType)||void 0===n?void 0:n.includes(t.orderType)}))||[]))}),[t.orderType]),r.useEffect((function(){var e,t,l,r;i&&(p(!0),(t=o&&o.length>0?o:F(),l=null==t?void 0:t.map((function(e){return{itemCount:e.quantity,productSku:e.productSKU,receiver:a.resellerId,receiverWallet:"",requestedAmount:M(e),sender:n.resellerId,senderWallet:""}})),r=(0,Pe.map)((0,Pe.groupBy)(l,"productSku"),(function(e,t){return(0,Pe.reduce)(e,(function(e,t){for(var n in t)e[n]="itemCount"===n||"requestedAmount"===n?(e[n]||0)+t[n]:t[n];return e}),{productSku:t})})),e={products:(0,x.Z)(r),profileId:"",referenceNumber:""},de("/v2/calculate-pricing",{method:"POST",body:e})).then((function(e){if(1!==e.resultCode&&0===e.resultCode){var t,n=null===(t=e.products.map((function(e){var t;return{discount:null===(t=e.transactionRows.find((function(e){return"DISCOUNT"===e.tag})))||void 0===t?void 0:t.amount}})))||void 0===t?void 0:t.filter((function(e){return void 0!==e.discount})).reduce((function(e,t){return e+t.discount}),0);E(n)}})).catch((function(e){})).finally((function(){return p(!1)})))}),[o,i]),r.createElement(r.Fragment,null,r.createElement(ka.Z,{className:s.backdrop,open:m},r.createElement(an.Z,{color:"inherit"})),Z&&r.createElement("section",{style:{overflow:"hidden",marginBottom:15}},r.createElement(L.Z,{variant:"outlined",color:"primary",onClick:function(){return O(!0)},style:{float:"right"}},S("AddtionalInfo","Addtional information"))),C&&r.createElement(r.Fragment,null,r.createElement(Jn.Z,{open:!0,scroll:"body",fullWidth:!0,maxWidth:"sm",disableBackdropClick:!0},r.createElement(Gn.Z,{id:"scroll-dialog-title"},S("additionalInformation","Additional Information")),r.createElement(Yn.Z,{dividers:!0},r.createElement(Ya,{data:P,setData:D})),r.createElement(Qn.Z,null,r.createElement(L.Z,{onClick:function(){return O(!1)}},S("cancel","Cancel")),r.createElement(L.Z,{color:"primary",variant:"contained",onClick:function(){if(c){var e=t.additionalFields.filter((function(e){return"invoiceAmount"===e.key})).concat((0,x.Z)(P));c({type:"set_addtional_info",payload:e})}O(!1)}},S("submit","Submit"))))),r.createElement("section",{style:{marginTop:10}},r.createElement(R.Z,{container:!0,justify:"space-between"},r.createElement(Ba,{source:n}),r.createElement(La,{destination:a}))),r.createElement("div",{className:s.stepper},r.createElement(Ua,{itemRows:F(),taxes:t.taxes,products:t.products,paymentInfo:i,discount:f,dispatch:c})))},$a=function(){function e(t){var n,a=this,l=t.state;(0,Fa.Z)(this,e),(0,Fe.Z)(this,"seller",void 0),(0,Fe.Z)(this,"buyer",void 0),(0,Fe.Z)(this,"state",void 0),(0,Fe.Z)(this,"paymentMode",void 0),(0,Fe.Z)(this,"paymentAgreement",void 0),(0,Fe.Z)(this,"receivers",void 0),(0,Fe.Z)(this,"items",void 0),(0,Fe.Z)(this,"returnType",""),(0,Fe.Z)(this,"linkedOrderIds",[]),(0,Fe.Z)(this,"returnReason",""),(0,Fe.Z)(this,"orderType",void 0),(0,Fe.Z)(this,"tripId",void 0),(0,Fe.Z)(this,"sender",void 0),(0,Fe.Z)(this,"potentialReceivers",[]),(0,Fe.Z)(this,"deliveryPaths",void 0),(0,Fe.Z)(this,"additionalFields",[]),(0,Fe.Z)(this,"itemsByRange",(function(e,t){return Object.keys(e).map((function(n){var a=e[n];return Object.keys(a).map((function(a){var l=e[n][a];return{productSku:l.productSKU,quantity:null,reserveType:"RANGE",serials:[],batchIds:[],ranges:[{batchId:l.boxId,startSerial:l.startSerial.toString(),endSerial:l.endSerial.toString()}],seller:t}}))})).flat()})),(0,Fe.Z)(this,"itemsByBatch",(function(e,t){return e.map((function(e){return{productSku:e.productSKU,quantity:1,reserveType:"BATCH",serials:[],batchIds:[e.boxId],ranges:[],seller:t}}))})),(0,Fe.Z)(this,"itemsBySerial",(function(e,t){return Object.keys(e).map((function(n){return Object.keys(e[n]).map((function(a){return{productSku:n,quantity:e[n][a].length,reserveType:"SERIAL",serials:e[n][a],batchIds:[],ranges:[],seller:t,data:{}}}))})).flat()})),(0,Fe.Z)(this,"itemsByQuantity",(function(e,t){return e.map((function(e){return{productSku:e.productSKU,quantity:parseInt(e.quantity,10),reserveType:"SERIAL",serials:[],batchIds:[],ranges:[],seller:t,data:{}}}))})),(0,Fe.Z)(this,"getToptups",(function(){return(a.state.services.topups||void 0).map((function(e){return{productSku:e.productSKU,quantity:1,seller:null,data:{SUBSCRIBERMSISDN:e.SUBSCRIBERMSISDN,accountTypeId:e.accountTypeId,amount:e.amount}}}))})),(0,Fe.Z)(this,"getSelectedItems",(function(e,t){return[].concat((0,x.Z)(a.itemsByRange(e.serialRangeList,t)),(0,x.Z)(a.itemsByBatch(e.stockRows,t)),(0,x.Z)(a.itemsBySerial(e.serials,t)),(0,x.Z)(a.itemsByQuantity(e.stockQuantity,t)),(0,x.Z)(a.getToptups()))})),this.state=l,this.additionalFields=(n=l.additionalFields).length>0?n.map((function(e){return{name:e.key,value:e.value}})):[]}return(0,Ma.Z)(e,[{key:"requestParams",get:function(){return{buyer:this.buyer,seller:this.seller,sender:this.sender,potentialReceivers:this.potentialReceivers,deliveryPaths:this.deliveryPaths,items:this.items||this.getSelectedItems(this.state,this.seller),orderType:this.orderType||this.state.orderType,paymentAgreement:this.state.paymentAgreement||this.paymentAgreement,paymentMode:this.state.paymentMode||this.paymentMode,receivers:this.receivers,linkedOrderIds:this.linkedOrderIds||[],returnType:this.returnType,tripId:this.tripId,returnReason:this.returnReason||"",additionalFields:this.additionalFields}}}]),e}();var Xa=(0,j.Z)((function(e){return(0,W.Z)({element:{margin:e.spacing(1)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}})})),el=function(e){var t=e.state,n=e.dispatch;return r.createElement(qn,{state:t,dispatch:n})},tl=function(e){var t,n=e.dispatch,a=e.state;return r.createElement(Ta,{resellerId:null==a||null===(t=a.seller)||void 0===t?void 0:t.resellerId,state:a,dispatch:n})};const nl=function(e){var t=e.state,n=e.dispatch,a=e.resellerIds,l=e.resellerInfo,i=e.tripId,c=Xa(),s=ke(),u=z(),d=u.showSuccessMessage,m=u.showErrorMessage,p=r.useState(!1),v=(0,w.Z)(p,2),g=(v[0],v[1]),f=r.useState(),E=(0,w.Z)(f,2),y=(E[0],E[1]),h=r.useState(!1),Z=(0,w.Z)(h,2),b=(Z[0],Z[1]),S=(0,o.useHistory)();function I(e){var n,a;switch(e){case 0:return 0===(null==t||null===(n=t.pickupLocation)||void 0===n?void 0:n.length);case 1:return!function(e){return ua(e)>0||!1}(t);case 2:return!(null!==(a=t.buyer)&&void 0!==a&&a.resellerId);case 3:return 0===t.groups.length;default:return!1}}function N(){return g(!0),b(!0),function(e){var t;if(!0===(null===(t=window.config)||void 0===t?void 0:t.order).raiseOrderApplicationJson)return T("/oms/v2/orders",{method:"POST",body:e},!1);var n={method:"POST",body:{data:JSON.stringify(e)}};return T("/oms/v2/orders",n,!0)}(function(e,t,n,a){var l,r,i,o=(null===(l=window.config)||void 0===l||null===(r=l.order)||void 0===r?void 0:r.pisoOrderRouteInfoAdditionalField)||"routeInfo",c={id:null==e||null===(i=e.seller)||void 0===i?void 0:i.resellerId,additionalFields:[]},s={id:null==n?void 0:n.resellerId,additionalFields:[]},u={name:o,value:e.routeInfo.join(",")},d=[];t.map((function(e){d.push({id:e,additionalFields:[]})}));var m=new $a({state:e});return m.buyer=s,m.seller=c,m.sender={id:e.pickupLocation[0].resellerId,additionalFields:[]},m.receivers=[{id:n.resellerId,additionalFields:[]}],m.deliveryPaths=[{pickupPoint:{id:e.pickupLocation[0].resellerId,additionalFields:[]},dropPoint:d[0],reconciliationPoint:null,agentType:function(){if(e.deliveryOptions){if("delivery"===(null==e?void 0:e.deliveryOptions.mode))return"SELLER";if("collection"===(null==e?void 0:e.deliveryOptions.mode))return"BUYER";if("thirdParty"===(null==e?void 0:e.deliveryOptions.mode))return"THIRD_PARTY"}return null}()}],m.additionalFields=[u],m.potentialReceivers=[].concat(d),m.tripId=a,m.orderType="PISO",m.paymentAgreement="NA",m.paymentMode="NO_PAYMENT_REQD",m.requestParams}(t,a,l,i)).then((function(e){0===e.resultCode?(d(e),y({message:e.resultMessage,kind:"success"}),b(!1),S.push("/home/trip/manualtrips/".concat(i,"/task/"))):(g(!1),m(e))})).catch((function(e){g(!1),m(e)}))}r.useEffect((function(){n({type:"seller_select",payload:{resellerId:null==s?void 0:s.requestedPrincipalId,resellerMSISDN:null==s?void 0:s.targetMSISDN,resellerName:null==s?void 0:s.juridicalName}})}),[s]);var x,C,O={Control:function(e){var t=e.goNext,n=e.goPrev,a=e.disableFirst,l=e.disableLast,i=e.view;return function(e,t,n,a,l,i,o,c){return r.createElement(B.Z,null,r.createElement(A.SeamlessButton,{onClick:e,disabled:t,className:n.element,color:"primary",variant:"contained"},"Previous"),r.createElement(A.SeamlessButton,{className:n.element,onClick:a,disabled:l||i(o),color:"primary",variant:"contained"},"Next"),l&&r.createElement(A.SeamlessButton,{className:n.element,onClick:c,color:"primary",variant:"contained"},"Submit"))}(n,a,c,t,l,I,i,N)}};return r.createElement("div",null,r.createElement(A.SeamlessStepper,{steps:[{label:"Pickup Location"},{label:"Select Stock"},{label:"Order Details"}],components:O},r.createElement(el,{dispatch:n,state:t}),r.createElement(tl,{dispatch:n,state:t}),r.createElement(Ga,{state:t,from:(C=null==t?void 0:t.seller,{resellerId:null==C?void 0:C.resellerId,resellerMSISDN:null==C?void 0:C.resellerMSISDN,resellerName:null==C?void 0:C.resellerName}),to:(x=l,{resellerId:null==x?void 0:x.resellerId,resellerMSISDN:null==x?void 0:x.resellerMSISDN,resellerName:null==x?void 0:x.resellerName}),itemList:t.stockQuantity.map((function(e){var t;return{productSKU:null==e?void 0:e.productSKU,quantity:null==e?void 0:e.quantity,price:null==e||null===(t=e.unitPrice)||void 0===t?void 0:t.price}})),dispatch:n})))};var al=n(5927),ll=(0,j.Z)((function(e){return(0,W.Z)({elements:{marginRight:e.spacing(2)},dropDownTransperant:{"& .MuiSelect-select.MuiSelect-select":{backgroundColor:"transparent"}},form:{display:"flex",flexDirection:"column",flexWrap:"wrap"},input:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},skeleton:{height:80},fullWidth:{width:"100%"},fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:18},rowSpacing:{marginBottom:e.spacing(.5)},btnSpacing:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},orderBox:{border:"1px solid #EDEDED",margin:"10px",width:"100%",borderRadius:"10px",padding:"10px",background:"#F7F7F7"},button:{width:300}})}));const rl=function(e){var t=e.data,n=e.onFormSubmit,a=e.onReset,l=ll(),i=(0,o.useParams)(),c=i.id,s=i.agentId,u=i.triggerDate,d=(0,U.useTranslation)().t,m=r.useState(""),p=(0,w.Z)(m,2),v=p[0],g=p[1],f=r.useState([]),E=(0,w.Z)(f,2),y=E[0],h=E[1],Z=r.useState(),b=(0,w.Z)(Z,2),S=b[0],I=b[1],N=r.useState(),x=(0,w.Z)(N,2),C=x[0],O=x[1],k=r.useState({}),P=(0,w.Z)(k,2),D=P[0],F=P[1],j=r.useState({}),W=(0,w.Z)(j,2),q=W[0],z=W[1],V=r.useReducer(al.Z,al.E),K=(0,w.Z)(V,2),J=K[0],Q=K[1],Y=(0,kn.cI)({mode:"onSubmit",defaultValues:t});r.useEffect((function(){s&&function(e){return T("/dms/auth/getResellerInfo",{method:"POST",body:e})}({dealerID:{id:s,type:"RESELLERID"},fetchAccountBalanceInformation:!0}).then((function(e){var t,n,a,l=null===(t=e.resellerInfo)||void 0===t||null===(n=t.resellerData)||void 0===n?void 0:n.parentResellerId;I(l),O(null===(a=e.resellerInfo)||void 0===a?void 0:a.resellerData)})).catch((function(e){}))}),[s]);var G=Y.register,$=Y.getValues,X=(Y.errors,Y.control),ee=Y.handleSubmit,te=Y.reset,ne=(Y.setError,Y.clearErrors,(0,kn.Dq)({name:"data",control:X}));return ne.fields,ne.append,ne.remove,r.useEffect((function(){te(t)}),[t]),$(),r.createElement(B.Z,null,r.createElement(A.SeamlessContainer,{title:d("tripTaskFormTitle"),description:d("tripTaskFormDescription")},r.createElement(L.Z,{style:{visibility:"hidden"}}),r.createElement(R.Z,{container:!0,className:(0,_.default)(l.rowSpacing),spacing:3},r.createElement(R.Z,{item:!0,xs:12,sm:3},r.createElement(kn.Qr,{control:X,name:"agentId",ref:G,defaultValue:s,value:s,render:function(e){return(0,H.Z)({},e),r.createElement(M.Z,{className:(0,_.default)(l.fieldHeading)},d("agentId")," : ",s)}}))),r.createElement(B.Z,{display:"flex",flexDirection:"row"},r.createElement(B.Z,{display:"flex",flexDirection:"column",width:"80%"},r.createElement(B.Z,{mb:3,display:"flex",flexDirection:"row",justifyContent:"space-between"},r.createElement(kn.Qr,{control:X,name:"",render:function(e){var t=e.onChange;return(0,Re.Z)(e,["onChange"]),r.createElement(Pn,null,(function(e){var n=e.taskTypes,a=e.loading;return r.createElement(r.Fragment,null,a?r.createElement(Rn.Z,null):r.createElement(lt.ZP,{fullWidth:!0,id:"task-type-drop-down",options:n,getOptionLabel:function(e){return e.name},onChange:function(e,n){var a=n.value;t(n),g(a)},renderTags:function(e,t){return e.map((function(e,n){return r.createElement(ye.Z,(0,H.Z)({label:e.name,color:"primary"},t({index:n})))}))},renderOption:function(e){return e.value},renderInput:function(e){return r.createElement(Ae.Z,(0,H.Z)({},e,{variant:"outlined",label:d("selectTaskType"),placeholder:d("selectTaskType"),name:"taskType-children-list",id:"taskType-children-list"}))},className:l.elements}))}))}}),r.createElement(kn.Qr,{control:X,name:"",render:function(e){var t=e.onChange;return(0,Re.Z)(e,["onChange"]),r.createElement(Dn,{agentId:s},(function(e){var n=e.posList;return e.loading?r.createElement(M.Z,{component:"div",variant:"h3"},r.createElement(Rn.Z,null),r.createElement(Rn.Z,{height:60})):r.createElement(lt.ZP,{multiple:!0,style:{width:800},id:"manualtrip-resellers-autocomplete",options:n.map((function(e){return e})),getOptionLabel:function(e){return e.userId},onChange:function(e,n){var a,l=n.map((function(e){return e.userId}));t(n),h(l),a=n.map((function(e){return e.userId})),Q({type:"route_info_selected",payload:a})},defaultValue:n,renderTags:function(e,t){return e.map((function(e,n){return r.createElement(ye.Z,(0,H.Z)({label:e.userId,color:"primary"},t({index:n})))}))},renderOption:function(e,t){var n=t.selected;return r.createElement(r.Fragment,null,r.createElement(Tn.Z,{icon:r.createElement(hn.Z,{color:"primary"},"check_box_outline_blank"),checkedIcon:r.createElement(hn.Z,{color:"secondary"},"check_box"),style:{marginRight:8},checked:n}),e.userId)},disableCloseOnSelect:!0,renderInput:function(e){return r.createElement(Ae.Z,(0,H.Z)({},e,{variant:"outlined",label:d("posList"),placeholder:d("posList"),name:"pos-children-list",id:"pos-children-list"}))},className:l.elements})}))}})))),"SURVEY_COLLECTION"==v&&r.createElement(B.Z,{display:"flex",flexDirection:"row"},r.createElement(B.Z,{display:"flex",flexDirection:"column",width:"100%"},r.createElement(R.Z,null,r.createElement(M.Z,{variant:"subtitle1",color:"primary",style:{marginBottom:20}},d("manualTripSurveyRequest")),r.createElement(Bn,{agentId:s,resellerIds:y},(function(e){var t=e.surveyDatas,n=e.loading;return z(t),r.createElement(r.Fragment,null,n?r.createElement(Rn.Z,null):t.map((function(e,n){return e.applicableSurveys.length>0&&r.createElement(r.Fragment,null,r.createElement(R.Z,{container:!0,key:n,className:(0,_.default)(l.rowSpacing,l.orderBox),spacing:3},r.createElement(R.Z,{item:!0,xs:12,sm:2},r.createElement(kn.Qr,{control:X,name:"posId",render:function(e){return(0,H.Z)({},e),r.createElement(M.Z,{className:(0,_.default)(l.fieldHeading)},t[n].surveye)}})),r.createElement(R.Z,{item:!0,xs:12,sm:2},r.createElement(M.Z,{className:(0,_.default)(l.fieldHeading)},d("surveyName"))),r.createElement(R.Z,{item:!0,xs:12,sm:2},r.createElement(kn.Qr,{control:X,name:"name",render:function(t){var a,i;return(0,H.Z)({},t),r.createElement(M.Z,{className:(0,_.default)(l.fieldHeading)},null===(a=e.applicableSurveys[n])||void 0===a||null===(i=a.survey)||void 0===i?void 0:i.surveyName)}})),r.createElement(R.Z,{item:!0,xs:12,sm:3},r.createElement(M.Z,{className:(0,_.default)(l.fieldHeading)},d("surveyType"))),r.createElement(R.Z,{item:!0,xs:12,sm:3},r.createElement(kn.Qr,{control:X,name:"title",render:function(t){var a,i,o;return(0,H.Z)({},t),r.createElement(M.Z,{className:(0,_.default)(l.fieldHeading)},null===(a=e.applicableSurveys[n])||void 0===a||null===(i=a.survey)||void 0===i||null===(o=i.surveyType)||void 0===o?void 0:o.surveyTypeName)}}))))})))}))))),"COLLECTION"==v&&r.createElement(B.Z,{display:"flex",flexDirection:"row"},r.createElement(B.Z,{display:"flex",flexDirection:"column",width:"100%"},r.createElement(R.Z,null,r.createElement(M.Z,{variant:"subtitle1",color:"primary",style:{marginBottom:20}},d("manualTripCollectionRequest")),r.createElement(Ln,{seller:S,resellerIds:y},(function(e){var t=e.collectionDatas,n=e.loading;return F(t),r.createElement(r.Fragment,null,n?r.createElement(Rn.Z,null):t.map((function(e,n){return r.createElement(R.Z,{container:!0,key:n,className:(0,_.default)(l.rowSpacing,l.orderBox),spacing:3},r.createElement(R.Z,{item:!0,xs:12,sm:2},r.createElement(kn.Qr,{control:X,name:"posId",render:function(e){var a;return(0,H.Z)({},e),r.createElement(M.Z,{className:(0,_.default)(l.fieldHeading)},null===(a=t[n])||void 0===a?void 0:a.buyer)}})),r.createElement(R.Z,{item:!0,xs:12,sm:2},r.createElement(M.Z,{className:(0,_.default)(l.fieldHeading)},d("amount"))),r.createElement(R.Z,{item:!0,xs:12,sm:2},r.createElement(kn.Qr,{control:X,name:"dueAmount",render:function(t){var n;return(0,H.Z)({},t),r.createElement(M.Z,{className:(0,_.default)(l.fieldHeading)},(null==e||null===(n=e.totalDue)||void 0===n?void 0:n.amount).toFixed(2))}})),r.createElement(R.Z,{item:!0,xs:12,sm:3},r.createElement(M.Z,{className:(0,_.default)(l.fieldHeading)},d("currency"))),r.createElement(R.Z,{item:!0,xs:12,sm:3},r.createElement(kn.Qr,{control:X,name:"currency",render:function(t){var n;return(0,H.Z)({},t),r.createElement(M.Z,{className:(0,_.default)(l.fieldHeading)},null==e||null===(n=e.totalDue)||void 0===n?void 0:n.currency)}})))})))}))))),"Push Inventory Sales Order"==v&&r.createElement(B.Z,{display:"flex",flexDirection:"row"},r.createElement(B.Z,{display:"flex",flexDirection:"column",width:"100%"},r.createElement(R.Z,null,r.createElement(M.Z,{variant:"subtitle1",color:"primary",style:{marginBottom:20}},d("manualTripPISORequest")),r.createElement(nl,{state:J,dispatch:Q,resellerIds:y,resellerInfo:C,tripId:c}))))),r.createElement(R.Z,{item:!0,className:(0,_.default)(l.input)},r.createElement(A.SeamlessButton,{className:(0,_.default)(l.btnSpacing),onClick:ee((function(e){var t=[];if(s&&c&&(e.agentId=s,e.tripId=c,e.triggerDate=u),t=e,"SURVEY_COLLECTION"==v&&q.length>0){var a=[];q.map((function(e,t){var n,l,r,i,o,c,s,u,d,m,p,v,g={posIdList:[]};g.posIdList.push(null==e?void 0:e.surveye),g.surveyData={},g.surveyData.name=null!=e&&null!==(n=e.applicableSurveys[t])&&void 0!==n&&null!==(l=n.survey)&&void 0!==l&&l.surveyName?null==e||null===(r=e.applicableSurveys[t])||void 0===r||null===(i=r.survey)||void 0===i?void 0:i.surveyName:"",g.surveyData.title=null!=e&&null!==(o=e.applicableSurveys[t])&&void 0!==o&&null!==(c=o.survey)&&void 0!==c&&null!==(s=c.surveyType)&&void 0!==s&&s.surveyTypeName?null==e||null===(u=e.applicableSurveys[t])||void 0===u||null===(d=u.survey)||void 0===d||null===(m=d.surveyType)||void 0===m?void 0:m.surveyTypeName:"",g.surveyData.isSurveyMandatory=!0,g.surveyData.id=null==e||null===(p=e.applicableSurveys[t])||void 0===p||null===(v=p.survey)||void 0===v?void 0:v.id,a.push(g)}));var l=[{surveyInfo:a}];t.taskList=l}if("COLLECTION"==v&&D.length>0){var r=[];D.map((function(e){var t,n,a={};a.posId=e.buyer,a.dueAmount=null===(t=e.totalDue)||void 0===t?void 0:t.amount,a.currency=null===(n=e.totalDue)||void 0===n?void 0:n.currency,r.push(a)}));var i=[{collectionInfo:r}];t.warehouseId=S,t.taskList=i}n&&n(t)})),color:"primary",variant:"contained",disabled:"Push Inventory Sales Order"==v},d("submitButton")),r.createElement(A.SeamlessButton,{onClick:function(){return function(e){te(e),a&&a()}(t)},className:(0,_.default)(l.btnSpacing),color:"primary",variant:"outlined"},d("resetButton"))))};var il=(0,j.Z)((function(e){return(0,W.Z)({fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{textTransform:"capitalize",fontSize:14}})}));const ol=function(e){var t=e.headingProps,n=void 0===t?{xs:12,sm:3}:t,a=e.valueProps,l=void 0===a?{xs:12,sm:3}:a,i=e.title,o=e.value,c=((0,U.useTranslation)().t,il());return o&&"NULL"!=o&&"Null"!=o?r.createElement(r.Fragment,null,r.createElement(R.Z,(0,H.Z)({item:!0},n),r.createElement(M.Z,{className:c.fieldHeading},i)),r.createElement(R.Z,(0,H.Z)({item:!0},l),r.createElement(M.Z,{className:c.fieldValue},o))):null};var cl=(0,j.Z)((function(e){return(0,W.Z)({spacingTop:{marginTop:e.spacing(3)},spacingBottom:{marginBottom:e.spacing(1)},wrapper:{padding:e.spacing(2)},titleSpacing:{marginBottom:e.spacing(1)},subTitleSpacing:{marginBottom:e.spacing(1)},dividerSpacing:{marginBottom:e.spacing(3)},fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{textTransform:"capitalize",fontSize:14},rowSpacing:{marginBottom:e.spacing(.5)},stats:{margin:e.spacing(1)},fullWidth:{width:"100%"},innerTitle:{color:e.palette.secondary.light},displayBlock:{display:"block"},orderBox:{border:"1px solid #EDEDED",margin:"10px",width:"100%",borderRadius:"10px",padding:"10px",background:"#F7F7F7"}})})),sl=(0,V.Z)((function(e){return(0,W.Z)({root:{backgroundColor:e.palette.background.default,borderBottom:"1px solid rgba(0, 0, 0, .125)",marginBottom:-1,minHeight:56,"&$expanded":{minHeight:56}},content:{"&$expanded":{margin:"12px 0"}},expanded:{}})}))(ee.Z);const ul=function(e){var t,n,a,l,i,o,c,s,u,d,m,p,v,g,f,E,y,h,Z,b,S,I,N,x,C,O,T,k,P,D,B,L,F,j,W,A,q,z,V,H,J,Q,Y,G,$,ee,ae,le,re,ie,oe,ce,se,ue,de,me,pe,ve,ge,fe,Ee,ye,he,Ze,be,Se,Ie,Ne,xe,we,Ce=e.tripTaskData,Oe=(e.loading,cl()),Te=Ce.agentId,ke=void 0===Te?"":Te,Pe=Ce.triggerDate,De=void 0===Pe?"":Pe,Be=Ce.data,Le=void 0===Be?"":Be,Re=Ce.destinationId,Fe=void 0===Re?"":Re,Me=Ce.documentId,je=void 0===Me?"":Me,We=Ce.externalTaskId,Ae=void 0===We?"":We,qe=Ce.taskId,Ue=void 0===qe?0:qe,ze=Ce.lastModifiedDate,_e=void 0===ze?"":ze,Ve=Ce.parentAgentId,Ke=void 0===Ve?"":Ve,He=Ce.status,Je=void 0===He?"":He,Qe=Ce.taskType,Ye=void 0===Qe?"":Qe,Ge=(0,U.useTranslation)().t,$e=r.useState("panel1"),Xe=(0,w.Z)($e,2),et=Xe[0],tt=Xe[1],nt=function(e){return function(t,n){tt(!!n&&e)}},at=Le&&JSON.parse(Le),lt=function(e,t){return t=t||"","".concat(e=e||0," ").concat(t)},rt=function(e){var t=e.replace(/([a-z])([A-Z])/g,"$1 $2");return(t=t.split("_").join(" "))&&t[0].toUpperCase()+t.slice(1)};return r.createElement(R.Z,{container:!0},r.createElement(X.Z,{square:!0,expanded:"panel1"===et,onChange:nt("panel1"),className:Oe.fullWidth},r.createElement(sl,{"aria-controls":"panel1d-content",id:"panel1d-header",expandIcon:r.createElement(ne.Z,null)},r.createElement(M.Z,{variant:"subtitle1",color:"primary"},Ge("taskDetails"))),r.createElement(te.Z,{className:Oe.displayBlock},r.createElement(R.Z,{container:!0,spacing:3,className:Oe.rowSpacing},r.createElement(ol,{title:Ge("taskId"),value:Ue}),r.createElement(ol,{title:Ge("agentId"),value:ke}),r.createElement(ol,{title:Ge("parentAgentId"),value:Ke}),r.createElement(ol,{title:Ge("createdDate"),value:De}),r.createElement(ol,{title:Ge("destinationId"),value:Fe}),r.createElement(ol,{title:Ge("lastModifiedDate"),value:_e}),r.createElement(ol,{title:Ge("status"),value:Je}),r.createElement(ol,{title:Ge("taskType"),value:Ye})),r.createElement(R.Z,{container:!0,spacing:3,className:Oe.rowSpacing},r.createElement(ol,{title:Ge("documentId"),value:je,valueProps:{xs:12,sm:9}}),r.createElement(ol,{title:Ge("externalId"),value:Ae,valueProps:{xs:12,sm:9}})))),(null==at?void 0:at.posInfo)&&r.createElement(X.Z,{square:!0,className:Oe.fullWidth},r.createElement(sl,{"aria-controls":"panel3d-content",id:"panel3d-header",expandIcon:r.createElement(ne.Z,null)},r.createElement(M.Z,{variant:"subtitle1",color:"primary"},Ge("posInfo"))),r.createElement(te.Z,{className:Oe.displayBlock},r.createElement(r.Fragment,null,r.createElement(R.Z,{container:!0,spacing:3,className:Oe.rowSpacing},r.createElement(ol,{title:Ge("parentResellerId"),value:null==at||null===(t=at.posInfo[0])||void 0===t?void 0:t.parentResellerId}),r.createElement(ol,{title:Ge("parentResellerName"),value:null==at||null===(n=at.posInfo[0])||void 0===n?void 0:n.parentResellerName}),r.createElement(ol,{title:Ge("resellerId"),value:null==at||null===(a=at.posInfo[0])||void 0===a?void 0:a.resellerId}),r.createElement(ol,{title:Ge("resellerName"),value:null==at||null===(l=at.posInfo[0])||void 0===l?void 0:l.resellerName}),r.createElement(ol,{title:Ge("resellerMSISDN"),value:null==at||null===(i=at.posInfo[0])||void 0===i?void 0:i.resellerMSISDN}),r.createElement(ol,{title:Ge("status"),value:null==at||null===(o=at.posInfo[0])||void 0===o?void 0:o.status}),r.createElement(ol,{title:Ge("resellerTypeId"),value:null==at||null===(c=at.posInfo[0])||void 0===c?void 0:c.resellerTypeId}),r.createElement(ol,{title:Ge("resellerTypeName"),value:null==at||null===(s=at.posInfo[0])||void 0===s?void 0:s.resellerTypeName}),r.createElement(ol,{title:Ge("resellerPath"),value:null==at||null===(u=at.posInfo[0])||void 0===u?void 0:u.resellerPath,valueProps:{xs:12,sm:9}}),(null==at||null===(d=at.posInfo[0])||void 0===d?void 0:d.additionalFields)&&(null==at||null===(m=at.posInfo[0])||void 0===m?void 0:m.additionalFields.map((function(e,t){return r.createElement(ol,{key:t,title:Ge(e.name,rt(e.name)),value:e.value})}))),(null==at||null===(p=at.posInfo[0])||void 0===p?void 0:p.additionalKYCFields)&&(null==at||null===(v=at.posInfo[0])||void 0===v?void 0:v.additionalKYCFields.map((function(e,t){return r.createElement(ol,{key:t,title:Ge(e.name,rt(e.name)),value:e.value})})))),(null==at||null===(g=at.posInfo[0])||void 0===g?void 0:g.address)&&r.createElement(r.Fragment,null,r.createElement(R.Z,{container:!0,spacing:3,className:Oe.spacingBottom},r.createElement(R.Z,{item:!0,xs:4},r.createElement(M.Z,{variant:"subtitle2",className:Oe.innerTitle},Ge("address")))),r.createElement(R.Z,{container:!0,spacing:3,className:Oe.rowSpacing},r.createElement(ol,{title:Ge("street"),value:null==at||null===(f=at.posInfo[0])||void 0===f||null===(E=f.address)||void 0===E?void 0:E.street}),r.createElement(ol,{title:Ge("zip"),value:null==at||null===(y=at.posInfo[0])||void 0===y||null===(h=y.address)||void 0===h?void 0:h.zip}),r.createElement(ol,{title:Ge("city"),value:null==at||null===(Z=at.posInfo[0])||void 0===Z||null===(b=Z.address)||void 0===b?void 0:b.city}),r.createElement(ol,{title:Ge("country"),value:null==at||null===(S=at.posInfo[0])||void 0===S||null===(I=S.address)||void 0===I?void 0:I.country}),r.createElement(ol,{title:Ge("phone"),value:null==at||null===(N=at.posInfo[0])||void 0===N||null===(x=N.address)||void 0===x?void 0:x.phone}),r.createElement(ol,{title:Ge("fax"),value:null==at||null===(C=at.posInfo[0])||void 0===C||null===(O=C.address)||void 0===O?void 0:O.fax}),r.createElement(ol,{title:Ge("homepage"),value:null==at||null===(T=at.posInfo[0])||void 0===T||null===(k=T.address)||void 0===k?void 0:k.homepage}),r.createElement(ol,{title:Ge("email"),value:null==at||null===(P=at.posInfo[0])||void 0===P||null===(D=P.address)||void 0===D?void 0:D.email})))))),at.surveyInfo&&r.createElement(X.Z,{square:!0,className:Oe.fullWidth},r.createElement(sl,{"aria-controls":"panel3d-content",id:"panel3d-header",expandIcon:r.createElement(ne.Z,null)},r.createElement(M.Z,{variant:"subtitle1",color:"primary"},Ge("surveyInfo"))),r.createElement(te.Z,{className:Oe.displayBlock},r.createElement(r.Fragment,null,r.createElement(R.Z,{container:!0,spacing:3,className:Oe.rowSpacing},r.createElement(ol,{title:Ge("name"),value:null===(B=at.surveyInfo)||void 0===B?void 0:B.name}),r.createElement(ol,{title:Ge("title"),value:null===(L=at.surveyInfo)||void 0===L?void 0:L.title}))))),at.collectionInfo&&r.createElement(X.Z,{square:!0,className:Oe.fullWidth},r.createElement(sl,{"aria-controls":"panel3d-content",id:"panel3d-header",expandIcon:r.createElement(ne.Z,null)},r.createElement(M.Z,{variant:"subtitle1",color:"primary"},Ge("collectionInfo"))),r.createElement(te.Z,{className:Oe.displayBlock},r.createElement(r.Fragment,null,r.createElement(R.Z,{container:!0,spacing:3,className:Oe.rowSpacing},r.createElement(ol,{title:Ge("dueAmount"),value:null===(F=at.collectionInfo)||void 0===F?void 0:F.dueAmount}),r.createElement(ol,{title:Ge("dueDate"),value:null===(j=at.collectionInfo)||void 0===j?void 0:j.dueDate}))))),(null==at?void 0:at.warehouseInfo)&&r.createElement(X.Z,{square:!0,expanded:"panel4"===et,onChange:nt("panel4"),className:Oe.fullWidth},r.createElement(sl,{"aria-controls":"panel4d-content",id:"panel4d-header",expandIcon:r.createElement(ne.Z,null)},r.createElement(M.Z,{variant:"subtitle1",color:"primary"},Ge("wareHouseInfo"))),r.createElement(te.Z,{className:Oe.displayBlock},r.createElement(r.Fragment,null,r.createElement(R.Z,{container:!0,spacing:3,className:Oe.rowSpacing},r.createElement(ol,{title:Ge("parentResellerId"),value:null===(W=at.warehouseInfo[0])||void 0===W?void 0:W.parentResellerId}),r.createElement(ol,{title:Ge("parentResellerName"),value:null===(A=at.warehouseInfo[0])||void 0===A?void 0:A.parentResellerName}),r.createElement(ol,{title:Ge("resellerId"),value:null===(q=at.warehouseInfo[0])||void 0===q?void 0:q.resellerId}),r.createElement(ol,{title:Ge("resellerName"),value:null===(z=at.warehouseInfo[0])||void 0===z?void 0:z.resellerName}),r.createElement(ol,{title:Ge("resellerMSISDN"),value:null===(V=at.warehouseInfo[0])||void 0===V?void 0:V.resellerMSISDN}),r.createElement(ol,{title:Ge("status"),value:null===(H=at.warehouseInfo[0])||void 0===H?void 0:H.status}),r.createElement(ol,{title:Ge("resellerTypeId"),value:null===(J=at.warehouseInfo[0])||void 0===J?void 0:J.resellerTypeId}),r.createElement(ol,{title:Ge("resellerTypeName"),value:null===(Q=at.warehouseInfo[0])||void 0===Q?void 0:Q.resellerTypeName}),r.createElement(ol,{title:Ge("resellerPath"),value:null===(Y=at.warehouseInfo[0])||void 0===Y?void 0:Y.resellerPath,valueProps:{xs:12,sm:9}}),(null===(G=at.warehouseInfo[0])||void 0===G?void 0:G.additionalFields)&&(null===($=at.warehouseInfo[0])||void 0===$?void 0:$.additionalFields.map((function(e,t){return r.createElement(ol,{key:t,title:Ge(e.name,rt(e.name)),value:e.value})}))),(null===(ee=at.warehouseInfo[0])||void 0===ee?void 0:ee.additionalKYCFields)&&(null===(ae=at.warehouseInfo[0])||void 0===ae?void 0:ae.additionalKYCFields.map((function(e,t){return r.createElement(ol,{key:t,title:Ge(e.name,rt(e.name)),value:e.value})})))),(null===(le=at.warehouseInfo[0])||void 0===le?void 0:le.address)&&r.createElement(r.Fragment,null,r.createElement(R.Z,{container:!0,spacing:3,className:Oe.spacingBottom},r.createElement(R.Z,{item:!0,xs:4},r.createElement(M.Z,{variant:"subtitle2",className:Oe.innerTitle},Ge("address")))),r.createElement(R.Z,{container:!0,spacing:3,className:Oe.rowSpacing},r.createElement(ol,{title:Ge("street"),value:null===(re=at.warehouseInfo[0])||void 0===re||null===(ie=re.address)||void 0===ie?void 0:ie.street}),r.createElement(ol,{title:Ge("zip"),value:null===(oe=at.warehouseInfo[0])||void 0===oe||null===(ce=oe.address)||void 0===ce?void 0:ce.zip}),r.createElement(ol,{title:Ge("city"),value:null===(se=at.warehouseInfo[0])||void 0===se||null===(ue=se.address)||void 0===ue?void 0:ue.city}),r.createElement(ol,{title:Ge("country"),value:null===(de=at.warehouseInfo[0])||void 0===de||null===(me=de.address)||void 0===me?void 0:me.country}),r.createElement(ol,{title:Ge("phone"),value:null===(pe=at.warehouseInfo[0])||void 0===pe||null===(ve=pe.address)||void 0===ve?void 0:ve.phone}),r.createElement(ol,{title:Ge("fax"),value:null===(ge=at.warehouseInfo[0])||void 0===ge||null===(fe=ge.address)||void 0===fe?void 0:fe.fax}),r.createElement(ol,{title:Ge("homepage"),value:null===(Ee=at.warehouseInfo[0])||void 0===Ee||null===(ye=Ee.address)||void 0===ye?void 0:ye.homepage}),r.createElement(ol,{title:Ge("email"),value:null===(he=at.warehouseInfo[0])||void 0===he||null===(Ze=he.address)||void 0===Ze?void 0:Ze.email})))))),(null==at?void 0:at.deliveryOrder)&&r.createElement(X.Z,{square:!0,expanded:"panel5"===et,onChange:nt("panel5"),className:Oe.fullWidth},r.createElement(sl,{"aria-controls":"panel5d-content",id:"panel5d-header",expandIcon:r.createElement(ne.Z,null)},r.createElement(M.Z,{variant:"subtitle1",color:"primary"},Ge("deliveryOrders"))),r.createElement(te.Z,{className:Oe.displayBlock},r.createElement(R.Z,{container:!0,spacing:3,className:(Oe.rowSpacing,Oe.orderBox)},r.createElement(r.Fragment,null,r.createElement(ol,{valueProps:{xs:12,sm:9},title:Ge("sellerId"),value:null==at?void 0:at.sellerId}),r.createElement(ol,{valueProps:{xs:12,sm:9},title:Ge("orderId"),value:null==at||null===(be=at.deliveryOrder)||void 0===be?void 0:be.orderId}),r.createElement(ol,{valueProps:{xs:12,sm:9},title:Ge("internalOrderId"),value:null==at||null===(Se=at.deliveryOrder)||void 0===Se?void 0:Se.internalOrderId}),(null==at||null===(Ie=at.deliveryOrder)||void 0===Ie?void 0:Ie.orderRows)&&(null==at||null===(Ne=at.deliveryOrder)||void 0===Ne?void 0:Ne.orderRows.length)>0&&r.createElement(r.Fragment,null,null==at||null===(xe=at.deliveryOrder)||void 0===xe||null===(we=xe.orderRows)||void 0===we?void 0:we.map((function(e,t){var n,a,l,i,o,c,s,u,d,m,p,v,g,f,E,y,h,Z,b,S,I,N,x,w,C,O,T,k;return r.createElement(r.Fragment,{key:t},e.inventoryList&&e.inventoryList.length>0&&r.createElement(R.Z,{item:!0,xs:12,className:Oe.spacingTop},r.createElement(M.Z,{variant:"subtitle2",className:Oe.innerTitle},Ge("inventoryList"))),e.inventoryList.map((function(e,t){return r.createElement(R.Z,{item:!0,xs:12,className:Oe.spacingTop,key:t},r.createElement(R.Z,{container:!0,spacing:3,className:Oe.rowSpacing},r.createElement(ol,{title:Ge("batchId"),value:null==e?void 0:e.batchId}),r.createElement(ol,{title:Ge("inventoryId"),value:null==e?void 0:e.inventoryId}),r.createElement(ol,{title:Ge("ownerHistory"),value:null==e?void 0:e.ownerHistory}),r.createElement(ol,{title:Ge("ownerId"),value:null==e?void 0:e.ownerId}),r.createElement(ol,{title:Ge("productSKU"),value:null==e?void 0:e.productSKU}),r.createElement(ol,{title:Ge("serialNo"),value:null==e?void 0:e.serialNo})),r.createElement(R.Z,{container:!0,spacing:3,className:Oe.rowSpacing},r.createElement(ol,{valueProps:{xs:12,sm:9},title:Ge("refNo"),value:null==e?void 0:e.refNo})),r.createElement(R.Z,{container:!0,spacing:3,className:Oe.spacingTop},r.createElement(K.Z,{className:Oe.spacingBottom})))})),e.product&&r.createElement(r.Fragment,null,r.createElement(R.Z,{item:!0,xs:12,className:Oe.spacingTop},r.createElement(M.Z,{variant:"subtitle2",color:"primary",className:(0,_.default)(Oe.innerTitle,Oe.spacingBottom)},Ge("product"))),r.createElement(R.Z,{item:!0,xs:12},r.createElement(R.Z,{container:!0,spacing:3,className:Oe.rowSpacing},r.createElement(ol,{title:Ge("calculatedTax"),value:lt(null===(n=e.product)||void 0===n||null===(a=n.calculatedTax)||void 0===a?void 0:a.amount,null===(l=e.product)||void 0===l||null===(i=l.calculatedTax)||void 0===i?void 0:i.currency)}),r.createElement(ol,{title:Ge("categoryPath"),value:null===(o=e.product)||void 0===o?void 0:o.categoryPath}),r.createElement(ol,{title:Ge("productCode"),value:null===(c=e.product)||void 0===c?void 0:c.productCode})),r.createElement(R.Z,{container:!0,spacing:3,className:Oe.rowSpacing},r.createElement(ol,{valueProps:{xs:12,sm:9},title:Ge("productDescription"),value:null===(s=e.product)||void 0===s?void 0:s.productDescription})),r.createElement(R.Z,{container:!0,spacing:3,className:Oe.rowSpacing},r.createElement(ol,{title:Ge("productId"),value:null===(u=e.product)||void 0===u?void 0:u.productId}),r.createElement(ol,{title:Ge("productName"),value:null===(d=e.product)||void 0===d?void 0:d.productName}),r.createElement(ol,{title:Ge("productSKU"),value:null===(m=e.product)||void 0===m?void 0:m.productSKU}),r.createElement(ol,{title:Ge("productType"),value:null===(p=e.product)||void 0===p?void 0:p.productType}),r.createElement(ol,{title:Ge("variablePrice"),value:null===(v=e.product)||void 0===v?void 0:v.variablePrice}),r.createElement(ol,{title:Ge("unitPrice"),value:lt(null===(g=e.product)||void 0===g||null===(f=g.unitPrice)||void 0===f?void 0:f.amount,null===(E=e.product)||void 0===E||null===(y=E.unitPrice)||void 0===y?void 0:y.currency)}),r.createElement(ol,{title:Ge("volume"),value:lt(null===(h=e.product)||void 0===h||null===(Z=h.volume)||void 0===Z?void 0:Z.value,null===(b=e.product)||void 0===b||null===(S=b.volume)||void 0===S?void 0:S.unit)}),r.createElement(ol,{title:Ge("weight"),value:lt(null===(I=e.product)||void 0===I||null===(N=I.weight)||void 0===N?void 0:N.value,null===(x=e.product)||void 0===x||null===(w=x.weight)||void 0===w?void 0:w.unit)}),r.createElement(ol,{title:Ge("tax"),value:null===(C=e.product)||void 0===C||null===(O=C.taxes)||void 0===O?void 0:O.join(", ")}),e.quantity&&r.createElement(ol,{title:Ge("quantity"),value:lt(null===(T=e.quantity)||void 0===T?void 0:T.quantity,null===(k=e.quantity)||void 0===k?void 0:k.unit)})))))}))))))))};function dl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ml(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dl(Object(n),!0).forEach((function(t){(0,Fe.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const pl=function(e){var t=e.children,n=r.useState([]),a=(0,w.Z)(n,2),l=a[0],i=a[1],o=r.useState([]),c=(0,w.Z)(o,2),s=c[0],u=c[1],d=r.useState(""),m=(0,w.Z)(d,2),p=m[0],v=m[1],g=r.useState(!1),f=(0,w.Z)(g,2),E=f[0],y=f[1],h=r.useState(0),Z=(0,w.Z)(h,2),b=Z[0],S=Z[1],I=r.useState(30),N=(0,w.Z)(I,2),x=N[0],O=(N[1],r.useState(1)),k=(0,w.Z)(O,2),P=k[0],D=k[1],B=r.useState({}),L=(0,w.Z)(B,2),R=L[0],F=L[1],M=z().showErrorMessage,j=ke(),W="3pl_agents"===j.resellerType?j.userId:"",A=r.useCallback((function(e){var t=e.filterModel.items[0].value,n=e.filterModel.items[0].columnField;F(ml(ml({},R),{},(0,Fe.Z)({},n,t))),D(1)}),[]),q=r.useCallback((function(e){D(e)}),[]),U=r.useCallback((function(e){v(e)}),[]),_=r.useCallback((function(e){var t={page:P,perPage:x,filter:$e(R)};y(!0),function(e,t){return T("".concat(pe,"/ratecard?vendorName=").concat(e,"&").concat(C.stringify(t)))}(e,t).then((function(e){var t;0==e.resultCode&&(i(e.rateCardList),S(null==e||null===(t=e.metaData)||void 0===t?void 0:t.totalCount))})).catch((function(e){return M(e)})).finally((function(){return y(!1)}))}),[]);return r.useEffect((function(){y(!0),W||p?W&&_(W):(y(!0),"3pl_agents"!==j.resellerType&&new Promise((function(e,t){return T("/dms/v1/resellers/resellerChildren/".concat("operator","?resellerType=3pl_agents")).then((function(n){0!=(null==n?void 0:n.resellers.filter((function(e){var t;return"Active"==(null==e||null===(t=e.resellerData)||void 0===t?void 0:t.status)}))).length?e(n):t("Vendor not found")}))})).then((function(e){if(0===e.resultCode){var t=e.resellers,n=[];t.forEach((function(e){n.push({resellerId:e.resellerData.resellerId,resellerName:e.resellerData.resellerName})})),u(n)}else M(e.resultDescription)})).catch((function(e){return M(e)})).finally((function(){return y(!1)})))}),[P,x,R]),r.createElement(r.Fragment,null,t({rateCards:l,loading:E,vendorsList:s,fetchRateCard:_,totalCount:b,page:P,perPage:x,filter:R,setParentPage:q,onFilterChange:A,setParentVendorName:U}))};function vl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function gl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vl(Object(n),!0).forEach((function(t){(0,Fe.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fl=(0,j.Z)((function(e){return(0,W.Z)({root:{display:"inline-flex",flexDirection:"row",alignItems:"center",height:48,paddingLeft:20}})}));function El(e){var t=fl(),n=e.item,a=e.applyValue;return r.createElement("div",{className:t.root},r.createElement(Ae.Z,{className:t.root,name:n.field,value:n.value,onChange:function(e){a(gl(gl({},n),{},{value:e.target.value}))}}))}const yl=function(e){var t=e.rateCards,n=e.loading,a=e.totalCount,l=e.page,i=e.perPage,o=(e.filter,e.setParentPage),c=e.onFilterChange,s=(0,U.useTranslation)().t,u=r.useState(),d=(0,w.Z)(u,2),m=(d[0],d[1]),p=r.useState([]),v=(0,w.Z)(p,2),g=v[0],f=v[1],E=l>=1?l-1:1,y=[{label:"Equal",value:"equal",getApplyFilterFn:function(e){return e.columnField&&e.value&&e.operatorValue?function(t){return t.value==e.value}:null},InputComponent:El}],h=[{field:"sourceLocation",headerName:s("pickUpLocation"),sortable:!0,width:150,filterOperators:y},{field:"destinationLocation",headerName:s("dropLocation"),sortable:!0,width:150,filterOperators:y},{field:"minWeight",headerName:s("minCapacity"),sortable:!0,width:120,valueGetter:function(e){return Number(e.row.minWeight)?"".concat(e.row.minWeight," ").concat(e.row.logisticWeightUnit):s("noWeight")}},{field:"maxWeight",headerName:s("maxCapacity"),sortable:!0,width:120,valueGetter:function(e){return e.row.maxWeight?"".concat(e.row.maxWeight," ").concat(e.row.logisticWeightUnit):s("noWeight")}},{field:"rate",headerName:s("fare"),sortable:!1,width:100,filterOperators:y,valueGetter:function(e){return e.row.rate?"".concat(e.row.rate," ").concat(e.row.currency):e.row.rate}},{field:"logisticType",headerName:s("logisticTypeName"),sortable:!0,width:140,filterOperators:y},{field:"priority",headerName:s("priority"),sortable:!1,width:100,filterOperators:y},{field:"selfLoader",headerName:s("selfLoader"),sortable:!1,width:140},{field:"fixRateUpto",headerName:s("flatRateCapacity"),sortable:!1,width:100,valueGetter:function(e){return e.row.fixRateUpto?"".concat(e.row.fixRateUpto," ").concat(e.row.currency):e.row.fixRateUpto}},{field:"extraChargePerKg",headerName:s("extraChargePerKg"),width:150,valueGetter:function(e){return e.row.extraChargePerKg?"".concat(e.row.extraChargePerKg," ").concat(e.row.currency):e.row.extraChargePerKg}}];return r.createElement(r.Fragment,null,r.createElement(je(),{loading:n,columnBuffer:2,rows:t,onPageChange:function(e){o(e.page+1)},pagination:!0,paginationMode:"server",filterMode:"server",sortingMode:"server",page:E,pageSize:i,rowCount:a,onFilterModelChange:c,getRowId:function(e){return e.id},columns:h,selectionModel:g,onRowSelected:function(e){var t=e.data;return m(t)},onSelectionModelChange:function(e){f(e.selectionModel)}}))};var hl=(0,j.Z)((function(e){return(0,W.Z)({element:{marginTop:e.spacing(2),marginBottom:e.spacing(2)}})}));const Zl=function(e){var t=(0,U.useTranslation)().t,n=ke(),a=hl(),l="3pl_agents"===n.resellerType?n.userId:"";return r.createElement(pl,null,(function(n){var i=n.rateCards,o=n.loading,c=n.vendorsList,s=n.fetchRateCard,u=n.totalCount,d=n.setParentVendorName,m=(0,Re.Z)(n,["rateCards","loading","vendorsList","fetchRateCard","totalCount","setParentVendorName"]);return r.createElement(r.Fragment,null,!l&&r.createElement("div",null,r.createElement(B.Z,{display:"flex",flexDirection:"row",justifyContent:"flex-end"},r.createElement(lt.ZP,{style:{width:250},id:"external-vendor-drop-down",options:c.map((function(e){return e})),onChange:function(e,t){d(t.resellerId),s(t.resellerId)},getOptionLabel:function(e){return e.resellerName},renderInput:function(e){return r.createElement(Ae.Z,(0,H.Z)({},e,{variant:"outlined",label:t("selectVendor")}))},className:a.element}))),r.createElement(yl,(0,H.Z)({},e,{rateCards:i,loading:o,totalCount:u},m)))}))};function bl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Sl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bl(Object(n),!0).forEach((function(t){(0,Fe.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Il=function(e){var t=e.children,n=r.useState([]),a=(0,w.Z)(n,2),l=a[0],i=a[1],o=r.useState(!1),c=(0,w.Z)(o,2),s=c[0],u=c[1],d=r.useState(0),m=(0,w.Z)(d,2),p=m[0],v=m[1],g=r.useState(30),f=(0,w.Z)(g,2),E=f[0],y=(f[1],r.useState(0)),h=(0,w.Z)(y,2),Z=h[0],b=h[1],S=r.useState("desc"),I=(0,w.Z)(S,2),N=I[0],x=I[1],O=r.useState("createDate"),P=(0,w.Z)(O,2),D=P[0],B=P[1],L=r.useState({}),R=(0,w.Z)(L,2),F=R[0],M=R[1],j=r.useCallback((function(e){var t=e.sortModel[0].field,n=e.sortModel[0].sort;B(t),x(n)}),[]),W=r.useCallback((function(e){var t=e.filterModel.items[0].value,n=e.filterModel.items[0].columnField;M(Sl(Sl({},F),{},(0,Fe.Z)({},n,t)))}),[]),A=r.useCallback((function(e){b(e)}),[]),q={sort:"".concat(D,"_").concat(null==N?void 0:N.toLowerCase()),page:Z,perPage:E,filter:$e(F)},U=z().showErrorMessage;return r.useEffect((function(){u(!0),function(e){return T("".concat(k,"/mergeDetails?").concat(C.stringify(e)))}(q).then((function(e){var t;0===e.resultCode&&(i(e.mergedOrders),v(null==e||null===(t=e.metaData)||void 0===t?void 0:t.totalCount))})).catch((function(e){return U(e)})).finally((function(){return u(!1)}))}),[D,N,Z,E,F]),r.createElement(r.Fragment,null,t({mergedTasks:l,loading:s,totalCount:p,page:Z,perPage:E,orderBy:D,order:N,filter:F,onSort:j,setParentPage:A,onFilterChange:W}))};function Nl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function xl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nl(Object(n),!0).forEach((function(t){(0,Fe.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wl=(0,j.Z)((function(e){return(0,W.Z)({dialogWrapper:{textAlign:"center","& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},root:{display:"inline-flex",flexDirection:"row",alignItems:"center",height:48,paddingLeft:20},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginBottom:e.spacing(3)},btnSpace:{marginRight:e.spacing(2)}})}));function Cl(e){var t=wl(),n=e.item,a=e.applyValue;return r.createElement("div",{className:t.root},r.createElement(Ae.Z,{className:t.root,name:n.field,value:n.value,onChange:function(e){a(xl(xl({},n),{},{value:e.target.value}))}}))}const Ol=function(e){var t=e.mergedTasks,n=e.loading,a=e.totalCount,l=e.page,i=e.perPage,c=(e.orderBy,e.order,e.onSort),s=e.setParentPage,u=e.onFilterChange,d=((0,Re.Z)(e,["mergedTasks","loading","totalCount","page","perPage","orderBy","order","onSort","setParentPage","onFilterChange"]),(0,U.useTranslation)().t),m=wl(),p=z(),v=p.showErrorMessage,g=p.showWarningMessage,f=p.showSuccessMessage,E=(0,o.useHistory)(),y=ke(),h=r.useState(!1),Z=(0,w.Z)(h,2),b=Z[0],S=Z[1],I=r.useState(!1),N=(0,w.Z)(I,2),x=N[0],C=N[1],O=r.useState(0),T=(0,w.Z)(O,2),k=T[0],D=T[1],B=r.useState(),R=(0,w.Z)(B,2),F=R[0],j=R[1],W=r.useState(!1),q=(0,w.Z)(W,2),_=(q[0],q[1]),V=r.useState(""),K=(0,w.Z)(V,2),H=K[0],J=K[1],Q=function(e){if(e===d("APPROVED")&&!H)return _(!0),void g(d("agentIdRequiredForApproval"));var t={};t&&e===d("APPROVED")?(t.action=e,t.agentId=H):t&&e===d("REJECTED")&&(t.action=e),t.mergeOrderId=k,P(t).then((function(e){f(e),S(!1),E.push("/home/trip/requestedtrips")})).catch((function(e){return v(e)}))},Y=[{label:"Equal",value:"equal",getApplyFilterFn:function(e){return e.columnField&&e.value&&e.operatorValue?function(t){return t.value==e.value}:null},InputComponent:Cl}],G=function(){S(!1)},$=[{field:"mergedOrderId",headerName:d("mergedOrderId"),sortable:!0,filterable:!0,width:120,filterOperators:Y},{field:"pickupLocation",headerName:d("pickUpLocation"),sortable:!0,filterable:!0,width:150,filterOperators:Y},{field:"dropLocation",headerName:d("dropLocation"),sortable:!0,filterable:!0,width:150,filterOperators:Y},{field:"vendor",headerName:d("vendor"),sortable:!0,filterable:!0,width:100,filterOperators:Y},{field:"mergedOrderCount",headerName:d("mergedOrderCount"),sortable:!0,filterable:!1,width:130},{field:"orderCapacityData",headerName:d("tripCapacity"),sortable:!0,filterable:!1,width:150,valueGetter:function(e){var t=e.row.data&&JSON.parse(e.row.data);return null==t?void 0:t.orderCapacity}},{field:"netTripFare",headerName:d("netTripFare"),sortable:!0,filterable:!1,width:140},{field:"createDate",headerName:d("createDate"),sortable:!0,filterable:!0,width:150},{field:"status",headerName:d("status"),sortable:!0,filterable:!0,width:130,filterOperators:Y},{field:"actions",headerName:d("actions"),sortable:!1,filterable:!1,renderCell:function(e){var t=e.getValue("status"),n=e.getValue("actionBy");return r.createElement("div",null,r.createElement(We.Z,{size:"small",color:"primary",variant:"text","aria-label":"trip action buttons"},r.createElement(Ze.ZP,{title:d("view")},r.createElement(L.Z,{color:"primary",component:o.Link,to:"/home/trip/requestedtrips/view/"+e.getValue("mergedOrderId")},r.createElement(qe.Z,{fontSize:"small"}))),r.createElement(Ze.ZP,{title:d("approve")},r.createElement(L.Z,{onClick:function(){S(!0),D(e.getValue("mergedOrderId")),j(e.getValue("vendor"))},disabled:"REQUESTED"!=t||n.toLowerCase()!==y.requestedPrincipalId.toLowerCase()},r.createElement(hn.Z,{fontSize:"small"},"thumb_up"))),r.createElement(Ze.ZP,{title:d("reject")},r.createElement(L.Z,{onClick:function(){C(!0),D(e.getValue("mergedOrderId"))},disabled:"REQUESTED"!=t||n.toLowerCase()!==y.requestedPrincipalId.toLowerCase()},r.createElement(hn.Z,{fontSize:"small"},"thumb_down")))))},width:150}];return r.createElement(r.Fragment,null,r.createElement(A.SeamlessDialog,{open:b,onClose:G,className:m.dialogWrapper,maxWidth:"md",fullWidth:!0},r.createElement(r.Fragment,null,r.createElement("div",{className:m.modalContentSpacing},r.createElement(M.Z,{gutterBottom:!0,id:"transition-modal-title",variant:"h6",className:m.fontHeavy},d("approveMergedTaskConfirmationTitle"),": ",k),r.createElement(Ee,{resellerId:F,mergeId:k,handleChange:J})),r.createElement(A.SeamlessButton,{type:"button",variant:"outlined",color:"primary",className:m.btnSpace,onClick:G},d("noConfirmationButton")),r.createElement(A.SeamlessButton,{type:"button",variant:"contained",color:"primary",onClick:function(){return Q(d("APPROVED"))}},d("yesConfirmationButton")))),r.createElement(A.SeamlessDialog,{open:x,onClose:G,className:m.dialogWrapper,maxWidth:"md",fullWidth:!0},r.createElement(r.Fragment,null,r.createElement("div",{className:m.modalContentSpacing},r.createElement(M.Z,{gutterBottom:!0,id:"transition-modal-title",variant:"h6",className:m.fontHeavy},d("rejectMergedTaskConfirmationTitle"),": ",k),r.createElement(M.Z,{id:"transition-modal-description",variant:"body1"},d("rejectMergedTaskConfirmationText"))),r.createElement(A.SeamlessButton,{type:"button",variant:"outlined",color:"primary",className:m.btnSpace,onClick:function(){return C(!1)}},d("noConfirmationButton")),r.createElement(A.SeamlessButton,{type:"button",variant:"contained",color:"primary",onClick:function(){return Q(d("REJECTED"))}},d("yesConfirmationButton")))),r.createElement(je(),{loading:n,columnBuffer:2,rows:t,onPageChange:function(e){s(e.page)},pagination:!0,paginationMode:"server",filterMode:"server",sortingMode:"server",page:l,pageSize:i,rowCount:a,onFilterModelChange:u,onSortModelChange:c,getRowId:function(e){return e.mergedOrderId},columns:$,checkboxSelection:!0}))},Tl=function(e){return r.createElement(Il,null,(function(t){var n=t.mergedTasks,a=t.loading,l=t.totalCount,i=(0,Re.Z)(t,["mergedTasks","loading","totalCount"]);return r.createElement(Ol,(0,H.Z)({},e,{mergedTasks:n,loading:a,totalCount:l},i))}))};var kl;function Pl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var Dl=(null===(kl=window.config)||void 0===kl?void 0:kl.defaultPerPageItems)||20;const Bl=function(e){var t=e.children,n=z().showErrorMessage,a=r.useState([]),l=(0,w.Z)(a,2),i=l[0],o=l[1],c=r.useState(!1),s=(0,w.Z)(c,2),u=s[0],d=s[1],m=(0,Me.useServerTable)({page:0,perPage:Dl,order:"desc",orderBy:"startTime",filter:{}}),p=r.useCallback((function(){d(!0),T("".concat(ge,"/configuration")).then((function(e){o(e.billingConfigurations)})).catch((function(e){n(e)})).finally((function(){return d(!1)}))}),[m.page,m.perPage]);return r.useEffect((function(){p()}),[p]),r.createElement(r.Fragment,null,t(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pl(Object(n),!0).forEach((function(t){(0,Fe.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({billingFrequencies:i,loading:u},m)))};var Ll=n(45976),Rl=function(e){if(!e)return"-";var t=e.slice(0,-1);return(0,Ll.Z)(new Date(t),"dd/MM/yyyy HH:mm:ss")};const Fl=function(e){var t=e.loading,n=e.billingFrequencies,a=e.page,i=e.perPage,c=e.onPageChange,s=e.onPageSizeChange,u=(0,U.useTranslation)().t,d=l()().checkPermission,m=[{field:"vendor",headerName:u("vendor"),sortable:!0,flex:1,renderCell:function(e){return r.createElement(Ze.ZP,{title:e.getValue("vendor")},r.createElement("div",null,e.getValue("vendor")))}},{field:"billingMode",headerName:u("mode"),sortable:!0,flex:1,renderCell:function(e){var t,n=e.getValue("billingModesAllowed").find((function(t){return t.key===e.getValue("billingMode")})),a=null!==(t=null==n?void 0:n.label)&&void 0!==t?t:"-";return r.createElement(Ze.ZP,{title:a},r.createElement("div",null,a))}},{field:"billingFrequency",headerName:u("period"),sortable:!0,flex:1,renderCell:function(e){var t,n=e.getValue("billingFrequenciesAllowed").find((function(t){return t.key===e.getValue("billingFrequency")})),a=null!==(t=null==n?void 0:n.label)&&void 0!==t?t:"-";return r.createElement(Ze.ZP,{title:a},r.createElement("div",null,a))}},{field:"cycleStartDate",headerName:u("cycleStartDate"),sortable:!0,flex:1,renderCell:function(e){return r.createElement(Ze.ZP,{title:Rl(e.getValue("cycleStartDate"))},r.createElement("div",null,Rl(e.getValue("cycleStartDate"))))}},{field:"cycleEndDate",headerName:u("cycleEndDate"),sortable:!0,flex:1,renderCell:function(e){return r.createElement(Ze.ZP,{title:Rl(e.getValue("cycleEndDate"))},r.createElement("div",null,Rl(e.getValue("cycleEndDate"))))}},{field:"settlementAgreement",headerName:u("settlementAgreement"),sortable:!0,flex:1,renderCell:function(e){var t,n=e.getValue("settlementAgreementsAllowed").find((function(t){return t.key===e.getValue("settlementAgreement")})),a=null!==(t=null==n?void 0:n.label)&&void 0!==t?t:"-";return r.createElement(Ze.ZP,{title:a},r.createElement("div",null,a))}},{field:"settlementMode",headerName:u("settlementMode"),sortable:!0,flex:1,renderCell:function(e){var t,n=e.getValue("settlementModesAllowed").find((function(t){return t.key===e.getValue("settlementMode")})),a=null!==(t=null==n?void 0:n.label)&&void 0!==t?t:"-";return r.createElement(Ze.ZP,{title:a},r.createElement("div",null,a))}}];return d(b)&&m.push({field:"actions",headerName:u("actions"),sortable:!1,renderCell:function(e){return r.createElement("div",null,r.createElement(We.Z,{size:"small",color:"primary","aria-label":"group action buttons"},r.createElement(Ze.ZP,{title:u("view")},r.createElement(L.Z,{component:o.Link,to:{pathname:"/home/trip/billingfrequencies/view/"+e.getValue("id"),state:{data:e.row}}},r.createElement(qe.Z,{fontSize:"small"})))))}}),r.createElement(r.Fragment,null,r.createElement(je(),{onPageSizeChange:function(e){s(e.pageSize)},onPageChange:function(e){c(e.page)},pagination:!0,page:a,pageSize:i,rows:n,loading:t,columns:m,getRowId:function(e){return e.vendor},columnBuffer:3}))},Ml=function(){return r.createElement(Bl,null,(function(e){var t=e.billingFrequencies,n=e.loading,a=(0,Re.Z)(e,["billingFrequencies","loading"]);return r.createElement("div",{style:{height:600,width:"100%"}},r.createElement(Fl,(0,H.Z)({billingFrequencies:t,loading:n},a)))}))};var jl=n(10405),Wl=n(2682),Al=n(44962),ql=n(5806),Ul=n(84899),zl=n(61564),_l=n(39590),Vl=n(19258);function Kl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Hl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kl(Object(n),!0).forEach((function(t){(0,Fe.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jl=(0,j.Z)((function(e){return(0,W.Z)({icon:{marginTop:e.spacing(8),marginLeft:e.spacing(2)},stat:{margin:e.spacing(1),width:250,textTransform:"uppercase"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},asterisk:{},element:{margin:e.spacing(1)},period:{fontSize:"12px",display:"flex",flexDirection:"column"},rowSpacing:{marginLeft:e.spacing(1)},spacingLeft:{marginLeft:e.spacing(2)},fieldHeading:{fontWeight:"bold",textTransform:"uppercase",fontSize:24},spacingBottom:{marginBottom:e.spacing(2)},spacingTop:{marginTop:e.spacing(4)},fieldArrayWrapper:{border:"1px solid #EDEDED",marginLeft:"0",marginTop:"10px",minWidth:320,width:"100%",borderRadius:"10px",padding:"20px !important",background:"#F7F7F7"},textCenter:{justifyContent:"center"},wrapper:{display:"flex",justifyContent:"center"},datepicker:{"& .MuiInputLabel-shrink":{transform:"translate(0, -5px) !important"}},textEnd:{textAlign:"right"}})}));const Ql=function(){var e=(0,U.useTranslation)().t,t=(0,o.useHistory)(),n=z(),a=n.showErrorMessage,l=n.showSuccessMessage,i=Jl(),c=(0,o.useLocation)().state.data,s=(0,ln.TA)({initialValues:{billingFrequency:c.billingFrequency||null,billingMode:c.billingMode,cycleEndDate:c.cycleEndDate||null,cycleStartDate:c.cycleStartDate||null,initiationDate:c.initiationDate||null,reseller:c.reseller,settlementAgreement:c.settlementAgreement,settlementMode:c.settlementMode||null,vendor:c.vendor},onSubmit:function(n){var r;g(n)?(r={billingConfiguration:Hl(Hl({},n),{},{initiationDate:n.initiationDate?new Date(n.initiationDate).toISOString():null})},T("".concat(ge,"/configuration"),{method:"PUT",body:r})).then((function(n){0===n.resultCode?(l(e("billingUpdateSuccess")),t.push("/home/trip/billingfrequencies")):a(n.resultMessage||e("anErrorOccurred"))})):a(e("billingUpdateError"))},enableReinitialize:!0}),u=s.values,d=s.handleChange,m=s.handleSubmit,p=s.setFieldValue,v=function(e,t){e&&t&&function(e,t){return T("".concat(ge,"/computeCycle?billingFrequency=").concat(e,"&initiationDate=").concat(t))}(e,t).then((function(e){var t=e.CycleStartEndDate;p("cycleStartDate",t.cycleStartDate),p("cycleEndDate",t.cycleEndDate)}))},g=function(e){if("automatic"===e.billingMode){if(!e.billingFrequency)return!1;if(!e.initiationDate)return!1}return!("internal"===e.settlementAgreement&&!e.settlementMode)};return r.createElement(r.Fragment,null,r.createElement(R.Z,{container:!0},r.createElement(B.Z,{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-evenly",padding:"10px"},r.createElement(Ne,{className:i.stat,label:e("vendor"),value:u.vendor,tooltip:!0}),r.createElement(Ne,{className:i.stat,label:e("billingMode"),value:u.billingMode}),r.createElement(Ne,{className:i.stat,label:e("settlementSideBar"),value:u.settlementAgreement}),u.cycleStartDate&&r.createElement(Ne,{className:i.stat,label:e("period"),value:r.createElement(r.Fragment,null,r.createElement("div",{className:i.period},r.createElement("span",null,e("fields.fromDate"),": ",Rl(u.cycleStartDate)),r.createElement("span",null,e("fields.toDate"),": ",Rl(u.cycleEndDate))))}))),r.createElement("div",{className:i.wrapper},r.createElement("div",{className:i.rowSpacing},r.createElement(R.Z,{className:(0,_.default)(i.rowSpacing,i.spacingTop)},r.createElement(M.Z,{className:i.fieldHeading},e("billingSideBar"))),r.createElement("div",{className:i.fieldArrayWrapper},r.createElement("div",null,r.createElement(Ul.Z,{component:"legend"},e("billingMode")," ",r.createElement("span",{className:i.asterisk},"*")),r.createElement(Wl.Z,{value:u.billingMode,name:"billingMode",onChange:function(e){"manual"===e.target.value?(p("billingFrequency",null),p("initiationDate",null),p("cycleStartDate",null),p("cycleEndDate",null)):u.initiationDate||p("initiationDate",new Date),d(e)},row:!0},c.billingModesAllowed.length&&c.billingModesAllowed.map((function(e){return r.createElement(ql.Z,{value:e.key,control:r.createElement(Al.Z,null),key:"billing-mode-option-".concat(e.key),label:e.label})})))),"automatic"===u.billingMode&&r.createElement("div",{className:i.spacingTop},r.createElement(Ul.Z,{component:"legend"},e("billingFrequency")," ",r.createElement("span",{className:i.asterisk},"*")),r.createElement(Wl.Z,{value:u.billingFrequency,name:"billingFrequency",onChange:function(e){d(e),v(e.target.value,new Date(u.initiationDate).toISOString())}},c.billingFrequenciesAllowed.length&&c.billingFrequenciesAllowed.map((function(e){return r.createElement(ql.Z,{value:e.key,control:r.createElement(Al.Z,null),key:"billing-frequency-option-".concat(e.key),label:e.label})})))))),r.createElement("div",{className:i.spacingLeft},r.createElement(R.Z,{className:(0,_.default)(i.rowSpacing,i.spacingTop)},r.createElement(M.Z,{className:i.fieldHeading},e("settlementSideBar"))),r.createElement("div",{className:i.fieldArrayWrapper},r.createElement("div",null,r.createElement(Ul.Z,{component:"legend"},e("settlementAgreement")," ",r.createElement("span",{className:i.asterisk},"*")),r.createElement(Wl.Z,{value:u.settlementAgreement,name:"settlementAgreement",onChange:function(e){"external"===e.target.value&&p("settlementMode",null),d(e)},row:!0},c.settlementAgreementsAllowed.length&&c.settlementAgreementsAllowed.map((function(e){return r.createElement(ql.Z,{value:e.key,control:r.createElement(Al.Z,null),key:"settlement-agreement-option-".concat(e.key),label:e.label})})))),"internal"===u.settlementAgreement&&r.createElement("div",{className:i.spacingTop},r.createElement(Ul.Z,{component:"legend"},e("settlementMode")," ",r.createElement("span",{className:i.asterisk},"*")),r.createElement(Wl.Z,{value:u.settlementMode,onChange:d,name:"settlementMode"},c.settlementModesAllowed.length&&c.settlementModesAllowed.map((function(e){return r.createElement(ql.Z,{value:e.key,control:r.createElement(Al.Z,null),key:"settlement-mode-option-".concat(e.key),label:e.label})}))))))),"automatic"===u.billingMode&&r.createElement("div",{className:i.wrapper},r.createElement("div",{className:i.fieldArrayWrapper,style:{maxWidth:740}},r.createElement(R.Z,{container:!0,spacing:3},u.initiationDate&&r.createElement(zl.M,{utils:Vl.Z},r.createElement(R.Z,{item:!0,xs:12,sm:4},r.createElement(_l.e,{className:i.datepicker,views:["year","month","date"],openTo:"date",autoOk:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",label:e("initiationDate"),minDate:(0,jl.Z)(new Date),name:"initiationDate",value:u.initiationDate,error:!1,helperText:null,onChange:function(e){null!=e&&e.getDate()?d({target:{value:e,name:"initiationDate"}}):d({target:{value:new Date,name:"initiationDate"}}),v(u.billingFrequency,new Date(e).toISOString())},KeyboardButtonProps:{"aria-label":"change date"}}))),u.cycleStartDate&&r.createElement(zl.M,{utils:Vl.Z},r.createElement(R.Z,{item:!0,xs:12,sm:4},r.createElement(_l.e,{className:i.datepicker,variant:"inline",format:"dd/MM/yyyy HH:mm:ss",margin:"normal",label:e("fields.fromDate"),readOnly:!0,name:"cycleStartDate",value:u.cycleStartDate.slice(0,-1),onChange:function(){return null},keyboardIcon:null}))),u.cycleEndDate&&r.createElement(zl.M,{utils:Vl.Z},r.createElement(R.Z,{item:!0,xs:12,sm:4},r.createElement(_l.e,{className:i.datepicker,variant:"inline",format:"dd/MM/yyyy HH:mm:ss",margin:"normal",label:e("fields.toDate"),readOnly:!0,name:"cycleEndDate",value:u.cycleEndDate.slice(0,-1),onChange:function(){return null},keyboardIcon:null})))))),r.createElement(R.Z,{container:!0},r.createElement(R.Z,{item:!0,xs:11,className:(0,_.default)(i.spacingTop,i.textEnd)},r.createElement(A.SeamlessButton,{onClick:function(e){return t.goBack()},id:"search-kyc-submit-button",variant:"outlined",color:"primary",size:"large"},e("cancel")),r.createElement(A.SeamlessButton,{onClick:function(e){return m()},id:"search-kyc-submit-button",variant:"contained",className:i.rowSpacing,color:"primary",size:"large"},e("submit")))))},Yl=function(){var e=(0,U.useTranslation)().t;return r.createElement(A.SeamlessContainer,{title:e("viewAllDeliveryTaskPageTitle"),description:e("viewAllDeliveryTaskPageDescription")},r.createElement("div",{style:{height:600,width:"100%"}},r.createElement(sn,null)))};var Gl=n(28428),$l=n(57234),Xl=(0,j.Z)((function(e){return(0,W.Z)({root:{display:"inline-flex",flexDirection:"row",alignItems:"center",height:48,paddingLeft:20},rowSpacing:{marginBottom:e.spacing(.5),marginTop:e.spacing(1)},marginTop5:{marginTop:"10px",fontWeight:700,"& button":{marginRight:"10px",marginTop:"15px"}},bgColor:{backgroundColor:"rgba(0, 0, 0, 0.06) !important"}})}));const er=function(e){var t=e.tasks,n=e.loading,a=e.setDropOffLocation,l=e.setDropLocations,i=e.dropLocations,o=(e.capacityOptions,e.setCapacityOptions),c=e.setCapacitySelected,s=e.setTasks,u=e.edit,d=e.proposed,m=e.vendor,p=(0,U.useTranslation)().t,v=z().showWarningMessage,g=Xl(),f=t.map((function(e){if(u){var t,n=JSON.parse(null==e?void 0:e.data);return null==n||null===(t=n.orderWeight)||void 0===t?void 0:t.value}return null==e?void 0:e.capacity})).reduce((function(e,t){return e+t}),0),E=r.useState(f),y=(0,w.Z)(E,2),h=y[0],Z=y[1],b=[].concat((0,x.Z)(t),[{capacity:h,id:"totalcapacity-1-1-1"}]),S=r.useState(b),I=(0,w.Z)(S,2),N=I[0],C=I[1],O=N.length-1;if(N.length){var T=N.filter((function(e){return"true"===e.removedIndex}));T.length&&T.forEach((function(e,t){var n,a=N.findIndex((function(t){return t.id===e.id}));null===(n=document.querySelector(".list-table .MuiDataGrid-row:nth-child(".concat(a+1,")")))||void 0===n||n.classList.add(g.bgColor)}))}var k=function(e){var t=[];if(0!==e.length){var n=e.filter((function(e,n){return!(t.indexOf(null==e?void 0:e.dropLogisticLocation)>-1||(t.push(null==e?void 0:e.dropLogisticLocation),0))})).map((function(e){return{key:null==e?void 0:e.dropLogisticLocation,value:null==e?void 0:e.dropLogisticLocation}}));l(n),1==n.length&&a(n[0].value)}},P=function(e){if(0!==e.length){var t=e.map((function(e){return null==e?void 0:e.capacity})),n=[];D(t,0,2,0,n);var a=n.filter((function(e,t){return n.indexOf(e)===t&&0!==e})).sort().map((function(e){return{key:e,value:e}}));o(a),c(a[0].value)}},D=function e(t,n,a,l,r){n>a?r.push(l):(e(t,n+1,a,l+t[n],r),e(t,n+1,a,l,r))},B=[{field:"orderId",headerName:p("orderId"),sortable:!1,filterable:!1,width:300},{field:"pickUpLogisticLocation",headerName:p("pickUpLocation"),sortable:!1,filterable:!1,width:150},{field:"dropLogisticLocation",headerName:p("dropLocation"),sortable:!1,filterable:!1,width:150},{field:"capacity",headerName:p("capacity"),sortable:!1,filterable:!1,width:200,renderCell:function(e){var t;return(null==e?void 0:e.rowIndex)===O?r.createElement(M.Z,{color:"primary"},"".concat(p("totalCapacity")," ").concat(h)):null==e||null===(t=e.row)||void 0===t?void 0:t.capacity}},{field:"actions",headerName:p("actions"),sortable:!1,filterable:!1,renderCell:function(e){var t=e.getValue("removedIndex");return(null==e?void 0:e.rowIndex)===O?r.createElement(r.Fragment,null):r.createElement("div",null,t&&"false"!==t?d||u?r.createElement(Ze.ZP,{title:p("add")},r.createElement(L.Z,{color:"primary",onClick:function(){return function(e){var t,n=h+(null==e?void 0:e.capacity),a=N.findIndex((function(t){return t.id===e.id}));i.push({key:null==e?void 0:e.dropLogisticLocation,value:null==e?void 0:e.dropLogisticLocation}),l(i);var r=(0,x.Z)(N);r[a].removedIndex="false",C(r);var o=N.filter((function(e){return(!e.removedIndex||"false"===e.removedIndex)&&void 0!==e.data}));s(o),Z(n),k(o),P(o),null===(t=document.querySelector(".list-table .MuiDataGrid-row:nth-child(".concat(a+1,")")))||void 0===t||t.classList.remove(g.bgColor)}(null==e?void 0:e.row)}},r.createElement($l.Z,{fontSize:"small"}))):r.createElement(Ze.ZP,{title:p("delete")},r.createElement(L.Z,{color:"primary",disabled:!(u&&O>1)},r.createElement(Gl.Z,{fontSize:"small"}))):r.createElement(Ze.ZP,{title:p("delete")},r.createElement(L.Z,{color:"primary",disabled:!(u&&O>1||d&&O>1),onClick:function(){return function(e){if(N.filter((function(e){return(!e.removedIndex||"false"===e.removedIndex)&&void 0!==e.data})).length>1){var t=h-(null==e?void 0:e.capacity);l(i.filter((function(t){return t.key!=(null==e?void 0:e.dropLogisticLocation)})));var n=N.findIndex((function(t){return t.id===e.id})),a=(0,x.Z)(N);a[n].removedIndex="true",C(a);var r=a.filter((function(e){return(!e.removedIndex||"false"===e.removedIndex)&&void 0!==e.data}));s(r),Z(t),k(r),P(r)}else v(p("atleastOneOrder"))}(null==e?void 0:e.row)}},r.createElement(Gl.Z,{fontSize:"small"}))))},flex:1}];return r.createElement(r.Fragment,null,r.createElement(R.Z,{container:!0,spacing:3,className:g.rowSpacing},r.createElement(R.Z,{item:!0,xs:12},r.createElement(M.Z,{variant:"h6",color:"primary",className:g.marginTop5},p("mergedOrders")," ",d?"(Proposed by ".concat(m,")"):""))),r.createElement("div",{className:"list-table",style:{width:"100%"}},r.createElement(je(),{loading:n,columnBuffer:2,rows:N,getRowId:function(e){return e.orderId},columns:B,hideFooterPagination:!0,disableSelectionOnClick:!0,autoHeight:!0,disableColumnFilter:!0,disableDensitySelector:!0,disableColumnSelector:!0})))};var tr=n(11433);function nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var ar=(0,j.Z)((function(e){return(0,W.Z)({button:{marginTop:20},element:{marginRight:e.spacing(1),marginBottom:e.spacing(1)},spacingBottom:{marginBottom:e.spacing(1),marginTop:0},warnnig:{marginBottom:e.spacing(.5),marginTop:-2,color:"red",fontWeight:"bold"},rowSpacing:{marginBottom:e.spacing(.5)},marginTop5:{fontWeight:700,"& button":{marginRight:"10px",marginTop:"15px"}}})})),lr=(0,V.Z)((function(e){return{root:{color:e.palette.primary.main,height:8,marginLeft:10},thumb:{height:24,width:24,backgroundColor:"#fff",border:"2px solid "+e.palette.primary.main,marginTop:-8,marginLeft:-12,"&.Mui-disabled":{backgroundColor:"#c3c3c3",border:"2px solid",height:24,width:24,marginTop:-8,marginLeft:-12},"&:focus, &:hover, &$active":{boxShadow:"inherit"}},active:{},valueLabel:{left:"calc(-50% + 4px)"},track:{height:8,borderRadius:4},rail:{height:8,borderRadius:4}}}))(tr.Z);const rr=function(e){var t=e.data,n=e.tripFareDetails,a=e.multiple,l=e.onFormSubmit,i=e.setDropOffLocation,o=(e.setCapacitySelected,e.capacityOptions,e.capacitySelected,e.pickupLocation),c=e.dropLocations,s=e.dropLocation,u=ar(),d=(ke(),z()),m=d.showErrorMessage,p=d.showWarningMessage,v=(0,U.useTranslation)().t,g=r.useState(!1),f=(0,w.Z)(g,2),E=(f[0],f[1]),y={pickupLocation:"",dropLocation:"",vendor:"",logisticType:"",priorityTrip:"",vendorCapacity:"",mergedOrders:"",orderCapacity:"",ordersUndelivered:"",tripPenalty:0,tripFair:"",tripFairBackup:"0.00",additionalFare:"",taskList:[""],selfLoader:"",returnTripFare:0,reconciliationAmount:0},h=r.useState([]),Z=(0,w.Z)(h,2),b=(Z[0],Z[1],r.useState([])),S=(0,w.Z)(b,2),I=S[0],N=S[1],x=r.useState(y),C=(0,w.Z)(x,2),O=C[0],T=C[1],k=r.useState(v("")),P=(0,w.Z)(k,2),D=P[0],B=P[1],L=r.useState(!1),F=(0,w.Z)(L,2),j=F[0],W=F[1],q=r.useState(0),V=(0,w.Z)(q,2),K=V[0],H=V[1],J=r.useState(),Q=(0,w.Z)(J,2),Y=Q[0],G=Q[1];r.useEffect((function(){if(t){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nr(Object(n),!0).forEach((function(t){(0,Fe.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},y);e.pickupLocation=o||"",e.dropLocation=s||c[0].value,e.mergedOrders=t.length,e.taskList=t.map((function(e){return null==e?void 0:e.id})),e.logisticType="";var n=t.map((function(e){var t,n=JSON.parse(null==e?void 0:e.data);return null==n||null===(t=n.orderWeight)||void 0===t?void 0:t.value})).reduce((function(e,t){return e+t}),0);e.orderCapacity="".concat(n),e.vendorCapacity="-",T(e)}}),[t]);for(var $,X=[],ee=0;ee<=t.length-1;ee++)X.push({key:ee,value:ee});$=X,r.useEffect((function(){se(re),ne(n)}),[n]);var te=De().mapValues(De().groupBy(n,"vendor"),(function(e){return e.map((function(e){return De().omit(e,"vendor")}))})),ne=function(e){E(!0);var t=[];if(t.push({value:"-",key:"Select Vendor"}),0!==e.length)for(var n=0,a=Object.entries(te);n<a.length;n++){var l=(0,w.Z)(a[n],2),r=l[0];l[1],t.push({key:r,value:r})}N(t)},ae=function(e,t){var n=(e/100*Number(t)).toFixed(2),a=Number(n).toFixed(2);oe("tripFairBackup",a)},le=(0,ln.TA)({initialValues:O,onSubmit:function(e){e.vendor&&"-"!==e.vendor?l&&l(e):m(v("vendorError"))},enableReinitialize:!0});r.useEffect((function(){0==K&&oe("tripPenalty",0),j&&(p(v("noRateCardFound")),se(re),W(!1),B(""))}),[K,j]);var re=le.values,ie=le.handleChange,oe=le.setFieldValue,ce=le.handleSubmit,se=le.handleReset;return r.useEffect((function(){var e=te[Y],t=De().mapValues(De().groupBy(e,"logisticType"),(function(e){return e.map((function(e){return De().omit(e,"logisticType")}))}))[D];if(Y&&D&&!t&&W(!0),t&&t.length){var n={};if("COURIER"===D){if(re.vendorCapacity="-",re.tripFair="","yes"===re.priorityTrip){var a=t.find((function(e){return"Priority"===e.logisticVariant}));Object.assign(n,a),De().isEmpty(n)&&W(!0)}else if("no"===re.priorityTrip){var l=t.find((function(e){return null===e.logisticVariant}));Object.assign(n,l),De().isEmpty(n)&&W(!0)}}else if("BULK"===D)if(re.vendorCapacity="-",re.tripFair="","SelfLoader"===re.selfLoader){var r=t.find((function(e){return"Selfloader"===e.logisticVariant}));Object.assign(n,r),De().isEmpty(n)&&W(!0)}else if("Priority"===re.selfLoader){var i=t.find((function(e){return"Priority"===e.logisticVariant}));Object.assign(n,i),De().isEmpty(n)&&W(!0)}else if("no"===re.selfLoader){var o=t.find((function(e){return null===e.logisticVariant}));Object.assign(n,o),De().isEmpty(n)&&W(!0)}De().isEmpty(n)||(oe("returnTripFare",100),oe("tripFair",null==n?void 0:n.totalRate),oe("vendorCapacity",null==n?void 0:n.maxWeight),0!==re.tripPenalty&&ae(re.tripPenalty,Number(null==n?void 0:n.totalRate).toFixed(2)))}}),[Y,D,re.priorityTrip,re.selfLoader]),r.createElement(r.Fragment,null,r.createElement(R.Z,{container:!0,spacing:3,className:u.rowSpacing},r.createElement(R.Z,{item:!0,xs:12},r.createElement(M.Z,{variant:"h6",color:"primary",className:u.marginTop5},v("tripLogisticsDetails")))),r.createElement(R.Z,{container:!0,spacing:3},r.createElement(R.Z,{item:!0,xs:12,sm:3},r.createElement(A.SeamlessInput,{disabled:!0,className:u.element,fullWidth:!0,name:"pickupLocation",value:re.pickupLocation,onChange:ie,label:v("pickUpLocation")})),r.createElement(R.Z,{item:!0,xs:12,sm:3},a?r.createElement(A.SeamlessDropDown,{fullWidth:!0,className:u.element,label:v("dropOffLocation"),options:c,name:"dropLocation",value:s||re.dropLocation,onChange:function(e){ie(e),i(e.target.value)}}):r.createElement(A.SeamlessInput,{disabled:!0,className:u.element,fullWidth:!0,name:"dropLocation",value:s||re.dropLocation,onChange:ie,label:v("dropOffLocation")}))),r.createElement(R.Z,{container:!0,spacing:3},r.createElement(R.Z,{item:!0,xs:12,sm:3},r.createElement(A.SeamlessDropDown,{fullWidth:!0,className:u.element,label:v("vendor","Vendor"),options:I.map((function(e){return e})),name:"vendor",value:re.vendor,onChange:function(e){var t;se(re),B(""),ie(e),G(null==e||null===(t=e.target)||void 0===t?void 0:t.value),"-"===e.target.value&&W(!0)}})),re.vendor&&r.createElement(R.Z,{item:!0,xs:12,sm:3},r.createElement(A.SeamlessDropDown,{fullWidth:!0,value:re.logisticType,className:u.element,label:v("logisticTypeName"),options:[{value:"-",key:"Select LogisticeType"},{value:"COURIER",key:"COURIER"},{value:"BULK",key:"BULK"}],name:"logisticType",onChange:function(e){var t;ie(e),B(null==e||null===(t=e.target)||void 0===t?void 0:t.value),"-"===e.target.value&&W(!0)}})),r.createElement(R.Z,{item:!0,xs:12,sm:3},D&&"COURIER"!==D?r.createElement(A.SeamlessDropDown,{fullWidth:!0,className:u.element,label:"".concat(v("priority"),"/").concat(v("selfLoader")),options:[{value:"-",key:"Select Logisitcs Variant"},{value:"Priority",key:"Priority"},{value:"SelfLoader",key:"Self Loader"},{value:"no",key:"No"}],name:"selfLoader",disabled:!D||"COURIER"===D,value:re.selfLoader,onChange:ie}):r.createElement(A.SeamlessDropDown,{fullWidth:!0,className:u.element,label:v("priorityTrip"),options:[{value:"-",key:"Select Priority"},{value:"no",key:"No"},{value:"yes",key:"Yes"}],name:"priorityTrip",disabled:!D,value:re.priorityTrip,onChange:function(e){ie(e),"-"===e.target.value&&W(!0)}}))),r.createElement(R.Z,{container:!0,spacing:3},r.createElement(R.Z,{item:!0,xs:12,sm:3},r.createElement(A.SeamlessInput,{readOnly:!0,className:u.element,fullWidth:!0,name:"vendorCapacity",value:re.vendorCapacity,onChange:ie,label:v(a?"logisticsCapacity":"vendorCapacity")})),r.createElement(R.Z,{item:!0,xs:12,sm:3},r.createElement(A.SeamlessInput,{readOnly:!0,className:u.element,fullWidth:!0,name:"mergedOrders",value:re.mergedOrders,onChange:ie,label:v("mergedOrders")})),r.createElement(R.Z,{item:!0,xs:12,sm:3},r.createElement(A.SeamlessInput,{readOnly:!0,className:u.element,fullWidth:!0,name:"orderCapacity",value:re.orderCapacity,onChange:ie,label:v(a?"tripCapacity":"orderCapacity")}))),a&&r.createElement(R.Z,{container:!0,spacing:4},r.createElement(R.Z,{item:!0,xs:12,sm:3},r.createElement(A.SeamlessDropDown,{className:u.element,fullWidth:!0,name:"ordersUndelivered",value:re.ordersUndelivered,options:$,onChange:function(e){ie(e),H(e.target.value)},label:v("noOfOrdersUndelivered")})),r.createElement(R.Z,{item:!0,xs:12,sm:3},0==K?r.createElement(M.Z,{className:u.spacingBottom,variant:"caption",gutterBottom:!0},"".concat(v("tripPenalty")," ( ",0,"% )")):r.createElement(M.Z,{className:u.spacingBottom,variant:"caption",gutterBottom:!0},"".concat(v("tripPenalty")," ( ").concat(re.tripPenalty?re.tripPenalty:0,"% )")),r.createElement(lr,{value:0!=K?re.tripPenalty:0,getAriaValueText:function(e){return"".concat(e,"%")},"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",disabled:0==K,onChange:function(e,t){oe("tripPenalty",t),ae(Number(t),re.tripFair)},name:"tripPenalty",step:1,min:0,max:100}),r.createElement(M.Z,{className:u.warnnig,variant:"caption",gutterBottom:!0},"".concat(v("note"),": ").concat(v("penaltyWarning")))),r.createElement(R.Z,{item:!0,xs:12,sm:3},r.createElement(A.SeamlessInput,{readOnly:!0,className:u.element,fullWidth:!0,name:"tripFairBackup",value:re.tripFairBackup,onChange:ie,label:v("approximatePenaltyRate")}))),r.createElement(R.Z,{container:!0,spacing:4},r.createElement(R.Z,{item:!0,xs:12,sm:3},r.createElement(A.SeamlessInput,{readOnly:!0,className:u.element,fullWidth:!0,name:"tripFair",value:re.tripFair,onChange:ie,label:v("tripFair")})),r.createElement(R.Z,{item:!0,xs:12,sm:3},r.createElement(M.Z,{className:u.spacingBottom,variant:"caption",gutterBottom:!0},"".concat(v("returnTripFare")," ( ").concat(re.returnTripFare?re.returnTripFare:0,"% )")),r.createElement(lr,{value:re.returnTripFare?re.returnTripFare:re.tripFair,getAriaValueText:function(e){return"".concat(e,"%")},"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",defaultValue:100,onChange:function(e,t){var n,a,l;oe("returnTripFare",t),n=Number(t),a=re.tripFair,l=(n/100*Number(a)).toFixed(2),oe("reconciliationAmount",l)},name:"returnTripFare",step:1,min:0,max:100})),r.createElement(R.Z,{item:!0,xs:12,sm:3},r.createElement(A.SeamlessInput,{readOnly:!0,className:u.element,fullWidth:!0,name:"reconciliationAmount",value:re.reconciliationAmount?re.reconciliationAmount:re.tripFair,onChange:ie,label:v("approximateReturnTripFare")}))),r.createElement(R.Z,{container:!0,spacing:3},r.createElement(R.Z,{item:!0,xs:12},r.createElement(A.SeamlessButton,{type:"submit",onClick:function(e){return ce()},className:(0,_.default)(u.element,u.button),disabled:re.vendorCapacity<re.orderCapacity,color:"primary",variant:"contained"},v("requestTrip")))))};var ir=n(47229);function or(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function cr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function sr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cr(Object(n),!0).forEach((function(t){(0,Fe.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ur=(0,j.Z)((function(e){return(0,W.Z)({root:{display:"inline-flex",flexDirection:"row",alignItems:"center",height:48,paddingLeft:20},spacingTop:{marginTop:e.spacing(3)},element:{marginTop:e.spacing(1),marginBottom:e.spacing(1),maxWidth:"250px"},w100:{width:"100%","& svg":{overflow:"visible"}},space:{marginTop:e.spacing(-1)},rowSpacing:{marginBottom:e.spacing(.5)},marginTop5:{fontWeight:700,"& button":{marginRight:"10px",marginTop:"15px"}}})}));const dr=function(e){var t=e.tasks,n=e.pickUpLocation,a=e.dropLocations,l=e.capacityOptions,i=e.dropOffLocation,c=e.setDropOffLocation,s=e.capacitySelected,u=e.setCapacitySelected,d=e.edit,m=e.mergeDetails,p=(0,U.useTranslation)().t,v=ur(),g=r.useState(!1),f=(0,w.Z)(g,2),E=(f[0],f[1]),y=r.useState([]),h=(0,w.Z)(y,2),Z=h[0],b=h[1],S=r.useState([]),I=(0,w.Z)(S,2),N=I[0],x=I[1],C=(0,o.useHistory)(),O=z(),k=O.showErrorMessage,P=O.showSuccessMessage,D=r.useState([]),B=(0,w.Z)(D,2),L=B[0],F=B[1],j=r.useState(),W=(0,w.Z)(j,2),q=W[0],_=W[1],V={plotOptions:{bar:{horizontal:!1,columnWidth:"20%",endingShape:"rounded"}},chart:{toolbar:{show:!1}},dataLabels:{enabled:!1},colors:["#006AE5","#444748"],stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{categories:[""],title:{text:p("vehicleCapacity")}},yaxis:{min:0,max:0,forceNiceScale:!0,title:{text:p("fare")},labels:{formatter:function(e){return 0!==e&&e>999?"".concat(e/(e<1e3?100:1e3),"k"):"".concat(e)}}},fill:{opacity:1}};r.useEffect((function(){E(!0),ve("?pickupLocation=".concat(n,"&dropLocation=").concat(i,"&totalCapacity=").concat(s)).then((function(e){if(0===e.resultCode){var t=e.fareAnalyticsResponses,n=t.filter((function(e){return e.vendor==(null==m?void 0:m.vendor)&&e.totalRate==(null==m?void 0:m.tripFare)}));d?(x(t),t&&0!==t.length&&(K(t),H(t,s))):d||(x(n),t&&0!==t.length&&(K(n),H(n,s)))}})).catch((function(e){C.replace("/home/trip/tasks/"),k(p("tripDetailsError"))})).finally((function(){return E(!1)}))}),[i,s,l]),r.useEffect((function(){b(t)}),[t]);var K=function(e){var t=e.reduce((function(e,t){return e[t.vendor]=e[t.vendor]||[],e[t.vendor].push(t),e}),Object.create(null)),n=[];Object.keys(t).forEach((function(e){var a=[];t[e].forEach((function(e){a.push(e.totalRate)})),n.push({name:e,data:a})})),F(n)},H=function(e,t){var n=sr({},V);n.yaxis.max=J(e),n.xaxis.categories=[];var a,l=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return or(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?or(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,l=function(){};return{s:l,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){o=!0,r=e},f:function(){try{i||null==n.return||n.return()}finally{if(o)throw r}}}}(e);try{for(l.s();!(a=l.n()).done;){var r=a.value;n.xaxis.categories.push("".concat(r.logisticType," ").concat(r.logisticVariant?r.logisticVariant:""," - ").concat(t))}}catch(e){l.e(e)}finally{l.f()}var i=n.xaxis.categories.filter((function(e,t){return n.xaxis.categories.indexOf(e)==t}));n.xaxis.categories=i,_(sr(sr({},V),n))},J=function(e){var t=e.reduce((function(e,t){return e.totalRate>t.totalRate?e:t})).totalRate;return 10*Math.ceil((t+1e3+1)/10)};return r.createElement(r.Fragment,null,r.createElement(R.Z,{container:!0,spacing:3,className:v.rowSpacing},r.createElement(R.Z,{item:!0,xs:12},r.createElement(M.Z,{variant:"h6",color:"primary",className:v.marginTop5},p("tripFare")))),r.createElement(R.Z,{container:!0,spacing:3,className:v.rowSpacing},r.createElement(R.Z,{item:!0,xs:12,md:3},r.createElement(A.SeamlessInput,{className:v.element,fullWidth:!0,label:p("pickUpLocation"),value:n,inputProps:{readOnly:!0}})),r.createElement(R.Z,{item:!0,xs:12,md:3},1===t.length&&d?r.createElement(A.SeamlessInput,{className:v.element,fullWidth:!0,label:p("dropLocation"),value:i,inputProps:{readOnly:!0}}):r.createElement(A.SeamlessDropDown,{className:v.element,fullWidth:!0,label:p("dropLocation"),value:i,options:a,onChange:function(e){return c(e.target.value)}})),t.length>1&&d&&r.createElement(R.Z,{item:!0,xs:12,md:3},r.createElement(A.SeamlessDropDown,{fullWidth:!0,className:v.element,value:s,label:p("Total Capacity"),options:l,onChange:function(e){return u(e.target.value)}}))),r.createElement("div",{id:"fair-chart",className:"".concat(v.spacingTop," ").concat(v.w100)},N&&0!==N.length&&r.createElement(r.Fragment,null,r.createElement(M.Z,{className:v.marginTop5},"Fare from ".concat(n," to ").concat(i)),q?r.createElement(ir.Z,{options:q,series:L,type:"bar",height:350}):null)),d&&r.createElement("div",{className:"".concat(v.spacingTop," ").concat(v.w100)},r.createElement(rr,{tripFareDetails:N,multiple:Z.length>1,data:Z,pickupLocation:n,dropLocations:a,capacityOptions:l,onFormSubmit:function(e){var t;E(!0),(t={additionalFare:0,additionalFareReason:"",data:{logisticType:e.logisticType?e.logisticType:"",orderCapacity:e.orderCapacity?Number(e.orderCapacity):0,priority:(e.priorityTrip?e.priorityTrip:"no")||("Priority"==e.selfLoader?"yes":"no"),selfLoader:"SelfLoader"==e.selfLoader?"yes":"no"},dropLocation:e.dropLocation?e.dropLocation:"",mergedOrderCount:e.mergedOrders?Number(e.mergedOrders):0,pickupLocation:e.pickupLocation?e.pickupLocation:"",taskList:e.taskList,tripCapacity:e.vendorCapacity?e.vendorCapacity:0,tripFare:e.tripFair?e.tripFair:0,vendor:e.vendor?e.vendor.split(":")[0].trim():"",penaltyPercentage:e.tripPenalty?e.tripPenalty:0,noOfOrdersUndelivered:e.ordersUndelivered?e.ordersUndelivered:0,reconciliationAmount:e.reconciliationAmount?e.reconciliationAmount:0},T("/aas/v1/delivery/request/external-trip",{method:"POST",body:t})).then((function(e){var t;200===e.resultCode?(P(p("requestTripSuccess")),C.replace("/home/trip/tasks/")):k((null==e||null===(t=e.resultMessage)||void 0===t?void 0:t.toUpperCase())||p("anErrorOccurred"))})).catch((function(e){k((null==e?void 0:e.message)||p("anErrorOccurred"))})).finally((function(){return E(!1)}))},setDropOffLocation:c,setCapacitySelected:u,capacitySelected:s,dropLocation:i})))};var mr=n(3898),pr=n(80378),vr=n(69244),gr=n(54146),fr=n(18469),Er=n(50065),yr=(0,j.Z)((function(e){return(0,W.Z)({innerTitle:{color:e.palette.secondary.light},element:{marginRight:e.spacing(1),marginBottom:e.spacing(1)},contentBox:{display:"contents"},orderBox:{border:"1px solid #EDEDED",margin:"10px",width:"100%",borderRadius:"10px",padding:"10px",background:"#F7F7F7"},spacingBottom:{marginBottom:e.spacing(2),marginTop:0},warnnig:{marginBottom:e.spacing(.5),marginTop:-2,color:"red",fontWeight:"bold"},rowSpacing:{marginBottom:e.spacing(.5),marginTop:e.spacing(1)},heading:{fontWeight:700,color:"black",fontSize:12},content:{marginLeft:e.spacing(1),borderRadius:"4"},iconBox:{color:"#ff5722",fontSize:"50px",margin:"0 20px"},date:{fontSize:"10px",fontStyle:"italic",color:"#ff5722"},time:{fontSize:"10px",fontStyle:"italic",color:"green"},marginTop5:{marginTop:"10px",fontWeight:700,"& button":{marginRight:"10px",marginTop:"15px"}},timelineRoot:{"& .MuiTimelineItem-missingOppositeContent:before":{padding:"0"},"& .MuiTimelineSeparator-root":{textAlign:"center"}}})})),hr=(0,V.Z)((function(e){return{root:{color:e.palette.primary.main,height:8,marginLeft:10},thumb:{"&.Mui-disabled":{backgroundColor:"#c3c3c3",border:"2px solid",height:24,width:24,marginTop:-8,marginLeft:-12},"&:focus, &:hover, &$active":{boxShadow:"inherit"}},active:{},valueLabel:{left:"calc(-50% + 4px)"},track:{height:8,borderRadius:4},rail:{height:8,borderRadius:4}}}))(tr.Z);const Zr=function(e){var t,n,a,l,i=e.mergeDetails,c=(0,U.useTranslation)().t,s=yr(),u=r.useState(!1),d=(0,w.Z)(u,2),m=(d[0],d[1]),p=r.useState([]),v=(0,w.Z)(p,2),g=v[0],f=v[1],E=r.useState(),y=(0,w.Z)(E,2),h=y[0],Z=y[1],b=ke(),S=(0,o.useHistory)(),I=z(),N=I.showErrorMessage,x=I.showSuccessMessage,C=I.showWarningMessage,O=(0,o.useParams)().mergeId,T=null==i||null===(t=i.createDate)||void 0===t?void 0:t.split(" ");r.useEffect((function(){m(!0),D(O).then((function(e){0===e.resultCode&&f(e.mergeOrderTaskModels)})).catch((function(e){return N(e)})).finally((function(){return m(!1)}))}),[]);var k=[],B=[];g.forEach((function(e){var t;k.push(e.mergeOrderEntity),B.push(null===(t=e.taskViewResponseList[0])||void 0===t?void 0:t.agentId)}));var L=k.find((function(e){return"REQUESTED"===e.status})),F=k.find((function(e){return"APPROVED"===e.status})),j=k.find((function(e){return"REJECTED"===e.status})),W=k.find((function(e){return"PROPOSED"===e.status})),q=F?null==F?void 0:F.createDate.split(" "):null==j?void 0:j.createDate.split(" "),_=W&&(null==W?void 0:W.createDate.split(" ")),V=null;try{V=i.data&&JSON.parse(i.data)}catch(e){}return r.createElement(r.Fragment,null,r.createElement(R.Z,{container:!0,spacing:3,className:s.rowSpacing},r.createElement(R.Z,{item:!0,xs:12},r.createElement(M.Z,{variant:"h6",color:"primary",className:s.marginTop5},c("tripLogisticsDetails")))),r.createElement(R.Z,null,r.createElement(pr.Z,{className:s.timelineRoot},r.createElement(R.Z,null,r.createElement(vr.Z,null,r.createElement(gr.Z,{style:{color:"#ff5722"}},r.createElement(M.Z,{variant:"caption",className:s.heading},c("tripLifeCycle")),r.createElement(mr.Z,{className:s.iconBox}),r.createElement("div",null,r.createElement(M.Z,{style:{color:"black"}},c("requested")),r.createElement(M.Z,{className:s.date},c("date"),": ",T?T[0]:""),r.createElement(M.Z,{className:s.time},c("time"),": ",T?T[1]:"")),r.createElement(fr.Z,{style:{height:"12px",color:"red"}})),r.createElement(Er.Z,{className:s.contentBox},r.createElement(R.Z,{container:!0,spacing:3,className:s.orderBox},r.createElement(R.Z,{item:!0,xs:12},r.createElement(M.Z,{variant:"h6",className:s.innerTitle},r.createElement("strong",null,c("requested")))),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:s.element,fullWidth:!0,name:"pickupLocation",value:null==i?void 0:i.pickupLocation,label:c("pickUpLocation")})),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:s.element,fullWidth:!0,name:"dropLocation",value:null==L?void 0:L.dropLocation,label:c("dropOffLocation")})),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:s.element,fullWidth:!0,name:"vendor",value:null==i?void 0:i.vendor,label:c("vendor")})),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:s.element,fullWidth:!0,name:"logisticType",value:null===(n=V)||void 0===n?void 0:n.logisticType,label:c("logisticType")})),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:s.element,fullWidth:!0,name:"tripFare",value:null==L?void 0:L.tripFare,label:c("tripFare")})),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:s.element,fullWidth:!0,name:"mergeOrders",value:null==i?void 0:i.mergedOrderCount,label:c("mergeOrders")})),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:s.element,fullWidth:!0,name:"tripCapacity",value:null==i?void 0:i.tripCapacity,label:c("tripCapacity")})),(null==i?void 0:i.mergedOrderCount)&&(null==i?void 0:i.mergedOrderCount)>1&&r.createElement(r.Fragment,null,r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:s.element,fullWidth:!0,name:"noOfOrdersUndelivered",value:null==i?void 0:i.noOfOrdersUndelivered,label:c("noOfOrdersUndelivered")})),r.createElement(R.Z,{item:!0,xs:4,sm:4,style:{marginTop:10}},r.createElement(M.Z,{className:s.spacingBottom,variant:"caption",gutterBottom:!0},"".concat(c("tripPenalty")," ( ").concat(null!=i&&i.penaltyPercentage?null==i?void 0:i.penaltyPercentage:0,"% )")),r.createElement(hr,{value:null!=i&&i.penaltyPercentage?null==i?void 0:i.penaltyPercentage:0,getAriaValueText:function(e){return"".concat(e,"%")},"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",disabled:!0,name:"tripPenalty"}),r.createElement(M.Z,{className:s.warnnig,variant:"caption",gutterBottom:!0},"".concat(c("note"),": ").concat(c("penaltyWarning"))))),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:s.element,fullWidth:!0,name:"reconciliationAmount",value:null==i?void 0:i.reconciliationAmount,label:c("returnTripFare")}))))),W?r.createElement(r.Fragment,null,r.createElement(vr.Z,null,r.createElement(gr.Z,{style:{color:"#ff5722"}},r.createElement(mr.Z,{className:s.iconBox}),r.createElement("div",null,r.createElement(M.Z,{variant:"body2",style:{color:"black"}},c("proposed")),r.createElement(M.Z,{className:s.date},c("date"),": ",_?_[0]:""),r.createElement(M.Z,{className:s.time},c("time"),": ",_?_[1]:"")),r.createElement(fr.Z,{style:{height:"12px",color:"red"}})),r.createElement(Er.Z,{className:s.contentBox},r.createElement(R.Z,{container:!0,spacing:3,className:s.orderBox},r.createElement(R.Z,{item:!0,xs:12},r.createElement(M.Z,{variant:"h6",className:s.innerTitle},r.createElement("strong",null,c("proposed")))),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:s.element,fullWidth:!0,name:"pickupLocation",value:null==i?void 0:i.pickupLocation,label:c("pickUpLocation")})),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:s.element,fullWidth:!0,name:"dropLocation",value:null==W?void 0:W.dropLocation,label:c("dropOffLocation")})),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:s.element,fullWidth:!0,name:"vendor",value:null==W?void 0:W.vendor,label:c("vendor")})),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:s.element,fullWidth:!0,name:"logisticType",value:null===(a=V)||void 0===a?void 0:a.logisticType,label:c("logisticType")})),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:s.element,fullWidth:!0,name:"tripCapacity",value:null==W?void 0:W.tripCapacity,label:c("tripCapacity")})),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:s.element,fullWidth:!0,name:"mergeOrders",value:null==W?void 0:W.mergedOrderCount,label:c("mergeOrders")})),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:s.element,fullWidth:!0,name:"tripFare",value:null==W?void 0:W.tripFare,label:c("tripFare")})),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:s.element,fullWidth:!0,name:"additionalFare",value:null==W?void 0:W.additionalFare,label:c("additionalFare")})),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:s.element,fullWidth:!0,name:"netTripFare",value:null==W?void 0:W.netTripFare,label:c("netTripFare")})),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:s.element,fullWidth:!0,name:"additionalFareReason",value:null==W?void 0:W.additionalFareReason,label:c("additionalFareReason")})),(null==i?void 0:i.mergedOrderCount)&&(null==i?void 0:i.mergedOrderCount)>1&&r.createElement(r.Fragment,null,r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:s.element,fullWidth:!0,name:"noOfOrdersUndelivered",value:null==i?void 0:i.noOfOrdersUndelivered,label:c("noOfOrdersUndelivered")})),r.createElement(R.Z,{item:!0,xs:4,sm:4,style:{marginTop:10}},r.createElement(M.Z,{className:s.spacingBottom,variant:"caption",gutterBottom:!0},"".concat(c("tripPenalty")," ( ").concat(null!=i&&i.penaltyPercentage?null==i?void 0:i.penaltyPercentage:0,"% )")),r.createElement(hr,{value:null!=i&&i.penaltyPercentage?null==i?void 0:i.penaltyPercentage:0,getAriaValueText:function(e){return"".concat(e,"%")},"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",disabled:!0,name:"tripPenalty"}),r.createElement(M.Z,{className:s.warnnig,variant:"caption",gutterBottom:!0},"".concat(c("note"),": ").concat(c("penaltyWarning"))))),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:s.element,fullWidth:!0,name:"reconciliationAmount",value:null==i?void 0:i.reconciliationAmount,label:c("returnTripFare")}))))),r.createElement(vr.Z,null,r.createElement(gr.Z,{style:{color:"#ff5722"}},r.createElement(mr.Z,{className:s.iconBox}),r.createElement("div",null,W?r.createElement(M.Z,{variant:"body2",style:{color:"black"}},c("approvedBy"),": ",null==W?void 0:W.actionBy):r.createElement(M.Z,{variant:"body2",style:{color:"black"}},c("rejectedBy"),": ",null==j?void 0:j.actionBy),r.createElement(M.Z,{className:s.date},c("date"),": ",_?_[0]:""),r.createElement(M.Z,{className:s.time},c("time"),": ",_?_[1]:"")),r.createElement(fr.Z,{style:{height:"12px",color:"red"}})),r.createElement(Er.Z,{className:s.contentBox},null!=F&&F.actionBy?r.createElement(R.Z,{container:!0,spacing:6,className:s.orderBox},(null==b?void 0:b.requestedPrincipalId.toLowerCase())===(null==W||null===(l=W.vendor)||void 0===l?void 0:l.toLowerCase())?r.createElement(r.Fragment,null,r.createElement(R.Z,{item:!0,xs:12,sm:4},r.createElement(Ee,{resellerId:null==i?void 0:i.vendor,mergeId:null==i?void 0:i.mergedOrderId,handleChange:Z})),r.createElement(R.Z,{item:!0,xs:12},r.createElement(A.SeamlessButton,{type:"submit",className:s.content,color:"primary",disabled:!h,variant:"contained",onClick:function(){return function(e){if(e!==c("APPROVED")||h){var t={};t&&e===c("APPROVED")?(t.action=e,t.agentId=h):t&&e===c("REJECTED")&&(t.action=e),t.mergeOrderId=i.mergedOrderId,P(t).then((function(e){x(e),S.push("/home/trip/requestedtrips")})).catch((function(e){return N(e)}))}else C(c("agentIdRequiredForApproval"))}(c("APPROVED"))}},c("approve")))):r.createElement(R.Z,{item:!0,xs:12},r.createElement(M.Z,{variant:"h6",className:s.innerTitle},F?r.createElement("strong",null,c("approved")):r.createElement("strong",null,c("rejected"))),r.createElement(M.Z,{variant:"subtitle1"},F?r.createElement("strong",null,c("waitingForAgentAssignmet")):r.createElement("strong",null,c("rejectedReason"))))):r.createElement(R.Z,{container:!0,spacing:3,className:s.orderBox},r.createElement(R.Z,{item:!0,xs:12},r.createElement(M.Z,{variant:"h6",className:s.innerTitle},r.createElement("strong",null,c("approved"))),r.createElement(M.Z,{variant:"subtitle1"},r.createElement("strong",null,c("approvedBy")," ",null==W?void 0:W.actionBy," ",B[B.length-1]," ",c("isAssigned")))))))):r.createElement(vr.Z,null,r.createElement(gr.Z,{style:{color:"#ff5722"}},r.createElement(mr.Z,{className:s.iconBox}),r.createElement("div",null,F?r.createElement(M.Z,{variant:"body2",style:{color:"black"}},c("approvedBy"),": ",null==F?void 0:F.vendor):r.createElement(M.Z,{variant:"body2",style:{color:"black"}},c("rejectedBy"),": ",null==j?void 0:j.vendor),r.createElement(M.Z,{className:s.date},c("date"),": ",q?q[0]:""),r.createElement(M.Z,{className:s.time},c("time"),": ",q?q[1]:"")),r.createElement(fr.Z,null)),r.createElement(Er.Z,{className:s.contentBox},r.createElement(R.Z,{container:!0,spacing:3,className:s.orderBox},r.createElement(R.Z,{item:!0,xs:12},r.createElement(M.Z,{variant:"h6",className:s.innerTitle},F?r.createElement("strong",null,c("approved")):r.createElement("strong",null,c("rejected"))),r.createElement(M.Z,{variant:"subtitle1"},F?r.createElement("strong",null,c("approvedBy")," ",null==F?void 0:F.vendor," ",B[B.length-1]," ",c("isAssigned")):r.createElement("strong",null,c("rejectedReason"))))))),!(null!=F&&F.actionBy)&&r.createElement(vr.Z,null,r.createElement(gr.Z,null,r.createElement(mr.Z,{className:s.iconBox}),r.createElement("div",null,F?r.createElement(M.Z,{variant:"body2",style:{color:"black"}},c("ready")):r.createElement(M.Z,{variant:"body2",style:{color:"black"}},c("expired")),r.createElement(M.Z,{className:s.date},c("date"),": ",q?q[0]:""),r.createElement(M.Z,{className:s.time},c("time"),": ",q?q[1]:""))),r.createElement(Er.Z,{className:s.contentBox},r.createElement(R.Z,{container:!0,spacing:3,className:s.orderBox},r.createElement(R.Z,{item:!0,xs:12},r.createElement(M.Z,{variant:"h6",className:s.innerTitle},F?r.createElement("strong",null,c("ready")):r.createElement("strong",null,c("expired"))),r.createElement(M.Z,{variant:"subtitle1"},F?r.createElement("strong",null,c("readyDescription")):r.createElement("strong",null,c("expiredDescription")))))))))))};function br(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var Sr=(0,j.Z)((function(e){return(0,W.Z)({element:{marginTop:e.spacing(1),marginBottom:e.spacing(1),maxWidth:"250px"},content:{marginLeft:e.spacing(2),borderRadius:"4"},spacingBottom:{marginBottom:e.spacing(2),marginTop:0},warnnig:{marginBottom:e.spacing(.5),marginTop:-2,color:"red",fontWeight:"bold"},innerTitle:{color:e.palette.secondary.light}})})),Ir=(0,V.Z)((function(e){return{root:{color:e.palette.primary.main,height:8,marginLeft:10},thumb:{"&.Mui-disabled":{backgroundColor:"#c3c3c3",border:"2px solid",height:24,width:24,marginTop:-8,marginLeft:-12},"&:focus, &:hover, &$active":{boxShadow:"inherit"}},active:{},valueLabel:{left:"calc(-50% + 4px)"},track:{height:8,borderRadius:4},rail:{height:8,borderRadius:4}}}))(tr.Z);const Nr=function(e){var t,n,a,l=e.mergeData,i=e.tasks,c=e.setDropOffLocation,s=e.setDropLocations,u=e.dropLocations,d=e.capacityOptions,m=e.setCapacityOptions,p=e.setCapacitySelected,v=e.setTasks,g=e.edit,f=e.proposed,E=e.onFormSubmit,y=e.handleApproveReject,h=e.mergeHistory,Z=e.dropOffLocation,b=(0,U.useTranslation)().t,S={pickupLocation:"",dropLocation:"",vendor:"",mergedOrders:"",orderCapacity:"",tripFare:"",additionalFare:"",taskList:[""],data:{logisticType:"",priority:"",selfLoader:"",orderCapacity:"00.00"},mergeOrderId:"",totalFare:"",agentId:""},I=Sr(),N=ke(),x=(0,o.useHistory)(),C=(null==l?void 0:l.data)&&JSON.parse(null==l?void 0:l.data),O=r.useState(S),T=(0,w.Z)(O,2),k=T[0],P=T[1],D=r.useState([]),L=(0,w.Z)(D,2),F=L[0],j=L[1],W=r.useState(!1),q=(0,w.Z)(W,2),_=q[0],V=q[1],K=r.useState(),H=(0,w.Z)(K,2),J=H[0],Q=H[1],Y=r.useState([]),G=(0,w.Z)(Y,2),$=G[0],X=G[1],ee=z().showErrorMessage;r.useEffect((function(){if(i){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?br(Object(n),!0).forEach((function(t){(0,Fe.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):br(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},S);e.pickupLocation=null==l?void 0:l.pickupLocation,e.dropLocation=Z||u[0].value,e.vendor=null==l?void 0:l.vendor,e.mergedOrders=i.length,e.taskList=i.map((function(e){return null==e?void 0:e.id})),e.data.logisticType=null==C?void 0:C.logisticType,e.data.priority=null==C?void 0:C.priority,e.data.selfLoader=null==C?void 0:C.selfLoader,e.mergeOrderId=null==l?void 0:l.mergedOrderId,e.tripFare=null==l?void 0:l.tripFare,e.agentId=J||"";var t=i.map((function(e){var t,n=JSON.parse(null==e?void 0:e.data);return null==n||null===(t=n.orderWeight)||void 0===t?void 0:t.value})).reduce((function(e,t){return e+t}),0);e.orderCapacity="".concat(t),j(e.taskList),P(e)}}),[i]);var te=null;"no"==C.priority&&"no"==C.selfLoader||("yes"==C.selfLoader?te="Selfloader":"yes"==C.priority&&(te="Priority"));var ne=(0,ln.TA)({initialValues:k,onSubmit:function(e){E&&E(e)},enableReinitialize:!0}),ae=ne.values,le=ne.handleChange,re=ne.handleSubmit,ie=ne.setFieldValue,oe=[],ce=[];h.forEach((function(e){var t;oe.push(e.mergeOrderEntity),ce.push(null===(t=e.taskViewResponseList[0])||void 0===t?void 0:t.agentId)}));var se=oe.find((function(e){return"PROPOSED"===e.status})),ue=(null==se?void 0:se.data)&&JSON.parse(null==se?void 0:se.data);return r.useEffect((function(){var e,t;"PROPOSED"!==(null==l?void 0:l.status)&&""==ae.additionalFare&&null==ae.additionalFareReason&&ve("?pickupLocation=".concat(null==l?void 0:l.pickupLocation,"&dropLocation=").concat(null==ae?void 0:ae.dropLocation,"&totalCapacity=").concat(null==ae?void 0:ae.orderCapacity)).then((function(e){if(0===e.resultCode){var t,n=e.fareAnalyticsResponses,a=n.filter((function(e){return e.vendor==(null==l?void 0:l.vendor)&&e.logisticType==(null==C?void 0:C.logisticType)&&e.logisticVariant==te}));n&&0!==n.length&&(X(a),ie("totalFare","".concat(null===(t=a[0])||void 0===t?void 0:t.totalRate)))}})).catch((function(e){x.replace("/home/trip/tasks/requestedtrips/"),ee(b("tripDetailsError"))})).finally((function(){return V(!1)})),ae.additionalFare&&ie("totalFare",Number("".concat(ae.additionalFare))+Number("".concat(null===(t=$[0])||void 0===t?void 0:t.totalRate))),ie("tripFare",null===(e=$[0])||void 0===e?void 0:e.totalRate)}),[ae]),r.useEffect((function(){ie("agentId",J||"")}),[J]),r.createElement(r.Fragment,null,r.createElement(R.Z,{item:!0,xs:12},r.createElement(er,{tasks:i,loading:_,setDropOffLocation:c,setDropLocations:s,dropLocations:u,capacityOptions:d,setCapacityOptions:m,setCapacitySelected:p,edit:g,setTasks:v,proposed:f,vendor:null==l?void 0:l.vendor})),r.createElement(R.Z,{item:!0,xs:12},r.createElement(M.Z,{variant:"h6",className:I.innerTitle},r.createElement("strong",null,b("proposed")))),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:I.element,fullWidth:!0,name:"pickupLocation",value:null==l?void 0:l.pickupLocation,onChange:le,label:b("pickUpLocation")})),r.createElement(R.Z,{item:!0,xs:12,sm:3},i.length>1&&!se?r.createElement(A.SeamlessDropDown,{fullWidth:!0,className:I.element,label:b("dropOffLocation"),options:u,name:"dropLocation",onChange:function(e){le(e),c(e.target.value)}}):r.createElement(A.SeamlessInput,{disabled:!0,className:I.element,fullWidth:!0,name:"dropLocation",onChange:le,value:se?se.dropLocation:ae.dropLocation,label:b("dropOffLocation")})),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:I.element,fullWidth:!0,name:"logisticType",onChange:le,value:ue?ue.logisticType:null==C?void 0:C.logisticType,label:b("logisticType")})),se&&r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:I.element,fullWidth:!0,name:"vendor",onChange:le,value:null==se?void 0:se.vendor,label:b("vendor")})),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:I.element,fullWidth:!0,name:"mergeOrders",onChange:le,value:se?null==se?void 0:se.mergedOrderCount:ae.mergedOrders,label:b("mergeOrders")})),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:I.element,fullWidth:!0,name:"orderCapacity",value:se?null==ue?void 0:ue.orderCapacity:ae.orderCapacity,onChange:le,label:i.length>1?b("tripCapacity"):b("orderCapacity")})),!se&&r.createElement(r.Fragment,null,r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{className:I.element,fullWidth:!0,name:"additionalFare",onChange:le,type:"number",label:b("additionalFare")})),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{className:I.element,fullWidth:!0,name:"additionalFareReason",onChange:le,value:ae.additionalFareReason,label:b("additionalFareReason")}))),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:I.element,fullWidth:!0,name:"tripFare",value:se?null==se?void 0:se.tripFare:null===(t=$[0])||void 0===t?void 0:t.totalRate,label:b("tripFare")})),se?r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:I.element,fullWidth:!0,name:"netTripFare",value:null==se?void 0:se.netTripFare,label:b("netTripFare")})):r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:I.element,fullWidth:!0,name:"netTripFare",value:"undefined"!==ae.totalFare?ae.totalFare:"",label:b("netTripFare")})),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:I.element,fullWidth:!0,name:"noOfOrdersUndelivered",value:null==l?void 0:l.noOfOrdersUndelivered,label:b("noOfOrdersUndelivered")})),r.createElement(R.Z,{item:!0,xs:4,sm:4,style:{marginTop:10}},r.createElement(M.Z,{className:I.spacingBottom,variant:"caption",gutterBottom:!0},"".concat(b("tripPenalty")," ( ").concat(null!=l&&l.penaltyPercentage?null==l?void 0:l.penaltyPercentage:0,"% )")),r.createElement(Ir,{value:null!=l&&l.penaltyPercentage?null==l?void 0:l.penaltyPercentage:0,getAriaValueText:function(e){return"".concat(e,"%")},"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",disabled:!0,name:"tripPenalty"}),r.createElement(M.Z,{className:I.warnnig,variant:"caption",gutterBottom:!0},"".concat(b("note"),": ").concat(b("penaltyWarning")))),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:I.element,fullWidth:!0,name:"reconciliationAmount",value:null==l?void 0:l.reconciliationAmount,label:b("returnTripFare")})),(null==N?void 0:N.requestedPrincipalId.toLowerCase())===(null==l||null===(n=l.actionBy)||void 0===n?void 0:n.toLowerCase())&&r.createElement(r.Fragment,null,r.createElement(R.Z,{item:!0,xs:4,sm:4},!se&&(null==N?void 0:N.requestedPrincipalId.toLowerCase())===(null==l||null===(a=l.vendor)||void 0===a?void 0:a.toLowerCase())&&r.createElement(Ee,{resellerId:null==l?void 0:l.vendor,mergeId:null==l?void 0:l.mergedOrderId,mergedTaskIds:F,handleChange:Q})),r.createElement(R.Z,{item:!0,xs:12},r.createElement(B.Z,{display:"flex",flexDirection:"row",style:{marginBottom:5}},se?r.createElement(r.Fragment,null,r.createElement(A.SeamlessButton,{className:I.content,color:"primary",variant:"contained",onClick:function(){return y(b("APPROVED"))}},b("approve")),r.createElement(A.SeamlessButton,{className:I.content,color:"primary",variant:"outlined",onClick:function(){return y(b("REJECTED"))}},b("reject"))):r.createElement(A.SeamlessButton,{className:I.content,color:"primary",variant:"contained",onClick:function(e){return re()}},b("proposeTrip"))))))};var xr=(0,j.Z)((function(e){return(0,W.Z)({marginTop5:{marginBottom:e.spacing(1),fontWeight:700,"& button":{marginRight:"10px",marginTop:"15px"}},iconBox:{color:"#ff5722",fontSize:"50px",margin:"0 20px"},spacingBottom:{marginBottom:e.spacing(2),marginTop:0},heading:{fontWeight:700,color:"black",fontSize:12},element:{marginTop:e.spacing(1),marginBottom:e.spacing(1),maxWidth:"250px"},contentBox:{display:"contents"},orderBox:{border:"1px solid #EDEDED",margin:"10px",width:"100%",borderRadius:"10px",padding:"10px",background:"#F7F7F7"},innerTitle:{color:e.palette.secondary.light},content:{marginLeft:e.spacing(2),borderRadius:"4"},date:{fontSize:"10px",fontStyle:"italic",color:"#ff5722"},time:{fontSize:"10px",fontStyle:"italic",color:"green"},warnnig:{marginBottom:e.spacing(.5),marginTop:-2,color:"red",fontWeight:"bold"},timelineRoot:{"& .MuiTimelineItem-missingOppositeContent:before":{padding:"0"},"& .MuiTimelineSeparator-root":{textAlign:"center"}}})})),wr=(0,V.Z)((function(e){return{root:{color:e.palette.primary.main,height:8,marginLeft:10},thumb:{"&.Mui-disabled":{backgroundColor:"#c3c3c3",border:"2px solid",height:24,width:24,marginTop:-8,marginLeft:-12},"&:focus, &:hover, &$active":{boxShadow:"inherit"}},active:{},valueLabel:{left:"calc(-50% + 4px)"},track:{height:8,borderRadius:4},rail:{height:8,borderRadius:4}}}))(tr.Z);const Cr=function(e){var t,n,a=e.mergeData,i=e.tasks,c=e.setDropOffLocation,s=e.setDropLocations,u=e.dropLocations,d=e.capacityOptions,m=e.setCapacityOptions,p=e.dropOffLocation,v=e.setCapacitySelected,g=e.setTasks,f=e.edit,E=(0,U.useTranslation)().t,y=xr(),h=ke(),Z=(0,o.useHistory)(),b=(0,o.useParams)().mergeId,I=(null==a?void 0:a.data)&&JSON.parse(null==a?void 0:a.data),N=null==a||null===(t=a.createDate)||void 0===t?void 0:t.split(" "),x=r.useState(),C=(0,w.Z)(x,2),O=C[0],k=C[1],L=r.useState(!1),F=(0,w.Z)(L,2),j=F[0],W=F[1],q=r.useState(!1),_=(0,w.Z)(q,2),V=_[0],K=_[1],H=r.useState([]),J=(0,w.Z)(H,2),Q=J[0],Y=J[1],G=l()().checkPermission,$=z(),X=$.showErrorMessage,ee=$.showSuccessMessage,te=$.showWarningMessage,ne=function(e){if(e!==E("APPROVED")||O){var t={};t&&e===E("APPROVED")?(t.action=e,t.agentId=O):t&&e===E("REJECTED")&&(t.action=e),t.mergeOrderId=a.mergedOrderId,P(t).then((function(e){ee(e),Z.push("/home/trip/requestedtrips")})).catch((function(e){return X(e)}))}else te(E("agentIdRequiredForApproval"))};r.useEffect((function(){W(!0),D(b).then((function(e){0===e.resultCode&&Y(e.mergeOrderTaskModels)})).catch((function(e){return X(e)})).finally((function(){return W(!1)}))}),[]);var ae=[];Q.forEach((function(e){ae.push(e.mergeOrderEntity)}));var le=ae.find((function(e){return"PROPOSED"===e.status})),re=ae.find((function(e){return"REQUESTED"===e.status})),ie=(null==re?void 0:re.data)&&JSON.parse(null==re?void 0:re.data),oe=le&&(null==le?void 0:le.createDate.split(" "));return r.createElement(r.Fragment,null,r.createElement(R.Z,{container:!0,spacing:3},r.createElement(R.Z,{item:!0,xs:12},r.createElement(M.Z,{variant:"h6",color:"primary",className:y.marginTop5},E("tripLogisticDetails")))),r.createElement(R.Z,null,r.createElement(pr.Z,{className:y.timelineRoot},r.createElement(R.Z,null,r.createElement(vr.Z,null,r.createElement(gr.Z,{style:{color:"#ff5722"}},r.createElement(M.Z,{variant:"caption",className:y.heading},E("tripLifeCycle")),r.createElement(mr.Z,{className:y.iconBox}),r.createElement("div",null,r.createElement(M.Z,{style:{color:"black"}},E("requested")),r.createElement(M.Z,{className:y.date},E("date"),": ",N?N[0]:""),r.createElement(M.Z,{className:y.time},E("time"),": ",N?N[1]:"")),r.createElement(fr.Z,{style:{height:"12px",color:"red"}})),r.createElement(Er.Z,{className:y.contentBox},r.createElement(R.Z,{container:!0,direction:"column"},r.createElement(R.Z,{container:!0,spacing:3,className:y.orderBox},r.createElement(R.Z,{item:!0,xs:12},r.createElement(M.Z,{variant:"h6",className:y.innerTitle},r.createElement("strong",null,E("requested")))),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:y.element,fullWidth:!0,name:"pickupLocation",value:(null==a?void 0:a.pickupLocation)||"",label:E("pickUpLocation")})),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:y.element,fullWidth:!0,name:"dropLocation",value:re?null==re?void 0:re.dropLocation:(null==a?void 0:a.dropLocation)||"",label:E("dropOffLocation")})),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:y.element,fullWidth:!0,name:"vendor",value:(null==a?void 0:a.vendor)||"",label:E("vendor")})),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:y.element,fullWidth:!0,name:"logisticType",value:(null==I?void 0:I.logisticType)||"",label:E("logisticType")})),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:y.element,fullWidth:!0,name:"tripFare",value:re?null==re?void 0:re.tripFare:(null==a?void 0:a.tripFare)||"",label:E("tripFare")})),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:y.element,fullWidth:!0,name:"mergeOrders",value:re?null==re?void 0:re.mergedOrderCount:(null==a?void 0:a.mergedOrderCount)||"",label:E("mergeOrders")})),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:y.element,fullWidth:!0,name:"tripCapacity",value:(null==ie?void 0:ie.orderCapacity)||"",label:E("tripCapacity")})),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:y.element,fullWidth:!0,name:"noOfOrdersUndelivered",value:(null==a?void 0:a.noOfOrdersUndelivered)||"",label:E("noOfOrdersUndelivered")})),r.createElement(R.Z,{item:!0,xs:4,sm:4,style:{marginTop:10}},r.createElement(M.Z,{className:y.spacingBottom,variant:"caption",gutterBottom:!0},"".concat(E("tripPenalty")," ( ").concat(null!=a&&a.penaltyPercentage?null==a?void 0:a.penaltyPercentage:0,"% )")),r.createElement(wr,{value:null!=a&&a.penaltyPercentage?null==a?void 0:a.penaltyPercentage:0,getAriaValueText:function(e){return"".concat(e,"%")},"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",disabled:!0,name:"tripPenalty"}),r.createElement(M.Z,{className:y.warnnig,variant:"caption",gutterBottom:!0},"".concat(E("note"),": ").concat(E("penaltyWarning")))),r.createElement(R.Z,{item:!0,xs:4,sm:4},r.createElement(A.SeamlessInput,{readOnly:!0,className:y.element,fullWidth:!0,name:"reconciliationAmount",value:(null==a?void 0:a.reconciliationAmount)||"",label:E("returnTripFare")})),(null==h?void 0:h.requestedPrincipalId.toLowerCase())===(null==a||null===(n=a.actionBy)||void 0===n?void 0:n.toLowerCase())&&"REQUESTED"===(null==a?void 0:a.status)&&r.createElement(r.Fragment,null,!V&&r.createElement(R.Z,{item:!0,xs:4,sm:4,style:{marginTop:8}},r.createElement(Ee,{resellerId:null==a?void 0:a.vendor,mergeId:null==a?void 0:a.mergedOrderId,handleChange:k})),r.createElement(R.Z,{item:!0,xs:12},r.createElement(B.Z,{display:"flex",flexDirection:"row",style:{marginBottom:5}},r.createElement(A.SeamlessButton,{className:y.content,color:"primary",variant:"contained",onClick:function(){return ne(E("APPROVED"))}},E("approve")),r.createElement(A.SeamlessButton,{className:y.content,color:"primary",variant:"outlined",onClick:function(){return ne(E("REJECTED"))}},E("reject")),G(S)&&r.createElement(A.SeamlessButton,{className:y.content,color:"primary",variant:"contained",onClick:function(){return K(!0)}},E("propose"))))))))),r.createElement(vr.Z,null,(V||"PROPOSED"===(null==a?void 0:a.status))&&r.createElement(r.Fragment,null,r.createElement(gr.Z,{style:{color:"#ff5722"}},r.createElement(mr.Z,{className:y.iconBox}),r.createElement("div",null,r.createElement(M.Z,{variant:"body2",style:{color:"black"}},E("proposed")),r.createElement(M.Z,{className:y.date},le?"".concat(E("date"),":"):""," ",oe?oe[0]:""),r.createElement(M.Z,{className:y.time},le?"".concat(E("time"),":"):""," ",oe?oe[1]:"")),r.createElement(fr.Z,{style:{height:"12px",color:"red"}})),r.createElement(Er.Z,{className:y.contentBox},r.createElement(R.Z,{container:!0,direction:"column"},r.createElement(R.Z,{container:!0,spacing:3,className:y.orderBox},r.createElement(Nr,{mergeData:a,tasks:i,loading:j,setDropOffLocation:c,setDropLocations:s,dropLocations:u,capacityOptions:d,setCapacityOptions:m,setCapacitySelected:v,edit:f,setTasks:g,proposed:V,onFormSubmit:function(e){var t;W(!0),(t={pickupLocation:e.pickupLocation?e.pickupLocation:"",dropLocation:e.dropLocation?e.dropLocation:"",vendor:e.vendor?e.vendor:"",mergedOrderCount:e.mergedOrders?e.mergedOrders:"",tripCapacity:e.orderCapacity?Number(e.orderCapacity):0,additionalFareReason:e.additionalFareReason?e.additionalFareReason:"",tripFare:e.tripFare?Number(e.tripFare):0,additionalFare:e.additionalFare?e.additionalFare:0,taskList:e.taskList?e.taskList:[],data:{logisticType:e.data.logisticType?e.data.logisticType:"",orderCapacity:e.orderCapacity?Number(e.orderCapacity):0,priority:e.data.priority?e.data.priority:"no",selfLoader:e.data.selfLoader?e.data.selfLoader:"no"},mergeOrderId:e.mergeOrderId?e.mergeOrderId:0,agentId:e.agentId?e.agentId:""},T("/aas/v1/delivery/propose/external-trip",{method:"POST",body:t})).then((function(e){var t;200===e.resultCode?(ee(E("proposeTripSuccess")),Z.replace("/home/trip/requestedtrips/")):X((null==e||null===(t=e.resultMessage)||void 0===t?void 0:t.toUpperCase())||E("anErrorOccurred"))})).catch((function(e){X((null==e?void 0:e.message)||E("anErrorOccurred"))})).finally((function(){return W(!1)}))},handleApproveReject:ne,mergeHistory:Q,dropOffLocation:p}))))))))))};var Or=n(14306),Tr=n(18106),kr=(0,j.Z)((function(e){return(0,W.Z)({icon:{marginTop:e.spacing(8),marginLeft:e.spacing(2)},stat:{margin:e.spacing(1)}})}));const Pr=function(e){var t,n=e.taskList,a=e.mergeDetails,l=e.loading,i=e.edit,o=kr(),c=[],s=[];if(i){var u=[];n.forEach((function(e){var t,n=JSON.parse(null==e?void 0:e.data),a=null==n||null===(t=n.dropPoint)||void 0===t?void 0:t.additionalFields.find((function(e){return"logisticLocation"===e.name}));u.find((function(e){return e.key===a.value}))||u.push({key:a.value,value:a.value})})),s=u}else s=n.filter((function(e){var t=[];return!(t.indexOf(null==e?void 0:e.dropLogisticLocation)>-1||(t.push(null==e?void 0:e.dropLogisticLocation),0))})).map((function(e){return{key:null==e?void 0:e.dropLogisticLocation,value:null==e?void 0:e.dropLogisticLocation}}));i&&(c=n.map((function(e){var t,n=JSON.parse(null==e?void 0:e.data);return(null==n||null===(t=n.pickupPoint)||void 0===t?void 0:t.additionalFields.find((function(e){return"logisticLocation"===e.name}))).value})));var d=[],m=n.map((function(e,t){if(i){var n,a=JSON.parse(null==e?void 0:e.data);return null==a||null===(n=a.orderWeight)||void 0===n?void 0:n.value}return null==e?void 0:e.capacity}));!function e(t,n,a,l,r){n>a?r.push(l):(e(t,n+1,a,l+t[n],r),e(t,n+1,a,l,r))}(m,0,m.length,0,d);var p=r.useState(d.filter((function(e,t){return d.indexOf(e)===t&&0!==e})).sort().map((function(e){return{key:e,value:e}}))),v=(0,w.Z)(p,2),g=v[0],f=v[1],E=r.useState(s),y=(0,w.Z)(E,2),h=y[0],Z=y[1],b=r.useState(h[0].value),S=(0,w.Z)(b,2),I=S[0],N=S[1],x=r.useState(g.length?null===(t=g[0])||void 0===t?void 0:t.value:0),C=(0,w.Z)(x,2),O=C[0],T=C[1],k=r.useState(n),P=(0,w.Z)(k,2),D=P[0],L=P[1],F=ke();return r.createElement(r.Fragment,null,!i&&r.createElement(R.Z,{container:!0},r.createElement(R.Z,{container:!0},r.createElement(B.Z,{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-evenly",padding:"10px"},r.createElement(Ne,{className:o.stat,label:"REQUESTED ID",value:null==a?void 0:a.mergedOrderId},r.createElement(Or.Z,{color:"primary",style:{fontSize:60},className:o.icon})),r.createElement(Ne,{className:o.stat,label:"STATUS",value:null==a?void 0:a.status,labelColor:"#ff5722"},r.createElement(Tr.Z,{style:{color:"#ff5722",fontSize:60},className:o.icon}))))),(i||"REQUESTED"===(null==a?void 0:a.status)||"PROPOSED"===(null==a?void 0:a.status))&&r.createElement(r.Fragment,null,1===n.length&&i?null:r.createElement(R.Z,{container:!0,style:{height:"100%",width:"100%"}},r.createElement(er,{tasks:n,loading:l,setDropOffLocation:N,setDropLocations:Z,dropLocations:h,capacityOptions:g,setCapacityOptions:f,setCapacitySelected:T,edit:i,setTasks:L})),r.createElement(R.Z,{container:!0,style:{height:"100%",width:"100%"}},(null==a?void 0:a.vendor.toLowerCase())!==F.requestedPrincipalId.toLowerCase()&&"PROPOSED"!==(null==a?void 0:a.status)&&r.createElement(dr,{tasks:D,edit:i,pickUpLocation:i?c[0]:null==a?void 0:a.pickupLocation,dropLocations:h,capacityOptions:g,dropOffLocation:I,setDropOffLocation:N,capacitySelected:O,setCapacitySelected:T,mergeDetails:a})),!i&&r.createElement(R.Z,{container:!0,style:{height:"100%",width:"100%"}},r.createElement(Cr,{mergeData:a,loading:l,tasks:D,dropOffLocation:I,setDropOffLocation:N,setDropLocations:Z,dropLocations:h,capacityOptions:g,setCapacityOptions:f,setCapacitySelected:T,edit:i,setTasks:L}))),("APPROVED"===(null==a?void 0:a.status)||"REJECTED"===(null==a?void 0:a.status))&&r.createElement(R.Z,{container:!0,style:{height:"100%",width:"100%"}},r.createElement(Zr,{mergeDetails:a})))},Dr=function(){var e=(0,U.useTranslation)().t,t=(0,o.useLocation)().state;return r.createElement(A.SeamlessContainer,{title:e("tripFareTitle"),description:e("tripFareDescription")},r.createElement(Pr,{loading:!1,taskList:null==t?void 0:t.data,edit:!0}))},Br=function(){var e=(0,o.useRouteMatch)().path,t=l()().AccessControlled;return r.createElement(o.Switch,null,r.createElement(o.Route,{path:e+"/view/:taskId/tripfair"},r.createElement(Dr,null)),r.createElement(o.Route,{path:e+"/view/:taskId"},r.createElement(t,{feature:m},r.createElement(Le,null))),r.createElement(o.Route,{path:e+"/merged-tasks"},r.createElement(Dr,null)),r.createElement(o.Route,null,r.createElement(t,{feature:d},r.createElement(Yl,null))))};var Lr=(0,j.Z)((function(e){return(0,W.Z)({dialogWrapper:{textAlign:"center","& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginBottom:e.spacing(3)},btnSpace:{marginRight:e.spacing(2)},bottomSpace:{marginBottom:e.spacing(2)}})}));const Rr=function(){var e=(0,o.useParams)().id,t=(0,U.useTranslation)().t,n=z(),a=n.showErrorMessage,l=n.showSuccessMessage,i=n.showWarningMessage,c=Lr(),s=(0,o.useHistory)(),u=r.useState(!1),d=(0,w.Z)(u,2),m=d[0],p=d[1],v=r.useState(0),g=(0,w.Z)(v,2),f=g[0],E=g[1],y=r.useState(!1),h=(0,w.Z)(y,2),Z=h[0],b=h[1],S=r.useState({}),I=(0,w.Z)(S,2),N=I[0],x=I[1],C=function(){b(!1)};return r.useEffect((function(){p(!0),function(e){return T("/tms/v1/trip/".concat(e))}(e).then((function(e){0==e.resultCode?x(e):i(e)})).catch((function(e){return a(e.message||e.resultMessage||t("anErrorOccurred"))})).finally((function(){return p(!1)}))}),[]),r.createElement(A.SeamlessContainer,{title:t("viewTripPageTitle"),description:t("viewTripPageDescription")},e&&r.createElement(B.Z,null,r.createElement(B.Z,{display:"flex",flexDirection:"row",justifyContent:"flex-end"},r.createElement(A.SeamlessButton,{variant:"contained",color:"primary",disabled:"ENDED"===(null==N?void 0:N.tripStatus),className:c.bottomSpace,onClick:function(){b(!0),E(e)}},t("cancelTrip"))),r.createElement(A.SeamlessDialog,{open:Z,onClose:C,className:c.dialogWrapper,maxWidth:"md",fullWidth:!0},r.createElement(r.Fragment,null,r.createElement("div",{className:c.modalContentSpacing},r.createElement(M.Z,{gutterBottom:!0,id:"transition-modal-title",variant:"h6",className:c.fontHeavy},t("cancelTrip")),r.createElement(M.Z,{gutterBottom:!0,id:"transition-modal-title",variant:"body1",className:c.fontHeavy},t("confirmCancelTrip")," ",e," ",t("questionMark"))),r.createElement("div",{className:c.modalContentSpacing},r.createElement(A.SeamlessButton,{type:"button",variant:"outlined",color:"primary",className:c.btnSpace,onClick:C},t("noConfirmationButton")),r.createElement(A.SeamlessButton,{type:"button",variant:"contained",color:"primary",onClick:function(){(function(e){return T("/tms/v1/trip/admin/cancel",{method:"PUT",body:{tripId:e}})})(f).then((function(e){b(!1),l(e.message),s.push("/home/trip/trips")})).catch((function(e){return a(e)}))}},t("yesConfirmationButton")))))),r.createElement(Et,{"data-testid":"view-trip",loading:m,data:N}),m?r.createElement(F.Z,null):null)},Fr=function(){var e=(0,U.useTranslation)().t;return r.createElement(A.SeamlessContainer,{title:e("viewAllTripPageTitle"),description:e("viewAllTripPageDescription")},r.createElement("div",{style:{height:600,width:"100%"}},r.createElement(ot,null)))},Mr=function(){var e=(0,U.useTranslation)().t;return r.createElement(A.SeamlessContainer,{title:e("viewAllRouteOptimizePageTitle"),description:e("viewAllRouteOptimizationPageDescription")},r.createElement("div",{style:{height:600,width:"100%"}},r.createElement(Rt,null)))};var jr=n(76945),Wr=n(66054),Ar=(0,j.Z)((function(e){return(0,W.Z)({fieldHeading:{fontWeight:"bold",textTransform:"uppercase",fontSize:20,marginLeft:30,textAlign:"center"}})}));const qr=function(e){var t=e.loading,n=e.depositSummary,a=e.isColletion,l=e.colletionSummary,i=e.deleteDeposit,o=(0,U.useTranslation)().t,c=Ar(),s=[{field:"productType",headerName:o("productType"),sortable:!0,width:200},{field:"productSKU",headerName:o("productSKU"),sortable:!0,width:130},{field:"startSerial",headerName:o("startSerial"),sortable:!1,width:110,renderCell:function(e){return r.createElement(r.Fragment,null,JSON.parse(JSON.stringify(e.value))?JSON.parse(JSON.stringify(e.value)):"-")}},{field:"endSerial",headerName:o("endSerial"),sortable:!1,width:110,renderCell:function(e){return r.createElement(r.Fragment,null,JSON.parse(JSON.stringify(e.value))?JSON.parse(JSON.stringify(e.value)):"-")}},{field:"serialNo",headerName:o("serialNo"),width:130,sortable:!0,renderCell:function(e){return r.createElement(r.Fragment,null,JSON.parse(JSON.stringify(e.value))?JSON.parse(JSON.stringify(e.value)):"-")}},{field:"quantity",headerName:o("quantity"),sortable:!1,width:100,renderCell:function(e){return r.createElement(r.Fragment,null,JSON.parse(JSON.stringify(e.value))?JSON.parse(JSON.stringify(e.value)):1)}},{field:"status",headerName:o("status"),sortable:!1,width:100},{field:"action",headerName:o("action"),sortable:!1,filterable:!1,renderCell:function(e){return r.createElement("div",null,r.createElement(We.Z,{size:"small",color:"primary",variant:"text","aria-label":"password policy action buttons"},r.createElement(Ze.ZP,{title:"Delete"},r.createElement(L.Z,{onClick:function(){return i(e)},style:{marginTop:12}},r.createElement(jr.Z,{fontSize:"small",style:{color:Wr.Z[400]}})))))},width:100}],u=[{field:"id",headerName:o("id"),sortable:!0,flex:1},{field:"amount",headerName:o("amount"),sortable:!0,flex:1},{field:"status",headerName:o("status"),sortable:!1,flex:1}];return r.createElement(r.Fragment,null,r.createElement(R.Z,{item:!0,xs:12},r.createElement(M.Z,{variant:"h6",color:"primary",className:c.fieldHeading},o("depositSummary"))),r.createElement(R.Z,{item:!0,xs:12},r.createElement(je(),{loading:t,columnBuffer:2,rows:a?l:n,getRowId:function(e){return e.startSerial},columns:a?u:s,disableColumnFilter:!0,disableDensitySelector:!0,disableColumnSelector:!0,autoHeight:!0})))};function Ur(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function zr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ur(Object(n),!0).forEach((function(t){(0,Fe.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ur(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _r=(0,j.Z)((function(e){return(0,W.Z)({icon:{marginLeft:e.spacing(2)},stat:{margin:e.spacing(1)},root:{"&.Mui-disabled":{pointerEvents:"auto"}},modalContentSpacing:{marginTop:e.spacing(3),marginBottom:e.spacing(3)},buttonMargin:{marginRight:e.spacing(2)},fontHeavy:{fontWeight:e.typography.fontWeightBold},fieldHeading:{fontWeight:"bold",textTransform:"uppercase",fontSize:18,marginLeft:30,marginTop:10},dialogWrapper:{"& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},container:{maxHeight:440},element:{textAlign:"left",marginTop:e.spacing(2),marginRight:e.spacing(2)},primaryButton:{color:e.palette.primary.contrastText,margin:e.spacing(2),backgroundColor:e.palette.primary.main,padding:"".concat(e.spacing(1),"px ").concat(e.spacing(3),"px"),borderRadius:e.shape.borderRadius}})})),Vr=0;const Kr=function(e){var t,n,a,l,i=(0,H.Z)({},e),c=null==i||null===(t=i.location)||void 0===t?void 0:t.state,s=i.match.params,u=s.tripId,d=s.agentId,m=null===(n=i.location)||void 0===n?void 0:n.state,p=m.totalCashCollected,v=m.isCollection,g=_r(),f=(0,U.useTranslation)().t,E=z().showWarningMessage,y=(0,o.useHistory)(),h=r.useReducer(qt,c),Z=(0,w.Z)(h,2),b=Z[0],S=Z[1],I=r.useState(!1),N=(0,w.Z)(I,2),C=N[0],O=(N[1],r.useState([])),T=(0,w.Z)(O,2),k=T[0],P=T[1],D=r.useState(),F=(0,w.Z)(D,2),j=F[0],W=F[1],q=r.useState({inventory_Id:0,batchId:"",data:"",inventoryId:"",startSerial:"",endSerial:"",quantity:null,ownerHistory:"",ownerId:"",productSKU:"",refNo:"",serialNo:"",productType:"",collectionAmount:"",status:"",internalOrderId:""}),_=(0,w.Z)(q,2),V=_[0],K=_[1],J=r.useState(!1),Q=(0,w.Z)(J,2),Y=Q[0],G=Q[1],$=r.useState(!1),X=(0,w.Z)($,2),ee=X[0],te=X[1],ne=r.useState(!1),ae=(0,w.Z)(ne,2),le=ae[0],re=ae[1],ie=r.useState(""),oe=(0,w.Z)(ie,2),ce=oe[0],se=oe[1],ue=r.useState(0),de=(0,w.Z)(ue,2),me=de[0],pe=de[1],ve=r.useState(null==p?void 0:p.amount),ge=(0,w.Z)(ve,2),fe=ge[0],Ee=ge[1],ye=r.useState([]),he=(0,w.Z)(ye,2),be=he[0],Se=he[1],Ie=r.useState([]),xe=(0,w.Z)(Ie,2),we=xe[0],Ce=xe[1],Oe=(0,kn.cI)({mode:"onSubmit",defaultValues:V}),Te=Oe.handleSubmit,ke=Oe.control,Pe=Oe.register,De=Oe.getValues,Be=Oe.reset,Le=De(),Fe=r.useCallback((function(){var e,t=null==b||null===(e=b.selectedOrder)||void 0===e?void 0:e.orderRows,n=[];null==t||t.forEach((function(e){n.push(null==e?void 0:e.product),P(n)}))}),[b.selectedOrder]);r.useEffect((function(){v||Fe()}),[]);var Me=r.useCallback((function(e){var t,n=null==b||null===(t=b.selectedOrder)||void 0===t?void 0:t.orderRows;null==n||n.map((function(t){var n;if(t.product.productSKU===(null==e||null===(n=e.target)||void 0===n?void 0:n.value)){"SERIALIZED"===t.product.productType?te(!0):te(!1);var a=t.inventoryList;a&&a.map((function(e,n){Vr+=1,e.productType=t.product.productType,e.inventory_Id=Vr,e.id||(e.id=Vr)})),W(a)}}))}),[null==b||null===(a=b.selectedOrder)||void 0===a?void 0:a.orderRows]),Ae=[{field:"serialNo",headerName:f("serialNo"),flex:1,sortable:!0},{field:"quantity",headerName:f("quantity"),sortable:!0,flex:1,renderCell:function(e){return r.createElement(r.Fragment,null,JSON.parse(JSON.stringify(e.value))?JSON.parse(JSON.stringify(e.value)):1)}},{field:"actions",headerName:f("actions"),sortable:!1,renderCell:function(e){return r.createElement("div",null,r.createElement(We.Z,{size:"small",color:"primary",variant:"text"},r.createElement(Ze.ZP,{title:f("edit")},r.createElement(L.Z,{disabled:!0,color:"primary"},r.createElement(dn.Z,{fontSize:"small"})))))},flex:1}],qe=[{field:"startSerial",headerName:f("startSerial"),sortable:!0,flex:1,renderCell:function(e){return r.createElement(r.Fragment,null,JSON.parse(JSON.stringify(e.value))?JSON.parse(JSON.stringify(e.value)):"-")}},{field:"endSerial",headerName:f("endSerial"),sortable:!0,flex:1,renderCell:function(e){return r.createElement(r.Fragment,null,JSON.parse(JSON.stringify(e.value))?JSON.parse(JSON.stringify(e.value)):"-")}},{field:"quantity",headerName:f("quantity"),sortable:!0,flex:1,renderCell:function(e){return r.createElement(r.Fragment,null,JSON.parse(JSON.stringify(e.value))?JSON.parse(JSON.stringify(e.value)):1)}},{field:"actions",headerName:f("actions"),sortable:!1,renderCell:function(e){var t,n,a,l=e.getValue("quantity");return r.createElement("div",null,r.createElement(We.Z,{size:"small",color:"primary",variant:"text"},r.createElement(Ze.ZP,{title:f("edit")},r.createElement(L.Z,{onClick:function(t){G(!0),K(e.row)},disabled:!l||1===parseInt(l)||(t=e,n=t.row.id,a=!1,be.forEach((function(e){e.id!==n||(a=!0)})),a),color:"primary"},r.createElement(dn.Z,{fontSize:"small"})))))},flex:1}],Ue=[];return r.useEffect((function(){be.length>0&&S({type:"Proudctselect",payload:be})}),[be]),r.useEffect((function(){if(v){var e;(null===(e=b.collectionSummary)||void 0===e?void 0:e.reduce((function(e,t){return parseInt(e)+parseInt(t.amount)}),0))===(null==p?void 0:p.amount)&&re(!0)}else{var t,n,a,l=null===(t=b.selectedOrder)||void 0===t||null===(n=t.orderRows)||void 0===n?void 0:n.map((function(e){return null==e?void 0:e.quantity}));(l&&l.reduce((function(e,t){return parseInt(e)+parseInt(t.quantity)}),0))===(null===(a=b.rowData)||void 0===a?void 0:a.reduce((function(e,t){return parseInt(e)+parseInt(t.quantity?t.quantity:1)}),0))&&re(!0)}}),[b.collectionSummary,b.rowData]),r.useEffect((function(){if(le){var e=[],t=[],n=[],a=[],l={amount:{currency:"",value:0,positive:!0,negative:!0,zero:!0},reason:""},r={currency:"",value:0,positive:!0,negative:!0,zero:!0};if(!v&&b.rowData&&b.rowData.length>0){var i=b.rowData.filter((function(e){return"DEPOSIT"===e.status}));n=JSON.parse(JSON.stringify(i));var o=b.rowData.filter((function(e){return"DEPOSIT"!==e.status}));a=JSON.parse(JSON.stringify(o))}if(n.length>0){var c={},s=[];n.map((function(e){c.orderId=e.refNo,c.internalOrderId=e.internalOrderId,delete e.status,delete e.internalOrderId,delete e.id,delete e.inventory_Id,e.ownerId=null,s.push(e),c.inventories=s})),e.push(c)}if(a.length>0){var u={},d=[];a.map((function(e){u.orderId=e.refNo,u.internalOrderId=e.internalOrderId,delete e.status,delete e.internalOrderId,delete e.id,delete e.inventory_Id,e.ownerId=null,d.push(e),u.inventories=d})),t.push(u)}if(v){r.currency=p.currency,r.value=p.amount;var m=b.collectionSummary.filter((function(e){return"DEPOSIT"!==e.status})),g=null==m?void 0:m.reduce((function(e,t){return parseInt(e)+parseInt(t.amount)}),0);l.amount.currency=p.currency,l.amount.value=g,l&&r&&S({type:"mark_collection_as_done",payload:{missingCash:l,totalCash:r,markAsDone:le}})}else(e.length>0||t.length>0)&&S({type:"mark_order_as_done",payload:{receivedStockDetails:e,missingStockDetails:t,markAsDone:le}})}}),[le]),r.createElement(r.Fragment,null,r.createElement(R.Z,{container:!0},r.createElement(R.Z,{container:!0},r.createElement(B.Z,{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-evenly",padding:"10px"},r.createElement(Ne,{className:g.stat,label:f(v?"tripId":"internalOrderId"),value:v?u:null==b||null===(l=b.selectedOrder)||void 0===l?void 0:l.orderId},r.createElement(Mt.Z,{color:"primary",style:{fontSize:60},className:g.icon})),r.createElement(Ne,{className:g.stat,label:"STATUS",value:b.orderRecon?"Completed":"Pending",labelColor:"#7caf01"},r.createElement(Ft.Z,{style:{color:"#7caf01",fontSize:60},className:g.icon}))))),r.createElement(R.Z,{container:!0,spacing:3},r.createElement(R.Z,{item:!0,xs:12},r.createElement(M.Z,{variant:"h6",className:g.fieldHeading,color:"primary"},f(v?"depositCollection":"depositInventory"))),r.createElement(R.Z,{item:!0,xs:12,md:3,style:{alignSelf:"center"}},r.createElement(M.Z,{variant:"body1",style:{marginLeft:10,marginTop:10}},f(v?"collection":"product"))),r.createElement(R.Z,{item:!0,xs:12,sm:7},v?r.createElement(A.SeamlessInput,{name:"collectionAmount",inputRef:Pe,type:"number",className:g.element,id:"collection-amount",style:{width:"70%"},onChange:function(e){return function(e){var t;if(parseInt(e.target.value)<=(null===(t=b.totalCashCollected)||void 0===t?void 0:t.amount)){var n,a=null==e||null===(n=e.target)||void 0===n?void 0:n.value;if(a){var l,r=(null===(l=b.totalCashCollected)||void 0===l?void 0:l.amount)-parseInt(a);pe(a),Ee(r)}}else e.target.value?E(f("invalidInput")):(pe(0),Ee(b.totalCashCollected.amount))}(e)},required:!0,defaultValue:Le.collectionAmount,placeholder:f("collectionAmount")}):r.createElement(A.SeamlessDropDown,{variant:"standard",id:"product-drop-down",required:!0,options:[{value:"Choose",key:f("choose")}].concat((0,x.Z)(k.map((function(e){return{key:e.productSKU,value:e.productSKU}})))),onChange:function(e){return Me(e)}})),r.createElement(R.Z,{item:!0,xs:12,md:3},r.createElement(M.Z,{variant:"body1",style:{marginLeft:10,marginTop:10}},f("status"))),r.createElement(R.Z,{item:!0,xs:12,sm:7},r.createElement(A.SeamlessDropDown,{id:"status-drop-down",required:!0,options:[{value:"Choose",key:f("choose")}].concat((0,x.Z)([{key:"DEPOSIT",value:"DEPOSIT"},{key:"LOST",value:"LOST"},{key:"STOLEN",value:"STOLEN"}].map((function(e){return{key:e.value,value:e.key}})))),onChange:function(e){var t;return se(null==e||null===(t=e.target)||void 0===t?void 0:t.value)}})),v&&r.createElement(r.Fragment,null,r.createElement(R.Z,{item:!0,xs:12,md:3,style:{alignSelf:"center"}},r.createElement(M.Z,{variant:"body1",style:{marginLeft:10,marginTop:10}},f("remainingAmount"))),r.createElement(R.Z,{item:!0,xs:12,sm:6},r.createElement(A.SeamlessInput,{name:"remainingAmount",inputRef:Pe,type:"number",className:g.element,id:"remaining-amount",style:{width:"50%"},value:fe,disabled:!0,placeholder:f("remainingAmount")}))),r.createElement(R.Z,{item:!0,xs:12},r.createElement(A.SeamlessDialog,{open:Y,onClose:function(){return G(!1)},className:g.dialogWrapper,maxWidth:"sm",fullWidth:!0},r.createElement(r.Fragment,null,r.createElement("div",{className:g.modalContentSpacing},r.createElement(M.Z,{gutterBottom:!0,id:"transition-modal-title",variant:"h4",className:g.fontHeavy},null!=V&&V.startSerial?"".concat(f("splittingTitle")," (").concat(null==V?void 0:V.startSerial," - ").concat(null==V?void 0:V.endSerial,")"):"".concat(f("splittingTitleWithQuantity")," (").concat(null==V?void 0:V.quantity,")")),null!=V&&V.startSerial?r.createElement(r.Fragment,null,r.createElement(A.SeamlessInput,{name:"startSerial",type:"text",className:g.element,id:"start-Serial-drop-down",fullWidth:!0,defaultValue:null==V?void 0:V.startSerial,required:!0,label:f("startSerial"),disabled:!0}),r.createElement(kn.Qr,{control:ke,rules:{required:!0},render:function(e){var t=e.onChange,n=e.value,a=e.ref,l=(0,Re.Z)(e,["onChange","value","ref"]);return r.createElement(A.SeamlessInput,(0,H.Z)({className:g.element,id:"end-Serial-drop-down",fullWidth:!0,required:!0,type:"number",label:f("endSerial"),helperText:f("rangeToHelperText"),onChange:t,value:n,inputRef:a},l))},name:"endSerial"})):r.createElement(kn.Qr,{control:ke,rules:{required:!0},render:function(e){var t=e.onChange,n=e.value,a=e.ref,l=(0,Re.Z)(e,["onChange","value","ref"]);return r.createElement(A.SeamlessInput,(0,H.Z)({className:g.element,id:"end-Serial-drop-down",fullWidth:!0,required:!0,type:"number",label:f("quantity"),helperText:f("quantityHelperText"),onInput:function(e){e.target.value=e.target.value.replace(/[^1-9]*/g,"")},onChange:function(e){t(e)},value:n,inputRef:a},l))},name:"quantity"})),r.createElement(A.SeamlessButton,{type:"button",variant:"outlined",color:"primary",className:g.buttonMargin,onClick:function(){return G(!1)}},f("closeButton")),r.createElement(A.SeamlessButton,{id:"seamless-inventory-form",variant:"contained",color:"primary",onClick:Te((function(e){return function(e){if(j)if(parseInt(e.endSerial)>=parseInt(V.startSerial)&&parseInt(e.endSerial)<=parseInt(V.endSerial)||parseInt(null==e?void 0:e.quantity)<parseInt(V.quantity)){var t=j.filter((function(e){return e.inventory_Id!==V.inventory_Id})),n=parseInt(e.endSerial)-parseInt(V.startSerial)+1,a={},l={};if(e.endSerial){Vr+=1,a=zr(zr({},V),{},{endSerial:e.endSerial,id:Vr,inventory_Id:Vr,quantity:n});var r=parseInt(V.endSerial)-parseInt(e.endSerial);Vr+=1,l=zr(zr({},V),{},{startSerial:parseInt(e.endSerial)+1,id:Vr,inventory_Id:Vr,quantity:r})}else if(e.quantity){Vr+=1;var i=parseInt(V.quantity)-parseInt(null==e?void 0:e.quantity);a=zr(zr({},V),{},{id:Vr,inventory_Id:Vr,quantity:Math.floor(e.quantity)}),Vr+=1,l=zr(zr({},V),{},{id:Vr,inventory_Id:Vr,quantity:i})}e.endSerial&&parseInt(l.endSerial)>=parseInt(l.startSerial)||e.quantity?(W([a,l].concat((0,x.Z)(t))),S({type:"inventory_splitted",payload:[a,l].concat((0,x.Z)(t))}),G(!1)):(W([a].concat((0,x.Z)(t))),E(f("startSerialError"))),G(!1)}else E(f("invalidInput"))}(e)}))},f("submitButton")))),!v&&r.createElement(je(),{loading:C,columnBuffer:2,rows:j||[],getRowId:function(e){return e.inventory_Id},columns:ee?Ae:qe,checkboxSelection:!0,disableColumnFilter:!0,disableDensitySelector:!0,disableColumnSelector:!0,onSelectionModelChange:function(e){!function(e){var t=(0,x.Z)(e.selectionModel),n=[];t.forEach((function(e){n.push(j&&j.find((function(t){var n;return(null==t||null===(n=t.id)||void 0===n?void 0:n.toString())===e})))})),Ce(n)}(e)},autoHeight:!0}),r.createElement(A.SeamlessButton,{style:{float:"right"},type:"button",variant:"contained",color:"primary",onClick:function(e){!function(){var e=[];if(v){var t={};Vr+=1,me>0?(t.id=Vr,t.status=ce,t.amount=me,t.amountFilter=fe,t.currency=p.currency,ce&&S({type:"collection_submited",payload:t}),pe(0)):E(f("invalidInput"))}else{if(!k||!j)return null;var n=we&&we.map((function(e){return(null==e?void 0:e.id)||(null==e?void 0:e.inventory_Id)}));e=be.filter((function(e){return n.indexOf(e.id)<0})),we&&we.map((function(e){var t;e.internalOrderId=null==b||null===(t=b.selectedOrder)||void 0===t?void 0:t.internalOrderId,e.status=ce,Ue.push(e)}))}ce||"Choose"===ce?Se([].concat((0,x.Z)(e),Ue)):E(f("statusInvalid"))}(),Be({collectionAmount:""})}},f("update")))),r.createElement(R.Z,{container:!0,spacing:3},r.createElement(qr,{loading:C,isColletion:v,depositSummary:be.length>0?be:[],colletionSummary:b.collectionSummary,deleteDeposit:function(e){var t=e.row.id;if(re(!1),!v){var n=be.findIndex((function(e){return e.id===t}));-1!==n&&(be.splice(n,1),Se((0,x.Z)(be)))}}})),r.createElement(A.SeamlessButton,{type:"button",variant:"contained",color:"primary",onClick:function(){return y.goBack()}},f("close")),r.createElement(A.SeamlessButton,{type:"button",variant:"contained",color:"primary",className:g.primaryButton,disabled:!le,onClick:function(){return b.rowData=[],y.push("/home/trip/trips/tripreconciliation/".concat(u,"/").concat(d),b),void re(!1)}},f("markAsDone")))},Hr=function(e){var t=(0,U.useTranslation)().t,n=(0,o.useRouteMatch)().path;return r.createElement(A.SeamlessContainer,{title:t("viewReconciliationTitle"),description:t("viewReconciliationTitlePageDescription")},r.createElement("div",{style:{height:"100%",width:"100%"}},r.createElement(o.Switch,null,r.createElement(o.Route,{path:n+"/order"},(function(e){return r.createElement(Kr,e)})),r.createElement(o.Route,null,(function(e){return r.createElement(zt,e)})))))},Jr=function(){var e=(0,o.useRouteMatch)().path,t=l()().AccessControlled;return r.createElement(o.Switch,null,r.createElement(o.Route,{path:e+"/view/:id"},r.createElement(t,{feature:v},r.createElement(Rr,null))),r.createElement(o.Route,{path:e+"/:tripId/route-optimization"},r.createElement(Mr,null)),r.createElement(o.Route,{path:e+"/tripreconciliation/:tripId/:agentId"},r.createElement(Hr,null)),r.createElement(o.Route,null,r.createElement(t,{feature:p},r.createElement(Fr,null))))};(0,j.Z)((function(e){return(0,W.Z)({dialogWrapper:{textAlign:"center","& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginBottom:e.spacing(3)},btnSpace:{marginRight:e.spacing(2)},bottomSpace:{marginBottom:e.spacing(2)}})}));const Qr=function(){var e=r.useState(!1),t=(0,w.Z)(e,2),n=t[0],a=t[1],l=(0,o.useParams)().id,i=(0,U.useTranslation)().t,c=z(),s=c.showErrorMessage,u=c.showWarningMessage,d=r.useState(null),m=(0,w.Z)(d,2),p=m[0],v=m[1];return r.useEffect((function(){a(!0),oe(l).then((function(e){0==e.resultCode?v(e.agent):u(e.resultMessage)})).catch((function(e){return s(e.message||e.resultMessage||i("anErrorOccurred"))})).finally((function(){return a(!1)}))}),[]),r.createElement(A.SeamlessContainer,{title:i("viewAgentPageTitle"),description:i("viewAgentPageDescription")},r.createElement(yn,{"data-testid":"view-agent",loading:n,agentData:p}),n?r.createElement(F.Z,null):null)};var Yr=n(88995),Gr=(0,j.Z)((function(e){return(0,W.Z)({root:{padding:"".concat(e.spacing(.5),"px ").concat(e.spacing(1),"px"),display:"flex",alignItems:"center",width:250},iconButton:{padding:10}})}));const $r=function(){var e=(0,U.useTranslation)().t,t=Gr(),n=r.useState([]),a=(0,w.Z)(n,2),l=a[0],i=a[1],o=r.useState(!1),c=(0,w.Z)(o,2),s=(c[0],c[1]),u=r.useState(""),d=(0,w.Z)(u,2),m=d[0],p=d[1],v=z(),g=v.showErrorMessage,f=v.showWarningMessage;function E(){var e;s(!0),(e=m,T("/aas/v1/delivery/".concat(e,"/agent"))).then((function(e){0==e.resultCode?i(e.agentsList):f(e)})).catch((function(e){return g(e.message?e.message:e.resultMessage)})).finally((function(){return s(!1)}))}return r.createElement(A.SeamlessContainer,{title:e("viewAllAgentsPageTitle"),description:e("viewAllAgentsPageDescription")},r.createElement("section",{style:{alignSelf:"center"}},r.createElement(he.Z,{className:t.root},r.createElement(za.Z,{name:"dealerId",onChange:function(e){return p(e.target.value)},onKeyUp:function(e){var t=e.key,n=e.keyCode;"Enter"!==t&&13!==n||E()},placeholder:e("enterResellerId"),value:m}),r.createElement(zn.Z,{onClick:E,type:"submit",disabled:!m,className:t.iconButton,"aria-label":"search"},r.createElement(Yr.Z,null)))),r.createElement("div",{style:{height:600,width:"100%"}},r.createElement(vn,{searchAgents:l})))};var Xr={userName:"",agentName:"",description:"",maxCount:0,volumeCapacity:0,volumeCapacityUnit:"",weightCapacity:0,reserveVolumeCapacity:0,reserveWeightCapacity:0,reserveCount:0,weightCapacityUnit:""};const ei=function(){var e=r.useState(!1),t=(0,w.Z)(e,2),n=t[0],a=t[1],l=z(),i=l.showErrorMessage,c=l.showSuccessMessage,s=l.showWarningMessage,u=(0,o.useParams)().id,d=(0,U.useTranslation)().t,m=(0,o.useHistory)(),p=r.useState(Xr),v=(0,w.Z)(p,2),g=v[0],f=v[1];r.useEffect((function(){oe(u).then((function(e){return f(e.agent)}))}),[]);var E=r.useCallback((function(e){var t,n;a(!0),(t=u,n=e,T("/aas/v1/delivery/agent/".concat(t),{method:"PUT",body:n})).then((function(e){0==e.resultCode?(c(e),m.push("/home/trip/agents")):s(e)})).catch((function(e){return i(e)})).finally((function(){return a(!1)}))}),[]);return r.createElement(A.SeamlessContainer,{title:d("editAgentCapacityPageTitle"),description:d("editAgentCapacityPageDescription")},r.createElement(fn,{"data-testid":"edit-agent-capacity",edit:!0,data:g,onFormSubmit:function(e){return E(e)}}),n?r.createElement(F.Z,null):null)},ti=function(){var e=(0,o.useRouteMatch)().path,t=l()().AccessControlled;return r.createElement(o.Switch,null,r.createElement(o.Route,{path:e+"/view/:id"},r.createElement(t,{feature:s},r.createElement(Qr,null))),r.createElement(o.Route,{path:e+"/edit/:id"},r.createElement(t,{feature:u},r.createElement(ei,null))),r.createElement(o.Route,null,r.createElement(t,{feature:c},r.createElement($r,null))))},ni=function(){var e=(0,U.useTranslation)().t;return r.createElement(A.SeamlessContainer,{title:e("viewAllManualTripPageTitle"),description:e("viewAllManualTripPageDescription")},r.createElement("div",{style:{height:600,width:"100%"}},r.createElement(In,null)))};var ai={agentId:"",taskId:0,tripId:"",taskList:[],triggerDate:"",warehouseId:""};const li=function(){var e,t,n=r.useReducer(al.Z,al.E),a=(0,w.Z)(n,2),l=a[0],i=a[1],c=r.useState(!1),s=(0,w.Z)(c,2),u=s[0],d=s[1],m=r.useState(ai),p=(0,w.Z)(m,2),v=p[0],g=p[1],f=(0,q.useSnackbar)().enqueueSnackbar,E=(0,o.useParams)(),y=E.id,h=E.agentId,Z=(0,o.useHistory)(),b=r.useCallback((function(e){var t;d(!0),(t=e,T("".concat(ce,"/addTask"),{method:"PUT",body:t})).then((function(e){f(e.resultMessage,{variant:"success"}),Z.push("/home/trip/manualtrips/".concat(y))})).catch((function(e){return f(e.resultMessage||e.resultDescription,{variant:"error"})})).finally((function(){d(!1),g(e)}))}),[]);return r.createElement(r.Fragment,null,r.createElement(rl,{"data-testid":"create-product-category",data:(e=v,t=[],Object.keys(e).reduce((function(n,a){return t.includes(a)||(n[a]=e[a]),n}),{})),onReset:function(){return Z.push("/home/trip/manualtrips/".concat(y,"/").concat(h,"/tasks/create"))},state:l,dispatch:i,onFormSubmit:function(e){return b(e)}}),u?r.createElement(F.Z,null):null)};var ri=(0,j.Z)((function(e){return(0,W.Z)({dialogWrapper:{textAlign:"center","& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginBottom:e.spacing(3)},btnSpace:{marginRight:e.spacing(2)},bottomSpace:{marginBottom:e.spacing(2)}})}));const ii=function(){var e=(0,o.useParams)().id,t=(0,U.useTranslation)().t,n=z().showErrorMessage,a=(ri(),r.useState(!1)),l=(0,w.Z)(a,2),i=l[0],c=l[1],s=r.useState({}),u=(0,w.Z)(s,2),d=u[0],m=u[1],p=r.useState(""),v=(0,w.Z)(p,2),g=(v[0],v[1]),f=r.useState(!1),E=(0,w.Z)(f,2);return E[0],E[1],r.useEffect((function(){var a;c(!0),(a=e,T("".concat(ce,"/taskDetailsByTaskId?taskId=").concat(a))).then((function(e){m(e),g(null==e?void 0:e.agentId)})).catch((function(e){return n(e.message||e.resultMessage||t("anErrorOccurred"))})).finally((function(){return c(!1)}))}),[]),r.createElement(A.SeamlessContainer,{title:t("viewManualTaskPageTitle"),description:t("viewManualTaskPageDescription")},r.createElement(ul,{"data-testid":"view-trip-task",loading:i,tripTaskData:d}),i?r.createElement(F.Z,null):null)},oi=function(){var e=(0,U.useTranslation)().t;return r.createElement(A.SeamlessContainer,{title:e("viewAllManualTripTaskPageTitle"),description:e("viewAllManualTripTaskPageDescription")},r.createElement("div",{style:{height:600,width:"100%"}},r.createElement(Cn,null)))},ci=function(){var e=(0,o.useRouteMatch)().path;return r.createElement(o.Switch,null,r.createElement(o.Route,{path:e+"/task/:id"},r.createElement(ii,null)),r.createElement(o.Route,{path:e+"/:agentId/:triggerDate/tasks/create"},r.createElement(li,null)),r.createElement(o.Route,null,r.createElement(oi,null)))},si=function(){var e=(0,o.useRouteMatch)().path,t=l()().AccessControlled;return r.createElement(o.Switch,null,r.createElement(o.Route,{path:e+"/:id"},r.createElement(t,{feature:f},r.createElement(ci,null))),r.createElement(o.Route,null,r.createElement(t,{feature:g},r.createElement(ni,null))))},ui=function(){var e=(0,U.useTranslation)().t;return r.createElement(A.SeamlessContainer,{title:e("viewAllRateCardPageTitle"),description:e("viewAllRateCardPageDescription")},r.createElement("div",{style:{height:600,width:"100%"}},r.createElement(Zl,null)))},di=function(){var e=(0,o.useRouteMatch)().path,t=l()().AccessControlled;return r.createElement(o.Switch,null,r.createElement(o.Route,{path:e},r.createElement(t,{feature:E},r.createElement(ui,null))))},mi=function(){var e=(0,U.useTranslation)().t;return r.createElement(A.SeamlessContainer,{title:e("viewAllMergedTaskPageTitle"),description:e("viewAllMergedTaskPageDescription")},r.createElement("div",{style:{height:600,width:"100%"}},r.createElement(Tl,null)))},pi=function(){var e=(0,U.useTranslation)().t,t=r.useState(!1),n=(0,w.Z)(t,2),a=n[0],l=n[1],i=z().showErrorMessage,c=r.useState(),s=(0,w.Z)(c,2),u=s[0],d=s[1],m=r.useState(),p=(0,w.Z)(m,2),v=p[0],g=p[1],f=(0,o.useParams)().mergeId;return r.useEffect((function(){var e;l(!0),(e={mergeOrderId:f},T("".concat(k,"/mergeOrder?").concat(C.stringify(e)))).then((function(e){var t;0===e.resultCode&&(d(e.mergeOrderEntity),g(null===(t=e.tasks)||void 0===t?void 0:t.taskEntityList))})).catch((function(e){return i(e)})).finally((function(){return l(!1)}))}),[]),r.createElement(A.SeamlessContainer,{title:e("viewMergedTaskPageTitle"),description:e("viewMergedTaskPageDescription")},u&&v?r.createElement(Pr,{loading:a,mergeDetails:u,taskList:v,edit:!1}):r.createElement(F.Z,null))},vi=function(){var e=(0,o.useRouteMatch)().path,t=l()().AccessControlled;return r.createElement(o.Switch,null,r.createElement(o.Route,{path:e+"/view/:mergeId"},r.createElement(t,{feature:h},r.createElement(pi,null))),r.createElement(o.Route,null,r.createElement(t,{feature:y},r.createElement(mi,null))))},gi=function(){var e=(0,U.useTranslation)().t;return r.createElement(A.SeamlessContainer,{title:e("viewBillingFrequenciesPageTitle"),description:e("viewBillingFrequenciesPageDescription")},r.createElement("div",{style:{height:600,width:"100%"}},r.createElement(Ml,null)))},fi=function(){var e=(0,U.useTranslation)().t;return r.createElement(A.SeamlessContainer,{title:e("viewBillingFrequencyPageTitle"),description:e("viewBillingFrequencyPageDescription")},r.createElement("div",{style:{width:"100%"}},r.createElement(Ql,null)))},Ei=function(){var e=(0,o.useRouteMatch)().path,t=l()().AccessControlled;return r.createElement(o.Switch,null,r.createElement(o.Route,{path:e+"/view"},r.createElement(t,{feature:b},r.createElement(fi,null))),r.createElement(o.Route,null,r.createElement(t,{feature:Z},r.createElement(gi,null))))}},65163:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var a=n(82609),l=n.n(a)()((function(e){return e[1]}));l.push([e.id,"input[type=number]::-webkit-inner-spin-button, \ninput[type=number]::-webkit-outer-spin-button { \n    -webkit-appearance: none;\n    -moz-appearance: none;\n    appearance: none;\n    margin: 0; \n}\n\ninput[type=number]::-webkit-outer-spin-button,\ninput[type=number]::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n}\n\ninput[type=number] {\n    -moz-appearance:textfield;\n}",""]);const r=l}}]);