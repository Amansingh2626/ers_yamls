(self.webpackChunk_unified_voucher=self.webpackChunk_unified_voucher||[]).push([[4332],{34579:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var a=n(74315),r=n(2411),l=n.n(r),i=n(38670);const o=function(e){var t=l().useState(null),n=(0,a.Z)(t,2),r=n[0],o=n[1],c=(0,i.useSelector)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.rbac}),i.shallowEqual);return l().useEffect((function(){var t,n=(null===(t=c.features.find((function(t){return t.module===e})))||void 0===t?void 0:t.features)||[];o(n)}),[c]),r}},90554:(e,t,n)=>{"use strict";n.d(t,{rp:()=>ir,_:()=>Fa,WV:()=>mr,Ne:()=>Dr,uk:()=>yr,xU:()=>gr,cK:()=>Za,Ch:()=>Va,Qb:()=>qa,uS:()=>kr,hM:()=>Ja,Gm:()=>Ka,BW:()=>Cr,NX:()=>Tr,Ed:()=>Ma,tF:()=>Pr,r3:()=>Ca,$7:()=>Ea,DK:()=>Sa,fg:()=>Br,Q5:()=>ha,Xl:()=>cr,Ol:()=>br,LY:()=>Oa,$f:()=>Ra});var a=n(2411),r=n(48049),l=n(70773),i=n(63135),o=n(74315),c=n(6277),s=n(79692),u=n(12420),m=n(77277),d=n(60905),p=n(90436),f=n(77114),h=n(8526),g=n(61564),E=n(40823),v=n(19258),Z=(0,s.Z)((function(e){return(0,u.Z)({button:{margin:e.spacing(1),marginTop:e.spacing(3)},element:{marginTop:e.spacing(1),marginBottom:e.spacing(1),marginRight:e.spacing(1),"& .MuiFormLabel-root":{fontSize:12}},dateField:{margin:e.spacing(1),width:"100%",marginTop:e.spacing(1)},field:{"& .MuiFormLabel-root":{fontSize:12}},dropDown:{marginTop:10,"& .MuiInputBase-input":{padding:10}}})}));const b=function(e){var t,n,r,s,u,b,S,y,N,C,w,T,x,R,P,I,D=e.userFlag,O=e.setVouchers,k=e.onFormSubmit,V=e.onPageChange,B=e.onPageSizeChange,A=e.printScreen,F=void 0!==A&&A,j=Z(),M=(0,i.useTranslation)().t,_=a.useState(),q=(0,o.Z)(_,2),H=(q[0],q[1],(null===(t=window)||void 0===t||null===(n=t.config)||void 0===n||null===(r=n.voucher)||void 0===r?void 0:r.recordsPerPage)||10),W=h.Ry().shape({batchId:h.Z_().nullable(),voucherState:h.Z_().nullable(),denomination:h.Rx().nullable(),orderId:h.Z_().nullable(),generationDateRange:h.Ry().shape({to:h.Z_().nullable(),from:h.Z_().nullable()}).nullable(),expiryDateRange:h.Ry().shape({to:h.Z_().nullable(),from:h.Z_().nullable()}).nullable(),orderDateRange:h.Ry().shape({to:h.Z_().nullable(),from:h.Z_().nullable()}).nullable(),rangeIdentifier:h.Ry().shape({start:h.Z_().nullable(),end:h.Z_().nullable()}).nullable()}),z=(0,f.TA)({initialValues:{orderId:"",batchNumber:"",voucherState:"",generationDateRange:{from:"",to:""},orderDateRange:{from:"",to:""},expiryDateRange:{from:"",to:""},denomination:"",ownerId:"",rangeIdentifier:{type:"BATCH",start:"",end:""},page:{size:10,number:1}},onSubmit:function(e){return k&&k(e)},validationSchema:W,enableReinitialize:!0}),L=z.values,U=z.errors,K=z.handleChange,Y=z.handleReset,G=z.handleBlur,X=z.handleSubmit,$=window.config.openCalendarWith||"year";return a.createElement(a.Fragment,null,a.createElement(d.Z,{container:!0,spacing:2},a.createElement(d.Z,{item:!0,xs:12,sm:5,md:3},a.createElement(l.SeamlessInput,{className:(0,c.default)(j.element),fullWidth:!0,name:"batchNumber",value:L.batchNumber,error:!!U.batchNumber,helperText:U.batchNumber,onChange:K,label:M("batchNo")})),!F&&a.createElement(d.Z,{item:!0,xs:12,sm:5,md:3},a.createElement(l.SeamlessInput,{className:(0,c.default)(j.element),fullWidth:!0,name:"denomination",value:L.denomination,error:!!U.denomination,helperText:U.denomination?M("validNumber"):"",onChange:K,label:M("denomination")})),a.createElement(d.Z,{item:!0,xs:12,sm:5,md:3},a.createElement(l.SeamlessInput,{className:(0,c.default)(j.element),fullWidth:!0,name:"orderId",value:L.orderId,onChange:K,label:M("orderId")})),!F&&a.createElement(d.Z,{item:!0,xs:12,sm:5,md:3},a.createElement(l.SeamlessDropDown,{fullWidth:!0,className:(0,c.default)(j.dropDown),name:"voucherState",options:[{key:" ",value:" "},{key:"ACTIVE",value:"ACTIVE"},{key:"BLOCKED",value:"BLOCKED"},{key:"CANCELLED",value:"CANCELLED"},{key:"PRINT",value:"PRINT"},{key:"RESERVED",value:"RESERVED"}],value:L.voucherState,onChange:K,onBlur:G,label:M("voucherState")}))),D&&a.createElement(d.Z,{container:!0,spacing:3},a.createElement(d.Z,{container:!0,spacing:3},a.createElement(d.Z,{item:!0,xs:12},a.createElement(p.Z,{variant:"subtitle1",color:"primary",className:j.dateField},M("batchRange")))),a.createElement(d.Z,{item:!0,xs:12,sm:5,md:3},a.createElement(l.SeamlessInput,{className:(0,c.default)(j.element),fullWidth:!0,name:"rangeIdentifier.start",value:L.rangeIdentifier.start,error:!(null===(s=U.rangeIdentifier)||void 0===s||!s.start),helperText:null===(u=U.rangeIdentifier)||void 0===u?void 0:u.start,onChange:K,label:M("start")})),a.createElement(d.Z,{item:!0,xs:12,sm:5,md:3},a.createElement(l.SeamlessInput,{className:(0,c.default)(j.element),fullWidth:!0,name:"rangeIdentifier.end",value:L.rangeIdentifier.end,error:!(null===(b=U.rangeIdentifier)||void 0===b||!b.end),helperText:null===(S=U.rangeIdentifier)||void 0===S?void 0:S.end,onChange:K,label:M("end")})),D&&!F?a.createElement(d.Z,{item:!0,xs:12,sm:5,md:3},a.createElement(l.SeamlessInput,{className:(0,c.default)(j.element),fullWidth:!0,name:"ownerId",value:L.ownerId,onChange:K,label:M("ownerId")})):null),a.createElement(d.Z,{container:!0,spacing:3},a.createElement(d.Z,{container:!0,spacing:3},a.createElement(d.Z,{item:!0,xs:12},a.createElement(p.Z,{variant:"subtitle1",color:"primary",className:j.dateField},M("orderDateRange")))),a.createElement(g.M,{utils:v.Z},a.createElement(d.Z,{item:!0,xs:12,sm:5,md:3},a.createElement(E.e,{className:(0,c.default)(j.dateField),views:["year","month","date"],openTo:$,autoOk:!0,variant:"inline",format:"yyyy/MM/dd",margin:"normal",label:M("from"),name:"orderDateRange.from",value:(null===(y=L.orderDateRange)||void 0===y?void 0:y.from)||null,onChange:function(e){K({target:{value:null==e?void 0:e.toISOString(),name:"orderDateRange.from"}})},KeyboardButtonProps:{"aria-label":"change date"}}))),a.createElement(g.M,{utils:v.Z},a.createElement(d.Z,{item:!0,xs:12,sm:5,md:3},a.createElement(E.e,{className:(0,c.default)(j.dateField),views:["year","month","date"],openTo:$,autoOk:!0,variant:"inline",format:"yyyy/MM/dd",margin:"normal",label:M("to"),name:"orderDateRange.to",value:(null===(N=L.orderDateRange)||void 0===N?void 0:N.to)||null,onChange:function(e){K({target:{value:(null==e?void 0:e.toISOString().slice(0,11))+"23:59:59",name:"orderDateRange.to"}})},minDate:null===(C=L.orderDateRange)||void 0===C?void 0:C.from})))),D&&!F?a.createElement(d.Z,{container:!0,spacing:3},a.createElement(d.Z,{container:!0,spacing:3},a.createElement(d.Z,{item:!0,xs:12},a.createElement(p.Z,{variant:"subtitle1",color:"primary",className:j.dateField},M("generationRange")))),a.createElement(g.M,{utils:v.Z},a.createElement(d.Z,{item:!0,xs:12,sm:5,md:3},a.createElement(E.e,{className:(0,c.default)(j.dateField),views:["year","month","date"],openTo:$,autoOk:!0,variant:"inline",format:"yyyy/MM/dd",margin:"normal",label:M("from"),name:"generationDateRange.from",value:(null===(w=L.generationDateRange)||void 0===w?void 0:w.from)||null,onChange:function(e){K({target:{value:null==e?void 0:e.toISOString(),name:"generationDateRange.from"}})},KeyboardButtonProps:{"aria-label":"change date"}}))),a.createElement(g.M,{utils:v.Z},a.createElement(d.Z,{item:!0,xs:12,sm:5,md:3},a.createElement(E.e,{className:(0,c.default)(j.dateField),views:["year","month","date"],openTo:$,autoOk:!0,variant:"inline",format:"yyyy/MM/dd",margin:"normal",label:M("to"),name:"generationDateRange.to",value:(null===(T=L.generationDateRange)||void 0===T?void 0:T.to)||null,onChange:function(e){K({target:{value:(null==e?void 0:e.toISOString().slice(0,11))+"23:59:59",name:"generationDateRange.to"}})},KeyboardButtonProps:{"aria-label":"change date"},minDate:null===(x=L.generationDateRange)||void 0===x?void 0:x.from})))):null,!F&&a.createElement(d.Z,{container:!0,spacing:3},a.createElement(d.Z,{container:!0,spacing:3},a.createElement(d.Z,{item:!0,xs:12},a.createElement(p.Z,{variant:"subtitle1",color:"primary",className:j.dateField},M("expiryRange")))),a.createElement(g.M,{utils:v.Z},a.createElement(d.Z,{item:!0,xs:12,sm:5,md:3},a.createElement(E.e,{className:(0,c.default)(j.dateField),views:["year","month","date"],openTo:$,autoOk:!0,variant:"inline",format:"yyyy/MM/dd",margin:"normal",label:M("from"),name:"expiryDateRange.from",value:(null===(R=L.expiryDateRange)||void 0===R?void 0:R.from)||null,onChange:function(e){K({target:{value:null==e?void 0:e.toISOString(),name:"expiryDateRange.from"}})},KeyboardButtonProps:{"aria-label":"change date"}}))),a.createElement(g.M,{utils:v.Z},a.createElement(d.Z,{item:!0,xs:12,sm:5,md:3},a.createElement(E.e,{className:(0,c.default)(j.dateField),views:["year","month","date"],openTo:$,autoOk:!0,variant:"inline",format:"yyyy/MM/dd",margin:"normal",label:M("to"),name:"expiryDateRange.to",value:(null===(P=L.expiryDateRange)||void 0===P?void 0:P.to)||null,onChange:function(e){K({target:{value:(null==e?void 0:e.toISOString().slice(0,11))+"23:59:59",name:"expiryDateRange.to"}})},minDate:null===(I=L.expiryDateRange)||void 0===I?void 0:I.from})))),a.createElement(d.Z,{item:!0,xs:12},a.createElement(m.Z,{onClick:function(e){L.orderDateRange&&L.orderDateRange.from&&(L.orderDateRange.from=L.orderDateRange.from.slice(0,11)+"00:00:00"),L.generationDateRange&&L.generationDateRange.from&&(L.generationDateRange.from=L.generationDateRange.from.slice(0,11)+"00:00:00"),L.expiryDateRange&&L.expiryDateRange.from&&(L.expiryDateRange.from=L.expiryDateRange.from.slice(0,11)+"00:00:00"),X(),B(H),V(1)},className:j.button,color:"primary",variant:"contained"},M("search")),a.createElement(m.Z,{onClick:function(e){O([]),Y(e)},className:j.button,color:"primary",variant:"outlined"},M("reset"))))};var S=n(11746),y=n(7560),N=n(51119),C=n(19721);const w=function(){var e=(0,C.useSnackbar)().enqueueSnackbar,t=(0,i.useTranslation)().t;function n(e){var n=t("anErrorOccurred");return["resultMessage","message","resultDescription"].forEach((function(t){e&&e.hasOwnProperty(t)&&(n=e[t])})),n}return{showSuccessMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"success",autoHideDuration:15e3})},showErrorMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"error",autoHideDuration:15e3})},showInfoMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"info",autoHideDuration:15e3})},showWarningMessage:function(t){e("string"!=typeof t?n(t):t,{variant:"warning",autoHideDuration:15e3})}}};var T=n(41744),x=n.n(T),R=n(27068),P=n(61416);const I=n.n(P)();var D=function(e){return I("/vms/v1/voucher/attributes",{method:"PATCH",body:e})},O=function(e){return I("/vms/v1/voucher/fetch",{method:"POST",body:e})},k=function(e){return I("/vms/v1/reseller/reseller-data-search/".concat(e))},V=function(e){return I("/vms/v1/reseller/reseller-data",{method:"POST",body:e})},B=function(e,t){return I("/vms/v1/productVoucherTypeMapping/".concat(e,"/").concat(t))},A=function(e){return I("/vms/v1/order/voucher",{method:"POST",body:e})},F=function(e){return I("/vms/v1/order/filter",{method:"POST",body:e})},j=function(e,t,n,a){return I("/vms/v1/file/serialRange/download?noOfRecords=".concat(e,"&from=").concat(t,"&to=").concat(n,"&state=").concat(a))},M=function(e){return I("/vms/v1/order/approve-or-reject-order",{method:"PUT",body:e})},_=function(e){return I("/vms/v2/vouchers/update/approve-or-reject",{method:"POST",body:e})},q=function(e){return I("/vms/v1/order/return/approve-or-reject",{method:"POST",body:e})},H=n(33553),W=n(38592),z=n(49429),L=n(38724),U=n(79249),K=n(85256),Y=n(86619),G=n(80030),X=n(50775),$=n(23937),J=n(60552),Q=n(35457),ee=n(75842),te=n(44104),ne=n.n(te),ae="CREATE_VOUCHER_TYPE",re="CREATE_VOUCHER_SUBTYPE",le="CREATE_PRODUCT_ASSOCIATION",ie="VIEW_PRODUCT_ASSOCIATION",oe="EDIT_PRODUCT_ASSOCIATION",ce="CREATE_PRINTER_PROFILE",se="VIEW_PRINTER_PROFILE",ue="VIEW_BATCH_VOUCHERS",me="VIEW_VOUCHER_DETAILS",de="FILE_DOWNLOAD",pe="CREATE_BULK_ORDER",fe="VIEW_BULKORDER_BATCHES",he="RESET_FRAUD_COUNTER",ge="SUSPEND_UNSUSPEND_SUBSCRIBER",Ee="NEVER_SUSPEND_SUBSCRIBER",ve=n(38670);function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){(0,N.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Se=(0,s.Z)((function(e){return(0,u.Z)({element:{marginRight:e.spacing(1),marginBottom:e.spacing(1),width:300},dialog:{width:"100%",height:"100%"},button:{width:110,marginRight:e.spacing(1)},fieldHeading:{fontWeight:"bold",fontSize:14,marginRight:e.spacing(1),marginBottom:e.spacing(-1.5)},fieldValue:{fontSize:14},dialogWrapper:{"& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},table:{height:400,width:"100%"},filterRoot:{paddingLeft:12,marginTop:8}})}));const ye=function(e){var t,n,c,s,u,g=e.loading,E=e.userFlag,v=e.vouchers,Z=void 0===v?[]:v,b=e.page,N=e.perPage,C=e.count,T=e.showOrderId,P=e.printVouchersPage,D=(e.dateChange,e.setDateChange),O=e.onPageChange,k=e.onPageSizeChange,V=e.onFilterModelChange,B=(0,i.useTranslation)().t,A=a.useState(!1),F=(0,o.Z)(A,2),j=F[0],M=F[1],_=a.useState(!1),q=(0,o.Z)(_,2),te=(q[0],q[1]),ae=a.useState(""),re=(0,o.Z)(ae,2),le=re[0],ie=re[1],oe=a.useState(""),ce=(0,o.Z)(oe,2),se=ce[0],me=ce[1],pe=a.useState(""),fe=(0,o.Z)(pe,2),he=fe[0],ge=fe[1],Ee=w(),Ze=Ee.showErrorMessage,ye=Ee.showSuccessMessage,Ne=a.useState(!1),Ce=(0,o.Z)(Ne,2),we=Ce[0],Te=Ce[1],xe=Se(),Re=a.useState(""),Pe=(0,o.Z)(Re,2),Ie=Pe[0],De=Pe[1],Oe=a.useState(!1),ke=(0,o.Z)(Oe,2),Ve=ke[0],Be=ke[1],Ae=a.useState(""),Fe=(0,o.Z)(Ae,2),je=Fe[0],Me=Fe[1],_e=a.useState(""),qe=(0,o.Z)(_e,2),He=qe[0],We=qe[1],ze=a.useState(""),Le=(0,o.Z)(ze,2),Ue=Le[0],Ke=Le[1],Ye=a.useState(""),Ge=(0,o.Z)(Ye,2),Xe=Ge[0],$e=Ge[1],Je=a.useState(""),Qe=(0,o.Z)(Je,2),et=Qe[0],tt=Qe[1],nt=ne()().checkPermission,at=a.useState(""),rt=(0,o.Z)(at,2),lt=(rt[0],rt[1],a.useState([])),it=(0,o.Z)(lt,2),ot=it[0],ct=it[1],st=(0,ve.useSelector)((function(e){return e.auth})).user,ut=function(){M(!1)},mt=function(){Be(!1),De("")},dt=function(e){return e?(0,R.Z)(new Date(e),"yyyy/MM/dd"):""},pt=a.useCallback((function(e,t){var n;(n=e,I("/vms/v2/vouchers/getValidToStates/".concat(n))).then((function(n){var a;if("RESERVED"===e)ct(null==n||null===(a=n.toStates)||void 0===a?void 0:a.filter((function(e){return"PRINT"!==e})));else if("RESERVED"===e&&"PHYSICAL"===t){var r;ct(null==n||null===(r=n.toStates)||void 0===r?void 0:r.filter((function(e){return"ACTIVE"!==e})))}else ct(n.toStates)})).catch((function(e){Ze(e.resultDescription)}))}),[]),ft=a.useCallback((function(e){te(!0),function(e){return I("/vms/v2/voucher/attributes",{method:"PATCH",body:e})}(e).then((function(e){0===e.resultCode?ye(e.resultDescription):Ze(e.resultDescription),M(!1),D(Math.random())})).catch((function(e){return Ze(e)})).finally((function(){return te(!1)}))}),[]),ht=a.useCallback((function(e,t,n,a,r,l,i){(function(e,t,n){return I(n?"/vms/v2/batches/".concat(e,"/download/").concat(t,"?printScreen=").concat(n):"/vms/v2/batches/".concat(e,"/download/").concat(t))})(e,t,i).then((function(i){i.resultCode?Ze(i.resultDescription):"3"===t?gt(i,"".concat(a,"_").concat(r,"_").concat(l,"_").concat(n,".csv")):"2"===t?gt(i,"".concat(a,"_").concat(e,"_encrypted.zip")):"1"===t&&gt(i,"".concat(a,"_").concat(e,".zip"))})).catch((function(e){return Ze(e)}))}),[]);function gt(e,t){var n=URL.createObjectURL(e),a=document.createElement("a");a.href=n,a.download=t||"download",a.click()}var Et=we?h.Ry().shape({updateValues:h.Ry().shape({expiryDays:h.Rx().typeError(B("mustBeNumber")).min(1).required(B("valueIsRequired"))})}):h.Ry().shape({updateValues:h.Ry().shape({voucherStateCode:h.Z_().required(B("valueIsRequired"))})}),vt=(0,f.TA)({initialValues:we?{batchNumber:le,updateValues:{expiryDays:""}}:{batchNumber:le,updateValues:{voucherStateCode:" "}},onSubmit:function(e){return ft(e)},enableReinitialize:!0,validationSchema:Et}),Zt=vt.values,bt=vt.errors,St=vt.handleChange,yt=vt.handleBlur,Nt=vt.handleSubmit,Ct=vt.handleReset,wt=window.location.pathname.split("/"),Tt=[{label:"Equal",value:"equal",getApplyFilterFn:function(e){return e.columnField&&e.value&&e.operatorValue?function(t){return t.value==e.value}:null},InputComponent:function(e){var t=Se(),n=e.item,r=e.applyValue;return a.createElement("div",{className:t.filterRoot},a.createElement(Y.Z,{className:t.filterRoot,name:n.field,value:n.value,onChange:function(e){r(be(be({},n),{},{value:e.target.value}))}}))}}],xt=[{field:"orderId",headerName:B("orderId"),sortable:!0,filterable:!!T,width:150,hide:!T,filterOperators:Tt},{field:"batchNumber",headerName:B("batchNo"),sortable:!0,width:140,filterOperators:Tt},{field:"createdOn",headerName:B("createdOn"),sortable:!0,filterable:!1,width:120,valueFormatter:function(e){return dt(e.getValue("createdOn"))}},{field:"expiresOn",headerName:B("expiresOn","Expires on"),sortable:!0,filterable:!1,width:120,valueFormatter:function(e){return dt(e.getValue("expiresOn"))}},{field:"generationOn",headerName:B("generationOn","Generation on"),sortable:!0,filterable:!1,width:140,valueFormatter:function(e){return dt(e.getValue("generationOn"))}},{field:"batchPrice",headerName:B("batchValue"),sortable:!0,filterable:!1,width:100},{field:"count",headerName:B("count"),sortable:!0,filterable:!1,width:90},{field:"currency",headerName:B("currency"),sortable:!0,filterable:!1,width:100},{field:"startVoucherSerial",headerName:B("startVoucherSerial"),sortable:!0,filterable:!1,width:170},{field:"endVoucherSerial",headerName:B("endVoucherSerial"),sortable:!0,filterable:!1,width:170},{field:"batchVoucherState",headerName:B("batchVoucherState"),sortable:!0,width:150,filterOperators:Tt},{field:"ownerId",headerName:B("ownerId"),sortable:!0,width:110,filterOperators:Tt},{field:"printerProfile",headerName:B("printerProfileId"),sortable:!0,filterable:!1,width:120},{field:"actions",headerName:B("actions"),sortable:!1,filterable:!1,width:200,renderCell:function(e){return a.createElement(a.Fragment,null,P?a.createElement(W.Z,{size:"small",color:"primary","aria-label":"group action buttons"},nt(de)&&a.createElement(G.ZP,{title:B("downloadFile")},a.createElement(m.Z,{onClick:function(){return ht(e.row.batchNumber,"2",e.row.id,e.row.orderId,e.row.startVoucherSerial,e.row.endVoucherSerial,!0)}},a.createElement(Q.Z,{fontSize:"small"})))):a.createElement(W.Z,{size:"small",color:"primary","aria-label":"group action buttons"},nt(ue)&&a.createElement(G.ZP,{title:B("view")},"bulk-voucher-order"===wt[3]?a.createElement(m.Z,{component:r.Link,to:"/home/voucher/".concat(wt[3],"/view-orders/").concat(wt[5],"/view-batches/")+e.row.startVoucherSerial+"-"+e.row.endVoucherSerial},a.createElement(J.Z,{fontSize:"small"})):a.createElement(m.Z,{component:r.Link,to:"/home/voucher/".concat(wt[3],"/view-batches/")+e.row.startVoucherSerial+"-"+e.row.endVoucherSerial},a.createElement(J.Z,{fontSize:"small"}))),E&&e.row.ownerId===st.userId&&"PRINT"!==e.row.batchVoucherState?nt(de)&&a.createElement(G.ZP,{title:B("downloadFile")},a.createElement(m.Z,{onClick:function(){Be(!0),Me(e.row.batchNumber),We(e.row.orderId),Ke(e.row.startVoucherSerial),$e(e.row.endVoucherSerial),tt(e.row.id)}},a.createElement(Q.Z,{fontSize:"small"}))):!E&&nt(de)&&a.createElement(G.ZP,{title:B("downloadFile")},a.createElement(m.Z,{onClick:function(){Be(!0),Me(e.row.batchNumber),We(e.row.orderId),Ke(e.row.startVoucherSerial),$e(e.row.endVoucherSerial),tt(e.row.id)}},a.createElement(Q.Z,{fontSize:"small"}))),E&&"PRINT"===e.row.batchVoucherState?null:nt("EXPIRYDAYS_EXTENSION")&&a.createElement(G.ZP,{title:B("expiryDaysExtension")},a.createElement(m.Z,{onClick:function(){Te(!0),M(!0),ie(e.row.batchNumber),ge(e.row.expiresOn)}},a.createElement(X.Z,{fontSize:"small"}))),nt("VOUCHER_STATE_CHANGE")&&a.createElement(G.ZP,{title:B("voucherStateChange")},a.createElement(m.Z,{onClick:function(){Te(!1),M(!0),ie(e.row.batchNumber),me(e.row.batchVoucherState),pt(e.row.batchVoucherState,e.row.voucherSubType)}},a.createElement($.Z,{fontSize:"small"})))))},flex:1}];return a.createElement(a.Fragment,null,a.createElement(H.Z,{className:xe.table},a.createElement(x(),{loading:g,columnBuffer:2,onPageSizeChange:function(e){k(e.pageSize),O(1)},onPageChange:function(e){O(e.page+1)},rows:Z,pagination:!0,paginationMode:"server",filterMode:"server",page:b-1,pageSize:N,onFilterModelChange:V,getRowId:function(e){return e.id},columns:xt,rowCount:C,localeText:{toolbarColumns:B("columns"),toolbarFilters:B("filters"),toolbarDensity:B("density"),toolbarExport:B("export"),columnsPanelTextFieldLabel:B("findColumn"),columnsPanelTextFieldPlaceholder:B("columnTitle"),columnsPanelShowAllButton:B("showAll"),columnsPanelHideAllButton:B("hideAll"),filterPanelColumns:B("columns"),filterPanelInputPlaceholder:B("filterValues"),filterPanelInputLabel:B("value"),filterOperatorContains:B("contains"),filterOperatorEquals:B("equals"),filterOperatorStartsWith:B("startsWith"),filterOperatorEndsWith:B("endsWith"),toolbarExportCSV:B("downloadAsCSV")}})),a.createElement(l.SeamlessDialog,{open:Ve,onClose:mt,className:xe.dialogWrapper,maxWidth:"lg"},a.createElement(U.Z,{style:{textAlign:"center"}},B("downloadFile")),a.createElement(p.Z,{id:"transition-modal-description",variant:"body1",style:{textAlign:"center",marginBottom:5}},B("downloadText")),a.createElement(L.Z,null,a.createElement(d.Z,{container:!0,direction:"column",spacing:3},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(ee.Autocomplete,{className:xe.element,fullWidth:!0,options:[{key:"Password protected ZIP",value:"1"},{key:"Encrypted",value:"2"},{key:"Text",value:"3"}],selectOnFocus:!0,disableClearable:!0,getOptionLabel:function(e){return e.key},onChange:function(e,t){t&&De(t.value)},renderInput:function(e){return a.createElement(Y.Z,(0,y.Z)({},e,{required:!0,variant:"outlined",label:B("format")}))}})))),a.createElement(z.Z,null,a.createElement(m.Z,{onClick:function(e){ht(je,Ie,et,He,Ue,Xe)},className:xe.button,variant:"contained",color:"primary",disabled:" "===Ie||""===Ie},B("download")),a.createElement(m.Z,{onClick:function(e){mt()},className:xe.button,variant:"contained",color:"secondary"},B("closeButton")))),a.createElement(l.SeamlessDialog,{open:j,onClose:ut,className:xe.dialogWrapper,maxWidth:"md"},a.createElement(U.Z,{style:{textAlign:"center"}},B(we?"extendExpiryDateRequest":"voucherStateChangeRequest")),a.createElement(L.Z,null,a.createElement(d.Z,{container:!0,direction:"column",spacing:3},we&&a.createElement(a.Fragment,null,a.createElement(d.Z,{item:!0,xs:12},a.createElement(p.Z,{className:xe.fieldHeading},B("currentExpiryDate"))),a.createElement(d.Z,{item:!0,xs:12},a.createElement(p.Z,{className:xe.fieldValue},we?he&&(0,R.Z)(new Date(he),"dd/MM/yyyy"):se),a.createElement(K.Z,null))),a.createElement(d.Z,{item:!0,xs:12,sm:3},we?a.createElement(l.SeamlessInput,{fullWidth:!0,required:!0,error:!(null===(t=bt.updateValues)||void 0===t||!t.expiryDays),helperText:null===(n=bt.updateValues)||void 0===n?void 0:n.expiryDays,className:xe.element,name:"updateValues.expiryDays",value:null===(c=Zt.updateValues)||void 0===c?void 0:c.expiryDays,onChange:St,onBlur:yt,label:B("extendExpiryBy")}):a.createElement(l.SeamlessDropDown,{fullWidth:!0,required:!0,helperText:null===(s=bt.updateValues)||void 0===s?void 0:s.voucherStateCode,className:xe.element,name:"updateValues.voucherStateCode",options:[{key:" ",value:" "}].concat(E&&"RESERVED"===se?(0,S.Z)(ot.filter((function(e){return"PRINT"!==e})).map((function(e){return{value:e,key:e}}))):(0,S.Z)(ot.map((function(e){return{value:e,key:e}})))),value:null===(u=Zt.updateValues)||void 0===u?void 0:u.voucherStateCode,onChange:St,onBlur:yt,label:B("voucherStateCode")})))),a.createElement(z.Z,null,a.createElement(m.Z,{disabled:" "===Zt.updateValues.voucherStateCode,onClick:function(e){Zt.batchNumber=le,we?Zt.updateValues.voucherStateCode=void 0:Zt.updateValues.expiryDays=void 0,Nt()},className:xe.button,variant:"contained",color:"primary"},B("submit")),a.createElement(m.Z,{onClick:function(e){ut(),Ct(e)},className:xe.button,variant:"contained",color:"secondary"},B("closeButton")))))};var Ne=n(90929);function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){(0,N.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Te=function(e){var t,n,r,l=e.userFlag,i=a.useState([]),c=(0,o.Z)(i,2),s=c[0],u=c[1],m=a.useState(!1),d=(0,o.Z)(m,2),p=d[0],f=d[1],h=w().showErrorMessage,g=a.useState(0),E=(0,o.Z)(g,2),v=E[0],Z=E[1],S=a.useState({filtered:!1,filters:{}}),N=(0,o.Z)(S,2),C=N[0],x=N[1],R=a.useState(),P=(0,o.Z)(R,2),D=P[0],O=P[1],k=a.useState(0),V=(0,o.Z)(k,2),B=V[0],A=V[1],F=(null===(t=window)||void 0===t||null===(n=t.config)||void 0===n||null===(r=n.voucher)||void 0===r?void 0:r.recordsPerPage)||10,j=(0,T.useServerTable)({page:1,perPage:F,order:"asc",orderBy:"",filter:{}}),M=function(e){f(!0),function(e){return I("/vms/v1/order/filter",{method:"POST",body:e})}(e).then((function(e){0===e.resultCode?e.orders?(Z(e.pagingInfo.totalRecords),u(e.orders)):u([]):0!==e.resultCode&&(h(e.resultDescription),u([]))})).catch((function(e){return h(e.resultDescription)})).finally((function(){f(!1)}))},_=a.useCallback((function(e){var t={};Object.keys(e).forEach((function(n){var a,r,l,i;"object"===(0,Ne.Z)(e["".concat(n)])?(null!==(a=e["".concat(n)])&&void 0!==a&&a.from||null!==(r=e["".concat(n)])&&void 0!==r&&r.to||null!==(l=e["".concat(n)])&&void 0!==l&&l.start||null!==(i=e["".concat(n)])&&void 0!==i&&i.end)&&(t["".concat(n)]=e["".concat(n)]):e["".concat(n)]&&(t["".concat(n)]=e["".concat(n)])})),function(e){O(e)}(t);var n=we(we({},t),{},{page:{number:j.page,size:j.perPage}});if(Object.values(C.filters).length){var a=we(we({},C.filters),{},{page:{number:j.page,size:j.perPage}});M(a)}else e&&M(n)}),[B,j.page,j.perPage,C]),q=a.useCallback((function(e){var t,n,a=(null===(t=e.filterModel.items[0])||void 0===t?void 0:t.value)||"",r=(null===(n=e.filterModel.items[0])||void 0===n?void 0:n.columnField)||"",l={};a?(l[r]=a,setTimeout((function(){x({filtered:!0,filters:l})}),800)):Object.values(C.filters).length&&x({filtered:!0,filters:{}})}),[C]);return a.useEffect((function(){D&&(v||B||C.filtered)&&_(D)}),[_,C]),s.map((function(e,t){return e.id=t})),a.createElement(a.Fragment,null,a.createElement(H.Z,{mb:2},a.createElement(b,(0,y.Z)({userFlag:l,setVouchers:u,onFormSubmit:function(e){_(e)}},j))),(!!s.length||!!Object.keys(C.filters).length)&&a.createElement("div",null,a.createElement(ye,(0,y.Z)({userFlag:l,loading:p,printVouchersPage:!1,vouchers:s,count:v,dateChange:B,showOrderId:!0,setDateChange:A,onFilterModelChange:q},j))))};var xe=n(61837),Re=n(64874),Pe=n(4614),Ie=(0,s.Z)((function(e){return(0,u.Z)({spacingTop:{marginTop:e.spacing(3)},spacingBottom:{marginBottom:e.spacing(1)},wrapper:{padding:e.spacing(2)},titleSpacing:{marginBottom:e.spacing(1)},subTitleSpacing:{marginBottom:e.spacing(1)},dividerSpacing:{marginBottom:e.spacing(3)},fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14,marginBottom:e.spacing(1)},fieldValue:{fontSize:14,width:300},rowSpacing:{marginBottom:e.spacing(1)},minListViewHeight:{minHeight:400},divSpacing:{marginLeft:e.spacing(1)},dialogWrapper:{"& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}}})}));const De=function(e){var t,n,r=e.showHRN,l=void 0!==r&&r,o=e.voucherDetails,c=e.loading,s=Ie(),u=(0,i.useTranslation)().t;return a.createElement(a.Fragment,null,c?a.createElement(Pe.Z,null):(null==o||null===(t=o.vouchers)||void 0===t?void 0:t.length)>0&&(null==o||null===(n=o.vouchers)||void 0===n?void 0:n.map((function(e,t){var n,r,i,c,m,f,h,g,E,v,Z,b,S,y,N,C,w,T,x,R,P,I,D,O,k,V,B,A,F=[];return a.createElement(a.Fragment,null,a.createElement(d.Z,{container:!0,spacing:3,className:s.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldHeading},u("serialNumber")),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldValue},null!==(n=null==e?void 0:e.serialNo)&&void 0!==n?n:"-")),a.createElement(K.Z,null)),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldHeading},u("currency")),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldValue},null!==(r=null==e?void 0:e.currency)&&void 0!==r?r:"-")),a.createElement(K.Z,null)),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldHeading},u("denomination")),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldValue},null!==(i=null==e?void 0:e.denomination)&&void 0!==i?i:"-")),a.createElement(K.Z,null))),a.createElement(d.Z,{container:!0,spacing:3,className:s.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldHeading},u("voucherState")),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldValue},null!==(c=null==e||null===(m=e.currentVoucherState)||void 0===m?void 0:m.name)&&void 0!==c?c:"-")),a.createElement(K.Z,null)),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldHeading},u("createdOn")),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldValue},null!==(f=null==e?void 0:e.createdOn)&&void 0!==f?f:"-")),a.createElement(K.Z,null)),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldHeading},u("expiresOn")),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldValue},null!==(h=null==e?void 0:e.expiresOn)&&void 0!==h?h:"-")),a.createElement(K.Z,null))),a.createElement(d.Z,{container:!0,spacing:3,className:s.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldHeading},u("voucherType")),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldValue},null!==(g=null==e?void 0:e.voucherType)&&void 0!==g?g:"-")),a.createElement(K.Z,null)),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldHeading},u("owner")),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldValue},null!==(E=null==e?void 0:e.owner)&&void 0!==E?E:"-")),a.createElement(K.Z,null)),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldHeading},u("productSKU")),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldValue},null!==(v=null==e?void 0:e.productSKU)&&void 0!==v?v:"-")),a.createElement(K.Z,null))),a.createElement(d.Z,{container:!0,spacing:3,className:s.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldHeading},u("hrnCount")),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldValue},null!==(Z=null==e?void 0:e.hrnCount)&&void 0!==Z?Z:"-")),a.createElement(K.Z,null)),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldHeading},u("batchId")),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldValue},null!==(b=null==e?void 0:e.batchId)&&void 0!==b?b:"-")),a.createElement(K.Z,null)),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldHeading},u("priceValue")),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldValue},null!==(S=null==e?void 0:e.priceValue)&&void 0!==S?S:"-")),a.createElement(K.Z,null))),a.createElement(d.Z,{container:!0,spacing:3,className:s.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldHeading},u("lastModified")),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldValue},null!==(y=null==e?void 0:e.lastModified)&&void 0!==y?y:"-")),a.createElement(K.Z,null)),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldHeading},u("lastModifiedBy")),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldValue},null!==(N=null==e?void 0:e.lastModifiedBy)&&void 0!==N?N:"-")),a.createElement(K.Z,null)),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldHeading},u("voucherId")),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldValue},null!==(C=null==e?void 0:e.voucherId)&&void 0!==C?C:"-")),a.createElement(K.Z,null))),a.createElement(d.Z,{container:!0,spacing:3,className:s.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldHeading},u("redemptionNature")),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldValue},null!==(w=null==e?void 0:e.redemptionNature)&&void 0!==w?w:"-")),a.createElement(K.Z,null)),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldHeading},u("redeemedBy")),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldValue},null!==(T=null==e?void 0:e.redeemedBy)&&void 0!==T?T:"-")),a.createElement(K.Z,null)),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldHeading},u("redemptionOn")),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldValue},null!==(x=null==e?void 0:e.redemptionOn)&&void 0!==x?x:"-")),a.createElement(K.Z,null))),a.createElement(d.Z,{container:!0,spacing:3,className:s.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldHeading},u("redeemableAmount")),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldValue},null!==(R=null==e?void 0:e.redeemableAmount)&&void 0!==R?R:"-")),a.createElement(K.Z,null)),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldHeading},u("redeemedAmount")),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldValue},null!==(P=null==e?void 0:e.redeemedAmount)&&void 0!==P?P:"-")),a.createElement(K.Z,null)),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldHeading},u("redemptionReference")),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldValue},null!==(I=null==e?void 0:e.redemptionReference)&&void 0!==I?I:"-")),a.createElement(K.Z,null))),a.createElement(d.Z,{container:!0,spacing:3,className:s.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldHeading},u("redemptionProcedure")),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldValue},null!==(D=null==e?void 0:e.redemptionProcedure)&&void 0!==D?D:"-")),a.createElement(K.Z,null)),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldHeading},u("subscriberServiceTariffPlan")),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldValue},null!==(O=(null==e?void 0:e.subscriberServiceTariffPlan)&&(null===(k=Object.entries(null==e?void 0:e.subscriberServiceTariffPlan))||void 0===k?void 0:k.map((function(e){null==F||F.push(e[1]?e[0]+": "+e[1]:e[0])}))))&&void 0!==O?O:"-",null!==(V=null==F?void 0:F.join(", "))&&void 0!==V?V:"-")),a.createElement(K.Z,null)),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldHeading},u("deliveryInfo")),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldValue},null!==(B=null==e?void 0:e.deliveryInfo)&&void 0!==B?B:"-")),a.createElement(K.Z,null))),l&&a.createElement(d.Z,{container:!0,spacing:3,className:s.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldHeading},u("voucherHRN")),a.createElement(d.Z,{item:!0,xs:12,sm:4},a.createElement(p.Z,{className:s.fieldValue},null!==(A=null==e?void 0:e.voucherHRN)&&void 0!==A?A:"-")),a.createElement(K.Z,null))),o.vouchers.length-1===t?null:a.createElement(K.Z,{style:{marginBottom:10}}))}))))};var Oe=(0,s.Z)((function(e){return(0,u.Z)({spacingBottom:{marginBottom:e.spacing(1)},fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14,marginRight:e.spacing(2)},fieldHeading2:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{fontSize:14},rowSpacing:{marginBottom:e.spacing(2)},button:{margin:e.spacing(1),marginTop:e.spacing(3)},element:{marginRight:e.spacing(1),marginBottom:e.spacing(1),width:300},card:{width:"100%",marginBottom:e.spacing(1),marginTop:e.spacing(1)},divSpacing:{margin:e.spacing(1)},dialogWrapper:{"& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}}})}));const ke=function(e){var t=e.showhrn,n=e.loading,r=e.vouchers,c=(e.updateStatus,e.setUpdateStatus),s=a.useState(!1),u=(0,o.Z)(s,2),g=u[0],E=u[1],v=a.useState(!1),Z=(0,o.Z)(v,2),b=(Z[0],Z[1]),y=a.useState(""),N=(0,o.Z)(y,2),C=N[0],T=N[1],x=a.useState(""),R=(0,o.Z)(x,2),P=R[0],I=R[1],O=w(),k=O.showErrorMessage,V=O.showSuccessMessage,B=Oe(),A=(0,i.useTranslation)().t,F=ne()().checkPermission,j=a.useCallback((function(e){b(!0),D(e).then((function(e){0===e.resultCode?V(e.resultDescription):k(e.resultDescription),E(!1),c(Math.random())})).catch((function(e){return k(e)})).finally((function(){b(!1)}))}),[]),M=h.Ry().shape({updateValues:h.Ry().shape({voucherStatusId:h.Z_().required(A("valueIsRequired"))})}),_=function(){E(!1)},q=(0,f.TA)({initialValues:{identifier:{simpleIdentifier:{type:"SERIAL",value:C}},updateValues:{voucherStatusId:P}},onSubmit:function(e){return j(e)},enableReinitialize:!0,validationSchema:M}),H=q.values,W=q.errors,K=q.handleChange,Y=q.handleBlur,X=q.handleSubmit,$=q.handleReset;return a.createElement(a.Fragment,null,a.createElement(d.Z,{container:!0},a.createElement(d.Z,{container:!0,className:B.spacingBottom},a.createElement(d.Z,{item:!0,xs:12,sm:4,className:B.fieldHeading2},a.createElement(d.Z,{container:!0,alignItems:"center"},a.createElement(d.Z,{item:!0,xs:12,sm:6},a.createElement(p.Z,{variant:"subtitle1",color:"primary"},A("VoucherDetails"))),F("EDIT_VOUCHER_STATE")&&a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(G.ZP,{title:A("edit")},a.createElement(xe.Z,{color:"primary",onClick:function(){var e,t;E(!0),T(r[0].serialNo),I(null===(e=r[0])||void 0===e||null===(t=e.currentVoucherState)||void 0===t?void 0:t.id)}},a.createElement(Re.Z,{fontSize:"small"}))))))),r.map((function(e){var i,o,c=e&&e.nextPossibleStates.map((function(e){return{key:e.name,value:e.id}})),s={vouchers:[e],extraFields:{parameters:{additionalProperties:""}},pageInfo:{totalRecords:0,totalPages:0}};return a.createElement(a.Fragment,null,a.createElement(De,{showHRN:t,voucherDetails:s,loading:n}),a.createElement(a.Fragment,null,a.createElement(l.SeamlessDialog,{open:g,onClose:_,className:B.dialogWrapper,maxWidth:"lg"},a.createElement(U.Z,{style:{textAlign:"center"}},A("voucherStateChangeRequest")),a.createElement(L.Z,null,a.createElement(d.Z,{container:!0,direction:"column",spacing:3},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessDropDown,{helperText:null===(i=W.updateValues)||void 0===i?void 0:i.voucherStatusId,className:B.element,fullWidth:!0,required:!0,name:"updateValues.voucherStatusId",options:"RESERVED"===e.currentVoucherState.name?[{key:r[0].currentVoucherState.name,value:r[0].currentVoucherState.id}].concat((0,S.Z)(c.filter((function(e){return"PRINT"!==e.key})).map((function(e){return{value:e.value,key:e.key}})))):[{key:r[0].currentVoucherState.name,value:r[0].currentVoucherState.id}].concat((0,S.Z)(c.map((function(e){return{value:e.value,key:e.key}})))),value:null===(o=H.updateValues)||void 0===o?void 0:o.voucherStatusId,onChange:K,onBlur:Y,label:A("voucherStateCode")})))),a.createElement(z.Z,null,a.createElement(m.Z,{disabled:H.updateValues.voucherStatusId===r[0].currentVoucherState.id,onClick:function(e){H.identifier.simpleIdentifier.value=C,X()},className:B.button,variant:"contained",color:"secondary"},A("save")),a.createElement(m.Z,{onClick:function(e){_(),$(e)},className:B.button,variant:"contained",color:"secondary"},A("closeButton"))))))}))))};var Ve=(0,s.Z)((function(e){return(0,u.Z)({button:{marginRight:e.spacing(1),marginTop:e.spacing(3.5)},element:{marginTop:e.spacing(1),marginBottom:e.spacing(1),marginRight:e.spacing(1)},check:{marginTop:e.spacing(2.7),marginRight:e.spacing(1),"& .MuiFormControlLabel-label":{marginLeft:10}}})}));const Be=function(e){var t,n,r=e.showHRN,o=void 0!==r&&r,s=e.data,u=(e.resetFlag,e.onFormSubmit),p=e.setResetFlag,g=Ve(),E=(0,i.useTranslation)().t,v=window.config.voucher.showHRN,Z=h.Ry().shape({identifier:h.Ry().shape({value:h.Z_().matches(/^[0-9]+$/,E("alphaNumeric")).required(E("valueIsRequired"))})}),b=(0,f.TA)({initialValues:s,onSubmit:function(e){return u&&u(e)},validationSchema:Z,enableReinitialize:!0}),S=b.values,y=b.errors,N=b.handleChange,C=b.handleSubmit,w=b.handleReset;return a.createElement(a.Fragment,null,a.createElement(d.Z,{container:!0,spacing:3},a.createElement(d.Z,{item:!0,xs:3},a.createElement(l.SeamlessInput,{className:(0,c.default)(g.element),fullWidth:!0,required:!0,name:"identifier.value",value:S.identifier.value.trim(),error:!(null===(t=y.identifier)||void 0===t||!t.value),helperText:null!==(n=y.identifier)&&void 0!==n&&n.value?E("validNumber"):"",onChange:N,label:"SERIAL"===S.identifier.type?E("serialNumber"):E("hrnNo")})),v&&o&&a.createElement(d.Z,{item:!0,xs:3},a.createElement(l.Check,{className:(0,c.default)(g.check),name:"showhrn",checked:S.showhrn,label:E("showhrn"),handleChange:N,color:"primary"}))),a.createElement(d.Z,{item:!0,xs:3},a.createElement(m.Z,{onClick:function(e){C(),p(!1)},className:(0,c.default)(g.button),color:"primary",variant:"contained"},E("search")),a.createElement(m.Z,{onClick:function(e){w(e),p(!0)},className:(0,c.default)(g.button),color:"primary",variant:"outlined"},E("resetButton"))))};var Ae={identifier:{type:"SERIAL",value:""},showhrn:!1};const Fe=function(e){var t,n,r,l=e.isAdmin,i=e.showHRN,c=a.useState([]),s=(0,o.Z)(c,2),u=s[0],m=s[1],d=a.useState(!1),p=(0,o.Z)(d,2),f=p[0],h=p[1],g=a.useState(!1),E=(0,o.Z)(g,2),v=E[0],Z=E[1],b=w().showErrorMessage,S=a.useState(),N=(0,o.Z)(S,2),C=N[0],x=N[1],R=a.useState(0),P=(0,o.Z)(R,2),I=P[0],D=P[1],k=a.useState(!1),V=(0,o.Z)(k,2),B=V[0],A=V[1],F=a.useState(0),j=(0,o.Z)(F,2),M=j[0],_=j[1],q=(null===(t=window)||void 0===t||null===(n=t.config)||void 0===n||null===(r=n.voucher)||void 0===r?void 0:r.recordsPerPage)||10,W=(0,T.useServerTable)({page:1,perPage:q,order:"asc",orderBy:"",filter:{}}),z=a.useState(0),L=(0,o.Z)(z,2),U=L[0],K=L[1],Y=a.useCallback((function(e){x(e),h(!0),e&&O(e).then((function(e){var t;e.vouchers?(Z(!0),m(e.vouchers),(null==e||null===(t=e.pageInfo)||void 0===t?void 0:t.totalRecords)&&_(e.pageInfo.totalRecords)):(m([]),Z(!1)),0!==e.resultCode&&b(e.resultDescription)})).catch((function(e){return b(e)})).finally((function(){h(!1)}))}),[C,I,U]);return a.useEffect((function(){C&&(I||U)&&Y(C)}),[Y]),a.createElement(a.Fragment,null,a.createElement(H.Z,{mb:2},a.createElement(Be,{showHRN:i,data:Ae,onFormSubmit:function(e){return Y(e)},resetFlag:B,setResetFlag:A})),B?null:a.createElement("div",null,l&&u.length>0?a.createElement(na,(0,y.Z)({loading:f,searchData:u,serialRangeSearchPage:!1,singleVoucherSearchPage:!0,viewPage:!1,count:M,update:U,setUpdate:K},W)):null,v&&!l?a.createElement(ke,{showhrn:null==C?void 0:C.showhrn,vouchers:u,loading:f,updateStatus:I,setUpdateStatus:D}):null))};var je=n(8629),Me=n(5806),_e=n(64326),qe=n(67358),He=n(82938),We=n(7832),ze=n(34812),Le=n(81463),Ue=n(56271);const Ke=function(e){var t=e.children,n=e.initialProducts,r=e.initialSKUs,l=e.showDigitalProduct,i=e.requireProductVoucherTypeMapping,c=a.useState(!1),s=(0,o.Z)(c,2),u=s[0],m=s[1],d=a.useState([]),p=(0,o.Z)(d,2),f=p[0],h=p[1],g=a.useState([]),E=(0,o.Z)(g,2),v=E[0],Z=E[1],b=w().showErrorMessage;return a.useEffect((function(){m(!0);var e={globalSKU:"",name:"",price:null,groupId:"",groupName:"",eanCode:"",operatorReference:"",productGroupKey:0,requireProductVoucherTypeMapping:i,showOnlyDigitalVoucherSubType:l};(null==n||!n.length)&&function(e){return I("/vms/v1/product/search",{method:"POST",body:e})}(e).then((function(e){Z(e.products),h(e.products.map((function(e){return e.variants[0]})))})).catch((function(e){return b(e)})).finally((function(){return m(!1)})),null!=n&&n.length&&null!=r&&r.length&&(Z(n),h(r))}),[l]),a.createElement(a.Fragment,null,t({skus:f,products:v,loading:u}))},Ye=function(e){var t=e.children,n=a.useState(!1),r=(0,o.Z)(n,2),l=r[0],i=r[1],c=a.useState([]),s=(0,o.Z)(c,2),u=s[0],m=s[1],d=w().showErrorMessage;return a.useEffect((function(){i(!0),I("/vms/v1/voucher/wallet-types").then((function(e){m(e.walletIds)})).catch((function(e){return d(e)})).finally((function(){return i(!1)}))}),[]),a.createElement(a.Fragment,null,t({sourceWallet:u,loading:l}))};function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(n),!0).forEach((function(t){(0,N.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $e=(0,We.makeStyles)((function(e){return(0,We.createStyles)({element:{margin:e.spacing(1),"& .MuiInputLabel-root":{width:"100%"}},button:{width:130,margin:e.spacing(1),marginTop:e.spacing(5)},dialogButton:{width:100,marginLeft:e.spacing(3),marginBottom:e.spacing(1)},smsSwitch:{marginTop:e.spacing(3),marginBottom:e.spacing(3)},fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{fontSize:14},rowSpacing:{marginBottom:e.spacing(.5)},icon:{color:Le.Z[400],marginTop:10,width:"100%",textAlign:"center",fontSize:60},terminalCloseButton:{float:"right"},smsCloseButton:{width:100,margin:10,marginLeft:20},printMedia:{"@media print":{display:"none"}}})}));const Je=function(e){var t,n,r=e.data,c=(0,i.useTranslation)().t,s=$e(),u=a.useState(!1),g=(0,o.Z)(u,2),E=g[0],v=g[1],Z=a.useState(!1),b=(0,o.Z)(Z,2),y=b[0],N=b[1],C=a.useState(!1),T=(0,o.Z)(C,2),x=T[0],P=T[1],D=w(),O=D.showWarningMessage,k=D.showErrorMessage,V=a.useState(!1),B=(0,o.Z)(V,2),A=B[0],F=B[1],j=a.useState(),M=(0,o.Z)(j,2),_=M[0],q=M[1],H=a.useState(!1),W=(0,o.Z)(H,2),K=W[0],Y=W[1],G=ne()().checkPermission,X=function(){F(!1)},$=window.config.currency||"none",J=window.config.voucher.voucherState||"none",Q=a.useCallback((function(e,t){v(!0),function(e){return I("/vms/v2/voucher/purchase",{method:"POST",body:e})}(e).then((function(e){0===e.resultCode?(F(!0),q(e),Y(t)):k(e.resultDescription)})).catch((function(e){return k(e)})).finally((function(){return v(!1)}))}),[]),ee=h.Ry().shape({productSKU:h.Z_().required(c("valueIsRequired")).test("len",c("valueIsRequired"),(function(e){return" "!==e})),sourceWallet:h.Z_().required(c("valueIsRequired")).test("len",c("valueIsRequired"),(function(e){return" "!==e})),denomination:h.Rx().integer().min(1).required(c("valueIsRequired")).nullable(),subscriberMsisdn:y?h.Rx().required("Must enter subscriber MSISDN"):h.Rx().nullable()}),te=(0,f.TA)({initialValues:r,onSubmit:function(e){return function(e){var t=Xe(Xe({},e),{},{currency:$,voucherState:J,showPin:!0,count:1}),n=Xe(Xe({},e),{},{currency:$,voucherState:J,showPin:!1,count:1});y||x?(y&&Q(n,!y),x&&Q(t,x)):O(c("selectTerminalOrSms"))}(e)},enableReinitialize:!0,validationSchema:ee}),ae=te.values,re=te.errors,le=te.handleChange,ie=te.handleSubmit,oe=te.handleReset,ce=te.setFieldValue;return a.createElement(a.Fragment,null,a.createElement(Ke,{showDigitalProduct:!0,requireProductVoucherTypeMapping:!0},(function(e){var t=e.skus;return e.products,e.loading,a.createElement(a.Fragment,null,a.createElement(d.Z,{container:!0,spacing:3},a.createElement(d.Z,{item:!0,xs:6,sm:5,md:3},a.createElement(l.SeamlessDropDown,{className:s.element,fullWidth:!0,name:"productSKU",label:c("productSKU"),options:[{value:" ",key:""}].concat((0,S.Z)(t.map((function(e){return{value:e.productSKU,key:e.productSKU}})))),onChange:function(e){t.map((function(e){e.variablePrice?ae.denomination="":ae.denomination=ae.denomination})),le(e)},value:ae.productSKU,error:!!re.productSKU,required:!0,helperText:re.productSKU})),t.map((function(e){if(e.productSKU===ae.productSKU)return a.createElement(a.Fragment,null,e.variablePrice?a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{className:s.element,fullWidth:!0,name:"denomination",label:c("denomination"),onChange:le,value:ae.denomination,error:!!re.denomination,required:!0,helperText:re.denomination})):a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{className:s.element,fullWidth:!0,label:c("denomination"),value:ae.denomination=e.unitPrice,disabled:!0})),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{className:s.element,fullWidth:!0,label:c("redemptionNature"),value:e.redemptionNature,disabled:!0})))}))),a.createElement(d.Z,{container:!0,spacing:3},a.createElement(d.Z,{item:!0,xs:6,sm:5,md:3},a.createElement(Ye,null,(function(e){var t=e.sourceWallet;return e.loading,a.createElement(a.Fragment,null,a.createElement(l.SeamlessDropDown,{className:s.element,fullWidth:!0,name:"sourceWallet",label:c("selectWalletType"),options:[{value:" ",key:""}].concat((0,S.Z)(t.map((function(e){return{value:e,key:e}})))),onChange:function(e){le(e)},value:ae.sourceWallet,error:!!re.sourceWallet,required:!0,helperText:re.sourceWallet}))})))))})),a.createElement(_e.Z,{className:s.element},G("SALE_SMS")&&a.createElement(d.Z,{container:!0,spacing:1},a.createElement(d.Z,{item:!0,xs:12,sm:2},a.createElement(Me.Z,{className:s.smsSwitch,control:a.createElement(He.Z,{checked:y,onChange:function(e){x&&P(!1),N(e.target.checked)}}),label:c("sms")})),y&&a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{className:s.element,fullWidth:!0,name:"subscriberMsisdn",label:c("subscriberMsisdn"),onChange:le,value:ae.subscriberMsisdn,error:!!re.subscriberMsisdn,required:!0,helperText:re.subscriberMsisdn}))),G("SALE_TERMINAL")&&a.createElement(d.Z,{container:!0,spacing:1},a.createElement(d.Z,{item:!0,xs:12,sm:2},a.createElement(Me.Z,{control:a.createElement(He.Z,{checked:x,onChange:function(e){y&&N(!1),P(e.target.checked),ce("subscriberMsisdn",null)}}),label:c("terminal")})))),a.createElement(d.Z,{item:!0,xs:12},a.createElement(m.Z,{className:s.button,color:"primary",variant:"contained",onClick:function(e){ie()}},c("sell")),a.createElement(m.Z,{className:s.button,color:"primary",variant:"outlined",onClick:function(e){P(!1),N(!1),oe(e)}},c("resetButton")),E?a.createElement(qe.Z,null):null),a.createElement(je.Z,{open:A},K?a.createElement("div",{style:{width:600}},a.createElement(ze.Z,{className:s.icon}),a.createElement(U.Z,{style:{textAlign:"center"}},c("singleVoucherSaleSuccessful")),a.createElement(L.Z,null,a.createElement(d.Z,{container:!0,spacing:3,className:s.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:s.fieldHeading},c("productSKU"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:s.fieldValue},null==_?void 0:_.voucher.productSKU)),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:s.fieldHeading},c("serialNo"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:s.fieldValue},null==_?void 0:_.voucher.serialNo))),a.createElement(d.Z,{container:!0,spacing:3,className:s.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:s.fieldHeading},c("count"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:s.fieldValue},null==_?void 0:_.voucher.count)),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:s.fieldHeading},c("currency"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:s.fieldValue},null==_?void 0:_.voucher.currency))),a.createElement(d.Z,{container:!0,spacing:3,className:s.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:s.fieldHeading},c("denomination"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:s.fieldValue},null==_?void 0:_.voucher.denomination)),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:s.fieldHeading},c("expiresOn"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:s.fieldValue},(null==_?void 0:_.voucher.expiresOn)&&(0,R.Z)(new Date(null==_?void 0:_.voucher.expiresOn.replace(/-/g,"/")),"MM/dd/yyyy")))),a.createElement(d.Z,{container:!0,spacing:3,className:s.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:s.fieldHeading},c("voucherState"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:s.fieldValue},null==_?void 0:_.voucher.voucherState)),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:s.fieldHeading},c("ersReference"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:s.fieldValue},null==_?void 0:_.ersReference))),a.createElement(d.Z,{container:!0,spacing:3,className:s.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:s.fieldHeading},c("redeemptionNature"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:s.fieldValue},null==_?void 0:_.voucher.redeemptionNature))),1===(null==_||null===(t=_.voucher.pin)||void 0===t?void 0:t.split(",").length)?a.createElement(d.Z,{container:!0,spacing:3,className:s.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:s.fieldHeading},c("hrn"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:s.fieldValue},null==_?void 0:_.voucher.pin))):null==_||null===(n=_.voucher.pin)||void 0===n?void 0:n.split(",").map((function(e,t){return a.createElement(d.Z,{container:!0,spacing:3,className:s.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:s.fieldHeading},"HRN".concat(t+1))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:s.fieldValue},e)))}))),a.createElement(z.Z,{className:s.printMedia},a.createElement(d.Z,{container:!0,spacing:6},a.createElement(d.Z,{item:!0,xs:12,sm:9},a.createElement(m.Z,{onClick:function(){return window.print()}},a.createElement(Ue.Z,null))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(m.Z,{color:"secondary",variant:"outlined",onClick:X,className:s.terminalCloseButton},c("closeButton")))))):a.createElement(a.Fragment,null,a.createElement(ze.Z,{className:s.icon}),a.createElement(U.Z,{style:{textAlign:"center"}},c("singleVoucherSaleSuccessful")),a.createElement(L.Z,null,null==_?void 0:_.resultDescription),a.createElement(m.Z,{className:s.smsCloseButton,color:"secondary",variant:"outlined",onClick:X},c("closeButton")))))};var Qe=n(89058),et=n(66054),tt=(0,s.Z)((function(e){return(0,u.Z)({dialogWrapper:{textAlign:"center","& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginBottom:e.spacing(3)},btnSpace:{marginRight:e.spacing(2)},table:{height:400,width:"100%"}})}));const nt=function(e){var t,n,r,c=e.loading,s=e.voucherTypes,u=void 0===s?[]:s,d=(0,i.useTranslation)().t,f=a.useState(!1),h=(0,o.Z)(f,2),g=h[0],E=h[1],v=a.useState(),Z=(0,o.Z)(v,2),b=Z[0],S=Z[1],y=w(),N=y.showErrorMessage,C=y.showSuccessMessage,T=tt(),R=ne()().checkPermission,P=(null===(t=window)||void 0===t||null===(n=t.config)||void 0===n||null===(r=n.voucher)||void 0===r?void 0:r.recordsPerPage)||10,D=function(){(function(e){return I("/vms/v1/voucherType/delete/".concat(e),{method:"DELETE"})})(b).then((function(e){var t;E(!1),0===e.resultCode?(C(e.resultDescription||"Voucher Type deleted succesfully"),null===(t=document.querySelector("[data-id='"+b+"']"))||void 0===t||t.remove()):N(e.resultDescription)})).catch((function(e){return N(e.resultDescription)}))},O=function(){E(!1)},k=[{field:"voucherType",headerName:d("voucherType"),sortable:!0,width:200},{field:"description",headerName:d("description"),sortable:!0,width:200,filterable:!0,renderCell:function(e){return a.createElement(G.ZP,{title:e.row.description},a.createElement(p.Z,{variant:"caption"},((t=e.row.description)&&t.length>20&&(t=t.slice(0,20)+" ..."),t)));var t}},{field:"hrnPrefix",headerName:d("hrnPrefix"),sortable:!0,width:200},{field:"noOfHrn",headerName:d("noOfHrn"),sortable:!0,width:200},{field:"redemptionNature",headerName:d("redemptionNature"),sortable:!0,width:200},{field:"actions",headerName:d("actions"),sortable:!1,renderCell:function(e){return a.createElement("div",null,a.createElement(W.Z,{size:"small",color:"primary","aria-label":"group action buttons"},R("DELETE_VOUCHER_TYPE")&&a.createElement(G.ZP,{title:d("delete")},a.createElement(m.Z,{onClick:function(){E(!0),S(e.getValue("voucherType"))}},a.createElement(Qe.Z,{fontSize:"small",style:{color:et.Z[400]}})))),a.createElement(l.SeamlessDialog,{open:g,onClose:O,className:T.dialogWrapper,maxWidth:"md",fullWidth:!0},a.createElement(a.Fragment,null,a.createElement("div",{className:T.modalContentSpacing},a.createElement(p.Z,{gutterBottom:!0,id:"transition-modal-title",variant:"h6",className:T.fontHeavy},d("deleteVoucherTypeConfirmationTitle"),": ",b),a.createElement(p.Z,{id:"transition-modal-description",variant:"body1"},d("deleteVoucherTypeConfirmationText")," ",b)),a.createElement("div",{className:T.modalContentSpacing},a.createElement(l.SeamlessButton,{type:"button",variant:"outlined",color:"primary",className:T.btnSpace,onClick:O},d("noConfirmationButton")),a.createElement(l.SeamlessButton,{type:"button",variant:"contained",color:"primary",onClick:D},d("yesConfirmationButton"))))))},flex:1}];return a.createElement(a.Fragment,null,a.createElement(H.Z,{className:T.table},a.createElement(x(),{loading:c,columnBuffer:3,rows:u,getRowId:function(e){return e.voucherType},columns:k,pageSize:P,localeText:{toolbarColumns:d("columns"),toolbarFilters:d("filters"),toolbarDensity:d("density"),toolbarExport:d("export"),columnsPanelTextFieldLabel:d("findColumn"),columnsPanelTextFieldPlaceholder:d("columnTitle"),columnsPanelShowAllButton:d("showAll"),columnsPanelHideAllButton:d("hideAll"),filterPanelColumns:d("columns"),filterPanelInputPlaceholder:d("filterValues"),filterPanelInputLabel:d("value"),filterOperatorContains:d("contains"),filterOperatorEquals:d("equals"),filterOperatorStartsWith:d("startsWith"),filterOperatorEndsWith:d("endsWith"),toolbarExportCSV:d("downloadAsCSV")}})))},at=function(e){var t=e.children,n=a.useState([]),r=(0,o.Z)(n,2),l=r[0],i=r[1],c=a.useState(!1),s=(0,o.Z)(c,2),u=s[0],m=s[1],d=w(),p=d.showErrorMessage;return d.showSuccessMessage,a.useEffect((function(){m(!0),I("/vms/v1/voucherType/fetchAll").then((function(e){i(e.voucherTypes)})).catch((function(e){p("There was an error")})).finally((function(){return m(!1)}))}),[]),a.createElement(a.Fragment,null,t({voucherTypes:l,loading:u}))},rt=function(){return a.createElement(at,null,(function(e){var t=e.voucherTypes,n=e.loading;return a.createElement(nt,{voucherTypes:t,loading:n})}))};var lt=(0,s.Z)((function(e){return(0,u.Z)({element:{marginRight:e.spacing(1),marginBottom:e.spacing(1),width:300},dialog:{width:"100%",height:"100%"},button:{width:80,marginRight:e.spacing(1)},table:{height:400,width:"100%"}})}));const it=function(e){var t,n,c,s=e.loading,u=e.voucherSubTypes,p=void 0===u?[]:u,g=(0,i.useTranslation)().t,E=lt(),v=a.useState(!1),Z=(0,o.Z)(v,2),b=Z[0],S=Z[1],y=a.useState(!1),N=(0,o.Z)(y,2),C=(N[0],N[1]),T=a.useState(""),R=(0,o.Z)(T,2),P=R[0],D=R[1],O=a.useState(""),k=(0,o.Z)(O,2),V=k[0],B=k[1],A=a.useState(!1),F=(0,o.Z)(A,2),j=F[0],M=F[1],_=a.useState({}),q=(0,o.Z)(_,2),K=q[0],Y=q[1],X=w(),$=X.showErrorMessage,J=X.showSuccessMessage,Q=(0,r.useHistory)(),ee=ne()().checkPermission,te=(null===(t=window)||void 0===t||null===(n=t.config)||void 0===n||null===(c=n.voucher)||void 0===c?void 0:c.recordsPerPage)||10,ae=function(){S(!1)},re=a.useCallback((function(e,t,n){C(!0),function(e,t,n){return I("/vms/v1/voucherSubType/".concat(t,"/").concat(n,"/update"),{method:"PATCH",body:e})}(e,n,t).then((function(e){0===e.resultCode?J(e.resultDescription):$(e.resultDescription),Q.push("/home/voucher/voucher-subtype")})).catch((function(e){return $(e)})).finally((function(){return C(!1)}))}),[]),le=h.Ry().shape({hrnLength:h.Rx().typeError(g("mustBeNumber")).required(g("valueIsRequired")),maxOrderThreshold:h.Rx().typeError(g("mustBeNumber")).integer().min(1).nullable()}),ie=(0,f.TA)({initialValues:{hrnLength:K.hrnLength,maxOrderThreshold:K.maxOrderThreshold},onSubmit:function(e){return re(e,P,V)},enableReinitialize:!0,validationSchema:le}),oe=ie.values,ce=ie.errors,se=ie.handleChange,ue=ie.handleBlur,me=ie.handleSubmit,de=ie.handleReset,pe=[{field:"name",headerName:g("voucherSubType"),sortable:!0,width:175},{field:"voucherType",headerName:g("voucherType"),sortable:!0,width:200,renderCell:function(e){return a.createElement(a.Fragment,null,"".concat(e.row.voucherTypeResponse.voucherType))}},{field:"hrnLength",headerName:g("hrnLength"),sortable:!0,width:125},{field:"startSerial",headerName:g("startSerial"),sortable:!0,width:150},{field:"serialPrefix",headerName:g("serialPrefix"),sortable:!0,width:125},{field:"maxOrderThreshold",headerName:g("maxOrderThreshold"),sortable:!0,width:180},{field:"lastGeneratedSerial",headerName:g("lastGeneratedSerial"),sortable:!0,width:180},{field:"actions",headerName:g("actions"),sortable:!1,renderCell:function(e){return a.createElement("div",null,a.createElement(W.Z,{size:"small",color:"primary","aria-label":"group action buttons"},ee("EDIT_VOUCHER_SUBTYPE")&&a.createElement(G.ZP,{title:g("edit")},a.createElement(m.Z,{onClick:function(){S(!0),D(e.row.voucherTypeResponse.voucherType),B(e.row.name),Y(e.row),M(!1)}},a.createElement(Re.Z,{fontSize:"small"})))))},flex:1}];return a.createElement(a.Fragment,null,a.createElement(H.Z,{className:E.table},a.createElement(x(),{loading:s,columnBuffer:3,rows:p,getRowId:function(e){return e.serialPrefix},columns:pe,pageSize:te,localeText:{toolbarColumns:g("columns"),toolbarFilters:g("filters"),toolbarDensity:g("density"),toolbarExport:g("export"),columnsPanelTextFieldLabel:g("findColumn"),columnsPanelTextFieldPlaceholder:g("columnTitle"),columnsPanelShowAllButton:g("showAll"),columnsPanelHideAllButton:g("hideAll"),filterPanelColumns:g("columns"),filterPanelInputPlaceholder:g("filterValues"),filterPanelInputLabel:g("value"),filterOperatorContains:g("contains"),filterOperatorEquals:g("equals"),filterOperatorStartsWith:g("startsWith"),filterOperatorEndsWith:g("endsWith"),toolbarExportCSV:g("downloadAsCSV")}})),a.createElement(je.Z,{open:b,onClose:ae},a.createElement(U.Z,{style:{textAlign:"center"}},g("editVoucherSubType")),a.createElement(L.Z,null,a.createElement(d.Z,{container:!0,direction:"column",spacing:3},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{className:E.element,fullWidth:!0,error:!!ce.hrnLength,helperText:ce.hrnLength,name:"hrnLength",value:oe.hrnLength,onChange:function(e){M(!0),se(e)},onBlur:ue,label:g("hrnLength")})),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{fullWidth:!0,error:!!ce.maxOrderThreshold,helperText:ce.maxOrderThreshold,className:E.element,name:"maxOrderThreshold",value:oe.maxOrderThreshold,onChange:function(e){M(!0),se(e)},onBlur:ue,label:g("maxOrderThreshold")})))),a.createElement(z.Z,null,a.createElement(m.Z,{onClick:function(e){return me()},className:E.button,variant:"contained",color:"secondary",disabled:!j},g("submitButton")),a.createElement(m.Z,{onClick:function(e){ae(),de(e)},className:E.button,variant:"contained",color:"secondary"},g("closeButton")))))},ot=function(e){var t=e.children,n=a.useState([]),r=(0,o.Z)(n,2),l=r[0],i=r[1],c=a.useState(!1),s=(0,o.Z)(c,2),u=s[0],m=s[1],d=(0,C.useSnackbar)().enqueueSnackbar;return a.useEffect((function(){m(!0),I("/vms/v1/voucherSubtypes/fetchall").then((function(e){i(e.subtypes)})).catch((function(e){d("There was an error",{variant:"error"})})).finally((function(){return m(!1)}))}),[]),a.createElement(a.Fragment,null,t({voucherSubTypes:l,loading:u}))},ct=function(){return a.createElement(ot,null,(function(e){var t=e.voucherSubTypes,n=e.loading;return a.createElement(it,{voucherSubTypes:t,loading:n})}))};function st(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?st(Object(n),!0).forEach((function(t){(0,N.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mt=(0,s.Z)((function(e){return(0,u.Z)({button:{margin:e.spacing(1),marginTop:e.spacing(1)},element:{marginTop:e.spacing(1),marginBottom:e.spacing(1),marginLeft:e.spacing(1)},dateField:{margin:e.spacing(1),width:"100%",marginTop:e.spacing(1)},dropDown:{margin:e.spacing(1)}})})),dt=[{key:"",value:""},{key:"SUBSCRIBER_MSISDN",value:"SUBSCRIBER_MSISDN"}],pt={identifier:{type:"HRN",value:""},redemptionInfo:{subscriber:{type:"SUBSCRIBER_MSISDN",value:""},amount:0}};const ft=function(){var e,t,n,r,s,u,p=mt(),g=(0,i.useTranslation)().t,E=a.useState(!1),v=(0,o.Z)(E,2),Z=(v[0],v[1]),b=w(),S=b.showWarningMessage,y=b.showErrorMessage,N=b.showSuccessMessage,C=a.useState("HRN"),T=(0,o.Z)(C,2),x=T[0],R=(T[1],a.useCallback((function(e,t){Z(!0),function(e){return I("/vms/v1/voucher/redeem",{method:"POST",body:e})}(ut(ut({},t),{},{identifier:{type:e,value:t.identifier.value}})).then((function(e){0===e.resultCode?N(e.resultDescription):y(e.resultDescription)})).catch((function(e){return y(e.name||"There is an error")})).finally((function(){return Z(!1)}))}),[])),P=h.Ry().shape({identifier:h.Ry().shape({type:h.Z_(),value:h.Rx().required("value is required")}),redemptionInfo:h.Ry().shape({subscriber:h.Ry().shape({type:h.Z_().required(),value:h.Z_().required("value is required")}),amount:h.Rx()})}),D=(0,f.TA)({initialValues:pt,onSubmit:function(e){return R(x,e)},validationSchema:P,enableReinitialize:!0}),O=D.values,k=D.errors,V=D.handleChange,B=D.handleReset,A=D.handleBlur,F=D.handleSubmit;return a.createElement(a.Fragment,null,"HRN"===x?a.createElement(a.Fragment,null,a.createElement(d.Z,{container:!0,spacing:3},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{className:(0,c.default)(p.element),fullWidth:!0,required:!0,name:"identifier.value",value:O.identifier.value,helperText:null===(e=k.identifier)||void 0===e?void 0:e.value,error:!(null===(t=k.identifier)||void 0===t||!t.value),onChange:V,label:g("hrn"),onBlur:A})))):null,x?a.createElement(a.Fragment,null,a.createElement(d.Z,{container:!0,spacing:3},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessDropDown,{className:(0,c.default)(p.dropDown),fullWidth:!0,required:!0,label:g("subscriberType"),helperText:g("selectSubscriberType"),options:dt,name:"redemptionInfo.subscriber.type",value:O.redemptionInfo.subscriber.type,onChange:V}))),a.createElement(d.Z,{container:!0,spacing:3},O.redemptionInfo.subscriber.type?a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{className:(0,c.default)(p.element),fullWidth:!0,required:!0,name:"redemptionInfo.subscriber.value",value:O.redemptionInfo.subscriber.value,helperText:null===(n=k.redemptionInfo)||void 0===n||null===(r=n.subscriber)||void 0===r?void 0:r.value,error:!(null===(s=k.redemptionInfo)||void 0===s||null===(u=s.subscriber)||void 0===u||!u.value),onChange:V,onBlur:A,label:"SUBSCRIBER_MSISDN"===O.redemptionInfo.subscriber.type?g("subscriberMsisdn"):g("subscriberId")})):null),a.createElement(d.Z,{container:!0,spacing:3},a.createElement(d.Z,{item:!0,xs:12},a.createElement(m.Z,{className:p.button,onClick:function(e){("HRN"===x&&""===O.identifier.value&&""===O.redemptionInfo.subscriber.type&&""===O.redemptionInfo.subscriber.value||"SERIAL"===x&&""===O.identifier.value&&""===O.redemptionInfo.subscriber.type&&""===O.redemptionInfo.subscriber.value&&0===O.redemptionInfo.amount)&&S(g("missingFieldsErrorGeneral")),F()},size:"small",variant:"contained",color:"primary"},g("recharge")),a.createElement(m.Z,{className:p.button,onClick:B,size:"small",color:"primary",variant:"outlined"},g("reset"))))):null)},ht=function(e){var t=e.children,n=a.useState([]),r=(0,o.Z)(n,2),l=r[0],i=r[1],c=w().showErrorMessage,s=a.useState(!1),u=(0,o.Z)(s,2),m=u[0],d=u[1];return a.useEffect((function(){d(!0),I("/vms/v1/voucherSubType/name").then((function(e){return i(e)})).catch((function(e){return c(e)})).finally((function(){return d(!1)}))}),[]),a.createElement(a.Fragment,null,t({subTypes:l,dropdownLoading:m}))};var gt=(0,s.Z)((function(e){return(0,u.Z)({button:{marginTop:50},element:{marginRight:e.spacing(1),marginBottom:e.spacing(1)},dateField:{margin:e.spacing(1),width:"100%"}})}));const Et=function(e){var t=e.data,n=e.onFormSubmit,r=gt(),o=(0,i.useTranslation)().t,s=w().showErrorMessage,u=h.Ry().shape({voucherSubtype:h.Z_().required(o("valueIsRequired")),voucherType:h.Z_().required(o("valueIsRequired")),hrnLength:h.Rx().typeError(o("mustBeNumber")).required(o("valueIsRequired")),serialPrefix:h.Rx().typeError(o("mustBeNumber")).required(o("valueIsRequired")),startSerial:h.Rx().typeError(o("mustBeNumber")).integer().min(1e5).required(o("valueIsRequired")).nullable(),maxOrderThreshold:h.Rx().integer().typeError(o("mustBeNumber")).min(1).required(o("valueIsRequired")).nullable()}),p=(0,f.TA)({initialValues:t,onSubmit:function(e){return n&&n(e)},enableReinitialize:!0,validationSchema:u}),g=p.values,E=p.errors,v=p.handleChange,Z=p.handleBlur,b=p.handleSubmit,y=p.handleReset;return a.createElement(a.Fragment,null,a.createElement(d.Z,{container:!0,spacing:3},a.createElement(at,null,(function(e){var t=e.voucherTypes;return e.loading,a.createElement(a.Fragment,null,a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessDropDown,{className:r.element,fullWidth:!0,label:o("voucherType"),options:[{value:" ",key:""}].concat((0,S.Z)(t.map((function(e){return{value:e.voucherType,key:e.voucherType}})))),name:"voucherType",onChange:v,required:!0,error:!!E.voucherType,value:g.voucherType,helperText:E.voucherType})))})),a.createElement(ht,null,(function(e){var t=e.subTypes;return e.dropdownLoading,a.createElement(a.Fragment,null,a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessDropDown,{className:r.element,fullWidth:!0,name:"voucherSubtype",label:o("voucherSubType"),options:[{value:" ",key:""}].concat((0,S.Z)(t.map((function(e){return{value:e,key:e}})))),onChange:v,onBlur:Z,value:g.voucherSubtype,error:!!E.voucherSubtype,required:!0,helperText:E.voucherSubtype})))}))),a.createElement(d.Z,{container:!0,spacing:3},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{fullWidth:!0,required:!0,error:!!E.serialPrefix,helperText:E.serialPrefix,className:r.element,name:"serialPrefix",value:g.serialPrefix,onChange:v,onBlur:Z,label:o("serialPrefix")})),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{className:r.element,fullWidth:!0,required:!0,error:!!E.startSerial,helperText:E.startSerial,name:"startSerial",value:g.startSerial,onChange:v,onBlur:Z,label:o("startSerial")}))),a.createElement(d.Z,{container:!0,spacing:3},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{className:r.element,fullWidth:!0,required:!0,error:!!E.hrnLength,helperText:E.hrnLength,name:"hrnLength",value:g.hrnLength,onChange:v,onBlur:Z,label:o("hrnLength")})),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{fullWidth:!0,required:!0,error:!!E.maxOrderThreshold,helperText:E.maxOrderThreshold,className:r.element,name:"maxOrderThreshold",value:g.maxOrderThreshold,onChange:v,onBlur:Z,label:o("maxOrderThreshold")}))),a.createElement(d.Z,{item:!0,xs:12},a.createElement(m.Z,{type:"button",onClick:function(e){" "===g.voucherSubtype||" "===g.voucherType?s(o("missingFieldsErrorGeneral")):b()},className:(0,c.default)(r.element,r.button),color:"primary",variant:"contained"},o("submitButton")),a.createElement(m.Z,{type:"button",onClick:y,className:(0,c.default)(r.element,r.button),color:"primary",variant:"outlined"},o("resetButton"))))};var vt=n(18896),Zt=(0,s.Z)((function(e){return(0,u.Z)({button:{marginTop:50},element:{marginRight:e.spacing(1),marginBottom:e.spacing(1)},dateField:{margin:e.spacing(1),width:"100%"},deleteButton:{width:10,marginTop:e.spacing(2)},checkBox:{"&.MuiTypography-root":{lineHeight:"38px"}}})}));const bt=function(e){var t=e.data,n=e.edit,r=e.onFormSubmit,s=Zt(),u=(0,i.useTranslation)().t,g=w().showErrorMessage,E=a.useState(!0),v=(0,o.Z)(E,2),Z=v[0],b=v[1],y=a.useState(""),N=(0,o.Z)(y,2),C=N[0],T=N[1],x=a.useState([]),R=(0,o.Z)(x,2),P=R[0],D=R[1],O=a.useState(!1),k=(0,o.Z)(O,2),V=(k[0],k[1]);a.useEffect((function(){V(!0),I("/vms/v1/subscriber/services").then((function(e){D(e.serviceClasses)})).catch((function(e){return g(e)})).finally((function(){return V(!1)}))}),[]);var B={service:" ",tariffPlan:""},A=h.Ry().shape({productSku:h.Z_().required(u("valueIsRequired")).test("len",u("valueIsRequired"),(function(e){return" "!==e})),denominationFrom:h.Rx().min(1).required(u("valueIsRequired")),denominationTo:h.Rx().min(1).required(u("valueIsRequired")),voucherType:h.Z_().required(u("valueIsRequired")).test("len",u("valueIsRequired"),(function(e){return" "!==e})),voucherSubType:h.Z_().required(u("valueIsRequired")).test("len",u("valueIsRequired"),(function(e){return" "!==e})),expiryDays:h.Rx().min(1).required(u("valueIsRequired")),servicesAndTariffs:h.IX().of(h.Ry().shape({tariffPlan:h.Z_().matches(/^[a-zA-Z0-9]+$/,u("alphaNumeric")).trim().test("len",u("valueIsRequired"),(function(e){return" "!==e}))}))});return a.createElement("div",{style:{marginTop:20}},a.createElement(f.J9,{initialValues:t,onSubmit:function(e){return r&&r(e)},validationSchema:A,validateOnChange:!1,validateOnBlur:!1,enableReinitialize:!0},(function(e){var t=e.values,r=e.errors,i=e.handleChange,o=e.handleSubmit,h=e.handleReset,E=e.handleBlur;return a.createElement(f.l0,null,a.createElement(Ke,{showDigitalProduct:!1,requireProductVoucherTypeMapping:!1},(function(e){var o=e.skus;return e.products,e.loading,a.createElement(a.Fragment,null,a.createElement(d.Z,{container:!0,spacing:3},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessDropDown,{className:s.element,fullWidth:!0,name:"productSku",label:u("productSKU"),options:[{value:" ",key:""}].concat((0,S.Z)(o.map((function(e){return{value:e.productSKU,key:e.productSKU}})))),onChange:function(e){t.denominationFrom="",t.denominationTo="",i(e),o.filter((function(t){t.productSKU===e.target.value&&(b(t.variablePrice),T(t.unitPrice))}))},value:t.productSku,error:!!r.productSku,required:!0,helperText:r.productSku,disabled:!!n}))),a.createElement(d.Z,{container:!0,spacing:3},a.createElement(at,null,(function(e){var o=e.voucherTypes;return e.loading,a.createElement(a.Fragment,null,a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessDropDown,{className:s.element,fullWidth:!0,label:u("voucherType"),options:[{value:" ",key:""}].concat((0,S.Z)(o.map((function(e){return{value:e.voucherType,key:e.voucherType}})))),name:"voucherType",onChange:i,required:!0,error:!!r.voucherType,value:t.voucherType,helperText:r.voucherType,disabled:!!n})))})),a.createElement(ht,null,(function(e){var o=e.subTypes;return e.dropdownLoading,a.createElement(a.Fragment,null,a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessDropDown,{className:s.element,fullWidth:!0,name:"voucherSubType",label:u("voucherSubType"),options:[{value:" ",key:""}].concat((0,S.Z)(o.map((function(e){return{value:e,key:e}})))),onChange:i,onBlur:E,value:t.voucherSubType,error:!!r.voucherSubType,required:!0,helperText:r.voucherSubType,disabled:!!n})))}))),a.createElement(d.Z,{container:!0,spacing:3},Z?a.createElement(a.Fragment,null,a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{fullWidth:!0,required:!0,error:!!r.denominationFrom,helperText:r.denominationFrom,className:s.element,name:"denominationFrom",value:t.denominationFrom,onChange:i,onBlur:E,label:u("amountRangeFrom"),disabled:!Z&&n})),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{className:s.element,fullWidth:!0,required:!0,error:!!r.denominationTo,helperText:r.denominationTo,name:"denominationTo",value:t.denominationTo,onChange:i,onBlur:E,label:u("amountRangeTo")}))):a.createElement(a.Fragment,null,a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{className:s.element,fullWidth:!0,name:"denominationFrom",label:u("amountRangeFrom"),value:C,onChange:i,onBlur:E,disabled:!0})),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{className:s.element,fullWidth:!0,name:"denominationTo",value:C,onChange:i,onBlur:E,label:u("amountRangeTo"),disabled:!0})))))})),a.createElement(d.Z,{container:!0,spacing:3},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{fullWidth:!0,required:!0,error:!!r.expiryDays,helperText:r.expiryDays,className:s.element,name:"expiryDays",value:t.expiryDays,onChange:i,onBlur:E,label:u("expiryDays")})),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(d.Z,{container:!0,justify:"space-between"},a.createElement(p.Z,{className:s.checkBox},"Redeem Transfer"),a.createElement(He.Z,{name:"redeemTransferFlag",checked:0!==t.redeemTransferFlag,onChange:function(e){return i({target:{value:e.target.checked?1:0,name:"redeemTransferFlag"}})},inputProps:{"aria-label":"controlled"}}),a.createElement(p.Z,{className:s.checkBox},0===t.redeemTransferFlag?"OFF":"ON")))),a.createElement(f.F2,{name:"servicesAndTariffs"},(function(e){var n=e.push,o=e.remove;return a.createElement(a.Fragment,null,t.servicesAndTariffs&&t.servicesAndTariffs.map((function(e,n){return a.createElement(a.Fragment,{key:n},a.createElement(d.Z,{container:!0,spacing:3},t.servicesAndTariffs&&a.createElement(a.Fragment,null,a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessDropDown,{className:s.element,fullWidth:!0,name:"servicesAndTariffs.".concat(n,".service"),label:u("selectService"),options:[{value:" ",key:""}].concat((0,S.Z)(P.map((function(e){return{value:e,key:e}})))),onChange:function(e){return i(e)},value:t.servicesAndTariffs[n].service})),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{className:s.element,fullWidth:!0,name:"servicesAndTariffs.".concat(n,".tariffPlan"),label:u("selectTariff"),onChange:function(e){return i(e)},value:t.servicesAndTariffs[n].tariffPlan,error:(c=r,p=n,"tariffPlan",E=c.servicesAndTariffs,!!(E&&c.servicesAndTariffs&&(null===(h=c.servicesAndTariffs)||void 0===h?void 0:h.length)>0)&&!(null===(g=E[p])||void 0===g||!g.tariffPlan)),helperText:a.createElement(f.Bc,{name:"servicesAndTariffs.".concat(n,".tariffPlan")})}))),a.createElement(d.Z,{item:!0},a.createElement(G.ZP,{title:u("delete")},a.createElement(m.Z,{className:s.deleteButton,onClick:function(){return o(n)}},a.createElement(Qe.Z,{fontSize:"small",style:{color:et.Z[400]}}))))));var c,p,h,g,E})),a.createElement(d.Z,{item:!0},a.createElement(m.Z,{variant:"contained",color:"primary",startIcon:a.createElement(vt.Z,null),onClick:function(){return n(B)},disabled:t.servicesAndTariffs&&t.servicesAndTariffs.length===P.length},u("addNewService"))))})),a.createElement(d.Z,{item:!0,xs:12},a.createElement(m.Z,{type:"button",onClick:function(){var e,n,a,r;Z&&parseInt(t.denominationFrom)>parseInt(t.denominationTo)?g(u("denominationToGreaterThandenominationFrom")):(Z||(t.denominationTo=C,t.denominationFrom=C),n=!1,(r=(a=(e=t).servicesAndTariffs&&e.servicesAndTariffs.map((function(e){return e.service})))&&a.filter((function(e,t){return e.trim()&&a.indexOf(e)!==t})))&&r.length>0?(1===r.length?g(r+u("serviceIsAlreadyMappedToATariffPlan")):g(r+u("servicesAreAlreadyMappedToATariffPlan")),n=!0):e.servicesAndTariffs&&(null==e?void 0:e.servicesAndTariffs.length)>0?e.servicesAndTariffs.map((function(e){!e.service.trim()&&e.tariffPlan.trim()&&(g(u("pleaseSelectService")),n=!0)})):e.servicesAndTariffs&&0===e.servicesAndTariffs.length&&(n=!1),!n&&o())},className:(0,c.default)(s.element,s.button),color:"primary",variant:"contained"},u("submitButton")),a.createElement(m.Z,{type:"button",onClick:function(e){T(""),b(!0),h(e)},className:(0,c.default)(s.element,s.button),color:"primary",variant:"outlined"},u("resetButton"))))})))};var St=(0,We.makeStyles)((function(e){return(0,We.createStyles)({dialogWrapper:{textAlign:"center","& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginBottom:e.spacing(3)},btnSpace:{marginRight:e.spacing(2)},element:{width:270},elementField:{width:550},button:{width:80,marginRight:e.spacing(1)},rowSpacing:{marginBottom:e.spacing(.5)},table:{height:400,width:"100%"}})}));const yt=function(e){var t,n,c,s=e.loading,u=e.printData,g=(0,i.useTranslation)().t,E=St(),v=w(),Z=v.showErrorMessage,b=v.showSuccessMessage,S=a.useState(!1),y=(0,o.Z)(S,2),N=y[0],C=y[1],T=a.useState(""),R=(0,o.Z)(T,2),P=R[0],D=R[1],O=a.useState(0),k=(0,o.Z)(O,2),V=k[0],B=k[1],A=(null===(t=window)||void 0===t||null===(n=t.config)||void 0===n||null===(c=n.voucher)||void 0===c?void 0:c.recordsPerPage)||10,F=a.useState(!1),j=(0,o.Z)(F,2),M=j[0],_=j[1],q=a.useState(!1),K=(0,o.Z)(q,2),Y=(K[0],K[1]),X=a.useState(""),$=(0,o.Z)(X,2),Q=$[0],ee=$[1],te=a.useState({}),ae=(0,o.Z)(te,2),re=ae[0],le=ae[1],ie=(0,r.useHistory)(),oe=a.useState(!1),ce=(0,o.Z)(oe,2),ue=ce[0],me=ce[1],de=ne()().checkPermission,pe=function(){_(!1)},fe=a.useCallback((function(e,t){Y(!0),function(e,t){return I("/vms/v1/voucher-printer-profile/".concat(t,"/update"),{method:"PATCH",body:e})}(e,t).then((function(e){0===e.resultCode?b(e.resultDescription):Z(e.resultDescription),ie.push("/home/voucher/printer-profile")})).catch((function(e){return Z(e)})).finally((function(){return Y(!1)}))}),[]),he=h.Ry().shape({printerCode:h.Z_().matches(/^[aA-zZ0-9\s]+$/,g("alphaNumeric")),emailAddress:h.Z_().matches(/^([\w+-.%]+@[\w-.]+\.[A-Za-z]{2,4};?)+$/,g("enterValidEmailId")),state:h.Z_().test("len",g("valueIsRequired"),(function(e){return" "!==e})),pgpKey:h.Z_().required(g("valueIsRequired"))}),ge=(0,f.TA)({initialValues:{printerCode:re.printerCode,emailAddress:re.emailAddress,pgpKey:re.pgpKey,state:re.state},onSubmit:function(e){return fe(e,Q)},enableReinitialize:!0,validateOnChange:!1,validateOnBlur:!1,validationSchema:he}),Ee=ge.values,ve=ge.errors,Ze=ge.handleChange,be=ge.handleBlur,Se=ge.handleSubmit,ye=ge.handleReset,Ne=function(){C(!1)},Ce=[{field:"printerHouseName",headerName:g("printerHouseName"),sortable:!0,width:225},{field:"printerCode",headerName:g("printerCode"),sortable:!0,width:225},{field:"ipAddress",headerName:g("ipAddress"),sortable:!0,width:225},{field:"state",headerName:g("state"),sortable:!0,width:225},{field:"actions",headerName:g("actions"),sortable:!1,width:235,renderCell:function(e){return a.createElement("div",null,a.createElement(W.Z,{size:"small",color:"primary","aria-label":"product association buttons"},de(se)&&a.createElement(G.ZP,{title:g("view")},a.createElement(m.Z,{component:r.Link,to:"/home/voucher/printer-profile/view/"+e.getValue("printerCode")},a.createElement(J.Z,{fontSize:"small"}))),de("EDIT_PRINTER_PROFILE")&&a.createElement(G.ZP,{title:g("edit")},a.createElement(m.Z,{onClick:function(){_(!0),ee(e.row.printerCode),le(e.row),me(!1)}},a.createElement(Re.Z,{fontSize:"small"}))),de("DELETE_PRINTER_PROFILE")&&a.createElement(G.ZP,{title:g("delete")},a.createElement(m.Z,{onClick:function(){C(!0),D(e.row.printerCode),B(e.row.id)}},a.createElement(Qe.Z,{fontSize:"small",style:{color:et.Z[400]}})))))}}];return a.createElement(a.Fragment,null,a.createElement(H.Z,{className:E.table},a.createElement(x(),{loading:s,columnBuffer:3,rows:u,getRowId:function(e){return e.id},columns:Ce,pageSize:A,localeText:{toolbarColumns:g("columns"),toolbarFilters:g("filters"),toolbarDensity:g("density"),toolbarExport:g("export"),columnsPanelTextFieldLabel:g("findColumn"),columnsPanelTextFieldPlaceholder:g("columnTitle"),columnsPanelShowAllButton:g("showAll"),columnsPanelHideAllButton:g("hideAll"),filterPanelColumns:g("columns"),filterPanelInputPlaceholder:g("filterValues"),filterPanelInputLabel:g("value"),filterOperatorContains:g("contains"),filterOperatorEquals:g("equals"),filterOperatorStartsWith:g("startsWith"),filterOperatorEndsWith:g("endsWith"),toolbarExportCSV:g("downloadAsCSV")}})),a.createElement(je.Z,{open:M,onClose:pe},a.createElement(U.Z,{style:{textAlign:"center"}},g("editPrinterProfile")),a.createElement(L.Z,null,a.createElement(d.Z,{container:!0},a.createElement(d.Z,{container:!0,spacing:1,className:E.rowSpacing},a.createElement(d.Z,{item:!0,xs:6},a.createElement(l.SeamlessInput,{className:E.element,fullWidth:!0,disabled:!0,error:!!ve.printerCode,helperText:ve.printerCode,name:"printerCode",value:Ee.printerCode,onChange:function(e){me(!0),Ze(e)},onBlur:be,label:g("printerCode")})),a.createElement(d.Z,{item:!0,xs:6},a.createElement(l.SeamlessInput,{fullWidth:!0,error:!!ve.emailAddress,helperText:ve.emailAddress,className:E.element,name:"emailAddress",value:Ee.emailAddress,onChange:function(e){me(!0),Ze(e)},onBlur:be,label:g("emailAddress")}))),a.createElement(d.Z,{container:!0,spacing:1,className:E.rowSpacing},a.createElement(d.Z,{item:!0,xs:6},a.createElement(l.SeamlessDropDown,{className:E.element,fullWidth:!0,label:g("state"),helperText:ve.state,error:!!ve.state,options:[{key:"",value:" "},{key:"ACTIVE",value:"ACTIVE"},{key:"INACTIVE",value:"INACTIVE"}],name:"state",value:Ee.state,onChange:function(e){me(!0),Ze(e)}}))),a.createElement(d.Z,{container:!0,spacing:1,className:E.rowSpacing},a.createElement(d.Z,{item:!0,xs:6},a.createElement(l.SeamlessInput,{required:!0,fullWidth:!0,multiline:!0,rows:3,rowsMax:10,error:!!ve.pgpKey,helperText:ve.pgpKey,className:E.elementField,name:"pgpKey",value:Ee.pgpKey,onChange:function(e){me(!0),Ze(e)},onBlur:be,label:g("pgpKey")}))))),a.createElement(z.Z,null,a.createElement(m.Z,{onClick:function(e){return Se()},className:E.button,variant:"contained",color:"secondary",disabled:!ue},g("submitButton")),a.createElement(m.Z,{onClick:function(e){pe(),ye(e)},className:E.button,variant:"contained",color:"secondary"},g("closeButton")))),a.createElement(l.SeamlessDialog,{open:N,onClose:Ne,className:E.dialogWrapper,maxWidth:"md",fullWidth:!0},a.createElement(a.Fragment,null,a.createElement("div",{className:E.modalContentSpacing},a.createElement(p.Z,{gutterBottom:!0,id:"transition-modal-title",variant:"h6",className:E.fontHeavy},g("deletePrinterProfileConfirmationTitle")),a.createElement(p.Z,{id:"transition-modal-description",variant:"body1"},g("deletePrinterProfileConfirmationText")," ",g("printerCode"),": ",P)),a.createElement("div",{className:E.modalContentSpacing},a.createElement(l.SeamlessButton,{type:"button",variant:"outlined",color:"primary",className:E.btnSpace,onClick:Ne},g("noConfirmationButton")),a.createElement(l.SeamlessButton,{type:"button",variant:"contained",color:"primary",onClick:function(){(function(e){return I("/vms/v1/voucher-printer-profile/".concat(e),{method:"DELETE"})})(P).then((function(e){var t;C(!1),0===e.resultCode?(b(e.resultDescription),null===(t=document.querySelector("[data-id='"+V+"']"))||void 0===t||t.remove()):Z(e.resultDescription)})).catch((function(e){return Z(e.resultDescription)}))}},g("yesConfirmationButton"))))))},Nt=function(e){var t=e.children,n=a.useState(!1),r=(0,o.Z)(n,2),l=r[0],i=r[1],c=a.useState([]),s=(0,o.Z)(c,2),u=s[0],m=s[1],d=w().showErrorMessage;return a.useEffect((function(){i(!0),I("/vms/v1/voucher-printer-profiles").then((function(e){return e.voucherPrinterProfileDataList.length>0?m(e.voucherPrinterProfileDataList):d(e.resultDescription)})).catch((function(e){return d(e)})).finally((function(){return i(!1)}))}),[]),a.createElement(a.Fragment,null,t({printData:u,loading:l}))},Ct=function(){return a.createElement(Nt,null,(function(e){var t=e.printData,n=e.loading;return a.createElement(yt,{printData:t,loading:n})}))};var wt=(0,s.Z)((function(e){return(0,u.Z)({fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{fontSize:14},rowSpacing:{marginBottom:e.spacing(.5)},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)}})}));const Tt=function(e){var t=e.loading,n=e.viewData,o=wt(),c=(0,i.useTranslation)().t;return a.createElement(a.Fragment,null,t?a.createElement(qe.Z,null):a.createElement(d.Z,{container:!0},a.createElement(d.Z,{container:!0,spacing:3,className:o.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldHeading},c("printerHouseName"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldValue},null==n?void 0:n.printerHouseName)),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldHeading},c("printerCode"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldValue},null==n?void 0:n.printerCode))),a.createElement(d.Z,{container:!0,spacing:3,className:o.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldHeading},c("emailAddress"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldValue},null==n?void 0:n.emailAddress)),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldHeading},c("ipAddress"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldValue},null==n?void 0:n.ipAddress))),a.createElement(d.Z,{container:!0,spacing:3,className:o.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldHeading},c("modifiedDate"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldValue},null==n?void 0:n.modifiedDate)),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldHeading},c("createdDate"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldValue},null==n?void 0:n.createdDate))),a.createElement(d.Z,{container:!0,spacing:3,className:o.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldHeading},c("state"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldValue},null==n?void 0:n.state)),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldHeading},c("port"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldValue},null==n?void 0:n.port))),a.createElement(d.Z,{container:!0,spacing:3,className:o.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldHeading},c("pgpKey"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldValue},null==n?void 0:n.pgpKey))),a.createElement(d.Z,{container:!0,spacing:3,className:o.rowSpacing},a.createElement(l.SeamlessButton,{component:r.Link,to:"/home/voucher/printer-profile",variant:"contained",color:"primary",className:o.button},c("backButton")))))};var xt=n(64268),Rt=n(91492),Pt=(0,s.Z)((function(e){return(0,u.Z)({fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{fontSize:14,display:"flex",alignItems:"center",marginRight:4},rowSpacing:{marginBottom:e.spacing(.5)},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)},serviceTariff:{fontSize:14}})}));const It=function(e){var t=e.loading,n=e.viewData,o=Pt(),c=(0,i.useTranslation)().t,s=null==n?void 0:n.subscriberServiceTariffPlan;return a.createElement(a.Fragment,null,t?a.createElement(qe.Z,null):a.createElement(d.Z,{container:!0},a.createElement(d.Z,{container:!0,spacing:3,className:o.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldHeading},c("voucherSubType"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldValue},null==n?void 0:n.voucherSubtypeName)),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldHeading},c("voucherType"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldValue},null==n?void 0:n.voucherType))),a.createElement(d.Z,{container:!0,spacing:3,className:o.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldHeading},c("productId"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldValue},null==n?void 0:n.id)),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldHeading},c("expiryDays"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldValue},null==n?void 0:n.expiryDays))),a.createElement(d.Z,{container:!0,spacing:3,className:o.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldHeading},c("productSku"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldValue},null==n?void 0:n.productSku)),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldHeading},c("redemptionNature"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldValue},null==n?void 0:n.redemptionNature))),a.createElement(d.Z,{container:!0,spacing:3,className:o.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldHeading},c("rangeFrom"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldValue},null==n?void 0:n.denominationFrom)),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldHeading},c("rangeTo"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldValue},null==n?void 0:n.denominationTo))),a.createElement(d.Z,{container:!0,spacing:3,className:o.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldHeading},c("createdDate"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldValue},null==n?void 0:n.createdDate)),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldHeading},c("modifiedDate"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldValue},null==n?void 0:n.modifiedDate))),a.createElement(d.Z,{container:!0,spacing:3,className:o.rowSpacing},s?a.createElement(a.Fragment,null,a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldHeading},c("subscriberServiceTariffPlan"))),a.createElement(d.Z,{item:!0,xs:12,sm:Object.entries(s).length>7?9:3},a.createElement(d.Z,{container:!0,className:o.serviceTariff},Object.entries(s).map((function(e){return a.createElement(a.Fragment,null,e[1]?a.createElement(p.Z,{className:o.fieldValue},e[0]+": "+e[1]+", "):a.createElement(p.Z,{className:o.fieldValue},e[0]+", "))}))))):null,a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldHeading},c("redeemTransferFlag"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:o.fieldValue},1===(null==n?void 0:n.redeemTransferFlag)?a.createElement(a.Fragment,null,a.createElement(xt.Z,null),"ON"):a.createElement(a.Fragment,null,a.createElement(Rt.Z,null),"OFF")))),a.createElement(d.Z,{container:!0,spacing:3,className:o.rowSpacing},a.createElement(l.SeamlessButton,{component:r.Link,to:"/home/voucher/product-association",variant:"contained",color:"primary",className:o.button},c("backButton")))))};var Dt=(0,s.Z)((function(e){return(0,u.Z)({button:{marginTop:10},element:{marginRight:e.spacing(1),marginBottom:e.spacing(1)},dateField:{margin:e.spacing(1),width:"100%"},elementField:{marginRight:e.spacing(1),marginBottom:e.spacing(1),width:550}})}));const Ot=function(e){var t=e.data,n=e.onFormSubmit,r=Dt(),o=(0,i.useTranslation)().t,s=h.Ry().shape({printerCode:h.Z_().required(o("valueIsRequired")).matches(/^[a-zA-Z0-9]+$/,o("alphaNumericValidation")),printerHouseName:h.Z_().required(o("valueIsRequired")).matches(/^[a-zA-Z0-9\s]+$/,o("alphaNumericValidation")),emailAddress:h.Z_().matches(/^([\w+-.%]+@[\w-.]+\.[A-Za-z]{2,3};?)+$/,o("enterValidEmailId")),state:h.Z_().required(o("valueIsRequired")).test("len",o("valueIsRequired"),(function(e){return" "!==e})),ipAddress:h.Z_(),port:h.Rx(),pgpKey:h.Z_().required(o("valueIsRequired")),address:h.Z_().matches(/^[a-zA-Z0-9-,/\s]+$/,o("addressValidation"))}),u=(0,f.TA)({initialValues:t,onSubmit:function(e){return n&&n(e)},validationSchema:s,validateOnChange:!1,validateOnBlur:!1,enableReinitialize:!0}),p=u.values,g=u.errors,E=u.handleChange,v=(u.handleBlur,u.handleSubmit),Z=u.handleReset;return a.createElement(a.Fragment,null,a.createElement(d.Z,{container:!0,spacing:3},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{fullWidth:!0,error:!!g.printerCode,helperText:g.printerCode,className:(0,c.default)(r.element),name:"printerCode",value:p.printerCode,onChange:E,label:o("printerCode"),required:!0})),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{fullWidth:!0,error:!!g.printerHouseName,helperText:g.printerHouseName,className:(0,c.default)(r.element),name:"printerHouseName",value:p.printerHouseName,onChange:E,label:o("printerHouseName"),required:!0})),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{fullWidth:!0,error:!!g.emailAddress,helperText:g.emailAddress,className:(0,c.default)(r.element),name:"emailAddress",value:p.emailAddress,onChange:E,label:o("emailAddress")}))),a.createElement(d.Z,{container:!0,spacing:3},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessDropDown,{className:(0,c.default)(r.element),fullWidth:!0,required:!0,label:o("state"),helperText:o("selectState"),options:[{key:"",value:" "},{key:"ACTIVE",value:"ACTIVE"},{key:"INACTIVE",value:"INACTIVE"}],name:"state",value:p.state,error:!!g.state,onChange:E})),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{fullWidth:!0,error:!!g.ipAddress,helperText:g.ipAddress,className:(0,c.default)(r.element),name:"ipAddress",value:p.ipAddress,onChange:E,label:o("ipAddress")})),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{fullWidth:!0,error:!!g.port,helperText:g.port,className:(0,c.default)(r.element),name:"port",value:p.port,onChange:E,label:o("port")}))),a.createElement(d.Z,{container:!0,spacing:3},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{fullWidth:!0,error:!!g.address,helperText:g.address,className:(0,c.default)(r.elementField),name:"address",value:p.address,onChange:E,label:o("address")}))),a.createElement(d.Z,{container:!0,spacing:3},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{required:!0,fullWidth:!0,multiline:!0,rows:5,rowsMax:10,error:!!g.pgpKey,helperText:g.pgpKey,className:(0,c.default)(r.elementField),name:"pgpKey",value:p.pgpKey,onChange:E,label:o("pgpKey")}))),a.createElement(d.Z,{item:!0,xs:12},a.createElement(m.Z,{type:"button",onClick:function(e){v()},className:(0,c.default)(r.element,r.button),color:"primary",variant:"contained"},o("submitButton")),a.createElement(m.Z,{type:"button",onClick:Z,className:(0,c.default)(r.element,r.button),color:"primary",variant:"outlined"},o("resetButton"))))};var kt=n(26977),Vt=(0,s.Z)((function(e){return(0,u.Z)({button:{marginTop:50,marginRight:e.spacing(1),marginBottom:e.spacing(1)},element:{width:255,marginBottom:e.spacing(1),marginTop:e.spacing(2),"& .MuiFormLabel-root":{fontSize:"12px"}},dropDown:{width:255,marginBottom:e.spacing(1),marginTop:e.spacing(2),"& .MuiInputBase-input":{backgroundColor:"#eeeeee",padding:"10px"}},deleteButton:{width:10,marginTop:e.spacing(5)},switch:{marginTop:e.spacing(3)},checkbox:{marginTop:e.spacing(3),width:"255px","& .MuiButtonBase-root":{padding:12}}})}));const Bt=function(e){var t=e.data,n=e.admin,r=e.onFormSubmit,s=(0,i.useTranslation)().t,u=Vt(),p=a.useState(!1),E=(0,o.Z)(p,2),Z=E[0],b=E[1],y=a.useState([]),N=(0,o.Z)(y,2),C=N[0],w=N[1],T=a.useState([]),x=(0,o.Z)(T,2),R=x[0],P=x[1],I=function(e){b(e.target.checked)},D={productSKU:" ",productIdType:"",denomination:"",currency:window.config.currency||"none",count:"",voucherState:" ",customExpiryDays:"",voucherSubTypeName:"PHYSICAL"},O=h.Ry().shape({products:h.IX().of(h.Ry().shape({productSKU:h.Z_().required(s("valueIsRequired")).test("len",s("valueIsRequired"),(function(e){return" "!==e})),denomination:h.Rx().typeError(s("mustBeNumber")).min(1).required(s("valueIsRequired")),voucherState:h.Z_().required(s("valueIsRequired")).test("len",s("valueIsRequired"),(function(e){return" "!==e})),count:h.Rx().typeError(s("mustBeNumber")).required(s("valueIsRequired")).test("len",s("mustBeGreaterThan0"),(function(e){return Number(e)>0})),customExpiryDays:n?h.Rx().typeError(s("mustBeNumber")).min(1,s("mustBeGreaterThan0")):h.Z_()}))}),k=function(e,t,n){var a,r,l,i,o,c,s=e.products;return!!(s&&e.products&&(null===(a=e.products)||void 0===a?void 0:a.length)>0&&("productSKU"===n&&null!==(r=s[t])&&void 0!==r&&r.productSKU||"count"===n&&null!==(l=s[t])&&void 0!==l&&l.count||"denomination"===n&&null!==(i=s[t])&&void 0!==i&&i.denomination||"voucherState"===n&&null!==(o=s[t])&&void 0!==o&&o.voucherState||"customExpiryDays"===n&&null!==(c=s[t])&&void 0!==c&&c.customExpiryDays))},V=function(){};return a.createElement(f.J9,{initialValues:t,onSubmit:function(e){return r&&r(e)},validationSchema:O,validateOnChange:!1,enableReinitialize:!0},(function(e){var t=e.values,r=e.errors,i=e.handleChange,o=e.handleSubmit,p=e.handleReset;return a.createElement(f.l0,null,a.createElement(f.F2,{name:"products"},(function(e){var o=e.push,p=e.remove;return a.createElement(a.Fragment,null,t.products.map((function(e,o){return a.createElement(Ke,{initialProducts:C,initialSKUs:R,showDigitalProduct:!1,requireProductVoucherTypeMapping:!0},(function(e){var h,g,E,v,Z,b=e.skus,y=e.products;e.loading,!C.length&&w(y),!R.length&&P(b);var N=[];y.filter((function(e){var t=e.variants.filter((function(e){return"PHYSICAL"===e.voucherSubtypeName}));if(t.length>0)return N.push(t[0])}));var T=N.length>0?N:[];return a.createElement(a.Fragment,null,a.createElement(d.Z,{container:!0,spacing:1},a.createElement(d.Z,{item:!0},a.createElement(l.Check,{disabled:!0,checked:!0,className:u.checkbox,name:"products.".concat(o,".voucherSubTypeName"),label:s("physicalVoucher"),color:"primary",handleChange:V})),a.createElement(d.Z,{item:!0},a.createElement(l.SeamlessDropDown,{className:u.dropDown,fullWidth:!0,name:"products.".concat(o,".productSKU"),label:s("productSKU"),options:"PHYSICAL"===(null===(h=t.products[o])||void 0===h?void 0:h.voucherSubTypeName)?[{value:" ",key:""}].concat((0,S.Z)(T.map((function(e){return{value:e.productSKU,key:e.productSKU}})))):[{value:" ",key:""}].concat((0,S.Z)(b.map((function(e){return{value:e.productSKU,key:e.productSKU}})))),onChange:function(e){b.map((function(e){e.variablePrice?t.products[o].denomination="":t.products[o].denomination=t.products[o].denomination})),i(e)},value:null===(g=t.products[o])||void 0===g?void 0:g.productSKU,required:!0,error:k(r,o,"productSKU"),helperText:a.createElement(f.Bc,{name:"products.".concat(o,".productSKU")})})),b.map((function(e){var n;if(e.productSKU===t.products[o].productSKU)return a.createElement(a.Fragment,null,e.variablePrice?a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{className:u.element,fullWidth:!0,required:!0,name:"products.".concat(o,".denomination"),label:s("denomination"),onChange:i,value:null===(n=t.products[o])||void 0===n?void 0:n.denomination,error:k(r,o,"denomination"),helperText:a.createElement(f.Bc,{name:"products.".concat(o,".denomination")})})):a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{className:u.element,fullWidth:!0,label:s("denomination"),value:t.products[o].denomination=e.unitPrice,disabled:!0})))}))),a.createElement(d.Z,{container:!0,spacing:1},a.createElement(d.Z,{item:!0},a.createElement(l.SeamlessDropDown,{className:(0,c.default)(u.dropDown),fullWidth:!0,required:!0,label:s("voucherState"),options:[{key:"",value:" "},{key:"RESERVED",value:"RESERVED"}],name:"products.".concat(o,".voucherState"),onChange:i,value:null===(E=t.products[o])||void 0===E?void 0:E.voucherState,error:k(r,o,"voucherState"),helperText:a.createElement(f.Bc,{name:"products.".concat(o,".voucherState")})})),a.createElement(d.Z,{item:!0},a.createElement(l.SeamlessInput,{className:u.element,fullWidth:!0,name:"products.".concat(o,".count"),label:s("count"),onChange:i,value:null===(v=t.products[o])||void 0===v?void 0:v.count,required:!0,error:k(r,o,"count"),helperText:a.createElement(f.Bc,{name:"products.".concat(o,".count")})})),n?a.createElement(d.Z,{item:!0},a.createElement(l.SeamlessInput,{className:u.element,fullWidth:!0,name:"products.".concat(o,".customExpiryDays"),label:s("customExpiryDays"),onChange:i,value:null===(Z=t.products[o])||void 0===Z?void 0:Z.customExpiryDays,error:k(r,o,"customExpiryDays"),helperText:a.createElement(f.Bc,{name:"products.".concat(o,".customExpiryDays")})})):null,0!==o&&a.createElement(d.Z,{item:!0},a.createElement(G.ZP,{title:s("delete")},a.createElement(m.Z,{className:u.deleteButton,onClick:function(){return p(o)}},a.createElement(Qe.Z,{fontSize:"small",style:{color:et.Z[400]}}))))),a.createElement(K.Z,{style:{marginBottom:10}}))}))})),a.createElement(d.Z,{item:!0},a.createElement(m.Z,{variant:"contained",color:"primary",startIcon:a.createElement(vt.Z,null),onClick:function(){return o(D)}},s("addNewOrder"))))})),n?a.createElement(a.Fragment,null,a.createElement(d.Z,{item:!0},a.createElement(l.SeamlessInput,{className:u.element,fullWidth:!0,name:"comment",label:s("comment"),onChange:i,value:t.comment,error:!!r.comment,helperText:r.comment})),a.createElement(d.Z,{container:!0},a.createElement(d.Z,{item:!0},a.createElement(Me.Z,{className:u.switch,control:a.createElement(He.Z,{checked:Z,onChange:I}),label:s("scheduledGeneration")})),Z?a.createElement(g.M,{utils:v.Z},a.createElement(d.Z,{item:!0},a.createElement(kt.B,{variant:"inline",ampm:!1,className:u.element,name:"requestedDeliveryTime",helperText:s("requestedDeliveryTime"),value:t.requestedDeliveryTime,onChange:function(e){i({target:{value:e,name:"requestedDeliveryTime"}})},disablePast:!0,disableToolbar:!0,autoOk:!0,format:"yyyy/MM/dd HH:mm"}))):null)):null,a.createElement(d.Z,{item:!0,xs:12},a.createElement(m.Z,{type:"button",onClick:function(e){o()},className:u.button,color:"primary",variant:"contained"},s("submitButton")),a.createElement(m.Z,{type:"button",onClick:function(e){b(!1),p(e)},className:u.button,color:"primary",variant:"outlined"},s("resetButton"))))}))};var At=n(55238),Ft=n(76760),jt=n(91750),Mt=n(87685),_t=(0,We.makeStyles)((function(e){return(0,We.createStyles)({dialogWrapper:{textAlign:"center","& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginBottom:e.spacing(3)},button:{width:80,marginRight:e.spacing(1)},icon:{color:et.Z[400],width:"100%",textAlign:"center",fontSize:60},closeButton:{position:"absolute",right:e.spacing(0),top:e.spacing(1),color:"#000000"},table:{height:400,width:"100%"}})}));const qt=function(e){var t=e.loading,n=e.count,c=e.ordersData,s=e.page,u=e.perPage,d=e.onPageChange,f=e.onPageSizeChange,h=(0,i.useTranslation)().t,g=ne()().checkPermission,E=a.useState(!1),v=(0,o.Z)(E,2),Z=(v[0],v[1]),b=a.useState(""),S=(0,o.Z)(b,2),y=S[0],N=S[1],C=w(),T=C.showErrorMessage,P=C.showSuccessMessage,D=a.useState(!1),O=(0,o.Z)(D,2),k=O[0],V=O[1],B=_t(),A=a.useCallback((function(e){Z(!0),function(e){return I("/vms/v1/return/order/".concat(e),{method:"POST"})}(e).then((function(e){0===e.resultCode?(P(e.resultDescription),V(!1)):(T(e.resultDescription),V(!1))})).catch((function(e){return T(e)})).finally((function(){return Z(!1)}))}),[]),F=[{field:"orderId",headerName:h("orderId"),sortable:!0,width:200,renderCell:function(e){return a.createElement(a.Fragment,null,g(fe)?a.createElement(r.Link,{to:"/home/voucher/bulk-voucher-order/view-orders/".concat(e.row.orderId),style:{color:"black"}},e.row.orderId):e.row.orderId)}},{field:"createdBy",headerName:h("orderedBy"),sortable:!0,width:200},{field:"createdOn",headerName:h("createdOn"),sortable:!0,width:200,valueFormatter:function(e){return(t=e.getValue("createdOn"))?(0,R.Z)(new Date(t),"yyyy/MM/dd"):"";var t}},{field:"status",headerName:h("status"),sortable:!0,width:200},{field:"actions",headerName:h("actions"),sortable:!1,width:200,renderCell:function(e){return a.createElement(a.Fragment,null,"CANCELLED"===e.row.status||"RETURN_REJECTED"===e.row.status||"RETURN_PENDING"===e.row.status?null:g("CANCEL_ORDER")&&a.createElement(G.ZP,{title:h("cancelOrder")},a.createElement(m.Z,{onClick:function(){V(!0),N(e.row.orderId)}},a.createElement(Ft.Z,{fontSize:"small"}))))}}];return a.createElement(a.Fragment,null,a.createElement(H.Z,{className:B.table},a.createElement(x(),{loading:t,columnBuffer:2,onPageSizeChange:function(e){f(e.pageSize),d(1)},onPageChange:function(e){d(e.page+1)},rows:c,pagination:!0,paginationMode:"server",page:s-1,pageSize:u,getRowId:function(e){return e.orderId},columns:F,rowCount:n,localeText:{toolbarColumns:h("columns"),toolbarFilters:h("filters"),toolbarDensity:h("density"),toolbarExport:h("export"),columnsPanelTextFieldLabel:h("findColumn"),columnsPanelTextFieldPlaceholder:h("columnTitle"),columnsPanelShowAllButton:h("showAll"),columnsPanelHideAllButton:h("hideAll"),filterPanelColumns:h("columns"),filterPanelInputPlaceholder:h("filterValues"),filterPanelInputLabel:h("value"),filterOperatorContains:h("contains"),filterOperatorEquals:h("equals"),filterOperatorStartsWith:h("startsWith"),filterOperatorEndsWith:h("endsWith"),toolbarExportCSV:h("downloadAsCSV")}})),a.createElement(l.SeamlessDialog,{open:k,className:B.dialogWrapper,maxWidth:"sm",fullWidth:!0},a.createElement(xe.Z,{onClick:function(){return V(!1)},className:B.closeButton},a.createElement(Mt.Z,null)),a.createElement(jt.Z,{className:B.icon}),a.createElement("div",{className:B.modalContentSpacing},a.createElement(p.Z,{gutterBottom:!0,id:"transition-modal-title",variant:"h6",className:B.fontHeavy},h("cancelOrderDialogTitle")),a.createElement(p.Z,{id:"transition-modal-description",variant:"body1"},h("cancelOrderDialogDescription")," ",y,"?")),a.createElement(l.SeamlessButton,{type:"button",variant:"outlined",color:"primary",className:B.button,onClick:function(){return V(!1)}},h("noConfirmationButton")),a.createElement(l.SeamlessButton,{type:"button",variant:"contained",color:"primary",className:B.button,onClick:function(){return A(y)}},h("yesConfirmationButton"))))};function Ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}const Wt=function(e){var t,n,r,l=e.children,c=e.orderId,s=a.useState(!1),u=(0,o.Z)(s,2),m=u[0],d=u[1],p=a.useState(0),f=(0,o.Z)(p,2),h=f[0],g=f[1],E=a.useState([]),v=(0,o.Z)(E,2),Z=v[0],b=v[1],S=w().showErrorMessage,y=(0,i.useTranslation)().t,C=(null===(t=window)||void 0===t||null===(n=t.config)||void 0===n||null===(r=n.voucher)||void 0===r?void 0:r.recordsPerPage)||10,x=(0,T.useServerTable)({page:1,perPage:C,order:"asc",orderBy:"",filter:{}});return a.useEffect((function(){var e={orderId:c||void 0,page:{number:x.page,size:x.perPage}};d(!0),function(e){return I("/vms/v2/order/filter",{method:"POST",body:e})}(e).then((function(e){var t;(null===(t=e.orders)||void 0===t?void 0:t.length)>0?(b(e.orders),g(e.pagingInfo.totalRecords)):(S(y("noOrdersFound")),b([]))})).catch((function(e){return S(e)})).finally((function(){return d(!1)}))}),[x.page,x.perPage,c]),a.createElement(a.Fragment,null,l(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(n),!0).forEach((function(t){(0,N.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({ordersData:Z,count:h,loading:m},x)))},zt=function(e){var t=e.orderId;return a.createElement(Wt,{orderId:t},(function(e){var t=e.ordersData,n=e.count,r=e.loading,l=(0,At.Z)(e,["ordersData","count","loading"]);return a.createElement(qt,(0,y.Z)({ordersData:t,count:n,loading:r},l))}))},Lt=function(e){var t=e.children,n=e.updateType,r=a.useState(!1),l=(0,o.Z)(r,2),i=l[0],c=l[1],s=a.useState([]),u=(0,o.Z)(s,2),m=u[0],d=u[1],p=w().showErrorMessage;return a.useEffect((function(){c(!0),function(e){return I("/vms/v2/vouchers/pending-update/search/".concat(e))}(n).then((function(e){0===e.resultCode&&e.updateResponses&&e.updateResponses.length>0?d(e.updateResponses):p(e.resultDescription)})).catch((function(e){p(e)})).finally((function(){return c(!1)}))}),[]),a.createElement(a.Fragment,null,t({requests:m,loading:i}))};var Ut=n(73507),Kt=n(99781),Yt=n(16879),Gt=(0,We.makeStyles)((function(e){return(0,We.createStyles)({dialogWrapper:{textAlign:"center","& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginBottom:e.spacing(3)},button:{width:80,marginRight:e.spacing(1)},icon:{color:Le.Z[400],width:"100%",textAlign:"center",fontSize:60},errorIcon:{color:et.Z[400],width:"100%",textAlign:"center",fontSize:50},table:{height:400,width:"100%"}})}));const Xt=function(e){var t,n,r,c=e.loading,s=e.requests,u=e.updateType,d=(0,i.useTranslation)().t,f=Gt(),h=w(),g=h.showErrorMessage,E=h.showSuccessMessage,v=a.useState(!1),Z=(0,o.Z)(v,2),b=Z[0],S=Z[1],y=a.useState(!1),N=(0,o.Z)(y,2),C=N[0],T=N[1],R=a.useState(""),P=(0,o.Z)(R,2),I=P[0],D=P[1],O=a.useState(0),k=(0,o.Z)(O,2),V=k[0],B=k[1],A=(null===(t=window)||void 0===t||null===(n=t.config)||void 0===n||null===(r=n.voucher)||void 0===r?void 0:r.recordsPerPage)||10,F=ne()().checkPermission,j=a.useCallback((function(e){_({approvalActionIds:[e],approvalActionStatus:"APPROVED"}).then((function(t){var n;0===t.resultCode?(E(t.resultDescription),null===(n=document.querySelector("[data-id='"+e+"']"))||void 0===n||n.remove(),S(!1)):g(t.resultDescription)})).catch((function(e){return g(e.resultDescription)}))}),[]),M=a.useCallback((function(e){_({approvalActionIds:[e],approvalActionStatus:"REJECTED"}).then((function(t){var n;0===t.resultCode?(E(t.resultDescription),null===(n=document.querySelector("[data-id='"+e+"']"))||void 0===n||n.remove(),T(!1)):g(t.resultDescription)})).catch((function(e){return g(e.resultDescription)}))}),[]),q=function(){S(!1)},z=function(){T(!1)},L=[{field:"orderId",headerName:d("orderId"),sortable:!0,width:150},{field:"batchNumber",headerName:d("batchId"),sortable:!0,width:150},{field:"createdOn",headerName:d("createdOn"),sortable:!0,width:150,valueFormatter:function(e){return e.value.slice(0,10)}},{field:"expiresOn",headerName:d("expiresOn"),sortable:!0,width:150,valueFormatter:function(e){return e.value.slice(0,10)}},{field:"requestedExpiryDays",headerName:d("requestedExpiry"),sortable:!0,width:190,hide:"EXTEND_EXPIRY"!==u},{field:"value",headerName:d("value"),sortable:!0,width:100},{field:"currency",headerName:d("currency"),sortable:!0,width:110},{field:"startVoucherSerial",headerName:d("startVoucherSerial"),sortable:!0,width:170},{field:"endVoucherSerial",headerName:d("endVoucherSerial"),sortable:!0,width:170},{field:"voucherStateCode",headerName:d("voucherState"),sortable:!0,width:140},{field:"requestedVoucherStateCode",headerName:d("requestedState"),sortable:!0,width:150,hide:"EXTEND_EXPIRY"===u},{field:"ownerId",headerName:d("ownerId"),sortable:!0,width:110},{field:"actions",headerName:d("actions"),sortable:!1,flex:1,width:150,renderCell:function(e){return a.createElement("div",null,a.createElement(W.Z,{size:"small",color:"primary"},F("APPROVE_EXPIRYDAYS_AND_STATECHANGE_REQUEST")&&a.createElement(G.ZP,{title:d("approve")},a.createElement(m.Z,{onClick:function(){S(!0),D(e.row.orderId),B(e.row.id)}},a.createElement(Ut.Z,{fontSize:"small",style:{color:Le.Z[400]}}))),F("REJECT_EXPIRYDAYS_AND_STATECHANGE_REQUEST")&&a.createElement(G.ZP,{title:d("reject")},a.createElement(m.Z,{onClick:function(){T(!0),D(e.row.orderId),B(e.row.id)}},a.createElement(Kt.Z,{fontSize:"small",style:{color:et.Z[400]}})))),a.createElement(l.SeamlessDialog,{open:b,className:f.dialogWrapper,maxWidth:"sm",fullWidth:!0},a.createElement(ze.Z,{className:f.icon}),a.createElement("div",{className:f.modalContentSpacing},a.createElement(p.Z,{gutterBottom:!0,id:"transition-modal-title",variant:"h6",className:f.fontHeavy},d("EXTEND_EXPIRY"===u?"approveExpiryDaysExtensionDialogTitle":"approveStateChangeDialogTitle")),a.createElement(p.Z,{id:"transition-modal-description",variant:"body1"},d("EXTEND_EXPIRY"===u?"approveExpiryDaysExtensionDialogDescription":"approveStateChangeDialogDescription")," ",I)),a.createElement(l.SeamlessButton,{type:"button",variant:"outlined",color:"primary",className:f.button,onClick:q},d("noConfirmationButton")),a.createElement(l.SeamlessButton,{type:"button",variant:"outlined",color:"primary",className:f.button,onClick:function(){return j(V)}},d("yesConfirmationButton"))),a.createElement(l.SeamlessDialog,{open:C,className:f.dialogWrapper,maxWidth:"sm",fullWidth:!0},a.createElement(Yt.Z,{className:f.errorIcon}),a.createElement("div",{className:f.modalContentSpacing},a.createElement(p.Z,{gutterBottom:!0,id:"transition-modal-title",variant:"h6",className:f.fontHeavy},d("EXTEND_EXPIRY"===u?"rejectExpiryDaysExtensionDialogTitle":"rejectStateChangeDialogTitle")),a.createElement(p.Z,{id:"transition-modal-description",variant:"body1"},d("EXTEND_EXPIRY"===u?"rejectExpiryDaysExtensionDialogDescription":"rejectStateChangeDialogDescription")," ",I)),a.createElement(l.SeamlessButton,{type:"button",variant:"outlined",color:"primary",className:f.button,onClick:z},d("noConfirmationButton")),a.createElement(l.SeamlessButton,{type:"button",variant:"outlined",color:"primary",className:f.button,onClick:function(){return M(V)}},d("yesConfirmationButton"))))}}];return a.createElement(a.Fragment,null,a.createElement(H.Z,{className:f.table},a.createElement(x(),{loading:c,columnBuffer:2,checkboxSelection:!0,disableColumnFilter:!0,pagination:!0,paginationMode:"server",rows:s,getRowId:function(e){return e.approvalActionId},columns:L,pageSize:A,localeText:{toolbarColumns:d("columns"),toolbarFilters:d("filters"),toolbarDensity:d("density"),toolbarExport:d("export"),columnsPanelTextFieldLabel:d("findColumn"),columnsPanelTextFieldPlaceholder:d("columnTitle"),columnsPanelShowAllButton:d("showAll"),columnsPanelHideAllButton:d("hideAll"),filterPanelColumns:d("columns"),filterPanelInputPlaceholder:d("filterValues"),filterPanelInputLabel:d("value"),filterOperatorContains:d("contains"),filterOperatorEquals:d("equals"),filterOperatorStartsWith:d("startsWith"),filterOperatorEndsWith:d("endsWith"),toolbarExportCSV:d("downloadAsCSV")}})))},$t=function(e){var t=e.updateType;return a.createElement(Lt,{updateType:t},(function(e){var n=e.loading,r=e.requests;return a.createElement(Xt,{loading:n,requests:r,updateType:t})}))},Jt=function(e){var t=e.disable,n=void 0!==t&&t,o=(0,i.useTranslation)().t;return a.createElement(l.SeamlessButton,{component:r.Link,to:"/home/voucher/voucher-type/create",variant:"contained",color:"primary",disabled:n,endIcon:a.createElement(vt.Z,null)},o("createVoucherType"))};var Qt=[{key:" ",value:" "},{key:"Single_Redeemable",value:"Single_Redeemable"},{key:"Partially_Redeemable",value:"Partially_Redeemable"},{key:"Multi_Redeemable",value:"Multi_Redeemable"}],en=(0,We.makeStyles)((function(e){return(0,We.createStyles)({button:{margin:e.spacing(1)},element:{margin:e.spacing(1)},dateField:{margin:e.spacing(1),width:"100%",marginTop:e.spacing(1)},dividerSpacing:{marginBottom:e.spacing(3)},btnSpacing:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},spacingTop:{marginTop:e.spacing(3)}})}));const tn=function(e){var t=e.data,n=e.edit,r=e.onFormSubmit,o=en(),s=(0,i.useTranslation)().t,u=h.Ry().shape({voucherType:h.Z_().required(s("valueIsRequired")).max(50),description:h.Z_().required(s("valueIsRequired")).max(200),hrnPrefix:h.Rx().typeError(s("mustBeNumber")).required(s("valueIsRequired")),redemptionNature:h.Z_().required(s("valueIsRequired")).test("len",s("valueIsRequired"),(function(e){return" "!==e})),noOfHrn:"Multi_Redeemable"===t.redemptionNature?h.Rx().required(s("valueIsRequired")):h.Rx()}),m=(0,f.TA)({initialValues:t,onSubmit:function(e){return r&&r(e)},validationSchema:u,enableReinitialize:!0,validateOnChange:!1}),p=m.values,g=m.errors,E=m.handleChange,v=m.setFieldValue,Z=m.handleSubmit,b=m.handleReset;return a.createElement(a.Fragment,null,a.createElement(d.Z,{container:!0,spacing:3},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessDropDown,{className:(0,c.default)(o.element),fullWidth:!0,required:!0,label:s("redemptionType")||"Redemption Nature",error:!!g.redemptionNature,helperText:g.redemptionNature,options:Qt,name:"redemptionNature",value:p.redemptionNature,onChange:function(e){E(e),v("noOfHrn",1)}})),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{fullWidth:!0,error:!!g.voucherType,helperText:g.voucherType,className:(0,c.default)(o.element),name:"voucherType",value:p.voucherType,onChange:E,label:s("voucherType"),required:!0}))),a.createElement(d.Z,{container:!0,spacing:3},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{fullWidth:!0,error:!!g.description,helperText:g.description,className:(0,c.default)(o.element),name:"description",value:p.description,onChange:E,label:s("description"),required:!0})),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{fullWidth:!0,error:!!g.hrnPrefix,helperText:g.hrnPrefix,className:(0,c.default)(o.element),name:"hrnPrefix",value:p.hrnPrefix,onChange:E,label:s("hrnPrefix"),required:!0}))),a.createElement(d.Z,{container:!0,spacing:3},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{fullWidth:!0,error:!!g.noOfHrn,helperText:g.noOfHrn,className:(0,c.default)(o.element),name:"noOfHrn",value:"Multi_Redeemable"===p.redemptionNature?p.noOfHrn:1,onChange:"Multi_Redeemable"===p.redemptionNature?E:b,label:s("noOfHrn"),disabled:"Multi_Redeemable"!==p.redemptionNature,required:"Multi_Redeemable"===p.redemptionNature}))),a.createElement(d.Z,{item:!0,xs:12},a.createElement(l.SeamlessButton,{onClick:function(e){Z()},className:(0,c.default)(o.element,o.button),color:"primary",variant:"contained"},s(n?"updateButton":"submitButton")),a.createElement(l.SeamlessButton,{onClick:b,className:(0,c.default)(o.element,o.button),color:"primary",variant:"outlined"},s("resetButton"))))},nn=function(e){var t=e.children,n=a.useState(!1),r=(0,o.Z)(n,2),l=r[0],i=r[1],c=a.useState([]),s=(0,o.Z)(c,2),u=s[0],m=s[1],d=a.useState(0),p=(0,o.Z)(d,2),f=p[0],h=p[1],g=w().showErrorMessage;return a.useEffect((function(){i(!0),I("/vms/v1/order/pending-order").then((function(e){0===e.resultCode?(e.voucherOrderData.length>0?m(e.voucherOrderData):m([]),h(e.totalCount)):g(e.resultDescription)})).catch((function(e){g(e)})).finally((function(){return i(!1)}))}),[]),a.createElement(a.Fragment,null,t({pendingOrdersList:u,loading:l,count:f}))};var an=(0,We.makeStyles)((function(e){return(0,We.createStyles)({table:{height:400,width:"100%"}})}));const rn=function(e){var t,n,r,l=e.loading,o=(e.count,e.pendingOrdersList),c=(0,i.useTranslation)().t,s=an(),u=w(),d=u.showErrorMessage,p=u.showSuccessMessage,f=ne()().checkPermission,h=(null===(t=window)||void 0===t||null===(n=t.config)||void 0===n||null===(r=n.voucher)||void 0===r?void 0:r.recordsPerPage)||10,g=a.useCallback((function(e){M({orderIds:[e],orderStatus:"APPROVED"}).then((function(t){var n;0===t.resultCode?(p(t.resultDescription),null===(n=document.querySelector("[data-id='"+e+"']"))||void 0===n||n.remove()):d(t.resultDescription)})).catch((function(e){return d(e.resultDescription)}))}),[]),E=a.useCallback((function(e){M({orderIds:[e],orderStatus:"REJECTED"}).then((function(t){var n;0===t.resultCode?(p(t.resultDescription),null===(n=document.querySelector("[data-id='"+e+"']"))||void 0===n||n.remove()):d(t.resultDescription)})).catch((function(e){return d(e.resultDescription)}))}),[]),v=[{field:"orderId",headerName:c("orderId"),sortable:!0,width:200},{field:"ownerId",headerName:c("orderedBy"),sortable:!0,width:200},{field:"orderStatus",headerName:c("status"),sortable:!0,width:200},{field:"createdDate",headerName:c("createdDate"),sortable:!0,width:200,valueFormatter:function(e){return e.value.slice(0,10)}},{field:"actions",headerName:c("actions"),sortable:!1,flex:1,renderCell:function(e){return a.createElement("div",null,a.createElement(W.Z,{size:"small",color:"primary"},f("APPROVE_PENDINGORDER")&&a.createElement(G.ZP,{title:c("approve")},a.createElement(m.Z,{onClick:function(){return g(e.row.id)}},a.createElement(Ut.Z,{fontSize:"small",style:{color:Le.Z[400]}}))),f("REJECT_PENDINGORDER")&&a.createElement(G.ZP,{title:c("reject")},a.createElement(m.Z,{onClick:function(){return E(e.row.id)}},a.createElement(Kt.Z,{fontSize:"small",style:{color:et.Z[400]}})))))}}];return a.createElement(a.Fragment,null,a.createElement(H.Z,{className:s.table},a.createElement(x(),{loading:l,columnBuffer:2,checkboxSelection:!0,pagination:!0,paginationMode:"server",rows:o,getRowId:function(e){return e.orderId},columns:v,pageSize:h,localeText:{toolbarColumns:c("columns"),toolbarFilters:c("filters"),toolbarDensity:c("density"),toolbarExport:c("export"),columnsPanelTextFieldLabel:c("findColumn"),columnsPanelTextFieldPlaceholder:c("columnTitle"),columnsPanelShowAllButton:c("showAll"),columnsPanelHideAllButton:c("hideAll"),filterPanelColumns:c("columns"),filterPanelInputPlaceholder:c("filterValues"),filterPanelInputLabel:c("value"),filterOperatorContains:c("contains"),filterOperatorEquals:c("equals"),filterOperatorStartsWith:c("startsWith"),filterOperatorEndsWith:c("endsWith"),toolbarExportCSV:c("downloadAsCSV")}})))},ln=function(){return a.createElement(nn,null,(function(e){var t=e.loading,n=e.count,r=e.pendingOrdersList;return a.createElement(rn,{loading:t,count:n,pendingOrdersList:r})}))};var on=(0,We.makeStyles)((function(e){return(0,We.createStyles)({dialogWrapper:{textAlign:"center","& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginBottom:e.spacing(3)},btnSpace:{marginRight:e.spacing(2)},element:{width:300},button:{width:80,marginRight:e.spacing(1)},table:{height:400,width:"100%"}})}));const cn=function(e){var t,n,c,s=e.loading,u=e.productVoucherTypeMappings,d=void 0===u?[]:u,f=(0,i.useTranslation)().t,h=on(),g=a.useState(!1),E=(0,o.Z)(g,2),v=E[0],Z=E[1],b=a.useState(0),S=(0,o.Z)(b,2),y=S[0],N=S[1],C=a.useState(),T=(0,o.Z)(C,2),R=T[0],P=T[1],D=a.useState(),O=(0,o.Z)(D,2),k=O[0],V=O[1],B=w(),A=B.showErrorMessage,F=B.showSuccessMessage,j=ne()().checkPermission,M=(null===(t=window)||void 0===t||null===(n=t.config)||void 0===n||null===(c=n.voucher)||void 0===c?void 0:c.recordsPerPage)||10,_=function(){var e;(e=y,I("/vms/v1/productVoucherTypeMapping/".concat(e),{method:"DELETE"})).then((function(e){var t;Z(!1),0===e.resultCode?(F(e.resultDescription),null===(t=document.querySelector("[data-id='"+y+"']"))||void 0===t||t.remove()):A(e.resultDescription)})).catch((function(e){return A(e.resultDescription)}))},q=function(){Z(!1)},z=[{field:"voucherType",headerName:f("voucherType"),sortable:!0,width:150},{field:"voucherSubtypeName",headerName:f("voucherSubType"),sortable:!0,width:155},{field:"productSku",headerName:f("productSku"),sortable:!0,width:135},{field:"denominationFrom",headerName:f("denominationFrom"),sortable:!0,width:165},{field:"denominationTo",headerName:f("denominationTo"),sortable:!0,width:155},{field:"expiryDays",headerName:f("expiryDays"),sortable:!0,width:120},{field:"subscriberServiceTariffPlan",headerName:f("subscriberServiceTariffPlan"),sortable:!0,width:150,renderCell:function(e){var t,n;if(null!=e&&null!==(t=e.row)&&void 0!==t&&t.subscriberServiceTariffPlan){var r=Object.entries(e.row.subscriberServiceTariffPlan).map((function(e){return e[1]?"".concat(e[0],": ").concat(e[1]):"".concat(e[0])})).join(", ");return a.createElement(G.ZP,{title:r},a.createElement("div",null,((n=r)&&n.length>20&&(n=n.slice(0,20)+" ..."),n)))}return a.createElement("span",null)}},{field:"redeemTransferFlag",headerName:f("redeemTransferFlag"),sortable:!0,width:170,renderCell:function(e){var t;return a.createElement(a.Fragment,null,a.createElement(H.Z,{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},0===(null==e||null===(t=e.row)||void 0===t?void 0:t.redeemTransferFlag)?a.createElement(a.Fragment,null,a.createElement(Rt.Z,{color:"primary"}),"OFF"):a.createElement(a.Fragment,null,a.createElement(xt.Z,{color:"primary"}),"ON")))}},{field:"actions",headerName:f("actions"),sortable:!1,width:160,renderCell:function(e){return a.createElement("div",null,a.createElement(W.Z,{size:"small",color:"primary","aria-label":"product association buttons"},j(ie)&&a.createElement(G.ZP,{title:f("view")},a.createElement(m.Z,{component:r.Link,to:"/home/voucher/product-association/view/"+e.getValue("productSku")+"/"+e.getValue("voucherSubtypeName")+"/"+e.getValue("id")},a.createElement(J.Z,{fontSize:"small"}))),j(oe)&&a.createElement(G.ZP,{title:f("edit")},a.createElement(m.Z,{component:r.Link,to:"/home/voucher/product-association/edit/"+e.getValue("productSku")+"/"+e.getValue("voucherSubtypeName")+"/"+e.getValue("id")},a.createElement(Re.Z,{fontSize:"small"}))),j("DELETE_PRODUCT_ASSOCIATION")&&a.createElement(G.ZP,{title:f("delete")},a.createElement(m.Z,{onClick:function(){Z(!0),N(e.getValue("id")),P(e.getValue("productSku")),V(e.getValue("voucherType"))}},a.createElement(Qe.Z,{fontSize:"small",style:{color:et.Z[400]}})))),a.createElement(l.SeamlessDialog,{open:v,onClose:q,className:h.dialogWrapper,maxWidth:"md",fullWidth:!0},a.createElement(a.Fragment,null,a.createElement("div",{className:h.modalContentSpacing},a.createElement(p.Z,{gutterBottom:!0,id:"transition-modal-title",variant:"h6",className:h.fontHeavy},f("deleteProductVoucherMappingConfirmationTitle")),a.createElement(p.Z,{id:"transition-modal-description",variant:"body1"},R," is mapped with"," ",k,": ",f("deleteProductVoucherMappingConfirmationText"))),a.createElement("div",{className:h.modalContentSpacing},a.createElement(l.SeamlessButton,{type:"button",variant:"outlined",color:"primary",className:h.btnSpace,onClick:q},f("noConfirmationButton")),a.createElement(l.SeamlessButton,{type:"button",variant:"contained",color:"primary",onClick:_},f("yesConfirmationButton"))))))}}];return a.createElement(a.Fragment,null,a.createElement(H.Z,{className:h.table},a.createElement(x(),{loading:s,columnBuffer:3,rows:d,getRowId:function(e){return e.id},columns:z,pageSize:M,localeText:{toolbarColumns:f("columns"),toolbarFilters:f("filters"),toolbarDensity:f("density"),toolbarExport:f("export"),columnsPanelTextFieldLabel:f("findColumn"),columnsPanelTextFieldPlaceholder:f("columnTitle"),columnsPanelShowAllButton:f("showAll"),columnsPanelHideAllButton:f("hideAll"),filterPanelColumns:f("columns"),filterPanelInputPlaceholder:f("filterValues"),filterPanelInputLabel:f("value"),filterOperatorContains:f("contains"),filterOperatorEquals:f("equals"),filterOperatorStartsWith:f("startsWith"),filterOperatorEndsWith:f("endsWith"),toolbarExportCSV:f("downloadAsCSV")}})))},sn=function(e){var t=e.children,n=a.useState([]),r=(0,o.Z)(n,2),l=r[0],i=r[1],c=a.useState(!1),s=(0,o.Z)(c,2),u=s[0],m=s[1],d=w(),p=d.showErrorMessage;return d.showSuccessMessage,a.useEffect((function(){m(!0),I("/vms/v1/productVoucherTypeMapping/fetchAll").then((function(e){i(e.productVoucherTypeMappings)})).catch((function(e){p("There was an error")})).finally((function(){return m(!1)}))}),[]),a.createElement(a.Fragment,null,t({productVoucherTypeMappings:l,loading:u}))},un=function(){return a.createElement(sn,null,(function(e){var t=e.productVoucherTypeMappings,n=e.loading;return a.createElement(cn,{productVoucherTypeMappings:t,loading:n})}))};var mn=n(94339),dn=n(69142),pn=n(72753),fn=(0,We.makeStyles)((function(e){return(0,We.createStyles)({button:{margin:e.spacing(1)},element:{margin:e.spacing(1)},dateField:{margin:e.spacing(1),width:"100%",marginTop:e.spacing(1)},dividerSpacing:{marginBottom:e.spacing(3)},btnSpacing:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},spacingTop:{marginTop:e.spacing(3)},element1:{margin:e.spacing(3)}})}));const hn=function(e){var t=e.data,n=(e.edit,e.onFormSubmit),r=fn(),s=(0,i.useTranslation)().t,u=a.useState(!1),m=(0,o.Z)(u,2),p=m[0],g=m[1],E=h.Ry().shape({reselerId:h.Z_(),vms_emailIds:h.Z_().matches(/^([\w+-.%]+@[\w-.]+\.[A-Za-z]{2,4};?)+$/,s("enterValidEmailId")),vms_password:h.Z_(),fileContent:h.Z_()}),v=(0,f.TA)({initialValues:t,onSubmit:function(e){return n&&n(e)},validationSchema:E,enableReinitialize:!0}),Z=v.values,b=v.errors,S=v.handleChange,y=v.handleSubmit,N=v.handleReset;return a.createElement(a.Fragment,null,a.createElement(d.Z,{container:!0,spacing:3},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{fullWidth:!0,error:!!b.reselerId,helperText:b.reselerId,className:(0,c.default)(r.element),name:"reselerId",value:Z.reselerId,onChange:S,label:s("resellerId"),disabled:!0})),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{fullWidth:!0,error:!!b.vms_emailIds,helperText:b.vms_emailIds,className:(0,c.default)(r.element),name:"vms_emailIds",value:Z.vms_emailIds,onChange:S,label:s("emailId")}))),a.createElement(d.Z,{container:!0,spacing:3},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{fullWidth:!0,type:p?"text":"password",error:!!b.vms_password,helperText:b.vms_password,className:(0,c.default)(r.element),name:"vms_password",value:Z.vms_password,onChange:S,label:s("vms_password"),endAdornment:a.createElement(xe.Z,{onClick:function(){return g(!0)},onMouseLeave:function(){return g(!1)},style:{width:5,height:5,color:"#000000"}},p?a.createElement(pn.Z,{fontSize:"small"}):a.createElement(dn.Z,{fontSize:"small"}))}))),a.createElement(d.Z,{container:!0,spacing:3},a.createElement(d.Z,{item:!0,xs:12,sm:8},a.createElement(l.SeamlessInput,{fullWidth:!0,multiline:!0,rows:10,rowsMax:10,error:!!b.fileContent,helperText:b.fileContent,className:(0,c.default)(r.element),name:"fileContent",value:Z.fileContent,onChange:S,label:s("fileContent")}))),a.createElement(d.Z,{item:!0,xs:12},a.createElement(l.SeamlessButton,{onClick:function(e){y()},className:(0,c.default)(r.element,r.button),color:"primary",variant:"contained"},s("submitButton")),a.createElement(l.SeamlessButton,{onClick:N,className:(0,c.default)(r.element,r.button),color:"primary",variant:"outlined"},s("resetButton"))))};var gn=(0,s.Z)((function(e){return(0,u.Z)({fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{fontSize:14},rowSpacing:{marginBottom:e.spacing(1)},divSpacing:{marginLeft:e.spacing(1)},passwordIcon:{color:"#000000",width:20,height:20,marginTop:e.spacing(-.5),marginLeft:e.spacing(2)}})}));const En=function(e){var t,n=e.resellerData,r=gn(),l=(0,i.useTranslation)().t,c=a.useState(!1),s=(0,o.Z)(c,2),u=s[0],m=(s[1],a.useState(!1)),f=(0,o.Z)(m,2),h=f[0],g=f[1];return a.createElement("div",{className:r.divSpacing},a.createElement(d.Z,{container:!0},a.createElement(d.Z,{container:!0,spacing:3,className:r.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:r.fieldHeading},l("resellerId"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:r.fieldValue},null==n?void 0:n.resellerId)),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:r.fieldHeading},l("vms_password"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement("div",{style:{display:"flex",flexDirection:"row"}},a.createElement(p.Z,{className:r.fieldValue},h?null==n?void 0:n.vms_password:(null==n?void 0:n.vms_password)&&(null==n?void 0:n.vms_password.length)>0&&"*".repeat(null==n?void 0:n.vms_password.length)),a.createElement(xe.Z,{className:r.passwordIcon,onClick:function(){return g(!h)},onMouseLeave:function(){return g(!1)}},h?a.createElement(pn.Z,{fontSize:"small"}):a.createElement(dn.Z,{fontSize:"small"}))))),a.createElement(d.Z,{container:!0,spacing:3,className:r.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:r.fieldHeading},l("emailId"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:r.fieldValue},null==n?void 0:n.vms_emailIds))),a.createElement(d.Z,{container:!0,spacing:3,className:r.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:r.fieldHeading},l("fileContent"))),a.createElement(d.Z,{item:!0,xs:12,sm:9},a.createElement(p.Z,{className:r.fieldValue},(t=null==n?void 0:n.fileContent)&&t.length>20?a.createElement("div",{style:{maxHeight:200,maxWidth:800,overflow:"auto",width:800}},t):t)))),u&&a.createElement(qe.Z,null))};var vn=(0,s.Z)((function(e){return(0,u.Z)({button:{margin:e.spacing(1),marginTop:e.spacing(3.5)},element:{marginTop:e.spacing(1),marginBottom:e.spacing(1),marginRight:e.spacing(1)},editbutton:{marginTop:e.spacing(-1)}})}));const Zn=function(){var e=vn(),t=(0,i.useTranslation)().t,n=h.Ry().shape({resellerId:h.Z_().required(t("valueIsRequired"))}),r=a.useState(!1),s=(0,o.Z)(r,2),u=(s[0],s[1]),g=a.useState(),E=(0,o.Z)(g,2),v=E[0],Z=E[1],b=w(),S=b.showErrorMessage,y=b.showSuccessMessage,N=a.useState(!1),C=(0,o.Z)(N,2),T=C[0],x=C[1],R=ne()().checkPermission,P=(0,f.TA)({initialValues:{resellerId:""},onSubmit:function(e){return q(e.resellerId)},validationSchema:n,enableReinitialize:!0}),I=P.values,D=P.errors,O=P.handleChange,B=(P.handleBlur,P.handleSubmit),A={vms_emailIds:"",vms_password:"",fileContent:"",reselerId:""},F=a.useState(A),j=(0,o.Z)(F,2),M=j[0],_=j[1],q=a.useCallback((function(e){u(!0),k(e).then((function(e){0===e.resultCode?(_({vms_emailIds:e.vms_emailIds,vms_password:e.vms_password,fileContent:e.fileContent,reselerId:e.resellerId}),Z(e)):(S(e.resultDescription),_(A),Z({vms_emailIds:"",vms_password:"",vms_pgp_key_path:"",resellerId:"",fileContent:""}))})).catch((function(e){return S(e)})).finally((function(){return u(!1)}))}),[]),H=a.useCallback((function(e){var t={vms_emailIds:e.vms_emailIds,vms_password:e.vms_password,fileContent:e.fileContent,reselerId:e.reselerId};u(!0),Z({vms_emailIds:t.vms_emailIds,vms_password:t.vms_password,fileContent:t.fileContent,resellerId:t.reselerId}),V(t).then((function(e){0===e.resultCode?y(e.resultDescription||"Reseller Info updated successfully"):S(e.resultDescription||"no Reseller found"),_(t)})).catch((function(e){return S(e)})).finally((function(){return u(!1)}))}),[]);return a.createElement(a.Fragment,null,a.createElement(d.Z,{container:!0,spacing:2},a.createElement(d.Z,{item:!0,xs:2},a.createElement(l.SeamlessInput,{className:(0,c.default)(e.element),fullWidth:!0,required:!0,name:"resellerId",error:!!D.resellerId,value:I.resellerId,onChange:O,label:t("resellerId"),onKeyPress:function(e){return"Enter"===e.key&&B()},helperText:D.resellerId})),a.createElement(d.Z,{item:!0,xs:4},a.createElement(m.Z,{onClick:function(e){_(A),B(),x(!1)},className:(0,c.default)(e.button),color:"primary",variant:"contained"},t("search")))),a.createElement(d.Z,null,M.reselerId&&a.createElement(mn.Z,{variant:"outlined",style:{marginTop:20}},a.createElement(d.Z,{container:!0},a.createElement(p.Z,{variant:"subtitle1",color:"primary",style:{marginBottom:10,marginLeft:5,marginRight:10}},t("resellerInfo")),R("EDIT_RESELLERINFO")&&a.createElement(xe.Z,{color:"primary",className:e.editbutton},a.createElement(Re.Z,{onClick:function(){return x(!T)},fontSize:"small"}))),T?a.createElement(hn,{data:M,onFormSubmit:function(e){H(e),x(!1)},edit:!(null==M||!M.vms_emailIds)}):a.createElement(En,{resellerData:v}))))};var bn=(0,s.Z)((function(e){return(0,u.Z)({button:{margin:e.spacing(1),marginTop:e.spacing(3)},element:{marginTop:e.spacing(1),marginBottom:e.spacing(1),marginRight:e.spacing(1)},fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{fontSize:14},rowSpacing:{marginRight:e.spacing(1)},editbutton:{marginTop:e.spacing(-1)}})}));const Sn=function(){var e=bn(),t=(0,i.useTranslation)().t,n=a.useState(!1),r=(0,o.Z)(n,2),l=(r[0],r[1]),c=a.useState(),s=(0,o.Z)(c,2),u=s[0],m=s[1],f=w(),h=f.showErrorMessage,g=f.showSuccessMessage,E=a.useState(!1),v=(0,o.Z)(E,2),Z=v[0],b=v[1],S=(0,ve.useSelector)((function(e){return e.auth.user})).userId,y=ne()().checkPermission,N=a.useState({vms_emailIds:"",vms_password:"",fileContent:"",reselerId:""}),C=(0,o.Z)(N,2),T=C[0],x=C[1];a.useEffect((function(){l(!0),k(S).then((function(e){x({vms_emailIds:e.vms_emailIds,vms_password:e.vms_password,fileContent:e.fileContent,reselerId:e.resellerId}),m(e),e.vms_emailIds&&0===e.resultCode||h(e.resultDescription)})).catch((function(e){return h(e)})).finally((function(){return l(!1)}))}),[]);var R=a.useCallback((function(e){var t={vms_emailIds:e.vms_emailIds,vms_password:e.vms_password,fileContent:e.fileContent,reselerId:e.reselerId};l(!0),m({vms_emailIds:t.vms_emailIds,vms_password:t.vms_password,fileContent:t.fileContent,resellerId:t.reselerId}),V(t).then((function(e){0===e.resultCode?g(e.resultDescription||"Reseller Info updated successfully"):h(e.resultDescription||"no Reseller found"),x(t)})).catch((function(e){return h(e.resultDescription)})).finally((function(){return l(!1)}))}),[]);return a.createElement(a.Fragment,null,a.createElement(d.Z,{container:!0,spacing:2}),a.createElement(d.Z,null,T.vms_emailIds&&a.createElement(mn.Z,{variant:"outlined",style:{marginTop:20}},a.createElement(d.Z,{container:!0},a.createElement(p.Z,{variant:"subtitle1",color:"primary",style:{marginBottom:10,marginLeft:5,marginRight:10}},t("accountInfo")),y("EDIT_RESELLER_ACCOUNT")&&a.createElement(G.ZP,{title:t("edit")},a.createElement(xe.Z,{color:"primary",className:e.editbutton},a.createElement(Re.Z,{onClick:function(){return b(!Z)},fontSize:"small"})))),Z?a.createElement(hn,{data:T,onFormSubmit:function(e){R(e),b(!1)},edit:!(null==T||!T.reselerId)}):a.createElement(En,{resellerData:u}))))};var yn=n(24276),Nn=n(86689),Cn=n(27685);const wn=function(e){var t=e.children,n=e.serialNumber,r=a.useState(!1),l=(0,o.Z)(r,2),c=l[0],s=l[1],u=a.useState(0),m=(0,o.Z)(u,2),d=(m[0],m[1],a.useState({})),p=(0,o.Z)(d,2),f=p[0],h=p[1],g=w().showErrorMessage;return(0,i.useTranslation)().t,a.useEffect((function(){var e={identifier:{type:"SERIAL",value:n},showhrn:!1};s(!0),O(e).then((function(e){return h(e)})).catch((function(e){return g(e)})).finally((function(){s(!1)}))}),[n]),a.createElement(a.Fragment,null,t({voucherDetails:f,loading:c}))};var Tn=(0,s.Z)((function(e){var t,n;return(0,u.Z)({fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14,marginBottom:e.spacing(1)},fieldValue:{fontSize:14,width:300},rowSpacing:{marginBottom:e.spacing(1)},divSpacing:{marginLeft:e.spacing(1)},closeIcon:{float:"right",justifyContent:"flex-end",marginTop:e.spacing(-2)},button:{width:80,marginRight:e.spacing(1)},dialogHeader:{fontSize:18,fontWeight:"bold",align:"left",height:45,backgroundColor:e.palette.primary.main,color:null==e||null===(t=e.palette)||void 0===t||null===(n=t.common)||void 0===n?void 0:n.white}})}));const xn=function(e){var t,n,r,l,c,s,u,f,h,g,E,v,Z,b,S,y,N,C,w,T=e.subscriberData,x=Tn(),R=(0,i.useTranslation)().t,P=a.useState(!1),I=(0,o.Z)(P,2),D=(I[0],I[1],a.useState("")),O=(0,o.Z)(D,2),k=O[0],V=O[1],B=a.useState(!1),A=(0,o.Z)(B,2),F=A[0],j=A[1],M=function(){j(!1)};return a.createElement("div",{className:x.divSpacing},a.createElement(a.Fragment,null,a.createElement(d.Z,{container:!0,spacing:10,className:x.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldHeading},R("subscriberMsisdn")),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldValue},null!==(t=null==T?void 0:T.msisdn)&&void 0!==t?t:"-")),a.createElement(K.Z,null)),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement("div",{style:{display:"flex",flexDirection:"row"}},a.createElement(p.Z,{className:x.fieldHeading},R("subscriberStatus")),a.createElement(G.ZP,{title:R("subscriberStatusHelpIcon").split("\n").map((function(e){return a.createElement("p",null," ",e," ")}))},a.createElement(Cn.Z,{style:{width:18,height:18}}))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldValue},null!==(n=null==T?void 0:T.subscriberStatus)&&void 0!==n?n:"-")),a.createElement(K.Z,null)),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldHeading},R("subscriberServiceClass")),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldValue},null!==(r=null==T?void 0:T.subscriberServiceClass)&&void 0!==r?r:"-")),a.createElement(K.Z,null))),a.createElement(d.Z,{container:!0,spacing:10,className:x.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldHeading},R("fraudDailyCounter")),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldValue},null!==(l=null==T?void 0:T.fraudDailyCounter)&&void 0!==l?l:"-")),a.createElement(K.Z,null)),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldHeading},R("fraudWeeklyCounter")),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldValue},null!==(c=null==T?void 0:T.fraudWeeklyCounter)&&void 0!==c?c:"-")),a.createElement(K.Z,null)),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldHeading},R("fraudMonthlyCounter")),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldValue},null!==(s=null==T?void 0:T.fraudMonthlyCounter)&&void 0!==s?s:"-")),a.createElement(K.Z,null))),a.createElement(d.Z,{container:!0,spacing:10,className:x.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldHeading},R("fraudSuccessiveCounter")),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldValue},null!==(u=null==T?void 0:T.fraudSuccessiveCounter)&&void 0!==u?u:"-")),a.createElement(K.Z,null)),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldHeading},R("totalSuspensionCount")),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldValue},null!==(f=null==T?void 0:T.totalSuspensionCount)&&void 0!==f?f:"-")),a.createElement(K.Z,null)),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldHeading},R("createdDate")),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldValue},null!==(h=null==T?void 0:T.createdDate)&&void 0!==h?h:"-")),a.createElement(K.Z,null))),a.createElement(d.Z,{container:!0,spacing:10,className:x.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldHeading},R("lastRedeemStatus")),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldValue},null!==(g=null==T?void 0:T.lastRedeemStatus)&&void 0!==g?g:"-")),a.createElement(K.Z,null)),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldHeading},R("lastModifiedDate")),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldValue},null!==(E=null==T?void 0:T.lastModified)&&void 0!==E?E:"-")),a.createElement(K.Z,null))),a.createElement(d.Z,{container:!0,spacing:10,className:x.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldHeading},R("lastSuccessfulRechargeDate")),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldValue},null!==(v=null==T?void 0:T.lastSuccessfulRechargeDate)&&void 0!==v?v:"-")),a.createElement(K.Z,null)),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldHeading},R("lastSuccessfulRechargeSerial")),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldValue},null!==(Z=null==T?void 0:T.lastSuccessfulRechargeSerial)&&void 0!==Z?Z:"-")),a.createElement(K.Z,null)),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldHeading},R("lastSuccessfulRechargePin")),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldValue},null!==(b=null==T?void 0:T.lastSuccessfulRechargePin)&&void 0!==b?b:"-")),a.createElement(K.Z,null))),a.createElement(d.Z,{container:!0,spacing:10,className:x.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldHeading},R("lastUnsuccessfulRechargeDate")),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldValue},null!==(S=null==T?void 0:T.lastUnsuccessfulRechargeDate)&&void 0!==S?S:"-")),a.createElement(K.Z,null)),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldHeading},R("lastUnsuccessfulRechargeSerial")),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldValue},null!==(y=null==T?void 0:T.lastUnsuccessfulRechargeSerial)&&void 0!==y?y:"-")),a.createElement(K.Z,null)),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldHeading},R("lastUnsuccessfulRechargePin")),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldValue},null!==(N=null==T?void 0:T.lastUnsuccessfulRechargePin)&&void 0!==N?N:"-")),a.createElement(K.Z,null))),a.createElement(d.Z,{container:!0,spacing:10,className:x.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldHeading},R("lastUnsuccessfulRechargeErrorCode")),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldValue},null!==(C=null==T?void 0:T.lastUnsuccessfulRechargeErrorCode)&&void 0!==C?C:"-")),a.createElement(K.Z,null)),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldHeading},R("lastUnsuccessfulRechargeErrorDescription")),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:x.fieldValue},null!==(w=null==T?void 0:T.lastUnsuccessfulRechargeErrorDescription)&&void 0!==w?w:"-")),a.createElement(K.Z,null))),a.createElement(d.Z,{container:!0,spacing:10,className:x.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:12},a.createElement(p.Z,{className:x.fieldHeading},R("successfullyRedeemedVouchers")),a.createElement(d.Z,{item:!0,xs:12,sm:12},a.createElement(p.Z,{style:{fontSize:14}},R("serialNumbers")+": ",null!=T&&T.successfulRedeemedSerials&&(null==T?void 0:T.successfulRedeemedSerials.length)>0?null==T?void 0:T.successfulRedeemedSerials.map((function(e,t){var n;return a.createElement(a.Fragment,null,(null==T||null===(n=T.successfulRedeemedSerials)||void 0===n?void 0:n.length)-1===t?a.createElement(Nn.Z,{onClick:function(t){V(e.split("(")[0]),j(!0)}},e):a.createElement(a.Fragment,null,a.createElement(Nn.Z,{onClick:function(t){V(e.split("(")[0]),j(!0)}},e),", "))})):"-"))))),a.createElement(je.Z,{open:F,fullScreen:!0,fullWidth:!0,onClose:M},a.createElement(U.Z,{className:x.dialogHeader,disableTypography:!0},R("voucherDetails"),a.createElement(xe.Z,{edge:"end",className:x.closeIcon,color:"inherit",onClick:M,"aria-label":"close"},a.createElement(yn.Z,null,"close"))),a.createElement(wn,{serialNumber:k},(function(e){var t=e.voucherDetails,n=e.loading;return a.createElement(L.Z,null,null!=t&&t.resultCode?a.createElement(p.Z,{variant:"subtitle2"},t.resultDescription):a.createElement(De,{voucherDetails:t,loading:n}))})),a.createElement(z.Z,null,a.createElement(m.Z,{onClick:function(e){return j(!1)},className:x.button,variant:"contained",color:"primary"},R("okButton")))))};var Rn=(0,s.Z)((function(e){return(0,u.Z)({button:{margin:e.spacing(1),marginTop:e.spacing(3.5)},element:{marginTop:e.spacing(1),marginBottom:e.spacing(1),marginRight:e.spacing(1)},fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{fontSize:14},rowSpacing:{marginRight:e.spacing(1),justifyContent:"space-between"},editbutton:{margin:e.spacing(.5)},buttonContainer:{justifyContent:"center","& .MuiFormControlLabel-root":{marginRight:0}}})}));const Pn=function(e){var t=e.setSubscriberData,n=e.subscriberData,r=e.resetv,s=e.msisdn,u=(e.onFormSubmit,Rn()),g=(0,i.useTranslation)().t,E=h.Ry().shape({subscriber:h.Z_().required("value is required"),actionType:h.Z_().required("value is required"),reason:h.Z_().required("value is required")}),v=a.useState(!1),Z=(0,o.Z)(v,2),b=(Z[0],Z[1]),S=w(),y=S.showErrorMessage,N=S.showSuccessMessage,C=a.useState(!1),T=(0,o.Z)(C,2),x=T[0],R=T[1],P=a.useState(!1),D=(0,o.Z)(P,2),O=D[0],k=D[1],V=a.useState(!1),B=(0,o.Z)(V,2),A=B[0],F=B[1],j=ne()().checkPermission;a.useEffect((function(){k(null==n?void 0:n.suspended),F(null==n?void 0:n.neverSuspend)}),[n]);var M=(0,f.TA)({initialValues:{subscriber:s,actionType:"",reason:""},validationSchema:E,enableReinitialize:!0,onSubmit:function(e){return function(e){b(!0),function(e){return I("/vms/v1/subscriber/actions",{method:"POST",body:e})}(e).then((function(e){0===e.resultCode?(N(e.resultDescription),t(null)):y(e.resultDescription)})).catch((function(e){return y(e)})).finally((function(){return b(!1)}))}(e)}}),_=M.values,q=M.errors,W=M.handleChange,z=M.handleSubmit,L=M.handleReset;return M.setFieldValue,a.createElement(a.Fragment,null,a.createElement(d.Z,null,a.createElement(_e.Z,{className:u.element},a.createElement(d.Z,{container:!0,spacing:2,className:u.rowSpacing},j(he)&&a.createElement(d.Z,{container:!0,className:u.buttonContainer,item:!0,xs:12,sm:3},a.createElement(Me.Z,{control:a.createElement(He.Z,{checked:x,onChange:function(e){O!==(null==n?void 0:n.suspended)&&k(null==n?void 0:n.suspended),A!==(null==n?void 0:n.neverSuspend)&&F(null==n?void 0:n.neverSuspend),R(e.target.checked),_.reason=""}}),label:g("resetFraudCounter")})),j(ge)&&a.createElement(d.Z,{container:!0,className:u.buttonContainer,item:!0,xs:12,sm:6},a.createElement(H.Z,{display:"flex",alignItems:"center"},a.createElement(p.Z,{align:"right"},g("unSuspendSubscriber")),a.createElement(He.Z,{checked:O,onChange:function(e){x&&R(!1),A!==(null==n?void 0:n.neverSuspend)&&F(null==n?void 0:n.neverSuspend),k(!O),_.reason=""},disabled:A}),a.createElement(p.Z,null,g("suspendSubscriber")))),j(Ee)&&a.createElement(d.Z,{container:!0,className:u.buttonContainer,item:!0,xs:12,sm:3},a.createElement(Me.Z,{control:a.createElement(He.Z,{checked:A,onChange:function(e){x&&R(!1),F(!A),_.reason=""},disabled:O||(null==n?void 0:n.suspended)}),label:g("neverSuspendSubscriber")}))),a.createElement(d.Z,{container:!0,spacing:2},j(he)&&a.createElement(d.Z,{item:!0,xs:12,sm:3},x&&a.createElement(l.SeamlessInput,{className:u.element,fullWidth:!0,name:"reason",label:g("reasonText"),onChange:W,value:_.reason,error:!!q.reason,required:!0,helperText:q.reason})),j(ge)&&a.createElement(d.Z,{item:!0,xs:12,sm:3},!O&&O!==(null==n?void 0:n.suspended)&&!x&&a.createElement(l.SeamlessInput,{className:u.element,fullWidth:!0,name:"reason",label:g("reasonText"),value:_.reason,onChange:W,error:!!q.reason,required:!0,helperText:q.reason})),j(ge)&&a.createElement(d.Z,{item:!0,xs:12,sm:3},O&&O!==(null==n?void 0:n.suspended)&&!x&&a.createElement(l.SeamlessInput,{className:u.element,fullWidth:!0,name:"reason",label:g("reasonText"),value:_.reason,onChange:W,error:!!q.reason,required:!0,helperText:q.reason})),j(Ee)&&a.createElement(d.Z,{item:!0,xs:12,sm:3},A!==(null==n?void 0:n.neverSuspend)&&a.createElement(l.SeamlessInput,{className:u.element,fullWidth:!0,name:"reason",label:g("reasonText"),value:_.reason,onChange:W,error:!!q.reason,required:!0,helperText:q.reason})))),a.createElement(d.Z,{item:!0,xs:4},j("SUBSCRIBER_ACTIONS")&&a.createElement(a.Fragment,null,a.createElement(m.Z,{onClick:function(e){x?_.actionType="RESET":A?_.actionType="NEVER_SUSPEND":O&&O!==(null==n?void 0:n.suspended)?_.actionType="SUSPEND":O||O===(null==n?void 0:n.suspended)?_.actionType="":_.actionType="UNSUSPEND",z(),""!=_.actionType&&r(e)},className:(0,c.default)(u.button),color:"primary",variant:"contained"},g("saveButton")),a.createElement(m.Z,{onClick:function(e){L(e),r(e),t(null)},className:(0,c.default)(u.button),color:"primary",variant:"contained"},g("cancelButton"))))))};var In=(0,s.Z)((function(e){return(0,u.Z)({button:{margin:e.spacing(1),marginTop:e.spacing(3.5)},element:{marginTop:e.spacing(1),marginBottom:e.spacing(1),marginRight:e.spacing(1)},fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{fontSize:14},rowSpacing:{marginRight:e.spacing(1)},editbutton:{margin:e.spacing(.5)}})}));const Dn=function(){var e=In(),t=(0,i.useTranslation)().t,n=h.Ry().shape({msisdn:h.Z_().typeError(t("mustBeNumber")).matches(/^[0-9]+$/,t("mustBeNumber")).required(t("valueIsRequired"))}),r=a.useState(!1),s=(0,o.Z)(r,2),u=(s[0],s[1]),g=a.useState(),E=(0,o.Z)(g,2),v=E[0],Z=E[1],b=w(),S=b.showErrorMessage,y=(b.showSuccessMessage,(0,f.TA)({initialValues:{msisdn:""},onSubmit:function(e){return P(e.msisdn)},validationSchema:n,enableReinitialize:!0})),N=y.values,C=y.errors,T=y.handleChange,x=(y.handleBlur,y.handleSubmit),R=y.handleReset,P=a.useCallback((function(e){u(!0),function(e){return I("/vms/v1/subscriber/fetch/".concat(e,"/details"))}(e).then((function(e){Z(e),0!==e.resultCode&&S(e.resultDescription)})).catch((function(e){return S(e)})).finally((function(){return u(!1)}))}),[]);return a.createElement(a.Fragment,null,a.createElement(d.Z,{container:!0,spacing:2},a.createElement(d.Z,{item:!0,xs:2},a.createElement(l.SeamlessInput,{className:(0,c.default)(e.element),fullWidth:!0,required:!0,name:"msisdn",error:!!C.msisdn,helperText:C.msisdn,value:N.msisdn,onChange:T,label:t("subscriberMsisdn"),onKeyPress:function(e){return"Enter"===e.key&&x()}})),a.createElement(d.Z,{item:!0,xs:4},a.createElement(m.Z,{onClick:function(e){x()},className:(0,c.default)(e.button),color:"primary",variant:"contained"},t("view")))),(null==v?void 0:v.msisdn)&&a.createElement(d.Z,null,a.createElement(mn.Z,{variant:"outlined",style:{marginTop:20}},a.createElement(d.Z,{container:!0},a.createElement(p.Z,{variant:"subtitle1",color:"primary",style:{marginBottom:10,marginLeft:5,marginRight:10}},t("details"))),a.createElement(xn,{subscriberData:v}))),(null==v?void 0:v.msisdn)&&a.createElement(Pn,{setSubscriberData:Z,subscriberData:v,msisdn:v.msisdn,resetv:R}))};var On=n(44962),kn=(0,s.Z)((function(e){return(0,u.Z)({button:{marginTop:10},element:{marginRight:e.spacing(1),marginBottom:e.spacing(1)},dateField:{margin:e.spacing(1),width:"100%"},check:{marginTop:e.spacing(2)},elementField:{marginRight:e.spacing(1),marginBottom:e.spacing(1),width:550},rowSpacing:{marginRight:e.spacing(1)}})}));const Vn=function(e){var t,n,r,s,u,p,g,E,v,Z=e.isAssignPrinterProfilePage,b=e.data,y=e.onFormSubmit,N=kn(),C=(0,i.useTranslation)().t,w=a.useState(""),T=(0,o.Z)(w,2),x=T[0],R=T[1],P=a.useState(!1),I=(0,o.Z)(P,2),D=I[0],O=I[1],k=null===(t=window)||void 0===t||null===(n=t.config)||void 0===n||null===(r=n.voucher)||void 0===r?void 0:r.printerProfile,V=(null==k?void 0:k.batchNo)||(null==k?void 0:k.orderId)||(null==k?void 0:k.batchRange);a.useEffect((function(){null!=k&&k.batchNo?R("batchNo"):null!=k&&k.orderId?R("orderId"):null!=k&&k.batchRange&&R("batchRange")}),[]);var B=h.Ry().shape({ownerId:Z||D?h.Z_():h.Z_().required(C("valueIsRequired")).matches(/^[a-zA-Z0-9]+$/,C("alphaNumeric")).test("len",C("valueIsRequired"),(function(e){return" "!==e})),printerProfileId:Z?h.Z_().required(C("valueIsRequired")).test("len",C("valueIsRequired"),(function(e){return" "!==e})):h.Z_(),orderId:"orderId"===x?h.Z_().required(C("valueIsRequired")).matches(/^[a-zA-Z0-9]+$/,C("alphaNumeric")).test("len",C("valueIsRequired"),(function(e){return" "!==e})):h.Z_(),batchNumber:"batchNo"===x?h.Z_().required(C("valueIsRequired")).matches(/^[a-zA-Z0-9]+$/,C("alphaNumeric")).test("len",C("valueIsRequired"),(function(e){return" "!==e})):h.Z_(),rangeIdentifier:h.Ry().shape({start:"batchRange"===x?h.Z_().required(C("valueIsRequired")).matches(/^[a-zA-Z0-9]+$/,C("alphaNumeric")):h.Z_(),end:"batchRange"===x?h.Z_().required(C("valueIsRequired")).matches(/^[a-zA-Z0-9]+$/,C("alphaNumeric")):h.Z_()}).nullable()}),A=(0,f.TA)({initialValues:b,onSubmit:function(e){return y&&y(e)},validationSchema:B,validateOnChange:!1,validateOnBlur:!1,enableReinitialize:!0}),F=A.values,j=A.errors,M=A.handleChange,_=A.handleSubmit,q=A.handleReset;return a.createElement(a.Fragment,null,a.createElement(d.Z,null,a.createElement(_e.Z,{className:N.element},a.createElement(d.Z,{container:!0,spacing:3},(null==k?void 0:k.batchNo)&&a.createElement(d.Z,{item:!0,xs:12,sm:5,md:3},a.createElement(Me.Z,{control:a.createElement(On.Z,{checked:"batchNo"===x,onChange:function(e){q(e),R("batchNo")}}),label:C("batchNo")})),(null==k?void 0:k.orderId)&&a.createElement(d.Z,{item:!0,xs:12,sm:5,md:3},a.createElement(Me.Z,{control:a.createElement(On.Z,{checked:"orderId"===x,onChange:function(e){q(e),R("orderId")}}),label:C("orderId")})),(null==k?void 0:k.batchRange)&&a.createElement(d.Z,{item:!0,xs:12,sm:5,md:3},a.createElement(Me.Z,{control:a.createElement(On.Z,{checked:"batchRange"===x,onChange:function(e){q(e),R("batchRange")}}),label:C("batchRange")})))),a.createElement(d.Z,{container:!0,spacing:3},Z?null:a.createElement(d.Z,{item:!0},a.createElement(l.Check,{className:(0,c.default)(N.check),name:"activationFlag",checked:Boolean(F.activationFlag),label:C("activateVoucher"),handleChange:function(e){M({target:{value:e.target.checked,name:"activationFlag"}}),O(e.target.checked)},color:"primary"})),"orderId"===x?a.createElement(a.Fragment,null,a.createElement(d.Z,{item:!0,xs:12,sm:5,md:3},a.createElement(l.SeamlessInput,{fullWidth:!0,error:!!j.orderId,helperText:j.orderId,className:(0,c.default)(N.element),name:"orderId",value:F.orderId,onChange:M,label:C("orderId"),required:!0}))):null,"batchNo"===x?a.createElement(d.Z,{item:!0,xs:12,sm:5,md:3},a.createElement(l.SeamlessInput,{fullWidth:!0,error:!!j.batchNumber,helperText:j.batchNumber,className:(0,c.default)(N.element),name:"batchNumber",value:F.batchNumber,onChange:M,label:C("batchNo"),required:!0})):null,"batchRange"===x?a.createElement(a.Fragment,null,a.createElement(d.Z,{item:!0,xs:12,sm:4,md:3},a.createElement(l.SeamlessInput,{className:(0,c.default)(N.element),fullWidth:!0,required:!0,name:"rangeIdentifier.start",value:null===(s=F.rangeIdentifier)||void 0===s?void 0:s.start,onChange:M,label:C("start"),error:!(null===(u=j.rangeIdentifier)||void 0===u||!u.start),helperText:null===(p=j.rangeIdentifier)||void 0===p?void 0:p.start})),a.createElement(d.Z,{item:!0,xs:12,sm:4,md:3},a.createElement(l.SeamlessInput,{className:(0,c.default)(N.element),fullWidth:!0,required:!0,name:"rangeIdentifier.end",value:null===(g=F.rangeIdentifier)||void 0===g?void 0:g.end,onChange:M,label:C("end"),error:!(null===(E=j.rangeIdentifier)||void 0===E||!E.end),helperText:null===(v=j.rangeIdentifier)||void 0===v?void 0:v.end}))):null,Z?a.createElement(d.Z,{item:!0,xs:12,sm:4,md:3},a.createElement(Nt,null,(function(e){var t=e.printData;return e.loading,a.createElement(l.SeamlessDropDown,{className:(0,c.default)(N.element),fullWidth:!0,required:!0,label:C("printerProfile"),helperText:j.printerProfileId,options:[{value:" ",key:""}].concat((0,S.Z)(t.map((function(e){return{value:e.id,key:e.printerCode}})))),name:"printerProfileId",value:F.printerProfileId,error:!!j.printerProfileId,onChange:M})}))):a.createElement(a.Fragment,null,F.activationFlag?null:a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{fullWidth:!0,error:!!j.ownerId,helperText:j.ownerId,className:(0,c.default)(N.element),name:"ownerId",value:F.ownerId,onChange:M,label:C("ownerId"),required:!0})))),a.createElement(d.Z,{item:!0,xs:12},a.createElement(m.Z,{disabled:!V,type:"button",onClick:function(e){_()},className:(0,c.default)(N.element,N.button),color:"primary",variant:"contained"},Z?C("submitButton"):F.activationFlag?C("activateButton"):C("distributeButton")),a.createElement(m.Z,{type:"button",onClick:q,className:(0,c.default)(N.element,N.button),color:"primary",variant:"outlined"},C("resetButton")))))};var Bn=(0,s.Z)((function(e){return(0,u.Z)({button:{margin:e.spacing(1),marginTop:e.spacing(3.5)},element:{margin:e.spacing(1)},dateField:{margin:e.spacing(1),width:"100%",marginTop:e.spacing(1)},dividerSpacing:{marginBottom:e.spacing(3)},btnSpacing:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},spacingTop:{marginTop:e.spacing(3)},dropDown:{margin:e.spacing(1)},divider:{height:28,margin:4}})}));const An=function(e){var t=e.isReconcilePage,n=(0,i.useTranslation)().t,r=Bn(),c=a.useState(),s=(0,o.Z)(c,2),u=s[0],p=s[1],f=a.useState(t?"RECONCILE":" "),h=(0,o.Z)(f,2),g=h[0],E=h[1],v=a.useState(""),Z=(0,o.Z)(v,2),b=Z[0],S=Z[1],y=w(),N=(y.showWarningMessage,y.showErrorMessage),C=y.showSuccessMessage,T=a.useState(!1),x=(0,o.Z)(T,2),R=(x[0],x[1]),P=function(e,t){var n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download",t),document.body.appendChild(n),n.click()};return a.createElement(a.Fragment,null,a.createElement(d.Z,{container:!0},a.createElement(d.Z,{item:!0,xs:12,sm:6,md:6},a.createElement(K.Z,{className:r.divider,orientation:"vertical"}),a.createElement(l.SeamlessInput,{value:b,contentEditable:!0,className:r.element,label:n("uploadFile"),required:!0}),a.createElement("input",{accept:".csv",className:r.element,style:{display:"none"},id:"raised-button-file",type:"file",onChange:function(e){p(e.target.files[0]),S(e.target.files[0].name)},onClick:function(e){e.target.value=null}}),a.createElement("label",{htmlFor:"raised-button-file"},a.createElement(m.Z,{variant:"outlined",component:"span",className:r.button,color:"primary"},n("selectFile"))))),a.createElement(d.Z,{container:!0,spacing:3},a.createElement(d.Z,{item:!0},t?a.createElement(a.Fragment,null,a.createElement(l.SeamlessInput,{className:r.element,required:!0,label:n("bulkOperationType"),name:"selectBatchType",value:g}),t?a.createElement(Nn.Z,{onClick:function(){return P("/files/reconcile.csv","reconcile.csv")}},a.createElement(m.Z,{color:"primary",className:r.button,variant:"outlined",startIcon:a.createElement(yn.Z,null,"download")},n("downloadSampleFile"))):null):a.createElement(a.Fragment,null,a.createElement(l.SeamlessDropDown,{className:r.dropDown,required:!0,label:n(t?"bulkOperationType":"selectBatchType"),options:t?[{key:"Reconcile",value:"RECONCILE"}]:[{key:" ",value:" "},{key:"Extend expiry",value:"EXTEND_EXPIRY"},{key:"Voucher state change",value:"STATE_CHANGE"},{key:"Suspension/Unsuspension",value:"SUSPEND_UNSUSPEND"},{key:"Reconcile",value:"RECONCILE"},{key:"Distribute Voucher",value:"DISTRIBUTE_VOUCHER"}],name:"selectBatchType",value:g,onChange:function(e){return E(e.target.value)}}),"EXTEND_EXPIRY"===g?a.createElement(a.Fragment,null,a.createElement(Nn.Z,{onClick:function(){return P("/files/extend_batch_expiry_demo.csv","extendBatchExpiryDemo.csv")}},a.createElement(m.Z,{color:"primary",className:r.button,variant:"outlined",startIcon:a.createElement(yn.Z,null,"download")},n("batchSampleFile"))),a.createElement(Nn.Z,{onClick:function(){return P("/files/extend_serial_expiry_demo.csv","extendSerialExpiryDemo.csv")}},a.createElement(m.Z,{color:"primary",className:r.button,variant:"outlined",startIcon:a.createElement(yn.Z,null,"download")},n("serialSampleFile")))):null,"STATE_CHANGE"===g?a.createElement(a.Fragment,null,a.createElement(Nn.Z,{onClick:function(){return P("/files/batch_state_change_demo.csv","batchStateChangeDemo.csv")}},a.createElement(m.Z,{color:"primary",className:r.button,variant:"outlined",startIcon:a.createElement(yn.Z,null,"download")},n("batchSampleFile"))),a.createElement(Nn.Z,{onClick:function(){return P("/files/serial_state_change_demo.csv","serialStateChangeDemo.csv")}},a.createElement(m.Z,{color:"primary",className:r.button,variant:"outlined",startIcon:a.createElement(yn.Z,null,"download")},n("serialSampleFile")))):null,"SUSPEND_UNSUSPEND"===g?a.createElement(Nn.Z,{onClick:function(){return P("/files/suspend_demo.csv","suspend_demo.csv")}},a.createElement(m.Z,{color:"primary",className:r.button,variant:"outlined",startIcon:a.createElement(yn.Z,null,"download")},n("downloadSampleFile"))):null,"RECONCILE"===g?a.createElement(Nn.Z,{onClick:function(){return P("/files/reconcile.csv","reconcile.csv")}},a.createElement(m.Z,{color:"primary",className:r.button,variant:"outlined",startIcon:a.createElement(yn.Z,null,"download")},n("downloadSampleFile"))):null,"DISTRIBUTE_VOUCHER"===g?a.createElement(a.Fragment,null,a.createElement(Nn.Z,{onClick:function(){return P("/files/distribute_batch_voucher_demo.csv","distributeBatchVoucherDemo.csv")}},a.createElement(m.Z,{color:"primary",className:r.button,variant:"outlined",startIcon:a.createElement(yn.Z,null,"download")},n("batchSampleFile"))),a.createElement(Nn.Z,{onClick:function(){return P("/files/distribute_serial_voucher_demo.csv","distributeSerialVoucherDemo.csv")}},a.createElement(m.Z,{color:"primary",className:r.button,variant:"outlined",startIcon:a.createElement(yn.Z,null,"download")},n("serialSampleFile")))):null))),a.createElement(d.Z,{container:!0,spacing:3},a.createElement(d.Z,{item:!0,xs:12},a.createElement(m.Z,{className:r.button,color:"primary","aria-label":"directions",onClick:function(e){!function(e){R(!0);var t,n=new FormData;n.append("file",u),n.append("actionType",g),(t=n,I("/vms/v1/file/upload",{method:"POST",body:t},!0)).then((function(e){0===e.resultCode?C(e.resultDescription):N(e.resultDescription)})).catch((function(e){return N(e)})).finally((function(){return R(!1)}))}()},disabled:" "===g||!(g&&u),variant:"contained"},n("uploadButton")),a.createElement(m.Z,{className:r.button,color:"primary","aria-label":"directions",onClick:function(e){p(null),E(t?"RECONCILE":" "),S("")},variant:"contained"},n("cancelButton")))))};var Fn=(0,We.makeStyles)((function(e){return(0,We.createStyles)({table:{height:400,width:"100%"}})}));const jn=function(e){var t=e.loading,n=e.fileDetails,r=e.count,l=e.page,o=e.perPage,c=e.onPageChange,s=e.onPageSizeChange,u=(0,i.useTranslation)().t,d=w().showErrorMessage,p=ne()().checkPermission,f=Fn(),h=a.useCallback((function(e,t){(function(e){return I("/vms/v1/file/download?id=".concat(e))})(e).then((function(e){var n,a,r,l;e.resultCode?d(e.resultDescription):(n=e,a="".concat(t),r=URL.createObjectURL(n),(l=document.createElement("a")).href=r,l.download=a||"download",l.click())})).catch((function(e){return d(e)}))}),[]),g=[{field:"processingDate",headerName:u("processingDate"),sortable:!0,width:225},{field:"fileName",headerName:u("fileName"),sortable:!0,width:225},{field:"actionType",headerName:u("actionType"),sortable:!0,width:225},{field:"status",headerName:u("status"),sortable:!0,width:225},{field:"actions",headerName:u("actions"),sortable:!0,width:225,renderCell:function(e){return a.createElement("div",null,a.createElement(W.Z,{size:"small",color:"primary","aria-label":"batch action buttons"},p("BATCH_FILE_DOWNLOAD")&&a.createElement(G.ZP,{title:u("downloadFile")},a.createElement(m.Z,{onClick:function(){return h(e.row.id,e.row.fileName)}},a.createElement(Q.Z,{fontSize:"small"})))))}}];return a.createElement(a.Fragment,null,a.createElement(H.Z,{className:f.table},a.createElement(x(),{loading:t,columnBuffer:2,onPageSizeChange:function(e){s(e.pageSize),c(1)},onPageChange:function(e){c(e.page+1)},rows:n,pagination:!0,paginationMode:"server",page:l-1,pageSize:o,getRowId:function(e){return e.orderId},columns:g,rowCount:r,localeText:{toolbarColumns:u("columns"),toolbarFilters:u("filters"),toolbarDensity:u("density"),toolbarExport:u("export"),columnsPanelTextFieldLabel:u("findColumn"),columnsPanelTextFieldPlaceholder:u("columnTitle"),columnsPanelShowAllButton:u("showAll"),columnsPanelHideAllButton:u("hideAll"),filterPanelColumns:u("columns"),filterPanelInputPlaceholder:u("filterValues"),filterPanelInputLabel:u("value"),filterOperatorContains:u("contains"),filterOperatorEquals:u("equals"),filterOperatorStartsWith:u("startsWith"),filterOperatorEndsWith:u("endsWith"),toolbarExportCSV:u("downloadAsCSV")}})))};function Mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mn(Object(n),!0).forEach((function(t){(0,N.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qn=(0,s.Z)((function(e){return(0,u.Z)({button:{marginTop:e.spacing(3),marginRight:e.spacing(2)},dateField:{margin:e.spacing(1),width:"100%",marginTop:e.spacing(2)},dropDown:{marginTop:10,"& .MuiInputBase-input":{padding:10}}})}));const Hn=function(){var e,t,n,r=(0,i.useTranslation)().t,c=qn(),s=window.location.pathname.split("/"),u="reconcile-search"===s[s.length-1],p=a.useState(u?"PROCESSING_DATE":""),f=(0,o.Z)(p,2),h=f[0],Z=f[1],b=a.useState(u?"RECONCILE":""),S=(0,o.Z)(b,2),N=S[0],C=S[1],x=a.useState(""),R=(0,o.Z)(x,2),P=R[0],D=R[1],O=a.useState(!1),k=(0,o.Z)(O,2),V=k[0],B=k[1],A=a.useState(),F=(0,o.Z)(A,2),j=F[0],M=F[1],_=a.useState([]),q=(0,o.Z)(_,2),H=q[0],W=q[1],z=a.useState(!1),L=(0,o.Z)(z,2),U=L[0],K=L[1],Y=a.useState(0),G=(0,o.Z)(Y,2),X=G[0],$=G[1],J=(null===(e=window)||void 0===e||null===(t=e.config)||void 0===t||null===(n=t.voucher)||void 0===n?void 0:n.recordsPerPage)||10,Q=(0,T.useServerTable)({page:1,perPage:J,order:"asc",orderBy:"",filter:{}}),ee=w().showErrorMessage,te=function(e){return"searchCriteria"===e&&" "===h||"actionType"===e&&" "===N};a.useEffect((function(){if(j){var e=_n(_n({},j),{},{page:{number:Q.page,size:Q.perPage}});B(!0),(t=e,I("/vms/v1/file/search",{method:"POST",body:t})).then((function(e){var t;0===e.resultCode?(null!=e&&e.fileDetails?W(e.fileDetails):W([]),(null==e||null===(t=e.pagingInfo)||void 0===t?void 0:t.totalRecords)&&$(e.pagingInfo.totalRecords),(null==e||!e.fileDetails)&&ee(e.resultDescription)):ee(e.resultDescription)})).catch((function(e){return ee(e)})).finally((function(){return B(!1)}))}var t}),[j,Q.page,Q.perPage]),a.useEffect((function(){W([])}),[h,N,P]);var ne=window.config.openCalendarWith||"year";return a.createElement(a.Fragment,null,a.createElement(d.Z,{container:!0,spacing:2},u?null:a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessDropDown,{className:c.dropDown,required:!0,fullWidth:!0,label:r("searchCriteria"),options:[{key:"",value:" "},{key:"Action Type",value:"ACTION_TYPE"},{key:"Processing Date",value:"PROCESSING_DATE"}],name:"searchCriteria",value:h,onChange:function(e){Z(e.target.value)},error:te("searchCriteria"),helperText:te("searchCriteria")?"required":null})),"ACTION_TYPE"===h?a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessDropDown,{className:c.dropDown,required:!0,fullWidth:!0,label:r("actionType"),options:[{key:"",value:" "},{key:"Suspend Unsuspend",value:"SUSPEND_UNSUSPEND"},{key:"State Change",value:"STATE_CHANGE"},{key:"Extend Expiry",value:"EXTEND_EXPIRY"},{key:"Reconcile",value:"RECONCILE"},{key:"Distribute Voucher",value:"DISTRIBUTE_VOUCHER"}],name:"actionType",value:N,onChange:function(e){return C(e.target.value)},onFocus:function(){return K(!1)},error:te("actionType")||U,helperText:te("actionType")||U?"required":null})):null,"PROCESSING_DATE"===h?a.createElement(g.M,{utils:v.Z},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(E.e,{className:c.dateField,views:["year","month","date"],openTo:ne,autoOk:!0,variant:"inline",format:"yyyy/MM/dd",margin:"normal",label:r("processingDate"),name:"processingDate",value:P||null,onChange:function(e){D(e),K(!1)},onClose:function(){return K(!1)},KeyboardButtonProps:{"aria-label":"change date"}}))):null),a.createElement(d.Z,{item:!0,xs:12},a.createElement(m.Z,{onClick:function(){"ACTION_TYPE"===h&&N||"PROCESSING_DATE"===h?function(e,t,n){Q.onPageSizeChange(Q.perPage),Q.onPageChange(1),M(u?{actionType:N,processingDate:"PROCESSING_DATE"===e?n:void 0,page:{number:1,size:Q.perPage}}:{actionType:"ACTION_TYPE"===e?t:void 0,processingDate:"PROCESSING_DATE"===e?n:void 0,page:{number:1,size:Q.perPage}})}(h,N,P):K(!0)},className:c.button,color:"primary",variant:"contained"},r("search")),a.createElement(m.Z,{onClick:function(){return D(""),C(u?"RECONCILE":" "),Z(u?"PROCESSING_DATE":" "),K(!1),void W([])},className:c.button,color:"primary",variant:"outlined"},r("reset")),H&&H.length>0?a.createElement(jn,(0,y.Z)({loading:V,fileDetails:H,count:X},Q)):null))},Wn=function(e){var t=e.children,n=a.useState(!1),r=(0,o.Z)(n,2),l=r[0],i=r[1],c=a.useState([]),s=(0,o.Z)(c,2),u=s[0],m=s[1],d=w().showErrorMessage;return a.useEffect((function(){i(!0),I("/vms/v1/order/returned-order/search").then((function(e){0===e.resultCode?e.orders.length>0?m(e.orders):m([]):d(e.resultDescription)})).catch((function(e){d(e)})).finally((function(){return i(!1)}))}),[]),a.createElement(a.Fragment,null,t({returnOrdersList:u,loading:l}))};var zn=(0,We.makeStyles)((function(e){return(0,We.createStyles)({dialogWrapper:{textAlign:"center","& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},fontHeavy:{fontWeight:e.typography.fontWeightBold},modalContentSpacing:{marginBottom:e.spacing(3)},button:{width:80,marginRight:e.spacing(1)},icon:{color:Le.Z[400],width:"100%",textAlign:"center",fontSize:60},errorIcon:{color:et.Z[400],width:"100%",textAlign:"center",fontSize:50},table:{height:400,width:"100%"}})}));const Ln=function(e){var t,n,r,c=e.loading,s=e.returnOrdersList,u=(0,i.useTranslation)().t,d=w(),f=d.showErrorMessage,h=d.showSuccessMessage,g=ne()().checkPermission,E=a.useState(!1),v=(0,o.Z)(E,2),Z=v[0],b=v[1],S=a.useState(!1),y=(0,o.Z)(S,2),N=y[0],C=y[1],T=zn(),R=a.useState(""),P=(0,o.Z)(R,2),I=P[0],D=P[1],O=a.useState(0),k=(0,o.Z)(O,2),V=k[0],B=k[1],A=(null===(t=window)||void 0===t||null===(n=t.config)||void 0===n||null===(r=n.voucher)||void 0===r?void 0:r.recordsPerPage)||10,F=a.useCallback((function(e){q({orderIds:[e],orderReturnStatus:"APPROVED"}).then((function(t){var n;0===t.resultCode?(h(t.resultDescription),null===(n=document.querySelector("[data-id='"+e+"']"))||void 0===n||n.remove(),b(!1)):f(t.resultDescription)})).catch((function(e){return f(e.resultDescription)}))}),[]),j=a.useCallback((function(e){q({orderIds:[e],orderReturnStatus:"REJECTED"}).then((function(t){var n;0===t.resultCode?(h(t.resultDescription),null===(n=document.querySelector("[data-id='"+e+"']"))||void 0===n||n.remove(),C(!1)):f(t.resultDescription)})).catch((function(e){return f(e.resultDescription)}))}),[]),M=function(){b(!1)},_=function(){C(!1)},z=[{field:"orderId",headerName:u("orderId"),sortable:!0,width:200},{field:"orderedBy",headerName:u("orderedBy"),sortable:!0,width:200},{field:"createdOn",headerName:u("createdOn"),sortable:!0,width:200,valueFormatter:function(e){return e.value.slice(0,10)}},{field:"status",headerName:u("status"),sortable:!0,width:200},{field:"actions",headerName:u("actions"),sortable:!1,flex:1,renderCell:function(e){return a.createElement("div",null,a.createElement(W.Z,{size:"small",color:"primary"},g("APPROVE_BULK_ORDER_RETURN")&&a.createElement(G.ZP,{title:u("approve")},a.createElement(m.Z,{onClick:function(){b(!0),D(e.row.orderId),B(e.row.id)}},a.createElement(Ut.Z,{fontSize:"small",style:{color:Le.Z[400]}}))),g("REJECT_BULK_ORDER_RETURN")&&a.createElement(G.ZP,{title:u("reject")},a.createElement(m.Z,{onClick:function(){C(!0),D(e.row.orderId),B(e.row.id)}},a.createElement(Kt.Z,{fontSize:"small",style:{color:et.Z[400]}})))),a.createElement(l.SeamlessDialog,{open:Z,className:T.dialogWrapper,maxWidth:"sm",fullWidth:!0},a.createElement(ze.Z,{className:T.icon}),a.createElement("div",{className:T.modalContentSpacing},a.createElement(p.Z,{gutterBottom:!0,id:"transition-modal-title",variant:"h6",className:T.fontHeavy},u("bulkOrderApproveReturnRequestsDialogTitle")),a.createElement(p.Z,{id:"transition-modal-description",variant:"body1"},u("bulkOrderApproveReturnRequestsDialogDescription")," ",I)),a.createElement(l.SeamlessButton,{type:"button",variant:"outlined",color:"primary",className:T.button,onClick:M},u("noConfirmationButton")),a.createElement(l.SeamlessButton,{type:"button",variant:"outlined",color:"primary",className:T.button,onClick:function(){return F(V)}},u("yesConfirmationButton"))),a.createElement(l.SeamlessDialog,{open:N,className:T.dialogWrapper,maxWidth:"sm",fullWidth:!0},a.createElement(Yt.Z,{className:T.errorIcon}),a.createElement("div",{className:T.modalContentSpacing},a.createElement(p.Z,{gutterBottom:!0,id:"transition-modal-title",variant:"h6",className:T.fontHeavy},u("bulkOrderRejectReturnRequestsDialogTitle")),a.createElement(p.Z,{id:"transition-modal-description",variant:"body1"},u("bulkOrderRejectReturnRequestsDialogDescription")," ",I)),a.createElement(l.SeamlessButton,{type:"button",variant:"outlined",color:"primary",className:T.button,onClick:_},u("noConfirmationButton")),a.createElement(l.SeamlessButton,{type:"button",variant:"outlined",color:"primary",className:T.button,onClick:function(){return j(V)}},u("yesConfirmationButton"))))}}];return a.createElement(H.Z,{className:T.table},a.createElement(x(),{loading:c,columnBuffer:2,checkboxSelection:!0,pagination:!0,paginationMode:"server",rows:s,getRowId:function(e){return e.orderId},columns:z,pageSize:A,localeText:{toolbarColumns:u("columns"),toolbarFilters:u("filters"),toolbarDensity:u("density"),toolbarExport:u("export"),columnsPanelTextFieldLabel:u("findColumn"),columnsPanelTextFieldPlaceholder:u("columnTitle"),columnsPanelShowAllButton:u("showAll"),columnsPanelHideAllButton:u("hideAll"),filterPanelColumns:u("columns"),filterPanelInputPlaceholder:u("filterValues"),filterPanelInputLabel:u("value"),filterOperatorContains:u("contains"),filterOperatorEquals:u("equals"),filterOperatorStartsWith:u("startsWith"),filterOperatorEndsWith:u("endsWith"),toolbarExportCSV:u("downloadAsCSV")}}))},Un=function(){return a.createElement(Wn,null,(function(e){var t=e.loading,n=e.returnOrdersList;return a.createElement(Ln,{loading:t,returnOrdersList:n})}))};function Kn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kn(Object(n),!0).forEach((function(t){(0,N.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Gn=function(){var e,t,n,r=w().showErrorMessage,l=(0,i.useTranslation)().t,c=a.useState(0),s=(0,o.Z)(c,2),u=s[0],m=s[1],d=a.useState([]),p=(0,o.Z)(d,2),f=p[0],h=p[1],g=a.useState(0),E=(0,o.Z)(g,2),v=E[0],Z=E[1],S=a.useState(!1),N=(0,o.Z)(S,2),C=N[0],x=N[1],R=a.useState({filtered:!1,filters:{}}),P=(0,o.Z)(R,2),I=P[0],D=P[1],O=(null===(e=window)||void 0===e||null===(t=e.config)||void 0===t||null===(n=t.voucher)||void 0===n?void 0:n.recordsPerPage)||10,k=(0,T.useServerTable)({page:1,perPage:O,order:"asc",orderBy:"",filter:{}}),V=function(e){F(e).then((function(e){e.orders.length>0?(h(e.orders),Z(e.pagingInfo.totalRecords)):(r(l("noOrdersFound")),h([]))})).catch((function(e){return r(e)})).finally((function(){return x(!1)}))},B=function(e){var t={page:{number:k.page,size:k.perPage},printScreen:!0};if(null!=e&&e.orderId&&(t.orderId=null==e?void 0:e.orderId),null!=e&&e.batchNumber&&(t.batchNumber=null==e?void 0:e.batchNumber),null!=e&&e.rangeIdentifier.start&&null!=e&&e.rangeIdentifier.end&&(t.rangeIdentifier=null==e?void 0:e.rangeIdentifier),null!=e&&e.orderDateRange.from&&null!=e&&e.orderDateRange.to&&(t.orderDateRange=null==e?void 0:e.orderDateRange),x(!0),Object.values(I.filters).length){var n=Yn(Yn({},I.filters),{},{page:{number:k.page,size:k.perPage},printScreen:!0});V(n)}else V(t)},A=a.useCallback((function(e){var t,n,a=(null===(t=e.filterModel.items[0])||void 0===t?void 0:t.value)||"",r=(null===(n=e.filterModel.items[0])||void 0===n?void 0:n.columnField)||"",l={};a?("batchVoucherState"===r?l.voucherState=a.toUpperCase():l[r]=a,setTimeout((function(){D({filtered:!0,filters:l})}),800)):Object.values(I.filters).length&&D({filtered:!0,filters:{}})}),[I]);return a.useEffect((function(){I.filtered&&B()}),[I]),f.map((function(e,t){return e.id=t})),a.createElement(a.Fragment,null,a.createElement(H.Z,{mb:2},a.createElement(b,(0,y.Z)({userFlag:!0,setVouchers:h,onFormSubmit:function(e){B(e)},printScreen:!0},k))),(!!f.length||I.filtered)&&a.createElement(ye,(0,y.Z)({userFlag:!1,printVouchersPage:!0,loading:C,vouchers:f,count:v,dateChange:u,showOrderId:!0,setDateChange:m,onFilterModelChange:A},k)))};var Xn=n(56470),$n=n(77162),Jn=n.n($n);function Qn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ea(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qn(Object(n),!0).forEach((function(t){(0,N.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ta=(0,s.Z)((function(e){return(0,u.Z)({button:{margin:e.spacing(1),marginTop:e.spacing(3)},element:{marginRight:e.spacing(1),marginBottom:e.spacing(1),width:300},fieldHeading:{fontWeight:"bold",fontSize:14,marginRight:e.spacing(1),marginBottom:e.spacing(-1.5)},fieldValue:{fontSize:14},dialogWrapper:{"& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(2),marginBottom:e.spacing(3),marginRight:"auto",marginLeft:"auto"}},table:{height:400,width:"100%"}})}));const na=function(e){var t,n,c,s,u,g=e.loading,E=e.searchData,v=e.serialRangeSearchPage,Z=e.singleVoucherSearchPage,b=e.viewPage,y=e.count,N=e.page,C=e.perPage,T=(e.update,e.setUpdate),P=e.onPageChange,I=e.onPageSizeChange,O=(0,i.useTranslation)().t,k=a.useState(!1),V=(0,o.Z)(k,2),B=V[0],A=V[1],F=a.useState(!1),j=(0,o.Z)(F,2),M=(j[0],j[1]),_=a.useState(!1),q=(0,o.Z)(_,2),Y=q[0],Q=q[1],ee=a.useState(""),te=(0,o.Z)(ee,2),ae=te[0],re=te[1],le=a.useState([]),ie=(0,o.Z)(le,2),oe=ie[0],ce=ie[1],se=a.useState(),ue=(0,o.Z)(se,2),de=ue[0],pe=ue[1],fe=w(),he=fe.showErrorMessage,ge=fe.showSuccessMessage,Ee=ta(),ve=ne()().checkPermission,Ze=function(){A(!1)};a.useEffect((function(){Re(Ne)}),[B]);var be=a.useCallback((function(e,t){var n,a;M(!0);var r=ea(ea({},e),{},t?{updateValues:{voucherStatusId:null===(n=e.updateValues)||void 0===n?void 0:n.voucherStatusId}}:{updateValues:{expiryDays:null===(a=e.updateValues)||void 0===a?void 0:a.expiryDays}});D(r).then((function(e){0===e.resultCode?ge(e.resultDescription):he(e.resultDescription),A(!1),T(Math.random())})).catch((function(e){return he(e)})).finally((function(){M(!1),Ze()}))}),[]),Se=h.Ry().shape({updateValues:h.Ry().shape({expiryDays:Y?h.Rx():h.Rx().typeError(O("mustBeNumber")).min(1).required(O("valueIsRequired")),voucherStatusId:Y?h.Z_().required(O("valueIsRequired")):h.Z_()})}),ye=(0,f.TA)({initialValues:{identifier:{simpleIdentifier:{type:"SERIAL",value:ae}},updateValues:{voucherStatusId:"",expiryDays:""}},onSubmit:function(e){return be(e,Y)},enableReinitialize:!0,validationSchema:Se}),Ne=ye.values,Ce=ye.errors,we=ye.handleChange,Te=ye.handleBlur,xe=ye.handleSubmit,Re=ye.handleReset,Pe=window.location.pathname.split("/"),Ie=[{field:"serialNo",headerName:O("serialNumber"),sortable:!0,width:160},{field:"currentVoucherState.name",headerName:O("state"),sortable:!0,width:180,valueFormatter:function(e){return e.row.currentVoucherState.name}},{field:"denomination",headerName:O("denomination"),sortable:!0,width:140},{field:"productSKU",headerName:O("productSKU"),sortable:!0,width:180,hide:!Z&&!v},{field:"owner",headerName:O("ownerId"),sortable:!0,width:140,hide:!b&&!v},{field:"createdOn",headerName:O("createdOn"),sortable:!0,width:150,hide:!Z},{field:"expiresOn",headerName:O("expiresOn"),sortable:!0,width:150},{field:"lastModified",headerName:O("lastModified"),sortable:!0,width:150,hide:!b},{field:"actions",headerName:O("actions"),sortable:!1,renderCell:function(e){return a.createElement("div",null,a.createElement(W.Z,{size:"small",color:"primary","aria-label":"product association buttons"},ve(me)&&a.createElement(G.ZP,{title:O("view")},"bulk-voucher-order"===Pe[3]?a.createElement(m.Z,{component:r.Link,to:"/home/voucher/".concat(Pe[3],"/view-orders/").concat(Pe[5],"/view-batches/").concat(Pe[7],"/view/")+e.getValue("serialNo")},a.createElement(J.Z,{fontSize:"small"})):"bulk-vouchers-search"===Pe[3]||"search-bulk-vouchers"===Pe[3]?a.createElement(m.Z,{component:r.Link,to:"/home/voucher/".concat(Pe[3],"/view-batches/").concat(Pe[5],"/view/")+e.getValue("serialNo")},a.createElement(J.Z,{fontSize:"small"})):a.createElement(m.Z,{component:r.Link,to:"/home/voucher/".concat(Pe[3],"/view/")+e.getValue("serialNo")},a.createElement(J.Z,{fontSize:"small"}))),ve("SERIAL_EXPIRYDAYSEXTENSION")&&a.createElement(G.ZP,{title:O("expiryDaysExtension")},a.createElement(m.Z,{onClick:function(){pe(e.getValue("expiresOn")),re(e.row.serialNo),A(!0),Q(!1)}},a.createElement(X.Z,{fontSize:"small"}))),ve("SERIAL_VOUCHERSTATECHANGE")&&(Z?null:"PARTIALLY_REDEEMED"!==e.row.currentVoucherState.name&&a.createElement(G.ZP,{title:O("voucherStateChange")},a.createElement(m.Z,{onClick:function(){var t,n;Q(!0),A(!0),re(e.row.serialNo),"RESERVED"===(null===(t=e.row)||void 0===t||null===(n=t.currentVoucherState)||void 0===n?void 0:n.name)?ce(e.row.nextPossibleStates.filter((function(e){return"PRINT"!==e.name}))):ce(e.row.nextPossibleStates),Q(!0)}},a.createElement($.Z,{fontSize:"small"}))))))},width:150}];return a.createElement(a.Fragment,null,a.createElement(H.Z,{className:Ee.table},a.createElement(x(),{loading:g,columnBuffer:2,onPageSizeChange:function(e){I(e.pageSize),P(1)},onPageChange:function(e){P(e.page+1)},rows:E,pagination:!0,paginationMode:"server",page:N-1,pageSize:C,getRowId:function(e){return e.voucherId},columns:Ie,rowCount:y,localeText:{toolbarColumns:O("columns"),toolbarFilters:O("filters"),toolbarDensity:O("density"),toolbarExport:O("export"),columnsPanelTextFieldLabel:O("findColumn"),columnsPanelTextFieldPlaceholder:O("columnTitle"),columnsPanelShowAllButton:O("showAll"),columnsPanelHideAllButton:O("hideAll"),filterPanelColumns:O("columns"),filterPanelInputPlaceholder:O("filterValues"),filterPanelInputLabel:O("value"),filterOperatorContains:O("contains"),filterOperatorEquals:O("equals"),filterOperatorStartsWith:O("startsWith"),filterOperatorEndsWith:O("endsWith"),toolbarExportCSV:O("downloadAsCSV")}})),a.createElement(l.SeamlessDialog,{open:B,onClose:Ze,className:Ee.dialogWrapper,maxWidth:"lg"},a.createElement(U.Z,{style:{textAlign:"center"}},O(Y?"voucherStateChangeRequest":"extendExpiryDays")),a.createElement(L.Z,null,Y?a.createElement(d.Z,{container:!0,direction:"column",spacing:3},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessDropDown,{helperText:null===(s=Ce.updateValues)||void 0===s?void 0:s.voucherStatusId,className:Ee.element,fullWidth:!0,required:!0,name:"updateValues.voucherStatusId",options:[{key:" ",value:" "}].concat((0,S.Z)(oe.map((function(e){return{value:e.id,key:e.name}})))),value:null===(u=Ne.updateValues)||void 0===u?void 0:u.voucherStatusId,onChange:we,onBlur:Te,label:O("voucherStateCode")}))):a.createElement(d.Z,{container:!0,direction:"column",spacing:3},a.createElement(d.Z,{item:!0,xs:12},a.createElement(p.Z,{className:Ee.fieldHeading},O("currentExpiryDate"))),a.createElement(d.Z,{item:!0,xs:12},a.createElement(p.Z,{className:Ee.fieldValue},de&&(0,R.Z)(new Date(de.replace(/-/g,"/")),"MM/dd/yyyy")),a.createElement(K.Z,null)),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{fullWidth:!0,required:!0,error:!(null===(t=Ce.updateValues)||void 0===t||!t.expiryDays),helperText:null===(n=Ce.updateValues)||void 0===n?void 0:n.expiryDays,className:Ee.element,name:"updateValues.expiryDays",value:null==Ne||null===(c=Ne.updateValues)||void 0===c?void 0:c.expiryDays,onChange:we,onBlur:Te,label:O("extendExpiryBy")})))),a.createElement(z.Z,null,a.createElement(m.Z,{onClick:function(e){xe()},className:Ee.button,variant:"contained",color:"secondary"},O("save")),a.createElement(m.Z,{onClick:function(e){Ze(),Re(e)},className:Ee.button,variant:"contained",color:"secondary"},O("closeButton")))))};var aa=n(89587),ra=(0,s.Z)((function(e){return(0,u.Z)({buttonLeft:{margin:e.spacing(1),marginTop:e.spacing(3),marginLeft:0},buttonRight:{margin:e.spacing(1),marginTop:e.spacing(3),marginRight:0},element:{marginTop:e.spacing(1),marginBottom:e.spacing(1),marginRight:e.spacing(1),"& .MuiFormLabel-root":{fontSize:12}},dropdown:{marginTop:e.spacing(1),marginBottom:e.spacing(1),marginRight:e.spacing(1),"& .MuiSelect-select.MuiSelect-select":{padding:"11px 24px 11px 11px"},"& .MuiInput-underline:before":{borderBottom:"2px solid rgba(0, 0, 0, 0.42)"}},fieldName:{margin:e.spacing(1),width:"100%",marginTop:e.spacing(1)},dialogWrapper:{"& .MuiDialog-container":{width:"100%"},"& .MuiDialogContent-root":{marginTop:e.spacing(1),marginBottom:e.spacing(1),marginRight:"auto",marginLeft:"auto"}},fieldHeading:{fontWeight:"bold",fontSize:14,marginRight:e.spacing(1),marginBottom:e.spacing(-1.5)},fieldValue:{fontSize:14},dialogElement:{margin:e.spacing(1),width:"100%"},radioContainer:{"&.MuiGrid-root":{height:"100%"}},dateField:{margin:e.spacing(1),width:"100%"},fieldContainer:{paddingRight:e.spacing(3)}})}));const la=function(){var e,t,n,r,s,u,Z,b,N,C,x,R=(0,i.useTranslation)().t,P=ra(),D=a.useState(!1),k=(0,o.Z)(D,2),V=k[0],B=k[1],A=a.useState([]),F=(0,o.Z)(A,2),M=F[0],_=F[1],q=w(),W=q.showErrorMessage,K=q.showSuccessMessage,Y=a.useState(0),G=(0,o.Z)(Y,2),X=G[0],$=G[1],J=a.useState(0),ee=(0,o.Z)(J,2),te=ee[0],ae=ee[1],re=a.useState(!1),le=(0,o.Z)(re,2),ie=le[0],oe=le[1],ce=ne()().checkPermission,se=a.useState(!1),ue=(0,o.Z)(se,2),me=ue[0],de=ue[1],pe=a.useState(!1),fe=(0,o.Z)(pe,2),he=fe[0],ge=fe[1],Ee=a.useState([]),ve=(0,o.Z)(Ee,2),Ze=ve[0],be=ve[1],Se=a.useState("expiryDate"),ye=(0,o.Z)(Se,2),Ne=ye[0],Ce=ye[1],we=window.config.openCalendarWith||"year",Te=window.config.voucher.stateList||[],xe=(null===(e=window)||void 0===e||null===(t=e.config)||void 0===t||null===(n=t.voucher)||void 0===n?void 0:n.recordsPerPage)||10,Re=(0,T.useServerTable)({page:1,perPage:xe,order:"asc",orderBy:"",filter:{}}),Ie=a.useCallback((function(e){var t,n;B(!0);var a={rangeIdentifier:{type:"SERIAL",start:null===(t=e.rangeIdentifier)||void 0===t?void 0:t.start,end:null===(n=e.rangeIdentifier)||void 0===n?void 0:n.end},state:e.state,page:{number:Re.page,size:Re.perPage}};O(a).then((function(e){var t,n,a,r,l;(null===(t=e.vouchers)||void 0===t?void 0:t.length)>0?(_(e.vouchers),"RESERVED"===(null==e||null===(n=e.vouchers[0])||void 0===n||null===(a=n.currentVoucherState)||void 0===a?void 0:a.name)?be(null==e||null===(r=e.vouchers[0])||void 0===r?void 0:r.nextPossibleStates.filter((function(e){return"PRINT"!==e.name}))):be(null==e||null===(l=e.vouchers[0])||void 0===l?void 0:l.nextPossibleStates),$(e.pageInfo.totalRecords)):(W(e.resultDescription),_([]))})).catch((function(e){return W(e)})).finally((function(){return B(!1)}))}),[te,Re.page,Re.perPage]);a.useEffect((function(){Be.rangeIdentifier.start&&Ie(Be)}),[Ie]);var De=function(e){Ce(e.target.value),ge(!1)},Oe=h.Ry().shape({rangeIdentifier:h.Ry().shape({start:h.Z_().required(R("valueIsRequired")).matches(/^[a-zA-Z0-9]+$/,R("alphaNumeric")),end:h.Z_().required(R("valueIsRequired")).matches(/^[a-zA-Z0-9]+$/,R("alphaNumeric"))}).nullable()}),ke=(0,f.TA)({initialValues:{identifier:{type:"SERIAL",value:""},state:"",showhrn:!0,rangeIdentifier:{type:"SERIAL",start:"",end:""},page:{number:1,size:10},updateValues:{expiryDate:"",expiryDays:"",voucherStatusId:"",ownerId:""}},onSubmit:function(e){return Ie(e)},validationSchema:Oe,validateOnChange:!1,validateOnBlur:!1,enableReinitialize:!0}),Ve=function(){var e=(0,Xn.Z)(Jn().mark((function e(t,n,a,r){return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oe(!0),e.next=3,j(t,n,a,r).then((function(e){var t,r,l,i;e.resultCode?W(e.resultDescription):(t=e,r="".concat(n,"_").concat(a,".csv"),l=URL.createObjectURL(t),(i=document.createElement("a")).href=l,i.download=r||"download",i.click())})).finally((function(){return oe(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),Be=ke.values,Ae=ke.errors,Fe=ke.handleChange,je=ke.handleBlur,Me=ke.handleSubmit,_e=ke.handleReset,qe=ke.setFieldValue;return a.useEffect((function(){var e;null!==(e=Be.updateValues)&&void 0!==e&&e.voucherStatusId&&ge(!1)}),[null===(r=Be.updateValues)||void 0===r?void 0:r.voucherStatusId]),a.createElement(a.Fragment,null,a.createElement(d.Z,{container:!0,spacing:3},a.createElement(d.Z,{container:!0,spacing:3},a.createElement(d.Z,{item:!0,xs:12},a.createElement(p.Z,{variant:"subtitle1",color:"primary",className:P.fieldName},R("serialRange")))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{className:(0,c.default)(P.element),fullWidth:!0,required:!0,name:"rangeIdentifier.start",value:Be.rangeIdentifier.start,error:!(null===(s=Ae.rangeIdentifier)||void 0===s||!s.start),helperText:null===(u=Ae.rangeIdentifier)||void 0===u?void 0:u.start,onChange:Fe,label:R("startSerialRange")})),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{className:(0,c.default)(P.element),fullWidth:!0,required:!0,name:"rangeIdentifier.end",value:Be.rangeIdentifier.end,error:!(null===(Z=Ae.rangeIdentifier)||void 0===Z||!Z.end),helperText:null===(b=Ae.rangeIdentifier)||void 0===b?void 0:b.end,onChange:Fe,label:R("endSerialRange")})),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessDropDown,{className:P.dropdown,fullWidth:!0,name:"state",label:R("selectState"),options:[{value:" ",key:""}].concat((0,S.Z)(Te.map((function(e){return{value:e,key:e}})))),onChange:function(e){return Fe(e)},value:Be.state}))),a.createElement(d.Z,{item:!0,xs:12},a.createElement(m.Z,{className:P.buttonLeft,color:"primary",variant:"contained",onClick:function(e){return Me()}},R("search")),a.createElement(m.Z,{className:P.buttonRight,color:"primary",variant:"outlined",onClick:function(e){_e(e),_([]),Re.onPageSizeChange(10),Re.onPageChange(1)}},R("reset"))),a.createElement(H.Z,{display:"flex",flexDirection:"row",justifyContent:"flex-end"},ce("UPDATE_VOUCHERS")&&a.createElement(m.Z,{className:P.buttonLeft,variant:"contained",disabled:!M.length,color:"primary",onClick:function(){return de(!0)},startIcon:ie?a.createElement(Pe.Z,{size:20}):a.createElement(aa.Z,null)},R("update")),ce("DOWNLOAD_VOUCHERS")&&a.createElement(m.Z,{className:P.buttonRight,variant:"contained",disabled:!(M.length>0&&!ie),color:"primary",onClick:function(){return Ve(X,Be.rangeIdentifier.start,Be.rangeIdentifier.end,Be.state)},startIcon:ie?a.createElement(Pe.Z,{size:20}):a.createElement(Q.Z,null)},R("download"))),a.createElement(na,(0,y.Z)({loading:V,searchData:M,serialRangeSearchPage:!0,singleVoucherSearchPage:!1,viewPage:!1,count:X,update:te,setUpdate:ae},Re)),a.createElement(l.SeamlessDialog,{open:me,onClose:function(){return de(!1)},className:P.dialogWrapper,maxWidth:"lg"},a.createElement(U.Z,{style:{textAlign:"center"}},R("voucherRangeUpdate")),a.createElement(L.Z,null,a.createElement(d.Z,{container:!0},a.createElement(d.Z,{item:!0},a.createElement(d.Z,{container:!0,direction:"column",justify:"space-evenly",className:P.radioContainer},a.createElement(On.Z,{checked:"expiryDate"===Ne,onChange:De,value:"expiryDate"}),a.createElement(On.Z,{checked:"stateChange"===Ne,onChange:De,value:"stateChange"}))),a.createElement(d.Z,{item:!0},a.createElement(d.Z,{item:!0,xs:12,sm:12,className:P.fieldContainer},a.createElement(g.M,{utils:v.Z},a.createElement(E.e,{disabled:!("expiryDate"===Ne),className:P.dateField,views:["year","month","date"],openTo:we,autoOk:!0,error:"expiryDate"===Ne&&he,variant:"inline",format:"yyyy/MM/dd",margin:"normal",label:R("expiryDate"),name:"updateValues.expiryDate",value:(null==Be||null===(N=Be.updateValues)||void 0===N?void 0:N.expiryDate)||null,onChange:function(e,t){qe("updateValues.expiryDate",t),ge(!1)},KeyboardButtonProps:{"aria-label":"change date"}}))),a.createElement(d.Z,{item:!0,xs:12,sm:12,className:P.fieldContainer},a.createElement(l.SeamlessDropDown,{disabled:!("stateChange"===Ne),helperText:null===(C=Ae.updateValues)||void 0===C?void 0:C.voucherStatusId,className:P.dialogElement,fullWidth:!0,required:"stateChange"===Ne,name:"updateValues.voucherStatusId",error:"stateChange"===Ne&&he,options:[{key:" ",value:" "}].concat((0,S.Z)(Ze.map((function(e){return{value:e.id,key:e.name}})))),value:null===(x=Be.updateValues)||void 0===x?void 0:x.voucherStatusId,onChange:Fe,onBlur:je,label:R("voucherStateCode")}))))),a.createElement(z.Z,null,a.createElement(m.Z,{onClick:function(){var e,t,n,a,r,l,i,o;B(!0);var c={identifier:{rangeIdentifier:{type:"SERIAL",start:null===(e=Be.rangeIdentifier)||void 0===e?void 0:e.start,end:null===(t=Be.rangeIdentifier)||void 0===t?void 0:t.end}},updateValues:{expiryDate:"expiryDate"===Ne?(null===(n=Be.updateValues)||void 0===n?void 0:n.expiryDate).split("/").join("-")+"T23:59:59.000Z":"",voucherStatusId:"stateChange"===Ne?null==Be||null===(a=Be.updateValues)||void 0===a?void 0:a.voucherStatusId:"",ownerId:""}};null!==(r=Be.updateValues)&&void 0!==r&&null!==(l=r.expiryDate)&&void 0!==l&&l.length||null!==(i=Be.updateValues)&&void 0!==i&&i.voucherStatusId&&" "!==(null===(o=Be.updateValues)||void 0===o?void 0:o.voucherStatusId)?function(e){return I("/vms/v1/voucher/attributes",{method:"PATCH",body:e})}(c).then((function(e){0===e.resultCode?K(e.resultDescription):W(e.resultDescription)})).catch((function(e){return W(e)})).finally((function(){B(!1),de(!1)})):(ge(!0),B(!1))},className:P.buttonLeft,variant:"contained",color:"secondary"},R("update")),a.createElement(m.Z,{onClick:function(e){de(!1),ge(!1)},className:P.buttonRight,variant:"outlined",color:"secondary"},R("closeButton")))))};var ia=(0,s.Z)((function(e){return(0,u.Z)({button:{margin:e.spacing(1),marginTop:e.spacing(3.5)},element:{marginTop:e.spacing(1),marginBottom:e.spacing(1),marginRight:e.spacing(1)},fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{fontSize:14},rowSpacing:{marginRight:e.spacing(1)},editbutton:{margin:e.spacing(.5)}})}));const oa=function(e){var t=e.data,n=e.onFormSubmit,r=e.setVouchersOnDemand,o=ia(),c=(0,i.useTranslation)().t,s=h.Ry().shape({subscriberMSISDN:h.Z_().typeError(c("mustBeNumber")).matches(/^[0-9]+$/,c("mustBeNumber")).required(c("valueIsRequired")),productSKU:h.Z_().nullable(),denomination:h.Rx().integer().min(1).nullable()}),u=(0,f.TA)({initialValues:t,onSubmit:function(e){return n&&n(e)},validationSchema:s,enableReinitialize:!0}),p=u.values,g=u.errors,E=u.handleChange,v=(u.handleBlur,u.handleSubmit),Z=u.handleReset;return a.createElement(a.Fragment,null,a.createElement(d.Z,{container:!0,spacing:2},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{className:o.element,fullWidth:!0,required:!0,name:"subscriberMSISDN",error:!!g.subscriberMSISDN,helperText:g.subscriberMSISDN,value:p.subscriberMSISDN,onChange:E,label:c("subscriberMsisdn"),onKeyPress:function(e){return"Enter"===e.key&&v()}})),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(G.ZP,{title:c("resendHrnHelpIcon")},a.createElement(Cn.Z,{style:{marginTop:45,width:18,height:18}})))),a.createElement(Ke,{showDigitalProduct:!1,requireProductVoucherTypeMapping:!0},(function(e){var t=e.skus;return e.products,e.loading,a.createElement(a.Fragment,null,a.createElement(d.Z,{container:!0,spacing:3},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessDropDown,{className:o.element,fullWidth:!0,name:"productSKU",label:c("productSKU"),options:[{value:" ",key:""}].concat((0,S.Z)(t.map((function(e){return{value:e.productSKU,key:e.productSKU}})))),onChange:function(e){t.map((function(e){e.variablePrice?p.denomination="":p.denomination=p.denomination})),E(e)},value:p.productSKU,error:!!g.productSKU,helperText:g.productSKU})),t.map((function(e){if(e.productSKU===p.productSKU)return a.createElement(a.Fragment,null,e.variablePrice?a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{className:o.element,fullWidth:!0,name:"denomination",label:c("denomination"),onChange:E,value:p.denomination,error:!!g.denomination,helperText:g.denomination})):a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{className:o.element,fullWidth:!0,label:c("denomination"),value:p.denomination=e.unitPrice,disabled:!0})))}))))})),a.createElement(d.Z,{item:!0,xs:4},a.createElement(m.Z,{className:o.button,color:"primary",variant:"contained",onClick:function(e){v()}},c("searchButton")),a.createElement(m.Z,{onClick:function(e){r([]),Z(e)},className:o.button,color:"primary",variant:"outlined"},c("reset"))))};var ca=n(69001),sa=(0,s.Z)((function(e){return(0,u.Z)({table:{height:400,width:"100%"}})}));const ua=function(e){var t,n,r,l=e.loading,c=e.vouchersOnDemand,s=(0,i.useTranslation)().t,u=a.useState(!1),d=(0,o.Z)(u,2),p=(d[0],d[1]),f=w(),h=f.showErrorMessage,g=f.showSuccessMessage,E=sa(),v=(null===(t=window)||void 0===t||null===(n=t.config)||void 0===n||null===(r=n.voucher)||void 0===r?void 0:r.recordsPerPage)||10,Z=[{field:"serialNo",headerName:s("serialNumber"),sortable:!0,width:250},{field:"productSKU",headerName:s("productSKU"),sortable:!0,width:250},{field:"denomination",headerName:s("denomination"),sortable:!0,width:200},{field:"purchasedTime",headerName:s("purchasedTime"),sortable:!0,width:250},{field:"actions",headerName:s("actions"),sortable:!1,width:200,renderCell:function(e){return a.createElement(a.Fragment,null,"REDEEMED"!==e.row.currentState?a.createElement("div",null,a.createElement(W.Z,{size:"small",color:"primary"},a.createElement(G.ZP,{title:s("resend")},a.createElement(m.Z,{onClick:function(){return t=e.row.ersReferenceNo,p(!0),void function(e){return I("/vms/v1/vodTransactions/".concat(e,"/notify"),{method:"POST"})}(t).then((function(e){0===e.resultCode?g(e.resultDescription):h(e.resultDescription)})).catch((function(e){return h(e)})).finally((function(){return p(!1)}));var t}},a.createElement(ca.Z,{fontSize:"small"}))))):null)}}];return a.createElement(a.Fragment,null,a.createElement(H.Z,{className:E.table},a.createElement(x(),{loading:l,columnBuffer:3,rows:c,getRowId:function(e){return e.ersReferenceNo},columns:Z,pageSize:v,localeText:{toolbarColumns:s("columns"),toolbarFilters:s("filters"),toolbarDensity:s("density"),toolbarExport:s("export"),columnsPanelTextFieldLabel:s("findColumn"),columnsPanelTextFieldPlaceholder:s("columnTitle"),columnsPanelShowAllButton:s("showAll"),columnsPanelHideAllButton:s("hideAll"),filterPanelColumns:s("columns"),filterPanelInputPlaceholder:s("filterValues"),filterPanelInputLabel:s("value"),filterOperatorContains:s("contains"),filterOperatorEquals:s("equals"),filterOperatorStartsWith:s("startsWith"),filterOperatorEndsWith:s("endsWith"),toolbarExportCSV:s("downloadAsCSV")}})))},ma=function(){var e=(0,i.useTranslation)().t;return a.createElement(l.SeamlessContainer,{title:e("searchVoucherPageTitle"),description:e("searchVoucherPageDescription")},a.createElement(Te,{userFlag:!1}))};var da=(0,s.Z)((function(e){return(0,u.Z)({fieldHeading:{fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{fontSize:14},rowSpacing:{marginBottom:e.spacing(.5)},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)}})}));const pa=function(){var e,t,n,c,s,u,m,f=a.useState(!1),h=(0,o.Z)(f,2),g=h[0],E=h[1],v=w().showErrorMessage,Z=(0,i.useTranslation)().t,b=da(),S=(0,r.useParams)().serialRange,N=a.useState(0),C=(0,o.Z)(N,2),x=C[0],R=C[1],P=a.useState([]),I=(0,o.Z)(P,2),D=I[0],k=I[1],V=a.useState(0),B=(0,o.Z)(V,2),A=B[0],F=B[1],j=(null===(e=window)||void 0===e||null===(t=e.config)||void 0===t||null===(n=t.voucher)||void 0===n?void 0:n.recordsPerPage)||10,M=(0,T.useServerTable)({page:1,perPage:j,order:"asc",orderBy:"",filter:{}}),_=S.split("-");return a.useEffect((function(){E(!0);var e={rangeIdentifier:{type:"SERIAL",start:_[0],end:_[1]},page:{number:M.page,size:M.perPage}};O(e).then((function(e){var t;(null===(t=e.vouchers)||void 0===t?void 0:t.length)>0?(k(e.vouchers),R(e.pageInfo.totalRecords)):(v(e.resultDescription),k([]))})).catch((function(e){return v(e)})).finally((function(){return E(!1)}))}),[A,M.page,M.perPage]),a.createElement(l.SeamlessContainer,{title:Z("batchVouchersPageTitle"),description:Z("batchVouchersPageDescription")},g?null:a.createElement(d.Z,{container:!0},a.createElement(d.Z,{container:!0,spacing:3,className:b.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:b.fieldHeading},Z("redemptionNature"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:b.fieldValue},null===(c=D[0])||void 0===c?void 0:c.redemptionNature)),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:b.fieldHeading},Z("batchCreatedOn"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:b.fieldValue},null===(s=D[0])||void 0===s?void 0:s.createdOn))),a.createElement(d.Z,{container:!0,spacing:3,className:b.rowSpacing},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:b.fieldHeading},Z("currency"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:b.fieldValue},null===(u=D[0])||void 0===u?void 0:u.currency)),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:b.fieldHeading},Z("productSKU"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:b.fieldValue},null===(m=D[0])||void 0===m?void 0:m.productSKU)))),a.createElement(na,(0,y.Z)({loading:g,searchData:D,serialRangeSearchPage:!1,singleVoucherSearchPage:!1,viewPage:!0,count:x,update:A,setUpdate:F},M)))},fa=function(){var e=w().showErrorMessage,t=(0,i.useTranslation)().t,n=(0,r.useParams)().serialNumber;return a.createElement(l.SeamlessContainer,{title:t("viewSingleVoucherPageTitle"),description:t("viewSingleVoucherPageDescription")},a.createElement("div",{style:{marginTop:20}},a.createElement(wn,{serialNumber:n},(function(t){var n=t.voucherDetails,r=t.loading;return a.createElement(a.Fragment,null,null!=n&&n.resultCode?e(n.resultDescription):a.createElement(De,{voucherDetails:n,loading:r}))}))))},ha=function(){var e=(0,r.useRouteMatch)().path,t=ne()().AccessControlled;return a.createElement(r.Switch,null,a.createElement(r.Route,{path:e+"/view-batches/:serialRange/view/:serialNumber"},a.createElement(t,{feature:me},a.createElement(fa,null))),a.createElement(r.Route,{path:e+"/view-batches/:serialRange"},a.createElement(t,{feature:ue},a.createElement(pa,null))),a.createElement(r.Route,null,a.createElement(t,{feature:"SEARCHVOUCHER"},a.createElement(ma,null))))},ga=function(){var e=(0,i.useTranslation)().t;return a.createElement(l.SeamlessContainer,{title:e("searchVoucherPageTitle"),description:e("searchVoucherPageDescription")},a.createElement(Te,{userFlag:!0}))},Ea=function(){var e=(0,r.useRouteMatch)().path,t=ne()().AccessControlled;return a.createElement(r.Switch,null,a.createElement(r.Route,{path:e+"/view-batches/:serialRange/view/:serialNumber"},a.createElement(t,{feature:me},a.createElement(fa,null))),a.createElement(r.Route,{path:e+"/view-batches/:serialRange"},a.createElement(t,{feature:ue},a.createElement(pa,null))),a.createElement(r.Route,null,a.createElement(t,{feature:"SEARCHBULKVOUCHER"},a.createElement(ga,null))))},va=function(){var e=(0,i.useTranslation)().t;return a.createElement(l.SeamlessContainer,{title:e("fetchVoucherPageTitle"),description:e("fetchVoucherPageDescription")},a.createElement(Fe,{isAdmin:!1,showHRN:!0}))},Za=function(){var e=ne()().AccessControlled;return a.createElement(r.Switch,null,a.createElement(r.Route,null,a.createElement(e,{feature:"FETCHVOUCHER"},a.createElement(va,null))))},ba=function(){var e=(0,i.useTranslation)().t;return a.createElement(l.SeamlessContainer,{title:e("singleVoucherSearchPageTitle"),description:e("singleVoucherSearchPageDescription")},a.createElement(Fe,{isAdmin:!0,showHRN:!1}))},Sa=function(){var e=ne()().AccessControlled,t=(0,r.useRouteMatch)().path;return a.createElement(r.Switch,null,a.createElement(r.Route,{path:t+"/view/:serialNumber"},a.createElement(e,{feature:me},a.createElement(fa,null))),a.createElement(r.Route,null,a.createElement(e,{feature:"SEARCHBYSERIAL"},a.createElement(ba,null))))};var ya={productSKU:" ",sourceWallet:" ",count:0,denomination:"",currency:"",voucherState:"",showPin:null,subscriberMsisdn:null};const Na=function(){var e=(0,i.useTranslation)().t;return a.createElement(l.SeamlessContainer,{title:e("singleVoucherSalePage"),description:e("singleVoucherSalePageDescription")},a.createElement("div",{style:{height:"100%"}},a.createElement(Je,{data:ya})))},Ca=function(){var e=ne()().AccessControlled;return a.createElement(r.Switch,null,a.createElement(r.Route,null,a.createElement(e,{feature:"SALE"},a.createElement(Na,null))))};var wa={voucherType:"",description:"",hrnPrefix:"",noOfHrn:1,redemptionNature:" "};const Ta=function(){var e=(0,i.useTranslation)().t,t=a.useState(!1),n=(0,o.Z)(t,2),c=(n[0],n[1]),s=w(),u=s.showErrorMessage,m=s.showSuccessMessage,d=(s.showWarningMessage,(0,r.useHistory)()),p=a.useCallback((function(e){c(!0),function(e){return I("/vms/v1/voucherType",{method:"POST",body:e})}(e).then((function(e){0===e.resultCode?(m(e.resultDescription||"Voucher type added successfully"),d.push("/home/voucher/voucher-type")):u(e.resultDescription)})).catch((function(e){return u(e)})).finally((function(){return c(!1)}))}),[]);return a.createElement(l.SeamlessContainer,{title:e("voucherType"),description:e("createVoucherTypePageDescription")},a.createElement("div",{style:{height:600,width:"100%"}},a.createElement(tn,{data:wa,onFormSubmit:function(e){return p(e)}})))},xa=function(){var e=(0,i.useTranslation)().t,t=ne()().checkPermission;return a.createElement(l.SeamlessContainer,{title:e("voucherType"),description:e("fetchVoucherTypePageDescription")},t(ae)&&a.createElement(H.Z,{display:"flex",flexDirection:"row",justifyContent:"flex-end"},a.createElement(Jt,null)),a.createElement("div",null,a.createElement(rt,null)))},Ra=function(){var e=(0,r.useRouteMatch)().path,t=ne()().AccessControlled;return a.createElement(r.Switch,null,a.createElement(r.Route,{path:e+"/create"},a.createElement(t,{feature:ae},a.createElement(Ta,null))),a.createElement(r.Route,null,a.createElement(t,{feature:"VOUCHERTYPE"},a.createElement(xa,null))))};var Pa={voucherSubtype:"",voucherType:"",hrnLength:"",serialPrefix:"",startSerial:"",maxOrderThreshold:""};const Ia=function(){var e=(0,i.useTranslation)().t,t=a.useState(!1),n=(0,o.Z)(t,2),c=(n[0],n[1]),s=w(),u=s.showErrorMessage,m=s.showSuccessMessage,d=(0,r.useHistory)(),p=a.useCallback((function(e){c(!0),function(e){return I("/vms/v1/voucherSubType",{method:"POST",body:e})}(e).then((function(e){0===e.resultCode?(m(e.resultDescription),d.push("/home/voucher/voucher-subtype")):u(e.resultDescription)})).catch((function(e){return u(e.resultDescription)})).finally((function(){return c(!1)}))}),[]);return a.createElement(l.SeamlessContainer,{title:e("voucherSubTypeMapping"),description:e("voucherSubTypeMappingDescription")},a.createElement("div",{style:{height:600,width:"100%"}},a.createElement(Et,{data:Pa,onFormSubmit:function(e){return p(e)}})))},Da=function(){var e=(0,i.useTranslation)().t,t=ne()().checkPermission;return a.createElement(l.SeamlessContainer,{title:e("voucherSubType"),description:e("fetchVoucherSubTypePageDescription")},t(re)&&a.createElement(H.Z,{display:"flex",flexDirection:"row",justifyContent:"flex-end"},a.createElement(l.SeamlessButton,{component:r.Link,to:"/home/voucher/voucher-subtype/create",variant:"contained",color:"primary",endIcon:a.createElement(vt.Z,null)},e("voucherSubTypeMapping"))),a.createElement(ct,null))},Oa=function(){var e=(0,r.useRouteMatch)().path,t=ne()().AccessControlled;return a.createElement(r.Switch,null,a.createElement(r.Route,{path:e+"/create"},a.createElement(t,{feature:re},a.createElement(Ia,null))),a.createElement(r.Route,null,a.createElement(t,{feature:"VOUCHERSUBTYPE"},a.createElement(Da,null))))},ka=function(){var e=(0,i.useTranslation)().t;return a.createElement(l.SeamlessContainer,{title:e("redeemVouchersPageTitle"),description:e("redeemVouchersPageDescription")},a.createElement(ft,null))},Va=function(){var e=ne()().AccessControlled;return a.createElement(r.Switch,null,a.createElement(r.Route,null,a.createElement(e,{feature:"MANUALRECHARGE"},a.createElement(ka,null))))};var Ba=(0,We.makeStyles)((function(e){return(0,We.createStyles)({element:{margin:e.spacing(1),marginBottom:e.spacing(6),width:400}})}));const Aa=function(){var e=(0,i.useTranslation)().t,t=a.useState(),n=(0,o.Z)(t,2),r=n[0],l=n[1],c=Ba();return a.createElement(a.Fragment,null,a.createElement(ee.Autocomplete,{className:c.element,options:[{value:"Pending order requests"},{value:"Expiry days extension request"},{value:"Voucher state request"},{value:"Bulk order return request"}],getOptionLabel:function(e){return e.value},disableClearable:!0,onChange:function(e,t){l(null==t?void 0:t.value)},renderInput:function(t){return a.createElement(Y.Z,(0,y.Z)({},t,{variant:"standard",label:e("selectRequest")}))}}),a.createElement("div",null,"Pending order requests"===r?a.createElement(ln,null):null),a.createElement("div",null,"Expiry days extension request"===r?a.createElement($t,{updateType:"EXTEND_EXPIRY"}):null),a.createElement("div",null,"Voucher state request"===r?a.createElement($t,{updateType:"STATE_CHANGE"}):null),a.createElement("div",null,"Bulk order return request"===r?a.createElement(Un,null):null))},Fa=function(){var e=ne()().AccessControlled;return a.createElement(r.Switch,null,a.createElement(r.Route,null,a.createElement(e,{feature:"APPROVAL"},a.createElement(Aa,null))))},ja=function(){var e=(0,i.useTranslation)().t;return a.createElement(l.SeamlessContainer,{title:e("resellerInfoPageTitle"),description:e("resellerInfoPageDescription")},a.createElement(Zn,null))},Ma=function(){var e=ne()().AccessControlled;return a.createElement(r.Switch,null,a.createElement(r.Route,null,a.createElement(e,{feature:"RESELLERINFO"},a.createElement(ja,null))))},_a=function(){var e=(0,i.useTranslation)().t;return a.createElement(l.SeamlessContainer,{title:e("resellerInfoPageTitle"),description:e("resellerInfoPageDescription")},a.createElement(Sn,null))},qa=function(){var e=ne()().AccessControlled;return a.createElement(r.Switch,null,a.createElement(r.Route,null,a.createElement(e,{feature:"MYACCOUNT"},a.createElement(_a,null))))};var Ha={productSku:" ",denominationFrom:"",denominationTo:"",voucherType:" ",voucherSubType:" ",expiryDays:"",subscriberServiceTariffPlan:{},redeemTransferFlag:0,servicesAndTariffs:[{service:" ",tariffPlan:""}]};const Wa=function(){var e=a.useState(!1),t=(0,o.Z)(e,2),n=(t[0],t[1]),c=w(),s=c.showErrorMessage,u=c.showSuccessMessage,m=(0,i.useTranslation)().t,d=(0,r.useHistory)(),p=a.useCallback((function(e){n(!0),e.subscriberServiceTariffPlan={},e.servicesAndTariffs&&e.servicesAndTariffs.map((function(t){t.service.trim()&&(e.subscriberServiceTariffPlan[t.service]=t.tariffPlan.trim())})),function(e){return I("/vms/v1/productVoucherTypemapping",{method:"POST",body:e})}({productSku:e.productSku,denominationFrom:e.denominationFrom,denominationTo:e.denominationTo,voucherType:e.voucherType,voucherSubType:e.voucherSubType,expiryDays:e.expiryDays,redeemTransferFlag:e.redeemTransferFlag,subscriberServiceTariffPlan:e.subscriberServiceTariffPlan}).then((function(e){0===e.resultCode?(u(e.resultDescription),d.push("/home/voucher/product-association")):s(e.resultDescription)})).catch((function(e){return s(e)})).finally((function(){n(!1)}))}),[]);return a.createElement(l.SeamlessContainer,{title:m("productAssociationPageTitle"),description:m("productAssociationPageDescription")},a.createElement("div",{style:{height:"100%",width:"100%"}},a.createElement(bt,{data:Ha,edit:!1,onFormSubmit:function(e){return p(e)}})))},za=function(){var e=(0,i.useTranslation)().t,t=ne()().checkPermission;return a.createElement(l.SeamlessContainer,{title:e("fetchProductAssociationPageTitle"),description:e("fetchProductAssociationPageDescription")},t(le)&&a.createElement(H.Z,{display:"flex",flexDirection:"row",justifyContent:"flex-end"},a.createElement(l.SeamlessButton,{component:r.Link,to:"/home/voucher/product-association/create",variant:"contained",color:"primary",endIcon:a.createElement(vt.Z,null)},e("productAssociation"))),a.createElement("div",null,a.createElement(un,null)))},La=function(){var e=a.useState(!1),t=(0,o.Z)(e,2),n=(t[0],t[1]),c=a.useState(!1),s=(0,o.Z)(c,2),u=(s[0],s[1]),m=(0,i.useTranslation)().t,d=(0,r.useParams)(),p=d.id,f=d.productSku,h=d.subtypeName,g=w(),E=g.showErrorMessage,v=g.showSuccessMessage,Z=(0,r.useHistory)(),b=a.useState({}),S=(0,o.Z)(b,2),y=S[0],N=S[1];a.useEffect((function(){n(!0),B(f,h).then((function(e){e.productTypeMappingList.length>0&&e.productTypeMappingList.map((function(e){return e.id===parseInt(p)&&N(e)}))})).catch((function(e){return E(e)})).finally((function(){return n(!1)}))}),[]);var C,T,x,R=a.useCallback((function(e,t){u(!0);var n={};e.servicesAndTariffs&&e.servicesAndTariffs.forEach((function(e){var t=e.service;e.service.trim()&&(n["".concat(t)]=e.tariffPlan.trim())})),function(e,t){return I("/vms/v1/productVoucherTypemapping/".concat(t,"/update"),{method:"PATCH",body:e})}({denominationFrom:e.denominationFrom,denominationTo:e.denominationTo,expiryDays:e.expiryDays,subscriberServiceTariffPlan:n,redeemTransferFlag:e.redeemTransferFlag},t).then((function(e){0===e.resultCode?(v(e.resultDescription),Z.push("/home/voucher/product-association")):E(e.resultDescription)})).catch((function(e){return E(e)})).finally((function(){e.subscriberServiceTariffPlan={},u(!1)}))}),[]),P={productSku:y.productSku,denominationFrom:y.denominationFrom,denominationTo:y.denominationTo,voucherType:y.voucherType,voucherSubType:y.voucherSubtypeName,expiryDays:y.expiryDays,redeemTransferFlag:y.redeemTransferFlag,subscriberServiceTariffPlan:{}};return y.subscriberServiceTariffPlan&&(P.servicesAndTariffs=(C=y.subscriberServiceTariffPlan,T=Object.entries(C),x=[],T.length>0&&T.map((function(e,t){x.push({service:e[0],tariffPlan:e[1]})})),x)),a.createElement(l.SeamlessContainer,{title:m("productMapping"),description:m("viewProductAssociationPageDescription")},a.createElement("div",{style:{height:"100%",width:"100%"}},a.createElement(bt,{data:P,edit:!0,onFormSubmit:function(e){return R(e,p)}})))},Ua=function(){var e=a.useState(!1),t=(0,o.Z)(e,2),n=t[0],c=t[1],s=w().showErrorMessage,u=(0,i.useTranslation)().t,m=(0,r.useParams)(),d=m.id,p=m.productSku,f=m.subtypeName,h=a.useState({}),g=(0,o.Z)(h,2),E=g[0],v=g[1];return a.useEffect((function(){c(!0),B(p,f).then((function(e){e.productTypeMappingList.length>0&&e.productTypeMappingList.map((function(e){return e.id===parseInt(d)&&v(e)}))})).catch((function(e){return s(e)})).finally((function(){return c(!1)}))}),[]),a.createElement(l.SeamlessContainer,{title:u("productMapping"),description:u("viewProductAssociationPageDescription")},a.createElement("div",{style:{height:550}},a.createElement(It,{viewData:E,loading:n})))},Ka=function(){var e=(0,r.useRouteMatch)().path,t=ne()().AccessControlled;return a.createElement(r.Switch,null,a.createElement(r.Route,{path:e+"/create"},a.createElement(t,{feature:le},a.createElement(Wa,null))),a.createElement(r.Route,{path:e+"/edit/:productSku/:subtypeName/:id"},a.createElement(t,{feature:oe},a.createElement(La,null))),a.createElement(r.Route,{path:e+"/view/:productSku/:subtypeName/:id"},a.createElement(t,{feature:ie},a.createElement(Ua,null))),a.createElement(r.Route,null,a.createElement(t,{feature:"PRODUCTASSOCIATION"},a.createElement(za,null))))};var Ya={printerCode:"",printerHouseName:"",address:"",emailAddress:"",ipAddress:"",port:"",pgpKey:"",state:" ",extraParams:""};const Ga=function(){var e=a.useState(!1),t=(0,o.Z)(e,2),n=(t[0],t[1]),c=w(),s=c.showErrorMessage,u=c.showSuccessMessage,m=(0,i.useTranslation)().t,d=(0,r.useHistory)(),p=a.useCallback((function(e){n(!0),function(e){return I("/vms/v1/voucher-printer-profile",{method:"POST",body:e})}(e).then((function(e){0===e.resultCode?(u(e.resultDescription),d.push("/home/voucher/printer-profile")):s(e.resultDescription)})).catch((function(e){return s(e)})).finally((function(){return n(!1)}))}),[]);return a.createElement(l.SeamlessContainer,{title:m("printerProfile"),description:m("printerProfileCreationPageDescription")},a.createElement("div",{style:{height:600,width:"100%"}},a.createElement(Ot,{data:Ya,onFormSubmit:function(e){return p(e)}})))},Xa=function(){var e=(0,i.useTranslation)().t,t=ne()().checkPermission;return a.createElement(l.SeamlessContainer,{title:e("printerProfile"),description:e("fetchPrinterProfilesPageDescription")},t(ce)&&a.createElement(H.Z,{display:"flex",flexDirection:"row",justifyContent:"flex-end"},a.createElement(l.SeamlessButton,{component:r.Link,to:"/home/voucher/printer-profile/create",variant:"contained",color:"primary",endIcon:a.createElement(vt.Z,null)},e("printerProfile"))),a.createElement("div",null,a.createElement(Ct,null)))},$a=function(){var e=a.useState(!1),t=(0,o.Z)(e,2),n=t[0],c=t[1],s=w().showErrorMessage,u=(0,i.useTranslation)().t,m=(0,r.useParams)().printerCode,d=a.useState({}),p=(0,o.Z)(d,2),f=p[0],h=p[1];return a.useEffect((function(){c(!0),function(e){return I("/vms/v1/voucher-printer-profile/".concat(e,"/fetch"))}(m).then((function(e){e.voucherPrinterProfileData&&h(e.voucherPrinterProfileData)})).catch((function(e){return s(e)})).finally((function(){return c(!1)}))}),[]),a.createElement(l.SeamlessContainer,{title:u("printerProfile"),description:u("viewPrinterProfilePageDescription")},a.createElement("div",{style:{height:"100%"}},a.createElement(Tt,{loading:n,viewData:f})))},Ja=function(){var e=(0,r.useRouteMatch)().path,t=ne()().AccessControlled;return a.createElement(r.Switch,null,a.createElement(r.Route,{path:e+"/create"},a.createElement(t,{feature:ce},a.createElement(Ga,null))),a.createElement(r.Route,{path:e+"/view/:printerCode"},a.createElement(t,{feature:se},a.createElement($a,null))),a.createElement(r.Route,null,a.createElement(t,{feature:"PRINTERPROFILE"},a.createElement(Xa,null))))};var Qa=(0,s.Z)((function(e){return(0,u.Z)({button:{margin:e.spacing(1),marginTop:e.spacing(3.5)},element:{marginTop:e.spacing(1),marginBottom:e.spacing(1),marginRight:e.spacing(1)}})}));const er=function(){var e=(0,i.useTranslation)().t,t=a.useState(""),n=(0,o.Z)(t,2),c=n[0],s=n[1],u=Qa(),p=ne()().checkPermission,g=h.Ry().shape({orderId:h.Z_().matches(/^[a-zA-Z0-9]+$/,e("alphaNumeric"))}),E=(0,f.TA)({initialValues:{orderId:""},onSubmit:function(e){s(e.orderId)},validationSchema:g,enableReinitialize:!0}),v=E.values,Z=E.errors,b=E.handleChange,S=E.handleSubmit;return a.createElement(l.SeamlessContainer,{title:e("fetchBulkVoucherOrderPageTitle"),description:e("fetchBulkVoucherOrderPageDescription")},a.createElement(d.Z,{container:!0,spacing:3},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(l.SeamlessInput,{fullWidth:!0,error:!!Z.orderId,helperText:Z.orderId,className:u.element,name:"orderId",value:v.orderId,onChange:b,label:e("orderId")})),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(m.Z,{onClick:function(e){return S()},className:u.button,color:"primary",variant:"contained"},e("search")))),p(pe)&&a.createElement(H.Z,{display:"flex",flexDirection:"row",justifyContent:"flex-end"},a.createElement(l.SeamlessButton,{component:r.Link,to:"/home/voucher/bulk-voucher-order/create",variant:"contained",color:"primary",endIcon:a.createElement(vt.Z,null)},e("bulkVoucherOrder"))),a.createElement("div",null,a.createElement(zt,{orderId:c||""})))};function tr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function nr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(n),!0).forEach((function(t){(0,N.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ar=(0,s.Z)((function(e){return(0,u.Z)({fieldHeading:{width:100,marginBottom:e.spacing(1),marginTop:e.spacing(2),fontWeight:"bold",textTransform:"capitalize",fontSize:14},fieldValue:{fontSize:14},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)}})}));const rr=function(){var e=(0,i.useTranslation)().t,t=(0,r.useParams)().orderId,n=ar(),c=a.useState(!1),s=(0,o.Z)(c,2),u=s[0],m=s[1],f=a.useState(0),h=(0,o.Z)(f,2),g=h[0],E=h[1],v=w().showErrorMessage,Z=a.useState([]),b=(0,o.Z)(Z,2),S=b[0],N=b[1],C=a.useState(0),x=(0,o.Z)(C,2),R=x[0],P=x[1],I=a.useState({filtered:!1,filters:{}}),D=(0,o.Z)(I,2),O=D[0],k=D[1],V=(0,T.useServerTable)({page:1,perPage:10,order:"asc",orderBy:"",filter:{}}),B=function(e){F(e).then((function(e){0===e.resultCode?e.orders?(P(e.pagingInfo.totalRecords),N(e.orders)):N([]):0!==e.resultCode&&(v(e.resultDescription),N([]))})).catch((function(e){return v(e.resultDescription)})).finally((function(){m(!1)}))};a.useEffect((function(){m(!0);var e={orderId:t,page:{number:V.page,size:V.perPage}};if(Object.values(O.filters).length){var n=O.filters,a=nr(nr({orderId:t},n),{},{page:{number:V.page,size:V.perPage}});B(a)}else B(e)}),[V.page,V.perPage,O]);var A=a.useCallback((function(e){var t,n,a=(null===(t=e.filterModel.items[0])||void 0===t?void 0:t.value)||"",r=(null===(n=e.filterModel.items[0])||void 0===n?void 0:n.columnField)||"",l={};a?("batchVoucherState"===r?l.voucherState=a.toUpperCase():l[r]=a,setTimeout((function(){k({filtered:!0,filters:l})}),800)):Object.values(O.filters).length&&k({filtered:!0,filters:{}})}),[O]);return S.map((function(e,t){return e.id=t})),a.createElement(l.SeamlessContainer,{title:e("viewBatchesTitle"),description:e("viewBatchesDescription")},a.createElement(d.Z,{container:!0},a.createElement(d.Z,{spacing:3},a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:n.fieldHeading},e("orderId"))),a.createElement(d.Z,{item:!0,xs:12,sm:3},a.createElement(p.Z,{className:n.fieldValue},t)))),a.createElement(K.Z,{style:{width:200}}),a.createElement("div",{style:{height:"100%"}},a.createElement(ye,(0,y.Z)({userFlag:!1,loading:u,printVouchersPage:!1,vouchers:S,count:R,dateChange:g,showOrderId:!1,setDateChange:E,onFilterModelChange:A},V)),a.createElement(d.Z,{container:!0,spacing:3},a.createElement(l.SeamlessButton,{component:r.Link,to:"/home/voucher/bulk-voucher-order",variant:"contained",color:"primary",className:n.button},e("backButton")))))},lr=function(){var e=a.useState(!1),t=(0,o.Z)(e,2),n=(t[0],t[1]),c=w(),s=c.showErrorMessage,u=c.showSuccessMessage,m=(0,i.useTranslation)().t,d=(0,r.useHistory)(),p={requestedDeliveryTime:"",products:[{productSKU:" ",productIdType:"",denomination:"",currency:window.config.currency||"none",count:"",voucherState:" ",customExpiryDays:"",voucherSubTypeName:"PHYSICAL"}],comment:""},f=a.useCallback((function(e){n(!0),A(e).then((function(e){0===e.resultCode?(u(e.resultDescription),d.push("/home/voucher/bulk-voucher-order")):s(e.resultDescription)})).catch((function(e){return s(e)})).finally((function(){return n(!1)}))}),[]);return a.createElement(l.SeamlessContainer,{title:m("createBulkVoucherOrderPageTitle"),description:m("createBulkVoucherOrderPageDescription")},a.createElement("div",{style:{height:"100%",width:"100%"}},a.createElement(Bt,{data:p,admin:!1,onFormSubmit:function(e){return f(e)}})))},ir=function(){var e=(0,r.useRouteMatch)().path,t=ne()().AccessControlled;return a.createElement(r.Switch,null,a.createElement(r.Route,{path:e+"/create"},a.createElement(t,{feature:pe},a.createElement(lr,null))),a.createElement(r.Route,{path:e+"/view-orders/:orderId/view-batches/:serialRange/view/:serialNumber"},a.createElement(t,{feature:me},a.createElement(fa,null))),a.createElement(r.Route,{path:e+"/view-orders/:orderId/view-batches/:serialRange"},a.createElement(t,{feature:ue},a.createElement(pa,null))),a.createElement(r.Route,{path:e+"/view-orders/:orderId"},a.createElement(t,{feature:fe},a.createElement(rr,null))),a.createElement(r.Route,null,a.createElement(t,{feature:"ALLORDERS"},a.createElement(er,null))))},or=function(){var e=(0,i.useTranslation)().t;return a.createElement(l.SeamlessContainer,{title:e("customerViewPageTitle"),description:e("customerViewPageDescription")},a.createElement(Dn,null))},cr=function(){var e=ne()().AccessControlled;return a.createElement(r.Switch,null,a.createElement(r.Route,null,a.createElement(e,{feature:"SUBSCRIBERINFO"},a.createElement(or,null))))};var sr={orderId:"",batchNumber:"",printerProfileId:" ",rangeIdentifier:{type:"BATCH",start:"",end:""}};const ur=function(){var e=a.useState(!1),t=(0,o.Z)(e,2),n=(t[0],t[1]),r=w(),c=r.showErrorMessage,s=r.showSuccessMessage,u=(0,i.useTranslation)().t,m=a.useCallback((function(e){n(!0);var t={};Object.keys(e).forEach((function(n){var a,r;"object"===(0,Ne.Z)(e["".concat(n)])?(null!==(a=e["".concat(n)])&&void 0!==a&&a.start||null!==(r=e["".concat(n)])&&void 0!==r&&r.start)&&(t["".concat(n)]=e["".concat(n)]):e["".concat(n)]&&(t["".concat(n)]=e["".concat(n)])})),function(e){return I("/vms/v1/order/assign-printer-profile",{method:"PATCH",body:e})}(t).then((function(e){0===e.resultCode?s(e.resultDescription):c(e.resultDescription)})).catch((function(e){return c(e)})).finally((function(){return n(!1)}))}),[]);return a.createElement(l.SeamlessContainer,{title:u("printerProfile"),description:u("assignPrinterPageDescription")},a.createElement(Vn,{data:sr,isAssignPrinterProfilePage:!0,onFormSubmit:function(e){return m(e)}}))},mr=function(){var e=ne()().AccessControlled;return a.createElement(r.Switch,null,a.createElement(r.Route,null,a.createElement(e,{feature:"ASSIGNPRINTER"},a.createElement(ur,null))))};function dr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function pr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dr(Object(n),!0).forEach((function(t){(0,N.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fr={orderId:"",batchNumber:"",ownerId:"",rangeIdentifier:{type:"BATCH",start:"",end:""}};const hr=function(){var e=a.useState(!1),t=(0,o.Z)(e,2),n=(t[0],t[1]),r=w(),c=r.showErrorMessage,s=r.showSuccessMessage,u=(0,i.useTranslation)().t,m=a.useCallback((function(e){n(!0);var t={};Object.keys(e).forEach((function(n){var a,r;"object"===(0,Ne.Z)(e["".concat(n)])?(null!==(a=e["".concat(n)])&&void 0!==a&&a.start||null!==(r=e["".concat(n)])&&void 0!==r&&r.end)&&(t["".concat(n)]=e["".concat(n)]):e["".concat(n)]&&(t["".concat(n)]=e["".concat(n)])})),function(e){return I("/vms/v1/order/change-voucher-owner-id-or-activate-voucher",{method:"PATCH",body:e})}(pr(pr({},t),{},{ownerId:t.activationFlag?void 0:t.ownerId})).then((function(e){0===e.resultCode?s(e.resultDescription):c(e.resultDescription)})).catch((function(e){return c(e)})).finally((function(){return n(!1)}))}),[]);return a.createElement(l.SeamlessContainer,{title:u("distributeVoucher"),description:u("DistributeVouchersPageDescription")},a.createElement(Vn,{data:fr,isAssignPrinterProfilePage:!1,onFormSubmit:function(e){return m(e)}}))},gr=function(){var e=ne()().AccessControlled;return a.createElement(r.Switch,null,a.createElement(r.Route,null,a.createElement(e,{feature:"DISTRIBUTEORACTIVATEVOUCHER"},a.createElement(hr,null))))};var Er=n(19034),vr=n.n(Er);const Zr=function(){var e=a.useState(!1),t=(0,o.Z)(e,2),n=(t[0],t[1]),c=w(),s=c.showErrorMessage,u=c.showSuccessMessage,m=(0,i.useTranslation)().t,d=(0,r.useHistory)(),p={requestedDeliveryTime:null,products:[{productSKU:" ",productIdType:"",denomination:"",currency:window.config.currency||"none",count:"",voucherState:" ",customExpiryDays:"",voucherSubTypeName:"PHYSICAL"}],comment:""},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYYMMDD";return vr()(e).format(t)},h=a.useCallback((function(e){n(!0);var t={requestedDeliveryTime:e.requestedDeliveryTime?f(e.requestedDeliveryTime,"YYYY-MM-DDTHH:mm:ss")+"Z":"",products:e.products,comment:e.comment};A(t).then((function(e){0===e.resultCode?(u(e.resultDescription),d.push("/home/voucher/voucher-generation")):s(e.resultDescription)})).catch((function(e){return s(e)})).finally((function(){return n(!1)}))}),[]);return a.createElement(l.SeamlessContainer,{title:m("bulkVoucherGenerationPageTitle"),description:m("bulkVoucherGenerationPageDescription")},a.createElement("div",{style:{height:"100%",width:"100%"}},a.createElement(Bt,{data:p,admin:!0,onFormSubmit:function(e){return h(e)}})))},br=function(){var e=ne()().AccessControlled;return a.createElement(r.Switch,null,a.createElement(r.Route,null,a.createElement(e,{feature:"VOUCHERGENERATION"},a.createElement(Zr,null))))},Sr=function(){var e=(0,i.useTranslation)().t;return a.createElement(l.SeamlessContainer,{title:e("BulkUploadInfoPageTitle"),description:e("BulkUploadInfoPageDescription")},a.createElement(An,{isReconcilePage:!1}))},yr=function(){var e=ne()().AccessControlled;return a.createElement(r.Switch,null,a.createElement(r.Route,null,a.createElement(e,{feature:"BULKUPLOAD"},a.createElement(Sr,null))))},Nr=function(){var e=(0,i.useTranslation)().t;return a.createElement(l.SeamlessContainer,{title:e("reconcilePageTitle"),description:e("reconcilePageDescription")},a.createElement(An,{isReconcilePage:!0}))},Cr=function(){var e=ne()().AccessControlled;return a.createElement(r.Switch,null,a.createElement(r.Route,null,a.createElement(e,{feature:"RECONCILE"},a.createElement(Nr,null))))},wr=function(){var e=(0,i.useTranslation)().t;return a.createElement(l.SeamlessContainer,{title:e("reconcileSearchPageTitle"),description:e("reconcileSearchPageDescription")},a.createElement(Hn,null))},Tr=function(){var e=ne()().AccessControlled;return a.createElement(r.Switch,null,a.createElement(r.Route,null,a.createElement(e,{feature:"RECONCILESEARCH"},a.createElement(wr,null))))};var xr={subscriberMSISDN:"",denomination:"",productSKU:" "};const Rr=function(){var e=(0,i.useTranslation)().t,t=a.useState(!1),n=(0,o.Z)(t,2),r=n[0],c=n[1],s=w().showErrorMessage,u=a.useState([]),m=(0,o.Z)(u,2),d=m[0],p=m[1],f=a.useState(),h=(0,o.Z)(f,2),g=h[0],E=h[1];return a.useEffect((function(){var e;c(!0),g&&function(e){return I("/vms/v1/voucherOnDemand/search",{method:"POST",body:e})}({subscriberMSISDN:g.subscriberMSISDN,denomination:g.denomination?g.denomination:void 0,productSKU:null!==(e=g.productSKU)&&void 0!==e&&e.trim()?g.productSKU:void 0}).then((function(e){0===e.resultCode?p(e.voucherOnDemandTransactions):(s(e.resultDescription),p([]))})).catch((function(e){return s(e)})).finally((function(){return c(!1)}))}),[g]),a.createElement(l.SeamlessContainer,{title:e("resendHrnSearchPageTitle"),description:e("resendHrnSearchPageDescription")},a.createElement(oa,{data:xr,onFormSubmit:function(e){return function(e){E(e)}(e)},setVouchersOnDemand:p}),d.length>0?a.createElement(ua,{loading:r,vouchersOnDemand:d}):null)},Pr=function(){var e=ne()().AccessControlled;return a.createElement(r.Switch,null,a.createElement(r.Route,null,a.createElement(e,{feature:"RESENDHRN"},a.createElement(Rr,null))))},Ir=function(){var e=(0,i.useTranslation)().t;return a.createElement(l.SeamlessContainer,{title:e("batchManagementSearchPageTitle"),description:e("batchManagementSearchPageDescription")},a.createElement(Hn,null))},Dr=function(){var e=ne()().AccessControlled;return a.createElement(r.Switch,null,a.createElement(r.Route,null,a.createElement(e,{feature:"BULKOPERATIONSEARCH"},a.createElement(Ir,null))))},Or=function(){var e=(0,i.useTranslation)().t;return a.createElement(l.SeamlessContainer,{title:e("printVouchers"),description:e("printVoucherPageDescription")},a.createElement(Gn,null))},kr=function(){var e=ne()().AccessControlled;return a.createElement(r.Switch,null,a.createElement(r.Route,null,a.createElement(e,{feature:"PRINTVOUCHERS"},a.createElement(Or,null))))},Vr=function(){var e=(0,i.useTranslation)().t;return a.createElement(l.SeamlessContainer,{title:e("searchBySerialRangePageTitle"),description:e("searchBySerialRangePageDescription")},a.createElement(la,null))},Br=function(){var e=ne()().AccessControlled,t=(0,r.useRouteMatch)().path;return a.createElement(r.Switch,null,a.createElement(r.Route,{path:t+"/view/:serialNumber"},a.createElement(e,{feature:me},a.createElement(fa,null))),a.createElement(r.Route,null,a.createElement(e,{feature:"SEARCHBYSERIALRANGE"},a.createElement(Vr,null))))}},96616:(e,t,n)=>{var a={"./af":95191,"./af.js":95191,"./ar":54358,"./ar-dz":71727,"./ar-dz.js":71727,"./ar-kw":98279,"./ar-kw.js":98279,"./ar-ly":87895,"./ar-ly.js":87895,"./ar-ma":11987,"./ar-ma.js":11987,"./ar-sa":52796,"./ar-sa.js":52796,"./ar-tn":12386,"./ar-tn.js":12386,"./ar.js":54358,"./az":57452,"./az.js":57452,"./be":79053,"./be.js":79053,"./bg":65428,"./bg.js":65428,"./bm":21569,"./bm.js":21569,"./bn":56212,"./bn-bd":24635,"./bn-bd.js":24635,"./bn.js":56212,"./bo":13667,"./bo.js":13667,"./br":192,"./br.js":192,"./bs":51802,"./bs.js":51802,"./ca":19118,"./ca.js":19118,"./cs":39990,"./cs.js":39990,"./cv":30557,"./cv.js":30557,"./cy":4227,"./cy.js":4227,"./da":95406,"./da.js":95406,"./de":87994,"./de-at":44139,"./de-at.js":44139,"./de-ch":86591,"./de-ch.js":86591,"./de.js":87994,"./dv":94649,"./dv.js":94649,"./el":14453,"./el.js":14453,"./en-au":48428,"./en-au.js":48428,"./en-ca":36972,"./en-ca.js":36972,"./en-gb":13224,"./en-gb.js":13224,"./en-ie":18843,"./en-ie.js":18843,"./en-il":32732,"./en-il.js":32732,"./en-in":76579,"./en-in.js":76579,"./en-nz":29851,"./en-nz.js":29851,"./en-sg":91650,"./en-sg.js":91650,"./eo":10654,"./eo.js":10654,"./es":63621,"./es-do":68791,"./es-do.js":68791,"./es-mx":67278,"./es-mx.js":67278,"./es-us":60717,"./es-us.js":60717,"./es.js":63621,"./et":72404,"./et.js":72404,"./eu":62944,"./eu.js":62944,"./fa":30496,"./fa.js":30496,"./fi":98137,"./fi.js":98137,"./fil":32872,"./fil.js":32872,"./fo":6545,"./fo.js":6545,"./fr":49090,"./fr-ca":13049,"./fr-ca.js":13049,"./fr-ch":12338,"./fr-ch.js":12338,"./fr.js":49090,"./fy":95088,"./fy.js":95088,"./ga":77812,"./ga.js":77812,"./gd":8374,"./gd.js":8374,"./gl":63649,"./gl.js":63649,"./gom-deva":52674,"./gom-deva.js":52674,"./gom-latn":44948,"./gom-latn.js":44948,"./gu":24033,"./gu.js":24033,"./he":10175,"./he.js":10175,"./hi":58055,"./hi.js":58055,"./hr":41678,"./hr.js":41678,"./hu":85111,"./hu.js":85111,"./hy-am":26530,"./hy-am.js":26530,"./id":19126,"./id.js":19126,"./is":11696,"./is.js":11696,"./it":98710,"./it-ch":38821,"./it-ch.js":38821,"./it.js":98710,"./ja":93974,"./ja.js":93974,"./jv":70648,"./jv.js":70648,"./ka":54731,"./ka.js":54731,"./kk":43501,"./kk.js":43501,"./km":84398,"./km.js":84398,"./kn":91825,"./kn.js":91825,"./ko":13729,"./ko.js":13729,"./ku":19670,"./ku.js":19670,"./ky":78797,"./ky.js":78797,"./lb":50627,"./lb.js":50627,"./lo":65859,"./lo.js":65859,"./lt":80355,"./lt.js":80355,"./lv":16594,"./lv.js":16594,"./me":45324,"./me.js":45324,"./mi":11689,"./mi.js":11689,"./mk":61308,"./mk.js":61308,"./ml":85241,"./ml.js":85241,"./mn":76320,"./mn.js":76320,"./mr":96771,"./mr.js":96771,"./ms":20503,"./ms-my":77748,"./ms-my.js":77748,"./ms.js":20503,"./mt":55534,"./mt.js":55534,"./my":62727,"./my.js":62727,"./nb":7550,"./nb.js":7550,"./ne":49899,"./ne.js":49899,"./nl":41228,"./nl-be":31225,"./nl-be.js":31225,"./nl.js":41228,"./nn":97130,"./nn.js":97130,"./oc-lnc":93130,"./oc-lnc.js":93130,"./pa-in":91282,"./pa-in.js":91282,"./pl":28190,"./pl.js":28190,"./pt":41549,"./pt-br":78135,"./pt-br.js":78135,"./pt.js":41549,"./ro":307,"./ro.js":307,"./ru":89272,"./ru.js":89272,"./sd":79248,"./sd.js":79248,"./se":74969,"./se.js":74969,"./si":65522,"./si.js":65522,"./sk":61581,"./sk.js":61581,"./sl":56428,"./sl.js":56428,"./sq":34611,"./sq.js":34611,"./sr":19821,"./sr-cyrl":20185,"./sr-cyrl.js":20185,"./sr.js":19821,"./ss":35029,"./ss.js":35029,"./sv":80939,"./sv.js":80939,"./sw":73107,"./sw.js":73107,"./ta":72304,"./ta.js":72304,"./te":72550,"./te.js":72550,"./tet":99717,"./tet.js":99717,"./tg":87669,"./tg.js":87669,"./th":94959,"./th.js":94959,"./tk":92661,"./tk.js":92661,"./tl-ph":52234,"./tl-ph.js":52234,"./tlh":94120,"./tlh.js":94120,"./tr":81111,"./tr.js":81111,"./tzl":53080,"./tzl.js":53080,"./tzm":88246,"./tzm-latn":25385,"./tzm-latn.js":25385,"./tzm.js":88246,"./ug-cn":48777,"./ug-cn.js":48777,"./uk":2014,"./uk.js":2014,"./ur":45953,"./ur.js":45953,"./uz":89716,"./uz-latn":87791,"./uz-latn.js":87791,"./uz.js":89716,"./vi":99816,"./vi.js":99816,"./x-pseudo":94450,"./x-pseudo.js":94450,"./yo":22556,"./yo.js":22556,"./zh-cn":7414,"./zh-cn.js":7414,"./zh-hk":50824,"./zh-hk.js":50824,"./zh-mo":88589,"./zh-mo.js":88589,"./zh-tw":63285,"./zh-tw.js":63285};function r(e){var t=l(e);return n(t)}function l(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=l,e.exports=r,r.id=96616}}]);