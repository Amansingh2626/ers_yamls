(self.webpackChunk_unified_portal=self.webpackChunk_unified_portal||[]).push([["src_api_ajax_ts-src_api_auth_ts"],{84496:(e,t,o)=>{"use strict";o.r(t),o.d(t,{getLang:()=>x,default:()=>D,rebuild:()=>I});var n,r,i,a,s,c,u=o(51119),l=o(94518),d=o(34367),p=o.n(d),f=o(7931),h=o(80424),g=o(76931),v=o.n(g),w=o(73562);function y(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}var m=(null===(n=window)||void 0===n?void 0:n.config).unAuthConfig,k=null===(r=null==m?void 0:m.logoutOnUnAuth)||void 0===r||r,b=function(e){var t=e.get("authorization"),o=e.get("password-expired");if(t){h.Z.dispatch((0,f.Fr)(t));try{localStorage.setItem("token",t)}catch(e){}}"true"===o&&h.Z.dispatch((0,f.an)(v().t("passwordExpireMessage","Your password has been expired. Please contact administrator.")))},S=function(){try{return localStorage.getItem("token")}catch(e){return null}},P=null===(i=window)||void 0===i||null===(a=i.config)||void 0===a?void 0:a.httpTimeout,O=(null===(s=window)||void 0===s||null===(c=s.config)||void 0===c?void 0:c.timeoutMessage)||"UI Timeout",j=P?parseInt(P,10):1e4,x=function(){var e=function(){var e="";try{e=localStorage.getItem("i18nextLng")}catch(t){e=l.ZP.language}return e}()||"en",t="en,en-IN;q=0.9,en-US;q=0.8,en-GB;q=0.7,de;q=0.6".split(",");return t[0]!==e&&(t.shift(),t.unshift(e)),t.join(",")};window.getLang=x;var Z=0,E=function(){var e=x(),t={client:"".concat(l.ZP.protocol,"://").concat(l.ZP.server,":").concat(l.ZP.port).concat(l.ZP.service,"/api"),auth:S,onDeAuthentication:function(e,t){k||t.includes("logout")||t.includes("/api/access/v1/features/resellerType/operator")||t.includes("/api/dms/auth/getResellerInfo")||t.includes("/api/oms/v2/order-payment-types")||t.includes("/api/bi-engine/v1/metadata?channel=web")?h.Z.dispatch((0,f.kS)()):l.ZP.isAllowedTokenRefresh&&Z<=0&&S()?(0,w.Bm)().then((function(e){Z=0})).catch((function(e){++Z,h.Z.dispatch((0,f.kS)())})):t.includes("login-backend")||h.Z.dispatch((0,f.Hs)(t))},onServerError:function(){return console.log("server error")},onNetworkError:function(){return console.log("on network error")},timeout:j,timeoutMessage:O,saveToken:b,getDefaultHeaders:function(){return new Headers({Accept:"application/json","Content-Type":"application/json","Accept-Language":e,validateOnly:"false"})}};return p()(function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?y(Object(o),!0).forEach((function(t){(0,u.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):y(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},t))},T=E();const D=T;var I=function(){T=E()}},73562:(e,t,o)=>{"use strict";o.d(t,{Bm:()=>a,cT:()=>s});var n=o(94518),r=o(84496),i="".concat(n.ZP.protocol,"://").concat(n.ZP.server,":").concat(n.ZP.port).concat(n.ZP.service),a=function(){return(0,r.default)("".concat(i,"/refreshToken"),{method:"POST"})},s=function(e,t){var o="/osm/v1/resource/".concat(t);return(0,r.default)(o,{method:"POST",body:e},!0)}},98028:(e,t,o)=>{"use strict";o.d(t,{Fr:()=>g,kS:()=>v,an:()=>w,Hs:()=>y,ZP:()=>m});var n,r=o(51119),i=o(94801);function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function s(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){(0,r.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var c={token:null,error:null,user:null,roles:[],featureGroup:{},rbac:{},forgotPasswordValues:{},passwordExpired:!1},u=JSON.parse(localStorage.getItem("auth")),l=u||c,d=(null===(n=window)||void 0===n?void 0:n.config).unAuthConfig,p=(null==d?void 0:d.unauthorizedMessage)||"Unauthorized Access",f=(0,i.createSlice)({name:"auth",initialState:l,reducers:{login:function(e,t){e.user=t.payload},rbacSuccess:function(e,t){e.rbac=t.payload},logout:function(e){return e.token&&(localStorage.clear(),window.location.reload()),c},unauthorized:function(e,t){var o=""!==window.location.port?":"+window.location.port:"",n=window.location.protocol+"//"+window.location.hostname+o;return window.alert(p+"\nAPI :"+t.payload),window.location.href=n,c},forceChangePassword:function(e,t){return s(s({},e),{},{passwordExpired:t.payload})},clearChangePassword:function(e,t){return s(s({},e),{},{passwordExpired:!1})},loginError:function(e,t){e.error=t.payload},forgotPasswordValues:function(e,t){e.forgotPasswordValues=t.payload},saveToken:function(e,t){e.token=t.payload},resellerInfoSuccess:function(e,t){e.user=s(s({},e.user),{},{info:t.payload})}}}),h=f.actions,g=(h.resellerInfoSuccess,h.saveToken),v=(h.login,h.loginError,h.logout),w=(h.rbacSuccess,h.forgotPasswordValues,h.forceChangePassword),y=(h.clearChangePassword,h.unauthorized);const m=f.reducer},7931:(e,t,o)=>{"use strict";o.d(t,{ZP:()=>u,an:()=>n.an,kS:()=>n.kS,Fr:()=>n.Fr,Hs:()=>n.Hs});var n=o(98028),r=o(94801),i=(0,r.createAction)("notify"),a={show:!1,body:null},s=(0,r.createSlice)({name:"notification",initialState:a,reducers:{removeNotification:function(e){e.show=!1,e.body=a.body}},extraReducers:function(e){e.addCase(i,(function(e,t){e.show=!0,e.body=t.payload}))}});s.actions.removeNotification;const c=s.reducer;const u={auth:n.ZP,notification:c}},80424:(e,t,o)=>{"use strict";o.d(t,{Z:()=>d});var n=o(51119),r=o(94801),i=o(7931),a=o(12436),s=o.n(a);function c(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function u(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?c(Object(o),!0).forEach((function(t){(0,n.Z)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var l=(0,r.configureStore)({reducer:i.ZP,devTools:!0});l.asyncReducers={},l.injectReducer=function(e,t){l.asyncReducers[e]=t;var o=(0,r.combineReducers)(u(u({},i.ZP),l.asyncReducers));l.replaceReducer(o)},l.subscribe(s()((function(){var e,t=null===(e=l.getState())||void 0===e?void 0:e.auth;t&&t.token&&t.user&&localStorage.setItem("auth",JSON.stringify(t))}),300));const d=l},75007:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>n});const n=(0,o(76866).iE)({language:"en",protocol:"http",server:"",port:"",resourceManagerPort:"3000",service:"/topupservice",isAllowedTokenRefresh:!0,locale:"/locales/{{lng}}/{{ns}}.json",modules:["inventory","kyc","admin"]})},94518:(e,t,o)=>{"use strict";o.d(t,{ZP:()=>n.default});var n=o(75007);o(76931),o(49472),o(5126),o(60790),o(65087)},60790:(e,t,o)=>{"use strict";var n=o(75376),r=o(6280),i=[],a=i.forEach,s=i.slice;function c(e){return a.call(s.call(arguments,1),(function(t){if(t)for(var o in t)void 0===e[o]&&(e[o]=t[o])})),e}var u=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,l=function(e,t,o){var n=o||{};n.path=n.path||"/";var r=e+"="+encodeURIComponent(t);if(n.maxAge>0){var i=n.maxAge-0;if(isNaN(i))throw new Error("maxAge should be a Number");r+="; Max-Age="+Math.floor(i)}if(n.domain){if(!u.test(n.domain))throw new TypeError("option domain is invalid");r+="; Domain="+n.domain}if(n.path){if(!u.test(n.path))throw new TypeError("option path is invalid");r+="; Path="+n.path}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");r+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(r+="; HttpOnly"),n.secure&&(r+="; Secure"),n.sameSite)switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;case"none":r+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r},d=function(e,t,o,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{path:"/",sameSite:"strict"};o&&(r.expires=new Date,r.expires.setTime(r.expires.getTime()+60*o*1e3)),n&&(r.domain=n),document.cookie=l(e,encodeURIComponent(t),r)},p=function(e){for(var t=e+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var r=o[n];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return null},f={name:"cookie",lookup:function(e){var t;if(e.lookupCookie&&"undefined"!=typeof document){var o=p(e.lookupCookie);o&&(t=o)}return t},cacheUserLanguage:function(e,t){t.lookupCookie&&"undefined"!=typeof document&&d(t.lookupCookie,e,t.cookieMinutes,t.cookieDomain,t.cookieOptions)}},h={name:"querystring",lookup:function(e){var t;if("undefined"!=typeof window)for(var o=window.location.search.substring(1).split("&"),n=0;n<o.length;n++){var r=o[n].indexOf("=");if(r>0)o[n].substring(0,r)===e.lookupQuerystring&&(t=o[n].substring(r+1))}return t}},g=null,v=function(){if(null!==g)return g;try{g="undefined"!==window&&null!==window.localStorage;var e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch(e){g=!1}return g},w={name:"localStorage",lookup:function(e){var t;if(e.lookupLocalStorage&&v()){var o=window.localStorage.getItem(e.lookupLocalStorage);o&&(t=o)}return t},cacheUserLanguage:function(e,t){t.lookupLocalStorage&&v()&&window.localStorage.setItem(t.lookupLocalStorage,e)}},y=null,m=function(){if(null!==y)return y;try{y="undefined"!==window&&null!==window.sessionStorage;var e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch(e){y=!1}return y},k={name:"sessionStorage",lookup:function(e){var t;if(e.lookupSessionStorage&&m()){var o=window.sessionStorage.getItem(e.lookupSessionStorage);o&&(t=o)}return t},cacheUserLanguage:function(e,t){t.lookupSessionStorage&&m()&&window.sessionStorage.setItem(t.lookupSessionStorage,e)}},b={name:"navigator",lookup:function(e){var t=[];if("undefined"!=typeof navigator){if(navigator.languages)for(var o=0;o<navigator.languages.length;o++)t.push(navigator.languages[o]);navigator.userLanguage&&t.push(navigator.userLanguage),navigator.language&&t.push(navigator.language)}return t.length>0?t:void 0}},S={name:"htmlTag",lookup:function(e){var t,o=e.htmlTag||("undefined"!=typeof document?document.documentElement:null);return o&&"function"==typeof o.getAttribute&&(t=o.getAttribute("lang")),t}},P={name:"path",lookup:function(e){var t;if("undefined"!=typeof window){var o=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(o instanceof Array)if("number"==typeof e.lookupFromPathIndex){if("string"!=typeof o[e.lookupFromPathIndex])return;t=o[e.lookupFromPathIndex].replace("/","")}else t=o[0].replace("/","")}return t}},O={name:"subdomain",lookup:function(e){var t;if("undefined"!=typeof window){var o=window.location.href.match(/(?:http[s]*\:\/\/)*(.*?)\.(?=[^\/]*\..{2,5})/gi);o instanceof Array&&(t="number"==typeof e.lookupFromSubdomainIndex?o[e.lookupFromSubdomainIndex].replace("http://","").replace("https://","").replace(".",""):o[0].replace("http://","").replace("https://","").replace(".",""))}return t}};var j=function(){function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,n.Z)(this,e),this.type="languageDetector",this.detectors={},this.init(t,o)}return(0,r.Z)(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=e,this.options=c(t,this.options||{},{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=o,this.addDetector(f),this.addDetector(h),this.addDetector(w),this.addDetector(k),this.addDetector(b),this.addDetector(S),this.addDetector(P),this.addDetector(O)}},{key:"addDetector",value:function(e){this.detectors[e.name]=e}},{key:"detect",value:function(e){var t=this;e||(e=this.options.order);var o=[];return e.forEach((function(e){if(t.detectors[e]){var n=t.detectors[e].lookup(t.options);n&&"string"==typeof n&&(n=[n]),n&&(o=o.concat(n))}})),this.services.languageUtils.getBestMatchFromCodes?o:o.length>0?o[0]:null}},{key:"cacheUserLanguage",value:function(e,t){var o=this;t||(t=this.options.caches),t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach((function(t){o.detectors[t]&&o.detectors[t].cacheUserLanguage(e,o.options)})))}}]),e}();j.type="languageDetector"},65087:(e,t,o)=>{"use strict";var n=o(3763),r=o(15970),i=[],a=i.forEach,s=i.slice;function c(e){return a.call(s.call(arguments,1),(function(t){if(t)for(var o in t)void 0===e[o]&&(e[o]=t[o])})),e}function u(e){return e?"function"==typeof e?new e:e:null}var l=function(){function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,n.Z)(this,e),this.backends=[],this.type="backend",this.init(t,o)}return(0,r.Z)(e,[{key:"init",value:function(e){var t=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;this.services=e,this.options=c(o,this.options||{},{}),this.options.backends&&this.options.backends.forEach((function(o,r){t.backends[r]=t.backends[r]||u(o),t.backends[r].init(e,t.options.backendOptions[r],n)}))}},{key:"read",value:function(e,t,o){var n=this,r=this.backends.length,i=function o(r,i){if(!(r<0)){var a=n.backends[r];a.save?(a.save(e,t,i),o(r-1,i)):o(r-1,i)}};!function a(s){if(s>=r)return o(new Error("non of the backend loaded data;",!0));var c=n.backends[s];c.read?c.read(e,t,(function(e,t){!e&&t&&Object.keys(t).length>-1?(o(null,t,s),i(s-1,t)):a(s+1)})):a(s+1)}(0)}},{key:"create",value:function(e,t,o,n){this.backends.forEach((function(r){r.create&&r.create(e,t,o,n)}))}}]),e}();l.type="backend"},5126:(e,t,o)=>{"use strict";var n=o(78239),r=o(61257),i=o(76e3),a=o(7210),s=[],c=s.forEach,u=s.slice;function l(e){return c.call(u.call(arguments,1),(function(t){if(t)for(var o in t)void 0===e[o]&&(e[o]=t[o])})),e}function d(e,t){if(t&&"object"===(0,a.Z)(t)){var o="",n=encodeURIComponent;for(var r in t)o+="&"+n(r)+"="+n(t[r]);if(!o)return e;e=e+(-1!==e.indexOf("?")?"&":"?")+o.slice(1)}return e}function p(e,t,o,n,r){n&&"object"===(0,a.Z)(n)&&(r||(n._t=new Date),n=d("",n).slice(1)),t.queryStringParams&&(e=d(e,t.queryStringParams));try{var i;(i=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0")).open(n?"POST":"GET",e,1),t.crossDomain||i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.withCredentials=!!t.withCredentials,n&&i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.overrideMimeType&&i.overrideMimeType("application/json");var s=t.customHeaders;if(s="function"==typeof s?s():s)for(var c in s)i.setRequestHeader(c,s[c]);i.onreadystatechange=function(){i.readyState>3&&o&&o(i.responseText,i)},i.send(n)}catch(e){console&&console.log(e)}}function f(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:JSON.parse,parsePayload:function(e,t,o){return(0,i.Z)({},t,o||"")},crossDomain:!1,ajax:p}}var h=function(){function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,n.Z)(this,e),this.init(t,o),this.type="backend"}return(0,r.Z)(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.services=e,this.options=l(t,this.options||{},f())}},{key:"readMulti",value:function(e,t,o){var n=this.options.loadPath;"function"==typeof this.options.loadPath&&(n=this.options.loadPath(e,t));var r=this.services.interpolator.interpolate(n,{lng:e.join("+"),ns:t.join("+")});this.loadUrl(r,o)}},{key:"read",value:function(e,t,o){var n=this.options.loadPath;"function"==typeof this.options.loadPath&&(n=this.options.loadPath([e],[t]));var r=this.services.interpolator.interpolate(n,{lng:e,ns:t});this.loadUrl(r,o)}},{key:"loadUrl",value:function(e,t){var o=this;this.options.ajax(e,this.options,(function(n,r){if(r.status>=500&&r.status<600)return t("failed loading "+e,!0);if(r.status>=400&&r.status<500)return t("failed loading "+e,!1);var i,a;try{i=o.options.parse(n,e)}catch(t){a="failed parsing "+e+" to json"}if(a)return t(a,!1);t(null,i)}))}},{key:"create",value:function(e,t,o,n){var r=this;"string"==typeof e&&(e=[e]);var i=this.options.parsePayload(t,o,n);e.forEach((function(e){var o=r.services.interpolator.interpolate(r.options.addPath,{lng:e,ns:t});r.options.ajax(o,r.options,(function(e,t){}),i)}))}}]),e}();h.type="backend"}}]);