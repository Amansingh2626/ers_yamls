(self.webpackChunk_unified_portal=self.webpackChunk_unified_portal||[]).push([["src_pages_Login_tsx"],{9390:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>_});var r=n(56470),a=n(74315),i=n(51119),o=n(77162),l=n.n(o),s=n(22459),c=n(49472),u=n(5700),p=n(18621),g=n(21015),d=n(77611),h=n(60905),f=n(90436),m=n(86689),v=n(27556),y=n(79692),b=n(12420),x=n(6277),O=n(73562),w=n(62310),E=n(56311),C=n(7931),T=n(98028),Z=n(32379),S=n.n(Z),P=n(36082),I=n(96545),k=n(57623);const A=function(){return{base64_encode:function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",r="",a=e.length%3;if(a>0)for(;a<3;a++)r+="=",e+="\0";for(a=0;a<e.length;a+=3){a>0&&a/3*4%76==0&&(n+="\r\n");var i=(e.charCodeAt(a)<<16)+(e.charCodeAt(a+1)<<8)+e.charCodeAt(a+2),o=[i>>>18&63,i>>>12&63,i>>>6&63,63&i];n+=t[o[0]]+t[o[1]]+t[o[2]]+t[o[3]]}return n.substring(0,n.length-r.length)+r},base64_decode:function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="="==(e=e.replace(new RegExp("[^"+t.split("")+"=]","g"),"")).charAt(e.length-1)?"="==e.charAt(e.length-2)?"AA":"A":"",r="";e=e.substr(0,e.length-n.length)+n;for(var a=0;a<e.length;a+=4){var i=(t.indexOf(e.charAt(a))<<18)+(t.indexOf(e.charAt(a+1))<<12)+(t.indexOf(e.charAt(a+2))<<6)+t.indexOf(e.charAt(a+3));r+=String.fromCharCode(i>>>16&255,i>>>8&255,255&i)}return r.substring(0,r.length-n.length)},getValueByKey:function(e,t,n){return(new RegExp("^"+n+t+"(.*)$","m").exec(e)||"")[1]},configJSFilter:function(e,t,n){return e.split(/\r?\n/).filter((function(e){return e.toLowerCase().indexOf(n)>-1})).toString().split(t)[1].replace(/['",]+/g,"")},dateConversion:function(e){var t,n,r,a="";e&&(a=(null==e||null===(t=e.split("T"))||void 0===t?void 0:t[0])+" "+(null==e||null===(n=e.split("T"))||void 0===n||null===(r=n[1])||void 0===r?void 0:r.slice(0,8)));return a}}};function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=(0,y.Z)((function(e){var t;return(0,b.Z)({wrapperDiv:{backgroundColor:"#f5f5f5",minHeight:"calc(100vh - 120px)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",marginBottom:e.spacing(2),transition:"all 0.5s ease"},paper:(0,i.Z)({justifyContent:"center"},e.breakpoints.up("md"),{minWidth:800}),minColHeight:(0,i.Z)({minHeight:660},e.breakpoints.down("md"),{minHeight:570}),bgWhite:{background:e.palette.background.paper},borderRadiusLarge:{borderRadius:e.spacing(3)},logoSize:{maxWidth:200},alignCenter:{display:"block",margin:"0 auto"},rightColSpacing:{padding:e.spacing(5)},primaryHeading:{marginTop:e.spacing(7.5),marginBottom:e.spacing(5),fontSize:e.typography.h4.fontSize,fontWeight:e.typography.h4.fontWeight},icon:{color:e.palette.primary.main,marginLeft:15},helperText:(t={textAlign:"center",display:"block",marginTop:e.spacing(2),marginBottom:e.spacing(4)},(0,i.Z)(t,e.breakpoints.down("md"),{marginBottom:e.spacing(2)}),(0,i.Z)(t,"textDecoration","none"),(0,i.Z)(t,"color",e.palette.text.hint),(0,i.Z)(t,"&:hover",{textDecoration:"none"}),t)})})),L=(0,p.animated)(h.Z);const _=function(){var e=(0,c.useTranslation)().t,t=j(),n=s.useState(!0),i=(0,a.Z)(n,2),o=i[0],y=i[1],b=s.useState(!1),Z=(0,a.Z)(b,2),D=Z[0],_=Z[1],H=s.useState(""),N=(0,a.Z)(H,2),M=N[0],R=N[1],B=s.useState(""),z=(0,a.Z)(B,2),F=z[0],U=z[1],q=(0,w.default)(),V=q.showErrorMessage,Q=q.showInfoMessage,J=(0,E.useDispatch)(),K=(0,u.useHistory)(),G=A().base64_encode,X=window.config,Y=X.isBase64EncodePassword||!1;s.useEffect((function(){P.WL.removeItem("forgotPasswordData")}),[]);var $=function(){var e=(0,r.Z)(l().mark((function e(t){var n,r,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y&&(t.password=G(t.password)),e.prev=1,e.next=4,(0,O.Iq)(W({channel:X.channel||"SEAMLESS-UNIFIED"},t));case 4:return n=e.sent,e.next=7,(0,O.hQ)(n.resellerType);case 7:return r=e.sent,e.next=10,(0,I.EZ)(n.requestedPrincipalId);case 10:return a=e.sent,e.next=13,J((0,C.x4)(n));case 13:return e.next=15,J((0,T.Mo)(r));case 15:return e.next=17,J((0,T.Wd)(a.resellerInfo));case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),V(e.t0);case 22:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t){return e.apply(this,arguments)}}(),ee=(0,p.useSpring)({opacity:1,from:{opacity:0}});return s.createElement(s.Fragment,null,s.createElement(g.uW,null),s.createElement("div",{className:t.wrapperDiv},s.createElement(d.Z,{maxWidth:"md"},s.createElement(v.Z,{className:(0,x.default)(t.paper,t.borderRadiusLarge),elevation:0},s.createElement(L,{style:ee,container:!0,spacing:0,className:(0,x.default)(t.bgWhite,t.borderRadiusLarge)},!o&&s.createElement(g.hz,{loginType:o,toggleLoginType:y}),s.createElement(h.Z,{item:!0,xs:12,sm:6,className:(0,x.default)(t.rightColSpacing,t.minColHeight)},s.createElement(S(),null),s.createElement(f.Z,{variant:"h4",align:"left",className:t.primaryHeading},e("loginTitle",{element:e(o?"userId":"msisdn")})),s.createElement(s.Fragment,null,s.createElement(k.U,{loginWithUserId:o,loading:D,handleLogin:function(t,n){var r,a;if(!(t=W(W({},t),{},{userId:null===(r=t)||void 0===r||null===(a=r.userId)||void 0===a?void 0:a.trim()})).loginType)return $(t);_(!0),t.isCached&&(delete t.isCached,t.otp=""),("OTP_AND_PASSWORD"===t.loginType&&t.sendOTP&&!t.otp?(0,I.gl)(t):t.sendOTP?(0,I.d0)(t):(0,I.P)(t)).then((function(t){var r=t.resultMessage||e("anErrorOccurred");200!==t.resultCode&&0!==t.resultCode&&201!==t.resultCode||(n(null,t),201===t.resultCode&&(t.userId=""),t.userId&&(J((0,C.x4)(t)),(0,O.hQ)(t.resellerType).then((function(e){return J((0,T.Mo)(e))})),(0,I.EZ)(t.requestedPrincipalId||t.userId).then((function(e){return J((0,T.Wd)(e.resellerInfo))})))),Q("".concat(r))})).catch((function(t){401===t.resultCode&&K.push("/");var n=t.resultMessage||e("loginWithOTPFailed","Login with OTP failed. Something went wrong");V(n)})).finally((function(){return _(!1)}))},captcha:M,setCaptcha:R,captchaUserValue:F,setCaptchaUserValue:U}),s.createElement(m.Z,{color:"inherit",variant:"caption",className:t.helperText,component:u.Link,to:"/login/recovery"},e("loginHelperText")))),o&&s.createElement(g.hz,{loginType:o,toggleLoginType:y}))))))}}}]);